(function () {
  'use strict';

  if (!Object.assign) {
    Object.defineProperty(Object, 'assign', {
      enumerable: false,
      configurable: true,
      writable: true,
      value: function value(target, firstSource) {

        if (target === undefined || target === null) {
          throw new TypeError('Cannot convert first argument to object');
        }
        var to = Object(target);
        for (var i = 1; i < arguments.length; i++) {
          var nextSource = arguments[i];
          if (nextSource === undefined || nextSource === null) {
            continue;
          }
          var keysArray = Object.keys(Object(nextSource));
          for (var nextIndex = 0, len = keysArray.length; nextIndex < len; nextIndex++) {
            var nextKey = keysArray[nextIndex];
            var desc = Object.getOwnPropertyDescriptor(nextSource, nextKey);
            if (desc !== undefined && desc.enumerable) {
              to[nextKey] = nextSource[nextKey];
            }
          }
        }
        return to;
      }
    });
  }
  if (!('remove' in Element.prototype)) {
    Element.prototype.remove = function () {
      if (this.parentNode) this.parentNode.removeChild(this);
    };
  }
  if (!('find' in Element.prototype)) {
    Element.prototype.find = function (query) {
      return this.querySelector(query);
    };
  }
  if (!('text' in Element.prototype)) {
    Element.prototype.text = function (text) {
      this.innerText = text;
      return this;
    };
  }
  if (!('html' in Element.prototype)) {
    Element.prototype.html = function (html) {
      if (typeof html == 'string') this.innerHTML = html;else {
        this.innerHTML = '';
        this.append(html);
      }
      return this;
    };
  }
  if (!('removeClass' in Element.prototype)) {
    Element.prototype.removeClass = function (classes) {
      var _this = this;
      classes.split(' ').forEach(function (c) {
        _this.classList.remove(c);
      });
      return this;
    };
  }
  if (!('addClass' in Element.prototype)) {
    Element.prototype.addClass = function (classes) {
      var _this2 = this;
      classes.split(' ').forEach(function (c) {
        _this2.classList.add(c);
      });
      return this;
    };
  }
  if (!('toggleClass' in Element.prototype)) {
    Element.prototype.toggleClass = function (classes, status) {
      var _this3 = this;
      classes.split(' ').forEach(function (c) {
        var has = _this3.classList.contains(c);
        if (status && !has) _this3.classList.add(c);else if (!status && has) _this3.classList.remove(c);
      });
      return this;
    };
  }
  if (!('empty' in Element.prototype)) {
    Element.prototype.empty = function () {
      this.innerHTML = '';
      return this;
    };
  }
  if (!('append' in Element.prototype)) {
    Element.prototype.append = function (child) {
      this.appendChild(child);
      return this;
    };
  }
  if (!('on' in Element.prototype)) {
    Element.prototype.on = function (on, call, options) {
      var _this4 = this;
      on.split(' ').forEach(function (e) {
        _this4.addEventListener(e, call, options);
      });
      return this;
    };
  }
  Number.prototype.pad = function (zeros) {
    var numberString = String(this);
    var zerosToAdd = zeros - numberString.length;
    var leadingZeros = "";
    for (var i = 0; i < zerosToAdd; i++) {
      leadingZeros += "0";
    }
    return leadingZeros + numberString;
  };
  if (!Math.trunc) {
    Math.trunc = function (v) {
      v = +v;
      return v - v % 1 || (!isFinite(v) || v === 0 ? v : v < 0 ? -0 : 0);
    };
  }
  if (!Array.from) {
    Array.from = function () {
      var toStr = Object.prototype.toString;
      var isCallable = function isCallable(fn) {
        return typeof fn === 'function' || toStr.call(fn) === '[object Function]';
      };
      var toInteger = function toInteger(value) {
        var number = Number(value);
        if (isNaN(number)) {
          return 0;
        }
        if (number === 0 || !isFinite(number)) {
          return number;
        }
        return (number > 0 ? 1 : -1) * Math.floor(Math.abs(number));
      };
      var maxSafeInteger = Math.pow(2, 53) - 1;
      var toLength = function toLength(value) {
        var len = toInteger(value);
        return Math.min(Math.max(len, 0), maxSafeInteger);
      };

      // Свойство length метода from равно 1.
      return function from(arrayLike /* , mapFn, thisArg */) {
        // 1. Положим C равным значению this.
        var C = this;

        // 2. Положим items равным ToObject(arrayLike).
        var items = Object(arrayLike);

        // 3. ReturnIfAbrupt(items).
        if (arrayLike == null) {
          throw new TypeError('Array.from requires an array-like object - not null or undefined');
        }

        // 4. Если mapfn равен undefined, положим mapping равным false.
        var mapFn = arguments.length > 1 ? arguments[1] : void undefined;
        var T;
        if (typeof mapFn !== 'undefined') {
          // 5. иначе
          // 5. a. Если вызов IsCallable(mapfn) равен false, выкидываем
          // исключение TypeError.
          if (!isCallable(mapFn)) {
            throw new TypeError('Array.from: when provided, the second argument must be a function');
          }

          // 5. b. Если thisArg присутствует, положим T равным thisArg;
          // иначе положим T равным undefined.
          if (arguments.length > 2) {
            T = arguments[2];
          }
        }

        // 10. Положим lenValue равным Get(items, "length").
        // 11. Положим len равным ToLength(lenValue).
        var len = toLength(items.length);

        // 13. Если IsConstructor(C) равен true, то
        // 13. a. Положим A равным результату вызова внутреннего метода
        // [[Construct]]
        // объекта C со списком аргументов, содержащим единственный элемент
        // len.
        // 14. a. Иначе, положим A равным ArrayCreate(len).
        var A = isCallable(C) ? Object(new C(len)) : new Array(len);

        // 16. Положим k равным 0.
        var k = 0;
        // 17. Пока k < len, будем повторять... (шаги с a по h)
        var kValue;
        while (k < len) {
          kValue = items[k];
          if (mapFn) {
            A[k] = typeof T === 'undefined' ? mapFn(kValue, k) : mapFn.call(T, kValue, k);
          } else {
            A[k] = kValue;
          }
          k += 1;
        }
        // 18. Положим putStatus равным Put(A, "length", len, true).
        A.length = len;
        // 20. Вернём A.
        return A;
      };
    }();
  }
  // https://tc39.github.io/ecma262/#sec-array.prototype.find
  if (!Array.prototype.find) {
    Object.defineProperty(Array.prototype, 'find', {
      value: function value(predicate) {
        // 1. Let O be ? ToObject(this value).
        if (this == null) {
          throw new TypeError('"this" is null or not defined');
        }
        var o = Object(this);

        // 2. Let len be ? ToLength(? Get(O, "length")).
        var len = o.length >>> 0;

        // 3. If IsCallable(predicate) is false, throw a TypeError
        // exception.
        if (typeof predicate !== 'function') {
          throw new TypeError('predicate must be a function');
        }

        // 4. If thisArg was supplied, let T be thisArg; else let T be
        // undefined.
        var thisArg = arguments[1];

        // 5. Let k be 0.
        var k = 0;

        // 6. Repeat, while k < len
        while (k < len) {
          // a. Let Pk be ! ToString(k).
          // b. Let kValue be ? Get(O, Pk).
          // c. Let testResult be ToBoolean(? Call(predicate, T, « kValue,
          // k, O »)).
          // d. If testResult is true, return kValue.
          var kValue = o[k];
          if (predicate.call(thisArg, kValue, k, o)) {
            return kValue;
          }
          // e. Increase k by 1.
          k++;
        }

        // 7. Return undefined.
        return undefined;
      },
      configurable: true,
      writable: true
    });
  }
  // https://tc39.github.io/ecma262/#sec-array.prototype.includes
  if (!Array.prototype.includes) {
    Object.defineProperty(Array.prototype, 'includes', {
      value: function value(searchElement, fromIndex) {
        if (this == null) {
          throw new TypeError('"this" is null or not defined');
        }

        // 1. Let O be ? ToObject(this value).
        var o = Object(this);

        // 2. Let len be ? ToLength(? Get(O, "length")).
        var len = o.length >>> 0;

        // 3. If len is 0, return false.
        if (len === 0) {
          return false;
        }

        // 4. Let n be ? ToInteger(fromIndex).
        // (If fromIndex is undefined, this step produces the value 0.)
        var n = fromIndex | 0;

        // 5. If n ≥ 0, then
        // a. Let k be n.
        // 6. Else n < 0,
        // a. Let k be len + n.
        // b. If k < 0, let k be 0.
        var k = Math.max(n >= 0 ? n : len - Math.abs(n), 0);
        function sameValueZero(x, y) {
          return x === y || typeof x === 'number' && typeof y === 'number' && isNaN(x) && isNaN(y);
        }

        // 7. Repeat, while k < len
        while (k < len) {
          // a. Let elementK be the result of ? Get(O, ! ToString(k)).
          // b. If SameValueZero(searchElement, elementK) is true, return
          // true.
          if (sameValueZero(o[k], searchElement)) {
            return true;
          }
          // c. Increase k by 1.
          k++;
        }

        // 8. Return false
        return false;
      }
    });
  }
  if (!String.prototype.includes) {
    String.prototype.includes = function (search, start) {

      if (search instanceof RegExp) {
        throw TypeError('first argument must not be a RegExp');
      }
      if (start === undefined) {
        start = 0;
      }
      return this.indexOf(search, start) !== -1;
    };
  }
  if (!Object.entries) {
    Object.entries = function (obj) {
      var ownProps = Object.keys(obj),
        i = ownProps.length,
        resArray = new Array(i); // preallocate the Array
      while (i--) resArray[i] = [ownProps[i], obj[ownProps[i]]];
      return resArray;
    };
  }
  if (!Function.prototype.bind) {
    Function.prototype.bind = function (oThis) {
      if (typeof this !== 'function') {
        // ближайший аналог внутренней функции
        // IsCallable в ECMAScript 5
        throw new TypeError('Function.prototype.bind - what is trying to be bound is not callable');
      }
      var aArgs = Array.prototype.slice.call(arguments, 1),
        fToBind = this,
        fNOP = function fNOP() {},
        fBound = function fBound() {
          return fToBind.apply(this instanceof fNOP && oThis ? this : oThis, aArgs.concat(Array.prototype.slice.call(arguments)));
        };
      fNOP.prototype = this.prototype;
      fBound.prototype = new fNOP();
      return fBound;
    };
  }
  (function () {

    var _slice = Array.prototype.slice;
    try {
      // Не может использоваться с элементами DOM в IE < 9
      _slice.call(document.documentElement);
    } catch (e) {
      // В IE < 9 кидается исключение
      // Функция будет работать для истинных массивов, массивоподобных объектов,
      // NamedNodeMap (атрибуты, сущности, примечания),
      // NodeList (например, getElementsByTagName), HTMLCollection (например, childNodes)
      // и не будет падать на других объектах DOM (как это происходит на элементах DOM в IE < 9)
      Array.prototype.slice = function (begin, end) {
        // IE < 9 будет недоволен аргументом end, равным undefined
        end = typeof end !== 'undefined' ? end : this.length;

        // Для родных объектов Array мы используем родную функцию slice
        if (Object.prototype.toString.call(this) === '[object Array]') {
          return _slice.call(this, begin, end);
        }

        // Массивоподобные объекты мы обрабатываем самостоятельно
        var i,
          cloned = [],
          size,
          len = this.length;

        // Обрабатываем отрицательное значение begin
        var start = begin || 0;
        start = start >= 0 ? start : len + start;

        // Обрабатываем отрицательное значение end
        var upTo = end ? end : len;
        if (end < 0) {
          upTo = len + end;
        }

        // Фактически ожидаемый размер среза
        size = upTo - start;
        if (size > 0) {
          cloned = new Array(size);
          if (this.charAt) {
            for (i = 0; i < size; i++) {
              cloned[i] = this.charAt(start + i);
            }
          } else {
            for (i = 0; i < size; i++) {
              cloned[i] = this[start + i];
            }
          }
        }
        return cloned;
      };
    }
  })();
  /*!
  * Shim for MutationObserver interface
  * Author: Graeme Yeates (github.com/megawac)
  * Repository: https://github.com/megawac/MutationObserver.js
  * License: WTFPL V2, 2004 (wtfpl.net).
  * Though credit and staring the repo will make me feel pretty, you can modify and redistribute as you please.
  * Attempts to follow spec (https://www.w3.org/TR/dom/#mutation-observers) as closely as possible for native javascript
  * See https://github.com/WebKit/webkit/blob/master/Source/WebCore/dom/MutationObserver.cpp for current webkit source c++ implementation
  */

  /**
   * prefix bugs:
      - https://bugs.webkit.org/show_bug.cgi?id=85161
      - https://bugzilla.mozilla.org/show_bug.cgi?id=749920
   * Don't use WebKitMutationObserver as Safari (6.0.5-6.1) use a buggy implementation
  */
  if (!window.MutationObserver) {
    window.MutationObserver = function (undefined$1) {

      /**
       * @param {function(Array.<MutationRecord>, MutationObserver)} listener
       * @constructor
       */
      function MutationObserver(listener) {
        /**
         * @type {Array.<Object>}
         * @private
         */
        this._watched = [];
        /** @private */
        this._listener = listener;
      }

      /**
       * Start a recursive timeout function to check all items being observed for mutations
       * @type {MutationObserver} observer
       * @private
       */
      function startMutationChecker(observer) {
        (function check() {
          var mutations = observer.takeRecords();
          if (mutations.length) {
            // fire away
            // calling the listener with context is not spec but currently consistent with FF and WebKit
            observer._listener(mutations, observer);
          }
          /** @private */
          observer._timeout = setTimeout(check, MutationObserver._period);
        })();
      }

      /**
       * Period to check for mutations (~32 times/sec)
       * @type {number}
       * @expose
       */
      MutationObserver._period = 30 /*ms+runtime*/;

      /**
       * Exposed API
       * @expose
       * @final
       */
      MutationObserver.prototype = {
        /**
         * see https://dom.spec.whatwg.org/#dom-mutationobserver-observe
         * not going to throw here but going to follow the current spec config sets
         * @param {Node|null} $target
         * @param {Object|null} config : MutationObserverInit configuration dictionary
         * @expose
         * @return undefined
         */
        observe: function observe($target, config) {
          /**
           * Using slightly different names so closure can go ham
           * @type {!Object} : A custom mutation config
           */
          var settings = {
            attr: !!(config.attributes || config.attributeFilter || config.attributeOldValue),
            // some browsers enforce that subtree must be set with childList, attributes or characterData.
            // We don't care as spec doesn't specify this rule.
            kids: !!config.childList,
            descendents: !!config.subtree,
            charData: !!(config.characterData || config.characterDataOldValue)
          };
          var watched = this._watched;

          // remove already observed target element from pool
          for (var i = 0; i < watched.length; i++) {
            if (watched[i].tar === $target) watched.splice(i, 1);
          }
          if (config.attributeFilter) {
            /**
             * converts to a {key: true} dict for faster lookup
             * @type {Object.<String,Boolean>}
             */
            settings.afilter = reduce(config.attributeFilter, function (a, b) {
              a[b] = true;
              return a;
            }, {});
          }
          watched.push({
            tar: $target,
            fn: createMutationSearcher($target, settings)
          });

          // reconnect if not connected
          if (!this._timeout) {
            startMutationChecker(this);
          }
        },
        /**
         * Finds mutations since last check and empties the "record queue" i.e. mutations will only be found once
         * @expose
         * @return {Array.<MutationRecord>}
         */
        takeRecords: function takeRecords() {
          var mutations = [];
          var watched = this._watched;
          for (var i = 0; i < watched.length; i++) {
            watched[i].fn(mutations);
          }
          return mutations;
        },
        /**
         * @expose
         * @return undefined
         */
        disconnect: function disconnect() {
          this._watched = []; // clear the stuff being observed
          clearTimeout(this._timeout); // ready for garbage collection
          /** @private */
          this._timeout = null;
        }
      };

      /**
       * Simple MutationRecord pseudoclass. No longer exposing as its not fully compliant
       * @param {Object} data
       * @return {Object} a MutationRecord
       */
      function MutationRecord(data) {
        var settings = {
          // technically these should be on proto so hasOwnProperty will return false for non explicitly props
          type: null,
          target: null,
          addedNodes: [],
          removedNodes: [],
          previousSibling: null,
          nextSibling: null,
          attributeName: null,
          attributeNamespace: null,
          oldValue: null
        };
        for (var prop in data) {
          if (has(settings, prop) && data[prop] !== undefined$1) settings[prop] = data[prop];
        }
        return settings;
      }

      /**
       * Creates a func to find all the mutations
       *
       * @param {Node} $target
       * @param {!Object} config : A custom mutation config
       */
      function createMutationSearcher($target, config) {
        /** type {Elestuct} */
        var $oldstate = clone($target, config); // create the cloned datastructure

        /**
         * consumes array of mutations we can push to
         *
         * @param {Array.<MutationRecord>} mutations
         */
        return function (mutations) {
          var olen = mutations.length,
            dirty;
          if (config.charData && $target.nodeType === 3 && $target.nodeValue !== $oldstate.charData) {
            mutations.push(new MutationRecord({
              type: "characterData",
              target: $target,
              oldValue: $oldstate.charData
            }));
          }

          // Alright we check base level changes in attributes... easy
          if (config.attr && $oldstate.attr) {
            findAttributeMutations(mutations, $target, $oldstate.attr, config.afilter);
          }

          // check childlist or subtree for mutations
          if (config.kids || config.descendents) {
            dirty = searchSubtree(mutations, $target, $oldstate, config);
          }

          // reclone data structure if theres changes
          if (dirty || mutations.length !== olen) {
            /** type {Elestuct} */
            $oldstate = clone($target, config);
          }
        };
      }

      /* attributes + attributeFilter helpers */

      // Check if the environment has the attribute bug (#4) which cause
      // element.attributes.style to always be null.
      var hasAttributeBug = document.createElement("i");
      hasAttributeBug.style.top = 0;
      hasAttributeBug = hasAttributeBug.attributes.style.value != "null";

      /**
       * Gets an attribute value in an environment without attribute bug
       *
       * @param {Node} el
       * @param {Attr} attr
       * @return {String} an attribute value
       */
      function getAttributeSimple(el, attr) {
        // There is a potential for a warning to occur here if the attribute is a
        // custom attribute in IE<9 with a custom .toString() method. This is
        // just a warning and doesn't affect execution (see #21)
        return attr.value;
      }

      /**
       * Gets an attribute value with special hack for style attribute (see #4)
       *
       * @param {Node} el
       * @param {Attr} attr
       * @return {String} an attribute value
       */
      function getAttributeWithStyleHack(el, attr) {
        // As with getAttributeSimple there is a potential warning for custom attribtues in IE7.
        return attr.name !== "style" ? attr.value : el.style.cssText;
      }
      var getAttributeValue = hasAttributeBug ? getAttributeSimple : getAttributeWithStyleHack;

      /**
       * fast helper to check to see if attributes object of an element has changed
       * doesnt handle the textnode case
       *
       * @param {Array.<MutationRecord>} mutations
       * @param {Node} $target
       * @param {Object.<string, string>} $oldstate : Custom attribute clone data structure from clone
       * @param {Object} filter
       */
      function findAttributeMutations(mutations, $target, $oldstate, filter) {
        var checked = {};
        var attributes = $target.attributes;
        var attr;
        var name;
        var i = attributes.length;
        while (i--) {
          attr = attributes[i];
          name = attr.name;
          if (!filter || has(filter, name)) {
            if (getAttributeValue($target, attr) !== $oldstate[name]) {
              // The pushing is redundant but gzips very nicely
              mutations.push(MutationRecord({
                type: "attributes",
                target: $target,
                attributeName: name,
                oldValue: $oldstate[name],
                attributeNamespace: attr.namespaceURI // in ie<8 it incorrectly will return undefined
              }));
            }
            checked[name] = true;
          }
        }
        for (name in $oldstate) {
          if (!checked[name]) {
            mutations.push(MutationRecord({
              target: $target,
              type: "attributes",
              attributeName: name,
              oldValue: $oldstate[name]
            }));
          }
        }
      }

      /**
       * searchSubtree: array of mutations so far, element, element clone, bool
       * synchronous dfs comparision of two nodes
       * This function is applied to any observed element with childList or subtree specified
       * Sorry this is kind of confusing as shit, tried to comment it a bit...
       * codereview.stackexchange.com/questions/38351 discussion of an earlier version of this func
       *
       * @param {Array} mutations
       * @param {Node} $target
       * @param {!Object} $oldstate : A custom cloned node from clone()
       * @param {!Object} config : A custom mutation config
       */
      function searchSubtree(mutations, $target, $oldstate, config) {
        // Track if the tree is dirty and has to be recomputed (#14).
        var dirty;
        /*
         * Helper to identify node rearrangment and stuff...
         * There is no gaurentee that the same node will be identified for both added and removed nodes
         * if the positions have been shuffled.
         * conflicts array will be emptied by end of operation
         */
        function resolveConflicts(conflicts, node, $kids, $oldkids, numAddedNodes) {
          // the distance between the first conflicting node and the last
          var distance = conflicts.length - 1;
          // prevents same conflict being resolved twice consider when two nodes switch places.
          // only one should be given a mutation event (note -~ is used as a math.ceil shorthand)
          var counter = -~((distance - numAddedNodes) / 2);
          var $cur;
          var oldstruct;
          var conflict;
          while (conflict = conflicts.pop()) {
            $cur = $kids[conflict.i];
            oldstruct = $oldkids[conflict.j];

            // attempt to determine if there was node rearrangement... won't gaurentee all matches
            // also handles case where added/removed nodes cause nodes to be identified as conflicts
            if (config.kids && counter && Math.abs(conflict.i - conflict.j) >= distance) {
              mutations.push(MutationRecord({
                type: "childList",
                target: node,
                addedNodes: [$cur],
                removedNodes: [$cur],
                // haha don't rely on this please
                nextSibling: $cur.nextSibling,
                previousSibling: $cur.previousSibling
              }));
              counter--; // found conflict
            }

            // Alright we found the resorted nodes now check for other types of mutations
            if (config.attr && oldstruct.attr) findAttributeMutations(mutations, $cur, oldstruct.attr, config.afilter);
            if (config.charData && $cur.nodeType === 3 && $cur.nodeValue !== oldstruct.charData) {
              mutations.push(MutationRecord({
                type: "characterData",
                target: $cur,
                oldValue: oldstruct.charData
              }));
            }
            // now look @ subtree
            if (config.descendents) findMutations($cur, oldstruct);
          }
        }

        /**
         * Main worker. Finds and adds mutations if there are any
         * @param {Node} node
         * @param {!Object} old : A cloned data structure using internal clone
         */
        function findMutations(node, old) {
          var $kids = node.childNodes;
          var $oldkids = old.kids;
          var klen = $kids.length;
          // $oldkids will be undefined for text and comment nodes
          var olen = $oldkids ? $oldkids.length : 0;
          // if (!olen && !klen) return; // both empty; clearly no changes

          // we delay the intialization of these for marginal performance in the expected case (actually quite signficant on large subtrees when these would be otherwise unused)
          // map of checked element of ids to prevent registering the same conflict twice
          var map;
          // array of potential conflicts (ie nodes that may have been re arranged)
          var conflicts;
          var id; // element id from getElementId helper
          var idx; // index of a moved or inserted element

          var oldstruct;
          // current and old nodes
          var $cur;
          var $old;
          // track the number of added nodes so we can resolve conflicts more accurately
          var numAddedNodes = 0;

          // iterate over both old and current child nodes at the same time
          var i = 0,
            j = 0;
          // while there is still anything left in $kids or $oldkids (same as i < $kids.length || j < $oldkids.length;)
          while (i < klen || j < olen) {
            // current and old nodes at the indexs
            $cur = $kids[i];
            oldstruct = $oldkids[j];
            $old = oldstruct && oldstruct.node;
            if ($cur === $old) {
              // expected case - optimized for this case
              // check attributes as specified by config
              if (config.attr && oldstruct.attr) /* oldstruct.attr instead of textnode check */findAttributeMutations(mutations, $cur, oldstruct.attr, config.afilter);
              // check character data if node is a comment or textNode and it's being observed
              if (config.charData && oldstruct.charData !== undefined$1 && $cur.nodeValue !== oldstruct.charData) {
                mutations.push(MutationRecord({
                  type: "characterData",
                  target: $cur,
                  oldValue: oldstruct.charData
                }));
              }

              // resolve conflicts; it will be undefined if there are no conflicts - otherwise an array
              if (conflicts) resolveConflicts(conflicts, node, $kids, $oldkids, numAddedNodes);

              // recurse on next level of children. Avoids the recursive call when there are no children left to iterate
              if (config.descendents && ($cur.childNodes.length || oldstruct.kids && oldstruct.kids.length)) findMutations($cur, oldstruct);
              i++;
              j++;
            } else {
              // (uncommon case) lookahead until they are the same again or the end of children
              dirty = true;
              if (!map) {
                // delayed initalization (big perf benefit)
                map = {};
                conflicts = [];
              }
              if ($cur) {
                // check id is in the location map otherwise do a indexOf search
                if (!map[id = getElementId($cur)]) {
                  // to prevent double checking
                  // mark id as found
                  map[id] = true;
                  // custom indexOf using comparitor checking oldkids[i].node === $cur
                  if ((idx = indexOfCustomNode($oldkids, $cur, j)) === -1) {
                    if (config.kids) {
                      mutations.push(MutationRecord({
                        type: "childList",
                        target: node,
                        addedNodes: [$cur],
                        // $cur is a new node
                        nextSibling: $cur.nextSibling,
                        previousSibling: $cur.previousSibling
                      }));
                      numAddedNodes++;
                    }
                  } else {
                    conflicts.push({
                      // add conflict
                      i: i,
                      j: idx
                    });
                  }
                }
                i++;
              }
              if ($old &&
              // special case: the changes may have been resolved: i and j appear congurent so we can continue using the expected case
              $old !== $kids[i]) {
                if (!map[id = getElementId($old)]) {
                  map[id] = true;
                  if ((idx = indexOf($kids, $old, i)) === -1) {
                    if (config.kids) {
                      mutations.push(MutationRecord({
                        type: "childList",
                        target: old.node,
                        removedNodes: [$old],
                        nextSibling: $oldkids[j + 1],
                        // praise no indexoutofbounds exception
                        previousSibling: $oldkids[j - 1]
                      }));
                      numAddedNodes--;
                    }
                  } else {
                    conflicts.push({
                      i: idx,
                      j: j
                    });
                  }
                }
                j++;
              }
            } // end uncommon case
          } // end loop

          // resolve any remaining conflicts
          if (conflicts) resolveConflicts(conflicts, node, $kids, $oldkids, numAddedNodes);
        }
        findMutations($target, $oldstate);
        return dirty;
      }

      /**
       * Utility
       * Cones a element into a custom data structure designed for comparision. https://gist.github.com/megawac/8201012
       *
       * @param {Node} $target
       * @param {!Object} config : A custom mutation config
       * @return {!Object} : Cloned data structure
       */
      function clone($target, config) {
        var recurse = true; // set true so childList we'll always check the first level
        return function copy($target) {
          var elestruct = {
            /** @type {Node} */
            node: $target
          };

          // Store current character data of target text or comment node if the config requests
          // those properties to be observed.
          if (config.charData && ($target.nodeType === 3 || $target.nodeType === 8)) {
            elestruct.charData = $target.nodeValue;
          }
          // its either a element, comment, doc frag or document node
          else {
            // Add attr only if subtree is specified or top level and avoid if
            // attributes is a document object (#13).
            if (config.attr && recurse && $target.nodeType === 1) {
              /**
               * clone live attribute list to an object structure {name: val}
               * @type {Object.<string, string>}
               */
              elestruct.attr = reduce($target.attributes, function (memo, attr) {
                if (!config.afilter || config.afilter[attr.name]) {
                  memo[attr.name] = getAttributeValue($target, attr);
                }
                return memo;
              }, {});
            }

            // whether we should iterate the children of $target node
            if (recurse && (config.kids || config.charData || config.attr && config.descendents)) {
              /** @type {Array.<!Object>} : Array of custom clone */
              elestruct.kids = map($target.childNodes, copy);
            }
            recurse = config.descendents;
          }
          return elestruct;
        }($target);
      }

      /**
       * indexOf an element in a collection of custom nodes
       *
       * @param {NodeList} set
       * @param {!Object} $node : A custom cloned node
       * @param {number} idx : index to start the loop
       * @return {number}
       */
      function indexOfCustomNode(set, $node, idx) {
        return indexOf(set, $node, idx, JSCompiler_renameProperty("node"));
      }

      // using a non id (eg outerHTML or nodeValue) is extremely naive and will run into issues with nodes that may appear the same like <li></li>
      var counter = 1; // don't use 0 as id (falsy)
      /** @const */
      var expando = "mo_id";

      /**
       * Attempt to uniquely id an element for hashing. We could optimize this for legacy browsers but it hopefully wont be called enough to be a concern
       *
       * @param {Node} $ele
       * @return {(string|number)}
       */
      function getElementId($ele) {
        try {
          return $ele.id || ($ele[expando] = $ele[expando] || counter++);
        } catch (o_O) {
          // ie <8 will throw if you set an unknown property on a text node
          try {
            return $ele.nodeValue; // naive
          } catch (shitie) {
            // when text node is removed: https://gist.github.com/megawac/8355978 :(
            return counter++;
          }
        }
      }

      /**
       * **map** Apply a mapping function to each item of a set
       * @param {Array|NodeList} set
       * @param {Function} iterator
       */
      function map(set, iterator) {
        var results = [];
        for (var index = 0; index < set.length; index++) {
          results[index] = iterator(set[index], index, set);
        }
        return results;
      }

      /**
       * **Reduce** builds up a single result from a list of values
       * @param {Array|NodeList|NamedNodeMap} set
       * @param {Function} iterator
       * @param {*} [memo] Initial value of the memo.
       */
      function reduce(set, iterator, memo) {
        for (var index = 0; index < set.length; index++) {
          memo = iterator(memo, set[index], index, set);
        }
        return memo;
      }

      /**
       * **indexOf** find index of item in collection.
       * @param {Array|NodeList} set
       * @param {Object} item
       * @param {number} idx
       * @param {string} [prop] Property on set item to compare to item
       */
      function indexOf(set, item, idx, prop) {
        for /*idx = ~~idx*/
        (; idx < set.length; idx++) {
          // start idx is always given as this is internal
          if ((prop ? set[idx][prop] : set[idx]) === item) return idx;
        }
        return -1;
      }

      /**
       * @param {Object} obj
       * @param {(string|number)} prop
       * @return {boolean}
       */
      function has(obj, prop) {
        return obj[prop] !== undefined$1; // will be nicely inlined by gcc
      }

      // GCC hack see https://stackoverflow.com/a/23202438/1517919
      function JSCompiler_renameProperty(a) {
        return a;
      }
      return MutationObserver;
    }(void 0);
  }
  /**
   * map-polyfill - A Map polyfill written in TypeScript, unit tested using Jasmine and Karma.
   *
   * @author Brenden Palmer
   * @version v0.0.1-alpha.2
   * @license MIT
   */
  !function () {

    var t;
    !function (t) {
      var e = function () {
        function t(t, e) {
          this.index = 0, this.map = null, this.done = !1, this.map = t, this.type = e;
        }
        return t.prototype.next = function () {
          var t;
          return this.map.keyArray.length > this.index ? ("entries" === this.type ? t = [this.map.keyArray[this.index], this.map.get(this.map.keyArray[this.index])] : "keys" === this.type ? t = this.map.keyArray[this.index] : "values" === this.type && (t = this.map.get(this.map.keyArray[this.index])), this.index++) : this.done = !0, {
            value: t,
            done: this.done
          };
        }, t;
      }();
      t.MapIterator = e;
    }(t || (t = {}));
    var t;
    !function (t) {
      var e = function () {
        function t() {}
        return Object.defineProperty(t, "MAP_KEY_IDENTIFIER", {
          get: function get() {
            return "MAP_KEY_IDENTIFIER_OZAbzyeCu3_spF91dwX14";
          },
          enumerable: !0,
          configurable: !0
        }), Object.defineProperty(t, "MAP_SET_THROWABLE_MESSAGE", {
          get: function get() {
            return "Invalid value used as map key";
          },
          enumerable: !0,
          configurable: !0
        }), t;
      }();
      t.MapConstants = e;
    }(t || (t = {}));
    var t;
    !function (t) {
      var e = function () {
        function t() {
          if (null !== t.instance) throw "Get the instance of the MapSequencer using the getInstance method.";
          this.identifier = 0;
        }
        return t.getInstance = function () {
          return null === t.instance && (t.instance = new t()), t.instance;
        }, t.prototype.next = function () {
          return "Map_CJPOYUrpwK_aHBtMHXsTM" + String(this.identifier++);
        }, t.instance = null, t;
      }();
      t.MapSequencer = e;
    }(t || (t = {}));
    var t;
    !function (t) {
      var e = function () {
        function e() {}
        return e.defineProperty = function (n) {
          var r;
          if (e.isValidObject(n) === !1) throw new TypeError(t.MapConstants.MAP_SET_THROWABLE_MESSAGE);
          if ("undefined" == typeof n[t.MapConstants.MAP_KEY_IDENTIFIER]) {
            r = t.MapSequencer.getInstance().next();
            try {
              Object.defineProperty(n, t.MapConstants.MAP_KEY_IDENTIFIER, {
                enumerable: !1,
                configurable: !1,
                get: function get() {
                  return r;
                }
              });
            } catch (i) {
              throw new TypeError(t.MapConstants.MAP_SET_THROWABLE_MESSAGE);
            }
          } else r = n[t.MapConstants.MAP_KEY_IDENTIFIER];
          return r;
        }, e.getProperty = function (n) {
          return e.isValidObject(n) === !0 ? n[t.MapConstants.MAP_KEY_IDENTIFIER] : void 0;
        }, e.isValidObject = function (t) {
          return t === Object(t);
        }, e;
      }();
      t.MapUtils = e;
    }(t || (t = {}));
    var t;
    !function (t) {
      var e = function () {
        function e(t) {
          void 0 === t && (t = []), this.map = {}, this.keyArray = [];
          for (var e = 0; e < t.length; e++) {
            var n = t[e];
            n && n.length >= 2 && this.set(n[0], n[1]);
          }
        }
        return e.prototype.get = function (e) {
          if (this.has(e) === !0) {
            var n = t.MapUtils.getProperty(e);
            return void 0 === n && (n = String(e)), this.map[n];
          }
        }, e.prototype.has = function (e) {
          var n = t.MapUtils.getProperty(e);
          return void 0 === n && (n = String(e)), void 0 !== n && "undefined" != typeof this.map[n];
        }, e.prototype["delete"] = function (e) {
          if (this.has(e) === !0) {
            var n = t.MapUtils.getProperty(e);
            return void 0 === n && (n = String(e)), this.keyArray.splice(this.keyArray.indexOf(e), 1), delete this.map[n], !0;
          }
          return !1;
        }, e.prototype.set = function (e, n) {
          this["delete"](e);
          var r;
          try {
            r = String(t.MapUtils.defineProperty(e));
          } catch (i) {
            r = String(e);
          }
          this.keyArray.push(e), this.map[r] = n;
        }, e.prototype.entries = function () {
          return new t.MapIterator(this, "entries");
        }, e.prototype.keys = function () {
          return new t.MapIterator(this, "keys");
        }, e.prototype.values = function () {
          return new t.MapIterator(this, "values");
        }, e.prototype.forEach = function (t, e) {
          for (var n = 0, r = this.keyArray; n < r.length; n++) {
            var i = r[n];
            e ? t.call(e, this.get(i), i, this) : t(this.get(i), i, this);
          }
        }, e.prototype.clear = function () {
          this.map = {}, this.keyArray = [];
        }, e;
      }();
      t.Map = e;
    }(t || (t = {}));
    var t;
    !function (t) {
      window.Map || (window.Map = t.Map);
    }(t || (t = {}));
  }();

  function _arrayLikeToArray(r, a) {
    (null == a || a > r.length) && (a = r.length);
    for (var e = 0, n = Array(a); e < a; e++) n[e] = r[e];
    return n;
  }
  function _arrayWithHoles(r) {
    if (Array.isArray(r)) return r;
  }
  function _arrayWithoutHoles(r) {
    if (Array.isArray(r)) return _arrayLikeToArray(r);
  }
  function _assertThisInitialized(e) {
    if (void 0 === e) throw new ReferenceError("this hasn't been initialised - super() hasn't been called");
    return e;
  }
  function asyncGeneratorStep(n, t, e, r, o, a, c) {
    try {
      var i = n[a](c),
        u = i.value;
    } catch (n) {
      return void e(n);
    }
    i.done ? t(u) : Promise.resolve(u).then(r, o);
  }
  function _asyncToGenerator(n) {
    return function () {
      var t = this,
        e = arguments;
      return new Promise(function (r, o) {
        var a = n.apply(t, e);
        function _next(n) {
          asyncGeneratorStep(a, r, o, _next, _throw, "next", n);
        }
        function _throw(n) {
          asyncGeneratorStep(a, r, o, _next, _throw, "throw", n);
        }
        _next(void 0);
      });
    };
  }
  function _callSuper(t, o, e) {
    return o = _getPrototypeOf(o), _possibleConstructorReturn(t, _isNativeReflectConstruct() ? Reflect.construct(o, e || [], _getPrototypeOf(t).constructor) : o.apply(t, e));
  }
  function _classCallCheck(a, n) {
    if (!(a instanceof n)) throw new TypeError("Cannot call a class as a function");
  }
  function _defineProperties(e, r) {
    for (var t = 0; t < r.length; t++) {
      var o = r[t];
      o.enumerable = o.enumerable || !1, o.configurable = !0, "value" in o && (o.writable = !0), Object.defineProperty(e, _toPropertyKey(o.key), o);
    }
  }
  function _createClass(e, r, t) {
    return r && _defineProperties(e.prototype, r), t && _defineProperties(e, t), Object.defineProperty(e, "prototype", {
      writable: !1
    }), e;
  }
  function _createForOfIteratorHelper(r, e) {
    var t = "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"];
    if (!t) {
      if (Array.isArray(r) || (t = _unsupportedIterableToArray(r)) || e && r && "number" == typeof r.length) {
        t && (r = t);
        var n = 0,
          F = function () {};
        return {
          s: F,
          n: function () {
            return n >= r.length ? {
              done: !0
            } : {
              done: !1,
              value: r[n++]
            };
          },
          e: function (r) {
            throw r;
          },
          f: F
        };
      }
      throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
    }
    var o,
      a = !0,
      u = !1;
    return {
      s: function () {
        t = t.call(r);
      },
      n: function () {
        var r = t.next();
        return a = r.done, r;
      },
      e: function (r) {
        u = !0, o = r;
      },
      f: function () {
        try {
          a || null == t.return || t.return();
        } finally {
          if (u) throw o;
        }
      }
    };
  }
  function _defineProperty(e, r, t) {
    return (r = _toPropertyKey(r)) in e ? Object.defineProperty(e, r, {
      value: t,
      enumerable: !0,
      configurable: !0,
      writable: !0
    }) : e[r] = t, e;
  }
  function _get() {
    return _get = "undefined" != typeof Reflect && Reflect.get ? Reflect.get.bind() : function (e, t, r) {
      var p = _superPropBase(e, t);
      if (p) {
        var n = Object.getOwnPropertyDescriptor(p, t);
        return n.get ? n.get.call(arguments.length < 3 ? e : r) : n.value;
      }
    }, _get.apply(null, arguments);
  }
  function _getPrototypeOf(t) {
    return _getPrototypeOf = Object.setPrototypeOf ? Object.getPrototypeOf.bind() : function (t) {
      return t.__proto__ || Object.getPrototypeOf(t);
    }, _getPrototypeOf(t);
  }
  function _inherits(t, e) {
    if ("function" != typeof e && null !== e) throw new TypeError("Super expression must either be null or a function");
    t.prototype = Object.create(e && e.prototype, {
      constructor: {
        value: t,
        writable: !0,
        configurable: !0
      }
    }), Object.defineProperty(t, "prototype", {
      writable: !1
    }), e && _setPrototypeOf(t, e);
  }
  function _isNativeReflectConstruct() {
    try {
      var t = !Boolean.prototype.valueOf.call(Reflect.construct(Boolean, [], function () {}));
    } catch (t) {}
    return (_isNativeReflectConstruct = function () {
      return !!t;
    })();
  }
  function _iterableToArray(r) {
    if ("undefined" != typeof Symbol && null != r[Symbol.iterator] || null != r["@@iterator"]) return Array.from(r);
  }
  function _iterableToArrayLimit(r, l) {
    var t = null == r ? null : "undefined" != typeof Symbol && r[Symbol.iterator] || r["@@iterator"];
    if (null != t) {
      var e,
        n,
        i,
        u,
        a = [],
        f = !0,
        o = !1;
      try {
        if (i = (t = t.call(r)).next, 0 === l) {
          if (Object(t) !== t) return;
          f = !1;
        } else for (; !(f = (e = i.call(t)).done) && (a.push(e.value), a.length !== l); f = !0);
      } catch (r) {
        o = !0, n = r;
      } finally {
        try {
          if (!f && null != t.return && (u = t.return(), Object(u) !== u)) return;
        } finally {
          if (o) throw n;
        }
      }
      return a;
    }
  }
  function _nonIterableRest() {
    throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  function _nonIterableSpread() {
    throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.");
  }
  function ownKeys(e, r) {
    var t = Object.keys(e);
    if (Object.getOwnPropertySymbols) {
      var o = Object.getOwnPropertySymbols(e);
      r && (o = o.filter(function (r) {
        return Object.getOwnPropertyDescriptor(e, r).enumerable;
      })), t.push.apply(t, o);
    }
    return t;
  }
  function _objectSpread2(e) {
    for (var r = 1; r < arguments.length; r++) {
      var t = null != arguments[r] ? arguments[r] : {};
      r % 2 ? ownKeys(Object(t), !0).forEach(function (r) {
        _defineProperty(e, r, t[r]);
      }) : Object.getOwnPropertyDescriptors ? Object.defineProperties(e, Object.getOwnPropertyDescriptors(t)) : ownKeys(Object(t)).forEach(function (r) {
        Object.defineProperty(e, r, Object.getOwnPropertyDescriptor(t, r));
      });
    }
    return e;
  }
  function _possibleConstructorReturn(t, e) {
    if (e && ("object" == typeof e || "function" == typeof e)) return e;
    if (void 0 !== e) throw new TypeError("Derived constructors may only return object or undefined");
    return _assertThisInitialized(t);
  }
  function _regeneratorRuntime() {
    _regeneratorRuntime = function () {
      return e;
    };
    var t,
      e = {},
      r = Object.prototype,
      n = r.hasOwnProperty,
      o = Object.defineProperty || function (t, e, r) {
        t[e] = r.value;
      },
      i = "function" == typeof Symbol ? Symbol : {},
      a = i.iterator || "@@iterator",
      c = i.asyncIterator || "@@asyncIterator",
      u = i.toStringTag || "@@toStringTag";
    function define(t, e, r) {
      return Object.defineProperty(t, e, {
        value: r,
        enumerable: !0,
        configurable: !0,
        writable: !0
      }), t[e];
    }
    try {
      define({}, "");
    } catch (t) {
      define = function (t, e, r) {
        return t[e] = r;
      };
    }
    function wrap(t, e, r, n) {
      var i = e && e.prototype instanceof Generator ? e : Generator,
        a = Object.create(i.prototype),
        c = new Context(n || []);
      return o(a, "_invoke", {
        value: makeInvokeMethod(t, r, c)
      }), a;
    }
    function tryCatch(t, e, r) {
      try {
        return {
          type: "normal",
          arg: t.call(e, r)
        };
      } catch (t) {
        return {
          type: "throw",
          arg: t
        };
      }
    }
    e.wrap = wrap;
    var h = "suspendedStart",
      l = "suspendedYield",
      f = "executing",
      s = "completed",
      y = {};
    function Generator() {}
    function GeneratorFunction() {}
    function GeneratorFunctionPrototype() {}
    var p = {};
    define(p, a, function () {
      return this;
    });
    var d = Object.getPrototypeOf,
      v = d && d(d(values([])));
    v && v !== r && n.call(v, a) && (p = v);
    var g = GeneratorFunctionPrototype.prototype = Generator.prototype = Object.create(p);
    function defineIteratorMethods(t) {
      ["next", "throw", "return"].forEach(function (e) {
        define(t, e, function (t) {
          return this._invoke(e, t);
        });
      });
    }
    function AsyncIterator(t, e) {
      function invoke(r, o, i, a) {
        var c = tryCatch(t[r], t, o);
        if ("throw" !== c.type) {
          var u = c.arg,
            h = u.value;
          return h && "object" == typeof h && n.call(h, "__await") ? e.resolve(h.__await).then(function (t) {
            invoke("next", t, i, a);
          }, function (t) {
            invoke("throw", t, i, a);
          }) : e.resolve(h).then(function (t) {
            u.value = t, i(u);
          }, function (t) {
            return invoke("throw", t, i, a);
          });
        }
        a(c.arg);
      }
      var r;
      o(this, "_invoke", {
        value: function (t, n) {
          function callInvokeWithMethodAndArg() {
            return new e(function (e, r) {
              invoke(t, n, e, r);
            });
          }
          return r = r ? r.then(callInvokeWithMethodAndArg, callInvokeWithMethodAndArg) : callInvokeWithMethodAndArg();
        }
      });
    }
    function makeInvokeMethod(e, r, n) {
      var o = h;
      return function (i, a) {
        if (o === f) throw Error("Generator is already running");
        if (o === s) {
          if ("throw" === i) throw a;
          return {
            value: t,
            done: !0
          };
        }
        for (n.method = i, n.arg = a;;) {
          var c = n.delegate;
          if (c) {
            var u = maybeInvokeDelegate(c, n);
            if (u) {
              if (u === y) continue;
              return u;
            }
          }
          if ("next" === n.method) n.sent = n._sent = n.arg;else if ("throw" === n.method) {
            if (o === h) throw o = s, n.arg;
            n.dispatchException(n.arg);
          } else "return" === n.method && n.abrupt("return", n.arg);
          o = f;
          var p = tryCatch(e, r, n);
          if ("normal" === p.type) {
            if (o = n.done ? s : l, p.arg === y) continue;
            return {
              value: p.arg,
              done: n.done
            };
          }
          "throw" === p.type && (o = s, n.method = "throw", n.arg = p.arg);
        }
      };
    }
    function maybeInvokeDelegate(e, r) {
      var n = r.method,
        o = e.iterator[n];
      if (o === t) return r.delegate = null, "throw" === n && e.iterator.return && (r.method = "return", r.arg = t, maybeInvokeDelegate(e, r), "throw" === r.method) || "return" !== n && (r.method = "throw", r.arg = new TypeError("The iterator does not provide a '" + n + "' method")), y;
      var i = tryCatch(o, e.iterator, r.arg);
      if ("throw" === i.type) return r.method = "throw", r.arg = i.arg, r.delegate = null, y;
      var a = i.arg;
      return a ? a.done ? (r[e.resultName] = a.value, r.next = e.nextLoc, "return" !== r.method && (r.method = "next", r.arg = t), r.delegate = null, y) : a : (r.method = "throw", r.arg = new TypeError("iterator result is not an object"), r.delegate = null, y);
    }
    function pushTryEntry(t) {
      var e = {
        tryLoc: t[0]
      };
      1 in t && (e.catchLoc = t[1]), 2 in t && (e.finallyLoc = t[2], e.afterLoc = t[3]), this.tryEntries.push(e);
    }
    function resetTryEntry(t) {
      var e = t.completion || {};
      e.type = "normal", delete e.arg, t.completion = e;
    }
    function Context(t) {
      this.tryEntries = [{
        tryLoc: "root"
      }], t.forEach(pushTryEntry, this), this.reset(!0);
    }
    function values(e) {
      if (e || "" === e) {
        var r = e[a];
        if (r) return r.call(e);
        if ("function" == typeof e.next) return e;
        if (!isNaN(e.length)) {
          var o = -1,
            i = function next() {
              for (; ++o < e.length;) if (n.call(e, o)) return next.value = e[o], next.done = !1, next;
              return next.value = t, next.done = !0, next;
            };
          return i.next = i;
        }
      }
      throw new TypeError(typeof e + " is not iterable");
    }
    return GeneratorFunction.prototype = GeneratorFunctionPrototype, o(g, "constructor", {
      value: GeneratorFunctionPrototype,
      configurable: !0
    }), o(GeneratorFunctionPrototype, "constructor", {
      value: GeneratorFunction,
      configurable: !0
    }), GeneratorFunction.displayName = define(GeneratorFunctionPrototype, u, "GeneratorFunction"), e.isGeneratorFunction = function (t) {
      var e = "function" == typeof t && t.constructor;
      return !!e && (e === GeneratorFunction || "GeneratorFunction" === (e.displayName || e.name));
    }, e.mark = function (t) {
      return Object.setPrototypeOf ? Object.setPrototypeOf(t, GeneratorFunctionPrototype) : (t.__proto__ = GeneratorFunctionPrototype, define(t, u, "GeneratorFunction")), t.prototype = Object.create(g), t;
    }, e.awrap = function (t) {
      return {
        __await: t
      };
    }, defineIteratorMethods(AsyncIterator.prototype), define(AsyncIterator.prototype, c, function () {
      return this;
    }), e.AsyncIterator = AsyncIterator, e.async = function (t, r, n, o, i) {
      void 0 === i && (i = Promise);
      var a = new AsyncIterator(wrap(t, r, n, o), i);
      return e.isGeneratorFunction(r) ? a : a.next().then(function (t) {
        return t.done ? t.value : a.next();
      });
    }, defineIteratorMethods(g), define(g, u, "Generator"), define(g, a, function () {
      return this;
    }), define(g, "toString", function () {
      return "[object Generator]";
    }), e.keys = function (t) {
      var e = Object(t),
        r = [];
      for (var n in e) r.push(n);
      return r.reverse(), function next() {
        for (; r.length;) {
          var t = r.pop();
          if (t in e) return next.value = t, next.done = !1, next;
        }
        return next.done = !0, next;
      };
    }, e.values = values, Context.prototype = {
      constructor: Context,
      reset: function (e) {
        if (this.prev = 0, this.next = 0, this.sent = this._sent = t, this.done = !1, this.delegate = null, this.method = "next", this.arg = t, this.tryEntries.forEach(resetTryEntry), !e) for (var r in this) "t" === r.charAt(0) && n.call(this, r) && !isNaN(+r.slice(1)) && (this[r] = t);
      },
      stop: function () {
        this.done = !0;
        var t = this.tryEntries[0].completion;
        if ("throw" === t.type) throw t.arg;
        return this.rval;
      },
      dispatchException: function (e) {
        if (this.done) throw e;
        var r = this;
        function handle(n, o) {
          return a.type = "throw", a.arg = e, r.next = n, o && (r.method = "next", r.arg = t), !!o;
        }
        for (var o = this.tryEntries.length - 1; o >= 0; --o) {
          var i = this.tryEntries[o],
            a = i.completion;
          if ("root" === i.tryLoc) return handle("end");
          if (i.tryLoc <= this.prev) {
            var c = n.call(i, "catchLoc"),
              u = n.call(i, "finallyLoc");
            if (c && u) {
              if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);
              if (this.prev < i.finallyLoc) return handle(i.finallyLoc);
            } else if (c) {
              if (this.prev < i.catchLoc) return handle(i.catchLoc, !0);
            } else {
              if (!u) throw Error("try statement without catch or finally");
              if (this.prev < i.finallyLoc) return handle(i.finallyLoc);
            }
          }
        }
      },
      abrupt: function (t, e) {
        for (var r = this.tryEntries.length - 1; r >= 0; --r) {
          var o = this.tryEntries[r];
          if (o.tryLoc <= this.prev && n.call(o, "finallyLoc") && this.prev < o.finallyLoc) {
            var i = o;
            break;
          }
        }
        i && ("break" === t || "continue" === t) && i.tryLoc <= e && e <= i.finallyLoc && (i = null);
        var a = i ? i.completion : {};
        return a.type = t, a.arg = e, i ? (this.method = "next", this.next = i.finallyLoc, y) : this.complete(a);
      },
      complete: function (t, e) {
        if ("throw" === t.type) throw t.arg;
        return "break" === t.type || "continue" === t.type ? this.next = t.arg : "return" === t.type ? (this.rval = this.arg = t.arg, this.method = "return", this.next = "end") : "normal" === t.type && e && (this.next = e), y;
      },
      finish: function (t) {
        for (var e = this.tryEntries.length - 1; e >= 0; --e) {
          var r = this.tryEntries[e];
          if (r.finallyLoc === t) return this.complete(r.completion, r.afterLoc), resetTryEntry(r), y;
        }
      },
      catch: function (t) {
        for (var e = this.tryEntries.length - 1; e >= 0; --e) {
          var r = this.tryEntries[e];
          if (r.tryLoc === t) {
            var n = r.completion;
            if ("throw" === n.type) {
              var o = n.arg;
              resetTryEntry(r);
            }
            return o;
          }
        }
        throw Error("illegal catch attempt");
      },
      delegateYield: function (e, r, n) {
        return this.delegate = {
          iterator: values(e),
          resultName: r,
          nextLoc: n
        }, "next" === this.method && (this.arg = t), y;
      }
    }, e;
  }
  function _setPrototypeOf(t, e) {
    return _setPrototypeOf = Object.setPrototypeOf ? Object.setPrototypeOf.bind() : function (t, e) {
      return t.__proto__ = e, t;
    }, _setPrototypeOf(t, e);
  }
  function _slicedToArray(r, e) {
    return _arrayWithHoles(r) || _iterableToArrayLimit(r, e) || _unsupportedIterableToArray(r, e) || _nonIterableRest();
  }
  function _superPropBase(t, o) {
    for (; !{}.hasOwnProperty.call(t, o) && null !== (t = _getPrototypeOf(t)););
    return t;
  }
  function _superPropGet(t, e, o, r) {
    var p = _get(_getPrototypeOf(1 & r ? t.prototype : t), e, o);
    return 2 & r && "function" == typeof p ? function (t) {
      return p.apply(o, t);
    } : p;
  }
  function _toConsumableArray(r) {
    return _arrayWithoutHoles(r) || _iterableToArray(r) || _unsupportedIterableToArray(r) || _nonIterableSpread();
  }
  function _toPrimitive(t, r) {
    if ("object" != typeof t || !t) return t;
    var e = t[Symbol.toPrimitive];
    if (void 0 !== e) {
      var i = e.call(t, r || "default");
      if ("object" != typeof i) return i;
      throw new TypeError("@@toPrimitive must return a primitive value.");
    }
    return ("string" === r ? String : Number)(t);
  }
  function _toPropertyKey(t) {
    var i = _toPrimitive(t, "string");
    return "symbol" == typeof i ? i : i + "";
  }
  function _typeof(o) {
    "@babel/helpers - typeof";

    return _typeof = "function" == typeof Symbol && "symbol" == typeof Symbol.iterator ? function (o) {
      return typeof o;
    } : function (o) {
      return o && "function" == typeof Symbol && o.constructor === Symbol && o !== Symbol.prototype ? "symbol" : typeof o;
    }, _typeof(o);
  }
  function _unsupportedIterableToArray(r, a) {
    if (r) {
      if ("string" == typeof r) return _arrayLikeToArray(r, a);
      var t = {}.toString.call(r).slice(8, -1);
      return "Object" === t && r.constructor && (t = r.constructor.name), "Map" === t || "Set" === t ? Array.from(r) : "Arguments" === t || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(t) ? _arrayLikeToArray(r, a) : void 0;
    }
  }

  /**
   * @this {Promise}
   */
  function finallyConstructor(callback) {
    var constructor = this.constructor;
    return this.then(function (value) {
      // @ts-ignore
      return constructor.resolve(callback()).then(function () {
        return value;
      });
    }, function (reason) {
      // @ts-ignore
      return constructor.resolve(callback()).then(function () {
        // @ts-ignore
        return constructor.reject(reason);
      });
    });
  }
  function allSettled(arr) {
    var P = this;
    return new P(function (resolve, reject) {
      if (!(arr && typeof arr.length !== 'undefined')) {
        return reject(new TypeError(_typeof(arr) + ' ' + arr + ' is not iterable(cannot read property Symbol(Symbol.iterator))'));
      }
      var args = Array.prototype.slice.call(arr);
      if (args.length === 0) return resolve([]);
      var remaining = args.length;
      function res(i, val) {
        if (val && (_typeof(val) === 'object' || typeof val === 'function')) {
          var then = val.then;
          if (typeof then === 'function') {
            then.call(val, function (val) {
              res(i, val);
            }, function (e) {
              args[i] = {
                status: 'rejected',
                reason: e
              };
              if (--remaining === 0) {
                resolve(args);
              }
            });
            return;
          }
        }
        args[i] = {
          status: 'fulfilled',
          value: val
        };
        if (--remaining === 0) {
          resolve(args);
        }
      }
      for (var i = 0; i < args.length; i++) {
        res(i, args[i]);
      }
    });
  }

  /**
   * @constructor
   */
  function AggregateError(errors, message) {
    this.name = 'AggregateError', this.errors = errors;
    this.message = message || '';
  }
  AggregateError.prototype = Error.prototype;
  function any$1(arr) {
    var P = this;
    return new P(function (resolve, reject) {
      if (!(arr && typeof arr.length !== 'undefined')) {
        return reject(new TypeError('Promise.any accepts an array'));
      }
      var args = Array.prototype.slice.call(arr);
      if (args.length === 0) return reject();
      var rejectionReasons = [];
      for (var i = 0; i < args.length; i++) {
        try {
          P.resolve(args[i]).then(resolve)["catch"](function (error) {
            rejectionReasons.push(error);
            if (rejectionReasons.length === args.length) {
              reject(new AggregateError(rejectionReasons, 'All promises were rejected'));
            }
          });
        } catch (ex) {
          reject(ex);
        }
      }
    });
  }

  // Store setTimeout reference so promise-polyfill will be unaffected by
  // other code modifying setTimeout (like sinon.useFakeTimers())
  var setTimeoutFunc = setTimeout;
  function isArray$1(x) {
    return Boolean(x && typeof x.length !== 'undefined');
  }
  function noop() {}

  // Polyfill for Function.prototype.bind
  function bind$4(fn, thisArg) {
    return function () {
      fn.apply(thisArg, arguments);
    };
  }

  /**
   * @constructor
   * @param {Function} fn
   */
  function Promise$1(fn) {
    if (!(this instanceof Promise$1)) throw new TypeError('Promises must be constructed via new');
    if (typeof fn !== 'function') throw new TypeError('not a function');
    /** @type {!number} */
    this._state = 0;
    /** @type {!boolean} */
    this._handled = false;
    /** @type {Promise|undefined} */
    this._value = undefined;
    /** @type {!Array<!Function>} */
    this._deferreds = [];
    doResolve(fn, this);
  }
  function handle(self, deferred) {
    while (self._state === 3) {
      self = self._value;
    }
    if (self._state === 0) {
      self._deferreds.push(deferred);
      return;
    }
    self._handled = true;
    Promise$1._immediateFn(function () {
      var cb = self._state === 1 ? deferred.onFulfilled : deferred.onRejected;
      if (cb === null) {
        (self._state === 1 ? resolve : reject)(deferred.promise, self._value);
        return;
      }
      var ret;
      try {
        ret = cb(self._value);
      } catch (e) {
        reject(deferred.promise, e);
        return;
      }
      resolve(deferred.promise, ret);
    });
  }
  function resolve(self, newValue) {
    try {
      // Promise Resolution Procedure: https://github.com/promises-aplus/promises-spec#the-promise-resolution-procedure
      if (newValue === self) throw new TypeError('A promise cannot be resolved with itself.');
      if (newValue && (_typeof(newValue) === 'object' || typeof newValue === 'function')) {
        var then = newValue.then;
        if (newValue instanceof Promise$1) {
          self._state = 3;
          self._value = newValue;
          finale(self);
          return;
        } else if (typeof then === 'function') {
          doResolve(bind$4(then, newValue), self);
          return;
        }
      }
      self._state = 1;
      self._value = newValue;
      finale(self);
    } catch (e) {
      reject(self, e);
    }
  }
  function reject(self, newValue) {
    self._state = 2;
    self._value = newValue;
    finale(self);
  }
  function finale(self) {
    if (self._state === 2 && self._deferreds.length === 0) {
      Promise$1._immediateFn(function () {
        if (!self._handled) {
          Promise$1._unhandledRejectionFn(self._value);
        }
      });
    }
    for (var i = 0, len = self._deferreds.length; i < len; i++) {
      handle(self, self._deferreds[i]);
    }
    self._deferreds = null;
  }

  /**
   * @constructor
   */
  function Handler(onFulfilled, onRejected, promise) {
    this.onFulfilled = typeof onFulfilled === 'function' ? onFulfilled : null;
    this.onRejected = typeof onRejected === 'function' ? onRejected : null;
    this.promise = promise;
  }

  /**
   * Take a potentially misbehaving resolver function and make sure
   * onFulfilled and onRejected are only called once.
   *
   * Makes no guarantees about asynchrony.
   */
  function doResolve(fn, self) {
    var done = false;
    try {
      fn(function (value) {
        if (done) return;
        done = true;
        resolve(self, value);
      }, function (reason) {
        if (done) return;
        done = true;
        reject(self, reason);
      });
    } catch (ex) {
      if (done) return;
      done = true;
      reject(self, ex);
    }
  }
  Promise$1.prototype['catch'] = function (onRejected) {
    return this.then(null, onRejected);
  };
  Promise$1.prototype.then = function (onFulfilled, onRejected) {
    // @ts-ignore
    var prom = new this.constructor(noop);
    handle(this, new Handler(onFulfilled, onRejected, prom));
    return prom;
  };
  Promise$1.prototype['finally'] = finallyConstructor;
  Promise$1.all = function (arr) {
    return new Promise$1(function (resolve, reject) {
      if (!isArray$1(arr)) {
        return reject(new TypeError('Promise.all accepts an array'));
      }
      var args = Array.prototype.slice.call(arr);
      if (args.length === 0) return resolve([]);
      var remaining = args.length;
      function res(i, val) {
        try {
          if (val && (_typeof(val) === 'object' || typeof val === 'function')) {
            var then = val.then;
            if (typeof then === 'function') {
              then.call(val, function (val) {
                res(i, val);
              }, reject);
              return;
            }
          }
          args[i] = val;
          if (--remaining === 0) {
            resolve(args);
          }
        } catch (ex) {
          reject(ex);
        }
      }
      for (var i = 0; i < args.length; i++) {
        res(i, args[i]);
      }
    });
  };
  Promise$1.any = any$1;
  Promise$1.allSettled = allSettled;
  Promise$1.resolve = function (value) {
    if (value && _typeof(value) === 'object' && value.constructor === Promise$1) {
      return value;
    }
    return new Promise$1(function (resolve) {
      resolve(value);
    });
  };
  Promise$1.reject = function (value) {
    return new Promise$1(function (resolve, reject) {
      reject(value);
    });
  };
  Promise$1.race = function (arr) {
    return new Promise$1(function (resolve, reject) {
      if (!isArray$1(arr)) {
        return reject(new TypeError('Promise.race accepts an array'));
      }
      for (var i = 0, len = arr.length; i < len; i++) {
        Promise$1.resolve(arr[i]).then(resolve, reject);
      }
    });
  };

  // Use polyfill for setImmediate for performance gains
  Promise$1._immediateFn =
  // @ts-ignore
  typeof setImmediate === 'function' && function (fn) {
    // @ts-ignore
    setImmediate(fn);
  } || function (fn) {
    setTimeoutFunc(fn, 0);
  };
  Promise$1._unhandledRejectionFn = function _unhandledRejectionFn(err) {
    if (typeof console !== 'undefined' && console) {
      console.warn('Possible Unhandled Promise Rejection:', err); // eslint-disable-line no-console
    }
  };

  /** @suppress {undefinedVars} */
  var globalNS = function () {
    // the only reliable means to get the global object is
    // `Function('return this')()`
    // However, this causes CSP violations in Chrome apps.
    if (typeof self !== 'undefined') {
      return self;
    }
    if (typeof window !== 'undefined') {
      return window;
    }
    if (typeof global !== 'undefined') {
      return global;
    }
    throw new Error('unable to locate global object');
  }();

  // Expose the polyfill if Promise is undefined or set to a
  // non-function value. The latter can be due to a named HTMLElement
  // being exposed by browsers for legacy reasons.
  // https://github.com/taylorhakes/promise-polyfill/issues/114
  if (typeof globalNS['Promise'] !== 'function') {
    globalNS['Promise'] = Promise$1;
  } else {
    if (!globalNS.Promise.prototype['finally']) {
      globalNS.Promise.prototype['finally'] = finallyConstructor;
    }
    if (!globalNS.Promise.allSettled) {
      globalNS.Promise.allSettled = allSettled;
    }
    if (!globalNS.Promise.any) {
      globalNS.Promise.any = any$1;
    }
  }

  var object$2 = {
    author: 'Sheinices',
    github: 'https://github.com/prisma/prisma-source',
    github_prisma: 'https://sheinices.github.io/prisma/',
    css_version: '3.2.3',
    app_version: '2.5.1',
    prisma_domain: 'prisma.ws',
    pris_domain: 'ws.pris.cam',
    api_domain: 'pris.cam',
    cub_site: 'cub.rip'
  };
  var plugins$1 = [];
  Object.defineProperty(object$2, 'app_digital', {
    get: function get() {
      return parseInt(object$2.app_version.replace(/\./g, ''));
    }
  });
  Object.defineProperty(object$2, 'css_digital', {
    get: function get() {
      return parseInt(object$2.css_version.replace(/\./g, ''));
    }
  });
  Object.defineProperty(object$2, 'plugins', {
    get: function get() {
      return plugins$1;
    },
    set: function set(plugin) {
      if (_typeof(plugin) == 'object' && typeof plugin.type == 'string') {
        plugins$1.push(plugin);
      }
    }
  });
  Object.defineProperty(object$2, 'cub_mirrors', {
    get: function get() {
      var prisma = ['cub.rip', 'standby.cub.red', 'kurwa-bober.ninja'];
      var users = localStorage.getItem('cub_mirrors') || '[]';
      try {
        users = JSON.parse(users);
      } catch (e) {
        users = [];
      }
      if (Object.prototype.toString.call(users) === '[object Array]' && users.length) {
        return prisma.concat(users);
      }
      return prisma;
    },
    set: function set() {}
  });
  Object.defineProperty(object$2, 'cub_domain', {
    get: function get() {
      var use = localStorage.getItem('cub_domain') || '';
      return object$2.cub_mirrors.indexOf(use) > -1 ? use : object$2.cub_mirrors[0];
    }
  });

  function toObject(a) {
    if (Object.prototype.toString.call(a) === '[object Object]') return a;else {
      a = {};
      return a;
    }
  }
  function toArray(a) {
    if (Object.prototype.toString.call(a) === '[object Object]') {
      var b = [];
      for (var i in a) b.push(a[i]);
      return b;
    } else if (typeof a == 'string' || a == null || typeof a == 'number' || typeof a == 'undefined') return [];else return a;
  }
  function decodeJson(string, empty) {
    var json = empty || {};
    if (string) {
      try {
        json = JSON.parse(string);
      } catch (e) {}
    }
    return json;
  }
  function isObject(a) {
    return Object.prototype.toString.call(a) === '[object Object]';
  }
  function isArray(a) {
    return Object.prototype.toString.call(a) === '[object Array]';
  }
  function extend(a, b, replase) {
    for (var i in b) {
      if (_typeof(b[i]) == 'object') {
        if (a[i] == undefined) a[i] = Object.prototype.toString.call(b[i]) == '[object Array]' ? [] : {};
        this.extend(a[i], b[i], replase);
      } else if (a[i] == undefined || replase) a[i] = b[i];
    }
  }
  function empty$1(a, b) {
    for (var i in b) {
      if (!a[i]) a[i] = b[i];
    }
  }
  function getKeys(a, add) {
    var k = add || [];
    for (var i in a) k.push(i);
    return k;
  }
  function getValues(a, add) {
    var k = add || [];
    for (var i in a) k.push(a[i]);
    return k;
  }
  function remove$4(from, need) {
    var inx = from.indexOf(need);
    if (inx >= 0) from.splice(inx, 1);
  }
  function clone$1(a) {
    return JSON.parse(JSON.stringify(a));
  }
  function insert(where, index, item) {
    where.splice(index, 0, item);
  }
  function destroy$b(arr) {
    var call_function = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'destroy';
    var value = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
    var where = toArray(arr);
    for (var i = where.length - 1; i >= 0; i--) {
      if (where[i] && where[i][call_function]) where[i][call_function](value);
    }
  }
  function groupBy(xs, key) {
    return xs.reduce(function (rv, x) {
      (rv[x[key]] = rv[x[key]] || []).push(x);
      return rv;
    }, {});
  }
  function removeNoIncludes(where, items) {
    for (var i = where.length - 1; i >= 0; i--) {
      if (items.indexOf(where[i]) === -1) remove$4(where, where[i]);
    }
    return where;
  }
  function shuffle(array) {
    for (var i = array.length - 1; i > 0; i--) {
      var j = Math.floor(Math.random() * (i + 1));
      var temp = array[i];
      array[i] = array[j];
      array[j] = temp;
    }
    return array;
  }
  function shuffleArrayFromIndex(array, startIndex) {
    if (startIndex < 0 || startIndex >= array.length) {
      return;
    }
    for (var i = array.length - 1; i > startIndex; i--) {
      // Выбираем случайный индекс от startIndex до i
      var j = Math.floor(Math.random() * (i - startIndex + 1)) + startIndex;
      // Меняем местами элементы array[i] и array[j]
      var _ref = [array[j], array[i]];
      array[i] = _ref[0];
      array[j] = _ref[1];
    }
  }
  function removeDuplicates(array, key) {
    var seen = [];
    return array.filter(function (a) {
      if (seen.indexOf(a[key]) == -1) {
        seen.push(a[key]);
        return true;
      } else return false;
    });
  }
  var Arrays = {
    toObject: toObject,
    toArray: toArray,
    decodeJson: decodeJson,
    isObject: isObject,
    isArray: isArray,
    extend: extend,
    getKeys: getKeys,
    getValues: getValues,
    insert: insert,
    clone: clone$1,
    remove: remove$4,
    destroy: destroy$b,
    empty: empty$1,
    groupBy: groupBy,
    removeNoIncludes: removeNoIncludes,
    shuffle: shuffle,
    shuffleArrayFromIndex: shuffleArrayFromIndex,
    removeDuplicates: removeDuplicates
  };

  function Subscribe() {
    this.add = function (type, listener) {
      if (this._listeners === undefined) this._listeners = {};
      var listeners = this._listeners;
      if (listeners[type] === undefined) listeners[type] = [];
      if (listeners[type].indexOf(listener) === -1) listeners[type].push(listener);
      return this;
    };
    this.follow = function (type, listener) {
      var _this = this;
      type.split(',').forEach(function (name) {
        _this.add(name, listener);
      });
      return this;
    };
    this.has = function (type, listener) {
      if (this._listeners === undefined) return false;
      var listeners = this._listeners;
      return listeners[type] !== undefined && listeners[type].indexOf(listener) !== -1;
    };
    this.remove = function (type, listener) {
      if (this._listeners === undefined) return this;
      var listeners = this._listeners;
      var listenerArray = listeners[type];
      if (listenerArray !== undefined) {
        var index = listenerArray.indexOf(listener);
        if (index !== -1) {
          listenerArray.splice(index, 1);
        }
      }
      return this;
    };
    this.send = function (type) {
      var event = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      if (this._listeners === undefined) return this;
      var listeners = this._listeners;
      var listenerArray = listeners[type];
      if (listenerArray !== undefined) {
        //if(Arrays.isObject(event)) event.target = this

        var array = listenerArray.slice(0);
        for (var i = 0, l = array.length; i < l; i++) {
          array[i].call(this, event);
        }
      }
      return this;
    };
    this.destroy = function () {
      this._listeners = {};
    };
  }
  function start$8() {
    return new Subscribe();
  }

  var html$25 = "<div class=\"head\">\n    <div class=\"head__body\">\n    <div class=\"head__logo-icon\"> \n    <img src=\"./img/logo.svg\" alt=\"PRISMA\" style=\"width: 100%; height: 100%; object-fit: contain;\" />\n    </div>\n        <div class=\"head__menu-icon\">\n        <img src=\"./img/logo.svg\" alt=\"PRISMA\" style=\"width: 100%; height: 100%; object-fit: contain;\" />\n        </div>\n\n        <div class=\"head__title\"></div>\n        \n        <div class=\"head__actions\">\n            <div class=\"head__action head__settings selector open--search\" icon--blink\" data-blink-interval=\"15\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M11 20C15.9706 20 20 15.9706 20 11C20 6.02944 15.9706 2 11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M18.9299 20.6898C19.4599 22.2898 20.6699 22.4498 21.5999 21.0498C22.4499 19.7698 21.8899 18.7198 20.3499 18.7198C19.2099 18.7098 18.5699 19.5998 18.9299 20.6898Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n            </div>\n\n<!--       <div class=\"head__action selector open--premium icon--blink\" data-blink-interval=\"10\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M13.4002 17.4201H10.8902C9.25016 17.4201 7.92016 16.0401 7.92016 14.3401C7.92016 13.9301 8.26016 13.5901 8.67016 13.5901C9.08016 13.5901 9.42016 13.9301 9.42016 14.3401C9.42016 15.2101 10.0802 15.9201 10.8902 15.9201H13.4002C14.0502 15.9201 14.5902 15.3401 14.5902 14.6401C14.5902 13.7701 14.2802 13.6001 13.7702 13.4201L9.74016 12.0001C8.96016 11.7301 7.91016 11.1501 7.91016 9.36008C7.91016 7.82008 9.12016 6.58008 10.6002 6.58008H13.1102C14.7502 6.58008 16.0802 7.96008 16.0802 9.66008C16.0802 10.0701 15.7402 10.4101 15.3302 10.4101C14.9202 10.4101 14.5802 10.0701 14.5802 9.66008C14.5802 8.79008 13.9202 8.08008 13.1102 8.08008H10.6002C9.95016 8.08008 9.41016 8.66008 9.41016 9.36008C9.41016 10.2301 9.72016 10.4001 10.2302 10.5801L14.2602 12.0001C15.0402 12.2701 16.0902 12.8501 16.0902 14.6401C16.0802 16.1701 14.8802 17.4201 13.4002 17.4201Z\" fill=\"currentColor\"/>\n<path d=\"M12 18.75C11.59 18.75 11.25 18.41 11.25 18V6C11.25 5.59 11.59 5.25 12 5.25C12.41 5.25 12.75 5.59 12.75 6V18C12.75 18.41 12.41 18.75 12 18.75Z\" fill=\"currentColor\"/>\n<path d=\"M15 22.75H9C3.57 22.75 1.25 20.43 1.25 15V9C1.25 3.57 3.57 1.25 9 1.25H15C20.43 1.25 22.75 3.57 22.75 9V15C22.75 20.43 20.43 22.75 15 22.75ZM9 2.75C4.39 2.75 2.75 4.39 2.75 9V15C2.75 19.61 4.39 21.25 9 21.25H15C19.61 21.25 21.25 19.61 21.25 15V9C21.25 4.39 19.61 2.75 15 2.75H9Z\" fill=\"currentColor\"/>\n</svg>\n\n            </div> -->\n\n            <div class=\"head__action selector open--exit\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M9.16998 14.83L14.83 9.17004\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M14.83 14.83L9.16998 9.17004\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n    <path d=\"M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>            \n            </div>\n            \n\n            <div class=\"head__action selector hide full-screen\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M12 12L17 7M17 7H13.25M17 7V10.75\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M12 12L7 17M7 17H10.75M7 17V13.25\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n</svg>\n\n            </div>\n        </div>\n\n        </div>\n    </div>\n</div>";

  var html$24 = "<div class=\"wrap layer--height layer--width\">\n    <div class=\"wrap__left wrap__left--hidden layer--height\"></div>\n    <div class=\"wrap__content layer--height layer--width\"></div>\n</div>";

  var html$23 = "<div class=\"menu\">\n    <div class=\"menu__header\">\n        <div class=\"menu__header-logo\">\n            <img src=\"./img/logo_menu.svg\" alt=\"PRISMA\" />\n        </div>\n        <div class=\"menu__header-time\">\n            <div class=\"menu__time-now time--clock\"></div>\n            <div class=\"menu__time-date time--full\"></div>\n            <div class=\"menu__time-week time--week\"></div>\n        </div>\n    </div> \n<div class=\"menu__case\">\n<ul class=\"menu__list\">\n        <li class=\"menu__item selector\" data-action=\"main\">\n        <div class=\"menu__ico\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M10.07 2.82009L3.14002 8.37008C2.36002 8.99008 1.86002 10.3001 2.03002 11.2801L3.36002 19.2401C3.60002 20.6601 4.96002 21.8101 6.40002 21.8101H17.6C19.03 21.8101 20.4 20.6501 20.64 19.2401L21.97 11.2801C22.13 10.3001 21.63 8.99008 20.86 8.37008L13.93 2.8301C12.86 1.9701 11.13 1.97009 10.07 2.82009Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M12 15.5C13.3807 15.5 14.5 14.3807 14.5 13C14.5 11.6193 13.3807 10.5 12 10.5C10.6193 10.5 9.5 11.6193 9.5 13C9.5 14.3807 10.6193 15.5 12 15.5Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>        \n        </div>\n        <div class=\"menu__text\">#{menu_main}</div>\n    </li>\n            <li class=\"menu__item selector\" data-action=\"movie\">\n              <div class=\"menu__ico\">\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M9.1001 12V10.52C9.1001 8.60999 10.4501 7.83999 12.1001 8.78999L13.3801 9.52999L14.6601 10.27C16.3101 11.22 16.3101 12.78 14.6601 13.73L13.3801 14.47L12.1001 15.21C10.4501 16.16 9.1001 15.38 9.1001 13.48V12Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>              \n                </div>\n                <div class=\"menu__text\">#{menu_movies}</div>\n            </li>\n            <li class=\"menu__item selector\" data-action=\"tv\">\n              <div class=\"menu__ico\">\n              <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M7.25998 2H16.73C17.38 2 17.96 2.02003 18.48 2.09003C21.25 2.40003 22 3.70001 22 7.26001V13.58C22 17.14 21.25 18.44 18.48 18.75C17.96 18.82 17.39 18.84 16.73 18.84H7.25998C6.60998 18.84 6.02998 18.82 5.50998 18.75C2.73998 18.44 1.98999 17.14 1.98999 13.58V7.26001C1.98999 3.70001 2.73998 2.40003 5.50998 2.09003C6.02998 2.02003 6.60998 2 7.25998 2Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M13.58 8.32007H17.2599\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M6.73999 14.11H6.75998H17.27\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M7 22H17\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M7.1947 8.30005H7.20368\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M10.4945 8.30005H10.5035\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>\n                </div>\n                <div class=\"menu__text\">#{menu_tv}</div>\n            </li>\n            <li class=\"menu__item selector\" data-action=\"cartoons\">\n                <div class=\"menu__ico\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M15.5 9.75C16.3284 9.75 17 9.07843 17 8.25C17 7.42157 16.3284 6.75 15.5 6.75C14.6716 6.75 14 7.42157 14 8.25C14 9.07843 14.6716 9.75 15.5 9.75Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M8.5 9.75C9.32843 9.75 10 9.07843 10 8.25C10 7.42157 9.32843 6.75 8.5 6.75C7.67157 6.75 7 7.42157 7 8.25C7 9.07843 7.67157 9.75 8.5 9.75Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M8.4 13.3H15.6C16.1 13.3 16.5 13.7 16.5 14.2C16.5 16.69 14.49 18.7 12 18.7C9.51 18.7 7.5 16.69 7.5 14.2C7.5 13.7 7.9 13.3 8.4 13.3Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                </svg>                \n                </div>\n                <div class=\"menu__text\">#{menu_multmovie}</div>\n            </li>\n            <li class=\"menu__item selector\" data-action=\"anime\">\n                <div class=\"menu__ico\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                   <path d=\"M22 20.07V12.18C22 6.57999 17.5 2 12 2C6.5 2 2 6.57999 2 12.18V20.07C2 21.33 2.74998 21.67 3.66998 20.83L4.66998 19.92C5.03998 19.58 5.64001 19.58 6.01001 19.92L8.01001 21.75C8.38001 22.09 8.97998 22.09 9.34998 21.75L11.35 19.92C11.72 19.58 12.32 19.58 12.69 19.92L14.69 21.75C15.06 22.09 15.66 22.09 16.03 21.75L18.03 19.92C18.4 19.58 19 19.58 19.37 19.92L20.37 20.83C21.25 21.67 22 21.33 22 20.07Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                      <path d=\"M8 14C10.37 15.78 13.63 15.78 16 14\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                         <path d=\"M12 11C13.1046 11 14 10.1046 14 9C14 7.89543 13.1046 7 12 7C10.8954 7 10 7.89543 10 9C10 10.1046 10.8954 11 12 11Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>\n\n                </div>\n                <div class=\"menu__text\">#{menu_anime}</div>\n            </li>\n            <li class=\"menu__item selector\" data-action=\"collections\">\n            <div class=\"menu__ico\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M13.01 2.92007L18.91 5.54007C20.61 6.29007 20.61 7.53007 18.91 8.28007L13.01 10.9001C12.34 11.2001 11.24 11.2001 10.57 10.9001L4.67 8.28007C2.97 7.53007 2.97 6.29007 4.67 5.54007L10.57 2.92007C11.24 2.62007 12.34 2.62007 13.01 2.92007Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                    <path d=\"M3 11C3 11.84 3.63 12.81 4.4 13.15L11.19 16.17C11.71 16.4 12.3 16.4 12.81 16.17L19.6 13.15C20.37 12.81 21 11.84 21 11\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                       <path d=\"M3 16C3 16.93 3.55 17.77 4.4 18.15L11.19 21.17C11.71 21.4 12.3 21.4 12.81 21.17L19.6 18.15C20.45 17.77 21 16.93 21 16\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n             </svg>\n\n            </div>\n            <div class=\"menu__text\">#{menu_collections}</div>\n        </li>\n            <!-- <li class=\"menu__item selector\" data-action=\"catalog\">\n                <div class=\"menu__ico\">\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g><g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g>\n                <g id=\"SVGRepo_iconCarrier\"> <path d=\"M14 2.00522C13.3848 2 12.7199 2 12 2C7.28595 2 4.92893 2 3.46447 3.46447C2 4.92893 2 7.28595 2 12C2 16.714 2 19.0711 3.46447 20.5355C4.92893 22 7.28595 22 12 22C16.714 22 19.0711 22 20.5355 20.5355C22 19.0711 22 16.714 22 12C22 11.2801 22 10.6152 21.9948 10\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"></path> <circle cx=\"19\" cy=\"5\" r=\"3\" stroke=\"currentColor\" stroke-width=\"1.5\"></circle> <path d=\"M2 13H5.16026C6.06543 13 6.51802 13 6.91584 13.183C7.31367 13.3659 7.60821 13.7096 8.19729 14.3968L8.80271 15.1032C9.39179 15.7904 9.68633 16.1341 10.0842 16.317C10.482 16.5 10.9346 16.5 11.8397 16.5H12.1603C13.0654 16.5 13.518 16.5 13.9158 16.317C14.3137 16.1341 14.6082 15.7904 15.1973 15.1032L15.8027 14.3968C16.3918 13.7096 16.6863 13.3659 17.0842 13.183C17.482 13 17.9346 13 18.8397 13H22\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"></path>\n                </g></svg>\n                </div>\n                <div class=\"menu__text\">#{menu_catalog}</div>\n            </li> -->\n           <!-- <li class=\"menu__item selector\" data-action=\"relise\">\n                <div class=\"menu__ico\">\n                <svg viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g>\n                <g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g>\n                <g id=\"SVGRepo_iconCarrier\">\n                <path d=\"M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z\" stroke=\"currentColor\" stroke-width=\"1.5\"></path> <path d=\"M5.5 8V10C5.5 11.1046 6.39543 12 7.5 12H10.5M10.5 8V12M10.5 12V16M13.5 8V13.2M13.5 13.2V16M13.5 13.2L15.4231 11.2M15.4231 11.2L18.5 8M15.4231 11.2L18.5 16\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\">\n                </path> </g></svg>\n                </div>\n                <div class=\"menu__text\">#{menu_relises}</div>\n            </li> -->\n            <li class=\"menu__item selector\" data-action=\"filter\">\n                <div class=\"menu__ico\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M12.37 8.87988H17.62\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M6.38 8.87988L7.13 9.62988L9.38 7.37988\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M12.37 15.8799H17.62\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M6.38 15.8799L7.13 16.6299L9.38 14.3799\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                </svg>                \n                </div>\n                <div class=\"menu__text\">#{menu_filter}</div>\n            </li>       \n            <li class=\"menu__item selector\" data-action=\"favorite\">\n                <div class=\"menu__ico\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n\n                </div>\n                <div class=\"menu__text\">#{settings_input_links}</div>\n            </li>\n\n\n            <li class=\"menu__item selector\" data-action=\"history\">\n                <div class=\"menu__ico\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M10.33 7.51001C10.83 7.36001 11.38 7.26001 12 7.26001C14.76 7.26001 17 9.50001 17 12.26C17 15.02 14.76 17.26 12 17.26C9.24 17.26 7 15.02 7 12.26C7 11.23 7.31 10.28 7.84 9.48001\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M9.62 7.64999L11.28 5.73999\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M9.62 7.6499L11.56 9.0699\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n\n                </div>\n                <div class=\"menu__text\">#{menu_history}</div>\n            </li>          \n        </ul>\n    </div>\n  \n    <div class=\"menu__case nosort\">\n\n        <ul class=\"menu__list\">\n            <li class=\"menu__item selector\" data-action=\"settings\">\n                <div class=\"menu__ico\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M2 12.8799V11.1199C2 10.0799 2.85 9.21994 3.9 9.21994C5.71 9.21994 6.45 7.93994 5.54 6.36994C5.02 5.46994 5.33 4.29994 6.24 3.77994L7.97 2.78994C8.76 2.31994 9.78 2.59994 10.25 3.38994L10.36 3.57994C11.26 5.14994 12.74 5.14994 13.65 3.57994L13.76 3.38994C14.23 2.59994 15.25 2.31994 16.04 2.78994L17.77 3.77994C18.68 4.29994 18.99 5.46994 18.47 6.36994C17.56 7.93994 18.3 9.21994 20.11 9.21994C21.15 9.21994 22.01 10.0699 22.01 11.1199V12.8799C22.01 13.9199 21.16 14.7799 20.11 14.7799C18.3 14.7799 17.56 16.0599 18.47 17.6299C18.99 18.5399 18.68 19.6999 17.77 20.2199L16.04 21.2099C15.25 21.6799 14.23 21.3999 13.76 20.6099L13.65 20.4199C12.75 18.8499 11.27 18.8499 10.36 20.4199L10.25 20.6099C9.78 21.3999 8.76 21.6799 7.97 21.2099L6.24 20.2199C5.33 19.6999 5.02 18.5299 5.54 17.6299C6.45 16.0599 5.71 14.7799 3.9 14.7799C2.85 14.7799 2 13.9199 2 12.8799Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n                </div>\n                <div class=\"menu__text\">#{menu_settings}</div>\n            </li>\n            <li class=\"menu__item selector\" data-action=\"about\">\n                <div class=\"menu__ico\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M5.06107 20.0451L5.50191 19.4383L5.06107 20.0451ZM3.95491 18.9389L4.56168 18.4981L3.95491 18.9389ZM20.0451 18.9389L19.4383 18.4981L20.0451 18.9389ZM18.9389 20.0451L18.4981 19.4383L18.9389 20.0451ZM18.9389 3.95491L18.4981 4.56168L18.9389 3.95491ZM20.0451 5.06107L19.4383 5.50191L20.0451 5.06107ZM5.06107 3.95491L5.50191 4.56168L5.06107 3.95491ZM3.95491 5.06107L4.56168 5.50191L3.95491 5.06107ZM12.75 11C12.75 10.5858 12.4142 10.25 12 10.25C11.5858 10.25 11.25 10.5858 11.25 11H12.75ZM11.25 17C11.25 17.4142 11.5858 17.75 12 17.75C12.4142 17.75 12.75 17.4142 12.75 17H11.25ZM12 20.25C10.1084 20.25 8.74999 20.249 7.69804 20.135C6.66013 20.0225 6.00992 19.8074 5.50191 19.4383L4.62023 20.6518C5.42656 21.2377 6.37094 21.5 7.53648 21.6263C8.68798 21.751 10.1418 21.75 12 21.75V20.25ZM2.25 12C2.25 13.8582 2.24897 15.312 2.37373 16.4635C2.50001 17.6291 2.76232 18.5734 3.34815 19.3798L4.56168 18.4981C4.19259 17.9901 3.97745 17.3399 3.865 16.302C3.75103 15.25 3.75 13.8916 3.75 12H2.25ZM5.50191 19.4383C5.14111 19.1762 4.82382 18.8589 4.56168 18.4981L3.34815 19.3798C3.70281 19.8679 4.13209 20.2972 4.62023 20.6518L5.50191 19.4383ZM20.25 12C20.25 13.8916 20.249 15.25 20.135 16.302C20.0225 17.3399 19.8074 17.9901 19.4383 18.4981L20.6518 19.3798C21.2377 18.5734 21.5 17.6291 21.6263 16.4635C21.751 15.312 21.75 13.8582 21.75 12H20.25ZM12 21.75C13.8582 21.75 15.312 21.751 16.4635 21.6263C17.6291 21.5 18.5734 21.2377 19.3798 20.6518L18.4981 19.4383C17.9901 19.8074 17.3399 20.0225 16.302 20.135C15.25 20.249 13.8916 20.25 12 20.25V21.75ZM19.4383 18.4981C19.1762 18.8589 18.8589 19.1762 18.4981 19.4383L19.3798 20.6518C19.8679 20.2972 20.2972 19.8679 20.6518 19.3798L19.4383 18.4981ZM12 3.75C13.8916 3.75 15.25 3.75103 16.302 3.865C17.3399 3.97745 17.9901 4.19259 18.4981 4.56168L19.3798 3.34815C18.5734 2.76232 17.6291 2.50001 16.4635 2.37373C15.312 2.24897 13.8582 2.25 12 2.25V3.75ZM21.75 12C21.75 10.1418 21.751 8.68798 21.6263 7.53648C21.5 6.37094 21.2377 5.42656 20.6518 4.62023L19.4383 5.50191C19.8074 6.00992 20.0225 6.66013 20.135 7.69804C20.249 8.74999 20.25 10.1084 20.25 12H21.75ZM18.4981 4.56168C18.8589 4.82382 19.1762 5.14111 19.4383 5.50191L20.6518 4.62023C20.2972 4.13209 19.8679 3.70281 19.3798 3.34815L18.4981 4.56168ZM12 2.25C10.1418 2.25 8.68798 2.24897 7.53648 2.37373C6.37094 2.50001 5.42656 2.76232 4.62023 3.34815L5.50191 4.56168C6.00992 4.19259 6.66013 3.97745 7.69804 3.865C8.74999 3.75103 10.1084 3.75 12 3.75V2.25ZM3.75 12C3.75 10.1084 3.75103 8.74999 3.865 7.69804C3.97745 6.66013 4.19259 6.00992 4.56168 5.50191L3.34815 4.62023C2.76232 5.42656 2.50001 6.37094 2.37373 7.53648C2.24897 8.68798 2.25 10.1418 2.25 12H3.75ZM4.62023 3.34815C4.13209 3.70281 3.70281 4.13209 3.34815 4.62023L4.56168 5.50191C4.82382 5.14111 5.14111 4.82382 5.50191 4.56168L4.62023 3.34815ZM11.25 11V17H12.75V11H11.25Z\" fill=\"currentColor\"/>\n<path d=\"M13 8C13 8.55228 12.5523 9 12 9C11.4477 9 11 8.55228 11 8C11 7.44772 11.4477 7 12 7C12.5523 7 13 7.44772 13 8Z\" fill=\"currentColor\"/>\n</svg>\n\n                </div>\n                <div class=\"menu__text\">#{menu_about}</div>\n            </li>\n            </li>\n            </li>\n        </ul>\n\n    </div>\n</div>";

  var html$22 = "<div class=\"activitys layer--width\">\n    <div class=\"activitys__slides\"></div>\n</div>";

  var html$21 = "<div class=\"activity layer--width\">\n    <div class=\"activity__body\"></div>\n    <div class=\"activity__loader\"></div>\n</div>";

  var html$20 = "<div class=\"activity-wait-refresh\">\n    <div class=\"activity-wait-refresh__title\">\u041E\u0436\u0438\u0434\u0430\u044E</div>\n    <div class=\"activity-wait-refresh__text\">\u041D\u0430\u0436\u043C\u0438\u0442\u0435 (\u0432\u043D\u0438\u0437) \u0434\u043B\u044F \u043E\u0431\u043D\u043E\u0432\u043B\u0435\u043D\u0438\u044F \u0430\u043A\u0442\u0438\u0432\u043D\u043E\u0441\u0442\u0438.</div>\n\n    <div class=\"activity-wait-refresh__items\">\n        <div>\n            <div></div>\n            <div></div>\n            <div></div>\n        </div>\n        <div>\n            <div></div>\n            <div></div>\n            <div></div>\n        </div>\n        <div>\n            <div></div>\n            <div></div>\n            <div></div>\n        </div>\n        <div>\n            <div></div>\n            <div></div>\n            <div></div>\n        </div>\n        <div>\n            <div></div>\n            <div></div>\n            <div></div>\n        </div>\n    </div>\n</div>";

  var html$1$ = "<div class=\"scroll\">\n    <div class=\"scroll__content\">\n        <div class=\"scroll__body\">\n            \n        </div>\n    </div>\n</div>";

  var html$1_ = "\n<div class=\"settings\">\n<div class=\"settings__layer\"></div>\n<div class=\"settings__content layer--height\">\n    <div class=\"settings__head\">\n        <div class=\"settings__title\">#{title_settings}</div>\n    </div>\n    <div class=\"settings__body\"></div>\n    </div>\n</div>\n";

  var html$1Z = "<div class=\"settings-grid\">\n<div class=\"settings-folder selector\" data-component=\"account\">\n    <div class=\"settings-folder__icon\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M18.14 21.62C17.26 21.88 16.22 22 15 22H8.99998C7.77998 22 6.73999 21.88 5.85999 21.62C6.07999 19.02 8.74998 16.97 12 16.97C15.25 16.97 17.92 19.02 18.14 21.62Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M15 2H9C4 2 2 4 2 9V15C2 18.78 3.14 20.85 5.86 21.62C6.08 19.02 8.75 16.97 12 16.97C15.25 16.97 17.92 19.02 18.14 21.62C20.86 20.85 22 18.78 22 15V9C22 4 20 2 15 2ZM12 14.17C10.02 14.17 8.42 12.56 8.42 10.58C8.42 8.60002 10.02 7 12 7C13.98 7 15.58 8.60002 15.58 10.58C15.58 12.56 13.98 14.17 12 14.17Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M15.58 10.58C15.58 12.56 13.98 14.17 12 14.17C10.02 14.17 8.42004 12.56 8.42004 10.58C8.42004 8.60002 10.02 7 12 7C13.98 7 15.58 8.60002 15.58 10.58Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n    </div>\n    <div class=\"settings-folder__name\">#{settings_prisma_sync}</div>\n</div>\n\n<div class=\"settings-folder selector\" data-component=\"interface\">\n    <div class=\"settings-folder__icon\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M13.01 2.92007L18.91 5.54007C20.61 6.29007 20.61 7.53007 18.91 8.28007L13.01 10.9001C12.34 11.2001 11.24 11.2001 10.57 10.9001L4.67 8.28007C2.97 7.53007 2.97 6.29007 4.67 5.54007L10.57 2.92007C11.24 2.62007 12.34 2.62007 13.01 2.92007Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M3 11C3 11.84 3.63 12.81 4.4 13.15L11.19 16.17C11.71 16.4 12.3 16.4 12.81 16.17L19.6 13.15C20.37 12.81 21 11.84 21 11\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M3 16C3 16.93 3.55 17.77 4.4 18.15L11.19 21.17C11.71 21.4 12.3 21.4 12.81 21.17L19.6 18.15C20.45 17.77 21 16.93 21 16\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n    </div>\n    <div class=\"settings-folder__name\">#{settings_main_interface}</div>\n</div>\n\n<div class=\"settings-folder selector\" data-component=\"player\">\n    <div class=\"settings-folder__icon\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M9.1001 12V10.52C9.1001 8.60999 10.4501 7.83999 12.1001 8.78999L13.3801 9.52999L14.6601 10.27C16.3101 11.22 16.3101 12.78 14.6601 13.73L13.3801 14.47L12.1001 15.21C10.4501 16.16 9.1001 15.38 9.1001 13.48V12Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n    </div>\n    <div class=\"settings-folder__name\">#{settings_main_player}</div>\n</div>\n\n<div class=\"settings-folder selector\" data-component=\"server\">\n    <div class=\"settings-folder__icon\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M7.80005 13.8001V9.6001\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M7.95001 18.0001C9.02697 18.0001 9.90002 17.127 9.90002 16.0501C9.90002 14.9731 9.02697 14.1001 7.95001 14.1001C6.87306 14.1001 6 14.9731 6 16.0501C6 17.127 6.87306 18.0001 7.95001 18.0001Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M7.79999 9.60001C8.7941 9.60001 9.59998 8.7941 9.59998 7.79999C9.59998 6.80588 8.7941 6 7.79999 6C6.80588 6 6 6.80588 6 7.79999C6 8.7941 6.80588 9.60001 7.79999 9.60001Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M16.2 9.60001C17.1941 9.60001 18 8.7941 18 7.79999C18 6.80588 17.1941 6 16.2 6C15.2059 6 14.4 6.80588 14.4 7.79999C14.4 8.7941 15.2059 9.60001 16.2 9.60001Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M7.88 13.8001C8.15 12.7501 9.10999 11.9701 10.24 11.9801L12.3 11.9901C13.87 12.0001 15.21 10.9901 15.7 9.58008\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M9 2H15C20 2 22 4 22 9V15C22 20 20 22 15 22H9C4 22 2 20 2 15V9C2 4 4 2 9 2Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n    </div>\n    <div class=\"settings-folder__name\">#{settings_main_torrserver}</div>\n</div>\n\n    <div class=\"settings-folder selector settings-folder--wide\" data-component=\"parser\">\n        <div class=\"settings-folder__icon\">\n            <img src=\"./img/icons/settings/parser.svg\" />\n        </div>\n        <div class=\"settings-folder__name\">#{settings_main_parser}</div>\n    </div>\n\n<div class=\"settings-folder selector settings-folder--wide\" data-component=\"more\">\n    <div class=\"settings-folder__icon\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M19.07 4.93L4.92999 19.07C3.11999 17.26 2 14.76 2 12C2 6.48 6.48 2 12 2C14.76 2 17.26 3.12 19.07 4.93Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M22 11.9999C22 17.5199 17.52 21.9999 12 21.9999C9.24 21.9999 6.73999 20.8799 4.92999 19.0699L19.07 4.92993C20.88 6.73993 22 9.23993 22 11.9999Z\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M7.76001 16.24L13.41 21.9\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M11.29 12.71L17.87 19.28\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M14.83 9.16992L21.12 15.4699\" stroke=\"#ffff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n    </div>\n    <div class=\"settings-folder__name\">#{settings_main_rest}</div>\n</div>\n</div>";

  var html$1Y = "<div>\n     <div class=\"settings-param selector\" data-static=\"true\">\n        <div class=\"settings-param__name\">#{settings_interface_lang}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"light_version\">\n        <div class=\"settings-param__name\">#{settings_interface_type}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <!-- <div class=\"settings-param-title\"><span>#{settings_interface_background}</span></div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"background\">\n        <div class=\"settings-param__name\">#{settings_interface_background_use}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"select\" data-name=\"background_type\">\n        <div class=\"settings-param__name\">#{settings_interface_background_type}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"black_style\">\n        <div class=\"settings-param__name\">#{settings_interface_black_style}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <!-- <div class=\"settings-param-title\"><span>#{title_card}</span></div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"select\" data-name=\"card_interfice_type\">\n        <div class=\"settings-param__name\">#{settings_interface_card_interfice}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"card_interfice_poster\">\n        <div class=\"settings-param__name\">#{settings_interface_card_poster}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"card_interfice_cover\">\n        <div class=\"settings-param__name\">#{settings_interface_card_cover}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"card_interfice_reactions\">\n        <div class=\"settings-param__name\">#{settings_interface_card_reactions}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <!-- <div class=\"settings-param-title\"><span>#{settings_interface_glass}</span></div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"glass_style\">\n        <div class=\"settings-param__name\">#{settings_interface_glass}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_interface_glass_descr}</div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"select\" data-name=\"glass_opacity\">\n        <div class=\"settings-param__name\">#{settings_interface_glass_opacity}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <div class=\"settings-param-title\"><span>#{settings_main_interface}</span></div>\n\n    <div class=\"settings-param selector is--tv\" data-type=\"select\" data-name=\"interface_style\">\n        <div class=\"settings-param__name\">#{settings_interface_style}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_interface_style_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"interface_size\">\n    <div class=\"settings-param__name\">#{settings_interface_size}</div>\n    <div class=\"settings-param__value\"></div>\n    <div class=\"settings-param__descr\">#{settings_interface_size_descr}</div>\n    </div>\n\n        <div class=\"settings-param selector\" data-type=\"select\" data-name=\"interface_size_fixed\">\n        <div class=\"settings-param__name\">#{settings_interface_size_fixed}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_interface_size_fixed_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"footer_card\">\n        <div class=\"settings-param__name\">#{settings_interface_footer_card}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_interface_footer_card_descr}</div>\n    </div>  \n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"view_trailer\">\n        <div class=\"settings-param__name\">#{settings_interface_view_trailer}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"show_options_button\">\n        <div class=\"settings-param__name\">#{settings_interface_hide_ai}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n        <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"poster_trailer\">\n        <div class=\"settings-param__name\">#{settings_interface_poster_trailer}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_interface_poster_trailer_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"background_trailer\">\n        <div class=\"settings-param__name\">#{settings_interface_background_trailer}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_interface_background_trailer_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"animation\">\n        <div class=\"settings-param__name\">#{settings_interface_animation}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_interface_animation_descr}</div>\n    </div>\n\n        <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"advanced_animation\">\n        <div class=\"settings-param__name\">#{settings_interface_advanced_animation}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_interface_advanced_animation_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"mask\">\n        <div class=\"settings-param__name\">#{settings_interface_attenuation}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_interface_attenuation_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"scroll_type\">\n        <div class=\"settings-param__name\">#{settings_interface_scroll}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"card_views_type\">\n        <div class=\"settings-param__name\">#{settings_interface_view_card}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_interface_view_card_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"hide_outside_the_screen\">\n        <div class=\"settings-param__name\">#{settings_interface_hide_outside_the_screen}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_interface_hide_outside_the_screen_descr}</div>\n    </div>\n</div>";

  var html$1X = "<div>\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"parser_use\" data-children=\"parser\">\n        <div class=\"settings-param__name\">#{settings_parser_use}</div>\n        <div class=\"settings-param__value\"></div>\n     <!--   <div class=\"settings-param__descr\">#{settings_parser_use_descr}</div> -->\n    </div>\n    <div data-parent=\"parser\">\n\n        <div data-parent=\"type\" data-visible-value=\"jackett\">\n            <div class=\"settings-param-title\"><span>Jackett</span></div>\n\n            <div class=\"settings-param selector\" data-type=\"input\" data-name=\"jackett_url\" placeholder=\"#{settings_parser_jackett_placeholder}\">\n                <div class=\"settings-param__name\">#{settings_parser_jackett_link}</div>\n                <div class=\"settings-param__value\"></div>\n                <div class=\"settings-param__descr\">#{settings_parser_jackett_link_descr}</div>\n            </div>\n\n            <div class=\"settings-param selector\" data-type=\"input\" data-name=\"jackett_key\" data-string=\"true\" placeholder=\"#{settings_parser_jackett_key_placeholder}\">\n                <div class=\"settings-param__name\">#{settings_parser_jackett_key}</div>\n                <div class=\"settings-param__value\"></div>\n                <div class=\"settings-param__descr\">#{settings_parser_jackett_key_descr}</div>\n            </div>\n\n            <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"jackett_interview\">\n                <div class=\"settings-param__name\">#{settings_parser_jackett_interview}</div>\n                <div class=\"settings-param__value\"></div>\n            </div>\n        </div>\n        \n        <div data-parent=\"type\" data-visible-value=\"prowlarr\" class=\"hide\">\n            <div class=\"settings-param-title\"><span>Prowlarr</span></div>\n\n            <div class=\"settings-param selector\" data-type=\"input\" data-name=\"prowlarr_url\" placeholder=\"#{settings_parser_jackett_placeholder}\">\n                <div class=\"settings-param__name\">#{settings_parser_jackett_link}</div>\n                <div class=\"settings-param__value\"></div>\n                <div class=\"settings-param__descr\">#{settings_parser_prowlarr_link_descr}</div>\n            </div>\n\n            <div class=\"settings-param selector\" data-type=\"input\" data-name=\"prowlarr_key\" data-string=\"true\" placeholder=\"#{settings_parser_jackett_key_placeholder}\">\n                <div class=\"settings-param__name\">#{settings_parser_jackett_key}</div>\n                <div class=\"settings-param__value\"></div>\n                <div class=\"settings-param__descr\">#{settings_parser_prowlarr_key_descr}</div>\n            </div>\n        </div>\n\n        <div class=\"settings-param-title\"><span>#{more}</span></div>\n\n        <div class=\"settings-param selector\" data-type=\"select\" data-name=\"parse_lang\">\n            <div class=\"settings-param__name\">#{settings_parser_search}</div>\n            <div class=\"settings-param__value\"></div>\n            <div class=\"settings-param__descr\">#{settings_parser_search_descr}</div>\n        </div>\n        <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"parse_timeout\">\n            <div class=\"settings-param__name\">#{settings_parser_timeout_title}</div>\n            <div class=\"settings-param__value\"></div>\n            <div class=\"settings-param__descr\">#{settings_parser_timeout_descr}</div>\n        </div>\n    <!--    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"parse_in_search\">\n            <div class=\"settings-param__name\">#{settings_parser_in_search}</div>\n            <div class=\"settings-param__value\"></div>\n            <div class=\"settings-param__descr\">#{settings_parser_in_search_descr}</div>\n        </div> -->\n    </div>\n</div>";

  var html$1W = "<div>\n    <div class=\"settings-param selector is--android\" data-type=\"toggle\" data-name=\"internal_torrclient\" data-children=\"internal_torrclient\">\n        <div class=\"settings-param__name\">#{settings_server_client}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_server_client_descr}</div>\n    </div>\n\n    <div data-parent=\"internal_torrclient\">\n\n        <div class=\"settings-param-title\"><span>#{settings_server_links}</span></div>\n\n        <div class=\"settings-param selector\" data-type=\"input\" data-name=\"torrserver_url\" placeholder=\"#{settings_server_placeholder}\">\n            <div class=\"settings-param__name\">#{settings_server_link_one}</div>\n            <div class=\"settings-param__value\"></div>\n            <div class=\"settings-param__descr\">#{settings_server_link_one_localip}</div>\n            <div class=\"settings-param__status\"></div>\n        </div>\n\n    \n    \n        <!-- <div class=\"settings-param-title\"><span>#{settings_server_additionally}</span></div> -->\n\n        <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"torrserver_savedb\">\n            <div class=\"settings-param__name\">#{settings_server_base}</div>\n            <div class=\"settings-param__value\"></div>\n            <div class=\"settings-param__descr\">#{settings_server_base_descr}</div>\n        </div> -->\n        \n        <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"torrserver_preload\">\n            <div class=\"settings-param__name\">#{settings_server_preload}</div>\n            <div class=\"settings-param__value\"></div>\n            <div class=\"settings-param__descr\">#{settings_server_preload_descr}</div>\n        </div>\n\n        <div class=\"settings-param-title\"><span>#{settings_server_auth}</span></div>\n\n        <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"torrserver_auth\" data-children=\"login\">\n            <div class=\"settings-param__name\">#{settings_server_password_use}</div>\n            <div class=\"settings-param__value\"></div>\n            <div class=\"settings-param__descr\">#{settings_torrserver_auth}</div>\n        </div>\n        \n        <div data-parent=\"login\">\n            <div class=\"settings-param selector\" data-type=\"input\" data-name=\"torrserver_login\" placeholder=\"#{settings_server_not_specified}\">\n                <div class=\"settings-param__name\">#{settings_server_login}</div>\n                <div class=\"settings-param__value\"></div>\n            </div>\n\n            <div class=\"settings-param selector\" data-type=\"input\" data-name=\"torrserver_password\" data-string=\"true\" placeholder=\"#{settings_server_not_specified}\">\n                <div class=\"settings-param__name\">#{settings_server_password}</div>\n                <div class=\"settings-param__value\"></div>\n            </div>\n        </div>\n    </div>\n</div>";

  var html$1V = "<div>\n    <div class=\"settings-param-title\"><span>#{settings_main_player}</span></div>\n      \n    <div class=\"settings-param selector is--player\" data-type=\"select\" data-name=\"player\">\n        <div class=\"settings-param__name\">#{settings_player_type}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_player_type_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"video_quality_default\">\n         <div class=\"settings-param__name\">#{settings_player_quality}</div>\n         <div class=\"settings-param__value\"></div>\n         <div class=\"settings-param__descr\">#{settings_player_quality_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector is--player\" data-type=\"select\" data-name=\"player_torrent\">\n        <div class=\"settings-param__name\">#{settings_player_torrent_type}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_player_torrent_type_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector is--android\" data-type=\"select\" data-name=\"player_launch_trailers\">\n        <div class=\"settings-param__name\">#{settings_player_launch_trailers}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n    \n    <div class=\"settings-param selector is--android\" data-type=\"button\" data-name=\"reset_player\" data-static=\"true\">\n        <div class=\"settings-param__name\">#{settings_player_reset}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_player_reset_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector is--nw\" data-type=\"input\" data-name=\"player_nw_path\" placeholder=\"\">\n        <div class=\"settings-param__name\">#{settings_player_path}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_player_path_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"player_normalization\">\n        <div class=\"settings-param__name\">#{settings_player_normalization}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_player_normalization_descr}</div>\n    </div>\n    \n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"playlist_next\">\n        <div class=\"settings-param__name\">#{settings_player_next_episode}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_player_next_episode_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"player_timecode\">\n        <div class=\"settings-param__name\">#{settings_player_timecode}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_player_timecode_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"player_rewind\">\n        <div class=\"settings-param__name\">#{settings_player_rewind_title}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_player_rewind_descr}</div>\n    </div>\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"player_scale_method\">\n        <div class=\"settings-param__name\">#{settings_player_scale}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_player_scale_descr}</div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"player_hls_method\">\n        <div class=\"settings-param__name\">#{settings_player_hls_title}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_player_hls_descr}</div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"select\" data-name=\"player_rewind\">\n        <div class=\"settings-param__name\">#{settings_player_rewind_title}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_player_rewind_descr}</div>\n    </div> -->\n    \n    <div class=\"is--has_subs\">\n        <div class=\"settings-param-title\"><span>#{settings_player_subs}</span></div>\n\n        <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"subtitles_start\">\n            <div class=\"settings-param__name\">#{settings_player_subs_use}</div>\n            <div class=\"settings-param__value\"></div>\n            <div class=\"settings-param__descr\">#{settings_player_subs_use_descr}</div>\n        </div>\n\n        <div class=\"settings-param selector\" data-type=\"select\" data-name=\"subtitles_size\">\n            <div class=\"settings-param__name\">#{settings_player_subs_size}</div>\n            <div class=\"settings-param__value\"></div>\n            <div class=\"settings-param__descr\">#{settings_player_subs_size_descr}</div>\n        </div>\n        \n        <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"subtitles_stroke\">\n            <div class=\"settings-param__name\">#{settings_player_subs_stroke_use}</div>\n            <div class=\"settings-param__value\"></div>\n            <div class=\"settings-param__descr\">#{settings_player_subs_stroke_use_descr}</div>\n        </div>\n        \n        <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"subtitles_backdrop\">\n            <div class=\"settings-param__name\">#{settings_player_subs_backdrop_use}</div>\n            <div class=\"settings-param__value\"></div>\n            <div class=\"settings-param__descr\">#{settings_player_subs_backdrop_use_descr}</div>\n        </div>\n    </div>\n\n</div>";

  var html$1U = "<div>\n    <div class=\"settings-param-title\"><span>#{settings_main_more}</span></div>\n    \n    <!-- <div class=\"settings-param selector\" data-type=\"select\" data-name=\"source\">\n        <div class=\"settings-param__name\">#{settings_rest_source_use}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_rest_source_descr}</div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"protocol\">\n        <div class=\"settings-param__name\">#{settings_rest_protocol_use}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_rest_protocol_descr}</div>\n    </div> -->\n\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"poster_size\">\n        <div class=\"settings-param__name\">#{settings_rest_tmdb_posters}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"cache_images\">\n        <div class=\"settings-param__name\">#{settings_rest_cache_images}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_rest_cache_images_descr}</div>\n    </div>\n\n    <!-- <div class=\"settings-param-title\"><span>#{settings_rest_helper}</span></div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"helper\">\n        <div class=\"settings-param__name\">#{settings_rest_helper_use}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector helper--start-again\" data-static=\"true\">\n        <div class=\"settings-param__name\">#{settings_rest_helper_reset}</div>\n    </div> -->\n    \n    <!-- <div class=\"settings-param-title\"><span>#{more}</span></div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"select\" data-name=\"pages_save_total\">\n        <div class=\"settings-param__name\">#{settings_rest_pages}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_rest_pages_descr}</div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"select\" data-name=\"time_offset\">\n        <div class=\"settings-param__name\">#{settings_rest_time}</div>\n        <div class=\"settings-param__value\"></div>\n    </div> -->\n\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"navigation_type\">\n        <div class=\"settings-param__name\">#{settings_rest_navigation}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"keyboard_type\">\n        <div class=\"settings-param__name\">#{settings_rest_keyboard}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"start_page\">\n        <div class=\"settings-param__name\">#{settings_rest_start}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_rest_start_descr}</div>\n    </div>\n\n    <div class=\"settings-param-title\"><span>#{settings_rest_screensaver}</span></div>\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"screensaver\">\n        <div class=\"settings-param__name\">#{settings_rest_screensaver_use}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"screensaver_type\">\n        <div class=\"settings-param__name\">#{settings_rest_screensaver_type}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"screensaver_time\">\n        <div class=\"settings-param__name\">#{settings_rest_screensaver_time}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"card_quality\">\n        <div class=\"settings-param__name\">#{settings_rest_card_quality}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_rest_card_quality_descr}</div>\n    </div> -->\n\n    <!-- <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"card_episodes\">\n        <div class=\"settings-param__name\">#{settings_rest_card_episodes}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_rest_card_episodes_descr}</div>\n    </div> -->\n\n    <div class=\"settings-param-title\"><span></span></div>\n\n    <div class=\"settings-param selector\" data-type=\"input\" data-name=\"device_name\" placeholder=\"#{settings_rest_device_placeholder}\">\n        <div class=\"settings-param__name\">#{settings_rest_device}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param settings-param--button layer--visible selector clear-storage\" data-static=\"true\">  \n        <div class=\"settings-param__name\">\n        #{settings_rest_cache}</div>\n        <!-- <div class=\"settings-param__descr\">#{title_left} - #{player_unknown}</div> -->\n    </div>\n</div>";

  var html$1T = "<div>\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"tmdb_lang\">\n        <div class=\"settings-param__name\">TMDB</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_rest_tmdb_lang}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"select\" data-name=\"poster_size\">\n        <div class=\"settings-param__name\">#{settings_rest_tmdb_posters}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"proxy_tmdb_auto\">\n        <div class=\"settings-param__name\">#{settings_rest_tmdb_prox_auto}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"proxy_tmdb\" data-children=\"proxy\">\n        <div class=\"settings-param__name\">#{settings_rest_tmdb_prox}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param selector\" data-parent=\"proxy\" data-type=\"input\" data-name=\"tmdb_proxy_api\" placeholder=\"#{settings_rest_tmdb_example} api.proxy.com\">\n        <div class=\"settings-param__name\">Api</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_rest_tmdb_api_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector\" data-parent=\"proxy\" data-type=\"input\" data-name=\"tmdb_proxy_image\" placeholder=\"#{settings_rest_tmdb_example} image.proxy.com\">\n        <div class=\"settings-param__name\">Image</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_rest_tmdb_image_descr}</div>\n    </div>\n</div>";

  var html$1S = "<div>\n    <div class=\"settings-param selector\" data-name=\"plugins\" data-static=\"true\" data-notice=\"#{settings_plugins_notice}\">\n        <div class=\"settings-param__name\">#{settings_plugins_add}</div>\n        <div class=\"settings-param__descr\">#{settings_plugins_add_descr}</div>\n    </div>\n    <div class=\"settings-param selector\" data-name=\"install\" data-static=\"true\">\n        <div class=\"settings-param__name\">#{settings_plugins_install}</div>\n        <div class=\"settings-param__descr\">#{settings_plugins_install_descr}</div>\n    </div>\n</div>";

  var html$1R = "<div>\n    <div class=\"faq-cloud\">\n     <!-- <img src=\"https://i.ibb.co/x8H0P5TD/adobe-express-qr-code.png\" class=\"faq-cloud__qr\"> -->\n         <div class=\"faq-cloud__text\">\n             #{settings_prisma_usercam_descr}\n         </div>\n         <div class=\"faq-cloud__label\">https://pris.cam/user</div>\n     </div>\n    <div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"account_use\">\n        <div class=\"settings-param__name\">#{settings_prisma_sync}</div>\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\">#{settings_prisma_sync_descr}</div>\n    </div>\n\n    <div class=\"settings-param-title settings--account-user hide\"><span>#{settings_prisma_account}</span> <img class=\"settings-param__label hide\" src=\"./img/icon_prem.png\" alt=\"PREMIUM\"></div>\n\n    <div class=\"settings-param selector settings--account-user settings--account-user-info hide\" data-static=\"true\">\n        <div class=\"settings-param__name\">#{settings_prisma_logged_in_as}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param selector settings--account-user settings--account-user-profile hide\" data-static=\"true\">\n        <div class=\"settings-param__name\">#{settings_prisma_profile}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param selector settings--account-user settings--account-user-out hide\" data-static=\"true\">\n        <div class=\"settings-param__name\">#{settings_prisma_logout}</div>\n    </div>\n\n    <div class=\"settings-param-title settings--account-signin\"><span>#{settings_prisma_signin}</span></div>\n\n    <div class=\"settings-param selector settings--account-signin settings--account-device-add\" data-type=\"button\" data-static=\"true\">\n        <div class=\"settings-param__name\">#{settings_prisma_signin_button}</div>\n        <div class=\"settings-param__value\"></div>\n    </div>\n\n    <div class=\"settings-param-title\"><span>#{settings_prisma_status}</span></div>\n\n    <div class=\"settings-param selector settings--account-status\" data-static=\"true\">\n        <div class=\"settings-param__value\"></div>\n        <div class=\"settings-param__descr\"></div>\n    </div>\n\n    <div class=\"settings-param-title settings--account-user hide\"><span>#{settings_prisma_backup}</span></div>\n\n    <div class=\"settings-param selector settings--account-user settings--account-user-sync hide\" data-static=\"true\">\n        <div class=\"settings-param__name\">#{settings_prisma_sync_btn}</div>\n        <div class=\"settings-param__value\">#{settings_prisma_sync_btn_descr}</div>\n    </div>\n\n    <div class=\"settings-param selector settings--account-user settings--account-user-backup hide\" data-static=\"true\">\n        <div class=\"settings-param__name\">#{settings_prisma_backup}</div>\n        <div class=\"settings-param__value\">#{settings_prisma_backup_descr}</div>\n    </div>\n\n    <!-- <div class=\"settings-param-title\"><span>Premium</span></div> -->\n\n   <!-- <div class=\"selectbox-item selector selectbox-item--checkbox settings--account-premium\" data-static=\"true\">\n        <div class=\"selectbox-item__title\">#{settings_prisma_sync_filters}</div>\n        <div class=\"selectbox-item__checkbox\"></div>\n    </div> -->\n   <!-- <div class=\"selectbox-item selector selectbox-item--checkbox settings--account-premium\" data-static=\"true\">\n        <div class=\"selectbox-item__title\">#{settings_prisma_sync_calendar}</div>\n        <div class=\"selectbox-item__checkbox\"></div>\n    </div> -->\n   <!-- <div class=\"selectbox-item selector selectbox-item--checkbox settings--account-premium\" data-static=\"true\">\n        <div class=\"selectbox-item__title\">#{settings_prisma_sync_timecodes}</div>\n        <div class=\"selectbox-item__checkbox\"></div>\n    </div> -->\n   <!-- <div class=\"selectbox-item selector selectbox-item--checkbox settings--account-premium\" data-static=\"true\">\n        <div class=\"selectbox-item__title\">#{settings_prisma_sync_search}</div>\n        <div class=\"selectbox-item__checkbox\"></div>\n    </div> -->\n</div>";

  var html$1Q = "<div class=\"items-line layer--visible layer--render\">\n    <div class=\"items-line__head\">\n        <div class=\"items-line__title\">{title}</div>\n    </div>\n    <div class=\"items-line__body\"></div>\n</div>";

  var html$1P = "<div class=\"card selector layer--visible layer--render\">\n\n    <div class=\"card__view\">\n        <img src=\"./img/img_load.svg\" class=\"card__img\" />\n\n        <div class=\"card__icons\">\n            <div class=\"card__trailer\"></div>\n            <div class=\"card__icons-inner\">\n            </div>\n            \n        </div>\n        <div class=\"card__age\">{release_year}</div>\n    </div>\n    <div class=\"card__title\">{title}</div>\n    \n</div>";

  var html$1O = "<div class=\"card-parser selector layer--visible layer--render\">\n    <div class=\"card-parser__title\">{Title}</div>\n\n    <div class=\"card-parser__footer\">\n        <div class=\"card-parser__details\">\n            <div>#{torrent_item_seeds}: <span>{Seeders}</span></div>\n            <div>#{torrent_item_grabs}: <span>{Peers}</span></div>\n        </div>\n        <div class=\"card-parser__size\">{size}</div>\n    </div>\n</div>";

  var html$1N = "<div class=\"card-watched\">\n    <div class=\"card-watched__inner\">\n        <div class=\"card-watched__body\"></div>\n    </div>\n</div>";

  var html$1M = "<div class=\"card-episode selector layer--visible layer--render\">\n    <div class=\"card-episode__body\">\n        <div class=\"full-episode\">\n            <div class=\"full-episode__img\">\n                <img />\n            </div>\n\n            <div class=\"full-episode__body\">\n                <div class=\"full-episode__num\">{num}</div>\n                <div class=\"full-episode__name\">{name}</div>\n                <div class=\"full-episode__date\">{date}</div>\n            </div>\n        </div>\n    </div>\n    <div class=\"card-episode__footer\">\n        <div class=\"card__imgbox\">\n            <div class=\"card__view\">\n                <img class=\"card__img\" />\n            </div>\n        </div>\n\n        <div class=\"card__left\">\n            <div class=\"card__title\">{title}</div>\n            <div class=\"card__age\">{release_year}</div>\n        </div>\n    </div>\n</div>";

  var html$1L = "<div class=\"full-start\">\n\n    <div class=\"full-start__body\">\n        <div class=\"full-start__right\">\n            <div class=\"full-start__poster\">\n                <img class=\"full-start__img full--poster\" />\n\n            </div>\n        </div>\n     \n        <div class=\"full-start__left\">\n        <div class=\"full-start__deta\">\n        <div class=\"full-start__status hide\"></div>\n        </div>\n        <div class=\"full-start__logo\"></div>       \n        <div class=\"full-start__deta\">\n        <div class=\"full-start__rate rate--imdb hide\"><div></div><div>IMDB</div></div>\n        <div class=\"full-start__rate rate--kp hide\"><div></div><div>KP</div></div>\n        <div class=\"full-start__rate\"><span>{rating}</span><div>TMDB</div></div>\n        </div>\n\n        <div class=\"full-start__title\"></div>\n\n            <div class=\"full-start__tags\">\n                <div class=\"full-start__tag tag--quality hide\">\n                    <div></div>\n                </div>\n                <!-- <div class=\"full-start__tag tag--year hide\">\n                    <img src=\"./img/icons/add.svg\" /> <div></div>\n                </div> --> \n                <!-- <div class=\"full-start__tag tag--countries\">\n                    <div>{countries}</div>\n                </div> -->\n                <div class=\"full-start__tag tag--genres\"> <div>{genres}</div>\n                </div>\n                <div class=\"full-start__tag tag--time\"><div>{time}</div>\n                </div>\n                <div class=\"full-start__tag hide is--serial\">\n                    <img src=\"./img/icons/menu/catalog.svg\" /> <div>{seasons}</div>\n                </div>\n                <div class=\"full-start__tag hide is--serial\">\n                    <img src=\"./img/icons/menu/movie.svg\" /> <div>{episodes}</div>\n                </div>\n                <div class=\"full-start__tag tag--episode hide\">\n                    <img src=\"./img/icons/time.svg\" /> <div></div>\n                </div>\n                <div class=\"full-start__pg hide\"></div>\n            </div>\n\n\n        \n            <div class=\"full-start__icons\">\n            \n            </div>\n            \n\n        </div>\n    </div>\n    <div class=\"full-start__footer\">\n            <div class=\"full-start__buttons-scroll\"></div>\n\n            <div class=\"full-start__buttons\">\n\n            <div class=\"full-start__button view--torrent hide\">\n            <svg height=\"200px\" width=\"200px\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 19.264 19.264\" xml:space=\"preserve\" fill=\"#000000\">\n                 <g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g>\n                    <g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g>\n                        <g id=\"SVGRepo_iconCarrier\"><g><g>\n                            <path style=\"fill:#ffffff;\" d=\"M19.264,9.638c0-5.319-4.313-9.631-9.632-9.631C4.312,0.007,0,4.32,0,9.638 c0,4.1,2.567,7.593,6.177,8.982l-1.818-8.45L3.845,7.782l-0.91-4.224L6.46,2.799l1.303,6.059c0.352,1.636,1.094,2.514,2.316,2.25 c0.967-0.208,1.377-0.995,1.487-1.597c0.049-0.228,0.013-0.51-0.047-0.786L10.076,2.02L13.6,1.263l1.646,7.651 c0.662,3.077,2.454,3.548,2.454,3.548s-2.419,0.521-3.433,0.738c-1.012,0.219-1.694-1.591-1.694-1.591l-0.07,0.015 c-0.288,0.785-0.613,2.06-3.127,2.602c-0.184,0.039-0.364,0.064-0.542,0.083l1.064,4.948 C15.092,19.116,19.264,14.867,19.264,9.638z\"></path> \n                              </g></g></g>\n            </svg>\n            <!-- <span>#{full_torrents}</span> -->\n            </div>\n\n            <div class=\"full-start__button selector view--trailer\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M12.3845 22.9934C12.2569 22.9978 12.1287 23 12 23C5.92487 23 1 18.0751 1 12C1 5.92487 5.92487 1 12 1C18.0751 1 23 5.92487 23 12C23 15.7203 21.1531 19.0093 18.3262 21H22.5C23.0523 21 23.5 21.4477 23.5 22C23.5 22.5523 23.0523 23 22.5 23H12.5C12.4609 23 12.4224 22.9978 12.3845 22.9934ZM14 7C14 8.10457 13.1046 9 12 9C10.8954 9 10 8.10457 10 7C10 5.89543 10.8954 5 12 5C13.1046 5 14 5.89543 14 7ZM12 19C13.1046 19 14 18.1046 14 17C14 15.8954 13.1046 15 12 15C10.8954 15 10 15.8954 10 17C10 18.1046 10.8954 19 12 19ZM7 10C8.10457 10 9 10.8954 9 12C9 13.1046 8.10457 14 7 14C5.89543 14 5 13.1046 5 12C5 10.8954 5.89543 10 7 10ZM19 12C19 10.8954 18.1046 10 17 10C15.8954 10 15 10.8954 15 12C15 13.1046 15.8954 14 17 14C18.1046 14 19 13.1046 19 12Z\" fill=\"white\" fill-rule=\"evenodd\" clip-rule=\"evenodd\"></path>\n            </svg>            \n            \n                    <!-- <span>#{full_trailers}</span> -->\n                </div>\n\n                <div class=\"full-start__button selector button--book\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M12.62 20.81C12.28 20.93 11.72 20.93 11.38 20.81C8.48 19.82 2 15.69 2 8.68998C2 5.59998 4.49 3.09998 7.56 3.09998C9.38 3.09998 10.99 3.97998 12 5.33998C13.01 3.97998 14.63 3.09998 16.44 3.09998C19.51 3.09998 22 5.59998 22 8.68998C22 15.69 15.52 19.82 12.62 20.81Z\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\" fill=\"currentColor\"/>\n</svg>\n\n                </div>\n\n                <!-- <div class=\"full-start__button selector button--subscribe hide\">\n                    <svg width=\"25\" height=\"30\" viewBox=\"0 0 25 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M6.01892 24C6.27423 27.3562 9.07836 30 12.5 30C15.9216 30 18.7257 27.3562 18.981 24H15.9645C15.7219 25.6961 14.2632 27 12.5 27C10.7367 27 9.27804 25.6961 9.03542 24H6.01892Z\" fill=\"currentColor\"/>\n                    <path d=\"M3.81972 14.5957V10.2679C3.81972 5.41336 7.7181 1.5 12.5 1.5C17.2819 1.5 21.1803 5.41336 21.1803 10.2679V14.5957C21.1803 15.8462 21.5399 17.0709 22.2168 18.1213L23.0727 19.4494C24.2077 21.2106 22.9392 23.5 20.9098 23.5H4.09021C2.06084 23.5 0.792282 21.2106 1.9273 19.4494L2.78317 18.1213C3.46012 17.0709 3.81972 15.8462 3.81972 14.5957Z\" stroke=\"currentColor\" stroke-width=\"2.5\"/>\n                    </svg>\n                </div> -->\n            <div class=\"full-start__button selector button--options\">\n                    <svg width=\"38\" height=\"10\" viewBox=\"0 0 38 10\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <circle cx=\"4.88968\" cy=\"4.98563\" r=\"4.75394\" fill=\"currentColor\"/>\n                        <circle cx=\"18.9746\" cy=\"4.98563\" r=\"4.75394\" fill=\"currentColor\"/>\n                        <circle cx=\"33.0596\" cy=\"4.98563\" r=\"4.75394\" fill=\"currentColor\"/>\n                    </svg>\n                </div>\n            </div>\n    </div>\n\n</div>";

  var html$1K = "<div class=\"full-start-new\">\n    <div class=\"full-start-new__pg-container\">\n        <div class=\"full-start__status hide\"></div>\n        <div class=\"full-start__pg hide\"></div>\n    </div>\n\n    <div class=\"full-start-new__body\">\n        <div class=\"full-start-new__left\">\n            <div class=\"full-start-new__poster\">\n                <img class=\"full-start-new__img full--poster\" />\n            </div>\n        </div>\n\n        <div class=\"full-start-new__right\">\n            <div class=\"full-start__logo\"></div>\n            <div class=\"full-start-new__title\">{title}</div>\n            <div class=\"full-start-new__tagline full--tagline\">{tagline}</div>\n            <div class=\"full-start-new__head\"></div>\n            \n            <!-- \u041E\u0441\u0442\u0430\u0432\u043B\u044F\u0435\u043C \u043A\u043E\u043D\u0442\u0435\u0439\u043D\u0435\u0440 \u0434\u043B\u044F \u043C\u043E\u0431\u0438\u043B\u044C\u043D\u043E\u0439 \u0432\u0435\u0440\u0441\u0438\u0438, \u043D\u043E \u0441\u043A\u0440\u044B\u0432\u0430\u0435\u043C \u043D\u0430 \u0434\u0435\u0441\u043A\u0442\u043E\u043F\u0435 -->\n            <div class=\"full-start-new__rate-line mobile-only\">\n                <div class=\"full-start__rate rate--tmdb\"><div>{rating}</div><div class=\"source--name\">TMDB</div></div>\n                <div class=\"full-start__rate rate--imdb hide\"><div></div><div>IMDB</div></div>\n                <div class=\"full-start__rate rate--kp hide\"><div></div><div>KP</div></div>\n            </div>\n            \n            <div class=\"full-start-new__details\"></div>\n            <div class=\"full-start-new__reactions\">\n                <div>#{reactions_none}</div>\n            </div>\n\n            <div class=\"full-start-new__buttons\">\n                <div class=\"full-start__button view--torrent hide\">\n                 <svg height=\"200px\" width=\"200px\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" viewBox=\"0 0 19.264 19.264\" xml:space=\"preserve\" fill=\"none\">\n                 <g id=\"SVGRepo_bgCarrier\" stroke-width=\"0\"></g>\n                 <g id=\"SVGRepo_tracerCarrier\" stroke-linecap=\"round\" stroke-linejoin=\"round\"></g>\n                 <g id=\"SVGRepo_iconCarrier\">\n                 <g>\n                 <g>\n                 <path fill=\"currentColor\" d=\"M19.264,9.638c0-5.319-4.313-9.631-9.632-9.631C4.312,0.007,0,4.32,0,9.638 c0,4.1,2.567,7.593,6.177,8.982l-1.818-8.45L3.845,7.782l-0.91-4.224L6.46,2.799l1.303,6.059c0.352,1.636,1.094,2.514,2.316,2.25 c0.967-0.208,1.377-0.995,1.487-1.597c0.049-0.228,0.013-0.51-0.047-0.786L10.076,2.02L13.6,1.263l1.646,7.651 c0.662,3.077,2.454,3.548,2.454,3.548s-2.419,0.521-3.433,0.738c-1.012,0.219-1.694-1.591-1.694-1.591l-0.07,0.015 c-0.288,0.785-0.613,2.06-3.127,2.602c-0.184,0.039-0.364,0.064-0.542,0.083l1.064,4.948 C15.092,19.116,19.264,14.867,19.264,9.638z\"></path>\n                 </g>\n                 </g>\n                 </g>\n                 </svg>\n                </div>            \n\n                <div class=\"full-start__button selector button--book\">\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                     <path d=\"M19 8.77673C18.7932 8.10613 18.4228 7.47603 17.8547 6.91284C17.4075 6.46941 16.9433 6.17698 16.4776 6M10.3993 4.14593C8.72567 3.08425 6.02273 2.08032 3.68853 4.46071C-1.85248 10.1114 7.64984 21 12 21C16.3501 21 25.8525 10.1114 20.3115 4.46072C17.9773 2.08035 15.2744 3.08427 13.6007 4.14593C12.655 4.74582 11.345 4.74582 10.3993 4.14593Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n                    </svg>\n\n                    <span>#{settings_input_links}</span>\n                </div>\n\n                <div class=\"full-start__button selector button--reaction\">\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M8.39062 18.4907V8.33071C8.39062 7.93071 8.51062 7.54071 8.73062 7.21071L11.4606 3.15071C11.8906 2.50071 12.9606 2.04071 13.8706 2.38071C14.8506 2.71071 15.5006 3.81071 15.2906 4.79071L14.7706 8.06071C14.7306 8.36071 14.8106 8.63071 14.9806 8.84071C15.1506 9.03071 15.4006 9.15071 15.6706 9.15071H19.7806C20.5706 9.15071 21.2506 9.47071 21.6506 10.0307C22.0306 10.5707 22.1006 11.2707 21.8506 11.9807L19.3906 19.4707C19.0806 20.7107 17.7306 21.7207 16.3906 21.7207H12.4906C11.8206 21.7207 10.8806 21.4907 10.4506 21.0607L9.17062 20.0707C8.68062 19.7007 8.39062 19.1107 8.39062 18.4907Z\" fill=\"currentColor\"/>\n                           <path d=\"M5.21 6.37891H4.18C2.63 6.37891 2 6.97891 2 8.45891V18.5189C2 19.9989 2.63 20.5989 4.18 20.5989H5.21C6.76 20.5989 7.39 19.9989 7.39 18.5189V8.45891C7.39 6.97891 6.76 6.37891 5.21 6.37891Z\" fill=\"currentColor\"/>               \n                    </svg>\n                    <span>#{title_reactions}</span>\n                </div>\n\n                <!-- \u041A\u043D\u043E\u043F\u043A\u0438 \u0443\u043F\u0440\u0430\u0432\u043B\u0435\u043D\u0438\u044F \u0442\u0440\u0435\u0439\u043B\u0435\u0440\u043E\u043C -->\n                <div class=\"full-start__trailer-controls hide\">\n                    <div class=\"full-start__button selector button--mute\">\n                        <svg class=\"mute-icon\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path d=\"M2 10.1595V14.1595C2 16.1595 3 17.1595 5 17.1595H6.43C6.8 17.1595 7.17 17.2695 7.49 17.4595L10.41 19.2895C12.93 20.8695 15 19.7195 15 16.7495V7.56946C15 4.58946 12.93 3.44946 10.41 5.02946L7.49 6.85946C7.17 7.04946 6.8 7.15946 6.43 7.15946H5C3 7.15946 2 8.15946 2 10.1595Z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                              <path d=\"M22 14.1194L18.04 10.1594\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                                <path d=\"M21.96 10.1995L18 14.1595\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                        </svg>\n                        <svg class=\"unmute-icon hide\" width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <path d=\"M2 10V14C2 16 3 17 5 17H6.43C6.8 17 7.17 17.11 7.49 17.3L10.41 19.13C12.93 20.71 15 19.56 15 16.59V7.41003C15 4.43003 12.93 3.29003 10.41 4.87003L7.49 6.70003C7.17 6.89003 6.8 7.00003 6.43 7.00003H5C3 7.00003 2 8.00003 2 10Z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                               <path d=\"M18 8C19.78 10.37 19.78 13.63 18 16\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                                  <path d=\"M19.83 5.5C22.72 9.35 22.72 14.65 19.83 18.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                        </svg>\n                        <span class=\"mute-text\">#{full_trailer_mute}</span>\n                        <span class=\"unmute-text hide\">#{full_trailer_unmute}</span>\n                    </div>\n                </div>\n\n                <div class=\"full-start__button selector button--play\">\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M15.5909 1.75C12.6209 1.75 10.2109 4.16 10.2109 7.13C10.2109 10.1 12.6209 12.51 15.5909 12.51C18.5609 12.51 20.9709 10.1 20.9709 7.13C20.9709 4.16 18.5609 1.75 15.5909 1.75Z\" fill=\"currentColor\"/>\n                        <path d=\"M6.3593 13.0312C4.5293 13.0312 3.0293 14.5213 3.0293 16.3613C3.0293 18.2013 4.5193 19.6913 6.3593 19.6913C8.1893 19.6913 9.6893 18.2013 9.6893 16.3613C9.6893 14.5213 8.1893 13.0312 6.3593 13.0312Z\" fill=\"currentColor\"/>\n                        <path d=\"M16.6205 16.6211C15.0705 16.6211 13.8105 17.8811 13.8105 19.4311C13.8105 20.9811 15.0705 22.2411 16.6205 22.2411C18.1705 22.2411 19.4305 20.9811 19.4305 19.4311C19.4305 17.8811 18.1705 16.6211 16.6205 16.6211Z\" fill=\"currentColor\"/>\n                    </svg>\n\n                    <span>#{full_more}</span>\n                </div>\n            </div>\n        </div>\n    </div>\n    \n    <!-- \u0414\u043E\u0431\u0430\u0432\u043B\u044F\u0435\u043C \u0440\u0435\u0439\u0442\u0438\u043D\u0433\u0438 \u0444\u0438\u043B\u044C\u043C\u043E\u0432 \u0432 \u043F\u0440\u0430\u0432\u044B\u0439 \u043D\u0438\u0436\u043D\u0438\u0439 \u0443\u0433\u043E\u043B -->\n    <div class=\"full-start-new__ratings-container desktop-only\">\n        <div class=\"full-start__rate rate--tmdb\"><div>{rating}</div><div class=\"source--name\">TMDB</div></div>\n        <div class=\"full-start__rate rate--imdb hide\"><div></div><div>IMDB</div></div>\n        <div class=\"full-start__rate rate--kp hide\"><div></div><div>KP</div></div>\n    </div>\n\n    <div class=\"hide buttons--container\">\n\n        <div class=\"full-start__button selector view--trailer\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M17 4H7C4 4 2 6 2 9V15C2 18 4 20 7 20H17C20 20 22 18 22 15V9C22 6 20 4 17 4ZM13.89 13.03L11.42 14.51C10.42 15.11 9.59998 14.65 9.59998 13.48V10.51C9.59998 9.34001 10.42 8.88001 11.42 9.48001L13.89 10.96C14.84 11.54 14.84 12.46 13.89 13.03Z\" fill=\"currentColor\"/>\n            </svg>\n            <span>#{full_trailers}</span>\n        </div>\n\n        <div class=\"full-start__button selector button--options\">\n           <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M12 2C6.49 2 2 6.49 2 12C2 17.51 6.49 22 12 22C17.51 22 22 17.51 22 12C22 6.49 17.51 2 12 2ZM8 13C7.44 13 7 12.55 7 12C7 11.45 7.45 11 8 11C8.55 11 9 11.45 9 12C9 12.55 8.56 13 8 13ZM12 13C11.44 13 11 12.55 11 12C11 11.45 11.45 11 12 11C12.55 11 13 11.45 13 12C13 12.55 12.56 13 12 13ZM16 13C15.44 13 15 12.55 15 12C15 11.45 15.45 11 16 11C16.55 11 17 11.45 17 12C17 12.55 16.56 13 16 13Z\" fill=\"currentColor\"/>\n           </svg>\n            <span>OpenAI</span>\n         </div>\n    </div>\n</div>";

  var html$1J = "<div class=\"full-descr\">\n    <div class=\"full-descr__left\">\n    <div class=\"full-descr__text selector\">{text}</div>\n\n    <div class=\"full-descr__line full--networks\">\n            <div class=\"full-descr__line-name\"></div>\n            <div class=\"full-descr__line-body\">{networks}</div> \n        </div>\n\n        <div class=\"full-descr__line full--genres\">\n            <div class=\"full-descr__line-name\">#{full_genre}</div>\n            <div class=\"full-descr__line-body\">{genres}</div> \n        </div>\n\n\n        <!-- <div class=\"full-descr__line full--companies\">\n            <div class=\"full-descr__line-name\">#{full_production}</div>\n            <div class=\"full-descr__line-body\">{companies}</div>\n        </div> -->\n\n        <!-- <div class=\"full-descr__line full--keywords\">\n            <div class=\"full-descr__line-name\">#{full_keywords}</div>\n            <div class=\"full-descr__line-body\">{keywords}</div>\n        </div> -->\n\n    </div>\n\n    <div class=\"full-descr__right\">\n        <div class=\"full-descr__info\">\n            <div class=\"full-descr__info-name\">#{full_date_of_release}</div>\n            <div class=\"full-descr__info-body\">{relise}</div>\n        </div>\n\n        <div class=\"full-descr__info full--budget\">\n            <div class=\"full-descr__info-name\">#{full_budget}</div>\n            <div class=\"full-descr__info-body\">{budget}</div>\n        </div>\n\n        <div class=\"full-descr__info full--revenue\">\n            <div class=\"full-descr__info-name\">#{full_revenue}</div>\n            <div class=\"full-descr__info-body\">{revenue}</div>\n        </div>\n\n        <div class=\"full-descr__info full--countries\">\n            <div class=\"full-descr__info-name\">#{full_countries}</div>\n            <div class=\"full-descr__info-body\">{countries}</div>\n        </div>\n    </div>\n\n</div>";

  var html$1I = "<div class=\"full-person selector layer--visible\">\n    <div class=\"full-person__photo\">\n        <img />\n    </div>\n\n    <div class=\"full-person__body\">\n        <div class=\"full-person__name\">{name}</div>\n        <div class=\"full-person__role\">{role}</div>\n    </div>\n</div>";

  var html$1H = "<div class=\"full-review selector layer--visible\">\n    <div class=\"full-review__header\"></div>\n    \n    <div class=\"full-review__text\">{text}</div>\n    \n    <div class=\"full-review__type-bar\" data-type=\"{review_type}\">\n        <div class=\"full-review__type-indicator\"></div>\n    </div>\n</div>";

  var html$1G = "<div class=\"review-selector\">\n    <div class=\"review-selector__title\">{title}</div>\n    <div class=\"review-selector__buttons\">\n        <div class=\"review-selector__button selector\" data-type=\"neutral\">\n            <div class=\"review-selector__button-icon\">\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm-2 15l-5-5 1.41-1.41L10 14.17l7.59-7.59L19 8l-9 9z\"/>\n                </svg>\n            </div>\n            <div class=\"review-selector__button-text\">{neutral}</div>\n        </div>\n        <div class=\"review-selector__button selector\" data-type=\"positive\">\n            <div class=\"review-selector__button-icon\">\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path d=\"M12 2l3.09 6.26L22 9.27l-5 4.87 1.18 6.88L12 17.77l-6.18 3.25L7 14.14 2 9.27l6.91-1.01L12 2z\"/>\n                </svg>\n            </div>\n            <div class=\"review-selector__button-text\">{positive}</div>\n        </div>\n        <div class=\"review-selector__button selector\" data-type=\"negative\">\n            <div class=\"review-selector__button-icon\">\n                <svg viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                    <path d=\"M12 2C6.48 2 2 6.48 2 12s4.48 10 10 10 10-4.48 10-10S17.52 2 12 2zm1 15h-2v-6h2v6zm0-8h-2V7h2v2z\"/>\n                </svg>\n            </div>\n            <div class=\"review-selector__button-text\">{negative}</div>\n        </div>\n    </div>\n</div>";

  var html$1F = "<div class=\"full-episode selector layer--visible\">\n    <div class=\"full-episode__img\">\n        <img />\n    </div>\n\n    <div class=\"full-episode__body\">\n        <div class=\"full-episode__num\">{num}</div>\n        <div class=\"full-episode__name\">{name}</div>\n        <div class=\"full-episode__date\">{date}</div>\n    </div>\n</div>";

  var html$1E = "<div class=\"player\">\n    \n</div>";

  var html$1D = "<div class=\"player-panel\">\n    <div class=\"player-panel__body\">\n    <div class=\"player-panel__logo\"></div>\n        <div class=\"player-panel__timeline selector\">\n            <div class=\"player-panel__timenow\"></div>\n            <div class=\"player-panel__timeend\"></div>\n            <div class=\"player-panel__peding\"></div>\n            <div class=\"player-panel__position\"><div></div></div>\n            <div class=\"player-panel__time hide\"></div>\n            <div class=\"player-panel__time-touch-zone hide\"></div>\n        </div>\n\n        <div class=\"player-panel__iptv\">\n            <div class=\"player-panel-iptv\">\n                <div class=\"player-panel-iptv__channel\"></div>\n                <!--<div class=\"player-panel-iptv__arrow-up\">\n                    <svg width=\"32\" height=\"19\" viewBox=\"0 0 32 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M2.17163 17.4122L15.9606 3.62323L29.7496 17.4122\" stroke=\"white\" stroke-width=\"4\"/>\n                    </svg>                \n                </div>-->\n                <!--<div class=\"player-panel-iptv__position\">001</div>-->\n                <!--<div class=\"player-panel-iptv__arrow-down\">\n                    <svg width=\"32\" height=\"19\" viewBox=\"0 0 32 19\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <path d=\"M2.17163 1.98059L15.9606 15.7696L29.7496 1.98059\" stroke=\"white\" stroke-width=\"4\"/>\n                    </svg>                \n                </div>-->\n            </div>\n        </div>\n\n        <div class=\"player-panel__line player-panel__line-one\">\n            <!-- <div class=\"player-panel__timenow\"></div> -->\n            <!-- <div class=\"player-panel__timeend\"></div> -->\n        </div>\n\n        <div class=\"player-panel__line player-panel__line-two\">\n            <div class=\"player-panel__left\">\n                <!-- <div class=\"player-panel__prev button selector hide\">\n                    <svg width=\"23\" height=\"24\" viewBox=\"0 0 23 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M2.75 13.7698C1.41666 13 1.41667 11.0755 2.75 10.3057L20 0.34638C21.3333 -0.42342 23 0.538831 23 2.07843L23 21.997C23 23.5366 21.3333 24.4989 20 23.7291L2.75 13.7698Z\" fill=\"currentColor\"/>\n                    <rect x=\"6\" y=\"24\" width=\"6\" height=\"24\" rx=\"2\" transform=\"rotate(180 6 24)\" fill=\"currentColor\"/>\n                    </svg>\n                </div> -->\n                <!--<div class=\"player-panel__next button selector hide\">\n                    <svg width=\"23\" height=\"24\" viewBox=\"0 0 23 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M20.25 10.2302C21.5833 11 21.5833 12.9245 20.25 13.6943L3 23.6536C1.66666 24.4234 -6.72981e-08 23.4612 0 21.9216L8.70669e-07 2.00298C9.37967e-07 0.463381 1.66667 -0.498867 3 0.270933L20.25 10.2302Z\" fill=\"currentColor\"/>\n                    <rect x=\"17\" width=\"6\" height=\"24\" rx=\"2\" fill=\"currentColor\"/>\n                    </svg>\n                </div> -->\n\n                <div class=\"player-panel__pip button selector\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M12.6 18.5H16.4C17.9 18.5 18.5 17.9 18.5 16.4V14.6C18.5 13.1 17.9 12.5 16.4 12.5H12.6C11.1 12.5 10.5 13.1 10.5 14.6V16.4C10.5 17.9 11.1 18.5 12.6 18.5Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                </svg>                \n                </div>\n\n                <div class=\"player-panel__volume button selector\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M2 10V14C2 16 3 17 5 17H6.43C6.8 17 7.17 17.11 7.49 17.3L10.41 19.13C12.93 20.71 15 19.56 15 16.59V7.41003C15 4.43003 12.93 3.29003 10.41 4.87003L7.49 6.70003C7.17 6.89003 6.8 7.00003 6.43 7.00003H5C3 7.00003 2 8.00003 2 10Z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                <path d=\"M18 8C19.78 10.37 19.78 13.63 18 16\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M19.83 5.5C22.72 9.35 22.72 14.65 19.83 18.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>              \n                    <div class=\"player-panel__volume-drop\">\n                        <input type=\"range\" orient=\"vertical\" class=\"player-panel__volume-range\" max=\"1\" min=\"0\" step=\"0.01\" />\n                    </div>\n                </div>\n\n                <div class=\"player-panel__next-episode-name hide\"></div>\n            </div>\n            <div class=\"player-panel__center\">\n                <div class=\"player-panel__prev button selector\">\n                    <svg width=\"23\" height=\"24\" viewBox=\"0 0 23 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M2.75 13.7698C1.41666 13 1.41667 11.0755 2.75 10.3057L20 0.34638C21.3333 -0.42342 23 0.538831 23 2.07843L23 21.997C23 23.5366 21.3333 24.4989 20 23.7291L2.75 13.7698Z\" fill=\"currentColor\"/>\n                    <rect x=\"6\" y=\"24\" width=\"6\" height=\"24\" rx=\"2\" transform=\"rotate(180 6 24)\" fill=\"currentColor\"/>\n                    </svg>\n                </div>\n                <div class=\"player-panel__rprev button selector\">\n                    <svg width=\"35\" height=\"25\" viewBox=\"0 0 35 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M14 10.7679C12.6667 11.5377 12.6667 13.4622 14 14.232L31.25 24.1913C32.5833 24.9611 34.25 23.9989 34.25 22.4593L34.25 2.5407C34.25 1.0011 32.5833 0.0388526 31.25 0.808653L14 10.7679Z\" fill=\"currentColor\"/>\n                    <path d=\"M0.999998 10.7679C-0.333335 11.5377 -0.333333 13.4622 1 14.232L18.25 24.1913C19.5833 24.9611 21.25 23.9989 21.25 22.4593L21.25 2.5407C21.25 1.0011 19.5833 0.0388526 18.25 0.808653L0.999998 10.7679Z\" fill=\"currentColor\"/>\n                    </svg>\n                </div>\n                <div class=\"player-panel__playpause button selector\">\n                    <div>\n                    <svg width=\"24\" height=\"25\" viewBox=\"-3 0 25 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M4 11.9999V8.43989C4 4.01989 7.13 2.2099 10.96 4.4199L14.05 6.1999L17.14 7.9799C20.97 10.1899 20.97 13.8099 17.14 16.0199L14.05 17.7999L10.96 19.5799C7.13 21.7899 4 19.9799 4 15.5599V11.9999Z\" fill=\"currentColor\"/>\n                    </svg>                    \n                    </div>\n                    <div>\n                    <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M10.65 19.11V4.89C10.65 3.54 10.08 3 8.64 3H5.01C3.57 3 3 3.54 3 4.89V19.11C3 20.46 3.57 21 5.01 21H8.64C10.08 21 10.65 20.46 10.65 19.11Z\" fill=\"currentColor\"/>\n                    <path d=\"M21 19.11V4.89C21 3.54 20.43 3 18.99 3H15.36C13.93 3 13.35 3.54 13.35 4.89V19.11C13.35 20.46 13.92 21 15.36 21H18.99C20.43 21 21 20.46 21 19.11Z\" fill=\"currentColor\"/>\n                    </svg>                                        \n                    </div>\n                </div>\n                <div class=\"player-panel__rnext button selector\">\n                    <svg width=\"35\" height=\"25\" viewBox=\"0 0 35 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M20.25 10.7679C21.5833 11.5377 21.5833 13.4622 20.25 14.232L3 24.1913C1.66666 24.9611 -6.72981e-08 23.9989 0 22.4593L8.70669e-07 2.5407C9.37967e-07 1.0011 1.66667 0.0388526 3 0.808653L20.25 10.7679Z\" fill=\"currentColor\"/>\n                    <path d=\"M33.25 10.7679C34.5833 11.5377 34.5833 13.4622 33.25 14.232L16 24.1913C14.6667 24.9611 13 23.9989 13 22.4593L13 2.5407C13 1.0011 14.6667 0.0388526 16 0.808653L33.25 10.7679Z\" fill=\"currentColor\"/>\n                    </svg>\n                </div>\n                <div class=\"player-panel__next button selector\">\n                    <svg width=\"23\" height=\"24\" viewBox=\"0 0 23 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M20.25 10.2302C21.5833 11 21.5833 12.9245 20.25 13.6943L3 23.6536C1.66666 24.4234 -6.72981e-08 23.4612 0 21.9216L8.70669e-07 2.00298C9.37967e-07 0.463381 1.66667 -0.498867 3 0.270933L20.25 10.2302Z\" fill=\"currentColor\"/>\n                    <rect x=\"17\" width=\"6\" height=\"24\" rx=\"2\" fill=\"currentColor\"/>\n                    </svg>\n                </div>\n            </div>\n            <div class=\"player-panel__right\">\n                <div class=\"player-panel__quality button selector\">auto</div>\n                  <div class=\"player-panel__flow button selector hide\">\n                  <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M12.0011 14.3811C13.3155 14.3811 14.3811 13.3155 14.3811 12.0011C14.3811 10.6867 13.3155 9.62109 12.0011 9.62109C10.6867 9.62109 9.62109 10.6867 9.62109 12.0011C9.62109 13.3155 10.6867 14.3811 12.0011 14.3811Z\" fill=\"currentColor\"/>\n<path d=\"M20.0003 18.7503C19.8403 18.7503 19.6903 18.7003 19.5503 18.6003C19.2203 18.3503 19.1503 17.8803 19.4003 17.5503C20.6103 15.9403 21.2503 14.0203 21.2503 12.0003C21.2503 9.98027 20.6103 8.06027 19.4003 6.45027C19.1503 6.12027 19.2203 5.65027 19.5503 5.40027C19.8803 5.15027 20.3503 5.22027 20.6003 5.55027C22.0103 7.42027 22.7503 9.65027 22.7503 12.0003C22.7503 14.3503 22.0103 16.5803 20.6003 18.4503C20.4503 18.6503 20.2303 18.7503 20.0003 18.7503Z\" fill=\"currentColor\"/>\n<path d=\"M4 18.7503C3.77 18.7503 3.55 18.6503 3.4 18.4503C1.99 16.5803 1.25 14.3503 1.25 12.0003C1.25 9.65027 1.99 7.42027 3.4 5.55027C3.65 5.22027 4.12 5.15027 4.45 5.40027C4.78 5.65027 4.85 6.12027 4.6 6.45027C3.39 8.06027 2.75 9.98027 2.75 12.0003C2.75 14.0203 3.39 15.9403 4.6 17.5503C4.85 17.8803 4.78 18.3503 4.45 18.6003C4.32 18.7003 4.16 18.7503 4 18.7503Z\" fill=\"currentColor\"/>\n<path d=\"M16.8011 16.3487C16.6411 16.3487 16.4911 16.2987 16.3511 16.1987C16.0211 15.9487 15.9511 15.4787 16.2011 15.1487C16.8911 14.2387 17.2511 13.1487 17.2511 11.9987C17.2511 10.8487 16.8911 9.75871 16.2011 8.84871C15.9511 8.51871 16.0211 8.04871 16.3511 7.79871C16.6811 7.54871 17.1511 7.61871 17.4011 7.94871C18.2811 9.12871 18.7511 10.5287 18.7511 11.9987C18.7511 13.4687 18.2811 14.8787 17.4011 16.0487C17.2511 16.2487 17.0311 16.3487 16.8011 16.3487Z\" fill=\"currentColor\"/>\n<path d=\"M7.2 16.3487C6.97 16.3487 6.75 16.2487 6.6 16.0487C5.72 14.8787 5.25 13.4687 5.25 11.9987C5.25 10.5287 5.72 9.11871 6.6 7.94871C6.85 7.61871 7.32 7.54871 7.65 7.79871C7.98 8.04871 8.05 8.51871 7.8 8.84871C7.11 9.75871 6.75 10.8487 6.75 11.9987C6.75 13.1487 7.11 14.2387 7.8 15.1487C8.05 15.4787 7.98 15.9487 7.65 16.1987C7.52 16.2987 7.36 16.3487 7.2 16.3487Z\" fill=\"currentColor\"/>\n</svg>\n                 </div>\n                <div class=\"player-panel__playlist button selector\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M17 10H19C21 10 22 9 22 7V5C22 3 21 2 19 2H17C15 2 14 3 14 5V7C14 9 15 10 17 10Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M5 22H7C9 22 10 21 10 19V17C10 15 9 14 7 14H5C3 14 2 15 2 17V19C2 21 3 22 5 22Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M6 10C8.20914 10 10 8.20914 10 6C10 3.79086 8.20914 2 6 2C3.79086 2 2 3.79086 2 6C2 8.20914 3.79086 10 6 10Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M18 22C20.2091 22 22 20.2091 22 18C22 15.7909 20.2091 14 18 14C15.7909 14 14 15.7909 14 18C14 20.2091 15.7909 22 18 22Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                </svg>                \n                </div>\n                <div class=\"player-panel__subs button selector hide\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M8.5 19H8C4 19 2 18 2 13V8C2 4 4 2 8 2H16C20 2 22 4 22 8V13C22 17 20 19 16 19H15.5C15.19 19 14.89 19.15 14.7 19.4L13.2 21.4C12.54 22.28 11.46 22.28 10.8 21.4L9.3 19.4C9.14 19.18 8.77 19 8.5 19Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M15.9965 11H16.0054\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M11.9955 11H12.0045\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M7.99451 11H8.00349\" stroke=\"currentColor\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>              \n                </div>\n                <div class=\"player-panel__tracks button selector hide\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M12 19C15.31 19 18 16.31 18 13V8C18 4.69 15.31 2 12 2C8.69 2 6 4.69 6 8V13C6 16.31 8.69 19 12 19Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M3 11V13C3 17.97 7.03 22 12 22C16.97 22 21 17.97 21 13V11\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M9.11011 7.47993C10.8901 6.82993 12.8301 6.82993 14.6101 7.47993\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M10.03 10.4799C11.23 10.1499 12.5 10.1499 13.7 10.4799\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>              \n                </div>\n                \n                \n                <div class=\"player-panel__settings button selector\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n  <path d=\"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n  <path d=\"M2 12.8799V11.1199C2 10.0799 2.85 9.21994 3.9 9.21994C5.71 9.21994 6.45 7.93994 5.54 6.36994C5.02 5.46994 5.33 4.29994 6.24 3.77994L7.97 2.78994C8.76 2.31994 9.78 2.59994 10.25 3.38994L10.36 3.57994C11.26 5.14994 12.74 5.14994 13.65 3.57994L13.76 3.38994C14.23 2.59994 15.25 2.31994 16.04 2.78994L17.77 3.77994C18.68 4.29994 18.99 5.46994 18.47 6.36994C17.56 7.93994 18.3 9.21994 20.11 9.21994C21.15 9.21994 22.01 10.0699 22.01 11.1199V12.8799C22.01 13.9199 21.16 14.7799 20.11 14.7799C18.3 14.7799 17.56 16.0599 18.47 17.6299C18.99 18.5399 18.68 19.6999 17.77 20.2199L16.04 21.2099C15.25 21.6799 14.23 21.3999 13.76 20.6099L13.65 20.4199C12.75 18.8499 11.27 18.8499 10.36 20.4199L10.25 20.6099C9.78 21.3999 8.76 21.6799 7.97 21.2099L6.24 20.2199C5.33 19.6999 5.02 18.5299 5.54 17.6299C6.45 16.0599 5.71 14.7799 3.9 14.7799C2.85 14.7799 2 13.9199 2 12.8799Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n\n              \n                </div>\n                <div class=\"player-panel__fullscreen button selector\">\n                <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M12 12L17 7M17 7H13.25M17 7V10.75\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M12 12L7 17M7 17H10.75M7 17V13.25\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n                <path d=\"M2 12C2 7.28595 2 4.92893 3.46447 3.46447C4.92893 2 7.28595 2 12 2C16.714 2 19.0711 2 20.5355 3.46447C22 4.92893 22 7.28595 22 12C22 16.714 22 19.0711 20.5355 20.5355C19.0711 22 16.714 22 12 22C7.28595 22 4.92893 22 3.46447 20.5355C2 19.0711 2 16.714 2 12Z\" stroke=\"currentColor\" stroke-width=\"1.5\"/>\n                </svg>\n                </div>\n            </div>\n        </div>\n    </div>\n</div>";

  var html$1C = "<div class=\"player-video\">\n\n<div class=\"player-video__display\"></div>\n    <div class=\"player-video__loader\"></div>\n    <div class=\"player-video__backwork-icon\">\n        <i class=\"left-triangle triangle\">\u25C0\u25C0\u25C0</i><span></span>\n    </div>\n    <div class=\"player-video__forward-icon\">\n        <span></span><i class=\"right-triangle triangle\">\u25B6\u25B6\u25B6</i>\n    </div>\n    <div class=\"player-video__subtitles hide\">\n        <div class=\"player-video__subtitles-text\"></div>\n    </div>\n</div>";

  var html$1B = "<div class=\"player-info\">\n    <div class=\"player-info__body\">\n        <div class=\"player-info__line\">\n            <div class=\"player-info__name\">\n    </div>\n            <div class=\"player-info__time\"><span class=\"time--clock\"></span></div>\n            \n        </div>\n\n        <div class=\"player-info__values\">\n        <div class=\"value--stat\">\n            <span></span>\n        </div>\n        <div class=\"value--speed\">\n            <span></span>\n        </div>\n        <div class=\"value--format\">\n            <span></span>\n        </div>\n        <div class=\"value--pieces\"></div>\n    </div>\n\n    <div class=\"player-info__error hide\"></div>\n</div>\n</div>";

  var html$1A = "<div class=\"player-footer\">\n    <div class=\"player-footer__body\">\n        \n    </div>\n</div>";

  var html$1z = "<div class=\"player-footer-card\">\n    <div class=\"player-footer-card__left\">\n        <div class=\"player-footer-card__poster\">\n            <img class=\"player-footer-card__poster-img\" />\n        </div>\n    </div>\n    <div class=\"player-footer-card__body\">\n        <div class=\"player-footer-card__title\"></div>\n        <div class=\"player-footer-card__tags\"></div>\n        <div class=\"player-footer-card__text\"></div>\n    </div>\n</div>";

  var html$1y = "<div class=\"selectbox\">\n    <div class=\"selectbox__layer\"></div>\n    <div class=\"selectbox__content layer--height\">\n        <div class=\"selectbox__head\">\n            <div class=\"selectbox__title\"></div>\n        </div>\n        <div class=\"selectbox__body\"></div>\n    </div>\n</div>";

  var html$1x = "<div class=\"selectbox-item selector\">\n    <div class=\"selectbox-item__title\">{title}</div>\n    <div class=\"selectbox-item__subtitle\">{subtitle}</div>\n</div>";

  var html$1w = "<div class=\"selectbox-item selectbox-item--icon selector\">\n    <div class=\"selectbox-item__icon\">{icon}</div>\n    <div>\n        <div class=\"selectbox-item__title\">{title}</div>\n        <div class=\"selectbox-item__subtitle\">{subtitle}</div>\n    </div>\n</div>";

  var html$1v = "<div class=\"info layer--width\">\n    <div class=\"info__left\">\n        <div class=\"info__title\"></div>\n        <div class=\"info__footer\">\n            <div class=\"info__vote\">\n                <svg width=\"17\" height=\"16\" viewBox=\"0 0 17 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                    <path d=\"M8.39409 0.192139L10.99 5.30994L16.7882 6.20387L12.5475 10.4277L13.5819 15.9311L8.39409 13.2425L3.20626 15.9311L4.24065 10.4277L0 6.20387L5.79819 5.30994L8.39409 0.192139Z\" fill=\"#fff\"/>\n                </svg>\n                <span></span>\n            </div>\n            <div class=\"info__title-original\"></div>\n        </div>\n    </div>\n    <div class=\"info__right\">\n        <div class=\"info__icon icon--book\"></div>\n        <div class=\"info__icon icon--like\"></div>\n        <div class=\"info__icon icon--wath\"></div>\n    </div>\n</div>";

  var html$1u = "<div>\n<!-- <div class=\"simple-button simple-button--filter selector filter--search\">\n        <svg width=\"23\" height=\"22\" viewBox=\"0 0 23 22\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"9.9964\" cy=\"9.63489\" r=\"8.43556\" stroke=\"currentColor\" stroke-width=\"2.4\"/>\n            <path d=\"M20.7768 20.4334L18.2135 17.8701\" stroke=\"currentColor\" stroke-width=\"2.5\" stroke-linecap=\"round\"/>\n        </svg>\n        <div class=\"hide\"></div>\n    </div> -->\n    <div class=\"simple-button simple-button--filter selector filter--sort\">\n        <span>#{filter_sorted}</span><div class=\"hide\"></div>\n    </div>\n\n    <div class=\"simple-button simple-button--filter selector filter--filter\">\n        <span>#{filter_filtred}</span><div class=\"hide\"></div>\n    </div>\n</div>";

  var html$1t = "<div class=\"card-more selector\">\n    <div class=\"card-more__box\">\n    <div class=\"card-more__title\">\n             #{more}\n        </div>\n    </div>\n</div>";

  var html$1s = "<div class=\"card-back selector\">\n    <div class=\"card-back__box\">\n    <div class=\"card-back__title\">\n             #{back_to_start}\n        </div>\n    </div>\n</div>";

  var html$1r = "<div class=\"search__body\">\n    <div class=\"search__input\">#{search_input}...</div>\n    <div class=\"search__keypad\"><div class=\"simple-keyboard\"></div></div>\n    <div class=\"search__history\" data-area=\"history\"></div>\n    <!-- <div class=\"search__sources\" data-area=\"sources\"></div> -->\n    <div class=\"search__results\"></div>\n</div>";

  var html$1q = "<div class=\"settings-input\">\n    <div class=\"settings-input__content\">\n        <div class=\"settings-input__input\"></div>\n\n        <div class=\"simple-keyboard\"></div>\n\n        <div class=\"settings-input__links\">#{settings_input_links}</div>\n    </div>\n</div>";

  var html$1p = "<div class=\"modal\">\n    <div class=\"modal__content\">\n        <div class=\"modal__head\">\n            <div class=\"modal__title\">{title}</div>\n        </div>\n        <div class=\"modal__body\">\n            \n        </div>\n    </div>\n</div>";

  var html$1o = "<div class=\"company-start\">\n    <div class=\"company-start__left\">\n        <div class=\"company-start__icon\">\n            <img src=\"{img}\" class=\"company-start__img\" />\n        </div>\n    </div>\n\n    <div class=\"company-start__right\">\n        <div class=\"company-start__name\">{name}</div>\n        <div class=\"company-start__place\">{place}</div>\n    </div>\n</div>";

  var html$1n = "<div class=\"modal-loading\">\n    \n</div>";

  var html$1m = "<div class=\"modal-pending\">\n    <div class=\"modal-pending__loading\"></div>\n    <div class=\"modal-pending__text\">{text}</div>\n</div>";

  var html$1l = "<div class=\"person-start\">\n\n    <div class=\"person-start__body\">\n        <div class=\"person-start__right\">\n            <div class=\"person-start__poster\">\n                <img src=\"{img}\" class=\"person-start__img\" />\n            </div>\n        </div>\n\n        <div class=\"person-start__left\">\n            <div class=\"person-start__tags\">\n                <div class=\"person-start__tag\">\n                    <img src=\"./img/icons/pulse.svg\" /> <div>{birthday}</div>\n                </div>\n            </div>\n            \n            <div class=\"person-start__name\">{name}</div>\n            <div class=\"person-start__place\">{place}</div>\n\n            <div class=\"person-start__descr\">{descr}</div>\n        </div>\n    </div>\n\n    <div class=\"person-start__descr-mobile\">{descr}</div>\n</div>";

  var html$1k = "<div class=\"empty\">\n    <div class=\"empty__img selector\"></div>\n    <div class=\"empty__title\">{title}</div>\n    <div class=\"empty__descr\">{descr}</div>\n</div>";

  var html$1j = "<div class=\"empty-filter\">\n    <div class=\"empty-filter__title\">#{empty_title}</div>\n    <div class=\"empty-filter__subtitle\">#{empty_text}</div>\n    <div class=\"empty-filter__buttons hide\"></div>\n    <div class=\"empty-filter__templates\">\n        <div class=\"empty-template\">\n            <div class=\"empty-template__ico\"></div>\n            <div class=\"empty-template__body\"></div>\n        </div>\n        <div class=\"empty-template\">\n            <div class=\"empty-template__ico\"></div>\n            <div class=\"empty-template__body\"></div>\n        </div>\n        <div class=\"empty-template\">\n            <div class=\"empty-template__ico\"></div>\n            <div class=\"empty-template__body\"></div>\n        </div>\n    </div>\n</div>";

  var html$1i = "<div class=\"notice selector\">\n    <div class=\"notice__head\">\n        <div class=\"notice__title\">{title}</div>\n        <div class=\"notice__time\">{time}</div>\n    </div>\n    \n    <div class=\"notice__descr\">{descr}</div>\n</div>";

  var html$1h = "<div class=\"notice notice--card selector layer--visible layer--render\">\n    <div class=\"notice__left\">\n        <div class=\"notice__img\">\n            <img />\n        </div>\n    </div>\n    <div class=\"notice__body\">\n        <div class=\"notice__head\">\n            <div class=\"notice__title\">{title}</div>\n            <div class=\"notice__time\">{time}</div>\n        </div>\n        \n        <div class=\"notice__descr\">{descr}</div>\n    </div>\n</div>";

  var html$1g = "<div class=\"torrent-item selector layer--visible layer--render\">\n    <div class=\"torrent-item__title\">{title}</div>\n    <div class=\"torrent-item__ffprobe hide\"></div>\n    <div class=\"torrent-item__details\">\n        <div class=\"torrent-item__date\">{date}</div>\n        <div class=\"torrent-item__tracker\">{tracker}</div>\n\n        <div class=\"torrent-item__bitrate bitrate\">#{torrent_item_bitrate}: <span>{bitrate} #{torrent_item_mb}</span></div>\n        <div class=\"torrent-item__seeds\">#{torrent_item_seeds}: <span>{seeds}</span></div>\n        <div class=\"torrent-item__grabs\">#{torrent_item_grabs}: <span>{grabs}</span></div>\n        \n        <div class=\"torrent-item__size\">{size}</div>\n    </div>\n</div>";

  var html$1f = "<div class=\"torrent-file selector\">\n    <div class=\"torrent-file__title\">{title}<span class=\"exe\">.{exe}</span></div>\n    <div class=\"torrent-file__size\">{size}</div>\n</div>";

  var html$1e = "<div class=\"files\">\n    <div class=\"files__left\">\n        <div class=\"full-start__poster selector\">\n            <img src=\"{img}\" class=\"full-start__img\" />\n        </div>\n\n        <div class=\"files__info\">\n            <div class=\"files__title\">{title}</div>\n            <div class=\"files__title-original\">{original_title}</div>\n        </div>\n    </div>\n    <div class=\"files__body\">\n        \n    </div>\n</div>";

  var html$1d = "<div class=\"about\">\n    <div>#{about_text}</div>\n    <div>#{about_android}</div>\n    <div>#{about_mobile}</div>\n    <div>#{about_abuse}</div>\n\n\n    <div class=\"overhide\">\n        <div class=\"about__contacts\">\n            <div>\n                <small>#{about_channel}</small><br>\n            <div class=\"about__contacts__link\">\n                <div>@prisma_party</div>\n            </div>\n            </div>\n\n            <div>\n                <!-- <small>#{about_version}</small><br>\n                <span class=\"version_app\"></span> -->\n            </div>\n\n            <div class=\"hide platform_android\">\n                <small>#{about_version} Android</small><br>\n                <span class=\"version_android\"></span>\n            </div>\n        </div>\n    </div>\n</div>";

  var html$1c = "<div class=\"error\">\n    <div class=\"error__ico\"></div>\n    <div class=\"error__body\">\n        <div class=\"error__title\">{title}</div>\n        <div class=\"error__text\">{text}</div>\n    </div>\n</div>";

  var html$1b = "<div class=\"season-episode selector layer--visible\">\n    <div class=\"season-episode__img\">\n        <img alt=\"\">\n        <div class=\"season-episode__loader\"></div>\n    </div>\n    <div class=\"season-episode__body\">\n        <div class=\"season-episode__head\">\n            <div class=\"season-episode__title\">{title}</div>\n            <div class=\"season-episode__time\">{time}</div>\n        </div>\n        <div class=\"season-episode__timeline\"></div>\n        <div class=\"season-episode__footer\">\n            <div class=\"season-episode__info\">{info}</div>\n            <div class=\"season-episode__quality\">{quality}</div>\n        </div>\n    </div>\n</div>";

  var html$1a = "<div class=\"season-episode-rate\">\n    <svg width=\"17\" height=\"16\" viewBox=\"0 0 17 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M8.39409 0.192139L10.99 5.30994L16.7882 6.20387L12.5475 10.4277L13.5819 15.9311L8.39409 13.2425L3.20626 15.9311L4.24065 10.4277L0 6.20387L5.79819 5.30994L8.39409 0.192139Z\" fill=\"currentColor\"></path>\n    </svg>\n    <span>{rate}</span>\n</div>";

  var html$19 = "<div class=\"season-info selector\">\n    <div class=\"season-info__title\">{name}</div>\n    <div class=\"season-info__head\">{head}</div>\n    <div class=\"season-info__overview\">{overview}</div>\n</div>";

  var html$18 = "<div class=\"error\">\n    <div class=\"error__ico\"></div>\n    <div class=\"error__body\">\n        <div class=\"error__title\">{title}</div>\n        <div class=\"error__text\">{text}</div>\n    </div>\n</div>\n\n<div class=\"torrent-error noconnect\">\n    <div>\n        <div>\u041F\u0440\u0438\u0447\u0438\u043D\u044B</div>\n        <ul>\n            <li>\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u0442\u0441\u044F \u0430\u0434\u0440\u0435\u0441: <code>{ip}</code></li>\n            <li class=\"nocorect\">\u0422\u0435\u043A\u0443\u0449\u0438\u0439 \u0430\u0434\u0440\u0435\u0441 <code>{ip}</code> \u044F\u0432\u043B\u044F\u0435\u0442\u0441\u044F \u043D\u0435\u0432\u0435\u0440\u043D\u044B\u043C!</li>\n            <li>\u0422\u0435\u043A\u0443\u0449\u0438\u0439 \u043E\u0442\u0432\u0435\u0442: <code>{echo}</code></li>\n        </ul>\n    </div>\n\n    <div>\n        <div>\u041A\u0430\u043A \u043F\u0440\u0430\u0432\u0438\u043B\u044C\u043D\u043E?</div>\n        <ul>\n            <li>\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0430\u0434\u0440\u0435\u0441: <code>192.168.0.\u0445\u0445\u0445:8090</code></li>\n            <li>\u0418\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0439\u0442\u0435 \u0432\u0435\u0440\u0441\u0438\u044E Matrix</li>\n        </ul>\n    </div>\n\n    <div>\n        <div>\u041A\u0430\u043A \u043F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C?</div>\n        <ul>\n            <li>\u041D\u0430 \u044D\u0442\u043E\u043C \u0436\u0435 \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0435, \u043E\u0442\u043A\u0440\u043E\u0439\u0442\u0435 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0438 \u0437\u0430\u0439\u0434\u0438\u0442\u0435 \u043F\u043E \u0430\u0434\u0440\u0435\u0441\u0443 <code>{ip}/echo</code></li>\n            <li>\u0415\u0441\u043B\u0438 \u0436\u0435 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043D\u0435 \u043E\u0442\u0432\u0435\u0442\u0438\u0442, \u043F\u0440\u043E\u0432\u0435\u0440\u044C\u0442\u0435 \u0437\u0430\u043F\u0443\u0449\u0435\u043D \u043B\u0438 TorrServe, \u0438\u043B\u0438 \u043F\u0435\u0440\u0435\u0437\u0430\u0433\u0440\u0443\u0437\u0438\u0442\u0435 \u0435\u0433\u043E.</li>\n            <li>\u0415\u0441\u043B\u0438 \u0436\u0435 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u043E\u0442\u0432\u0435\u0442\u0438\u043B, \u0443\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C \u0447\u0442\u043E \u0432 \u043E\u0442\u0432\u0435\u0442\u0435 \u0435\u0441\u0442\u044C \u0441\u0442\u0440\u043E\u043A\u0430 <code>MatriX</code></li>\n        </ul>\n    </div>\n</div>";

  var html$17 = "<div class=\"error\">\n    <div class=\"error__ico\"></div>\n    <div class=\"error__body\">\n        <div class=\"error__title\">{title}</div>\n        <div class=\"error__text\">{text}</div>\n    </div>\n</div>\n\n<div class=\"torrent-error noconnect\">\n    <div>\n        <div>\u041F\u0440\u0438\u0447\u0438\u043D\u044B</div>\n        <ul>\n            <li>\u0417\u0430\u043F\u0440\u043E\u0441 \u043D\u0430 \u043F\u0438\u043D\u0433 \u0432\u0435\u0440\u043D\u0443\u043B \u043D\u0435\u0432\u0435\u0440\u043D\u044B\u0439 \u0444\u043E\u0440\u043C\u0430\u0442</li>\n            <li>\u041E\u0442\u0432\u0435\u0442 \u043E\u0442 TorServer: <code>{echo}</code></li>\n        </ul>\n    </div>\n\n    <div>\n        <div>\u0427\u0442\u043E \u0434\u0435\u043B\u0430\u0442\u044C?</div>\n        <ul>\n            <li>\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C \u0447\u0442\u043E \u0443 \u0432\u0430\u0441 \u0441\u0442\u043E\u0438\u0442 \u0432\u0435\u0440\u0441\u0438\u044F Matrix</li>\n        </ul>\n    </div>\n\n    <div>\n        <div>\u041A\u0430\u043A \u043F\u0440\u043E\u0432\u0435\u0440\u0438\u0442\u044C?</div>\n        <ul>\n            <li>\u041E\u0442\u043A\u0440\u043E\u0439\u0442\u0435 \u0431\u0440\u0430\u0443\u0437\u0435\u0440 \u0438 \u0437\u0430\u0439\u0434\u0438\u0442\u0435 \u043F\u043E \u0430\u0434\u0440\u0435\u0441\u0443 <code>{ip}/echo</code></li>\n            <li>\u0423\u0431\u0435\u0434\u0438\u0442\u0435\u0441\u044C \u0447\u0442\u043E \u0432 \u043E\u0442\u0432\u0435\u0442\u0435 \u0435\u0441\u0442\u044C \u043D\u0430\u043B\u0438\u0447\u0438\u0435 \u043A\u043E\u0434\u0430 <code>MatriX</code></li>\n        </ul>\n    </div>\n</div>";

  var html$16 = "<div class=\"error\">\n    <div class=\"error__ico\"></div>\n    <div class=\"error__body\">\n        <div class=\"error__title\">{title}</div>\n        <div class=\"error__text\">{text}</div>\n    </div>\n</div>\n\n<div class=\"torrent-error noconnect\">\n    <div>\n        <div>#{torent_nohash_reasons}</div>\n        <ul>\n            <li>#{torent_nohash_reason_one}</li>\n            <li>#{torent_nohash_reason_two}: {echo}</li>\n            <li>#{torent_nohash_reason_three}: <code>{url}</code></li>\n        </ul>\n    </div>\n\n    <div class=\"is--jackett\">\n        <div>#{torent_nohash_do}</div>\n        <ul>\n            <li>#{torent_nohash_do_one}</li>\n            <li>#{torent_nohash_do_two}</li>\n            <li>#{torent_nohash_do_three}</li>\n        </ul>\n    </div>\n\n    <div class=\"is--torlook\">\n        <div>#{torent_nohash_do}</div>\n        <ul>\n            <li>#{torent_nohash_do_four}</li>\n            <li>#{torent_nohash_do_five}</li>\n        </ul>\n    </div>\n</div>";

  var html$15 = "<div class=\"torrent-install\">\n    <div class=\"torrent-install__left\">\n        <img src=\"/img/ili/tv.png\" class=\"torrent-install\"/>\n    </div>\n    <div class=\"torrent-install__details\">\n        <div class=\"torrent-install__title\">#{torrent_install_need}</div>\n        <div class=\"torrent-install__descr\">#{torrent_install_text}</div>\n        \n        <div class=\"torrent-install__label\">#{torrent_install_contact}\n        </div>\n\n            <div class=\"torrent-install__link\">\n                <div>@prisma_party</div>\n            </div>\n        </div>\n    </div>\n</div>";

  var html$14 = "<div class=\"torrent-checklist\">\n    <div class=\"torrent-checklist__descr\">#{torrent_error_text}</div>\n\n    <div class=\"torrent-checklist__progress-steps\"></div>\n    <div class=\"torrent-checklist__progress-bar\">\n        <div style=\"width: 0\"></div>\n    </div>\n\n    <div class=\"torrent-checklist__content\">\n        <div class=\"torrent-checklist__steps\">\n            <ul class=\"torrent-checklist__list\">\n                <li>#{torrent_error_step_1}</li>\n                <li>#{torrent_error_step_2}</li>\n                <li>#{torrent_error_step_3}</li>\n                <li>#{torrent_error_step_4}</li>\n                <li>#{torrent_error_step_5}</li>\n                <li>#{torrent_error_step_6}</li>\n            </ul>\n        </div>\n\n        <div class=\"torrent-checklist__info\">\n            <div class=\"hide\">#{torrent_error_info_1}</div>\n            <div class=\"hide\">#{torrent_error_info_2}</div>\n            <div class=\"hide\">#{torrent_error_info_3}</div>\n            <div class=\"hide\">#{torrent_error_info_4}</div>\n            <div class=\"hide\">#{torrent_error_info_5}</div>\n            <div class=\"hide\">#{torrent_error_info_6}</div>\n            <div class=\"hide\">#{torrent_error_info_7}</div>\n        </div>\n    </div>\n\n    <div class=\"torrent-checklist__footer\">\n        <div class=\"simple-button selector\">#{torrent_error_start}</div><div class=\"torrent-checklist__next-step\"></div>\n    </div>\n</div>";

  var html$13 = "<div class=\"torrent-serial selector layer--visible layer--render\">\n    <img data-src=\"{img}\" class=\"torrent-serial__img\" />\n    <div class=\"torrent-serial__content\">\n        <div class=\"torrent-serial__body\">\n            <div class=\"torrent-serial__title\">{fname}</div>\n            <div class=\"torrent-serial__line\"><span>#{torrent_serial_season} - <b>{season}</b></span><span>#{torrent_serial_date} - {air_date}</span></div>\n        </div>\n        <div class=\"torrent-serial__detail\">\n            <div class=\"torrent-serial__size\">{size}</div>\n            <div class=\"torrent-serial__exe\">.{exe}</div>\n        </div>\n        <div class=\"torrent-serial__clear\"></div>\n    </div>\n    <div class=\"torrent-serial__episode\">{episode}</div>\n</div>";

  var html$12 = "<div class=\"search-box\">\n    <div class=\"search-box__input search__input\"></div>\n    <div class=\"search-box__keypad\"><div class=\"simple-keyboard\"></div></div>\n</div>";

  var html$11 = "<div class=\"console\">\n<!--    <div class=\"console__tabs\"></div> -->\n    <div class=\"console__body\"></div>\n</div>";

  var html$10 = "\n<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M13.26 3.59997L5.04997 12.29C4.73997 12.62 4.43997 13.27 4.37997 13.72L4.00997 16.96C3.87997 18.13 4.71997 18.93 5.87997 18.73L9.09997 18.18C9.54997 18.1 10.18 17.77 10.49 17.43L18.7 8.73997C20.12 7.23997 20.76 5.52997 18.55 3.43997C16.35 1.36997 14.68 2.09997 13.26 3.59997Z\" stroke=\"#FDFDFD\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n<path d=\"M11.89 5.05005C12.32 7.81005 14.56 9.92005 17.34 10.2\" stroke=\"#FDFDFD\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n</svg>\n\n";

  var html$$ = "\n<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M9.46992 15.2799C9.27992 15.2799 9.08992 15.2099 8.93992 15.0599C8.11992 14.2399 7.66992 13.1499 7.66992 11.9999C7.66992 9.60992 9.60992 7.66992 11.9999 7.66992C13.1499 7.66992 14.2399 8.11992 15.0599 8.93992C15.1999 9.07992 15.2799 9.26992 15.2799 9.46992C15.2799 9.66992 15.1999 9.85992 15.0599 9.99992L9.99992 15.0599C9.84992 15.2099 9.65992 15.2799 9.46992 15.2799ZM11.9999 9.16992C10.4399 9.16992 9.16992 10.4399 9.16992 11.9999C9.16992 12.4999 9.29992 12.9799 9.53992 13.3999L13.3999 9.53992C12.9799 9.29992 12.4999 9.16992 11.9999 9.16992Z\" fill=\"#fff\"/>\n<path d=\"M5.59984 18.51C5.42984 18.51 5.24984 18.45 5.10984 18.33C4.03984 17.42 3.07984 16.3 2.25984 15C1.19984 13.35 1.19984 10.66 2.25984 8.99998C4.69984 5.17998 8.24984 2.97998 11.9998 2.97998C14.1998 2.97998 16.3698 3.73998 18.2698 5.16998C18.5998 5.41998 18.6698 5.88998 18.4198 6.21998C18.1698 6.54998 17.6998 6.61998 17.3698 6.36998C15.7298 5.12998 13.8698 4.47998 11.9998 4.47998C8.76984 4.47998 5.67984 6.41998 3.51984 9.80998C2.76984 10.98 2.76984 13.02 3.51984 14.19C4.26984 15.36 5.12984 16.37 6.07984 17.19C6.38984 17.46 6.42984 17.93 6.15984 18.25C6.01984 18.42 5.80984 18.51 5.59984 18.51Z\" fill=\"#fff\"/>\n<path d=\"M12.0006 21.02C10.6706 21.02 9.37055 20.75 8.12055 20.22C7.74055 20.06 7.56055 19.62 7.72055 19.24C7.88055 18.86 8.32055 18.68 8.70055 18.84C9.76055 19.29 10.8706 19.52 11.9906 19.52C15.2206 19.52 18.3106 17.58 20.4706 14.19C21.2206 13.02 21.2206 10.98 20.4706 9.81C20.1606 9.32 19.8205 8.85 19.4606 8.41C19.2006 8.09 19.2506 7.62 19.5706 7.35C19.8906 7.09 20.3605 7.13 20.6306 7.46C21.0206 7.94 21.4006 8.46 21.7406 9C22.8006 10.65 22.8006 13.34 21.7406 15C19.3006 18.82 15.7506 21.02 12.0006 21.02Z\" fill=\"#fff\"/>\n<path d=\"M12.6896 16.2701C12.3396 16.2701 12.0196 16.0201 11.9496 15.6601C11.8696 15.2501 12.1396 14.8601 12.5496 14.7901C13.6496 14.5901 14.5696 13.6701 14.7696 12.5701C14.8496 12.1601 15.2396 11.9001 15.6496 11.9701C16.0596 12.0501 16.3296 12.4401 16.2496 12.8501C15.9296 14.5801 14.5496 15.9501 12.8296 16.2701C12.7796 16.2601 12.7396 16.2701 12.6896 16.2701Z\" fill=\"#fff\"/>\n<path d=\"M1.99945 22.75C1.80945 22.75 1.61945 22.68 1.46945 22.53C1.17945 22.24 1.17945 21.76 1.46945 21.47L8.93945 14C9.22945 13.71 9.70945 13.71 9.99945 14C10.2895 14.29 10.2895 14.77 9.99945 15.06L2.52945 22.53C2.37945 22.68 2.18945 22.75 1.99945 22.75Z\" fill=\"#fff\"/>\n<path d=\"M14.5307 10.2199C14.3407 10.2199 14.1507 10.1499 14.0007 9.99994C13.7107 9.70994 13.7107 9.22994 14.0007 8.93994L21.4707 1.46994C21.7607 1.17994 22.2407 1.17994 22.5307 1.46994C22.8207 1.75994 22.8207 2.23994 22.5307 2.52994L15.0607 9.99994C14.9107 10.1499 14.7207 10.2199 14.5307 10.2199Z\" fill=\"#fff\"/>\n</svg>\n";

  var html$_ = "\n<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"512\" height=\"512\" viewBox=\"0 0 401.998 401.998\" xml:space=\"preserve\"><path d=\"M357.45 190.721c-5.331-5.33-11.8-7.993-19.417-7.993h-9.131v-54.821c0-35.022-12.559-65.093-37.685-90.218C266.093 12.563 236.025 0 200.998 0c-35.026 0-65.1 12.563-90.222 37.688-25.126 25.126-37.685 55.196-37.685 90.219v54.821h-9.135c-7.611 0-14.084 2.663-19.414 7.993-5.33 5.326-7.994 11.799-7.994 19.417V374.59c0 7.611 2.665 14.086 7.994 19.417 5.33 5.325 11.803 7.991 19.414 7.991H338.04c7.617 0 14.085-2.663 19.417-7.991 5.325-5.331 7.994-11.806 7.994-19.417V210.135c.004-7.612-2.669-14.084-8.001-19.414zm-83.363-7.993H127.909v-54.821c0-20.175 7.139-37.402 21.414-51.675 14.277-14.275 31.501-21.411 51.678-21.411 20.179 0 37.399 7.135 51.677 21.411 14.271 14.272 21.409 31.5 21.409 51.675v54.821z\" fill=\"currentColor\"></path></svg>\n";

  var html$Z = "\n<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n<path d=\"M8.39062 18.4907V8.33071C8.39062 7.93071 8.51062 7.54071 8.73062 7.21071L11.4606 3.15071C11.8906 2.50071 12.9606 2.04071 13.8706 2.38071C14.8506 2.71071 15.5006 3.81071 15.2906 4.79071L14.7706 8.06071C14.7306 8.36071 14.8106 8.63071 14.9806 8.84071C15.1506 9.03071 15.4006 9.15071 15.6706 9.15071H19.7806C20.5706 9.15071 21.2506 9.47071 21.6506 10.0307C22.0306 10.5707 22.1006 11.2707 21.8506 11.9807L19.3906 19.4707C19.0806 20.7107 17.7306 21.7207 16.3906 21.7207H12.4906C11.8206 21.7207 10.8806 21.4907 10.4506 21.0607L9.17062 20.0707C8.68062 19.7007 8.39062 19.1107 8.39062 18.4907Z\" fill=\"currentColor\"/>\n<path d=\"M5.21 6.37891H4.18C2.63 6.37891 2 6.97891 2 8.45891V18.5189C2 19.9989 2.63 20.5989 4.18 20.5989H5.21C6.76 20.5989 7.39 19.9989 7.39 18.5189V8.45891C7.39 6.97891 6.76 6.37891 5.21 6.37891Z\" fill=\"currentColor\"/>\n</svg>\n\n";

  var html$Y = "<svg xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" version=\"1.1\" x=\"0px\" y=\"0px\" viewBox=\"0 0 100 125\" enable-background=\"new 0 0 100 100\" xml:space=\"preserve\"><g><g><path d=\"M76.703,41.593h17.802c0.273,0,0.495-0.221,0.495-0.495s-0.221-0.495-0.495-0.495H76.703    c-0.273,0-0.495,0.221-0.495,0.495S76.43,41.593,76.703,41.593z\"/><path d=\"M5.494,41.593h62.308c0.273,0,0.495-0.221,0.495-0.495s-0.221-0.495-0.495-0.495H5.494C5.221,40.604,5,40.826,5,41.099    S5.221,41.593,5.494,41.593z\"/><path d=\"M5.494,50.495h17.802c0.273,0,0.494-0.221,0.494-0.495s-0.221-0.495-0.494-0.495H5.494C5.221,49.505,5,49.727,5,50    S5.221,50.495,5.494,50.495z\"/><path d=\"M41.099,49.505h-8.901c-0.273,0-0.495,0.221-0.495,0.495s0.221,0.495,0.495,0.495h8.901c0.273,0,0.495-0.221,0.495-0.495    S41.372,49.505,41.099,49.505z\"/><path d=\"M94.505,49.505H50c-0.273,0-0.495,0.221-0.495,0.495s0.221,0.495,0.495,0.495h44.505C94.779,50.495,95,50.273,95,50    S94.779,49.505,94.505,49.505z\"/><path d=\"M36.648,58.407H5.494C5.221,58.407,5,58.628,5,58.901c0,0.273,0.221,0.495,0.495,0.495h31.154    c0.273,0,0.495-0.221,0.495-0.495C37.143,58.628,36.922,58.407,36.648,58.407z\"/></g></g></svg>";

  var html$X = "<svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"-5.0 -10.0 110.0 135.0\">\n <path d=\"m11.551 14.82h76.898c3.6172 0.003907 6.5469 2.9336 6.5508 6.5508v57.258c-0.003906 3.6172-2.9336 6.5469-6.5508 6.5508h-76.898c-3.6172-0.003907-6.5469-2.9336-6.5508-6.5508v-57.258c0.003906-3.6172 2.9336-6.5469 6.5508-6.5508zm48.602 41.5 9.8477-10.84c0.98438-1.0938 2.3906-1.7148 3.8594-1.7109 1.4688 0 2.8711 0.61719 3.8594 1.6992l13.57 14.902v-39c-0.003906-1.5664-1.2734-2.8359-2.8398-2.8398h-76.898c-1.5664 0.003906-2.8359 1.2734-2.8398 2.8398v39l22.449-24.672c1.3086-1.4375 3.1641-2.2578 5.1094-2.2578 1.9453 0 3.8008 0.82031 5.1094 2.2578l18.77 20.621zm31.141 9.5508-16.293-17.871c-0.28906-0.3125-0.69531-0.49609-1.1211-0.5-0.42578-0.003906-0.83594 0.17578-1.1289 0.48828l-10.102 11.102 4.4102 4.8398c0.6875 0.75781 0.63281 1.9258-0.125 2.6172-0.75391 0.6875-1.9258 0.62891-2.6133-0.125l-25.68-28.223c-0.60547-0.66797-1.4688-1.0508-2.3711-1.0508-0.90234 0-1.7617 0.38281-2.3711 1.0508l-25.188 27.672v12.758c0.003906 1.5664 1.2734 2.8359 2.8398 2.8398h76.898c1.5664-0.003906 2.8359-1.2734 2.8398-2.8398v-12.758zm-28.371-35.582c-0.9375-0.9375-2.3438-1.2148-3.5664-0.71094-1.2227 0.50781-2.0195 1.6992-2.0195 3.0234 0 1.3203 0.79687 2.5156 2.0195 3.0195 1.2227 0.50781 2.6289 0.22656 3.5664-0.71094 1.2734-1.2773 1.2734-3.3438 0-4.6211zm-2.3086-4.6719-0.003906 0.003906c-2.832 0-5.3828 1.7031-6.4648 4.3203-1.0859 2.6172-0.48438 5.625 1.5156 7.6289 2.0039 2 5.0117 2.6016 7.6289 1.5156 2.6172-1.082 4.3203-3.6328 4.3203-6.4648 0-3.8672-3.1328-7-7-7z\" fill-rule=\"evenodd\"/>\n</svg>";

  var html$W = "<div class=\"time-line\" data-hash=\"{hash}\">\n    <div style=\"width: {percent}%\"></div>\n</div>";

  var html$V = "<span class=\"time-line-details\" data-hash=\"{hash}\">\n#{time_viewed} - <b a=\"t\">{time}</b> #{time_from} <b a=\"d\">{duration} / <b a=\"p\">{percent}</b></b>\n</span>";

  var html$U = "<div class=\"empty empty--list\">\n    <div class=\"empty__title\">#{empty_title}</div>\n    <div class=\"empty__descr\">#{empty_text}</div>\n</div>";

  var html$T = "<div class=\"screensaver\">\n    <div class=\"screensaver__slides\">\n        <img class=\"screensaver__slides-one\" />\n        <img class=\"screensaver__slides-two\" />\n    </div>\n    <div class=\"screensaver__gradient\"></div>\n    <div class=\"screensaver__datetime\">\n        <div class=\"screensaver__datetime-time\"><span class=\"time--clock\"></span></div>\n        <div class=\"screensaver__datetime-date\"><span class=\"time--full\"></span></div>\n    </div>\n</div>";

  var html$S = "<div class=\"plugins-catalog\">\n\n    <div class=\"plugins-catalog__block\">\n        <div class=\"plugins-catalog__title selector\">#{plugins_catalog_work}</div>\n        <div class=\"plugins-catalog__descr\">#{plugins_catalog_work_descr}</div>\n        <div class=\"plugins-catalog__list\">\n            \n        </div>\n    </div>\n\n    <div class=\"plugins-catalog__block\">\n        <div class=\"plugins-catalog__title\">#{plugins_catalog_popular}</div>\n        <div class=\"plugins-catalog__descr\">#{plugins_catalog_popular_descr}</div>\n        <div class=\"plugins-catalog__list\">\n            \n        </div>\n    </div>\n</div>";

  var html$R = "<div class=\"broadcast\">\n    <div class=\"broadcast__text\">{text}</div>\n\n    <div class=\"broadcast__scan\"><div></div></div>\n\n    <div class=\"broadcast__devices\">\n    \n    </div>\n</div>";

  var html$Q = "<div class=\"lang\">\n    <div class=\"lang__body\">\n        <div class=\"lang__logo\">\n            <img src=\"./img/lang_logo.png\" />\n        </div>\n        <div class=\"lang__title\"></div>\n        <div class=\"lang__subtitle\"></div>\n        <div class=\"lang__selector\"></div>\n    </div>\n</div>";

  var html$P = "<div class=\"extensions\">\n    <div class=\"extensions__body\"></div>\n</div>";

  var html$O = "<div class=\"extensions__block layer--visible layer--render\">\n    <div class=\"extensions__block-head\">\n        <div class=\"extensions__block-title\">{title}</div>\n    </div>\n    <div class=\"extensions__block-body\"></div>\n</div>";

  var html$N = "<div class=\"extensions__item selector layer--visible layer--render\">\n    <div class=\"extensions__item-author\"></div>\n    <div class=\"extensions__item-name\"></div>\n    <div class=\"extensions__item-descr\"></div>\n    <div class=\"extensions__item-footer\">\n        <div class=\"extensions__item-included hide\"></div>\n        <div class=\"extensions__item-check hide\"></div>\n        <div class=\"extensions__item-code hide success\"></div>\n        <div class=\"extensions__item-status hide\"></div>\n        <div class=\"extensions__item-disabled hide\">#{player_disabled}</div>\n    </div>\n</div>";

  var html$M = "<div class=\"extensions__item extensions__item--recomend selector layer--visible layer--render\">\n    <div class=\"extensions__item-imagebox\">\n        <img class=\"extensions__item-image\" />\n    </div>\n    <div class=\"extensions__item-body\">\n        <div class=\"extensions__item-author\"></div>\n        <div class=\"extensions__item-name\"></div>\n        <div class=\"extensions__item-descr\"></div>\n        <div class=\"extensions__item-footer\">\n            <div class=\"extensions__item-included hide\"></div>\n            <div class=\"extensions__item-check hide\"></div>\n            <div class=\"extensions__item-code hide success\"></div>\n            <div class=\"extensions__item-status hide\"></div>\n            <div class=\"extensions__item-disabled hide\">#{player_disabled}</div>\n        </div>\n    </div>\n</div>";

  var html$L = "<div class=\"extensions-info\">\n    <div class=\"extensions-info__descr\"></div>\n    <div class=\"extensions-info__instruction\"></div>\n\n    <div class=\"extensions-info__footer\"> </div>\n</div>";

  var html$K = "<div class=\"extensions__item extensions__item--theme selector layer--visible layer--render\">\n    <div class=\"extensions__item-imagebox\">\n        <img class=\"extensions__item-image\" />\n    </div>\n    <div class=\"extensions__item-body\">\n        <div class=\"extensions__item-name\"></div>\n    </div>\n</div>";

  var html$J = "<div class=\"extensions__item extensions__item--screensaver selector layer--visible layer--render\">\n    <div class=\"extensions__item-imagebox\">\n        <img class=\"extensions__item-image\" />\n    </div>\n    <div class=\"extensions__item-overlay\">\n        <div class=\"extensions__item-name\"></div>\n        <div class=\"extensions__item-time\"></div>\n    </div>\n</div>";

  var html$I = "<div class=\"iframe\">\n    <div class=\"iframe__body\">\n        <iframe src=\"\" class=\"iframe__window\"></iframe>\n    </div>\n</div>";

  var html$H = "<div class=\"account-modal\">\n    <div class=\"account-modal__icon\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M18.75 8V10.1C18.31 10.04 17.81 10.01 17.25 10V8C17.25 4.85 16.36 2.75 12 2.75C7.64 2.75 6.75 4.85 6.75 8V10C6.19 10.01 5.69 10.04 5.25 10.1V8C5.25 5.1 5.95 1.25 12 1.25C18.05 1.25 18.75 5.1 18.75 8Z\" fill=\"#00FFCC\"/>\n            <path opacity=\"0.4\" d=\"M22 15V17C22 21 21 22 17 22H7C3 22 2 21 2 17V15C2 11.66 2.7 10.41 5.25 10.1C5.69 10.04 6.19 10.01 6.75 10H17.25C17.81 10.01 18.31 10.04 18.75 10.1C21.3 10.41 22 11.66 22 15Z\" fill=\"url(#paint0_linear_3195_4555)\"/>\n            <path d=\"M8 17.0001C7.87 17.0001 7.74 16.9701 7.62 16.9201C7.49 16.8701 7.39001 16.8001 7.29001 16.7101C7.11001 16.5201 7 16.2601 7 16.0001C7 15.8701 7.02999 15.7401 7.07999 15.6201C7.12999 15.5001 7.20001 15.3901 7.29001 15.2901C7.39001 15.2001 7.49 15.1301 7.62 15.0801C7.99 14.9201 8.42999 15.0101 8.70999 15.2901C8.79999 15.3901 8.87001 15.5001 8.92001 15.6201C8.97001 15.7401 9 15.8701 9 16.0001C9 16.2601 8.88999 16.5201 8.70999 16.7101C8.51999 16.8901 8.26 17.0001 8 17.0001Z\" fill=\"#C3CAC9\"/>\n            <path d=\"M12 17C11.73 17 11.48 16.89 11.29 16.71C11.2 16.61 11.13 16.5 11.08 16.38C11.03 16.26 11 16.13 11 16C11 15.73 11.11 15.48 11.29 15.29C11.66 14.92 12.33 14.92 12.71 15.29C12.89 15.48 13 15.73 13 16C13 16.13 12.97 16.26 12.92 16.38C12.87 16.5 12.8 16.61 12.71 16.71C12.52 16.89 12.26 17 12 17Z\" fill=\"#ADADAD\"/>\n            <path d=\"M16 17C15.74 17 15.48 16.89 15.29 16.71C15.11 16.52 15 16.27 15 16C15 15.73 15.11 15.48 15.29 15.29C15.67 14.92 16.34 14.92 16.71 15.29C16.75 15.34 16.79 15.39 16.83 15.45C16.87 15.5 16.9 15.56 16.92 15.62C16.95 15.68 16.97 15.74 16.98 15.8C16.99 15.87 17 15.94 17 16C17 16.26 16.89 16.52 16.71 16.71C16.52 16.89 16.26 17 16 17Z\" fill=\"#BEBBBB\"/>\n            <defs>\n            <linearGradient id=\"paint0_linear_3195_4555\" x1=\"12\" y1=\"10\" x2=\"12\" y2=\"22\" gradientUnits=\"userSpaceOnUse\">\n            <stop stop-color=\"#00FFCC\"/>\n            </linearGradient>\n            </defs>\n        </svg>\n    </div>\n\n    <div class=\"account-modal__desc\">\n        #{account_create}\n    </div>\n</div>";

  var html$G = "<div class=\"account-modal\">\n    <div class=\"account-modal__icon-svg\">\n        <svg height=\"184\" viewBox=\"0 0 199 184\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <circle cx=\"100\" cy=\"92\" r=\"92\" fill=\"#D9D9D9\" fill-opacity=\"0.06\"/>\n            <path d=\"M161.917 23H78.1668C75.2052 23 72.365 24.1765 70.2708 26.2706C68.1767 28.3648 67.0002 31.2051 67.0002 34.1667V109.542H55.8335V115.125H89.3335C90.0739 115.125 90.784 114.831 91.3075 114.307C91.831 113.784 92.1252 113.074 92.1252 112.333V106.529L112.381 120.708L92.1252 134.887V129.083C92.1252 128.343 91.831 127.633 91.3075 127.109C90.784 126.586 90.0739 126.292 89.3335 126.292H55.8335V131.875H67.0002V145.833C67.0002 148.795 68.1767 151.635 70.2708 153.729C72.365 155.824 75.2052 157 78.1668 157H161.917C164.878 157 167.719 155.824 169.813 153.729C171.907 151.635 173.083 148.795 173.083 145.833V34.1667C173.083 31.2051 171.907 28.3648 169.813 26.2706C167.719 24.1765 164.878 23 161.917 23V23ZM78.1668 28.5833H161.917C163.398 28.5833 164.818 29.1716 165.865 30.2187C166.912 31.2657 167.5 32.6859 167.5 34.1667V38.7701L160.434 47.603C159.609 48.6389 158.561 49.4751 157.368 50.0489C156.174 50.6227 154.866 50.9194 153.542 50.9167H133.721C133.08 47.7613 131.368 44.9244 128.875 42.8868C126.382 40.8491 123.262 39.736 120.042 39.736C116.822 39.736 113.701 40.8491 111.208 42.8868C108.715 44.9244 107.003 47.7613 106.363 50.9167H86.5418C85.2175 50.9194 83.9097 50.6227 82.7162 50.0489C81.5226 49.4751 80.4742 48.6389 79.6492 47.603L72.5835 38.7701V34.1667C72.5835 32.6859 73.1717 31.2657 74.2188 30.2187C75.2659 29.1716 76.686 28.5833 78.1668 28.5833V28.5833ZM128.417 53.7083C128.417 55.3648 127.926 56.984 127.005 58.3612C126.085 59.7385 124.777 60.8119 123.247 61.4458C121.716 62.0797 120.033 62.2456 118.408 61.9224C116.783 61.5993 115.291 60.8016 114.12 59.6304C112.949 58.4591 112.151 56.9668 111.828 55.3422C111.505 53.7176 111.67 52.0337 112.304 50.5034C112.938 48.973 114.012 47.665 115.389 46.7448C116.766 45.8245 118.385 45.3333 120.042 45.3333C122.263 45.3333 124.393 46.2157 125.964 47.7863C127.534 49.3569 128.417 51.4871 128.417 53.7083ZM161.917 151.417H78.1668C76.686 151.417 75.2659 150.828 74.2188 149.781C73.1717 148.734 72.5835 147.314 72.5835 145.833V131.875H86.5418V140.25C86.5421 140.76 86.6823 141.261 86.9472 141.697C87.2121 142.134 87.5915 142.489 88.0443 142.725C88.497 142.96 89.0057 143.067 89.515 143.034C90.0243 143.001 90.5148 142.829 90.9331 142.536L118.85 122.995C119.217 122.737 119.517 122.395 119.724 121.997C119.931 121.599 120.04 121.157 120.04 120.708C120.04 120.26 119.931 119.818 119.724 119.42C119.517 119.022 119.217 118.679 118.85 118.422L90.9331 98.8803C90.5148 98.5878 90.0243 98.4156 89.515 98.3825C89.0057 98.3493 88.497 98.4564 88.0443 98.6921C87.5915 98.9278 87.2121 99.2831 86.9472 99.7194C86.6823 100.156 86.5421 100.656 86.5418 101.167V109.542H72.5835V47.709L75.2914 51.0925C76.6378 52.7836 78.3491 54.1484 80.2973 55.0848C82.2455 56.0212 84.3803 56.505 86.5418 56.5H106.363C107.003 59.6554 108.715 62.4922 111.208 64.5299C113.701 66.5675 116.822 67.6807 120.042 67.6807C123.262 67.6807 126.382 66.5675 128.875 64.5299C131.368 62.4922 133.08 59.6554 133.721 56.5H153.542C155.703 56.505 157.838 56.0212 159.786 55.0848C161.735 54.1484 163.446 52.7836 164.792 51.0925L167.5 47.709V145.833C167.5 147.314 166.912 148.734 165.865 149.781C164.818 150.828 163.398 151.417 161.917 151.417V151.417Z\" fill=\"white\"/>\n            <path d=\"M117.25 50.9166H122.833V56.5H117.25V50.9166Z\" fill=\"white\"/>\n            <path d=\"M22.3335 36.9584H55.8335V42.5417H22.3335V36.9584Z\" fill=\"white\"/>\n            <path d=\"M11.1665 36.9584H16.7498V42.5417H11.1665V36.9584Z\" fill=\"white\"/>\n            <path d=\"M0 56.5H33.5V62.0833H0V56.5Z\" fill=\"white\"/>\n            <path d=\"M30.7085 151.417H55.8335V157H30.7085V151.417Z\" fill=\"white\"/>\n            <path d=\"M19.5415 151.417H25.1248V157H19.5415V151.417Z\" fill=\"white\"/>\n            <path d=\"M0 137.458H47.4583V143.042H0V137.458Z\" fill=\"white\"/>\n            <path d=\"M44.6665 90H61.4165V95.5833H44.6665V90Z\" fill=\"white\"/>\n            <path d=\"M33.5 90H39.0833V95.5833H33.5V90Z\" fill=\"white\"/>\n            <path d=\"M145.167 129.083H161.917V134.667H145.167V129.083Z\" fill=\"white\"/>\n            <path d=\"M122.833 140.25H161.917V145.833H122.833V140.25Z\" fill=\"white\"/>\n            <circle cx=\"169\" cy=\"32\" r=\"30\" fill=\"white\"/>\n            <rect x=\"159.808\" y=\"18.5649\" width=\"32\" height=\"6\" rx=\"3\" transform=\"rotate(45 159.808 18.5649)\" fill=\"#0C0C0C\"/>\n            <rect x=\"155.565\" y=\"41.1924\" width=\"32\" height=\"6\" rx=\"3\" transform=\"rotate(-45 155.565 41.1924)\" fill=\"#0C0C0C\"/>\n        </svg>\n    </div>\n\n    <div class=\"account-modal__desc\">\n        #{account_limited}\n    </div>\n</div>";

  var html$F = "<div class=\"prisma-premium\">\n    <div class=\"prisma-premium__title\">PREMIUM</div>\n    <div class=\"prisma-premium__descr\">\n        #{account_premium}\n    </div>\n  <!--  <div class=\"prisma-premium__descr\">#{account_premium_more}</div> -->\n  <div class=\"prisma-premium__url\">Telegram: @prismalk_bot</div>\n</div>";

  var html$E = "<div class=\"prisma-premium prisma-premium--detail\">\n    <div class=\"prisma-premium__icon selector\">\n    <img src=\"./img/icon_logo.png\" />\n    </div>\n    <div class=\"prisma-premium__descr\">\n        #{account_premium}\n    </div>\n    <div class=\"prisma-premium__includes\">\n        <div class=\"selector\">\n            <div class=\"prisma-premium__qr selector\">\n            <div><img src=\"./img/qr_donate.png\" /></div>\n            <!-- <div>#{filter_rating_from} 360 #{filter_rating_to} 5 040</div> -->\n        </div>\n        </div>\n    </div>\n    <div class=\"prisma-premium__descr\">#{account_premium_more}</div>\n    <div class=\"prisma-premium__url selector\">https://prisma.ws/donate</div>\n</div>";

  var html$D = "<div class=\"explorer layer--width\">\n    <div class=\"explorer__left\">\n        <div class=\"explorer__card\">\n            <div class=\"explorer-card\">\n                <div class=\"explorer-card__head\">\n                    <div class=\"explorer-card__head-left\">\n                        <div class=\"explorer-card__head-img selector\">\n                            <img alt=\"\">\n                        </div>\n                </div>\n            <div class=\"explorer-card__head-body\">\n                        <div class=\"explorer-card__head-create\"></div>\n                        <div class=\"explorer-card__head-rate\">\n                            <svg width=\"17\" height=\"16\" viewBox=\"0 0 17 16\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <path d=\"M8.39409 0.192139L10.99 5.30994L16.7882 6.20387L12.5475 10.4277L13.5819 15.9311L8.39409 13.2425L3.20626 15.9311L4.24065 10.4277L0 6.20387L5.79819 5.30994L8.39409 0.192139Z\" fill=\"currentColor\"/>\n                            </svg>\n                            <span></span>\n                        </div>\n                </div>\n            </div>\n                <div class=\"explorer-card__body\">\n                    <div class=\"explorer-card__title\"></div>\n                    <div class=\"explorer-card__genres\"></div>\n                    <div class=\"explorer-card__descr\"></div>\n                </div>\n        </div>\n    </div>\n</div>\n<div class=\"explorer__files\">\n    <div class=\"explorer__files-head\">\n        <div class=\"explorer-card__qr-block explorer-card__qr-block--top\">\n            <div class=\"explorer-card__qr-image\">\n                <img src=\"./img/qr-guide.svg\" alt=\"QR Code\">\n            </div>\n            <div class=\"explorer-card__qr-text\">\n                <span>\u0422\u0435\u0445\u043D\u0438\u0447\u0435\u0441\u043A\u0438\u0439 FAQ \u043F\u043E \u0443\u0441\u0442\u0440\u043E\u0439\u0441\u0442\u0432\u0430\u043C</span>\n                <p>\u043F\u0440\u043E\u0441\u043A\u0430\u043D\u0438\u0440\u0443\u0439\u0442\u0435 QR \u041A\u043E\u0434 \u0438\u043B\u0438 \u043F\u0435\u0440\u0435\u0439\u0434\u0438\u0442\u0435 \u043F\u043E \u0441\u0441\u044B\u043B\u043A\u0435 <b>start.prisma.ws</b></p>\n            </div>\n        </div>\n    </div>\n    <div class=\"explorer__files-body\"></div>\n</div>\n</div>";

  var html$C = "<div class=\"simple-button selector filter--back\">\n    <svg width=\"38\" height=\"30\" viewBox=\"0 0 38 30\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <rect x=\"1.5\" y=\"1.5\" width=\"35\" height=\"27\" rx=\"1.5\" stroke=\"currentColor\" stroke-width=\"3\"/>\n        <rect x=\"6\" y=\"7\" width=\"25\" height=\"3\" fill=\"currentColor\"/>\n        <rect x=\"6\" y=\"13\" width=\"13\" height=\"3\" fill=\"currentColor\"/>\n        <rect x=\"6\" y=\"19\" width=\"19\" height=\"3\" fill=\"currentColor\"/>\n    </svg>\n</div>";

  var html$B = "<div class=\"https\">\n    <div class=\"https__icon\">\n        <svg width=\"146\" height=\"61\" viewBox=\"0 0 146 61\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M72.3059 41.0263V46H76.3571V38.4905L72.3059 41.0263Z\" fill=\"currentColor\"/>\n            <path d=\"M93.1293 27.9919V46H97.1804V33.7812H104.499C107.101 33.7812 109.236 33.3075 110.902 32.3601C112.568 31.4017 113.799 30.1167 114.594 28.505C115.4 26.8932 115.803 25.1018 115.803 23.1307C115.803 21.1596 115.4 19.3736 114.594 17.7727C114.177 16.9454 113.644 16.2067 112.995 15.5568L109.612 17.6744C110.242 18.186 110.727 18.8068 111.065 19.5369C111.566 20.5933 111.817 21.7912 111.817 23.1307C111.817 24.4702 111.566 25.6735 111.065 26.7408C110.575 27.7971 109.786 28.6357 108.697 29.2564C107.608 29.8771 106.165 30.1875 104.368 30.1875H97.1804V25.4561L93.1293 27.9919Z\" fill=\"currentColor\"/>\n            <path d=\"M80.8456 12.5455L72.3059 17.8909V16.1392H61.7861V12.5455H80.8456Z\" fill=\"currentColor\"/>\n            <path d=\"M46.8434 33.8292V16.1392H57.3633V12.5455H32.2724V16.1392H42.7923V36.365L46.8434 33.8292Z\" fill=\"currentColor\"/>\n            <path d=\"M138.239 17.054C139.633 17.9687 140.428 19.2538 140.624 20.9091H144.544C144.49 19.2211 143.967 17.7128 142.976 16.3842C141.996 15.0556 140.667 14.0102 138.99 13.2479C137.313 12.4747 135.397 12.0881 133.24 12.0881C131.106 12.0881 129.173 12.4801 127.441 13.2642C125.721 14.0374 124.349 15.1264 123.325 16.5312C122.312 17.9252 121.806 19.5587 121.806 21.4318C121.806 23.6861 122.568 25.5102 124.093 26.9041C125.617 28.2981 127.686 29.3707 130.3 30.1222L134.417 31.2983C135.593 31.625 136.687 32.0062 137.7 32.4418C138.713 32.8774 139.529 33.4437 140.15 34.1406C140.771 34.8376 141.081 35.7415 141.081 36.8523C141.081 38.072 140.722 39.1392 140.003 40.054C139.284 40.9579 138.31 41.6657 137.079 42.1776C135.849 42.6785 134.46 42.929 132.914 42.929C131.585 42.929 130.344 42.733 129.189 42.3409C128.046 41.938 127.098 41.3281 126.347 40.5114C125.606 39.6837 125.182 38.6383 125.073 37.375H120.891C121.022 39.2045 121.583 40.8108 122.574 42.1939C123.575 43.5769 124.948 44.6551 126.69 45.4283C128.443 46.2015 130.518 46.5881 132.914 46.5881C135.484 46.5881 137.667 46.1579 139.464 45.2976C141.272 44.4373 142.644 43.2775 143.581 41.8182C144.528 40.3589 145.002 38.7254 145.002 36.9176C145.002 35.3494 144.681 34.0263 144.038 32.9482C143.395 31.87 142.579 30.9879 141.588 30.3018C140.608 29.6049 139.578 29.0549 138.5 28.652C137.433 28.2491 136.464 27.9332 135.593 27.7045L132.195 26.7898C131.574 26.6264 130.894 26.4141 130.153 26.1527C129.413 25.8804 128.705 25.5374 128.029 25.1236C127.354 24.6989 126.799 24.1707 126.363 23.5391C125.939 22.8965 125.726 22.1288 125.726 21.2358C125.726 20.1686 126.031 19.2157 126.641 18.3771C127.262 17.5386 128.122 16.8797 129.222 16.4006C130.333 15.9214 131.629 15.6818 133.11 15.6818C135.135 15.6818 136.845 16.1392 138.239 17.054Z\" fill=\"currentColor\"/>\n            <path d=\"M0.0511475 46V12.5455H4.10228V27.4432H21.9404V12.5455H25.9915V46H21.9404V31.0369H4.10228V46H0.0511475Z\" fill=\"currentColor\"/>\n            <rect x=\"25.9064\" y=\"54.3732\" width=\"102.368\" height=\"7\" transform=\"rotate(-32.0445 25.9064 54.3732)\" fill=\"currentColor\"/>\n        </svg>\n    </div>\n    <div class=\"https__text\">\n        #{https_text}\n    </div>\n</div>";

  var html$A = "<div class=\"navigation-bar\">\n    <div class=\"navigation-bar__body\">\n        <div class=\"navigation-bar__item\" data-action=\"back\">\n            <div class=\"navigation-bar__icon\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M15 19.9201L8.47997 13.4001C7.70997 12.6301 7.70997 11.3701 8.47997 10.6001L15 4.08008\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>            \n            </div>\n            <div class=\"navigation-bar__label\">#{back}</div>\n        </div>\n\n        <div class=\"navigation-bar__item\" data-action=\"main\">\n            <div class=\"navigation-bar__icon\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M10.07 2.82009L3.14002 8.37008C2.36002 8.99008 1.86002 10.3001 2.03002 11.2801L3.36002 19.2401C3.60002 20.6601 4.96002 21.8101 6.40002 21.8101H17.6C19.03 21.8101 20.4 20.6501 20.64 19.2401L21.97 11.2801C22.13 10.3001 21.63 8.99008 20.86 8.37008L13.93 2.8301C12.86 1.9701 11.13 1.97009 10.07 2.82009Z\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M12 15.5C13.3807 15.5 14.5 14.3807 14.5 13C14.5 11.6193 13.3807 10.5 12 10.5C10.6193 10.5 9.5 11.6193 9.5 13C9.5 14.3807 10.6193 15.5 12 15.5Z\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>            \n            </div>\n            <div class=\"navigation-bar__label\">#{title_main}</div>\n        </div>\n\n        <div class=\"navigation-bar__item\" data-action=\"movie\">\n            <div class=\"navigation-bar__icon\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n              <path d=\"M9 22H15C20 22 22 20 22 15V9C22 4 20 2 15 2H9C4 2 2 4 2 9V15C2 20 4 22 9 22Z\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              <path d=\"M9.1001 12V10.52C9.1001 8.60999 10.4501 7.83999 12.1001 8.78999L13.3801 9.52999L14.6601 10.27C16.3101 11.22 16.3101 12.78 14.6601 13.73L13.3801 14.47L12.1001 15.21C10.4501 16.16 9.1001 15.38 9.1001 13.48V12Z\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n              </svg>                   \n            </div>\n            <div class=\"navigation-bar__label\">#{menu_movies}</div>\n        </div>\n\n        <div class=\"navigation-bar__item\" data-action=\"tv\">\n        <div class=\"navigation-bar__icon\">\n        <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n        <path d=\"M7.25998 2H16.73C17.38 2 17.96 2.02003 18.48 2.09003C21.25 2.40003 22 3.70001 22 7.26001V13.58C22 17.14 21.25 18.44 18.48 18.75C17.96 18.82 17.39 18.84 16.73 18.84H7.25998C6.60998 18.84 6.02998 18.82 5.50998 18.75C2.73998 18.44 1.98999 17.14 1.98999 13.58V7.26001C1.98999 3.70001 2.73998 2.40003 5.50998 2.09003C6.02998 2.02003 6.60998 2 7.25998 2Z\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M13.58 8.32007H17.2599\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M6.73999 14.11H6.75998H17.27\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M7 22H17\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M7.1947 8.30005H7.20368\" stroke=\"#fff\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        <path d=\"M10.4945 8.30005H10.5035\" stroke=\"#fff\" stroke-width=\"2\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n        </svg>\n        </div>\n        <div class=\"navigation-bar__label\">#{menu_tv}</div>\n    </div>\n\n        <div class=\"navigation-bar__item\" data-action=\"search\">\n            <div class=\"navigation-bar__icon\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M11 20C15.9706 20 20 15.9706 20 11C20 6.02944 15.9706 2 11 2C6.02944 2 2 6.02944 2 11C2 15.9706 6.02944 20 11 20Z\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M18.9299 20.6898C19.4599 22.2898 20.6699 22.4498 21.5999 21.0498C22.4499 19.7698 21.8899 18.7198 20.3499 18.7198C19.2099 18.7098 18.5699 19.5998 18.9299 20.6898Z\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>            \n            </div>\n            <div class=\"navigation-bar__label\">#{search}</div>\n        </div>\n\n        <!-- <div class=\"navigation-bar__item\" data-action=\"settings\">\n            <div class=\"navigation-bar__icon\">\n            <svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M12 15C13.6569 15 15 13.6569 15 12C15 10.3431 13.6569 9 12 9C10.3431 9 9 10.3431 9 12C9 13.6569 10.3431 15 12 15Z\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            <path d=\"M2 12.8799V11.1199C2 10.0799 2.85 9.21994 3.9 9.21994C5.71 9.21994 6.45 7.93994 5.54 6.36994C5.02 5.46994 5.33 4.29994 6.24 3.77994L7.97 2.78994C8.76 2.31994 9.78 2.59994 10.25 3.38994L10.36 3.57994C11.26 5.14994 12.74 5.14994 13.65 3.57994L13.76 3.38994C14.23 2.59994 15.25 2.31994 16.04 2.78994L17.77 3.77994C18.68 4.29994 18.99 5.46994 18.47 6.36994C17.56 7.93994 18.3 9.21994 20.11 9.21994C21.15 9.21994 22.01 10.0699 22.01 11.1199V12.8799C22.01 13.9199 21.16 14.7799 20.11 14.7799C18.3 14.7799 17.56 16.0599 18.47 17.6299C18.99 18.5399 18.68 19.6999 17.77 20.2199L16.04 21.2099C15.25 21.6799 14.23 21.3999 13.76 20.6099L13.65 20.4199C12.75 18.8499 11.27 18.8499 10.36 20.4199L10.25 20.6099C9.78 21.3999 8.76 21.6799 7.97 21.2099L6.24 20.2199C5.33 19.6999 5.02 18.5299 5.54 17.6299C6.45 16.0599 5.71 14.7799 3.9 14.7799C2.85 14.7799 2 13.9199 2 12.8799Z\" stroke=\"#fff\" stroke-width=\"1.5\" stroke-miterlimit=\"10\" stroke-linecap=\"round\" stroke-linejoin=\"round\"/>\n            </svg>            \n            </div>\n            <div class=\"navigation-bar__label\">#{menu_settings}</div>\n        </div> -->\n    </div>\n</div>";

  var html$z = "<div class=\"head-backward selector\">\n    <div class=\"head-backward__button\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" width=\"512\" height=\"512\" x=\"0\" y=\"0\" viewBox=\"0 0 492 492\" xml:space=\"preserve\">\n            <path d=\"M198.608 246.104 382.664 62.04c5.068-5.056 7.856-11.816 7.856-19.024 0-7.212-2.788-13.968-7.856-19.032l-16.128-16.12C361.476 2.792 354.712 0 347.504 0s-13.964 2.792-19.028 7.864L109.328 227.008c-5.084 5.08-7.868 11.868-7.848 19.084-.02 7.248 2.76 14.028 7.848 19.112l218.944 218.932c5.064 5.072 11.82 7.864 19.032 7.864 7.208 0 13.964-2.792 19.032-7.864l16.124-16.12c10.492-10.492 10.492-27.572 0-38.06L198.608 246.104z\" fill=\"currentColor\"></path>\n        </svg>\n    </div>\n    <div class=\"head-backward__title\">{title}</div>\n</div>";

  var html$y = "<div class=\"account-add-device\">\n    <img src=\"./icons/qr-auth.png\" class=\"account-add-device__qr\" />\n\n    <div class=\"about\">\n        #{account_code_where}\n    </div> \n\n        <div class=\"about-info\">\n        #{account_code_info}\n    </div> \n\n    <div class=\"simple-button selector\">#{account_code_input}</div>\n</div>";

  var html$x = "<div class=\"feed-item layer--visible\">\n    <div class=\"feed-item__head\">\n        <div class=\"feed-item__icon\">\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M9 0L11.4308 6.56918L18 9L11.4308 11.4308L9 18L6.56918 11.4308L0 9L6.56918 6.56918L9 0Z\" fill=\"currentColor\"/>\n            </svg>\n        </div>\n        <div class=\"feed-item__label\"></div>\n    </div>\n\n    <div class=\"feed-item__right\">\n        <div class=\"feed-item__poster-box\">\n            <img class=\"feed-item__poster-img\" />\n        </div>\n    </div>\n\n    <div class=\"feed-item__body\">\n        <div class=\"feed-item__title\"></div>\n        <div class=\"feed-item__info\"></div>\n        <div class=\"feed-item__descr\"></div>\n        <div class=\"feed-item__tags\"></div>\n        <div class=\"feed-item__buttons\"></div>\n    </div>\n</div>";

  var html$w = "<div class=\"feed-head selector layer--visible\">\n    <div class=\"feed-head__icon\">\n        <img src=\"http://cub.watch/img/other/prisma_movie.jpg\" class=\"feed-head__img\" />\n    </div>\n\n    <div class=\"feed-head__body\">\n        <div class=\"feed-head__title\"></div>\n        <div class=\"feed-head__info\"></div>\n    </div>\n</div>";

  var html$v = "<div class=\"feed-item layer--visible\">\n    <div class=\"feed-item__head\">\n        <div class=\"feed-item__icon\">\n            <svg width=\"18\" height=\"18\" viewBox=\"0 0 18 18\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M9 0L11.4308 6.56918L18 9L11.4308 11.4308L9 18L6.56918 11.4308L0 9L6.56918 6.56918L9 0Z\" fill=\"currentColor\"/>\n            </svg>\n        </div>\n        <div class=\"feed-item__label\"></div>\n    </div>\n\n    <div class=\"feed-item__right\">\n        <div class=\"feed-item__image-box\">\n            <img class=\"feed-item__image-img\" />\n        </div>\n        <div class=\"feed-item__minicard\">\n            <div>\n                <div class=\"feed-item__title\"></div>\n                <div class=\"feed-item__info\"></div>\n            </div>\n            <div class=\"feed-item__minicard-poster\">\n                <div class=\"feed-item__poster-box\">\n                    <img class=\"feed-item__poster-img\" />\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <div class=\"feed-item__body\">\n        <div class=\"feed-item__descr\"></div>\n        <div class=\"feed-item__tags\"></div>\n        <div class=\"feed-item__buttons\"></div>\n    </div>\n</div>";

  var html$u = "<div class=\"register\">\n    <div class=\"register__name\"></div>\n    <div class=\"register__counter\"></div>\n</div>";

  var html$t = "<div class=\"speedtest\">\n    <div class=\"speedtest__body\">\n        <svg viewBox=\"-250 -250 500 305\" width=\"100%\">\n            <g class=\"scale\">\n                <circle r=\"200\" fill=\"none\" stroke-width=\"15\" class=\"speedtest__progress\" id=\"speedtest_progress\"></circle>\n                <circle r=\"200\" fill=\"none\" stroke-width=\"5\" stroke=\"currentColor\" class=\"speedtest__frequency\"></circle>\n                <circle r=\"200\" fill=\"none\" stroke-width=\"10\" class=\"speedtest__fill\"></circle>\n            </g>\n        \n            <path d=\"m-220 0 a120 -120 0 0 1 440 0\" fill=\"none\" stroke=\"blue\" stroke-width=\"0\" id=\"speedtest_path\"></path>\n\n            <text font-size=\"20px\" x=\"0\">\n                <textpath href=\"#speedtest_path\" data-text=\"0\">0</textpath>\n            </text>\n            <text font-size=\"20px\" x=\"69\">\n                <textpath href=\"#speedtest_path\" data-text=\"5\">5</textpath>\n            </text>\n            <text font-size=\"20px\" x=\"139\">\n                <textpath href=\"#speedtest_path\" data-text=\"10\">10</textpath>\n            </text>\n            <text font-size=\"20px\" x=\"216\">\n                <textpath href=\"#speedtest_path\" data-text=\"15\">15</textpath>\n            </text>\n            <text font-size=\"20px\" x=\"293\">\n                <textpath href=\"#speedtest_path\" data-text=\"20\">20</textpath>\n            </text>\n            <text font-size=\"20px\" x=\"371\">\n                <textpath href=\"#speedtest_path\" data-text=\"30\">30</textpath>\n            </text>\n            <text font-size=\"20px\" x=\"447\">\n                <textpath href=\"#speedtest_path\" data-text=\"60\">60</textpath>\n            </text>\n            <text font-size=\"20px\" x=\"515\">\n                <textpath href=\"#speedtest_path\" data-text=\"100\">100</textpath>\n            </text>\n            <text font-size=\"20px\" x=\"595\">\n                <textpath href=\"#speedtest_path\" data-text=\"200\">200</textpath>\n            </text>\n            <text font-size=\"20px\" x=\"655\">\n                <textpath href=\"#speedtest_path\" data-text=\"500\">500</textpath>\n            </text>\n        \n            <text id=\"speedtest_num\" text-anchor=\"middle\" alignment-baseline=\"central\" y=\"-80\" font-size=\"70\">0.000</text>\n            <text id=\"speedtest_num-text\" text-anchor=\"middle\" alignment-baseline=\"central\" y=\"-20\" font-size=\"25\">Mbps</text>\n            <text id=\"speedtest_status\" text-anchor=\"middle\" alignment-baseline=\"central\" y=\"35\" font-size=\"20\"></text>\n        </svg>\n\n        <svg viewBox=\"-250 -300 500 55\" width=\"100%\">\n            <polyline id=\"speedtest_graph\" points=\"-250,-250\" stroke=\"currentColor\" stroke-width=\"2\" fill=\"none\"></polyline>\n        </svg>\n    </div>\n</div>";

  var html$s = "<div class=\"ad-bot selector\">\n    <div class=\"ad-bot__content\">\n        <div class=\"ad-bot__body\">\n            <div class=\"ad-bot__left\">\n                <div class=\"smart\">\n                    <div class=\"smart__camera\"></div>\n                    <div class=\"smart__power\"></div>\n                    <div class=\"smart__body\">\n                        <div class=\"ad-bot__imgbox\">\n                            <img class=\"ad-bot__img\" />\n                        </div>\n                    </div>\n                </div>\n            </div>\n            <div class=\"ad-bot__right\">\n                <div class=\"ad-bot__title\"></div>\n                <div class=\"ad-bot__text\"></div>\n                <div class=\"ad-bot__more\"></div>\n            </div>\n        </div>\n\n        <div class=\"ad-bot__marker\"></div>\n    </div>\n    <div class=\"ad-bot__info\"></div>\n</div>";

  var html$r = "<div class=\"ad-video-block\">\n<div class=\"ad-video-block__loader\"></div>\n\n    <video class=\"ad-video-block__video\" type=\"video/mp4\" poster=\"./img/video_poster.png\" crossorigin=\"anonymous\" playsinline></video>\n\n    <div class=\"ad-video-block__vast\"></div>\n\n    <div class=\"player-video__paused hide\">\n        <svg width=\"19\" height=\"25\" viewBox=\"0 0 19 25\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <rect width=\"6\" height=\"25\" rx=\"2\" fill=\"white\"></rect>\n            <rect x=\"13\" width=\"6\" height=\"25\" rx=\"2\" fill=\"white\"></rect>\n        </svg>\n    </div>\n\n    <div class=\"ad-video-block__footer\">\n        <div class=\"ad-video-block__text\"></div>\n        <div class=\"ad-video-block__progress\">\n            <div class=\"ad-video-block__progress-fill\"></div>\n        </div>\n    </div>\n\n    <div class=\"ad-video-block__info\"></div>\n\n    <div class=\"ad-video-block__skip\"><span></span></div>\n</div>";

  var html$q = "<div class=\"discuss-rules\">\n    <div class=\"discuss-rules__body\">\n        <!-- <div class=\"discuss-rules__title\">\n            #{discuss_rules_title}\n        </div> -->\n\n        <!-- <div class=\"discuss-rules__items\">\n            <div>#{discuss_rules_rule_1}</div>\n            <div>#{discuss_rules_rule_2}</div>\n            <div>#{discuss_rules_rule_3}</div>\n            <div>#{discuss_rules_rule_4}</div>\n            <div>#{discuss_rules_rule_5}</div>\n            <div>#{discuss_rules_rule_6}</div>\n            <div>#{discuss_rules_rule_7}</div>\n        </div> -->\n    </div> \n</div>";

  var html$p = "<div class=\"bookmarks-folder card selector layer--visible layer--render\">\n    <div class=\"bookmarks-folder__inner card__view\">\n        <div class=\"bookmarks-folder__layer\">\n            <div class=\"bookmarks-folder__head\">\n                <div class=\"bookmarks-folder__title\"></div>\n                <div class=\"bookmarks-folder__num\"></div>\n            </div>\n\n            <div class=\"bookmarks-folder__body\"></div>\n        </div>\n    </div>\n</div>";

  var html$o = "<div class=\"ai-search-animation\">\n    <div class=\"ai-search-animation__data\">{icon}</div>\n    <div class=\"ai-search-animation__loupe\">\n        <svg xmlns=\"http://www.w3.org/2000/svg\" x=\"0px\" y=\"0px\" width=\"100\" height=\"100\" viewBox=\"0 0 50 50\" fill=\"currentColor\">\n                        <path d=\"M45.403,25.562c-0.506-1.89-1.518-3.553-2.906-4.862c1.134-2.665,0.963-5.724-0.487-8.237\tc-1.391-2.408-3.636-4.131-6.322-4.851c-1.891-0.506-3.839-0.462-5.669,0.088C28.276,5.382,25.562,4,22.647,4\tc-4.906,0-9.021,3.416-10.116,7.991c-0.01,0.001-0.019-0.003-0.029-0.002c-2.902,0.36-5.404,2.019-6.865,4.549\tc-1.391,2.408-1.76,5.214-1.04,7.9c0.507,1.891,1.519,3.556,2.909,4.865c-1.134,2.666-0.97,5.714,0.484,8.234\tc1.391,2.408,3.636,4.131,6.322,4.851c0.896,0.24,1.807,0.359,2.711,0.359c1.003,0,1.995-0.161,2.957-0.45\tC21.722,44.619,24.425,46,27.353,46c4.911,0,9.028-3.422,10.12-8.003c2.88-0.35,5.431-2.006,6.891-4.535\tC45.754,31.054,46.123,28.248,45.403,25.562z M35.17,9.543c2.171,0.581,3.984,1.974,5.107,3.919c1.049,1.817,1.243,4,0.569,5.967\tc-0.099-0.062-0.193-0.131-0.294-0.19l-9.169-5.294c-0.312-0.179-0.698-0.177-1.01,0.006l-10.198,6.041l-0.052-4.607l8.663-5.001\tC30.733,9.26,33,8.963,35.17,9.543z M29.737,22.195l0.062,5.504l-4.736,2.805l-4.799-2.699l-0.062-5.504l4.736-2.805L29.737,22.195z M14.235,14.412C14.235,9.773,18.009,6,22.647,6c2.109,0,4.092,0.916,5.458,2.488C28,8.544,27.891,8.591,27.787,8.651l-9.17,5.294\tc-0.312,0.181-0.504,0.517-0.5,0.877l0.133,11.851l-4.015-2.258V14.412z M6.528,23.921c-0.581-2.17-0.282-4.438,0.841-6.383\tc1.06-1.836,2.823-3.074,4.884-3.474c-0.004,0.116-0.018,0.23-0.018,0.348V25c0,0.361,0.195,0.694,0.51,0.872l10.329,5.81\tL19.11,34.03l-8.662-5.002C8.502,27.905,7.11,26.092,6.528,23.921z M14.83,40.457c-2.171-0.581-3.984-1.974-5.107-3.919\tc-1.053-1.824-1.249-4.001-0.573-5.97c0.101,0.063,0.196,0.133,0.299,0.193l9.169,5.294c0.154,0.089,0.327,0.134,0.5,0.134\tc0.177,0,0.353-0.047,0.51-0.14l10.198-6.041l0.052,4.607l-8.663,5.001C19.269,40.741,17.001,41.04,14.83,40.457z M35.765,35.588\tc0,4.639-3.773,8.412-8.412,8.412c-2.119,0-4.094-0.919-5.459-2.494c0.105-0.056,0.216-0.098,0.32-0.158l9.17-5.294\tc0.312-0.181,0.504-0.517,0.5-0.877L31.75,23.327l4.015,2.258V35.588z M42.631,32.462c-1.056,1.83-2.84,3.086-4.884,3.483\tc0.004-0.12,0.018-0.237,0.018-0.357V25c0-0.361-0.195-0.694-0.51-0.872l-10.329-5.81l3.964-2.348l8.662,5.002\tc1.946,1.123,3.338,2.937,3.92,5.107C44.053,28.249,43.754,30.517,42.631,32.462z\"></path>\n                    </svg>\n    </div>\n</div>";

  var html$n = "\n<div class=\"news-cards-info\">\n    <div class=\"news-cards-info__body\">\n        <div class=\"news-cards-info__logo\"></div>\n        <div class=\"news-cards-info__title\"></div>\n        <div class=\"news-cards-info__description\"></div>\n    </div>\n    <div class=\"news-cards-info__age-restriction\"></div>\n    <div class=\"news-cards-info__footer\">\n        <div class=\"news-cards-info__head\"></div>\n        <div class=\"news-cards-info__meta\"></div>\n    </div>\n</div>\n";

  var templates = {
    head: html$25,
    wrap: html$24,
    menu: html$23,
    activitys: html$22,
    activity: html$21,
    activity_wait_refresh: html$20,
    settings: html$1_,
    settings_main: html$1Z,
    settings_interface: html$1Y,
    settings_parser: html$1X,
    settings_server: html$1W,
    settings_player: html$1V,
    settings_more: html$1U,
    settings_tmdb: html$1T,
    settings_plugins: html$1S,
    settings_account: html$1R,
    scroll: html$1$,
    items_line: html$1Q,
    card: html$1P,
    card_parser: html$1O,
    card_watched: html$1N,
    card_episode: html$1M,
    full_start: html$1L,
    full_start_new: html$1K,
    full_descr: html$1J,
    full_person: html$1I,
    full_review: html$1H,
    review_selector: html$1G,
    full_episode: html$1F,
    player: html$1E,
    player_panel: html$1D,
    player_video: html$1C,
    player_info: html$1B,
    player_footer: html$1A,
    player_footer_card: html$1z,
    selectbox: html$1y,
    selectbox_item: html$1x,
    info: html$1v,
    more: html$1t,
    back: html$1s,
    search: html$1r,
    settings_input: html$1q,
    modal: html$1p,
    company: html$1o,
    modal_loading: html$1n,
    modal_pending: html$1m,
    person_start: html$1l,
    empty: html$1k,
    empty_filter: html$1j,
    notice: html$1i,
    notice_card: html$1h,
    torrent: html$1g,
    torrent_file: html$1f,
    files: html$1e,
    about: html$1d,
    error: html$1c,
    torrent_noconnect: html$18,
    torrent_file_serial: html$13,
    torrent_nocheck: html$17,
    torrent_nohash: html$16,
    torrent_install: html$15,
    torrent_error: html$14,
    filter: html$1u,
    search_box: html$12,
    console: html$11,
    icon_star: html$10,
    icon_viewed: html$$,
    icon_lock: html$_,
    icon_like: html$Z,
    icon_text: html$Y,
    icon_card: html$X,
    timeline: html$W,
    timeline_details: html$V,
    list_empty: html$U,
    screensaver: html$T,
    plugins_catalog: html$S,
    broadcast: html$R,
    lang_choice: html$Q,
    extensions: html$P,
    extensions_block: html$O,
    extensions_item: html$N,
    extensions_recomend: html$M,
    extensions_info: html$L,
    extensions_theme: html$K,
    extensions_screensaver: html$J,
    iframe: html$I,
    account: html$H,
    account_limited: html$G,
    prisma_premium: html$F,
    prisma_premium_modal: html$E,
    selectbox_icon: html$1w,
    explorer: html$D,
    explorer_button_back: html$C,
    https: html$B,
    navigation_bar: html$A,
    head_backward: html$z,
    account_add_device: html$y,
    feed_item: html$x,
    feed_head: html$w,
    feed_episode: html$v,
    register: html$u,
    speedtest: html$t,
    season_episode: html$1b,
    season_episode_rate: html$1a,
    season_info: html$19,
    ad_bot: html$s,
    ad_video_block: html$r,
    discuss_rules: html$q,
    bookmarks_folder: html$p,
    ai_search_animation: html$o,
    news_cards: html$n
  };
  var created = {};
  function get$d(name) {
    var vars = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var like_static = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    var tpl = templates[name];
    if (!tpl) throw 'Template [' + name + '] not found';
    tpl = Lang.translate(tpl);
    for (var n in vars) {
      tpl = tpl.replace(new RegExp('{' + n + '}', 'g'), vars[n]);
    }
    tpl = tpl.replace(/{\@([a-z_-]+)}/g, function (e, s) {
      return templates[s] || '';
    });
    return like_static ? tpl : $(tpl);
  }
  function build$a(tree) {
    function create(item) {
      var elem = item.elem.cloneNode(); //document.createElement(item.tag)

      /*
      if(!item.elem && item.attributes){
          for(let i = 0; i < item.attributes.length; i++){
              elem.setAttribute(item.attributes[i].name, item.attributes[i].value)
          }
      }
      */

      item.clildrens.forEach(function (child_data) {
        var child = create(child_data);
        elem.appendChild(child);
      });
      return elem;
    }
    var root = create(tree);
    return root;
  }
  function js(name, vars) {
    if (!created[name]) {
      var _extract = function extract(elem) {
        var data = {
          tag: elem.tagName,
          attributes: elem.attributes,
          elem: elem,
          clildrens: []
        };
        for (var i = 0; i < elem.childNodes.length; i++) {
          if (elem.childNodes[i].tagName) data.clildrens.push(_extract(elem.childNodes[i]));
        }
        return data;
      };
      var tpl = get$d(name);
      var tree = _extract(tpl[0]);
      created[name] = tree;
    }
    return build$a(created[name]);
  }
  function add$d(name, html) {
    templates[name] = html;
  }
  function all$4() {
    return templates;
  }
  var Template = {
    get: get$d,
    js: js,
    add: add$d,
    all: all$4
  };

  var Base64 = {
    // private property
    _keyStr: "ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",
    // public method for encoding
    encode: function encode(input) {
      var output = "";
      var chr1, chr2, chr3, enc1, enc2, enc3, enc4;
      var i = 0;
      input = Base64._utf8_encode(input);
      while (i < input.length) {
        chr1 = input.charCodeAt(i++);
        chr2 = input.charCodeAt(i++);
        chr3 = input.charCodeAt(i++);
        enc1 = chr1 >> 2;
        enc2 = (chr1 & 3) << 4 | chr2 >> 4;
        enc3 = (chr2 & 15) << 2 | chr3 >> 6;
        enc4 = chr3 & 63;
        if (isNaN(chr2)) {
          enc3 = enc4 = 64;
        } else if (isNaN(chr3)) {
          enc4 = 64;
        }
        output = output + this._keyStr.charAt(enc1) + this._keyStr.charAt(enc2) + this._keyStr.charAt(enc3) + this._keyStr.charAt(enc4);
      }
      return output;
    },
    // public method for decoding
    decode: function decode(input) {
      var output = "";
      var chr1, chr2, chr3;
      var enc1, enc2, enc3, enc4;
      var i = 0;
      input = input.replace(/[^A-Za-z0-9\+\/\=]/g, "");
      while (i < input.length) {
        enc1 = this._keyStr.indexOf(input.charAt(i++));
        enc2 = this._keyStr.indexOf(input.charAt(i++));
        enc3 = this._keyStr.indexOf(input.charAt(i++));
        enc4 = this._keyStr.indexOf(input.charAt(i++));
        chr1 = enc1 << 2 | enc2 >> 4;
        chr2 = (enc2 & 15) << 4 | enc3 >> 2;
        chr3 = (enc3 & 3) << 6 | enc4;
        output = output + String.fromCharCode(chr1);
        if (enc3 != 64) {
          output = output + String.fromCharCode(chr2);
        }
        if (enc4 != 64) {
          output = output + String.fromCharCode(chr3);
        }
      }
      output = Base64._utf8_decode(output);
      return output;
    },
    // private method for UTF-8 encoding
    _utf8_encode: function _utf8_encode(string) {
      string = string.replace(/\r\n/g, "\n");
      var utftext = "";
      for (var n = 0; n < string.length; n++) {
        var c = string.charCodeAt(n);
        if (c < 128) {
          utftext += String.fromCharCode(c);
        } else if (c > 127 && c < 2048) {
          utftext += String.fromCharCode(c >> 6 | 192);
          utftext += String.fromCharCode(c & 63 | 128);
        } else {
          utftext += String.fromCharCode(c >> 12 | 224);
          utftext += String.fromCharCode(c >> 6 & 63 | 128);
          utftext += String.fromCharCode(c & 63 | 128);
        }
      }
      return utftext;
    },
    // private method for UTF-8 decoding
    _utf8_decode: function _utf8_decode(utftext) {
      var string = "";
      var i = 0;
      var c = 0;
      var c2 = 0;
      var c3 = 0;
      while (i < utftext.length) {
        c = utftext.charCodeAt(i);
        if (c < 128) {
          string += String.fromCharCode(c);
          i++;
        } else if (c > 191 && c < 224) {
          c2 = utftext.charCodeAt(i + 1);
          string += String.fromCharCode((c & 31) << 6 | c2 & 63);
          i += 2;
        } else {
          c2 = utftext.charCodeAt(i + 1);
          c3 = utftext.charCodeAt(i + 2);
          string += String.fromCharCode((c & 15) << 12 | (c2 & 63) << 6 | c3 & 63);
          i += 3;
        }
      }
      return string;
    }
  };

  var html$m = $('<div class="noty"><div class="noty__body"><div class="noty__text"></div></div></div>'),
    body$3 = html$m.find('.noty__text'),
    time$4;

  // Добавляем noty в body при инициализации
  $('body').append(html$m);
  function show$a(text) {
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    clearTimeout(time$4);
    html$m.attr('class', 'noty');
    if (params.style) html$m.addClass('noty--style--' + params.style);
    time$4 = setTimeout(function () {
      html$m.removeClass('noty--visible');
    }, params.time || 3000);
    body$3.html(text);
    html$m.addClass('noty--visible');
  }
  function render$i() {
    return html$m;
  }
  var Noty$1 = {
    show: show$a,
    render: render$i
  };

  var card_fields = ['poster_path', 'overview', 'release_date', 'genre_ids', 'id', 'original_title', 'original_language', 'title', 'backdrop_path', 'popularity', 'vote_count', 'vote_average', 'imdb_id', 'kinopoisk_id', 'original_name', 'name', 'first_air_date', 'origin_country', 'status', 'pg', 'release_quality', 'imdb_rating', 'kp_rating', 'source', 'number_of_seasons', 'number_of_episodes', 'next_episode_to_air', 'img', 'poster', 'background_image'];

  /**
   * Преобразование секунд в формат времени
   * @doc
   * @name secondsToTime
   * @alias Utils
   * @param {integer} sec время в секундах
   * @param {boolean} short короткое время
   * @returns {string} (hours : minutes : seconds) или (minutes : seconds)
   */

  function secondsToTime(sec, _short) {
    var sec_num = parseInt(sec, 10);
    var hours = Math.floor(sec_num / 3600);
    var minutes = Math.floor((sec_num - hours * 3600) / 60);
    var seconds = sec_num - hours * 3600 - minutes * 60;
    if (hours < 10) {
      hours = "0" + hours;
    }
    if (minutes < 10) {
      minutes = "0" + minutes;
    }
    if (seconds < 10) {
      seconds = "0" + seconds;
    }
    if (isNaN(hours)) hours = '00';
    if (isNaN(minutes)) minutes = '00';
    if (isNaN(seconds)) seconds = '00';
    if (_short) return hours + ':' + minutes;
    return hours + ':' + minutes + ':' + seconds;
  }

  /**
   * Преабразует первую букву строки в верхний регистр
   * @doc
   * @name capitalizeFirstLetter
   * @alias Utils
   * @param {string} string значение
   * @returns {string}
   */

  function capitalizeFirstLetter(string) {
    string = string + '';
    return string.charAt(0).toUpperCase() + string.slice(1);
  }

  /**
   * Сокращает строку до указанной длины
   * @doc
   * @name substr
   * @alias Utils
   * @param {string} txt текст
   * @param {integer} len длина
   * @returns {string}
   */

  function substr(txt, len) {
    txt = txt || '';
    return txt.length > len ? txt.substr(0, len) + '...' : txt;
  }
  function numberWithSpaces(x) {
    return x.toString().replace(/\B(?=(\d{3})+(?!\d))/g, " ");
  }
  function declOfNum(n, text_forms) {
    n = Math.abs(n) % 100;
    var n1 = n % 10;
    if (n > 10 && n < 20) {
      return text_forms[2];
    }
    if (n1 > 1 && n1 < 5) {
      return text_forms[1];
    }
    if (n1 == 1) {
      return text_forms[0];
    }
    return text_forms[2];
  }
  function bytesToSize(bytes, speed) {
    if (bytes == 0) {
      return Lang.translate('size_zero');
    }
    var unitMultiple = 1024;
    var unitNames = [Lang.translate('size_byte'), Lang.translate('size_kb'), Lang.translate('size_mb'), Lang.translate('size_gb'), Lang.translate('size_tb'), Lang.translate('size_pp')];
    if (speed) {
      unitMultiple = 1000;
      unitNames = [Lang.translate('speed_bit'), Lang.translate('speed_kb'), Lang.translate('speed_mb'), Lang.translate('speed_gb'), Lang.translate('speed_tb'), Lang.translate('speed_pp')];
    }
    var unitChanges = Math.floor(Math.log(bytes) / Math.log(unitMultiple));
    return parseFloat((bytes / Math.pow(unitMultiple, unitChanges)).toFixed(2)) + ' ' + unitNames[unitChanges];
  }
  function sizeToBytes(str) {
    var gsize = str.match(/([0-9\\.,]+)\s+(Mb|МБ|GB|ГБ|TB|ТБ)/i);
    if (gsize) {
      var size = parseFloat(gsize[1].replace(',', '.'));
      if (/gb|гб/.test(gsize[2].toLowerCase())) size *= 1024;
      if (/tb|тб/.test(gsize[2].toLowerCase())) size *= 1048576;
      return size * 1048576;
    }
    return 0;
  }
  function calcBitrate(byteSize, minutes) {
    if (!minutes) return 0;
    var sec = minutes * 60;
    var bitSize = byteSize * 8;
    return (bitSize / Math.pow(1000, 2) / sec).toFixed(2);
  }
  function getMoths(ended) {
    var need = ended ? '_e' : '';
    var all = [];
    for (var i = 1; i <= 12; i++) {
      all.push(Lang.translate('month_' + i + need));
    }
    return all;
  }
  function time$3(html) {
    var create = function create() {
      var where = html instanceof jQuery ? html[0] : html;
      var months = getMoths();
      var months_end = getMoths(true);
      var days = [Lang.translate('day_7'), Lang.translate('day_1'), Lang.translate('day_2'), Lang.translate('day_3'), Lang.translate('day_4'), Lang.translate('day_5'), Lang.translate('day_6')];
      var elem_clock = where.querySelector('.time--clock');
      var elem_week = where.querySelector('.time--week');
      var elem_day = where.querySelector('.time--day');
      var elem_moth = where.querySelector('.time--moth');
      var elem_full = where.querySelector('.time--full');
      this.tik = function () {
        var date = new Date(),
          time = date.getTime(),
          ofst = parseInt((localStorage.getItem('time_offset') == null ? 'n0' : localStorage.getItem('time_offset')).replace('n', ''));
        date = new Date(time + ofst * 1000 * 60 * 60);
        time = [date.getHours(), date.getMinutes(), date.getSeconds(), date.getFullYear()];
        if (time[0] < 10) {
          time[0] = "0" + time[0];
        }
        if (time[1] < 10) {
          time[1] = "0" + time[1];
        }
        if (time[2] < 10) {
          time[2] = "0" + time[2];
        }
        var current_time = [time[0], time[1]].join(':'),
          current_week = date.getDay(),
          current_day = date.getDate();
        if (elem_clock) elem_clock.innerText = current_time;
        if (elem_week) elem_week.innerText = days[current_week];
        if (elem_day) elem_day.innerText = current_day;
        if (elem_moth) elem_moth.innerText = months[date.getMonth()];
        if (elem_full) elem_full.innerText = current_day + ' ' + months_end[date.getMonth()] + ' ' + time[3];
      };
      this.timer = setInterval(this.tik.bind(this), 60000);
      this.tik();
    };
    return new create();
  }
  function parseToDate(str) {
    if (typeof str == 'string') {
      str = str.toLowerCase().split('t')[0].replace(/-/g, '/');
    }
    return new Date(str);
  }
  function parseTime(str) {
    var months = getMoths();
    var months_end = getMoths(true);
    var days = [Lang.translate('day_7'), Lang.translate('day_1'), Lang.translate('day_2'), Lang.translate('day_3'), Lang.translate('day_4'), Lang.translate('day_5'), Lang.translate('day_6')];
    var date = parseToDate(str);
    var time = [date.getHours(), date.getMinutes(), date.getSeconds(), date.getFullYear()];
    if (time[0] < 10) {
      time[0] = "0" + time[0];
    }
    if (time[1] < 10) {
      time[1] = "0" + time[1];
    }
    if (time[2] < 10) {
      time[2] = "0" + time[2];
    }
    var current_time = [time[0], time[1]].join(':'),
      current_week = date.getDay(),
      current_day = date.getDate();
    return {
      time: current_time,
      week: days[current_week],
      day: current_day,
      mouth: months[date.getMonth()],
      full: current_day + ' ' + months_end[date.getMonth()] + (new Date().getFullYear() == time[3] ? '' : ' ' + time[3]),
      "short": current_day + ' ' + months_end[date.getMonth()],
      briefly: current_day + ' ' + months_end[date.getMonth()] + ' ' + current_time
    };
  }

  // function secondsToTimeHuman(sec_num) {
  //     let hours   = Math.trunc(sec_num / 3600)
  //     let minutes = Math.floor((sec_num - hours * 3600) / 60)

  //     return (hours ? hours + ' '+Lang.translate('time_h')+' ' : '') + (minutes ? minutes + ' '+Lang.translate('time_m')+' ' : Math.round(sec_num) + ' '+Lang.translate('time_s'))
  // }

  function secondsToTimeHuman(sec_num) {
    var hours = Math.trunc(sec_num / 3600);
    var minutes = Math.trunc(sec_num % 3600 / 60); // Остаток от деления используется для вычисления минут
    var seconds = Math.round(sec_num % 60); // Остаток от деления для секунд

    return (hours ? hours + ' ' + Lang.translate('time_h') + ' ' : '') + (minutes ? minutes + ' ' + Lang.translate('time_m') + ' ' : '') + (hours === 0 && minutes === 0 ? seconds + ' ' + Lang.translate('time_s') : '');
  }
  function strToTime(str) {
    var date = new Date(str);
    return date.getTime();
  }
  function checkHttp(url, http_only) {
    url = url + '';
    if (url.indexOf("http://") == 0 || url.indexOf("https://") == 0) return url;
    url = (http_only ? 'http://' : protocol()) + url;
    return url;
  }
  function checkEmptyUrl(url) {
    url = url + '';
    if (url.indexOf("http://") == 0 || url.indexOf("https://") == 0) return url;
    url = (window.location.protocol == 'https:' ? 'https://' : 'http://') + url;
    return url;
  }
  function rewriteIfHTTPS(u) {
    return window.location.protocol == 'https:' ? u.replace(/^(http:\/\/|https:\/\/)/, 'https://') : u;
  }
  function fixProtocolLink(u) {
    return rewriteIfHTTPS((localStorage.getItem('protocol') || 'https') + '://' + u.replace(/^(http:\/\/|https:\/\/)/, ''));
  }
  function fixMirrorLink(u) {
    object$2.cub_mirrors.forEach(function (mirror) {
      u = u.replace('://' + mirror, '://' + object$2.cub_domain);
    });
    return u;
  }
  function shortText(fullStr, strLen, separator) {
    if (fullStr.length <= strLen) return fullStr;
    separator = separator || '...';
    var sepLen = separator.length,
      charsToShow = strLen - sepLen,
      frontChars = Math.ceil(charsToShow / 2),
      backChars = Math.floor(charsToShow / 2);
    return fullStr.substr(0, frontChars) + separator + fullStr.substr(fullStr.length - backChars);
  }
  function protocol() {
    return window.location.protocol == 'https:' ? 'https://' : (localStorage.getItem('protocol') || 'https') + '://';
  }
  function addUrlComponent(url, params) {
    return url + (/\?/.test(url) ? '&' : '?') + params;
  }
  function putScript(items, complite, error, success, show_logs) {
    var p = 0;
    var l = typeof show_logs !== 'undefined' ? show_logs : true;
    function next() {
      if (p == items.length) return complite();
      var u = items[p];
      if (!u) {
        p++;
        return next();
      }
      u = u.replace('cub.watch', Prisma.Manifest.cub_domain);
      if (l) console.log('Script', 'create:', u);
      var s = document.createElement('script');
      s.onload = function () {
        if (l) console.log('Script', 'include:', u);
        if (success) success(u);
        next();
      };
      s.onerror = function () {
        if (l) console.log('Script', 'error:', u);
        if (error) error(u);
        next();
      };
      s.setAttribute('src', u);
      document.body.appendChild(s);
      p++;
    }
    next();
  }
  function putScriptAsync(items, complite, error, success, show_logs) {
    var p = 0;
    var l = typeof show_logs !== 'undefined' ? show_logs : true;
    function check() {
      p++;
      if (p == items.length && complite) complite();
    }
    function put(u) {
      u = u.replace('cub.watch', Prisma.Manifest.cub_domain);
      if (l) console.log('Script', 'create:', u);
      var s = document.createElement('script');
      s.onload = function () {
        if (l) console.log('Script', 'include:', u);
        if (success) success(u);
        check();
      };
      s.onerror = function () {
        if (l) console.log('Script', 'error:', u);
        if (error) error(u);
        check();
      };
      s.setAttribute('src', u);
      document.body.appendChild(s);
    }
    for (var i = 0; i < items.length; i++) put(items[i]);
  }
  function putStyle(items, complite, error) {
    var p = 0;
    function next() {
      if (p >= items.length) return complite();
      var u = items[p];
      $.get(u, function (css) {
        css = css.replace(/\.\.\//g, './');
        var style = document.createElement('style');
        style.type = 'text/css';
        if (style.styleSheet) {
          // This is required for IE8 and below.
          style.styleSheet.cssText = css;
        } else {
          style.appendChild(document.createTextNode(css));
        }
        document.body.appendChild(style);
        next();
      }, function () {
        if (error) error(u);
        next();
      }, 'TEXT');
      p++;
    }
    next(items[0]);
  }
  function clearTitle(title) {
    return title.replace(/[^a-zа-я0-9\s]/gi, '');
  }
  function cardImgBackground(card_data) {
    if (Storage.field('background')) {
      if (Storage.field('background_type') == 'poster' && window.innerWidth > 790) {
        return card_data.backdrop_path ? Api.img(card_data.backdrop_path, 'w1280') : card_data.background_image ? card_data.background_image : '';
      }
      return card_data.poster_path || card_data.profile_path ? Api.img(card_data.poster_path || card_data.profile_path) : card_data.poster || card_data.img || '';
    }
    return '';
  }
  function cardImgBackgroundBlur(card_data) {
    var uri = card_data.poster_path || card_data.profile_path ? Api.img(card_data.poster_path || card_data.profile_path, 'w200') : card_data.poster || card_data.img || '';
    var pos = window.innerWidth > 400 && Storage.field('background_type') == 'poster' && !Storage.field('card_interfice_cover');
    if (Storage.field('background')) {
      if (card_data.backdrop_path) uri = Api.img(card_data.backdrop_path, pos ? 'w1280' : 'w200');else if (card_data.background_image && pos) uri = card_data.background_image;
    }
    return uri;
  }
  function stringToHslColor(str, s, l) {
    var hash = 0;
    for (var i = 0; i < str.length; i++) {
      hash = str.charCodeAt(i) + ((hash << 5) - hash);
    }
    var h = hash % 360;
    return 'hsl(' + h + ', ' + s + '%, ' + l + '%)';
  }
  function pathToNormalTitle(path) {
    var add_exe = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
    var name = path.split('.');
    var exe = name[name.length - 1];
    name = name.join('.');
    return (name + '').replace(/_|\./g, ' ') + (add_exe ? ' <span class="exe">.' + exe + '</span>' : '');
  }
  function hash$2(input) {
    var str = (input || '') + '';
    var hash = 0;
    if (str.length == 0) return hash;
    for (var i = 0; i < str.length; i++) {
      var _char = str.charCodeAt(i);
      hash = (hash << 5) - hash + _char;
      hash = hash & hash; // Convert to 32bit integer
    }
    return Math.abs(hash) + '';
  }
  function uid(len) {
    var ALPHABET = '0123456789abcdefghijklmnopqrstuvwxyzABCDEFGHIJKLMNOPQRSTUVWXYZ';
    var ID_LENGTH = len || 8;
    var id = '';
    for (var i = 0; i < ID_LENGTH; i++) {
      id += ALPHABET.charAt(Math.floor(Math.random() * ALPHABET.length));
    }
    return id;
  }
  function copyTextToClipboard(text, succes, error) {
    if (!text) return error && error();
    var textArea = document.createElement("textarea");
    textArea.value = text;
    textArea.style.top = "0";
    textArea.style.left = "0";
    textArea.style.position = "fixed";
    document.body.appendChild(textArea);
    textArea.focus();
    textArea.select();
    try {
      var successful = document.execCommand('copy');
      if (successful) succes();else error();
    } catch (err) {
      error();
    }
    document.body.removeChild(textArea);
  }
  function imgLoad(image, src, onload, onerror) {
    var img = $(image)[0];
    img.onload = function () {
      if (onload) onload();
    };
    img.onerror = function (e) {
      img.src = './img/img_broken.svg';
      if (onerror) onerror();
    };
    img.src = src;
  }
  function isTouchDevice() {
    var touch = 'ontouchstart' in window;
    var points = navigator.maxTouchPoints > 0 && navigator.maxTouchPoints !== 256 || navigator.msMaxTouchPoints > 0 && navigator.msMaxTouchPoints !== 256;
    var win = navigator.userAgent.toLowerCase().indexOf('windows nt') !== -1;
    return touch || points && !win;
  }
  function canFullScreen() {
    var doc = window.document;
    var elem = doc.documentElement;
    return elem.requestFullscreen || elem.mozRequestFullScreen || elem.webkitRequestFullScreen || elem.msRequestFullscreen;
  }
  function toggleFullscreen() {
    // Check if the User-Agent string contains the word "Tesla"
    if (navigator.userAgent.indexOf("Tesla") >= 0) {
      // Get the current domain from the URL
      var currentDomain = window.location.hostname;

      // Construct the YouTube redirect URL with the current domain
      var targetURL = "https://www.youtube.com/redirect?q=".concat(currentDomain);
      // If it's Tesla's browser, redirect to the YouTube URL (which will open the current domain in full-screen, thank you Elon, sarcasm)
      location.href = targetURL;
    } else {
      var doc = window.document;
      var elem = doc.documentElement;
      var requestFullScreen = elem.requestFullscreen || elem.mozRequestFullScreen || elem.webkitRequestFullScreen || elem.msRequestFullscreen;
      var cancelFullScreen = doc.exitFullscreen || doc.mozCancelFullScreen || doc.webkitExitFullscreen || doc.msExitFullscreen;
      if (!doc.fullscreenElement && !doc.mozFullScreenElement && !doc.webkitFullscreenElement && !doc.msFullscreenElement) {
        requestFullScreen.call(elem);
      } else {
        cancelFullScreen.call(doc);
      }
    }
  }
  function countSeasons(movie) {
    var seasons = movie.seasons || [];
    var count = 0;
    for (var i = 0; i < seasons.length; i++) {
      if (seasons[i].episode_count > 0) count++;
    }
    if (count > movie.number_of_seasons) count = movie.number_of_seasons;
    return count;
  }
  function countDays(time_a, time_b) {
    var d1 = new Date(time_a);
    var d2 = new Date(time_b);
    var days = (d2 - d1) / (1000 * 60 * 60 * 24);
    days = Math.round(days);
    return days <= 0 ? 0 : days;
  }
  function decodePG(pg) {
    var lang = Storage.field('language');
    var keys = {
      'G': '3+',
      'PG': '6+',
      'PG-13': '13+',
      'R': '17+',
      'NC-17': '18+',
      'TV-Y': '0+',
      'TV-Y7': '7+',
      'TV-G': '3+',
      'TV-PG': '6+',
      'TV-14': '14+',
      'TV-MA': '17+'
    };
    if (lang == 'ru' || lang == 'uk' || lang == 'be') {
      for (var key in keys) {
        if (pg == key) return keys[key];
      }
    }
    return pg;
  }
  function trigger$2(element, event_name) {
    var event = document.createEvent('Event');
    event.initEvent(event_name, false, true);
    element.dispatchEvent(event);
  }
  function isPWA() {
    var pwa = false;
    try {
      pwa = window.matchMedia('(display-mode: standalone)').matches;
    } catch (e) {}
    return pwa;
  }
  function bigNumberToShort(number) {
    var suffixes = ['', 'K', 'M', 'M']; // Суффиксы для различных форматов
    var absoluteNumber = Math.abs(number); // Получаем абсолютное значение числа
    var suffixIndex = Math.floor((absoluteNumber.toFixed(0).length - 1) / 3); // Определение индекса суффикса

    // Проверяем, если число меньше 1000, возвращаем его без изменений
    if (absoluteNumber < 1000) {
      return number.toString();
    }

    // Округление числа и преобразование в строку
    var roundedNumber = (number / Math.pow(1000, suffixIndex)).toFixed(1).replace('.0', '');
    return roundedNumber + suffixes[suffixIndex]; // Возвращаем округленное число с суффиксом
  }
  function gup(name, url) {
    if (!url) url = location.href;
    name = name.replace(/[\[]/, "\\\[").replace(/[\]]/, "\\\]");
    var regexS = "[\\?&]" + name + "=([^&#]*)";
    var regex = new RegExp(regexS);
    var results = regex.exec(url);
    return results == null ? null : results[1];
  }
  function dcma(media, id) {
    return window.prisma_settings.dcma && window.prisma_settings.dcma.find(function (a) {
      return a.cat == media && a.id == id;
    });
  }
  function inputDisplay(value) {
    var f = value.trim();
    var d = f.length - value.length;
    var e = d < 0 ? value.slice(d).replace(/\s/g, '&nbsp;') : '';
    return f + e;
  }
  function filterCardsByType(items, need) {
    var filtred = [];
    var genres = function genres(card, id) {
      var gen = card.genres || card.genre_ids;
      if (gen && Object.prototype.toString.call(gen) === '[object Array]') {
        return gen.find(function (g) {
          if (_typeof(g) == 'object') return g.id == id;
        });
      }
      return false;
    };
    if (need == 'movies') filtred = items.filter(function (a) {
      return !a.name && !genres(a, 16);
    });
    if (need == 'tv') filtred = items.filter(function (a) {
      return a.name && !genres(a, 16);
    });
    if (need == 'multmovie') filtred = items.filter(function (a) {
      return !a.name && genres(a, 16);
    });
    if (need == 'multtv') filtred = items.filter(function (a) {
      return a.name && genres(a, 16);
    });
    return filtred;
  }
  function buildUrl(baseUrl, path, queryParams) {
    // Убираем все, что идет после хоста (например, /ts)
    var host = baseUrl.split('/').slice(0, 3).join('/');

    // Убираем лишние "/" в начале и конце пути
    var url = host + '/' + path.replace(/^\/+/, '');

    // Формируем строку запроса из массива объектов
    var queryString = queryParams.map(function (param) {
      return encodeURIComponent(param.name) + '=' + encodeURIComponent(param.value);
    }).join('&');

    // Добавляем строку запроса к URL, если есть параметры
    return url + (queryString ? '?' + queryString : '');
  }
  function simpleMarkdownParser(input) {
    // Обработка заголовков #
    input = input.replace(/^# (.*$)/gim, '<h1>$1</h1>');
    input = input.replace(/^#+ (.*$)/gim, '<h4>$1</h4>');

    // Обработка жирного текста **текст**
    input = input.replace(/\*\*(.*?)\*\*/gim, '<b>$1</b>');

    // Обработка списков * пункт
    input = input.replace(/^\* (.*$)/gim, '<li>$1</li>');

    // Обработка курсивного текста *текст*
    input = input.replace(/\*(.*?)\*/gim, '<i>$1</i>');

    // Оборачивание текста в <p>, если он не является частью других тегов
    input = input.replace(/^(?!<h1>|<h4>|<li>|<b>|<i>)(.+)$/gim, '<p>$1</p>');
    input = input.replace(/<li>/gim, '<p>');
    input = input.replace(/<\/li>/gim, '</p>');

    // Удаление лишних переносов строк
    input = input.replace(/\n/gim, '');
    return input;
  }
  function callWaiting(needCall, emergencyCall) {
    var time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 10000;
    var timer = setTimeout(emergencyCall, time);
    needCall(function () {
      clearTimeout(timer);
    });
  }
  function clearCard(card) {
    var new_card = {};
    var empty = ['original_name', 'name', 'first_air_date'];
    var num = ['popularity', 'vote_count', 'vote_average', 'imdb_rating', 'kp_rating', 'number_of_episodes', 'number_of_seasons'];
    card_fields.forEach(function (f) {
      if (typeof card[f] !== 'undefined') {
        var val = card[f];
        if (val == null || val == 'NaN') val = '';
        if (num.indexOf(f) >= 0 && !val) val = 0;
        new_card[f] = val;
        if (empty.indexOf(f) >= 0 && !val) delete new_card[f];
      }
    });
    if (new_card.poster_path) new_card.img = Prisma.Api.img(new_card.poster_path, 'w300');
    return new_card;
  }
  function qualityToText(quality) {
    var text = '';
    switch (quality) {
      case '2160p':
        text = '4K';
        break;
      case '1440p':
        text = '2K';
        break;
      case '1080p':
        text = 'FHD';
        break;
      case '720p':
        text = 'HD';
        break;
      case '480p':
        text = 'SD';
        break;
      case '360p':
        text = 'SD';
        break;
      default:
        text = quality;
        break;
    }
    return text;
  }
  function guid() {
    var hex = "0123456789ABCDEF";
    var gi = "";
    for (var i = 0; i < 36; i++) {
      if (i === 8 || i === 13 || i === 18 || i === 23) {
        gi += "-";
      } else {
        var r = Math.floor(Math.random() * 16);
        // Устанавливаем версию и variant по UUIDv4 спецификации
        if (i === 14) r = 4; // версия 4
        if (i === 19) r = r & 0x3 | 0x8; // variant
        gi += hex[r];
      }
    }
    return gi;
  }
  var Utils$2 = {
    secondsToTime: secondsToTime,
    declOfNum: declOfNum,
    secondsToTimeHuman: secondsToTimeHuman,
    capitalizeFirstLetter: capitalizeFirstLetter,
    substr: substr,
    numberWithSpaces: numberWithSpaces,
    time: time$3,
    bytesToSize: bytesToSize,
    calcBitrate: calcBitrate,
    parseTime: parseTime,
    parseToDate: parseToDate,
    checkHttp: checkHttp,
    shortText: shortText,
    protocol: protocol,
    addUrlComponent: addUrlComponent,
    sizeToBytes: sizeToBytes,
    putScript: putScript,
    putScriptAsync: putScriptAsync,
    putStyle: putStyle,
    clearTitle: clearTitle,
    cardImgBackground: cardImgBackground,
    cardImgBackgroundBlur: cardImgBackgroundBlur,
    strToTime: strToTime,
    stringToHslColor: stringToHslColor,
    pathToNormalTitle: pathToNormalTitle,
    hash: hash$2,
    uid: uid,
    guid: guid,
    copyTextToClipboard: copyTextToClipboard,
    imgLoad: imgLoad,
    isTouchDevice: isTouchDevice,
    toggleFullscreen: toggleFullscreen,
    canFullScreen: canFullScreen,
    countSeasons: countSeasons,
    countDays: countDays,
    decodePG: decodePG,
    trigger: trigger$2,
    isPWA: isPWA,
    bigNumberToShort: bigNumberToShort,
    rewriteIfHTTPS: rewriteIfHTTPS,
    checkEmptyUrl: checkEmptyUrl,
    gup: gup,
    dcma: dcma,
    inputDisplay: inputDisplay,
    filterCardsByType: filterCardsByType,
    buildUrl: buildUrl,
    simpleMarkdownParser: simpleMarkdownParser,
    fixProtocolLink: fixProtocolLink,
    fixMirrorLink: fixMirrorLink,
    callWaiting: callWaiting,
    clearCard: clearCard,
    qualityToText: qualityToText
  };

  var widgetAPI,
    tvKey,
    pluginAPI,
    loader$2,
    orsay_loaded,
    orsay_call = Date.now();
  function init$U() {
    $('body').append($("<div style=\"position: absolute; left: -1000px; top: -1000px;\">  \n    <object id=\"pluginObjectNNavi\" border=\"0\" classid=\"clsid:SAMSUNG-INFOLINK-NNAVI\" style=\"opacity: 0.0; background-color: #000; width: 1px; height: 1px;\"></object>\n    <object id=\"pluginObjectTVMW\" border=\"0\" classid=\"clsid:SAMSUNG-INFOLINK-TVMW\" style=\"opacity: 0.0; background-color: #000; width: 1px; height: 1px;\"></object>\n    <object id=\"pluginObjectScreen\" border=0 classid=\"clsid:SAMSUNG-INFOLINK-SCREEN\" style=\"opacity: 0.0; background-color: #000; width: 1px; height: 1px;\"></object>\n</div>"));
    Utils$2.putScript(['$MANAGER_WIDGET/Common/API/Widget.js', '$MANAGER_WIDGET/Common/API/TVKeyValue.js', '$MANAGER_WIDGET/Common/API/Plugin.js', '$MANAGER_WIDGET/Common/webapi/1.0/webapis.js', '$MANAGER_WIDGET/Common/IME_XT9/ime.js', '$MANAGER_WIDGET/Common/IME_XT9/inputCommon/ime_input.js'], function () {
      try {
        if (typeof Common !== 'undefined' && Common.API && Common.API.TVKeyValue && Common.API.Plugin && Common.API.Widget) {
          widgetAPI = new Common.API.Widget();
          tvKey = new Common.API.TVKeyValue();
          pluginAPI = new Common.API.Plugin();
          window.onShow = orsayOnshow;
          setTimeout(function () {
            orsayOnshow();
          }, 2000);
          widgetAPI.sendReadyEvent();
        } else {
          if (orsay_call + 5 * 1000 > Date.now()) setTimeout(orsayOnLoad, 50);
        }
      } catch (e) {}
    });

    /**
    * Скрывает ненужные параметры для плеера
    */

    if (Platform.is('orsay')) {
      var hidePlayerParams = function hidePlayerParams() {
        $('[data-name="player_normalization"],[data-name="player_scale_method"],[data-name="player_hls_method"]').toggleClass('hide', Prisma.Storage.field('player') == 'orsay');
      };
      /* Подписываемся на открытие настроек плера*/
      Prisma.Settings.listener.follow('open', function (e) {
        if (e.name == 'player') hidePlayerParams();
      });

      /* Подписываемся на изменение плера*/
      Prisma.Storage.listener.follow('change', function (e) {
        if (e.name == 'player') hidePlayerParams();
      });
    }
  }
  function orsayOnshow() {
    if (orsay_loaded) return;
    orsay_loaded = true;
    try {
      //Включает анимацию изменения громкости на ТВ и т.д.
      pluginAPI.SetBannerState(1);
      //Отключает перехват кнопок, этими кнопками управляет система ТВ
      pluginAPI.unregistKey(tvKey.KEY_INFO);
      pluginAPI.unregistKey(tvKey.KEY_TOOLS);
      pluginAPI.unregistKey(tvKey.KEY_MENU);
      pluginAPI.unregistKey(tvKey.KEY_VOL_UP);
      pluginAPI.unregistKey(tvKey.KEY_VOL_DOWN);
      pluginAPI.unregistKey(tvKey.KEY_MUTE);
      // Отключаем заставку ТВ
      pluginAPI.setOffScreenSaver();
      console.log('App', 'Version widget ', Platform.version('orsay'));
    } catch (e) {}
  }
  function isNewWidget() {
    if (typeof window.top.WidgetLoader != 'undefined') {
      loader$2 = window.top.WidgetLoader;
      return true;
    } else {
      return false;
    }
  }
  function getLoaderUrl() {
    if (isNewWidget()) {
      return loader$2.getUrl();
    }
  }
  function setLoaderUrl(_url) {
    if (isNewWidget()) {
      return loader$2.setUrl(_url);
    }
  }
  function changeLoaderUrl() {
    if (isNewWidget()) {
      return loader$2.changeUrl();
    }
  }
  function exit$1() {
    if (widgetAPI) widgetAPI.sendReturnEvent();
  }
  var Orsay$1 = {
    init: init$U,
    isNewWidget: isNewWidget,
    getLoaderUrl: getLoaderUrl,
    setLoaderUrl: setLoaderUrl,
    changeLoaderUrl: changeLoaderUrl,
    exit: exit$1
  };

  var WorkerClass = null;

  try {
      var WorkerThreads =
          typeof module !== 'undefined' && typeof module.require === 'function' && module.require('worker_threads') ||
          typeof __non_webpack_require__ === 'function' && __non_webpack_require__('worker_threads') ||
          typeof require === 'function' && require('worker_threads');
      WorkerClass = WorkerThreads.Worker;
  } catch(e) {} // eslint-disable-line

  function decodeBase64$1(base64, enableUnicode) {
      return Buffer.from(base64, 'base64').toString(enableUnicode ? 'utf16' : 'utf8');
  }

  function createBase64WorkerFactory$2(base64, sourcemapArg, enableUnicodeArg) {
      var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;
      var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;
      var source = decodeBase64$1(base64, enableUnicode);
      var start = source.indexOf('\n', 10) + 1;
      var body = source.substring(start) + (sourcemap ? '\/\/# sourceMappingURL=' + sourcemap : '');
      return function WorkerFactory(options) {
          return new WorkerClass(body, Object.assign({}, options, { eval: true }));
      };
  }

  function decodeBase64(base64, enableUnicode) {
      var binaryString = atob(base64);
      if (enableUnicode) {
          var binaryView = new Uint8Array(binaryString.length);
          for (var i = 0, n = binaryString.length; i < n; ++i) {
              binaryView[i] = binaryString.charCodeAt(i);
          }
          return String.fromCharCode.apply(null, new Uint16Array(binaryView.buffer));
      }
      return binaryString;
  }

  function createURL(base64, sourcemapArg, enableUnicodeArg) {
      var sourcemap = sourcemapArg === undefined ? null : sourcemapArg;
      var enableUnicode = enableUnicodeArg === undefined ? false : enableUnicodeArg;
      var source = decodeBase64(base64, enableUnicode);
      var start = source.indexOf('\n', 10) + 1;
      var body = source.substring(start) + (sourcemap ? '\/\/# sourceMappingURL=' + sourcemap : '');
      var blob = new Blob([body], { type: 'application/javascript' });
      return URL.createObjectURL(blob);
  }

  function createBase64WorkerFactory$1(base64, sourcemapArg, enableUnicodeArg) {
      var url;
      return function WorkerFactory(options) {
          url = url || createURL(base64, sourcemapArg, enableUnicodeArg);
          return new Worker(url, options);
      };
  }

  var kIsNodeJS = Object.prototype.toString.call(typeof process !== 'undefined' ? process : 0) === '[object process]';

  function isNodeJS() {
      return false;
  }

  function createBase64WorkerFactory(base64, sourcemapArg, enableUnicodeArg) {
      if (isNodeJS()) {
          return createBase64WorkerFactory$2(base64, sourcemapArg, enableUnicodeArg);
      }
      return createBase64WorkerFactory$1(base64, sourcemapArg, enableUnicodeArg);
  }

  var WorkerFactory$2 = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICd1c2Ugc3RyaWN0JzsKCiAgLyogZXNsaW50LWRpc2FibGUgbm8tYml0d2lzZSAtLSB1c2VkIGZvciBjYWxjdWxhdGlvbnMgKi8KICAvKiBlc2xpbnQtZGlzYWJsZSB1bmljb3JuL3ByZWZlci1xdWVyeS1zZWxlY3RvciAtLSBhaW1pbmcgYXQKICAgIGJhY2t3YXJkLWNvbXBhdGliaWxpdHkgKi8KICAvKioKICAqIFN0YWNrQmx1ciAtIGEgZmFzdCBhbG1vc3QgR2F1c3NpYW4gQmx1ciBGb3IgQ2FudmFzCiAgKgogICogSW4gY2FzZSB5b3UgZmluZCB0aGlzIGNsYXNzIHVzZWZ1bCAtIGVzcGVjaWFsbHkgaW4gY29tbWVyY2lhbCBwcm9qZWN0cyAtCiAgKiBJIGFtIG5vdCB0b3RhbGx5IHVuaGFwcHkgZm9yIGEgc21hbGwgZG9uYXRpb24gdG8gbXkgUGF5UGFsIGFjY291bnQKICAqIG1hcmlvQHF1YXNpbW9uZG8uZGUKICAqCiAgKiBPciBzdXBwb3J0IG1lIG9uIGZsYXR0cjoKICAqIHtAbGluayBodHRwczovL2ZsYXR0ci5jb20vdGhpbmcvNzI3OTEvU3RhY2tCbHVyLWEtZmFzdC1hbG1vc3QtR2F1c3NpYW4tQmx1ci1FZmZlY3QtZm9yLUNhbnZhc0phdmFzY3JpcHR9LgogICoKICAqIEBtb2R1bGUgU3RhY2tCbHVyCiAgKiBAYXV0aG9yIE1hcmlvIEtsaW5nZW1hbm4KICAqIENvbnRhY3Q6IG1hcmlvQHF1YXNpbW9uZG8uY29tCiAgKiBXZWJzaXRlOiB7QGxpbmsgaHR0cDovL3d3dy5xdWFzaW1vbmRvLmNvbS9TdGFja0JsdXJGb3JDYW52YXMvU3RhY2tCbHVyRGVtby5odG1sfQogICogVHdpdHRlcjogQHF1YXNpbW9uZG8KICAqCiAgKiBAY29weXJpZ2h0IChjKSAyMDEwIE1hcmlvIEtsaW5nZW1hbm4KICAqCiAgKiBQZXJtaXNzaW9uIGlzIGhlcmVieSBncmFudGVkLCBmcmVlIG9mIGNoYXJnZSwgdG8gYW55IHBlcnNvbgogICogb2J0YWluaW5nIGEgY29weSBvZiB0aGlzIHNvZnR3YXJlIGFuZCBhc3NvY2lhdGVkIGRvY3VtZW50YXRpb24KICAqIGZpbGVzICh0aGUgIlNvZnR3YXJlIiksIHRvIGRlYWwgaW4gdGhlIFNvZnR3YXJlIHdpdGhvdXQKICAqIHJlc3RyaWN0aW9uLCBpbmNsdWRpbmcgd2l0aG91dCBsaW1pdGF0aW9uIHRoZSByaWdodHMgdG8gdXNlLAogICogY29weSwgbW9kaWZ5LCBtZXJnZSwgcHVibGlzaCwgZGlzdHJpYnV0ZSwgc3VibGljZW5zZSwgYW5kL29yIHNlbGwKICAqIGNvcGllcyBvZiB0aGUgU29mdHdhcmUsIGFuZCB0byBwZXJtaXQgcGVyc29ucyB0byB3aG9tIHRoZQogICogU29mdHdhcmUgaXMgZnVybmlzaGVkIHRvIGRvIHNvLCBzdWJqZWN0IHRvIHRoZSBmb2xsb3dpbmcKICAqIGNvbmRpdGlvbnM6CiAgKgogICogVGhlIGFib3ZlIGNvcHlyaWdodCBub3RpY2UgYW5kIHRoaXMgcGVybWlzc2lvbiBub3RpY2Ugc2hhbGwgYmUKICAqIGluY2x1ZGVkIGluIGFsbCBjb3BpZXMgb3Igc3Vic3RhbnRpYWwgcG9ydGlvbnMgb2YgdGhlIFNvZnR3YXJlLgogICoKICAqIFRIRSBTT0ZUV0FSRSBJUyBQUk9WSURFRCAiQVMgSVMiLCBXSVRIT1VUIFdBUlJBTlRZIE9GIEFOWSBLSU5ELAogICogRVhQUkVTUyBPUiBJTVBMSUVELCBJTkNMVURJTkcgQlVUIE5PVCBMSU1JVEVEIFRPIFRIRSBXQVJSQU5USUVTCiAgKiBPRiBNRVJDSEFOVEFCSUxJVFksIEZJVE5FU1MgRk9SIEEgUEFSVElDVUxBUiBQVVJQT1NFIEFORAogICogTk9OSU5GUklOR0VNRU5ULiBJTiBOTyBFVkVOVCBTSEFMTCBUSEUgQVVUSE9SUyBPUiBDT1BZUklHSFQKICAqIEhPTERFUlMgQkUgTElBQkxFIEZPUiBBTlkgQ0xBSU0sIERBTUFHRVMgT1IgT1RIRVIgTElBQklMSVRZLAogICogV0hFVEhFUiBJTiBBTiBBQ1RJT04gT0YgQ09OVFJBQ1QsIFRPUlQgT1IgT1RIRVJXSVNFLCBBUklTSU5HCiAgKiBGUk9NLCBPVVQgT0YgT1IgSU4gQ09OTkVDVElPTiBXSVRIIFRIRSBTT0ZUV0FSRSBPUiBUSEUgVVNFIE9SCiAgKiBPVEhFUiBERUFMSU5HUyBJTiBUSEUgU09GVFdBUkUuCiAgKi8KCiAgdmFyIEJsdXJTdGFjayA9IGZ1bmN0aW9uIEJsdXJTdGFjaygpIHsKICAgIHRoaXMuciA9IDA7CiAgICB0aGlzLmcgPSAwOwogICAgdGhpcy5iID0gMDsKICAgIHRoaXMuYSA9IDA7CiAgICB0aGlzLm5leHQgPSBudWxsOwogIH07CiAgdmFyIG11bFRhYmxlID0gWzUxMiwgNTEyLCA0NTYsIDUxMiwgMzI4LCA0NTYsIDMzNSwgNTEyLCA0MDUsIDMyOCwgMjcxLCA0NTYsIDM4OCwgMzM1LCAyOTIsIDUxMiwgNDU0LCA0MDUsIDM2NCwgMzI4LCAyOTgsIDI3MSwgNDk2LCA0NTYsIDQyMCwgMzg4LCAzNjAsIDMzNSwgMzEyLCAyOTIsIDI3MywgNTEyLCA0ODIsIDQ1NCwgNDI4LCA0MDUsIDM4MywgMzY0LCAzNDUsIDMyOCwgMzEyLCAyOTgsIDI4NCwgMjcxLCAyNTksIDQ5NiwgNDc1LCA0NTYsIDQzNywgNDIwLCA0MDQsIDM4OCwgMzc0LCAzNjAsIDM0NywgMzM1LCAzMjMsIDMxMiwgMzAyLCAyOTIsIDI4MiwgMjczLCAyNjUsIDUxMiwgNDk3LCA0ODIsIDQ2OCwgNDU0LCA0NDEsIDQyOCwgNDE3LCA0MDUsIDM5NCwgMzgzLCAzNzMsIDM2NCwgMzU0LCAzNDUsIDMzNywgMzI4LCAzMjAsIDMxMiwgMzA1LCAyOTgsIDI5MSwgMjg0LCAyNzgsIDI3MSwgMjY1LCAyNTksIDUwNywgNDk2LCA0ODUsIDQ3NSwgNDY1LCA0NTYsIDQ0NiwgNDM3LCA0MjgsIDQyMCwgNDEyLCA0MDQsIDM5NiwgMzg4LCAzODEsIDM3NCwgMzY3LCAzNjAsIDM1NCwgMzQ3LCAzNDEsIDMzNSwgMzI5LCAzMjMsIDMxOCwgMzEyLCAzMDcsIDMwMiwgMjk3LCAyOTIsIDI4NywgMjgyLCAyNzgsIDI3MywgMjY5LCAyNjUsIDI2MSwgNTEyLCA1MDUsIDQ5NywgNDg5LCA0ODIsIDQ3NSwgNDY4LCA0NjEsIDQ1NCwgNDQ3LCA0NDEsIDQzNSwgNDI4LCA0MjIsIDQxNywgNDExLCA0MDUsIDM5OSwgMzk0LCAzODksIDM4MywgMzc4LCAzNzMsIDM2OCwgMzY0LCAzNTksIDM1NCwgMzUwLCAzNDUsIDM0MSwgMzM3LCAzMzIsIDMyOCwgMzI0LCAzMjAsIDMxNiwgMzEyLCAzMDksIDMwNSwgMzAxLCAyOTgsIDI5NCwgMjkxLCAyODcsIDI4NCwgMjgxLCAyNzgsIDI3NCwgMjcxLCAyNjgsIDI2NSwgMjYyLCAyNTksIDI1NywgNTA3LCA1MDEsIDQ5NiwgNDkxLCA0ODUsIDQ4MCwgNDc1LCA0NzAsIDQ2NSwgNDYwLCA0NTYsIDQ1MSwgNDQ2LCA0NDIsIDQzNywgNDMzLCA0MjgsIDQyNCwgNDIwLCA0MTYsIDQxMiwgNDA4LCA0MDQsIDQwMCwgMzk2LCAzOTIsIDM4OCwgMzg1LCAzODEsIDM3NywgMzc0LCAzNzAsIDM2NywgMzYzLCAzNjAsIDM1NywgMzU0LCAzNTAsIDM0NywgMzQ0LCAzNDEsIDMzOCwgMzM1LCAzMzIsIDMyOSwgMzI2LCAzMjMsIDMyMCwgMzE4LCAzMTUsIDMxMiwgMzEwLCAzMDcsIDMwNCwgMzAyLCAyOTksIDI5NywgMjk0LCAyOTIsIDI4OSwgMjg3LCAyODUsIDI4MiwgMjgwLCAyNzgsIDI3NSwgMjczLCAyNzEsIDI2OSwgMjY3LCAyNjUsIDI2MywgMjYxLCAyNTldOwogIHZhciBzaGdUYWJsZSA9IFs5LCAxMSwgMTIsIDEzLCAxMywgMTQsIDE0LCAxNSwgMTUsIDE1LCAxNSwgMTYsIDE2LCAxNiwgMTYsIDE3LCAxNywgMTcsIDE3LCAxNywgMTcsIDE3LCAxOCwgMTgsIDE4LCAxOCwgMTgsIDE4LCAxOCwgMTgsIDE4LCAxOSwgMTksIDE5LCAxOSwgMTksIDE5LCAxOSwgMTksIDE5LCAxOSwgMTksIDE5LCAxOSwgMTksIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIwLCAyMCwgMjAsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIxLCAyMSwgMjEsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMiwgMjIsIDIyLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyMywgMjMsIDIzLCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjQsIDI0LCAyNCwgMjRdOwoKICAvKioKICAgKiBAcGFyYW0ge0ltYWdlRGF0YX0gaW1hZ2VEYXRhCiAgICogQHBhcmFtIHtJbnRlZ2VyfSB0b3BYCiAgICogQHBhcmFtIHtJbnRlZ2VyfSB0b3BZCiAgICogQHBhcmFtIHtJbnRlZ2VyfSB3aWR0aAogICAqIEBwYXJhbSB7SW50ZWdlcn0gaGVpZ2h0CiAgICogQHBhcmFtIHtGbG9hdH0gcmFkaXVzCiAgICogQHJldHVybnMge0ltYWdlRGF0YX0KICAgKi8KICBmdW5jdGlvbiBwcm9jZXNzSW1hZ2VEYXRhUkdCKGltYWdlRGF0YSwgdG9wWCwgdG9wWSwgd2lkdGgsIGhlaWdodCwgcmFkaXVzKSB7CiAgICB2YXIgcGl4ZWxzID0gaW1hZ2VEYXRhID8gaW1hZ2VEYXRhLmRhdGEgOiBbXTsKICAgIHZhciBkaXYgPSAyICogcmFkaXVzICsgMTsKICAgIC8vIGNvbnN0IHc0ID0gd2lkdGggPDwgMjsKICAgIHZhciB3aWR0aE1pbnVzMSA9IHdpZHRoIC0gMTsKICAgIHZhciBoZWlnaHRNaW51czEgPSBoZWlnaHQgLSAxOwogICAgdmFyIHJhZGl1c1BsdXMxID0gcmFkaXVzICsgMTsKICAgIHZhciBzdW1GYWN0b3IgPSByYWRpdXNQbHVzMSAqIChyYWRpdXNQbHVzMSArIDEpIC8gMjsKICAgIHZhciBzdGFja1N0YXJ0ID0gbmV3IEJsdXJTdGFjaygpOwogICAgdmFyIHN0YWNrID0gc3RhY2tTdGFydDsKICAgIHZhciBzdGFja0VuZDsKICAgIGZvciAodmFyIGkgPSAxOyBpIDwgZGl2OyBpKyspIHsKICAgICAgc3RhY2sgPSBzdGFjay5uZXh0ID0gbmV3IEJsdXJTdGFjaygpOwogICAgICBpZiAoaSA9PT0gcmFkaXVzUGx1czEpIHsKICAgICAgICBzdGFja0VuZCA9IHN0YWNrOwogICAgICB9CiAgICB9CiAgICBzdGFjay5uZXh0ID0gc3RhY2tTdGFydDsKICAgIHZhciBzdGFja0luID0gbnVsbDsKICAgIHZhciBzdGFja091dCA9IG51bGw7CiAgICB2YXIgbXVsU3VtID0gbXVsVGFibGVbcmFkaXVzXTsKICAgIHZhciBzaGdTdW0gPSBzaGdUYWJsZVtyYWRpdXNdOwogICAgdmFyIHAsIHJiczsKICAgIHZhciB5dyA9IDAsCiAgICAgIHlpID0gMDsKICAgIGZvciAodmFyIHkgPSAwOyB5IDwgaGVpZ2h0OyB5KyspIHsKICAgICAgdmFyIHByID0gcGl4ZWxzW3lpXSwKICAgICAgICBwZyA9IHBpeGVsc1t5aSArIDFdLAogICAgICAgIHBiID0gcGl4ZWxzW3lpICsgMl0sCiAgICAgICAgck91dFN1bSA9IHJhZGl1c1BsdXMxICogcHIsCiAgICAgICAgZ091dFN1bSA9IHJhZGl1c1BsdXMxICogcGcsCiAgICAgICAgYk91dFN1bSA9IHJhZGl1c1BsdXMxICogcGIsCiAgICAgICAgclN1bSA9IHN1bUZhY3RvciAqIHByLAogICAgICAgIGdTdW0gPSBzdW1GYWN0b3IgKiBwZywKICAgICAgICBiU3VtID0gc3VtRmFjdG9yICogcGI7CiAgICAgIHN0YWNrID0gc3RhY2tTdGFydDsKICAgICAgZm9yICh2YXIgX2k1ID0gMDsgX2k1IDwgcmFkaXVzUGx1czE7IF9pNSsrKSB7CiAgICAgICAgc3RhY2suciA9IHByOwogICAgICAgIHN0YWNrLmcgPSBwZzsKICAgICAgICBzdGFjay5iID0gcGI7CiAgICAgICAgc3RhY2sgPSBzdGFjay5uZXh0OwogICAgICB9CiAgICAgIHZhciBySW5TdW0gPSAwLAogICAgICAgIGdJblN1bSA9IDAsCiAgICAgICAgYkluU3VtID0gMDsKICAgICAgZm9yICh2YXIgX2k2ID0gMTsgX2k2IDwgcmFkaXVzUGx1czE7IF9pNisrKSB7CiAgICAgICAgcCA9IHlpICsgKCh3aWR0aE1pbnVzMSA8IF9pNiA/IHdpZHRoTWludXMxIDogX2k2KSA8PCAyKTsKICAgICAgICByU3VtICs9IChzdGFjay5yID0gcHIgPSBwaXhlbHNbcF0pICogKHJicyA9IHJhZGl1c1BsdXMxIC0gX2k2KTsKICAgICAgICBnU3VtICs9IChzdGFjay5nID0gcGcgPSBwaXhlbHNbcCArIDFdKSAqIHJiczsKICAgICAgICBiU3VtICs9IChzdGFjay5iID0gcGIgPSBwaXhlbHNbcCArIDJdKSAqIHJiczsKICAgICAgICBySW5TdW0gKz0gcHI7CiAgICAgICAgZ0luU3VtICs9IHBnOwogICAgICAgIGJJblN1bSArPSBwYjsKICAgICAgICBzdGFjayA9IHN0YWNrLm5leHQ7CiAgICAgIH0KICAgICAgc3RhY2tJbiA9IHN0YWNrU3RhcnQ7CiAgICAgIHN0YWNrT3V0ID0gc3RhY2tFbmQ7CiAgICAgIGZvciAodmFyIHggPSAwOyB4IDwgd2lkdGg7IHgrKykgewogICAgICAgIHBpeGVsc1t5aV0gPSByU3VtICogbXVsU3VtID4+IHNoZ1N1bTsKICAgICAgICBwaXhlbHNbeWkgKyAxXSA9IGdTdW0gKiBtdWxTdW0gPj4gc2hnU3VtOwogICAgICAgIHBpeGVsc1t5aSArIDJdID0gYlN1bSAqIG11bFN1bSA+PiBzaGdTdW07CiAgICAgICAgclN1bSAtPSByT3V0U3VtOwogICAgICAgIGdTdW0gLT0gZ091dFN1bTsKICAgICAgICBiU3VtIC09IGJPdXRTdW07CiAgICAgICAgck91dFN1bSAtPSBzdGFja0luLnI7CiAgICAgICAgZ091dFN1bSAtPSBzdGFja0luLmc7CiAgICAgICAgYk91dFN1bSAtPSBzdGFja0luLmI7CiAgICAgICAgcCA9IHl3ICsgKChwID0geCArIHJhZGl1cyArIDEpIDwgd2lkdGhNaW51czEgPyBwIDogd2lkdGhNaW51czEpIDw8IDI7CiAgICAgICAgckluU3VtICs9IHN0YWNrSW4uciA9IHBpeGVsc1twXTsKICAgICAgICBnSW5TdW0gKz0gc3RhY2tJbi5nID0gcGl4ZWxzW3AgKyAxXTsKICAgICAgICBiSW5TdW0gKz0gc3RhY2tJbi5iID0gcGl4ZWxzW3AgKyAyXTsKICAgICAgICByU3VtICs9IHJJblN1bTsKICAgICAgICBnU3VtICs9IGdJblN1bTsKICAgICAgICBiU3VtICs9IGJJblN1bTsKICAgICAgICBzdGFja0luID0gc3RhY2tJbi5uZXh0OwogICAgICAgIHJPdXRTdW0gKz0gcHIgPSBzdGFja091dC5yOwogICAgICAgIGdPdXRTdW0gKz0gcGcgPSBzdGFja091dC5nOwogICAgICAgIGJPdXRTdW0gKz0gcGIgPSBzdGFja091dC5iOwogICAgICAgIHJJblN1bSAtPSBwcjsKICAgICAgICBnSW5TdW0gLT0gcGc7CiAgICAgICAgYkluU3VtIC09IHBiOwogICAgICAgIHN0YWNrT3V0ID0gc3RhY2tPdXQubmV4dDsKICAgICAgICB5aSArPSA0OwogICAgICB9CiAgICAgIHl3ICs9IHdpZHRoOwogICAgfQogICAgZm9yICh2YXIgX3gyID0gMDsgX3gyIDwgd2lkdGg7IF94MisrKSB7CiAgICAgIHlpID0gX3gyIDw8IDI7CiAgICAgIHZhciBfcHIyID0gcGl4ZWxzW3lpXSwKICAgICAgICBfcGcyID0gcGl4ZWxzW3lpICsgMV0sCiAgICAgICAgX3BiMiA9IHBpeGVsc1t5aSArIDJdLAogICAgICAgIF9yT3V0U3VtMiA9IHJhZGl1c1BsdXMxICogX3ByMiwKICAgICAgICBfZ091dFN1bTIgPSByYWRpdXNQbHVzMSAqIF9wZzIsCiAgICAgICAgX2JPdXRTdW0yID0gcmFkaXVzUGx1czEgKiBfcGIyLAogICAgICAgIF9yU3VtMiA9IHN1bUZhY3RvciAqIF9wcjIsCiAgICAgICAgX2dTdW0yID0gc3VtRmFjdG9yICogX3BnMiwKICAgICAgICBfYlN1bTIgPSBzdW1GYWN0b3IgKiBfcGIyOwogICAgICBzdGFjayA9IHN0YWNrU3RhcnQ7CiAgICAgIGZvciAodmFyIF9pNyA9IDA7IF9pNyA8IHJhZGl1c1BsdXMxOyBfaTcrKykgewogICAgICAgIHN0YWNrLnIgPSBfcHIyOwogICAgICAgIHN0YWNrLmcgPSBfcGcyOwogICAgICAgIHN0YWNrLmIgPSBfcGIyOwogICAgICAgIHN0YWNrID0gc3RhY2submV4dDsKICAgICAgfQogICAgICB2YXIgX3JJblN1bTIgPSAwLAogICAgICAgIF9nSW5TdW0yID0gMCwKICAgICAgICBfYkluU3VtMiA9IDA7CiAgICAgIGZvciAodmFyIF9pOCA9IDEsIHlwID0gd2lkdGg7IF9pOCA8PSByYWRpdXM7IF9pOCsrKSB7CiAgICAgICAgeWkgPSB5cCArIF94MiA8PCAyOwogICAgICAgIF9yU3VtMiArPSAoc3RhY2suciA9IF9wcjIgPSBwaXhlbHNbeWldKSAqIChyYnMgPSByYWRpdXNQbHVzMSAtIF9pOCk7CiAgICAgICAgX2dTdW0yICs9IChzdGFjay5nID0gX3BnMiA9IHBpeGVsc1t5aSArIDFdKSAqIHJiczsKICAgICAgICBfYlN1bTIgKz0gKHN0YWNrLmIgPSBfcGIyID0gcGl4ZWxzW3lpICsgMl0pICogcmJzOwogICAgICAgIF9ySW5TdW0yICs9IF9wcjI7CiAgICAgICAgX2dJblN1bTIgKz0gX3BnMjsKICAgICAgICBfYkluU3VtMiArPSBfcGIyOwogICAgICAgIHN0YWNrID0gc3RhY2submV4dDsKICAgICAgICBpZiAoX2k4IDwgaGVpZ2h0TWludXMxKSB7CiAgICAgICAgICB5cCArPSB3aWR0aDsKICAgICAgICB9CiAgICAgIH0KICAgICAgeWkgPSBfeDI7CiAgICAgIHN0YWNrSW4gPSBzdGFja1N0YXJ0OwogICAgICBzdGFja091dCA9IHN0YWNrRW5kOwogICAgICBmb3IgKHZhciBfeTIgPSAwOyBfeTIgPCBoZWlnaHQ7IF95MisrKSB7CiAgICAgICAgcCA9IHlpIDw8IDI7CiAgICAgICAgcGl4ZWxzW3BdID0gX3JTdW0yICogbXVsU3VtID4+IHNoZ1N1bTsKICAgICAgICBwaXhlbHNbcCArIDFdID0gX2dTdW0yICogbXVsU3VtID4+IHNoZ1N1bTsKICAgICAgICBwaXhlbHNbcCArIDJdID0gX2JTdW0yICogbXVsU3VtID4+IHNoZ1N1bTsKICAgICAgICBfclN1bTIgLT0gX3JPdXRTdW0yOwogICAgICAgIF9nU3VtMiAtPSBfZ091dFN1bTI7CiAgICAgICAgX2JTdW0yIC09IF9iT3V0U3VtMjsKICAgICAgICBfck91dFN1bTIgLT0gc3RhY2tJbi5yOwogICAgICAgIF9nT3V0U3VtMiAtPSBzdGFja0luLmc7CiAgICAgICAgX2JPdXRTdW0yIC09IHN0YWNrSW4uYjsKICAgICAgICBwID0gX3gyICsgKChwID0gX3kyICsgcmFkaXVzUGx1czEpIDwgaGVpZ2h0TWludXMxID8gcCA6IGhlaWdodE1pbnVzMSkgKiB3aWR0aCA8PCAyOwogICAgICAgIF9yU3VtMiArPSBfckluU3VtMiArPSBzdGFja0luLnIgPSBwaXhlbHNbcF07CiAgICAgICAgX2dTdW0yICs9IF9nSW5TdW0yICs9IHN0YWNrSW4uZyA9IHBpeGVsc1twICsgMV07CiAgICAgICAgX2JTdW0yICs9IF9iSW5TdW0yICs9IHN0YWNrSW4uYiA9IHBpeGVsc1twICsgMl07CiAgICAgICAgc3RhY2tJbiA9IHN0YWNrSW4ubmV4dDsKICAgICAgICBfck91dFN1bTIgKz0gX3ByMiA9IHN0YWNrT3V0LnI7CiAgICAgICAgX2dPdXRTdW0yICs9IF9wZzIgPSBzdGFja091dC5nOwogICAgICAgIF9iT3V0U3VtMiArPSBfcGIyID0gc3RhY2tPdXQuYjsKICAgICAgICBfckluU3VtMiAtPSBfcHIyOwogICAgICAgIF9nSW5TdW0yIC09IF9wZzI7CiAgICAgICAgX2JJblN1bTIgLT0gX3BiMjsKICAgICAgICBzdGFja091dCA9IHN0YWNrT3V0Lm5leHQ7CiAgICAgICAgeWkgKz0gd2lkdGg7CiAgICAgIH0KICAgIH0KICAgIHJldHVybiBpbWFnZURhdGE7CiAgfQogIG9ubWVzc2FnZSA9IGZ1bmN0aW9uIG9ubWVzc2FnZShlKSB7CiAgICB2YXIgZGF0YSA9IGUuZGF0YTsKICAgIHZhciBpbWFnZURhdGE7CiAgICB0cnkgewogICAgICBpbWFnZURhdGEgPSBwcm9jZXNzSW1hZ2VEYXRhUkdCKGRhdGEuaW1hZ2VEYXRhLCBkYXRhLnRvcFgsIGRhdGEudG9wWSwgZGF0YS53aWR0aCwgZGF0YS5oZWlnaHQsIGRhdGEucmFkaXVzKTsKICAgICAgcG9zdE1lc3NhZ2UoaW1hZ2VEYXRhKTsKICAgIH0gY2F0Y2ggKGUpIHt9CiAgfTsKCn0pKCk7Cgo=', null, false);
  /* eslint-enable */

  var WorkerFactory$1 = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIGZ1bmN0aW9uIHBhcnNlKHN0cmluZywgZW1wdHkpIHsKICAgICAgdmFyIGpzb24gPSBlbXB0eSB8fCB7fTsKICAgICAgaWYgKHN0cmluZykgewogICAgICAgIHRyeSB7CiAgICAgICAgICBqc29uID0gSlNPTi5wYXJzZShzdHJpbmcpOwogICAgICAgIH0gY2F0Y2ggKGUpIHt9CiAgICAgIH0KICAgICAgcmV0dXJuIGpzb247CiAgICB9CiAgICBmdW5jdGlvbiBzdHJpbmdpZnkoZGF0YSkgewogICAgICByZXR1cm4gSlNPTi5zdHJpbmdpZnkoZGF0YSk7CiAgICB9CiAgICBvbm1lc3NhZ2UgPSBmdW5jdGlvbiBvbm1lc3NhZ2UoZSkgewogICAgICB2YXIgbXNnID0gZS5kYXRhOwogICAgICBpZiAobXNnLnR5cGUgPT0gJ3N0cmluZ2lmeScpIHsKICAgICAgICBwb3N0TWVzc2FnZShzdHJpbmdpZnkobXNnLmRhdGEpKTsKICAgICAgfSBlbHNlIGlmIChtc2cudHlwZSA9PSAncGFyc2UnKSB7CiAgICAgICAgcG9zdE1lc3NhZ2UocGFyc2UobXNnLmRhdGEsIG1zZy5lbXB0eSkpOwogICAgICB9CiAgICB9OwoKfSkoKTsKCg==', null, false);
  /* eslint-enable */

  var WorkerFactory = createBase64WorkerFactory('Lyogcm9sbHVwLXBsdWdpbi13ZWItd29ya2VyLWxvYWRlciAqLwooZnVuY3Rpb24gKCkgewogICAgJ3VzZSBzdHJpY3QnOwoKICAgIG9ubWVzc2FnZSA9IGZ1bmN0aW9uIG9ubWVzc2FnZShlKSB7CiAgICAgIHZhciBtc2cgPSBlLmRhdGE7CiAgICAgIGlmIChtc2cudHlwZSA9PSAnYWNjb3VudF9ib29rbWFya3NfcGFyc2UnKSB7CiAgICAgICAgdmFyIGJvb2ttYXJrcyA9IG1zZy5kYXRhLm1hcChmdW5jdGlvbiAoZWxlbSkgewogICAgICAgICAgaWYgKHR5cGVvZiBlbGVtLmRhdGEgPT0gJ3N0cmluZycpIHsKICAgICAgICAgICAgZWxlbS5kYXRhID0gSlNPTi5wYXJzZShlbGVtLmRhdGEpOwogICAgICAgICAgICBkZWxldGUgZWxlbS5kYXRhLnJlbGVhc2VfcXVhbGl0eTsKICAgICAgICAgICAgZGVsZXRlIGVsZW0uZGF0YS5xdWFsaXR5OwogICAgICAgICAgfQogICAgICAgICAgcmV0dXJuIGVsZW07CiAgICAgICAgfSkucmV2ZXJzZSgpOwogICAgICAgIHBvc3RNZXNzYWdlKGJvb2ttYXJrcyk7CiAgICAgIH0KICAgIH07Cgp9KSgpOwoK', null, false);
  /* eslint-enable */

  var agent = navigator.userAgent.toLowerCase();
  function WebWorker(worker, nosuport) {
    var callback = false;
    var timer;
    worker.onmessage = function (data) {
      clearTimeout(timer);
      if (callback) {
        callback(data);
        callback = false;
      }
    };
    this.call = function (data, call) {
      callback = call;
      worker.postMessage(data);
      timer = setTimeout(function () {
        nosuport.call(data, call);
      }, 1500);
    };
  }
  function createWorker(extend, nosuport) {
    var worker;
    if (agent.indexOf("netcast") > -1 || agent.indexOf("maple") > -1) return nosuport || {
      call: function call() {}
    };
    try {
      worker = new WebWorker(new extend(), nosuport || {
        call: function call() {}
      });
    } catch (e) {
      worker = nosuport || {
        call: function call() {}
      };
    }
    return worker;
  }
  var blurWorker = createWorker(WorkerFactory$2, {
    call: function call(msg, _call) {
      var imageData = Blur.imageDataRGB(msg.imageData, msg.topX, msg.topY, msg.width, msg.height, msg.radius);
      _call({
        data: imageData
      });
    }
  });
  var jsonWorker = createWorker(WorkerFactory$1, {
    call: function call(msg, _call2) {
      _call2({
        data: msg.type == 'parse' ? Arrays.decodeJson(msg.data, msg.empty) : JSON.stringify(msg.data)
      });
    }
  });
  var utilsWorker = createWorker(WorkerFactory, {
    call: function call(msg, _call3) {
      if (msg.type == 'account_bookmarks_parse') {
        var bookmarks = msg.data.map(function (elem) {
          if (typeof elem.data == 'string') {
            elem.data = JSON.parse(elem.data);
            delete elem.data.release_quality;
            delete elem.data.quality;
          }
          return elem;
        }).reverse();
        _call3({
          data: bookmarks
        });
      }
    }
  });
  var AppWorker = {
    blur: blurWorker.call,
    json: jsonWorker.call,
    utils: utilsWorker.call
  };

  /* eslint-disable no-bitwise -- used for calculations */
  /* eslint-disable unicorn/prefer-query-selector -- aiming at
    backward-compatibility */
  /**
  * StackBlur - a fast almost Gaussian Blur For Canvas
  *
  * In case you find this class useful - especially in commercial projects -
  * I am not totally unhappy for a small donation to my PayPal account
  * mario@quasimondo.de
  *
  * Or support me on flattr:
  * {@link https://flattr.com/thing/72791/StackBlur-a-fast-almost-Gaussian-Blur-Effect-for-CanvasJavascript}.
  *
  * @module StackBlur
  * @author Mario Klingemann
  * Contact: mario@quasimondo.com
  * Website: {@link http://www.quasimondo.com/StackBlurForCanvas/StackBlurDemo.html}
  * Twitter: @quasimondo
  *
  * @copyright (c) 2010 Mario Klingemann
  *
  * Permission is hereby granted, free of charge, to any person
  * obtaining a copy of this software and associated documentation
  * files (the "Software"), to deal in the Software without
  * restriction, including without limitation the rights to use,
  * copy, modify, merge, publish, distribute, sublicense, and/or sell
  * copies of the Software, and to permit persons to whom the
  * Software is furnished to do so, subject to the following
  * conditions:
  *
  * The above copyright notice and this permission notice shall be
  * included in all copies or substantial portions of the Software.
  *
  * THE SOFTWARE IS PROVIDED "AS IS", WITHOUT WARRANTY OF ANY KIND,
  * EXPRESS OR IMPLIED, INCLUDING BUT NOT LIMITED TO THE WARRANTIES
  * OF MERCHANTABILITY, FITNESS FOR A PARTICULAR PURPOSE AND
  * NONINFRINGEMENT. IN NO EVENT SHALL THE AUTHORS OR COPYRIGHT
  * HOLDERS BE LIABLE FOR ANY CLAIM, DAMAGES OR OTHER LIABILITY,
  * WHETHER IN AN ACTION OF CONTRACT, TORT OR OTHERWISE, ARISING
  * FROM, OUT OF OR IN CONNECTION WITH THE SOFTWARE OR THE USE OR
  * OTHER DEALINGS IN THE SOFTWARE.
  */

  var mulTable = [512, 512, 456, 512, 328, 456, 335, 512, 405, 328, 271, 456, 388, 335, 292, 512, 454, 405, 364, 328, 298, 271, 496, 456, 420, 388, 360, 335, 312, 292, 273, 512, 482, 454, 428, 405, 383, 364, 345, 328, 312, 298, 284, 271, 259, 496, 475, 456, 437, 420, 404, 388, 374, 360, 347, 335, 323, 312, 302, 292, 282, 273, 265, 512, 497, 482, 468, 454, 441, 428, 417, 405, 394, 383, 373, 364, 354, 345, 337, 328, 320, 312, 305, 298, 291, 284, 278, 271, 265, 259, 507, 496, 485, 475, 465, 456, 446, 437, 428, 420, 412, 404, 396, 388, 381, 374, 367, 360, 354, 347, 341, 335, 329, 323, 318, 312, 307, 302, 297, 292, 287, 282, 278, 273, 269, 265, 261, 512, 505, 497, 489, 482, 475, 468, 461, 454, 447, 441, 435, 428, 422, 417, 411, 405, 399, 394, 389, 383, 378, 373, 368, 364, 359, 354, 350, 345, 341, 337, 332, 328, 324, 320, 316, 312, 309, 305, 301, 298, 294, 291, 287, 284, 281, 278, 274, 271, 268, 265, 262, 259, 257, 507, 501, 496, 491, 485, 480, 475, 470, 465, 460, 456, 451, 446, 442, 437, 433, 428, 424, 420, 416, 412, 408, 404, 400, 396, 392, 388, 385, 381, 377, 374, 370, 367, 363, 360, 357, 354, 350, 347, 344, 341, 338, 335, 332, 329, 326, 323, 320, 318, 315, 312, 310, 307, 304, 302, 299, 297, 294, 292, 289, 287, 285, 282, 280, 278, 275, 273, 271, 269, 267, 265, 263, 261, 259];
  var shgTable = [9, 11, 12, 13, 13, 14, 14, 15, 15, 15, 15, 16, 16, 16, 16, 17, 17, 17, 17, 17, 17, 17, 18, 18, 18, 18, 18, 18, 18, 18, 18, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 19, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 20, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 21, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 22, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 23, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24, 24];

  /**
   * @param {string|HTMLImageElement} img
   * @param {string|HTMLCanvasElement} canvas
   * @param {Float} radius
   * @param {boolean} blurAlphaChannel
   * @param {boolean} useOffset
   * @param {boolean} skipStyles
   * @returns {undefined}
   */
  function processImage(img, canvas, radius, blurAlphaChannel, useOffset, skipStyles) {
    if (typeof img === 'string') {
      img = document.getElementById(img);
    }
    if (!img || !('naturalWidth' in img)) {
      return;
    }
    var dimensionType = useOffset ? 'offset' : 'natural';
    var w = img[dimensionType + 'Width'];
    var h = img[dimensionType + 'Height'];
    if (typeof canvas === 'string') {
      canvas = document.getElementById(canvas);
    }
    if (!canvas || !('getContext' in canvas)) {
      return;
    }
    if (!skipStyles) {
      canvas.style.width = w + 'px';
      canvas.style.height = h + 'px';
    }
    canvas.width = w;
    canvas.height = h;
    var context = canvas.getContext('2d');
    context.clearRect(0, 0, w, h);
    context.drawImage(img, 0, 0, img.naturalWidth, img.naturalHeight, 0, 0, w, h);
    if (isNaN(radius) || radius < 1) {
      return;
    }
    if (blurAlphaChannel) {
      processCanvasRGBA(canvas, 0, 0, w, h, radius);
    } else {
      processCanvasRGB(canvas, 0, 0, w, h, radius);
    }
  }

  /**
   * @param {string|HTMLCanvasElement} canvas
   * @param {Integer} topX
   * @param {Integer} topY
   * @param {Integer} width
   * @param {Integer} height
   * @throws {Error|TypeError}
   * @returns {ImageData} See {@link https://html.spec.whatwg.org/multipage/canvas.html#imagedata}
   */
  function getImageDataFromCanvas(canvas, topX, topY, width, height) {
    if (typeof canvas === 'string') {
      canvas = document.getElementById(canvas);
    }
    if (!canvas || _typeof(canvas) !== 'object' || !('getContext' in canvas)) ;
    var context = canvas.getContext('2d');
    try {
      return context.getImageData(topX, topY, width, height);
    } catch (e) {
      //throw new Error('unable to access image data: ' + e);
    }
  }

  /**
   * @param {HTMLCanvasElement} canvas
   * @param {Integer} topX
   * @param {Integer} topY
   * @param {Integer} width
   * @param {Integer} height
   * @param {Float} radius
   * @returns {undefined}
   */
  function processCanvasRGBA(canvas, topX, topY, width, height, radius) {
    if (isNaN(radius) || radius < 1) {
      return;
    }
    radius |= 0;
    var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);
    if (imageData) {
      imageData = processImageDataRGBA(imageData, topX, topY, width, height, radius);
      try {
        canvas.getContext('2d').putImageData(imageData, topX, topY);
      } catch (e) {}
    }
  }

  /**
   * @param {ImageData} imageData
   * @param {Integer} topX
   * @param {Integer} topY
   * @param {Integer} width
   * @param {Integer} height
   * @param {Float} radius
   * @returns {ImageData}
   */
  function processImageDataRGBA(imageData, topX, topY, width, height, radius) {
    var pixels = imageData ? imageData.data : [];
    var div = 2 * radius + 1;
    // const w4 = width << 2;
    var widthMinus1 = width - 1;
    var heightMinus1 = height - 1;
    var radiusPlus1 = radius + 1;
    var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;
    var stackStart = new BlurStack();
    var stack = stackStart;
    var stackEnd;
    for (var i = 1; i < div; i++) {
      stack = stack.next = new BlurStack();
      if (i === radiusPlus1) {
        stackEnd = stack;
      }
    }
    stack.next = stackStart;
    var stackIn = null,
      stackOut = null,
      yw = 0,
      yi = 0;
    var mulSum = mulTable[radius];
    var shgSum = shgTable[radius];
    for (var y = 0; y < height; y++) {
      stack = stackStart;
      var pr = pixels[yi],
        pg = pixels[yi + 1],
        pb = pixels[yi + 2],
        pa = pixels[yi + 3];
      for (var _i = 0; _i < radiusPlus1; _i++) {
        stack.r = pr;
        stack.g = pg;
        stack.b = pb;
        stack.a = pa;
        stack = stack.next;
      }
      var rInSum = 0,
        gInSum = 0,
        bInSum = 0,
        aInSum = 0,
        rOutSum = radiusPlus1 * pr,
        gOutSum = radiusPlus1 * pg,
        bOutSum = radiusPlus1 * pb,
        aOutSum = radiusPlus1 * pa,
        rSum = sumFactor * pr,
        gSum = sumFactor * pg,
        bSum = sumFactor * pb,
        aSum = sumFactor * pa;
      for (var _i2 = 1; _i2 < radiusPlus1; _i2++) {
        var p = yi + ((widthMinus1 < _i2 ? widthMinus1 : _i2) << 2);
        var r = pixels[p],
          g = pixels[p + 1],
          b = pixels[p + 2],
          a = pixels[p + 3];
        var rbs = radiusPlus1 - _i2;
        rSum += (stack.r = r) * rbs;
        gSum += (stack.g = g) * rbs;
        bSum += (stack.b = b) * rbs;
        aSum += (stack.a = a) * rbs;
        rInSum += r;
        gInSum += g;
        bInSum += b;
        aInSum += a;
        stack = stack.next;
      }
      stackIn = stackStart;
      stackOut = stackEnd;
      for (var x = 0; x < width; x++) {
        var paInitial = aSum * mulSum >> shgSum;
        pixels[yi + 3] = paInitial;
        if (paInitial !== 0) {
          var _a = 255 / paInitial;
          pixels[yi] = (rSum * mulSum >> shgSum) * _a;
          pixels[yi + 1] = (gSum * mulSum >> shgSum) * _a;
          pixels[yi + 2] = (bSum * mulSum >> shgSum) * _a;
        } else {
          pixels[yi] = pixels[yi + 1] = pixels[yi + 2] = 0;
        }
        rSum -= rOutSum;
        gSum -= gOutSum;
        bSum -= bOutSum;
        aSum -= aOutSum;
        rOutSum -= stackIn.r;
        gOutSum -= stackIn.g;
        bOutSum -= stackIn.b;
        aOutSum -= stackIn.a;
        var _p = x + radius + 1;
        _p = yw + (_p < widthMinus1 ? _p : widthMinus1) << 2;
        rInSum += stackIn.r = pixels[_p];
        gInSum += stackIn.g = pixels[_p + 1];
        bInSum += stackIn.b = pixels[_p + 2];
        aInSum += stackIn.a = pixels[_p + 3];
        rSum += rInSum;
        gSum += gInSum;
        bSum += bInSum;
        aSum += aInSum;
        stackIn = stackIn.next;
        var _stackOut = stackOut,
          _r = _stackOut.r,
          _g = _stackOut.g,
          _b = _stackOut.b,
          _a2 = _stackOut.a;
        rOutSum += _r;
        gOutSum += _g;
        bOutSum += _b;
        aOutSum += _a2;
        rInSum -= _r;
        gInSum -= _g;
        bInSum -= _b;
        aInSum -= _a2;
        stackOut = stackOut.next;
        yi += 4;
      }
      yw += width;
    }
    for (var _x = 0; _x < width; _x++) {
      yi = _x << 2;
      var _pr = pixels[yi],
        _pg = pixels[yi + 1],
        _pb = pixels[yi + 2],
        _pa = pixels[yi + 3],
        _rOutSum = radiusPlus1 * _pr,
        _gOutSum = radiusPlus1 * _pg,
        _bOutSum = radiusPlus1 * _pb,
        _aOutSum = radiusPlus1 * _pa,
        _rSum = sumFactor * _pr,
        _gSum = sumFactor * _pg,
        _bSum = sumFactor * _pb,
        _aSum = sumFactor * _pa;
      stack = stackStart;
      for (var _i3 = 0; _i3 < radiusPlus1; _i3++) {
        stack.r = _pr;
        stack.g = _pg;
        stack.b = _pb;
        stack.a = _pa;
        stack = stack.next;
      }
      var yp = width;
      var _gInSum = 0,
        _bInSum = 0,
        _aInSum = 0,
        _rInSum = 0;
      for (var _i4 = 1; _i4 <= radius; _i4++) {
        yi = yp + _x << 2;
        var _rbs = radiusPlus1 - _i4;
        _rSum += (stack.r = _pr = pixels[yi]) * _rbs;
        _gSum += (stack.g = _pg = pixels[yi + 1]) * _rbs;
        _bSum += (stack.b = _pb = pixels[yi + 2]) * _rbs;
        _aSum += (stack.a = _pa = pixels[yi + 3]) * _rbs;
        _rInSum += _pr;
        _gInSum += _pg;
        _bInSum += _pb;
        _aInSum += _pa;
        stack = stack.next;
        if (_i4 < heightMinus1) {
          yp += width;
        }
      }
      yi = _x;
      stackIn = stackStart;
      stackOut = stackEnd;
      for (var _y = 0; _y < height; _y++) {
        var _p2 = yi << 2;
        pixels[_p2 + 3] = _pa = _aSum * mulSum >> shgSum;
        if (_pa > 0) {
          _pa = 255 / _pa;
          pixels[_p2] = (_rSum * mulSum >> shgSum) * _pa;
          pixels[_p2 + 1] = (_gSum * mulSum >> shgSum) * _pa;
          pixels[_p2 + 2] = (_bSum * mulSum >> shgSum) * _pa;
        } else {
          pixels[_p2] = pixels[_p2 + 1] = pixels[_p2 + 2] = 0;
        }
        _rSum -= _rOutSum;
        _gSum -= _gOutSum;
        _bSum -= _bOutSum;
        _aSum -= _aOutSum;
        _rOutSum -= stackIn.r;
        _gOutSum -= stackIn.g;
        _bOutSum -= stackIn.b;
        _aOutSum -= stackIn.a;
        _p2 = _x + ((_p2 = _y + radiusPlus1) < heightMinus1 ? _p2 : heightMinus1) * width << 2;
        _rSum += _rInSum += stackIn.r = pixels[_p2];
        _gSum += _gInSum += stackIn.g = pixels[_p2 + 1];
        _bSum += _bInSum += stackIn.b = pixels[_p2 + 2];
        _aSum += _aInSum += stackIn.a = pixels[_p2 + 3];
        stackIn = stackIn.next;
        _rOutSum += _pr = stackOut.r;
        _gOutSum += _pg = stackOut.g;
        _bOutSum += _pb = stackOut.b;
        _aOutSum += _pa = stackOut.a;
        _rInSum -= _pr;
        _gInSum -= _pg;
        _bInSum -= _pb;
        _aInSum -= _pa;
        stackOut = stackOut.next;
        yi += width;
      }
    }
    return imageData;
  }

  /**
   * @param {HTMLCanvasElement} canvas
   * @param {Integer} topX
   * @param {Integer} topY
   * @param {Integer} width
   * @param {Integer} height
   * @param {Float} radius
   * @returns {undefined}
   */
  function processCanvasRGB(canvas, topX, topY, width, height, radius, callback) {
    if (isNaN(radius) || radius < 1) {
      return;
    }
    radius |= 0;
    var imageData = getImageDataFromCanvas(canvas, topX, topY, width, height);
    AppWorker.blur({
      imageData: imageData,
      topX: topX,
      topY: topY,
      width: width,
      height: height,
      radius: radius
    }, function (imageBlurData) {
      try {
        canvas.getContext('2d').putImageData(imageBlurData.data, topX, topY);
      } catch (e) {}
      callback();
    });
    /*
    imageData = processImageDataRGB(
      imageData, topX, topY, width, height, radius
    );
    try{
    canvas.getContext('2d').putImageData(imageData, topX, topY);
    }
    catch(e){}
    */
  }

  /**
   * @param {ImageData} imageData
   * @param {Integer} topX
   * @param {Integer} topY
   * @param {Integer} width
   * @param {Integer} height
   * @param {Float} radius
   * @returns {ImageData}
   */
  function processImageDataRGB(imageData, topX, topY, width, height, radius) {
    var pixels = imageData ? imageData.data : [];
    var div = 2 * radius + 1;
    // const w4 = width << 2;
    var widthMinus1 = width - 1;
    var heightMinus1 = height - 1;
    var radiusPlus1 = radius + 1;
    var sumFactor = radiusPlus1 * (radiusPlus1 + 1) / 2;
    var stackStart = new BlurStack();
    var stack = stackStart;
    var stackEnd;
    for (var i = 1; i < div; i++) {
      stack = stack.next = new BlurStack();
      if (i === radiusPlus1) {
        stackEnd = stack;
      }
    }
    stack.next = stackStart;
    var stackIn = null;
    var stackOut = null;
    var mulSum = mulTable[radius];
    var shgSum = shgTable[radius];
    var p, rbs;
    var yw = 0,
      yi = 0;
    for (var y = 0; y < height; y++) {
      var pr = pixels[yi],
        pg = pixels[yi + 1],
        pb = pixels[yi + 2],
        rOutSum = radiusPlus1 * pr,
        gOutSum = radiusPlus1 * pg,
        bOutSum = radiusPlus1 * pb,
        rSum = sumFactor * pr,
        gSum = sumFactor * pg,
        bSum = sumFactor * pb;
      stack = stackStart;
      for (var _i5 = 0; _i5 < radiusPlus1; _i5++) {
        stack.r = pr;
        stack.g = pg;
        stack.b = pb;
        stack = stack.next;
      }
      var rInSum = 0,
        gInSum = 0,
        bInSum = 0;
      for (var _i6 = 1; _i6 < radiusPlus1; _i6++) {
        p = yi + ((widthMinus1 < _i6 ? widthMinus1 : _i6) << 2);
        rSum += (stack.r = pr = pixels[p]) * (rbs = radiusPlus1 - _i6);
        gSum += (stack.g = pg = pixels[p + 1]) * rbs;
        bSum += (stack.b = pb = pixels[p + 2]) * rbs;
        rInSum += pr;
        gInSum += pg;
        bInSum += pb;
        stack = stack.next;
      }
      stackIn = stackStart;
      stackOut = stackEnd;
      for (var x = 0; x < width; x++) {
        pixels[yi] = rSum * mulSum >> shgSum;
        pixels[yi + 1] = gSum * mulSum >> shgSum;
        pixels[yi + 2] = bSum * mulSum >> shgSum;
        rSum -= rOutSum;
        gSum -= gOutSum;
        bSum -= bOutSum;
        rOutSum -= stackIn.r;
        gOutSum -= stackIn.g;
        bOutSum -= stackIn.b;
        p = yw + ((p = x + radius + 1) < widthMinus1 ? p : widthMinus1) << 2;
        rInSum += stackIn.r = pixels[p];
        gInSum += stackIn.g = pixels[p + 1];
        bInSum += stackIn.b = pixels[p + 2];
        rSum += rInSum;
        gSum += gInSum;
        bSum += bInSum;
        stackIn = stackIn.next;
        rOutSum += pr = stackOut.r;
        gOutSum += pg = stackOut.g;
        bOutSum += pb = stackOut.b;
        rInSum -= pr;
        gInSum -= pg;
        bInSum -= pb;
        stackOut = stackOut.next;
        yi += 4;
      }
      yw += width;
    }
    for (var _x2 = 0; _x2 < width; _x2++) {
      yi = _x2 << 2;
      var _pr2 = pixels[yi],
        _pg2 = pixels[yi + 1],
        _pb2 = pixels[yi + 2],
        _rOutSum2 = radiusPlus1 * _pr2,
        _gOutSum2 = radiusPlus1 * _pg2,
        _bOutSum2 = radiusPlus1 * _pb2,
        _rSum2 = sumFactor * _pr2,
        _gSum2 = sumFactor * _pg2,
        _bSum2 = sumFactor * _pb2;
      stack = stackStart;
      for (var _i7 = 0; _i7 < radiusPlus1; _i7++) {
        stack.r = _pr2;
        stack.g = _pg2;
        stack.b = _pb2;
        stack = stack.next;
      }
      var _rInSum2 = 0,
        _gInSum2 = 0,
        _bInSum2 = 0;
      for (var _i8 = 1, yp = width; _i8 <= radius; _i8++) {
        yi = yp + _x2 << 2;
        _rSum2 += (stack.r = _pr2 = pixels[yi]) * (rbs = radiusPlus1 - _i8);
        _gSum2 += (stack.g = _pg2 = pixels[yi + 1]) * rbs;
        _bSum2 += (stack.b = _pb2 = pixels[yi + 2]) * rbs;
        _rInSum2 += _pr2;
        _gInSum2 += _pg2;
        _bInSum2 += _pb2;
        stack = stack.next;
        if (_i8 < heightMinus1) {
          yp += width;
        }
      }
      yi = _x2;
      stackIn = stackStart;
      stackOut = stackEnd;
      for (var _y2 = 0; _y2 < height; _y2++) {
        p = yi << 2;
        pixels[p] = _rSum2 * mulSum >> shgSum;
        pixels[p + 1] = _gSum2 * mulSum >> shgSum;
        pixels[p + 2] = _bSum2 * mulSum >> shgSum;
        _rSum2 -= _rOutSum2;
        _gSum2 -= _gOutSum2;
        _bSum2 -= _bOutSum2;
        _rOutSum2 -= stackIn.r;
        _gOutSum2 -= stackIn.g;
        _bOutSum2 -= stackIn.b;
        p = _x2 + ((p = _y2 + radiusPlus1) < heightMinus1 ? p : heightMinus1) * width << 2;
        _rSum2 += _rInSum2 += stackIn.r = pixels[p];
        _gSum2 += _gInSum2 += stackIn.g = pixels[p + 1];
        _bSum2 += _bInSum2 += stackIn.b = pixels[p + 2];
        stackIn = stackIn.next;
        _rOutSum2 += _pr2 = stackOut.r;
        _gOutSum2 += _pg2 = stackOut.g;
        _bOutSum2 += _pb2 = stackOut.b;
        _rInSum2 -= _pr2;
        _gInSum2 -= _pg2;
        _bInSum2 -= _pb2;
        stackOut = stackOut.next;
        yi += width;
      }
    }
    return imageData;
  }

  /**
   *
   */
  var BlurStack = /*#__PURE__*/_createClass(
  /**
   * Set properties.
   */
  function BlurStack() {
    _classCallCheck(this, BlurStack);
    this.r = 0;
    this.g = 0;
    this.b = 0;
    this.a = 0;
    this.next = null;
  });
  var Blur = {
    /**
      * @function module:StackBlur.image
      * @see module:StackBlur~processImage
      */
    image: processImage,
    /**
      * @function module:StackBlur.canvasRGBA
      * @see module:StackBlur~processCanvasRGBA
      */
    canvasRGBA: processCanvasRGBA,
    /**
      * @function module:StackBlur.canvasRGB
      * @see module:StackBlur~processCanvasRGB
      */
    canvasRGB: processCanvasRGB,
    /**
      * @function module:StackBlur.imageDataRGBA
      * @see module:StackBlur~processImageDataRGBA
      */
    imageDataRGBA: processImageDataRGBA,
    /**
      * @function module:StackBlur.imageDataRGB
      * @see module:StackBlur~processImageDataRGB
      */
    imageDataRGB: processImageDataRGB
  };

  var canvas$1 = document.createElement('canvas'),
    ctx$1 = canvas$1.getContext('2d');
  canvas$1.width = 30;
  canvas$1.height = 17;
  var canvas_poster = document.createElement('canvas'),
    ctx_poster = canvas_poster.getContext('2d');
  function extract$2(img_data) {
    var data = img_data.data,
      colors = [];
    for (var i = 0, n = data.length; i < n; i += 4) {
      colors.push([data[i], data[i + 1], data[i + 2]]);
    }
    return colors;
  }
  function palette(palette) {
    var colors = {
      bright: [0, 0, 0],
      average: [127, 127, 127],
      dark: [255, 255, 255]
    };
    var ar = 0,
      ag = 0,
      ab = 0,
      at = palette.length;
    var bg = 0,
      dk = 765;
    for (var i = 0; i < palette.length; i++) {
      var p = palette[i],
        a = p[0] + p[1] + p[2];
      ar += p[0];
      ag += p[1];
      ab += p[2];
      if (a > bg) {
        bg = a;
        colors.bright = p;
      }
      if (a < dk) {
        dk = a;
        colors.dark = p;
      }
    }
    colors.average = [Math.round(ar / at), Math.round(ag / at), Math.round(ab / at)];
    return colors;
  }
  function rgba(c) {
    var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
    return 'rgba(' + c.join(',') + ',' + o + ')';
  }
  function tone(c) {
    var o = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 1;
    var s = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 30;
    var l = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 80;
    var hls = rgbToHsl(c[0], c[1], c[2]);
    var rgb = hslToRgb$1(hls[0], Math.min(s, hls[1]), l);
    return rgba(rgb, o);
  }

  /**
   * Converts an RGB color value to HSL.
   *
   * @param   {number}  r       The red color value
   * @param   {number}  g       The green color value
   * @param   {number}  b       The blue color value
   * @return  {Array}           The HSL representation
   */
  function rgbToHsl(r, g, b) {
    var rabs, gabs, babs, rr, gg, bb, h, s, v, diff, diffc, percentRoundFn;
    rabs = r / 255;
    gabs = g / 255;
    babs = b / 255;
    v = Math.max(rabs, gabs, babs), diff = v - Math.min(rabs, gabs, babs);
    diffc = function diffc(c) {
      return (v - c) / 6 / diff + 1 / 2;
    };
    percentRoundFn = function percentRoundFn(num) {
      return Math.round(num * 100) / 100;
    };
    if (diff == 0) {
      h = s = 0;
    } else {
      s = diff / v;
      rr = diffc(rabs);
      gg = diffc(gabs);
      bb = diffc(babs);
      if (rabs === v) {
        h = bb - gg;
      } else if (gabs === v) {
        h = 1 / 3 + rr - bb;
      } else if (babs === v) {
        h = 2 / 3 + gg - rr;
      }
      if (h < 0) {
        h += 1;
      } else if (h > 1) {
        h -= 1;
      }
    }
    return [Math.round(h * 360), percentRoundFn(s * 100), percentRoundFn(v * 100)];
  }

  /**
   * Converts an HSL color value to RGB.
   *
   * @param   {number}  h       The hue
   * @param   {number}  s       The saturation
   * @param   {number}  l       The lightness
   * @return  {Array}           The RGB representation
   */
  function hslToRgb$1(h, s, l) {
    s /= 100;
    l /= 100;
    var C = (1 - Math.abs(2 * l - 1)) * s;
    var hue = h / 60;
    var X = C * (1 - Math.abs(hue % 2 - 1));
    var r = 0,
      g = 0,
      b = 0;
    if (hue >= 0 && hue < 1) {
      r = C;
      g = X;
    } else if (hue >= 1 && hue < 2) {
      r = X;
      g = C;
    } else if (hue >= 2 && hue < 3) {
      g = C;
      b = X;
    } else if (hue >= 3 && hue < 4) {
      g = X;
      b = C;
    } else if (hue >= 4 && hue < 5) {
      r = X;
      b = C;
    } else {
      r = C;
      b = X;
    }
    var m = l - C / 2;
    r += m;
    g += m;
    b += m;
    r *= 255.0;
    g *= 255.0;
    b *= 255.0;
    return [Math.round(r), Math.round(g), Math.round(b)];
  }
  function reset$1(width, height) {
    canvas$1.width = width;
    canvas$1.height = height;
  }
  function get$c(img) {
    reset$1(30, 17);
    var ratio = Math.max(canvas$1.width / img.width, canvas$1.height / img.height);
    var nw = img.width * ratio,
      nh = img.height * ratio;
    ctx$1.drawImage(img, -(nw - canvas$1.width) / 2, -(nh - canvas$1.height) / 2, nw, nh);
    return extract$2(ctx$1.getImageData(0, 0, canvas$1.width, canvas$1.height));
  }
  function blur$1(img, callback) {
    reset$1(200, 130);
    var ratio = Math.max(canvas$1.width / img.width, canvas$1.height / img.height);
    var nw = img.width * ratio,
      nh = img.height * ratio;
    ctx$1.drawImage(img, -(nw - canvas$1.width) / 2, -(nh - canvas$1.height) / 2, nw, nh);
    Blur.canvasRGB(canvas$1, 0, 0, canvas$1.width, canvas$1.height, 80, function () {
      var nimg = new Image();
      try {
        nimg.src = canvas$1.toDataURL();
      } catch (e) {}
      setTimeout(function () {
        callback(nimg);
      }, 100);
    });
  }
  function getImg(callback) {
    var im = new Image();
    try {
      im.src = canvas_poster.toDataURL();
    } catch (e) {}
    setTimeout(function () {
      callback(im);
    }, 100);
  }
  function blurPoster(img, w, h, callback) {
    canvas_poster.width = w;
    canvas_poster.height = h;
    var ratio = Math.max(canvas_poster.width / img.width, canvas_poster.height / img.height);
    var nw = img.width * ratio,
      nh = img.height * ratio;
    setTimeout(function () {
      ctx_poster.drawImage(img, -(nw - canvas_poster.width) / 2, -(nh - canvas_poster.height) / 2, nw, nh);
      Blur.canvasRGB(canvas_poster, 0, 0, canvas_poster.width, canvas_poster.height, 50, function () {
        var gradient = ctx_poster.createLinearGradient(0, 0, 0, canvas_poster.height);
        gradient.addColorStop(0.5, 'rgba(0, 0, 0, 1)');
        gradient.addColorStop(0.6, 'rgba(0, 0, 0, 0)');
        gradient.addColorStop(1, 'rgba(0, 0, 0, 1)');
        ctx_poster.globalCompositeOperation = 'destination-out';
        ctx_poster.fillStyle = gradient;
        ctx_poster.fillRect(0, 0, canvas_poster.width, canvas_poster.height);
        ctx_poster.globalCompositeOperation = 'source-over';
        getImg(function (blured) {
          canvas_poster.width = w;
          canvas_poster.height = h;
          ctx_poster.drawImage(img, -(nw - canvas_poster.width) / 2, -(nh - canvas_poster.height) / 2, nw, nh);
          var gradient = ctx_poster.createLinearGradient(0, 0, 0, canvas_poster.height);
          gradient.addColorStop(0, 'rgba(0, 0, 0, 1)');
          gradient.addColorStop(0.6, 'rgba(0, 0, 0, 1)');
          gradient.addColorStop(0.65, 'rgba(0, 0, 0, 0)');
          gradient.addColorStop(1, 'rgba(0, 0, 0, 0)');
          ctx_poster.globalCompositeOperation = 'destination-in';
          ctx_poster.fillStyle = gradient;
          ctx_poster.fillRect(0, 0, canvas_poster.width, canvas_poster.height);
          ctx_poster.globalCompositeOperation = 'source-over';
          ctx_poster.drawImage(blured, 0, 0);
          getImg(callback);
        });
      });
    }, 100);
  }
  function rgbToHex(r, g, b) {
    return "#" + (1 << 24 | r << 16 | g << 8 | b).toString(16).slice(1);
  }
  var Color = {
    get: get$c,
    extract: extract$2,
    palette: palette,
    rgba: rgba,
    blur: blur$1,
    tone: tone,
    rgbToHsl: rgbToHsl,
    rgbToHex: rgbToHex,
    hslToRgb: hslToRgb$1,
    blurPoster: blurPoster
  };

  var IndexedDB = /*#__PURE__*/function () {
    function IndexedDB(database_name) {
      var tables = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : [];
      var version = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 3;
      _classCallCheck(this, IndexedDB);
      this.listener = start$8();
      this.database_name = 'prisma_' + database_name;
      this.tables = tables;
      this.version = version;
      this.db = null;
      this.logs = true;
    }
    return _createClass(IndexedDB, [{
      key: "log",
      value: function log(err, store_name, key) {
        if (this.logs) console.log('DB', this.database_name + (store_name ? '_' + store_name : '') + (key ? ' -> [' + key + ']' : ''), err);
      }
    }, {
      key: "openDatabase",
      value: function openDatabase() {
        var _this = this;
        return new Promise(function (resolve, reject) {
          if (!('indexedDB' in window)) return _this.log('Not supported'), reject('Not supported');
          if (!_this.tables.length) return _this.log('No tables'), reject('No tables');
          var request = indexedDB.open(_this.database_name, _this.version);
          request.onerror = function (event) {
            _this.log(request.error || 'An error occurred while opening the database');
            reject(request.error || 'An error occurred while opening the database');
          };
          request.onsuccess = function (event) {
            _this.db = event.target.result;
            resolve();
          };
          request.onupgradeneeded = function (event) {
            var db = event.target.result;
            _this.log('OnUpgradeNeeded');
            _this.tables.forEach(function (name) {
              if (!db.objectStoreNames.contains(name)) {
                _this.log('Create table - ' + name);
                db.createObjectStore(name, {
                  keyPath: 'key'
                });
              }
            });
          };
        });
      }
    }, {
      key: "addData",
      value: function addData(store_name, key, value) {
        var _this2 = this;
        return new Promise(function (resolve, reject) {
          if (!_this2.db) {
            return _this2.log('Database not open', store_name, key), reject('Database not open');
          }
          var transaction = _this2.db.transaction([store_name], 'readwrite');
          var objectStore = transaction.objectStore(store_name);
          var addRequest = objectStore.add({
            key: key,
            value: value,
            time: Date.now()
          });
          addRequest.onerror = function (event) {
            _this2.log(addRequest.error || 'An error occurred while adding data', store_name, key);
            reject(addRequest.error || 'An error occurred while adding data');
          };
          addRequest.onsuccess = resolve;
        });
      }
    }, {
      key: "getData",
      value: function getData(store_name, key) {
        var _this3 = this;
        var life_time = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : -1;
        return new Promise(function (resolve, reject) {
          if (!_this3.db) {
            return _this3.log('Database not open', store_name, key), reject('Database not open');
          }
          var transaction = _this3.db.transaction([store_name], 'readonly');
          var objectStore = transaction.objectStore(store_name);
          var getRequest = key ? objectStore.get(key) : objectStore.getAll();
          getRequest.onerror = function (event) {
            _this3.log(getRequest.error || 'An error occurred while retrieving data', store_name, key);
            reject(getRequest.error || 'An error occurred while retrieving data');
          };
          getRequest.onsuccess = function (event) {
            var result = event.target.result;
            if (result) {
              if (key) {
                if (life_time == -1) resolve(result.value);else {
                  if (Date.now() < result.time + life_time * 1000 * 60) resolve(result.value);else resolve(null);
                }
              } else resolve(result.map(function (r) {
                return r.value;
              }));
            } else {
              resolve(null);
            }
          };
        });
      }
    }, {
      key: "getDataAnyCase",
      value: function getDataAnyCase(store_name, key, life_time) {
        var _this4 = this;
        return new Promise(function (resolve, reject) {
          _this4.getData(store_name, key, life_time).then(resolve)["catch"](function () {
            resolve(null);
          });
        });
      }
    }, {
      key: "updateData",
      value: function updateData(store_name, key, value) {
        var _this5 = this;
        return new Promise(function (resolve, reject) {
          if (!_this5.db) {
            return _this5.log('Database not open', store_name, key), reject('Database not open');
          }
          var transaction = _this5.db.transaction([store_name], 'readwrite');
          var objectStore = transaction.objectStore(store_name);
          var getRequest = objectStore.get(key);
          getRequest.onerror = function (event) {
            _this5.log(getRequest.error || 'An error occurred while updating data', store_name, key);
            reject(getRequest.error || 'An error occurred while updating data');
          };
          getRequest.onsuccess = function (event) {
            var result = event.target.result;
            if (result) {
              result.value = value;
              result.time = Date.now();
              var updateRequest = objectStore.put(result);
              updateRequest.onerror = function (event) {
                _this5.log(updateRequest.error || 'An error occurred while updating data', store_name, key);
                reject(updateRequest.error || 'An error occurred while updating data');
              };
              updateRequest.onsuccess = resolve;
            } else {
              _this5.log('No data found with the given key', store_name, key);
              reject('No data found with the given key');
            }
          };
        });
      }
    }, {
      key: "rewriteData",
      value: function rewriteData(store_name, key, value) {
        var _this6 = this;
        return new Promise(function (resolve, reject) {
          if (!_this6.db) {
            return _this6.log('Database not open', store_name, key), reject('Database not open');
          }
          var transaction = _this6.db.transaction([store_name], 'readwrite');
          var objectStore = transaction.objectStore(store_name);
          var addRequest = objectStore.put({
            key: key,
            value: value,
            time: Date.now()
          });
          addRequest.onerror = function (event) {
            _this6.log(addRequest.error || 'An error occurred while rewrite data', store_name, key);
            reject(addRequest.error || 'An error occurred while rewrite data');
          };
          addRequest.onsuccess = resolve;
        });
      }
    }, {
      key: "deleteData",
      value: function deleteData(store_name, key) {
        var _this7 = this;
        return new Promise(function (resolve, reject) {
          if (!_this7.db) {
            return _this7.log('Database not open', store_name, key), reject('Database not open');
          }
          var transaction = _this7.db.transaction([store_name], 'readwrite');
          var objectStore = transaction.objectStore(store_name);
          var deleteRequest = objectStore["delete"](key);
          deleteRequest.onerror = function (event) {
            _this7.log(deleteRequest.error || 'An error occurred while deleting data', store_name, key);
            reject(deleteRequest.error || 'An error occurred while deleting data');
          };
          deleteRequest.onsuccess = resolve;
        });
      }
    }, {
      key: "clearTable",
      value: function clearTable(store_name) {
        var _this8 = this;
        return new Promise(function (resolve, reject) {
          if (!_this8.db) {
            return _this8.log('Database not open', store_name), reject('Database not open');
          }
          var transaction = _this8.db.transaction([store_name], 'readwrite');
          var objectStore = transaction.objectStore(store_name);
          var clearRequest = objectStore.clear();
          clearRequest.onerror = function (event) {
            _this8.log(clearRequest.error || 'An error occurred while clearing the table', store_name);
            reject(clearRequest.error || 'An error occurred while clearing the table');
          };
          clearRequest.onsuccess = function () {
            resolve();
          };
        });
      }
    }, {
      key: "clearAll",
      value: function clearAll() {
        var _this9 = this;
        return new Promise(function (resolve, reject) {
          if (!_this9.db) {
            return _this9.log('Database not open'), reject('Database not open');
          }
          var objectStoreNames = _this9.db.objectStoreNames;
          var tableNames = Array.from(objectStoreNames);
          tableNames.forEach(function (n) {
            _this9.clearTable(n);
          });
          resolve();
        });
      }
    }]);
  }();

  var Cache = new IndexedDB('cache', ['screensavers', 'plugins', 'backgrounds', 'images', 'themes', 'other', 'timetable', 'cards', 'storage'], 7);
  Cache.openDatabase().then(function () {
    console.log('Cache', 'worked');
  })["catch"](function () {
    console.log('Cache', 'error', 'no open database');
  });

  var canvas = document.createElement('canvas');
  var ctx = canvas.getContext('2d');
  var waiting = {};
  function write(img, src) {
    if (!Storage.field('cache_images')) return;
    if (src.indexOf('http') === 0) {
      if (waiting[src]) return;
      waiting[src] = true;
      img.crossOrigin = "Anonymous";
      Cache.getData('images', src).then(function (str) {
        if (!str || typeof src == 'string') {
          setTimeout(function () {
            canvas.width = img.naturalWidth || img.width;
            canvas.height = img.naturalHeight || img.height;
            try {
              ctx.drawImage(img, 0, 0, canvas.width, canvas.height);
              canvas.toBlob(function (blob) {
                Cache.addData('images', src, blob).then(function () {
                  console.log('ImagesCache', 'save to cache', src);
                  delete waiting[src];
                })["catch"](function () {
                  delete waiting[src];
                });
              }, 'image/jpeg', 1);
            } catch (e) {
              delete waiting[src];
            }
          }, 1500 + Math.round(500 * Math.random()));
        } else delete waiting[src];
      })["catch"](function (e) {
        delete waiting[src];
      });
    }
  }
  function read$1(img, src) {
    if (Storage.field('cache_images')) {
      Cache.getData('images', src).then(function (str) {
        if (str) {
          if (typeof str == 'string') img.src = str;else {
            img.src = URL.createObjectURL(str);
          }
        } else img.src = src;
      })["catch"](function () {
        img.src = src;
      });
    } else img.src = src;
  }
  var ImageCache = {
    write: write,
    read: read$1
  };

  function AVPlay$1(call_video) {
    var stream_url, loaded;
    console.log('Player', 'run Tizen');
    var object = $('<object class="player-video_video" type="application/avplayer"</object>');
    var video = object[0];
    var listener = start$8();
    var change_scale_later;
    var change_speed_later;
    object.width(window.innerWidth);
    object.height(window.innerHeight);

    /**
     * Установить урл
     */
    Object.defineProperty(video, "src", {
      set: function set(url) {
        if (url) {
          stream_url = url;
          try {
            webapis.avplay.open(url);
            webapis.avplay.setDisplayRect(0, 0, window.innerWidth, window.innerHeight);
            webapis.avplay.setDisplayMethod('PLAYER_DISPLAY_MODE_LETTER_BOX');
          } catch (e) {
            listener.send('error', {
              error: {
                code: 'tizen',
                message: 'failed to initialize player'
              }
            });
          }
          try {
            webapis.avplay.setSilentSubtitle(false);
          } catch (e) {}
        }
      },
      get: function get() {}
    });

    /**
     * Позиция
     */
    Object.defineProperty(video, "currentTime", {
      set: function set(t) {
        try {
          webapis.avplay.seekTo(t * 1000);
        } catch (e) {}
      },
      get: function get() {
        var d = 0;
        try {
          d = webapis.avplay.getCurrentTime();
        } catch (e) {}
        return d ? d / 1000 : 0;
      }
    });

    /**
     * Длительность
     */
    Object.defineProperty(video, "duration", {
      set: function set() {},
      get: function get() {
        var d = 0;
        try {
          d = webapis.avplay.getDuration();
        } catch (e) {}
        return d ? d / 1000 : 0;
      }
    });

    /**
     * Пауза
     */
    Object.defineProperty(video, "paused", {
      set: function set() {},
      get: function get() {
        try {
          return webapis.avplay.getState() == 'PAUSED';
        } catch (e) {
          return false;
        }
      }
    });

    /**
     * Аудиодорожки
     */
    Object.defineProperty(video, "audioTracks", {
      set: function set() {},
      get: function get() {
        try {
          var totalTrackInfo = webapis.avplay.getTotalTrackInfo();
          var tracks = totalTrackInfo.filter(function (track) {
            return track.type === 'AUDIO';
          }).map(function (track) {
            var info = JSON.parse(track.extra_info);
            var item = {
              extra: JSON.parse(track.extra_info),
              index: parseInt(track.index),
              language: info.language
            };
            Object.defineProperty(item, "enabled", {
              set: function set(v) {
                if (v) {
                  try {
                    webapis.avplay.setSelectTrack('AUDIO', item.index);
                  } catch (e) {
                    console.log('Player', 'no change audio:', e.message);
                  }
                }
              },
              get: function get() {}
            });
            return item;
          }).sort(function (a, b) {
            return a.index - b.index;
          });
          return tracks;
        } catch (e) {
          return [];
        }
      }
    });

    /**
     * Субтитры
     */
    Object.defineProperty(video, "textTracks", {
      set: function set() {},
      get: function get() {
        try {
          var totalTrackInfo = webapis.avplay.getTotalTrackInfo();
          var tracks = totalTrackInfo.filter(function (track) {
            return track.type === 'TEXT';
          }).map(function (track) {
            var info = JSON.parse(track.extra_info),
              item = {
                extra: JSON.parse(track.extra_info),
                index: parseInt(track.index),
                language: info.track_lang
              };
            Object.defineProperty(item, "mode", {
              set: function set(v) {
                if (v == 'showing') {
                  try {
                    webapis.avplay.setSelectTrack('TEXT', item.index);
                  } catch (e) {
                    console.log('Player', 'no change text:', e.message);
                  }
                }
              },
              get: function get() {}
            });
            return item;
          }).sort(function (a, b) {
            return a.index - b.index;
          });
          console.log('Tizen', 'tracks', tracks);
          console.log('Tizen', 'tracks index', tracks.map(function (a) {
            return a.index;
          }));
          return tracks;
        } catch (e) {
          return [];
        }
      }
    });

    /**
     * Ширина видео
     */
    Object.defineProperty(video, "videoWidth", {
      set: function set() {},
      get: function get() {
        var info = videoInfo();
        return info.Width || 0;
      }
    });

    /**
     * Высота видео
     */
    Object.defineProperty(video, "videoHeight", {
      set: function set() {},
      get: function get() {
        var info = videoInfo();
        return info.Height || 0;
      }
    });

    /**
     * Получить информацию о видео
     * @returns {object}
     */
    function videoInfo() {
      try {
        var info = webapis.avplay.getCurrentStreamInfo(),
          json = {};
        for (var i = 0; i < info.length; i++) {
          var detail = info[i];
          if (detail.type == 'VIDEO') {
            json = JSON.parse(detail.extra_info);
          }
        }
        return json;
      } catch (e) {
        return {};
      }
    }

    /**
     * Меняем размер видео
     * @param {string} scale - default|cover
     */
    function changeScale(scale) {
      try {
        if (scale == 'cover') {
          webapis.avplay.setDisplayMethod('PLAYER_DISPLAY_MODE_FULL_SCREEN');
        } else {
          webapis.avplay.setDisplayMethod('PLAYER_DISPLAY_MODE_LETTER_BOX');
        }
      } catch (e) {
        change_scale_later = scale;
      }
    }
    function changeSpeed(speed) {
      try {
        webapis.avplay.setSpeed(speed);
      } catch (e) {
        change_speed_later = speed;
      }
    }

    /**
     * Всегда говорим да, мы можем играть
     */
    video.canPlayType = function () {
      return true;
    };

    /**
     * Вешаем кастомные события
     */
    video.addEventListener = listener.follow.bind(listener);

    /**
     * Вешаем события от плеера тайзен
     */
    webapis.avplay.setListener({
      onbufferingstart: function onbufferingstart() {
        listener.send('progress', {
          percent: 0
        });
        listener.send('waiting');
      },
      onbufferingprogress: function onbufferingprogress(percent) {
        listener.send('progress', {
          percent: percent
        });
      },
      onbufferingcomplete: function onbufferingcomplete() {
        listener.send('progress', {
          percent: 0
        });
        listener.send('playing');
      },
      onstreamcompleted: function onstreamcompleted() {
        webapis.avplay.stop();
        listener.send('ended');
      },
      oncurrentplaytime: function oncurrentplaytime() {
        listener.send('timeupdate');
        if (change_scale_later) {
          change_scale_later = false;
          changeScale(change_scale_later);
        }
        if (change_speed_later) {
          change_speed_later = false;
          changeSpeed(change_speed_later);
        }
      },
      onerror: function onerror(eventType) {
        listener.send('error', {
          error: {
            code: 'tizen',
            message: eventType
          }
        });
      },
      onevent: function onevent(eventType, eventData) {
        console.log('Player', 'event type:', eventType, 'data:', eventData);
      },
      onsubtitlechange: function onsubtitlechange(duration, text, data3, data4) {
        listener.send('subtitle', {
          text: text
        });
      },
      ondrmevent: function ondrmevent(drmEvent, drmData) {}
    });

    /**
     * Загрузить
     */
    video.load = function () {
      if (stream_url) {
        webapis.avplay.prepareAsync(function () {
          loaded = true;
          webapis.avplay.play();
          try {
            webapis.avplay.setSilentSubtitle(false);
          } catch (e) {}
          listener.send('canplay');
          listener.send('playing');
          listener.send('loadeddata');
        }, function (e) {
          listener.send('error', {
            error: 'code [' + e.code + '] ' + e.message
          });
        });
      }
    };

    /**
     * Играть
     */
    video.play = function () {
      if (loaded) webapis.avplay.play();
    };

    /**
     * Пауза
     */
    video.pause = function () {
      if (loaded) webapis.avplay.pause();
    };

    /**
     * Установить масштаб
     */
    video.size = function (type) {
      changeScale(type);
    };

    /**
     * Установить скорость
     */
    video.speed = function (speed) {
      changeSpeed(speed);
    };

    /**
     * Уничтожить
     */
    video.destroy = function () {
      try {
        webapis.avplay.close();
      } catch (e) {}
      video.remove();
      listener.destroy();
    };
    call_video(video);
    return object;
  }

  function create$q(object) {
    this.state = object.state;
    this.start = function () {
      this.dispath(this.state);
    };
    this.dispath = function (action_name) {
      var action = object.transitions[action_name];
      if (action) {
        action.call(this);
      } else {
        console.log('invalid action');
      }
    };
  }

  var sounds = {};
  function Sound(option) {
    this.option = option;
    this.loaded = false;
    this.audio = new Audio();
    this.audio.src = option.url;
    this.audio.volume = option.volume || 1;
    this.audio.load();
    var volume = option.volume || 1;
    var isplay = false;
    this.audio.addEventListener("playing", function (event) {
      isplay = true;
    });
    this.audio.addEventListener("pause", function (event) {
      isplay = false;
    });
    this.play = function () {
      this.stop();
      var playPromise;
      try {
        this.audio.currentTime = 0;
        this.audio.volume = volume * (Prisma.Storage.field('interface_sound_level') / 100);
        playPromise = this.audio.play();
      } catch (e) {}
      if (playPromise !== undefined) {
        playPromise.then(function () {})["catch"](function (e) {
          console.log('Sound', 'play promise error:', e.message);
        });
      }
      return this;
    };
    this.stop = function () {
      if (!isplay) return this;
      var stopPromise;
      try {
        stopPromise = this.audio.pause();
      } catch (e) {}
      if (stopPromise !== undefined) {
        stopPromise.then(function () {})["catch"](function (e) {
          console.log('Sound', 'stop promise error:', e.message);
        });
      }
      return this;
    };
    return this;
  }
  function init$T() {
    if (Platform.is('android') || Platform.is('browser') || Platform.is('apple_tv') || Platform.desktop()) {
      add$c('hover', {
        url: object$2.github_prisma + 'sound/hover.ogg'
      });
      add$c('enter', {
        url: object$2.github_prisma + 'sound/hover.ogg'
      });
      add$c('bell', {
        url: object$2.github_prisma + 'sound/bell.ogg'
      });
    }
  }
  function play$4(name) {
    if (sounds[name] && Storage.field('interface_sound_play')) sounds[name].play();
  }
  function add$c(name, params) {
    try {
      sounds[name] = new Sound(params);
      return sounds[name];
    } catch (e) {
      return false;
    }
  }
  var Sound$1 = {
    init: init$T,
    add: add$c,
    play: play$4
  };

  var philipse = {
    play: typeof VK_PLAY !== 'undefined' ? VK_PLAY : typeof KEYCODE_MEDIA_PLAY !== 'undefined' ? KEYCODE_MEDIA_PLAY : -1,
    stop: typeof VK_STOP !== 'undefined' ? VK_STOP : typeof KEYCODE_MEDIA_STOP !== 'undefined' ? KEYCODE_MEDIA_STOP : -1,
    pause: typeof VK_PAUSE !== 'undefined' ? VK_PAUSE : typeof KEYCODE_MEDIA_PAUSE !== 'undefined' ? KEYCODE_MEDIA_PAUSE : -1,
    play_pause: typeof VK_PLAY_PAUSE !== 'undefined' ? VK_PLAY_PAUSE : typeof KEYCODE_MEDIA_PLAY_PAUSE !== 'undefined' ? KEYCODE_MEDIA_PLAY_PAUSE : -1
  };
  var enabled$2 = false;
  var listener$m = start$8();
  var time$2 = 0;
  var lastdown = 0;
  var timer$7;
  var longpress;
  var keydown = false;
  var canianimate$1 = typeof requestAnimationFrame !== 'undefined';
  var frame_time = 0;
  function toggle$c(new_status) {
    enabled$2 = new_status;
    listener$m.send('toggle', {
      status: enabled$2
    });
  }
  function enable$1() {
    toggle$c(true);
  }
  function disable() {
    toggle$c(false);
  }
  function isEnter(keycode) {
    return keycode == 13 || keycode == 29443 || keycode == 117 || keycode == 65385;
  }
  function keyCode(e) {
    var keycode;
    if (window.event) {
      keycode = e.keyCode;
    } else if (e.which) {
      keycode = e.which;
    }
    return keycode;
  }
  function requestFrame$1() {
    keydownTrigger(keydown);
    keydown = false;
    frame_time = Date.now();
  }
  function keydownTrigger(e) {
    var keycode = keyCode(e);
    if (time$2 > Date.now() - 100) return;
    time$2 = Date.now();
    listener$m.send('keydown', {
      code: keycode,
      enabled: enabled$2,
      event: e
    });
    if (e.defaultPrevented) return;
    if (isEnter(keycode)) return;
    if (!enabled$2) return; //отключить все

    //4 - Samsung orsay
    if (keycode == 37 || keycode == 4) {
      Sound$1.play('hover');
      Controller.move('left');
    }
    //29460 - Samsung orsay
    if (keycode == 38 || keycode == 29460) {
      Sound$1.play('hover');
      Controller.move('up');
    }
    //5 - Samsung orsay
    if (keycode == 39 || keycode == 5) {
      Sound$1.play('hover');
      Controller.move('right');
    }
    //5 - Samsung orsay
    //29461 - Samsung orsay
    if (keycode == 40 || keycode == 29461) {
      Sound$1.play('hover');
      Controller.move('down');
    }
    //33 - LG; 427 - Samsung
    if (keycode == 33 || keycode == 427) {
      Sound$1.play('hover');
      Controller.move('toup');
    }
    //34 - LG; 428 - Samsung
    if (keycode == 34 || keycode == 428) {
      Sound$1.play('hover');
      Controller.move('todown');
    }

    //Space
    //10252 - Samsung tizen
    if (keycode == 32 || keycode == 179 || keycode == 10252 || keycode == philipse.play_pause) {
      Controller.trigger('playpause');
    }

    //Samsung media
    //71 - Samsung orsay
    if (keycode == 415 || keycode == 71 || keycode == philipse.play) {
      Controller.trigger('play');
    }

    //Samsung stop
    //70 - Samsung orsay
    if (keycode == 413 || keycode == philipse.stop || keycode == 70) {
      Controller.trigger('stop');
    }

    //69 - Samsung orsay
    if (keycode == 412 || keycode == 69 || keycode == 177) {
      Controller.trigger('rewindBack');
    }

    //72 - Samsung orsay
    if (keycode == 418 || keycode == 417 || keycode == 72 || keycode == 176) {
      Controller.trigger('rewindForward');
    }

    //74 - Samsung orsay
    if (keycode == 19 || keycode == 74 || keycode == philipse.pause) {
      Controller.trigger('pause');
    }
    if (keycode == 457) {
      Controller.trigger('info');
    }

    //E-Manual
    if (keycode == 10146) {
      e.preventDefault();
    }
    if (keycode == 10133) {
      Controller.toggle('settings');
    }

    //Кнопка назад
    //8 - браузер
    //27
    //461 - LG
    //10009 - Samsung
    //88 - Samsung orsay
    if (keycode == 8 || keycode == 27 || keycode == 461 || keycode == 10009 || keycode == 88) {
      e.preventDefault();
      if (window.god_enabled) Prisma.Noty.show('Keypad - [' + keycode + ']' + '[' + window.appready + '] run controller back');
      if (window.appready) Controller.back();
      return false;
    }
    //Exit orsay
    if (keycode == 45) {
      Orsay$1.exit();
    }
    //Кнопка pre-ch вызывает окно смены адреса в Loader
    //259 - Samsung orsay
    if (keycode == 259) {
      if (Orsay$1.isNewWidget()) {
        Orsay$1.changeLoaderUrl();
      }
    }
    e.preventDefault();
  }
  function init$S() {
    window.addEventListener("keydown", function (e) {
      lastdown = keyCode(e);
      if (!timer$7) {
        timer$7 = setTimeout(function () {
          if (isEnter(lastdown)) {
            longpress = true;
            listener$m.send('longdown', {});
            Controller["long"]();
          }
        }, 800);
      }
    });
    window.addEventListener("keyup", function (e) {
      clearTimeout(timer$7);
      time$2 = 0;
      timer$7 = null;
      listener$m.send('keyup', {
        code: keyCode(e),
        enabled: enabled$2,
        event: e
      });
      if (!longpress) {
        if (isEnter(keyCode(e)) && !e.defaultPrevented) {
          Sound$1.play('enter');
          Controller.enter();
        }
      } else longpress = false;
    });
    window.addEventListener("keydown", function (e) {
      if (canianimate$1) {
        var cannow = Date.now() - frame_time > 500;
        var presed = keydown;
        keydown = e;
        if (presed === false) {
          if (cannow) requestFrame$1();else requestAnimationFrame(requestFrame$1);
        }
      } else {
        keydownTrigger(e);
      }
    });
  }
  var Keypad = {
    listener: listener$m,
    init: init$S,
    enable: enable$1,
    disable: disable
  };

  var keydown_time = 0;
  var duble_click_time = 0;
  var move_time = 0;
  var touch = false;
  function init$R() {
    Keypad.listener.follow('keydown', function () {
      keydown_time = Date.now();
      move_time = 0;
    });
    $(window).on('mousemove', function (e) {
      move_time = Date.now();
    }).on('touchstart', function () {
      touch = true;
    });
    detect$9();
  }
  function showModal$1(text, onselect) {
    var controller = Controller.enabled().name;
    Modal.open({
      title: '',
      align: 'center',
      zIndex: 300,
      html: $('<div class="about">' + text + '</div>'),
      buttons: [{
        name: Lang.translate('settings_param_no'),
        onSelect: function onSelect() {
          Modal.close();
          Controller.toggle(controller);
        }
      }, {
        name: Lang.translate('settings_param_yes'),
        onSelect: onselect
      }],
      onBack: function onBack() {
        Modal.close();
        Controller.toggle(controller);
      }
    });
  }
  function detect$9() {
    var show_touch, show_mouse, show_remote;
    $(document).on('touchstart', function (e) {
      if ($('.modal').length || show_touch) return;
      if (!Storage.get('is_true_mobile', 'false') && Platform.screen('tv')) {
        show_touch = true;
        showModal$1(Lang.translate('input_detection_touch'), function () {
          Storage.set('is_true_mobile', 'true');
          window.location.reload();
        });
      }
    }).on('click', function (e) {
      if ($('.modal').length || show_mouse || !canClick(e.originalEvent)) return;
      if (Storage.field('navigation_type') !== 'mouse' && Platform.screen('tv')) {
        show_mouse = true;
        showModal$1(Lang.translate('input_detection_mouse'), function () {
          Storage.set('navigation_type', 'mouse');
          window.location.reload();
        });
      }
    });
    Keypad.listener.follow('keydown', function () {
      if ($('.modal').length || show_remote || document.activeElement.tagName == 'INPUT') return;
      if (Storage.get('is_true_mobile', 'false')) {
        show_remote = true;
        showModal$1(Lang.translate('input_detection_remote'), function () {
          Storage.set('is_true_mobile', 'false');
          window.location.reload();
        });
      }
    });
  }
  function canClick(e) {
    //Noty.show('pointerType: ' + e.pointerType + '; type: ' + e.type + '; isTrusted: ' + e.isTrusted)

    if (e && e.custom_trigger) return true;
    return Date.now() - keydown_time < 500 ? false : touch || Platform.is('browser') || Platform.tv() || Platform.desktop() || Date.now() - move_time < 500;
  }
  function noDubleClick(e) {
    if (Date.now() - duble_click_time < 500) {
      e.preventDefault();
      e.stopPropagation();
      return false;
    }
    duble_click_time = Date.now();
    return true;
  }
  var DeviceInput = {
    init: init$R,
    canClick: canClick,
    noDubleClick: noDubleClick
  };

  var html$l;
  var scroll$2;
  var active$6;
  var listener$l = start$8();
  function init$Q() {
    html$l = Template.get('selectbox');
    scroll$2 = new create$f({
      mask: true,
      over: true
    });
    html$l.find('.selectbox__body').append(scroll$2.render());
    html$l.find('.selectbox__layer').on('click', function (e) {
      if (DeviceInput.canClick(e.originalEvent)) Controller.back();
    });
    scroll$2.addSwipeDown(function () {
      html$l.addClass('animate-down');
      setTimeout(function () {
        Controller.back();
      }, 200);
    });
    $('body').append(html$l);
  }
  function bind$3() {
    scroll$2.clear();
    html$l.find('.selectbox__title').text(active$6.title);
    html$l.toggleClass('selectbox--fullsize', active$6.fullsize ? true : false);
    active$6.items.forEach(function (element) {
      if (element.hide) return;
      element.title = Utils$2.capitalizeFirstLetter(element.title || '');
      if (element.separator) {
        var _item = $('<div class="settings-param-title"><span>' + element.title + '</span></div>');
        return scroll$2.append(_item);
      }
      var item = Template.get(element.template || 'selectbox_item', element);
      if (!element.subtitle) item.find('.selectbox-item__subtitle').remove();
      if (element.checkbox) {
        item.addClass('selectbox-item--checkbox');
        item.append('<div class="selectbox-item__checkbox"></div>');
        if (element.checked) item.addClass('selectbox-item--checked');
      }
      if (element.ghost) item.css('opacity', 0.5);
      item.on('hover:focus', function (e) {
        scroll$2.update($(e.target), true);
        if (active$6.onFocus) active$6.onFocus(element, e.target);
      });
      if (!element.noenter) {
        var goclose = function goclose() {
          if (!active$6.nohide) hide$2();else {
            scroll$2.render().find('.selected').removeClass('selected');
            item.addClass('selected');
          }
          if (element.onSelect) element.onSelect(element, item);else if (active$6.onSelect) active$6.onSelect(element, item);
        };
        item.on('hover:enter', function () {
          if (element.checkbox) {
            element.checked = !element.checked;
            item.toggleClass('selectbox-item--checked', element.checked);
            if (element.onCheck) element.onCheck(element, item);else if (active$6.onCheck) active$6.onCheck(element, item);
          } else if (active$6.onBeforeClose) {
            if (active$6.onBeforeClose()) goclose();
          } else goclose();
        }).on('hover:long', function (e) {
          if (active$6.onLong) active$6.onLong(element, e.target);
        });
      }
      if (element.selected) item.addClass('selected');
      if (element.picked) item.addClass('picked');
      if (active$6.nomark) item.addClass('nomark');
      if (active$6.onDraw) active$6.onDraw(item, element);
      scroll$2.append(item);
    });
    if (active$6.onFullDraw) active$6.onFullDraw(scroll$2);
  }
  function show$9(object) {
    active$6 = object;
    listener$l.send('preshow', {
      active: active$6
    });
    bind$3();
    $('body').toggleClass('selectbox--open', true);
    html$l.find('.selectbox__body').addClass('layer--wheight').css('max-height', window.innerWidth <= 480 ? window.innerHeight * 0.6 : 'unset').data('mheight', html$l.find('.selectbox__head'));
    html$l.addClass('animate');
    Activity$1.mixState('select=open');
    listener$l.send('fullshow', {
      active: active$6,
      html: html$l
    });
    toggle$b();
  }
  function toggle$b() {
    Controller.add('select', {
      toggle: function toggle() {
        var selected = scroll$2.render().find('.selected');
        Controller.collectionSet(html$l);
        Controller.collectionFocus(selected.length ? selected[0] : false, html$l);
        listener$l.send('toggle', {
          active: active$6,
          html: html$l
        });
      },
      up: function up() {
        Navigator.move('up');
      },
      down: function down() {
        Navigator.move('down');
      },
      left: close$8,
      back: close$8
    });
    Controller.toggle('select');
  }
  function hide$2() {
    $('body').toggleClass('selectbox--open', false);
    html$l.removeClass('animate animate-down');
    listener$l.send('hide', {
      active: active$6
    });
  }
  function close$8() {
    hide$2();
    Activity$1.mixState();
    if (active$6.onBack) active$6.onBack();
    listener$l.send('close', {
      active: active$6
    });
  }
  function render$h() {
    return html$l;
  }
  var Select = {
    listener: listener$l,
    init: init$Q,
    show: show$9,
    hide: hide$2,
    close: close$8,
    render: render$h
  };

  var listener$k = start$8();
  var status$3 = {
    active: false,
    channel: false,
    select: false,
    program: false
  };
  var numpad = {
    timer: false,
    prev: ''
  };
  function init$P() {
    Keypad.listener.follow('keydown', function (e) {
      if (!playning()) return;
      PlayerPanel.rewind();

      //PG-
      if (e.code === 428 || e.code === 34 || e.code === 4 || e.code === 65) {
        prevChannel();
        playDelay();
      }

      //PG+
      if (e.code === 427 || e.code === 33 || e.code === 5 || e.code === 68) {
        nextChannel();
        playDelay();
      }
      var digid = 0;
      if (e.code >= 48 && e.code <= 57) digid = e.code - 48;else if (e.code >= 96 && e.code <= 105) digid = e.code - 96;
      if (digid) {
        clearTimeout(numpad.timer);
        numpad.prev += digid;
        toChannel(parseInt(numpad.prev));
        numpad.timer = setTimeout(function () {
          play$3();
          numpad.prev = '';
        }, 2000);
      }
    });
  }
  function start$7(object) {
    status$3.position_view = object.position;
    status$3.position_channel = object.position;
    status$3.active = object;
    status$3.channel = channel$1();
    listener$k.send('channel', {
      channel: status$3.channel,
      dir: 0,
      position: status$3.position_view
    });
    if (status$3.active.onPlay) status$3.active.onPlay(status$3.channel);
    listener$k.send('play', {
      channel: status$3.channel,
      position: status$3.position_view
    });
  }
  function playning() {
    return status$3.active;
  }
  function channel$1(position) {
    status$3.select = status$3.active.onGetChannel(position || status$3.position_view);
    return status$3.select;
  }
  function play$3() {
    if (status$3.select !== status$3.channel) {
      status$3.channel = status$3.select;
      status$3.position_channel = status$3.position_view;
      if (status$3.active.onPlay) status$3.active.onPlay(status$3.channel);
      listener$k.send('play', {
        channel: status$3.channel,
        position: status$3.position_view
      });
    }
  }
  function playDelay() {
    clearTimeout(status$3.timer);
    status$3.timer = setTimeout(play$3, 2000);
  }
  function reset() {
    status$3.position_view = status$3.position_channel;
    moveChannel(0);
  }
  function programReady(data) {
    setTimeout(function () {
      if (status$3.select == data.channel) {
        status$3.program = data;
        status$3.position_program = data.position;
        listener$k.send('draw-program', {
          dir: 0
        });
      }
    }, 10);
  }
  function select$2() {
    return status$3.select;
  }
  function moveChannel(dir) {
    channel$1(status$3.position_view);
    listener$k.send('channel', {
      channel: status$3.select,
      dir: dir,
      position: status$3.position_view
    });
  }
  function nextChannel() {
    if (status$3.position_view + 1 < status$3.active.total) {
      status$3.position_view++;
      moveChannel(1);
    }
  }
  function prevChannel() {
    if (status$3.position_view - 1 >= 0) {
      status$3.position_view--;
      moveChannel(-1);
    }
  }
  function toChannel(num) {
    num = Math.max(1, num);
    if (num <= status$3.active.total) {
      status$3.position_view = num - 1;
      moveChannel(1);
    }
  }
  function redrawChannel() {
    moveChannel(0);
  }
  function moveProgram(dir) {
    if (status$3.program) {
      status$3.position_program += dir;
      status$3.position_program = Math.max(0, Math.min(status$3.program.total, status$3.position_program));
      listener$k.send('draw-program', {
        dir: dir
      });
    }
  }
  function nextProgram() {
    moveProgram(1);
  }
  function prevProgram() {
    moveProgram(-1);
  }
  function drawProgram(container) {
    status$3.active.onGetProgram(status$3.select, status$3.position_program, container);
  }
  function playlistProgram() {
    if (status$3.active.onPlaylistProgram) status$3.active.onPlaylistProgram(status$3.select, status$3.position_program);
  }
  function openMenu() {
    if (status$3.active.onMenu) status$3.active.onMenu(status$3.select, status$3.position_program);else if (status$3.active.onPlaylistProgram) status$3.active.onPlaylistProgram(status$3.select, status$3.position_program);
  }
  function destroy$a() {
    clearTimeout(status$3.timer);
    clearTimeout(numpad.timer);
    status$3 = {
      active: false,
      channel: false,
      select: false,
      program: false
    };
  }
  var PlayerIPTV = {
    listener: listener$k,
    init: init$P,
    start: start$7,
    playning: playning,
    channel: channel$1,
    programReady: programReady,
    reset: reset,
    play: play$3,
    select: select$2,
    nextChannel: nextChannel,
    prevChannel: prevChannel,
    prevProgram: prevProgram,
    nextProgram: nextProgram,
    drawProgram: drawProgram,
    playlistProgram: playlistProgram,
    openMenu: openMenu,
    redrawChannel: redrawChannel,
    destroy: destroy$a
  };

  // import Footer from './footer'

  var html$k;
  var listener$j = start$8();
  var state;
  var elems$1;
  var panel_visible = false;
  var timeline_last = {
    position: 0,
    peding: 0
  };
  var condition = {};
  var timer$6 = {};
  var tracks = [];
  var subs = [];
  var flows = false;
  var qualitys = false;
  var translates = {};
  var last_settings_action;
  var last_panel_focus;
  function init$O() {
    html$k = Template.get('player_panel');
    elems$1 = {
      peding: $('.player-panel__peding', html$k),
      position: $('.player-panel__position', html$k),
      time: $('.player-panel__time', html$k),
      timenow: $('.player-panel__timenow', html$k),
      timeend: $('.player-panel__timeend', html$k),
      title: $('.player-panel__filename', html$k),
      tracks: $('.player-panel__tracks', html$k),
      subs: $('.player-panel__subs', html$k),
      timeline: $('.player-panel__timeline', html$k),
      quality: $('.player-panel__quality', html$k),
      episode: $('.player-panel__next-episode-name', html$k),
      flow: $('.player-panel__flow', html$k),
      rewind_touch: $('.player-panel__time-touch-zone', html$k),
      iptv_channel: $('.player-panel-iptv__channel', html$k)
      // iptv_position: $('.player-panel-iptv__position',html),
      // iptv_arrow_up: $('.player-panel-iptv__arrow-up',html),
      // iptv_arrow_down: $('.player-panel-iptv__arrow-down',html),
    };

    /**
     * Отсеживаем состояние, 
     * когда надо показать панель, а когда нет
     */
    state = new create$q({
      state: 'start',
      transitions: {
        start: function start() {
          clearTimeout(timer$6.hide);
          clearTimeout(timer$6.rewind);
          this.dispath('canplay');
        },
        canplay: function canplay() {
          if (condition.canplay) this.dispath('visible');else _visible(true);
        },
        visible: function visible() {
          if (condition.visible) _visible(true);else this.dispath('rewind');
        },
        rewind: function rewind() {
          var _this = this;
          clearTimeout(timer$6.rewind);
          if (condition.rewind) {
            _visible(true);
            timer$6.rewind = setTimeout(function () {
              condition.rewind = false;
              _this.dispath('mousemove');
            }, 1000);
          } else {
            this.dispath('mousemove');
          }
        },
        mousemove: function mousemove() {
          if (condition.mousemove) {
            _visible(true);
          }
          this.dispath('hide');
        },
        hide: function hide() {
          clearTimeout(timer$6.hide);
          timer$6.hide = setTimeout(function () {
            if (PlayerIPTV.playning()) {
              PlayerIPTV.reset();
              Controller.toggle('player');
            } else if (!PlayerVideo.video().paused) _visible(false);
          }, PlayerIPTV.playning() ? 5000 : 3000);
        }
      }
    });
    html$k.find('.selector').on('hover:focus', function (e) {
    });
    html$k.find('.player-panel__playpause').on('hover:enter', function (e) {
      listener$j.send('playpause', {});
    });
    html$k.find('.player-panel__next').on('hover:enter', function (e) {
      listener$j.send('next', {});
    });
    html$k.find('.player-panel__prev').on('hover:enter', function (e) {
      listener$j.send('prev', {});
    });
    html$k.find('.player-panel__rprev').on('hover:enter', function (e) {
      listener$j.send('rprev', {});
    });
    html$k.find('.player-panel__rnext').on('hover:enter', function (e) {
      listener$j.send('rnext', {});
    });
    html$k.find('.player-panel__playlist').on('hover:enter', function (e) {
      listener$j.send('playlist', {});
    });
    html$k.find('.player-panel__tstart').on('hover:enter', function (e) {
      listener$j.send('to_start', {});
    });
    html$k.find('.player-panel__tend').on('hover:enter', function (e) {
      listener$j.send('to_end', {});
    });
    html$k.find('.player-panel__fullscreen').on('hover:enter', function (e) {
      listener$j.send('fullscreen', {});
    });
    html$k.find('.player-panel__settings').on('hover:enter', settings);
    html$k.find('.player-panel__pip,.player-panel__volume').toggleClass('hide', !Boolean(Platform.is('nw') || Platform.is('browser') || Platform.is('apple') && !Utils$2.isPWA()));
    html$k.find('.player-panel__pip').on('hover:enter', function () {
      listener$j.send('pip', {});
    });
    elems$1.timeline.attr('data-controller', 'player_rewind');
    elems$1.rewind_touch.toggleClass('hide', !Platform.screen('mobile'));
    elems$1.timeline.on('mousemove', function (e) {
      if (!Platform.screen('mobile')) listener$j.send('mouse_rewind', {
        method: 'move',
        time: elems$1.time,
        percent: percent(e)
      });
    }).on('mouseout', function () {
      if (!Platform.screen('mobile')) elems$1.time.addClass('hide');
    }).on('click', function (e) {
      if (DeviceInput.canClick(e.originalEvent) && !Platform.screen('mobile')) listener$j.send('mouse_rewind', {
        method: 'click',
        time: elems$1.time,
        percent: percent(e)
      });
    });
    if (!html$k.find('.player-panel__volume').hasClass('hide')) {
      html$k.find('.player-panel__volume-range').val(Storage.get('player_volume', '1')).on('input', function () {
        listener$j.send('change_volume', {
          volume: $(this).val()
        });
        PlayerVideo.changeVolume($(this).val());
      });
    }
    var touch;
    var _touchEnd = function touchEnd(e) {
      window.removeEventListener('touchend', _touchEnd);
      PlayerVideo.video().rewind = false;
      listener$j.send('mouse_rewind', {
        method: 'click',
        time: elems$1.time,
        percent: touch.to / 100
      });
      touch = false;
    };
    elems$1.rewind_touch.on('touchstart', function (e) {
      var point = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];
      touch = {
        now: percent({
          clientX: elems$1.position.width()
        }) * 100,
        from: percent(point) * 100
      };
      touch.move = touch.from;
      touch.to = touch.from;
      window.addEventListener('touchend', _touchEnd);
    }).on('touchmove', function (e) {
      var point = e.originalEvent.touches[0] || e.originalEvent.changedTouches[0];
      if (touch) {
        touch.move = percent(point) * 100;
        touch.to = Math.max(0, Math.min(100, touch.now + (touch.move - touch.from)));
        elems$1.position.width(touch.to + '%');
        PlayerVideo.video().rewind = true;
        rewind$1();
      }
    });
    html$k.find('.player-panel__line:eq(1) .selector').attr('data-controller', 'player_panel');
    html$k.find('.player-panel__left .selector,.player-panel__center .selector,.player-panel__right .selector').on('hover:focus', function () {
      last_panel_focus = $(this)[0];
    });

    /**
      * Выбор потока
      */
    elems$1.flow.on('hover:enter', function () {
      if (flows) {
        var enabled = Controller.enabled().name;
        Select.show({
          title: Lang.translate('player_flow'),
          items: flows,
          onSelect: function onSelect(a) {
            flows.forEach(function (element) {
              element.enabled = false;
              element.selected = false;
            });
            a.enabled = true;
            a.selected = true;
            Controller.toggle(enabled);
            listener$j.send('flow', {
              url: a.url
            });
          },
          onBack: function onBack() {
            Controller.toggle(enabled);
          }
        });
      }
    });

    /**
     * Выбор качества
     */
    elems$1.quality.text('auto').on('hover:enter', function () {
      if (qualitys) {
        var qs = [];
        var nw = elems$1.quality.text();
        if (Arrays.isArray(qualitys)) {
          qs = qualitys;
        } else {
          for (var i in qualitys) {
            var qa = qualitys[i];
            var qu = _typeof(qa) == 'object' ? qa.url : typeof qa == 'string' ? qa : '';
            var lb = _typeof(qa) == 'object' ? qa.label : '';
            qs.push({
              quality: i,
              title: i + (lb ? '<sub>' + lb + '</sub>' : ''),
              url: qu,
              selected: nw == Utils$2.qualityToText(i),
              call: _typeof(qa) == 'object' ? qa.call : false,
              instance: qa
            });
          }
        }
        if (!qs.length) return;
        var enabled = Controller.enabled().name;
        Select.show({
          title: Lang.translate('player_quality'),
          items: qs,
          onSelect: function onSelect(a) {
            if (a.call) {
              Controller.toggle(enabled);
              a.call(a.instance, function (url) {
                elems$1.quality.text(Utils$2.qualityToText(a.quality));
                qs.forEach(function (q) {
                  return q.selected = false;
                });
                a.selected = true;
                listener$j.send('quality', {
                  name: a.quality,
                  url: url
                });
                if (a.instance && a.instance.trigger) a.instance.trigger();
              });
            } else {
              elems$1.quality.text(Utils$2.qualityToText(a.quality));
              qs.forEach(function (q) {
                return q.selected = false;
              });
              a.enabled = true;
              a.selected = true;
              if (!Arrays.isArray(qualitys) || a.change_quality) listener$j.send('quality', {
                name: a.quality,
                url: a.url
              });
              if (a.instance && a.instance.trigger) a.instance.trigger();
              Controller.toggle(enabled);
            }
          },
          onBack: function onBack() {
            Controller.toggle(enabled);
          }
        });
      }
    });

    /**
     * Выбор аудиодорожки
     */
    elems$1.tracks.on('hover:enter', function (e) {
      if (tracks.length) {
        tracks.forEach(function (element, p) {
          var name = [];
          var from = translates.tracks && Arrays.isArray(translates.tracks) && translates.tracks[p] ? translates.tracks[p] : element;
          name.push(p + 1);
          name.push(normalName(from.language || from.name || Lang.translate('player_unknown')));
          if (from.label) name.push(normalName(from.label));
          if (from.extra) {
            if (from.extra.channels) name.push(from.extra.channels + ' Ch');
            if (from.extra.fourCC) name.push(from.extra.fourCC);
          }
          element.title = name.join(' / ');
        });
        var enabled = Controller.enabled();
        Select.show({
          title: Lang.translate('player_tracks'),
          items: tracks,
          onSelect: function onSelect(a) {
            tracks.forEach(function (element) {
              element.enabled = false;
              element.selected = false;
            });
            a.enabled = true;
            a.selected = true;
            Controller.toggle(enabled.name);
          },
          onBack: function onBack() {
            Controller.toggle(enabled.name);
          }
        });
      }
    });

    /**
     * Выбор субтитров
     */
    elems$1.subs.on('hover:enter', function (e) {
      if (subs.length) {
        if (subs[0].index !== -1) {
          var any_select = subs.find(function (s) {
            return s.selected;
          });
          Arrays.insert(subs, 0, {
            title: Lang.translate('player_disabled'),
            selected: any_select ? false : true,
            index: -1
          });
        }
        subs.forEach(function (element, p) {
          if (element.index !== -1) {
            var track_num = element.extra && element.extra.track_num ? parseInt(element.extra.track_num) : element.index;
            var from = translates.subs && Arrays.isArray(translates.subs) && translates.subs[track_num] ? translates.subs[track_num] : element;
            element.title = p + ' / ' + normalName(from.language && from.label ? from.language + ' / ' + from.label : from.language || from.label || Lang.translate('player_unknown'));
          }
        });
        var enabled = Controller.enabled();
        Select.show({
          title: Lang.translate('player_subs'),
          items: subs,
          onSelect: function onSelect(a) {
            subs.forEach(function (element) {
              element.mode = 'disabled';
              element.selected = false;
            });
            a.mode = 'showing';
            a.selected = true;
            listener$j.send('subsview', {
              status: a.index > -1
            });
            Controller.toggle(enabled.name);
          },
          onBack: function onBack() {
            Controller.toggle(enabled.name);
          }
        });
      }
    });
    PlayerIPTV.listener.follow('channel', channel);
    PlayerIPTV.listener.follow('draw-program', program);

    // Footer.listener.follow('open',()=>{
    //     html.addClass('panel--footer-open')
    // })

    // Footer.listener.follow('close',()=>{
    //     html.removeClass('panel--footer-open')

    //     Controller.toggle('player_panel')
    // })
  }
  function hideRewind() {
    html$k.addClass('panel--norewind');
  }
  function showParams() {
    var enabled = Controller.enabled().name;
    var items = [];
    items.push({
      title: Lang.translate('player_tracks'),
      trigger: elems$1.tracks,
      ghost: elems$1.tracks.hasClass('hide'),
      noenter: elems$1.tracks.hasClass('hide')
    });
    items.push({
      title: Lang.translate('player_subs'),
      trigger: elems$1.subs,
      ghost: elems$1.subs.hasClass('hide'),
      noenter: elems$1.subs.hasClass('hide')
    });
    items.push({
      title: Lang.translate('player_quality'),
      trigger: elems$1.quality,
      ghost: !qualitys,
      noenter: !qualitys
    });
    items.push({
      title: Lang.translate('settings_main_rest'),
      trigger: html$k.find('.player-panel__settings')
    });
    Select.show({
      title: Lang.translate('title_settings'),
      items: items,
      onSelect: function onSelect(a) {
        Controller.toggle(enabled);
        a.trigger.trigger('hover:enter');
      },
      onBack: function onBack() {
        Controller.toggle(enabled);
      }
    });
  }
  function program(data) {
    if (elems$1.iptv_channel_active) {
      var prog = elems$1.iptv_channel_active.find('.player-panel-iptv-item__prog');
      PlayerIPTV.drawProgram(prog);
      playAnimation(prog, data.dir > 0 ? 'endless-left' : 'endless-right');
    }
  }
  function playAnimation(elem, anim) {
    elem.css('animation', 'none');
    elem[0].offsetHeight;
    elem.css('animation', (anim || 'pulse') + ' 0.2s ease');
  }
  function channel(data) {
    var select = PlayerIPTV.select();
    elems$1.iptv_channel.removeClass('up down');
    var active = elems$1.iptv_channel.find('.active');
    elems$1.iptv_channel.find('> div:not(.active)').remove();
    var new_item = $("\n        <div class=\"player-panel-iptv-item active\">\n            <div class=\"player-panel-iptv-item__body\">\n                <div class=\"player-panel-iptv-item__group\">".concat(select.group, "</div>\n                <div class=\"player-panel-iptv-item__name\">").concat(select.name, "</div>\n                <div class=\"player-panel-iptv-item__prog\">\n                    <div class=\"player-panel-iptv-item__prog-load\">").concat(Lang.translate('loading'), "...</div>\n                </div>\n            </div>\n        </div>\n    "));
    new_item.css({
      '-webkit-transform': 'translate3d(0,' + (data.dir > 0 ? '100%' : '-100%') + ',0)'
    });
    elems$1.iptv_channel.append(new_item);
    elems$1.iptv_channel_active = new_item;
    setTimeout(function () {
      new_item.css({
        '-webkit-transform': 'translate3d(0,0,0)',
        opacity: 1
      });
      if (active.length) active.removeClass('active').css({
        '-webkit-transform': 'translate3d(0,' + (data.dir > 0 ? '-100%' : '100%') + ',0)',
        opacity: 0
      });
    }, 10);
  }
  function settings() {
    var speed = Storage.get('player_speed', 'default');
    var items = [{
      title: Lang.translate('player_video_size'),
      subtitle: Lang.translate('player_size_' + Storage.get('player_size', 'default') + '_title'),
      method: 'size'
    }, {
      title: Lang.translate('player_video_speed'),
      subtitle: speed == 'default' ? Lang.translate('player_speed_default_title') : speed,
      method: 'speed'
    }
    // Так как все ссылки через прокси идут или зашифрованы. Нет пока смысла в этом...
    // {
    //     title: Lang.translate('player_share_title'),
    //     subtitle: Lang.translate('player_share_descr'),
    //     method: 'share'
    // }
    ];
    if (Storage.field('player_normalization')) {
      items.push({
        title: Lang.translate('player_normalization'),
        separator: true
      });
      items.push({
        title: Lang.translate('player_normalization_power_title'),
        subtitle: Lang.translate('player_normalization_step_' + Storage.get('player_normalization_power', 'hight')),
        method: 'normalization_power'
      });
      items.push({
        title: Lang.translate('player_normalization_smooth_title'),
        subtitle: Lang.translate('player_normalization_step_' + Storage.get('player_normalization_smooth', 'medium')),
        method: 'normalization_smooth'
      });
      items.push({
        title: Lang.translate('player_normalization_type_title'),
        subtitle: Lang.translate('player_normalization_type_' + Storage.get('player_normalization_type', 'all')),
        method: 'normalization_type'
      });
    }
    if (last_settings_action) {
      items.find(function (a) {
        return a.method == last_settings_action;
      }).selected = true;
    }
    Select.show({
      title: Lang.translate('title_settings'),
      items: items,
      nomark: true,
      onSelect: function onSelect(a) {
        last_settings_action = a.method;
        if (a.method == 'size') selectSize();
        if (a.method == 'speed') selectSpeed();
        if (a.method == 'normalization_power') selectNormalizationStep('power', 'hight');
        if (a.method == 'normalization_smooth') selectNormalizationStep('smooth', 'medium');
        if (a.method == 'normalization_type') selectNormalizationType();
        if (a.method == 'share') {
          Controller.toggle(Platform.screen('mobile') ? 'player' : 'player_panel');
          listener$j.send('share', {});
        }
      },
      onBack: function onBack() {
        Controller.toggle(Platform.screen('mobile') ? 'player' : 'player_panel');
      }
    });
  }
  function selectNormalizationType() {
    var select = Storage.get('player_normalization_type', 'all');
    var items = [{
      title: Lang.translate('player_normalization_type_all'),
      value: 'all',
      selected: select == 'all'
    }, {
      title: Lang.translate('player_normalization_type_up'),
      value: 'up',
      selected: select == 'up'
    }, {
      title: Lang.translate('player_normalization_type_down'),
      value: 'down',
      selected: select == 'down'
    }];
    Select.show({
      title: Lang.translate('player_normalization_type_title'),
      items: items,
      nohide: true,
      onBack: settings,
      onSelect: function onSelect(a) {
        Storage.set('player_normalization_type', a.value);
        settings();
      }
    });
  }
  function selectNormalizationStep(type, def) {
    var select = Storage.get('player_normalization_' + type, def);
    var items = [{
      title: Lang.translate('player_normalization_step_none'),
      value: 'none',
      selected: select == 'none'
    }, {
      title: Lang.translate('player_normalization_step_low'),
      value: 'low',
      selected: select == 'low'
    }, {
      title: Lang.translate('player_normalization_step_medium'),
      value: 'medium',
      selected: select == 'medium'
    }, {
      title: Lang.translate('player_normalization_step_hight'),
      value: 'hight',
      selected: select == 'hight'
    }];
    Select.show({
      title: Lang.translate('player_normalization_' + type + '_title'),
      items: items,
      nohide: true,
      onBack: settings,
      onSelect: function onSelect(a) {
        Storage.set('player_normalization_' + type, a.value);
        settings();
      }
    });
  }

  /**
   * Выбор масштаба видео
   */
  function selectSize() {
    var select = Storage.get('player_size', 'default');
    var items = [{
      title: Lang.translate('player_size_default_title'),
      subtitle: Lang.translate('player_size_default_descr'),
      value: 'default',
      selected: select == 'default'
    }, {
      title: Lang.translate('player_size_cover_title'),
      subtitle: Lang.translate('player_size_cover_descr'),
      value: 'cover',
      selected: select == 'cover'
    }];
    if (Platform.is('orsay') && Storage.field('player') == 'orsay') {
      items.splice(1, 1);
    }
    if (!(Platform.is('tizen') && Storage.field('player') == 'tizen')) {
      items = items.concat([{
        title: Lang.translate('player_size_fill_title'),
        subtitle: Lang.translate('player_size_fill_descr'),
        value: 'fill',
        selected: select == 'fill'
      }, {
        title: Lang.translate('player_size_s115_title'),
        subtitle: Lang.translate('player_size_s115_descr'),
        value: 's115',
        selected: select == 's115'
      }, {
        title: Lang.translate('player_size_s130_title'),
        subtitle: Lang.translate('player_size_s130_descr'),
        value: 's130',
        selected: select == 's130'
      }, {
        title: Lang.translate('player_size_v115_title'),
        subtitle: Lang.translate('player_size_v115_descr'),
        value: 'v115',
        selected: select == 'v115'
      }, {
        title: Lang.translate('player_size_v130_title'),
        subtitle: Lang.translate('player_size_v130_descr'),
        value: 'v130',
        selected: select == 'v130'
      }]);
    } else {
      if (select == 's130' || select == 'fill') {
        items[0].selected = true;
      }
    }
    Select.show({
      title: Lang.translate('player_video_size'),
      items: items,
      nohide: true,
      onSelect: function onSelect(a) {
        listener$j.send('size', {
          size: a.value
        });
      },
      onBack: settings
    });
  }
  function selectSpeed() {
    var select = Storage.get('player_speed', 'default');
    var items = [{
      title: '0.25',
      value: '0.25'
    }, {
      title: '0.50',
      value: '0.50'
    }, {
      title: '0.75',
      value: '0.75'
    }, {
      title: Lang.translate('player_speed_default_title'),
      value: 'default'
    }, {
      title: '1.25',
      value: '1.25'
    }, {
      title: '1.50',
      value: '1.50'
    }, {
      title: '1.75',
      value: '1.75'
    }, {
      title: '2',
      value: '2'
    }];
    if (Platform.is('tizen') && Storage.field('player') == 'tizen' || Platform.is('orsay') && Storage.field('player') == 'orsay') {
      items = [{
        title: Lang.translate('player_speed_default_title'),
        value: 'default',
        selected: select == 'default'
      }, {
        title: '2',
        subtitle: Platform.is('orsay') && Storage.field('player') == 'orsay' ? Lang.translate('player_speed_two_descr') : '',
        value: '2'
      }];
    }
    var any;
    items.forEach(function (e) {
      if (e.value == select) {
        any = true;
        e.selected = true;
      }
    });
    if (!any) {
      Storage.set('player_speed', 'default');
      if (items.length == 3) items[0].selected = true;else items[3].selected = true;
    }
    Select.show({
      title: Lang.translate('player_video_speed'),
      items: items,
      nohide: true,
      onSelect: function onSelect(a) {
        Storage.set('player_speed', a.value);
        listener$j.send('speed', {
          speed: a.value
        });
        settings();
      },
      onBack: settings
    });
  }
  function isTV() {
    return $('body > .player').hasClass('tv');
  }
  function normalName(name) {
    return name.replace(/^[0-9]+(\.)?([\t ]+)?/, '').replace(/\s#[0-9]+/, '');
  }

  /**
   * Добавить контроллеры
   */
  function addController() {
    Controller.add('player_tv', {
      invisible: true,
      toggle: function toggle() {
        Controller.clear();
        condition.visible = false;
        state.start();
      },
      up: function up() {
        PlayerIPTV.prevChannel();
        state.start();
      },
      down: function down() {
        PlayerIPTV.nextChannel();
        state.start();
      },
      left: function left() {
        condition.visible = true;
        PlayerIPTV.openMenu();
        state.start();
      },
      right: function right() {
        condition.visible = true;
        showParams();
        state.start();
      },
      enter: function enter() {
        PlayerIPTV.play();
        state.start();
      },
      back: function back() {
        PlayerIPTV.reset();
        Controller.toggle('player');
        hide$1();
      }
    });
    Controller.add('player_rewind', {
      toggle: function toggle() {
        Controller.collectionSet(render$g());
        Controller.collectionFocus(false, render$g());
      },
      up: function up() {
        Controller.toggle('player');
      },
      down: function down() {
        toggleButtons();
      },
      right: function right() {
        listener$j.send('rnext', {});
      },
      left: function left() {
        listener$j.send('rprev', {});
      },
      gone: function gone() {
        html$k.find('.selector').removeClass('focus');
      },
      back: function back() {
        Controller.toggle('player');
        hide$1();
      }
    });
    Controller.add('player_panel', {
      toggle: function toggle() {
        if (PlayerIPTV.playning()) Controller.toggle('player_tv');else {
          Controller.collectionSet(render$g());
          Controller.collectionFocus(last_panel_focus ? last_panel_focus : $(isTV() ? '.player-panel__next' : '.player-panel__playpause', html$k)[0], render$g());
        }
      },
      up: function up() {
        isTV() || html$k.hasClass('panel--norewind') ? Controller.toggle('player') : toggleRewind();
      },
      right: function right() {
        Navigator.move('right');
      },
      left: function left() {
        Navigator.move('left');
      },
      down: function down() {
        listener$j.send('playlist', {});
      },
      gone: function gone() {
        html$k.find('.selector').removeClass('focus');
      },
      back: function back() {
        Controller.toggle('player');
        hide$1();
      }
    });
  }

  /**
   * Рассчитать проценты
   * @param {object} e 
   * @returns {number}
   */
  function percent(e) {
    var offset = elems$1.timeline.offset();
    var width = elems$1.timeline.width();
    return (e.clientX - offset.left) / width;
  }

  /**
   * Обновляем состояние панели
   * @param {string} need - что нужно обновить
   * @param {string|number} value - значение
   */
  function update$b(need, value) {
    if (need == 'position') {
      timeline_last.position = value;
      if (panel_visible) elems$1.position.css({
        width: value
      });
    }
    if (need == 'peding') {
      timeline_last.peding = value;
      if (panel_visible) elems$1.peding.css({
        width: value
      });
    }
    if (need == 'timeend') {
      elems$1.timeend.text('/ ' + value);
    }
    if (need == 'timenow') {
      elems$1.timenow.text(value);
    }
    if (need == 'play') {
      html$k.toggleClass('panel--paused', false);
    }
    if (need == 'pause') {
      html$k.toggleClass('panel--paused', true);
    }
  }

  /**
   * Показать или скрыть панель
   * @param {boolean} status 
   */
  function _visible(status) {
    listener$j.send('visible', {
      status: status
    });
    html$k.toggleClass('panel--visible', status);
    panel_visible = status;
    elems$1.position.css({
      width: timeline_last.position
    });
    elems$1.peding.css({
      width: timeline_last.peding
    });
  }

  /**
   * Можем играть, далее отслеживаем статус
   */
  function canplay() {
    condition.canplay = true;
    state.start();
  }

  /**
   * Перемотка
   */
  function rewind$1() {
    condition.rewind = true;
    state.start();
  }

  /**
   * Переключить на контроллер перемотки
   */
  function toggleRewind() {
    Controller.toggle(isTV() || html$k.hasClass('panel--norewind') ? 'player_panel' : 'player_rewind');
  }

  /**
   * Переключить на контроллер кнопки
   */
  function toggleButtons() {
    if (!Platform.screen('mobile')) Controller.toggle('player_panel');
  }

  /**
   * Контроллер
   */
  function toggle$a() {
    condition.visible = true;
    state.start();
    if (PlayerIPTV.playning()) Controller.toggle('player_tv');else if (!Platform.screen('mobile')) toggleRewind();
  }

  /**
   * Показать панель
   */
  function show$8() {
    state.start();
    html$k.find('.player-panel__fullscreen').toggleClass('hide', Platform.tv() || Platform.is('android') || !Utils$2.canFullScreen());
    addController();
  }

  /**
   * Если двигали мышку
   */
  function mousemove() {
    condition.mousemove = true;
    state.start();
  }

  /**
   * Скрыть панель
   */
  function hide$1() {
    condition.visible = false;
    _visible(false);
  }
  function visibleStatus() {
    return html$k.hasClass('panel--visible');
  }

  /**
   * Установить субтитры
   * @param {[{index:integer, language:string, label:string}]} su 
   */
  function setSubs(su) {
    subs = su;
    elems$1.subs.toggleClass('hide', false);
  }

  /**
   * Установить дорожки
   * @param {[{index:integer, language:string, label:string}]} tr 
   */
  function setTracks(tr) {
    tracks = tr;
    elems$1.tracks.toggleClass('hide', false);
  }

  /**
   * Устанавливает качество из M3U8
   * @param {[{title:string, url:string}]} levels 
   * @param {string} current 
   */
  function setLevels(levels, current) {
    if (qualitys && Object.keys(qualitys).length) return;
    qualitys = levels;
    elems$1.quality.text(Utils$2.qualityToText(current));
  }

  /**
   * Показать текущие качество и записать в переменную для показа в панели
   * @param {{"1080p":"url", "720p":"url"}} qs список качеств
   * @param {string} url текущее качество url
   */
  function quality$1(qs, url) {
    if (qs) {
      elems$1.quality.toggleClass('hide', false);
      qualitys = qs;
      for (var i in qs) {
        var qa = qs[i];
        var qu = _typeof(qa) == 'object' ? qa.url : typeof qa == 'string' ? qa : '';
        if (qu == url) {
          elems$1.quality.text(Utils$2.qualityToText(i));
          break;
        }
      }
    }
  }

  /**
   * Показать название следующего эпизода 
   * @param {{position:integer, playlist:[{title:string, url:string}]}} e 
   */
  function showNextEpisodeName(e) {
    if (e.playlist[e.position + 1]) {
      elems$1.episode.text(e.playlist[e.position + 1].title).toggleClass('hide', false);
    } else elems$1.episode.toggleClass('hide', true);
  }

  /**
   * Установить перевод для дорожек и сабов
   * @param {{subs:[],tracks:[]}} data 
   */
  function setTranslate(data) {
    if (_typeof(data) == 'object') translates = data;
  }
  function updateTranslate(where, data) {
    if (!translates[where]) translates[where] = data;
  }
  function setFlows(data) {
    flows = _typeof(data) == 'object' ? data : false;
    elems$1.flow.toggleClass('hide', flows ? false : true);
  }

  /**
   * Уничтожить
   */
  function destroy$9() {
    condition = {};
    tracks = [];
    subs = [];
    qualitys = false;
    flows = false;
    translates = {};
    timeline_last.position = 0;
    timeline_last.peding = 0;
    last_panel_focus = false;
    panel_visible = false;
    elems$1.peding.css({
      width: 0
    });
    elems$1.position.css({
      width: 0
    });
    elems$1.time.text('00:00');
    elems$1.timenow.text('00:00');
    elems$1.timeend.text('00:00');
    elems$1.quality.text('auto');
    elems$1.subs.toggleClass('hide', true);
    elems$1.tracks.toggleClass('hide', true);
    elems$1.episode.toggleClass('hide', true);
    elems$1.flow.toggleClass('hide', true);
    html$k.toggleClass('panel--paused', false);
    html$k.toggleClass('panel--norewind', false);
  }

  /**
   * Получить html
   * @returns {object}
   */
  function render$g() {
    return html$k;
  }
  var PlayerPanel = {
    init: init$O,
    listener: listener$j,
    render: render$g,
    toggle: toggle$a,
    show: show$8,
    destroy: destroy$9,
    hide: hide$1,
    canplay: canplay,
    update: update$b,
    rewind: rewind$1,
    setTracks: setTracks,
    setSubs: setSubs,
    setLevels: setLevels,
    mousemove: mousemove,
    quality: quality$1,
    showNextEpisodeName: showNextEpisodeName,
    setTranslate: setTranslate,
    updateTranslate: updateTranslate,
    visible: _visible,
    visibleStatus: visibleStatus,
    showParams: showParams,
    hideRewind: hideRewind,
    setFlows: setFlows
  };

  var subparams;
  var listener$i = function listener(e) {
    if (e.code == 405) getWebosmediaId(setSubtitleColor);
    if (e.code == 406) getWebosmediaId(setSubtitleBackgroundColor);
    if (e.code == 403) getWebosmediaId(setSubtitleFontSize);
    if (e.code == 404) getWebosmediaId(setSubtitlePosition);
    if (e.code == 55) getWebosmediaId(setSubtitleBackgroundOpacity);
    if (e.code == 57) getWebosmediaId(setSubtitleCharacterOpacity);
  };
  Keypad.listener.follow('keydown', listener$i);
  function luna$1(params, call, fail) {
    if (call) params.onSuccess = call;
    params.onFailure = function (result) {
      console.log('WebOS', params.method + " [fail][" + result.errorCode + "] " + result.errorText);
      if (fail) fail();
    };
    webOS.service.request("luna://com.webos.media", params);
  }
  function initStorage() {
    if (!subparams) {
      subparams = Storage.get('webos_subs_params', '{}');
      Arrays.extend(subparams, {
        color: 2,
        font_size: 1,
        bg_color: 'black',
        position: -1,
        bg_opacity: 0,
        char_opacity: 255
      });
    }
  }
  function subCallParams(mediaId, method, func_params) {
    var parameters = {
      mediaId: mediaId
    };
    Arrays.extend(parameters, func_params);
    luna$1({
      parameters: parameters,
      method: method
    });
    Storage.set('webos_subs_params', subparams);
  }
  function getWebosmediaId(func) {
    var video = document.querySelector('video');
    if (video && video.mediaId) {
      initStorage();
      setTimeout(function () {
        subCallParams(video.mediaId, func.name, func());
      }, 300);
    }
  }
  function setSubtitleColor() {
    subparams.color++;
    if (subparams.color == 6) subparams.color = 0;
    return {
      color: subparams.color
    };
  }
  function setSubtitleBackgroundColor() {
    var bgcolors = ['black', 'white', 'yellow', 'red', 'green', 'blue'];
    var ixcolors = bgcolors.indexOf(subparams.bg_color);
    ixcolors++;
    if (ixcolors == -1) ixcolors = 0;
    subparams.bg_color = bgcolors[ixcolors];
    return {
      bgColor: subparams.bg_color
    };
  }
  function setSubtitleFontSize() {
    subparams.font_size++;
    if (subparams.font_size == 5) subparams.font_size = 0;
    return {
      fontSize: subparams.font_size
    };
  }
  function setSubtitlePosition() {
    subparams.position++;
    if (subparams.position == 5) subparams.position = -3;
    return {
      position: subparams.position
    };
  }
  function setSubtitleBackgroundOpacity() {
    subparams.bg_opacity += 15;
    if (subparams.bg_opacity > 255) subparams.bg_opacity = 0;
    return {
      bgOpacity: subparams.bg_opacity
    };
  }
  function setSubtitleCharacterOpacity() {
    subparams.char_opacity += 15;
    if (subparams.char_opacity > 255) subparams.char_opacity = 45;
    return {
      charOpacity: subparams.char_opacity
    };
  }
  function initialize() {
    var video = document.querySelector('video');
    if (video && video.mediaId) {
      initStorage();
      var methods = ['setSubtitleColor', 'setSubtitleBackgroundColor', 'setSubtitleFontSize', 'setSubtitlePosition', 'setSubtitleBackgroundOpacity', 'setSubtitleCharacterOpacity'];
      var parameters = {
        mediaId: video.mediaId,
        color: subparams.color,
        bgColor: subparams.bg_color,
        position: subparams.position,
        fontSize: subparams.font_size,
        bgOpacity: subparams.bg_opacity,
        charOpacity: subparams.char_opacity
      };
      Arrays.extend(parameters, subparams);
      methods.forEach(function (method) {
        luna$1({
          parameters: parameters,
          method: method
        });
      });
    }
  }
  var WebosSubs = {
    initialize: initialize
  };

  /**
   * Для запросов в луну
   * @param {object} params 
   * @param {function} call 
   * @param {function} fail 
   */
  function luna(params, call, fail) {
    if (call) params.onSuccess = call;
    params.onFailure = function (result) {
      console.log('WebOS', params.method + " [fail][" + result.errorCode + "] " + result.errorText);
      if (fail) fail();
    };
    webOS.service.request("luna://com.webos.media", params);
  }
  function create$p(_video) {
    var video = _video;
    var media_id;
    var subtitle_visible = false;
    var timer;
    var timer_repet;
    var count = 0;
    var count_message = 0;
    var data = {
      subs: [],
      tracks: []
    };
    this.subscribed = false;
    this.repeted = false;

    /**
     * Начинаем поиск видео
     */
    this.start = function () {
      timer = setInterval(this.search.bind(this), 300);
    };

    /**
     * Включить/выключить сабы
     * @param {boolean} status 
     */
    this.toggleSubtitles = function (status) {
      subtitle_visible = status;
      luna({
        method: 'setSubtitleEnable',
        parameters: {
          'mediaId': media_id,
          'enable': status
        }
      });
      if (status) WebosSubs.initialize();
    };

    /**
     * Получили сабы, выводим в панель
     * @param {object} info 
     */
    this.subtitles = function (info) {
      var _this = this;
      if (info.numSubtitleTracks) {
        var all = [];
        var add = function add(sub, index) {
          sub.index = index;
          sub.language = sub.language == '(null)' ? '' : sub.language;
          Object.defineProperty(sub, 'mode', {
            set: function set(v) {
              if (v == 'showing') {
                _this.toggleSubtitles(sub.index == -1 ? false : true);
                console.log('WebOS', 'change subtitles for id: ', media_id, ' index:', sub.index);
                if (sub.index !== -1) {
                  setTimeout(function () {
                    luna({
                      method: 'selectTrack',
                      parameters: {
                        'type': 'text',
                        'mediaId': media_id,
                        'index': sub.index
                      }
                    });
                  }, 500);
                }
              }
            },
            get: function get() {}
          });
          all.push(sub);
        };
        add({
          title: Lang.translate('player_disabled'),
          selected: true
        }, -1);
        for (var i = 0; i < info.subtitleTrackInfo.length; i++) add(info.subtitleTrackInfo[i], i);
        data.subs = all;
        PlayerVideo.listener.send('webos_subs', {
          subs: data.subs
        });
        PlayerPanel.setSubs(data.subs);
      }
    };

    /**
     * Получили дорожки, выводим в панель
     * @param {object} info 
     */
    this.tracks = function (info) {
      if (info.numAudioTracks) {
        var all = [];
        var add = function add(track, index) {
          track.index = index;
          track.selected = index == -1;
          track.extra = {
            channels: track.channels,
            fourCC: track.codec
          };
          Object.defineProperty(track, 'enabled', {
            set: function set(v) {
              if (v) {
                console.log('WebOS', 'change audio for id:', media_id, ' index:', track.index);
                luna({
                  method: 'selectTrack',
                  parameters: {
                    'type': 'audio',
                    'mediaId': media_id,
                    'index': track.index
                  }
                });
                if (video.audioTracks) {
                  for (var i = 0; i < video.audioTracks.length; i++) {
                    video.audioTracks[i].enabled = false;
                  }
                  if (video.audioTracks[track.index]) {
                    video.audioTracks[track.index].enabled = true;
                    console.log('WebOS', 'change audio two method:', track.index);
                  }
                }
              }
            },
            get: function get() {}
          });
          all.push(track);
        };
        for (var i = 0; i < info.audioTrackInfo.length; i++) add(info.audioTrackInfo[i], i);
        data.tracks = all;
        PlayerVideo.listener.send('webos_tracks', {
          tracks: data.tracks
        });
        PlayerPanel.setTracks(data.tracks, true);
      }
    };

    /**
     * Подписываемся на видео и ждем события
     */
    this.subscribe = function () {
      var _this2 = this;
      this.subscribed = true;
      luna({
        method: 'subscribe',
        parameters: {
          'mediaId': media_id,
          'subscribe': true
        }
      }, function (result) {
        if (result.sourceInfo && !_this2.sourceInfo) {
          _this2.sourceInfo = true;
          var info = result.sourceInfo.programInfo[0];
          _this2.subtitles(info);
          _this2.tracks(info);
          _this2.unsubscribe();
          _this2.call();
        }
        if (result.bufferRange) {
          count_message++;
          if (count_message == 30) {
            _this2.unsubscribe();
            _this2.call();
          }
        }
      }, function () {
        _this2.call();
      });
    };

    /**
     * Отписка от видео
     */
    this.unsubscribe = function () {
      luna({
        method: 'unload',
        parameters: {
          'mediaId': media_id
        }
      });
    };

    /**
     * Сканируем наличия видео
     */
    this.search = function () {
      var _this3 = this;
      count++;
      if (count > 3) {
        clearInterval(timer);
        clearInterval(timer_repet);
      }
      var rootSubscribe = function rootSubscribe() {
        console.log('WebOS', 'Run root', 'version:', webOS.sdk_version);
        _this3.toggleSubtitles(false);
        if (_this3.subscribed) clearInterval(timer_repet);
        if (!_this3.subscribed) _this3.subscribe();else {
          if (data.tracks.length) {
            PlayerVideo.listener.send('webos_tracks', {
              tracks: data.tracks
            });
            PlayerPanel.setTracks(data.tracks, true);
          }
          if (data.subs.length) {
            PlayerVideo.listener.send('webos_subs', {
              subs: data.subs
            });
            PlayerPanel.setSubs(data.subs);
          }
        }
        clearInterval(timer);
      };
      console.log('WebOS', 'try get id:', video.mediaId);
      if (video.mediaId) {
        media_id = video.mediaId;
        console.log('WebOS', 'video id:', media_id);
        rootSubscribe();
      }
    };

    /**
     * Вызываем и завершаем работу
     */
    this.call = function () {
      if (this.callback) this.callback();
      this.callback = false;
    };
    this.speed = function (v) {
      luna({
        method: 'setPlayRate',
        parameters: {
          'mediaId': media_id,
          'playRate': v,
          'audioOutput': true
        }
      });
    };

    /**
     * Создаем новое видео
     * @param {object} new_video 
     */
    this.repet = function (new_video) {
      video = new_video;
      console.log('WebOS', 'repeat to new video', new_video ? true : false);
      media_id = '';
      clearInterval(timer);
      count = 0;
      this.repeted = true;
      timer_repet = setInterval(this.search.bind(this), 300);
    };

    /**
     * После перемотки включаем состояние сабов
     */
    this.rewinded = function () {
      this.toggleSubtitles(subtitle_visible);
    };

    /**
     * Уничтожить
     */
    this.destroy = function () {
      clearInterval(timer);
      clearInterval(timer_repet);
      if (media_id) this.unsubscribe();
      data = null;
      this.subscribed = false;
      this.callback = false;
    };
  }

  var FORMAT_NAME$7 = "vtt";
  var helper$5 = {
    toMilliseconds: function toMilliseconds(s) {
      var match = /^\s*(\d{1,2}:)?(\d{1,2}):(\d{1,2})([.,](\d{1,3}))?\s*$/.exec(s);
      var hh = match[1] ? parseInt(match[1].replace(":", "")) : 0;
      var mm = parseInt(match[2]);
      var ss = parseInt(match[3]);
      var ff = match[5] ? parseInt(match[5]) : 0;
      var ms = hh * 3600 * 1000 + mm * 60 * 1000 + ss * 1000 + ff;
      return ms;
    },
    toTimeString: function toTimeString(ms) {
      var hh = Math.floor(ms / 1000 / 3600);
      var mm = Math.floor(ms / 1000 / 60 % 60);
      var ss = Math.floor(ms / 1000 % 60);
      var ff = Math.floor(ms % 1000);
      var time = (hh < 10 ? "0" : "") + hh + ":" + (mm < 10 ? "0" : "") + mm + ":" + (ss < 10 ? "0" : "") + ss + "." + (ff < 100 ? "0" : "") + (ff < 10 ? "0" : "") + ff;
      return time;
    }
  };

  /******************************************************************************************
   * Parses captions in WebVTT format (Web Video Text Tracks Format)
   ******************************************************************************************/
  function parse$c(content, options) {
    var index = 1;
    var captions = [];
    var eol = options.eol || "\r\n";
    var parts = content.split(/\r?\n\s+\r?\n/);
    for (var i = 0; i < parts.length; i++) {
      //WebVTT data
      var regex = /^([^\r\n]+\r?\n)?((\d{1,2}:)?\d{1,2}:\d{1,2}([.,]\d{1,3})?)\s*\-\-\>\s*((\d{1,2}:)?\d{1,2}:\d{1,2}([.,]\d{1,3})?)\r?\n([\s\S]*)(\r?\n)*$/gi;
      var match = regex.exec(parts[i]);
      if (match) {
        var caption = {};
        caption.type = "caption";
        caption.index = index++;
        if (match[1]) {
          caption.cue = match[1].replace(/[\r\n]*/gi, "");
        }
        caption.start = helper$5.toMilliseconds(match[2]);
        caption.end = helper$5.toMilliseconds(match[5]);
        caption.duration = caption.end - caption.start;
        var lines = match[8].split(/\r?\n/);
        caption.content = lines.join(eol);
        caption.text = caption.content.replace(/\<[^\>]+\>/g, "") //<b>bold</b> or <i>italic</i>
        .replace(/\{[^\}]+\}/g, ""); //{b}bold{/b} or {i}italic{/i}
        captions.push(caption);
        continue;
      }

      //WebVTT meta
      var meta = /^([A-Z]+)(\r?\n([\s\S]*))?$/.exec(parts[i]);
      if (!meta) {
        //Try inline meta
        meta = /^([A-Z]+)\s+([^\r\n]*)?$/.exec(parts[i]);
      }
      if (meta) {
        var caption = {};
        caption.type = "meta";
        caption.name = meta[1];
        if (meta[3]) {
          caption.data = meta[3];
        }
        captions.push(caption);
        continue;
      }
      if (options.verbose) {
        console.log("WARN: Unknown part", parts[i]);
      }
    }
    return captions;
  }

  /******************************************************************************************
   * Builds captions in WebVTT format (Web Video Text Tracks Format)
   ******************************************************************************************/
  function build$9(captions, options) {
    var eol = options.eol || "\r\n";
    var content = "WEBVTT" + eol + eol;
    for (var i = 0; i < captions.length; i++) {
      var caption = captions[i];
      if (caption.type == "meta") {
        if (caption.name == "WEBVTT") continue;
        content += caption.name + eol;
        content += caption.data ? caption.data + eol : "";
        content += eol;
        continue;
      }
      if (typeof caption.type === "undefined" || caption.type == "caption") {
        content += (i + 1).toString() + eol;
        content += helper$5.toTimeString(caption.start) + " --> " + helper$5.toTimeString(caption.end) + eol;
        content += caption.text + eol;
        content += eol;
        continue;
      }
      if (options.verbose) {
        console.log("SKIP:", caption);
      }
    }
    return content;
  }

  /******************************************************************************************
   * Detects a subtitle format from the content.
   ******************************************************************************************/
  function detect$8(content) {
    if (typeof content !== "string") {
      throw new Error("Expected string content!");
    }
    if (/^[\s\r\n]*WEBVTT\r?\n/g.test(content)) {
      /*
      WEBVTT
      ...
      */
      return "vtt";
    }
  }

  /******************************************************************************************
   * Export
   ******************************************************************************************/
  var vttFormatter = {
    name: FORMAT_NAME$7,
    helper: helper$5,
    detect: detect$8,
    parse: parse$c,
    build: build$9
  };

  var FORMAT_NAME$6 = "lrc";
  var helper$4 = {
    toMilliseconds: function toMilliseconds(s) {
      var match = /^\s*(\d+):(\d{1,2})([.,](\d{1,3}))?\s*$/.exec(s);
      var mm = parseInt(match[1]);
      var ss = parseInt(match[2]);
      var ff = match[4] ? parseInt(match[4]) : 0;
      var ms = mm * 60 * 1000 + ss * 1000 + ff * 10;
      return ms;
    },
    toTimeString: function toTimeString(ms) {
      var mm = Math.floor(ms / 1000 / 60);
      var ss = Math.floor(ms / 1000 % 60);
      var ff = Math.floor(ms % 1000);
      var time = (mm < 10 ? "0" : "") + mm + ":" + (ss < 10 ? "0" : "") + ss + "." + (ff < 100 ? "0" : "") + (ff < 10 ? "0" : Math.floor(ff / 10));
      return time;
    }
  };

  /******************************************************************************************
   * Parses captions in LRC format: https://en.wikipedia.org/wiki/LRC_%28file_format%29
   ******************************************************************************************/
  function parse$b(content, options) {
    var prev = null;
    var captions = [];
    options.eol || "\r\n";
    var parts = content.split(/\r?\n/);
    for (var i = 0; i < parts.length; i++) {
      if (!parts[i] || parts[i].trim().length == 0) {
        continue;
      }

      //LRC content
      var regex = /^\[(\d{1,2}:\d{1,2}([.,]\d{1,3})?)\](.*)(\r?\n)*$/gi;
      var match = regex.exec(parts[i]);
      if (match) {
        var caption = {};
        caption.type = "caption";
        caption.start = helper$4.toMilliseconds(match[1]);
        caption.end = caption.start + 2000;
        caption.duration = caption.end - caption.start;
        caption.content = match[3];
        caption.text = caption.content;
        captions.push(caption);

        //Update previous
        if (prev) {
          prev.end = caption.start;
          prev.duration = prev.end - prev.start;
        }
        prev = caption;
        continue;
      }

      //LRC meta
      var meta = /^\[([\w\d]+):([^\]]*)\](\r?\n)*$/gi.exec(parts[i]);
      if (meta) {
        var caption = {};
        caption.type = "meta";
        caption.tag = meta[1];
        if (meta[2]) {
          caption.data = meta[2];
        }
        captions.push(caption);
        continue;
      }
      if (options.verbose) {
        console.log("WARN: Unknown part", parts[i]);
      }
    }
    return captions;
  }

  /******************************************************************************************
   * Builds captions in LRC format: https://en.wikipedia.org/wiki/LRC_%28file_format%29
   ******************************************************************************************/
  function build$8(captions, options) {
    var content = "";
    var lyrics = false;
    var eol = options.eol || "\r\n";
    for (var i = 0; i < captions.length; i++) {
      var caption = captions[i];
      if (caption.type == "meta") {
        if (caption.tag && caption.data) {
          content += "[" + caption.tag + ":" + caption.data.replace(/[\r\n]+/g, " ") + "]" + eol;
        }
        continue;
      }
      if (typeof caption.type === "undefined" || caption.type == "caption") {
        if (!lyrics) {
          content += eol; //New line when lyrics start
          lyrics = true;
        }
        content += "[" + helper$4.toTimeString(caption.start) + "]" + caption.text + eol;
        continue;
      }
      if (options.verbose) {
        console.log("SKIP:", caption);
      }
    }
    return content;
  }

  /******************************************************************************************
   * Detects a subtitle format from the content.
   ******************************************************************************************/
  function detect$7(content) {
    if (typeof content === "string") {
      if (/\r?\n\[(\d+:\d{1,2}([.,]\d{1,3})?)\](.*)\r?\n/.test(content)) {
        /*
        [04:48.28]Sister, perfume?
        */
        //return "lrc";
        return true;
      }
    }
  }

  /******************************************************************************************
   * Export
   ******************************************************************************************/
  var lrcFormatter = {
    name: FORMAT_NAME$6,
    helper: helper$4,
    detect: detect$7,
    parse: parse$b,
    build: build$8
  };

  var FORMAT_NAME$5 = "smi";
  var helper$3 = {
    htmlEncode: function htmlEncode(text) {
      return text.replace(/&/g, '&amp;').replace(/"/g, '&quot;').replace(/'/g, '&#39;').replace(/\</g, '&lt;').replace(/\>/g, '&gt;')
      //.replace(/\s/g, '&nbsp;')
      .replace(/\r?\n/g, '<BR>');
    },
    htmlDecode: function htmlDecode(html, eol) {
      return html.replace(/\<BR\s*\/?\>/gi, eol || '\r\n').replace(/&nbsp;/g, ' ').replace(/&quot;/g, '"').replace(/&#39;/g, "'").replace(/&lt;/g, '<').replace(/&gt;/g, '>').replace(/&amp;/g, '&');
    }
  };

  /******************************************************************************************
   * Parses captions in SAMI format (.smi)
   ******************************************************************************************/
  function parse$a(content, options) {
    var captions = [];
    var eol = options.eol || "\r\n";
    var title = /\<TITLE[^\>]*\>([\s\S]*)\<\/TITLE\>/gi.exec(content);
    if (title) {
      var caption = {};
      caption.type = "meta";
      caption.name = "title";
      caption.data = title[1].replace(/^[\s\r\n]*/g, "").replace(/[\s\r\n]*$/g, "");
      captions.push(caption);
    }
    var style = /\<STYLE[^\>]*\>([\s\S]*)\<\/STYLE\>/gi.exec(content);
    if (style) {
      var caption = {};
      caption.type = "meta";
      caption.name = "style";
      caption.data = style[1];
      captions.push(caption);
    }
    var sami = content.replace(/^[\s\S]*\<BODY[^\>]*\>/gi, "") //Remove content before body
    .replace(/\<\/BODY[^\>]*\>[\s\S]*$/gi, ""); //Remove content after body

    var prev = null;
    var parts = sami.split(/\<SYNC/gi);
    for (var i = 0; i < parts.length; i++) {
      if (!parts[i] || parts[i].trim().length == 0) {
        continue;
      }
      var part = '<SYNC' + parts[i];

      //<SYNC Start = 1000>
      var match = /^\<SYNC[^\>]+Start\s*=\s*["']?(\d+)["']?[^\>]*\>([\s\S]*)/gi.exec(part);
      if (match) {
        var caption = {};
        caption.type = "caption";
        caption.start = parseInt(match[1]);
        caption.end = caption.start + 2000;
        caption.duration = caption.end - caption.start;
        caption.content = match[2].replace(/^\<\/SYNC[^\>]*>/gi, "");
        var blank = true;
        var p = /^\<P[^\>]+Class\s*=\s*["']?([\w\d\-_]+)["']?[^\>]*\>([\s\S]*)/gi.exec(caption.content);
        if (!p) {
          p = /^\<P([^\>]*)\>([\s\S]*)/gi.exec(caption.content);
        }
        if (p) {
          var html = p[2].replace(/\<P[\s\S]+$/gi, ""); //Remove string after another <P> tag
          html = html.replace(/\<BR\s*\/?\>[\s\r\n]+/gi, eol).replace(/\<BR\s*\/?\>/gi, eol).replace(/\<[^\>]+\>/g, ""); //Remove all tags
          html = html.replace(/^[\s\r\n]+/g, "").replace(/[\s\r\n]+$/g, ""); //Trim new lines and spaces
          blank = html.replace(/&nbsp;/gi, " ").replace(/[\s\r\n]+/g, "").length == 0;
          caption.text = helper$3.htmlDecode(html, eol);
        }
        if (!options.preserveSpaces && blank) {
          if (options.verbose) {
            console.log("INFO: Skipping white space caption at " + caption.start);
          }
        } else {
          captions.push(caption);
        }

        //Update previous
        if (prev) {
          prev.end = caption.start;
          prev.duration = prev.end - prev.start;
        }
        prev = caption;
        continue;
      }
      if (options.verbose) {
        console.log("WARN: Unknown part", parts[i]);
      }
    }
    return captions;
  }

  /******************************************************************************************
   * Builds captions in SAMI format (.smi)
   ******************************************************************************************/
  function build$7(captions, options) {
    var eol = options.eol || "\r\n";
    var content = "";
    content += '<SAMI>' + eol;
    content += '<HEAD>' + eol;
    content += '<TITLE>' + (options.title || "") + '</TITLE>' + eol;
    content += '<STYLE TYPE="text/css">' + eol;
    content += '<!--' + eol;
    content += 'P { font-family: Arial; font-weight: normal; color: white; background-color: black; text-align: center; }' + eol;
    content += '.LANG { Name: ' + (options.langName || "English") + '; lang: ' + (options.langCode || "en-US") + '; SAMIType: CC; }' + eol;
    content += '-->' + eol;
    content += '</STYLE>' + eol;
    content += '</HEAD>' + eol;
    content += '<BODY>' + eol;
    for (var i = 0; i < captions.length; i++) {
      var caption = captions[i];
      if (caption.type == "meta") {
        continue;
      }
      if (typeof caption.type === "undefined" || caption.type == "caption") {
        //Start of caption
        content += '<SYNC Start=' + caption.start + '>' + eol;
        content += '  <P Class=LANG>' + helper$3.htmlEncode(caption.text || "") + (options.closeTags ? '</P>' : "") + eol;
        if (options.closeTags) {
          content += '</SYNC>' + eol;
        }

        //Blank line indicates the end of caption
        content += '<SYNC Start=' + caption.end + '>' + eol;
        content += '  <P Class=LANG>' + '&nbsp;' + (options.closeTags ? '</P>' : "") + eol;
        if (options.closeTags) {
          content += '</SYNC>' + eol;
        }
        continue;
      }
      if (options.verbose) {
        console.log("SKIP:", caption);
      }
    }
    content += '</BODY>' + eol;
    content += '</SAMI>' + eol;
    return content;
  }

  /******************************************************************************************
   * Detects a subtitle format from the content.
   ******************************************************************************************/
  function detect$6(content) {
    if (typeof content === "string") {
      if (/\<SAMI[^\>]*\>[\s\S]*\<BODY[^\>]*\>/g.test(content)) {
        /*
        <SAMI>
        <BODY>
        <SYNC Start=...
        ...
        </BODY>
        </SAMI>
        */
        return "smi";
      }
    }
  }

  /******************************************************************************************
   * Export
   ******************************************************************************************/
  var smiFormatter = {
    name: FORMAT_NAME$5,
    helper: helper$3,
    detect: detect$6,
    parse: parse$a,
    build: build$7
  };

  var FORMAT_NAME$4 = "ssa";
  var helper$2 = {
    toMilliseconds: function toMilliseconds(s) {
      var match = /^\s*(\d+:)?(\d{1,2}):(\d{1,2})([.,](\d{1,3}))?\s*$/.exec(s);
      var hh = match[1] ? parseInt(match[1].replace(":", "")) : 0;
      var mm = parseInt(match[2]);
      var ss = parseInt(match[3]);
      var ff = match[5] ? parseInt(match[5]) : 0;
      var ms = hh * 3600 * 1000 + mm * 60 * 1000 + ss * 1000 + ff * 10;
      return ms;
    },
    toTimeString: function toTimeString(ms) {
      var hh = Math.floor(ms / 1000 / 3600);
      var mm = Math.floor(ms / 1000 / 60 % 60);
      var ss = Math.floor(ms / 1000 % 60);
      var ff = Math.floor(ms % 1000 / 10); //2 digits
      var time = hh + ":" + (mm < 10 ? "0" : "") + mm + ":" + (ss < 10 ? "0" : "") + ss + "." + (ff < 10 ? "0" : "") + ff;
      return time;
    }
  };

  /******************************************************************************************
   * Parses captions in SubStation Alpha format (.ssa)
   ******************************************************************************************/
  function parse$9(content, options) {
    var meta;
    var columns = null;
    var captions = [];
    var eol = options.eol || "\r\n";
    var parts = content.split(/\r?\n\s*\r?\n/);
    for (var i = 0; i < parts.length; i++) {
      var regex = /^\s*\[([^\]]+)\]\r?\n([\s\S]*)(\r?\n)*$/gi;
      var match = regex.exec(parts[i]);
      if (match) {
        var tag = match[1];
        var lines = match[2].split(/\r?\n/);
        var _loop = function _loop() {
            line = lines[l];
            if (/^\s*;/.test(line)) {
              return 0; // continue
              //Skip comment
            }
            m = /^\s*([^:]+):\s*(.*)(\r?\n)?$/.exec(line);
            if (m) {
              if (tag == "Script Info") {
                if (!meta) {
                  meta = {};
                  meta.type = "meta";
                  meta.data = {};
                  captions.push(meta);
                }
                name = m[1].trim();
                value = m[2].trim();
                meta.data[name] = value;
                return 0; // continue
              }
              if (tag == "V4 Styles" || tag == "V4+ Styles") {
                name = m[1].trim();
                value = m[2].trim();
                if (name == "Format") {
                  columns = value.split(/\s*,\s*/g);
                  return 0; // continue
                }
                if (name == "Style") {
                  values = value.split(/\s*,\s*/g);
                  caption = {};
                  caption.type = "style";
                  caption.data = {};
                  for (c = 0; c < columns.length && c < values.length; c++) {
                    caption.data[columns[c]] = values[c];
                  }
                  captions.push(caption);
                  return 0; // continue
                }
              }
              if (tag == "Events") {
                name = m[1].trim();
                value = m[2].trim();
                if (name == "Format") {
                  columns = value.split(/\s*,\s*/g);
                  return 0; // continue
                }
                if (name == "Dialogue") {
                  //Work-around for missing text (when the text contains ',' char)
                  var getPosition = function getPosition(s, search, index) {
                    return s.split(search, index).join(search).length;
                  };
                  values = value.split(/\s*,\s*/g);
                  caption = {};
                  caption.type = "caption";
                  caption.data = {};
                  for (c = 0; c < columns.length && c < values.length; c++) {
                    caption.data[columns[c]] = values[c];
                  }
                  caption.start = helper$2.toMilliseconds(caption.data["Start"]);
                  caption.end = helper$2.toMilliseconds(caption.data["End"]);
                  caption.duration = caption.end - caption.start;
                  caption.content = caption.data["Text"];
                  indexOfText = getPosition(value, ',', columns.length - 1) + 1;
                  caption.content = value.substr(indexOfText);
                  caption.data["Text"] = caption.content;
                  caption.text = caption.content.replace(/\\N/g, eol) //"\N" for new line
                  .replace(/\{[^\}]+\}/g, ""); //{\pos(400,570)}
                  captions.push(caption);
                  return 0; // continue
                }
              }
            }
          },
          line,
          m,
          name,
          value,
          name,
          value,
          values,
          caption,
          c,
          name,
          value,
          values,
          caption,
          c,
          indexOfText,
          _ret;
        for (var l = 0; l < lines.length; l++) {
          _ret = _loop();
          if (_ret === 0) continue;
        }
      }
      if (options.verbose) {
        console.log("WARN: Unknown part", parts[i]);
      }
    }
    return captions;
  }

  /******************************************************************************************
   * Builds captions in SubStation Alpha format (.ssa)
   ******************************************************************************************/
  function build$6(captions, options) {
    var eol = options.eol || "\r\n";
    var ass = options.format == "ass";
    var content = "";
    content += "[Script Info]" + eol;
    content += "; Script generated by subsrt " + eol;
    content += "ScriptType: v4.00" + (ass ? "+" : "") + eol;
    content += "Collisions: Normal" + eol;
    content += eol;
    if (ass) {
      content += "[V4+ Styles]" + eol;
      content += "Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, OutlineColour, BackColour, Bold, Italic, Underline, StrikeOut, ScaleX, ScaleY, Spacing, Angle, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, Encoding" + eol;
      content += "Style: DefaultVCD, Arial,28,&H00B4FCFC,&H00B4FCFC,&H00000008,&H80000008,-1,0,0,0,100,100,0.00,0.00,1,1.00,2.00,2,30,30,30,0" + eol;
    } else {
      content += "[V4 Styles]" + eol;
      content += "Format: Name, Fontname, Fontsize, PrimaryColour, SecondaryColour, TertiaryColour, BackColour, Bold, Italic, BorderStyle, Outline, Shadow, Alignment, MarginL, MarginR, MarginV, AlphaLevel, Encoding" + eol;
      content += "Style: DefaultVCD, Arial,28,11861244,11861244,11861244,-2147483640,-1,0,1,1,2,2,30,30,30,0,0" + eol;
    }
    content += eol;
    content += "[Events]" + eol;
    content += "Format: " + (ass ? "Layer" : "Marked") + ", Start, End, Style, Name, MarginL, MarginR, MarginV, Effect, Text" + eol;
    for (var i = 0; i < captions.length; i++) {
      var caption = captions[i];
      if (caption.type == "meta") {
        continue;
      }
      if (typeof caption.type === "undefined" || caption.type == "caption") {
        content += "Dialogue: " + (ass ? "0" : "Marked=0") + "," + helper$2.toTimeString(caption.start) + "," + helper$2.toTimeString(caption.end) + ",DefaultVCD, NTP,0000,0000,0000,," + caption.text.replace(/\r?\n/g, "\\N") + eol;
        continue;
      }
      if (options.verbose) {
        console.log("SKIP:", caption);
      }
    }
    return content;
  }

  /******************************************************************************************
   * Detects a subtitle format from the content.
   ******************************************************************************************/
  function detect$5(content) {
    if (typeof content !== "string") {
      throw new Error("Expected string content!");
    }
    if (/^[\s\r\n]*\[Script Info\]\r?\n/g.test(content) && /[\s\r\n]*\[Events\]\r?\n/g.test(content)) {
      /*
      [Script Info]
      ...
      [Events]
      */

      //Advanced (V4+) styles for ASS format
      return content.indexOf("[V4+ Styles]") > 0 ? "ass" : "ssa";
    }
  }

  /******************************************************************************************
   * Export
   ******************************************************************************************/
  var ssaFormatter = {
    name: FORMAT_NAME$4,
    helper: helper$2,
    detect: detect$5,
    parse: parse$9,
    build: build$6
  };

  //Compatible format
  var assFormatter = {
    name: "ass",
    helper: ssaFormatter.helper,
    detect: ssaFormatter.detect,
    parse: ssaFormatter.parse,
    build: ssaFormatter.build
  };

  var FORMAT_NAME$3 = "sub";
  var DEFAULT_FPS = 25;

  /******************************************************************************************
   * Parses captions in MicroDVD format: https://en.wikipedia.org/wiki/MicroDVD
   ******************************************************************************************/
  function parse$8(content, options) {
    var fps = options.fps > 0 ? options.fps : DEFAULT_FPS;
    var captions = [];
    var eol = options.eol || "\r\n";
    var parts = content.split(/\r?\n/g);
    for (var i = 0; i < parts.length; i++) {
      var regex = /^\{(\d+)\}\{(\d+)\}(.*)$/gi;
      var match = regex.exec(parts[i]);
      if (match) {
        var caption = {};
        caption.type = "caption";
        caption.index = i + 1;
        caption.frame = {
          start: parseInt(match[1]),
          end: parseInt(match[2])
        };
        caption.frame.count = caption.frame.end - caption.frame.start;
        caption.start = Math.round(caption.frame.start / fps);
        caption.end = Math.round(caption.frame.end / fps);
        caption.duration = caption.end - caption.start;
        var lines = match[3].split(/\|/g);
        caption.content = lines.join(eol);
        caption.text = caption.content.replace(/\{[^\}]+\}/g, ""); //{0}{25}{c:$0000ff}{y:b,u}{f:DeJaVuSans}{s:12}Hello!
        captions.push(caption);
        continue;
      }
      if (options.verbose) {
        console.log("WARN: Unknown part", parts[i]);
      }
    }
    return captions;
  }

  /******************************************************************************************
   * Builds captions in MicroDVD format: https://en.wikipedia.org/wiki/MicroDVD
   ******************************************************************************************/
  function build$5(captions, options) {
    var fps = options.fps > 0 ? options.fps : DEFAULT_FPS;
    var sub = "";
    var eol = options.eol || "\r\n";
    for (var i = 0; i < captions.length; i++) {
      var caption = captions[i];
      if (typeof caption.type === "undefined" || caption.type == "caption") {
        var startFrame = _typeof(caption.frame) == "object" && caption.frame.start >= 0 ? caption.frame.start : caption.start * fps;
        var endFrame = _typeof(caption.frame) == "object" && caption.frame.end >= 0 ? caption.frame.end : caption.end * fps;
        var text = caption.text.replace(/\r?\n/, "|");
        sub += "{" + startFrame + "}" + "{" + endFrame + "}" + text + eol;
        continue;
      }
      if (options.verbose) {
        console.log("SKIP:", caption);
      }
    }
    return sub;
  }

  /******************************************************************************************
   * Detects a subtitle format from the content.
   ******************************************************************************************/
  function detect$4(content) {
    if (typeof content === "string") {
      if (/^\{\d+\}\{\d+\}(.*)/.test(content)) {
        /*
        {7207}{7262}Sister, perfume?
        */
        return FORMAT_NAME$3;
      }
    }
  }

  /******************************************************************************************
   * Export
   ******************************************************************************************/
  var subFormatter = {
    name: FORMAT_NAME$3,
    detect: detect$4,
    parse: parse$8,
    build: build$5
  };

  var FORMAT_NAME$2 = "srt";
  var helper$1 = {
    toMilliseconds: function toMilliseconds(s) {
      var match = /^\s*(\d{1,2}):(\d{1,2}):(\d{1,2})([.,](\d{1,3}))?\s*$/.exec(s);
      var hh = parseInt(match[1]);
      var mm = parseInt(match[2]);
      var ss = parseInt(match[3]);
      var ff = match[5] ? parseInt(match[5]) : 0;
      var ms = hh * 3600 * 1000 + mm * 60 * 1000 + ss * 1000 + ff;
      return ms;
    },
    toTimeString: function toTimeString(ms) {
      var hh = Math.floor(ms / 1000 / 3600);
      var mm = Math.floor(ms / 1000 / 60 % 60);
      var ss = Math.floor(ms / 1000 % 60);
      var ff = Math.floor(ms % 1000);
      var time = (hh < 10 ? "0" : "") + hh + ":" + (mm < 10 ? "0" : "") + mm + ":" + (ss < 10 ? "0" : "") + ss + "," + (ff < 100 ? "0" : "") + (ff < 10 ? "0" : "") + ff;
      return time;
    }
  };

  /******************************************************************************************
   * Parses captions in SubRip format (.srt)
   ******************************************************************************************/
  function parse$7(content, options) {
    var captions = [];
    var eol = options.eol || "\r\n";
    var parts = content.split(/\r?\n\s+\r?\n/g);
    for (var i = 0; i < parts.length; i++) {
      var regex = /^(\d+)\r?\n(\d{1,2}:\d{1,2}:\d{1,2}([.,]\d{1,3})?)\s*\-\-\>\s*(\d{1,2}:\d{1,2}:\d{1,2}([.,]\d{1,3})?)\r?\n([\s\S]*)(\r?\n)*$/gi;
      var match = regex.exec(parts[i]);
      if (match) {
        var caption = {};
        caption.type = "caption";
        caption.index = parseInt(match[1]);
        caption.start = helper$1.toMilliseconds(match[2]);
        caption.end = helper$1.toMilliseconds(match[4]);
        caption.duration = caption.end - caption.start;
        var lines = match[6].split(/\r?\n/);
        caption.content = lines.join(eol);
        caption.text = caption.content.replace(/\<[^\>]+\>/g, "") //<b>bold</b> or <i>italic</i>
        .replace(/\{[^\}]+\}/g, "") //{b}bold{/b} or {i}italic{/i}
        .replace(/\>\>\s*[^:]*:\s*/g, ""); //>> SPEAKER NAME: 
        captions.push(caption);
        continue;
      }
      if (options.verbose) {
        console.log("WARN: Unknown part", parts[i]);
      }
    }
    return captions;
  }

  /******************************************************************************************
   * Builds captions in SubRip format (.srt)
   ******************************************************************************************/
  function build$4(captions, options) {
    var srt = "";
    var eol = options.eol || "\r\n";
    for (var i = 0; i < captions.length; i++) {
      var caption = captions[i];
      if (typeof caption.type === "undefined" || caption.type == "caption") {
        srt += (i + 1).toString() + eol;
        srt += helper$1.toTimeString(caption.start) + " --> " + helper$1.toTimeString(caption.end) + eol;
        srt += caption.text + eol;
        srt += eol;
        continue;
      }
      if (options.verbose) {
        console.log("SKIP:", caption);
      }
    }
    return srt;
  }

  /******************************************************************************************
   * Detects a subtitle format from the content.
   ******************************************************************************************/
  function detect$3(content) {
    if (typeof content === "string") {
      if (/\d+\r?\n\d{1,2}:\d{1,2}:\d{1,2}([.,]\d{1,3})?\s*\-\-\>\s*\d{1,2}:\d{1,2}:\d{1,2}([.,]\d{1,3})?/g.test(content)) {
        /*
        3
        00:04:48,280 --> 00:04:50,510
        Sister, perfume?
        */
        return FORMAT_NAME$2;
      }
    }
  }

  /******************************************************************************************
   * Export
   ******************************************************************************************/
  var srtFormatter = {
    name: FORMAT_NAME$2,
    helper: helper$1,
    detect: detect$3,
    parse: parse$7,
    build: build$4
  };

  var FORMAT_NAME$1 = "sbv";
  var helper = {
    toMilliseconds: function toMilliseconds(s) {
      var match = /^\s*(\d{1,2}):(\d{1,2}):(\d{1,2})([.,](\d{1,3}))?\s*$/.exec(s);
      var hh = parseInt(match[1]);
      var mm = parseInt(match[2]);
      var ss = parseInt(match[3]);
      var ff = match[5] ? parseInt(match[5]) : 0;
      var ms = hh * 3600 * 1000 + mm * 60 * 1000 + ss * 1000 + ff;
      return ms;
    },
    toTimeString: function toTimeString(ms) {
      var hh = Math.floor(ms / 1000 / 3600);
      var mm = Math.floor(ms / 1000 / 60 % 60);
      var ss = Math.floor(ms / 1000 % 60);
      var ff = Math.floor(ms % 1000);
      var time = (hh < 10 ? "0" : "") + hh + ":" + (mm < 10 ? "0" : "") + mm + ":" + (ss < 10 ? "0" : "") + ss + "." + (ff < 100 ? "0" : "") + (ff < 10 ? "0" : "") + ff;
      return time;
    }
  };

  /******************************************************************************************
   * Parses captions in SubViewer format (.sbv)
   ******************************************************************************************/
  function parse$6(content, options) {
    var captions = [];
    var eol = options.eol || "\r\n";
    var parts = content.split(/\r?\n\s+\r?\n/);
    for (var i = 0; i < parts.length; i++) {
      var regex = /^(\d{1,2}:\d{1,2}:\d{1,2}([.,]\d{1,3})?)\s*[,;]\s*(\d{1,2}:\d{1,2}:\d{1,2}([.,]\d{1,3})?)\r?\n([\s\S]*)(\r?\n)*$/gi;
      var match = regex.exec(parts[i]);
      if (match) {
        var caption = {};
        caption.type = "caption";
        caption.start = helper.toMilliseconds(match[1]);
        caption.end = helper.toMilliseconds(match[3]);
        caption.duration = caption.end - caption.start;
        var lines = match[5].split(/\[br\]|\r?\n/gi);
        caption.content = lines.join(eol);
        caption.text = caption.content.replace(/\>\>\s*[^:]+:\s*/g, ""); //>> SPEAKER NAME: 
        captions.push(caption);
        continue;
      }
      if (options.verbose) {
        console.log("WARN: Unknown part", parts[i]);
      }
    }
    return captions;
  }

  /******************************************************************************************
   * Builds captions in SubViewer format (.sbv)
   ******************************************************************************************/
  function build$3(captions, options) {
    var content = "";
    var eol = options.eol || "\r\n";
    for (var i = 0; i < captions.length; i++) {
      var caption = captions[i];
      if (typeof caption.type === "undefined" || caption.type == "caption") {
        content += helper.toTimeString(caption.start) + "," + helper.toTimeString(caption.end) + eol;
        content += caption.text + eol;
        content += eol;
        continue;
      }
      if (options.verbose) {
        console.log("SKIP:", caption);
      }
    }
    return content;
  }

  /******************************************************************************************
   * Detects a subtitle format from the content.
   ******************************************************************************************/
  function detect$2(content) {
    if (typeof content !== "string") {
      throw new Error("Expected string content!");
    }
    if (/\d{1,2}:\d{1,2}:\d{1,2}([.,]\d{1,3})?\s*[,;]\s*\d{1,2}:\d{1,2}:\d{1,2}([.,]\d{1,3})?/g.test(content)) {
      /*
      00:04:48.280,00:04:50.510
      Sister, perfume?
      */
      return "sbv";
    }
  }

  /******************************************************************************************
   * Export
   ******************************************************************************************/
  var sbvFormatter = {
    name: FORMAT_NAME$1,
    helper: helper,
    detect: detect$2,
    parse: parse$6,
    build: build$3
  };

  var FORMAT_NAME = "json";

  /******************************************************************************************
   * Parses captions in JSON format
   ******************************************************************************************/
  function parse$5(content, options) {
    return JSON.parse(content);
  }

  /******************************************************************************************
   * Builds captions in JSON format
   ******************************************************************************************/
  function build$2(captions, options) {
    return JSON.stringify(captions, " ", 2);
  }

  /******************************************************************************************
   * Detects a subtitle format from the content.
   ******************************************************************************************/
  function detect$1(content) {
    if (typeof content === "string") {
      if (/^\[[\s\r\n]*\{[\s\S]*\}[\s\r\n]*\]$/g.test(content)) {
        /*
        [
          { ... }
        ]
        */
        return "json";
      }
    }
  }

  /******************************************************************************************
   * Export
   ******************************************************************************************/
  var jsonFormatter = {
    name: FORMAT_NAME,
    detect: detect$1,
    parse: parse$5,
    build: build$2
  };

  var supportedFormats = {
    vtt: vttFormatter,
    lrc: lrcFormatter,
    smi: smiFormatter,
    ssa: ssaFormatter,
    ass: assFormatter,
    sub: subFormatter,
    srt: srtFormatter,
    sbv: sbvFormatter,
    json: jsonFormatter
  };
  function clone(obj) {
    return JSON.parse(JSON.stringify(obj));
  }

  /******************************************************************************************
   * Gets a list of supported subtitle supportedFormats.
   ******************************************************************************************/
  function list$3() {
    return Object.keys(supportedFormats);
  }

  /******************************************************************************************
   * Detects a subtitle supportedFormats from the content.
   ******************************************************************************************/
  function detect(content) {
    var formats = Object.keys(supportedFormats);
    for (var i = 0; i < formats.length; i++) {
      var formatName = formats[i];
      var handler = supportedFormats[formatName];
      if (handler === undefined) {
        continue;
      }
      if (typeof handler.detect != "function") {
        continue;
      }
      //Function 'detect' can return true or supportedFormats name
      var d = handler.detect(content);
      if (d === true) {
        //Logical true
        return formatName;
      }
      if (formatName === d) {
        //Format name
        return d;
      }
    }
  }

  /******************************************************************************************
   * Parses a subtitle content.
   ******************************************************************************************/
  function parse$4(content, options) {
    options = options || {};
    var format = options.format || detect(content);
    if (!format || format.trim().length == 0) {
      throw new Error("Cannot determine subtitle supportedFormats!");
    }
    var handler = supportedFormats[format];
    if (handler === undefined) {
      throw new Error("Unsupported subtitle supportedFormats: " + format);
    }
    var func = handler.parse;
    if (typeof func != "function") {
      throw new Error("Subtitle supportedFormats does not support 'parse' op: " + format);
    }
    return func(content, options);
  }

  /******************************************************************************************
   * Builds a subtitle content
   ******************************************************************************************/
  function build$1(captions, options) {
    options = options || {};
    var format = options.format || "srt";
    if (!format || format.trim().length == 0) {
      throw new Error("Cannot determine subtitle supportedFormats!");
    }
    var handler = supportedFormats[format];
    if (typeof handler == "undefined") {
      throw new Error("Unsupported subtitle supportedFormats: " + format);
    }
    var func = handler.build;
    if (typeof func != "function") {
      throw new Error("Subtitle supportedFormats does not support 'build' op: " + format);
    }
    return func(captions, options);
  }

  /******************************************************************************************
   * Converts subtitle supportedFormats
   ******************************************************************************************/
  function convert(content, options) {
    if (typeof options == "string") {
      options = {
        to: options
      };
    }
    options = options || {};
    var opt = clone(options);
    delete opt.format;
    if (opt.from) {
      opt.format = opt.from;
    }
    var captions = parse$4(content, opt);
    if (opt.resync) {
      captions = resync(captions, opt.resync);
    }
    opt.format = opt.to || options.format;
    return build$1(captions, opt);
  }

  /******************************************************************************************
   * Shifts the time of the captions.
   ******************************************************************************************/
  function resync(captions, options) {
    options = options || {};
    var func, ratio, frame, offset;
    if (typeof options == "function") {
      func = options; //User's function to handle time shift
    } else if (typeof options == "number") {
      offset = options; //Time shift (+/- offset)
      func = function func(a) {
        return [a[0] + offset, a[1] + offset];
      };
    } else if (_typeof(options) == "object") {
      offset = (options.offset || 0) * (options.frame ? options.fps || 25 : 1);
      ratio = options.ratio || 1.0;
      frame = options.frame;
      func = function func(a) {
        return [Math.round(a[0] * ratio + offset), Math.round(a[1] * ratio + offset)];
      };
    } else {
      throw new Error("Argument 'options' not defined!");
    }
    var resynced = [];
    for (var i = 0; i < captions.length; i++) {
      var caption = clone(captions[i]);
      if (typeof caption.type === "undefined" || caption.type == "caption") {
        if (frame) {
          var shift = func([caption.frame.start, caption.frame.end]);
          if (shift && shift.length == 2) {
            caption.frame.start = shift[0];
            caption.frame.end = shift[1];
            caption.frame.count = caption.frame.end - caption.frame.start;
          }
        } else {
          var shift = func([caption.start, caption.end]);
          if (shift && shift.length == 2) {
            caption.start = shift[0];
            caption.end = shift[1];
            caption.duration = caption.end - caption.start;
          }
        }
      }
      resynced.push(caption);
    }
    return resynced;
  }
  var subsrt = {
    list: list$3,
    detect: detect,
    parse: parse$4,
    build: build$1,
    convert: convert,
    resync: resync
  };

  /**
   * Поучить время
   * @param {string} val 
   * @returns {number}
   */
  function time$1(val) {
    var regex = /(\d+):(\d{2}):(\d{2})[.,](\d{3})/;
    var parts = regex.exec(val);
    if (parts === null) return 0;
    for (var i = 1; i < 5; i++) {
      parts[i] = parseInt(parts[i], 10);
      if (isNaN(parts[i])) parts[i] = 0;
    }

    //hours + minutes + seconds + ms
    return parts[1] * 3600000 + parts[2] * 60000 + parts[3] * 1000 + parts[4];
  }

  /**
   * Парсить
   * @param {string} data 
   * @param {boolean} ms 
   * @returns 
   */
  function parse$3(data, ms) {
    var type = subsrt.detect(data);
    if (type === 'vtt') return parseVTT(data, ms);
    if (type !== undefined && type !== 'srt') return parseVTT(convertToVTT(data), ms);else return parseSRT(data, ms);
  }

  /**
   * Парсить SRT
   * @param {string} data 
   * @param {boolean} ms 
   * @returns {[{id:string, startTime:number, endTime:number, text:string}]}
   */
  function parseSRT(data, ms) {
    var useMs = ms ? true : false;
    data = data.replace(/\r\n/g, '\n');
    data = data.replace(/\r/g, '\n');
    var regex = /(\d+)\n(\d{2}:\d{2}:\d{2},\d{3}) --> (\d{2}:\d{2}:\d{2},\d{3})/g;
    data = data.split(regex);
    data.shift();
    var items = [];
    for (var i = 0; i < data.length; i += 4) {
      items.push({
        id: data[i].trim(),
        startTime: useMs ? time$1(data[i + 1].trim()) : data[i + 1].trim(),
        endTime: useMs ? time$1(data[i + 2].trim()) : data[i + 2].trim(),
        text: data[i + 3].trim()
      });
    }
    return items;
  }
  function convertToVTT(data) {
    return subsrt.convert(data, {
      format: 'vtt',
      fps: 25
    });
  }

  /**
   * Парсить VTT
   * @param {string} data 
   * @param {boolean} ms
   * @returns {[{id:string, startTime:number, endTime:number, text:string}]}
   */
  function parseVTT(data, ms) {
    var useMs = ms ? true : false;
    data = data.replace(/\r\n/g, '\n');
    data = data.replace(/\r/g, '\n');
    data = data.replace(/(\d{2}):(\d{2})\.(\d{3})[ \t]+-->[ \t]+(\d{2}):(\d{2})\.(\d{3})/g, '00:$1:$2.$3 --> 00:$4:$5.$6');
    var regex = /(\n\n.+\n)?[ \t]*(\d{2}:\d{2}:\d{2}\.\d{3})[ \t]+-->[ \t]+(\d{2}:\d{2}:\d{2}\.\d{3})/g;
    data = data.split(regex);
    data.shift();
    var items = [];
    for (var i = 0; i < data.length; i += 4) {
      items.push({
        id: (data[i] || '').trim(),
        startTime: useMs ? time$1(data[i + 1].trim()) : data[i + 1].trim(),
        endTime: useMs ? time$1(data[i + 2].trim()) : data[i + 2].trim(),
        text: data[i + 3].trim()
      });
    }
    return items;
  }

  /**
   * Класс
   */
  function CustomSubs() {
    var parsed;
    var network = new create$e();
    this.listener = start$8();

    /**
     * Загрузить
     * @param {string} url 
     */
    this.load = function (url) {
      network.silent(url, function (data) {
        if (data) {
          parsed = parse$3(data, true);
        }
      }, false, false, {
        dataType: 'text'
      });
    };

    /**
     * Показать текст
     * @param {number} time_sec 
     */
    this.update = function (time_sec) {
      var time_ms = time_sec * 1000;
      if (parsed) {
        var text = '';
        for (var i = 0; i < parsed.length; i++) {
          var sub = parsed[i];
          if (time_ms > sub.startTime && time_ms < sub.endTime) {
            text = sub.text.replace("\n", '<br>');
            break;
          }
        }
        this.listener.send('subtitle', {
          text: text.trim()
        });
      }
    };

    /**
     * Уничтожить
     */
    this.destroy = function () {
      network.clear();
      network = null;
      this.listener = null;
    };
  }

  var context;
  function smooth(a, b, s, c) {
    return a + (b - a) * (s * 0.02);
  }
  function toDb(_float) {
    var db = 20 * (Math.log(_float) / Math.log(10));
    db = Math.max(-48, Math.min(db, 0));
    return db;
  }
  function Source(video) {
    var source = context.createMediaElementSource(video);
    var analyser = context.createAnalyser();
    var volume = context.createGain();
    var destroy = false;
    var display = true;
    var draw_html = $('<div class="normalization normalization--visible"><canvas></canvas></div>');
    var draw_canvas = draw_html.find('canvas')[0];
    var draw_context = draw_canvas.getContext("2d");
    draw_canvas.width = 5;
    draw_canvas.height = Math.round(window.innerHeight * 0.26);
    try {
      analyser.fftSize = 2048 * 4;
      console.log('Player', 'normalization fftSize 2048 * 4');
    } catch (e) {
      try {
        analyser.fftSize = 2048 * 2;
        console.log('Player', 'normalization fftSize 2048 * 2');
      } catch (e) {
        analyser.fftSize = 2048;
        console.log('Player', 'normalization fftSize 2048');
      }
    }
    var frequencyData = new Uint8Array(analyser.frequencyBinCount);
    var midFreqRange = {
      start: 1300,
      end: 4000
    }; // Средние частоты
    var highFreqRange = {
      start: 4000,
      end: 8000
    }; // Высокие частоты

    function calculateRMS(range) {
      var startIndex = Math.floor(range.start * analyser.frequencyBinCount / (context.sampleRate / 2));
      var endIndex = Math.floor(range.end * analyser.frequencyBinCount / (context.sampleRate / 2));
      startIndex = Math.max(0, Math.min(startIndex, frequencyData.length - 1));
      endIndex = Math.max(0, Math.min(endIndex, frequencyData.length - 1));
      var total = 0;
      var count = 0;
      for (var i = startIndex; i <= endIndex; i++) {
        var value = frequencyData[i];
        total += value * value;
        count++;
      }
      return count > 0 ? Math.sqrt(total / count) : 0;
    }
    analyser.gain_smooth = 1;

    //подключаем анализ
    source.connect(analyser);

    //подключаем регулятор звука
    analyser.connect(volume);

    //подключаем к выходу
    volume.connect(context.destination);
    $('body').append(draw_html);
    function update() {
      if (!destroy) requestAnimationFrame(update);
      analyser.getByteFrequencyData(frequencyData);
      var rms_mid = calculateRMS(midFreqRange);
      var rms_high = calculateRMS(highFreqRange);
      var db_mid = toDb(rms_mid / 255);
      var db_high = toDb(rms_high / 255);
      var sm_st = Storage.get('player_normalization_smooth', 'medium');
      var pw_st = Storage.get('player_normalization_power', 'hight');
      var tp_st = Storage.get('player_normalization_type', 'all');
      var pw_am = pw_st == 'hight' ? 1 : pw_st == 'medium' ? 0.7 : 0.35;
      var gain = Math.max(0.0, Math.min(2, (db_mid + db_high) / 2 / -24));
      analyser.gain_smooth = sm_st == 'none' ? gain : smooth(analyser.gain_smooth, gain, sm_st == 'hight' ? 45 : sm_st == 'medium' ? 20 : 5);
      var vol = pw_st == 'none' ? 1 : 1 + (analyser.gain_smooth - 1) * pw_am;
      volume.gain.value = tp_st == 'all' ? vol : tp_st == 'up' ? Math.max(1, vol) : Math.min(1, vol);
      if (display) {
        draw_context.clearRect(0, 0, draw_canvas.width, draw_canvas.height);
        var down = Math.min(1, Math.max(0, 1 - volume.gain.value));
        var up = Math.min(1, Math.max(0, volume.gain.value - 1));
        var half = draw_canvas.height / 2;
        draw_context.fillStyle = 'rgba(251,91,91,1)';
        draw_context.fillRect(0, half, draw_canvas.width, half * down);
        draw_context.fillStyle = 'rgba(91,213,251,1)';
        draw_context.fillRect(0, half - half * up, draw_canvas.width, half * up);
      }
    }
    update();
    this.visible = function (status) {
      display = status;
      draw_html.toggleClass('normalization--visible', status);
    };
    this.destroy = function () {
      volume.disconnect();
      analyser.disconnect();
      source.disconnect();
      destroy = true;
      draw_html.remove();
    };
  }
  function Normalization() {
    if (!context) {
      var classContext = window.AudioContext || window.webkitAudioContext;
      context = new classContext();
    }
    var source;
    this.attach = function (video) {
      if (!source) source = new Source(video);
    };
    this.visible = function (status) {
      if (source) source.visible(status);
    };
    this.destroy = function () {
      if (source) source.destroy();
      source = null;
    };
  }

  function AVPlay(call_video) {
    var avplay, plugin, stream_url, loaded, current_time;
    var object = $('<object class="player-video_video"  style="visibility:hidden;"></object>');
    var video = object[0];
    var listener = start$8();
    var change_scale_later;
    var change_speed_later;
    var canGetVideoResolution = false;

    /**
     * Установить урл
     */
    Object.defineProperty(video, "src", {
      set: function set(url) {
        if (url) {
          if (url.toLowerCase().indexOf(".m3u8") != -1 && url.toUpperCase().indexOf("|COMPONENT=HLS") == -1) {
            url += "|COMPONENT=HLS";
          } else if (url.toLowerCase().indexOf(".mpd") != -1 && url.toUpperCase().indexOf("|COMPONENT=HAS") == -1) {
            url += "|COMPONENT=HAS";
          }
          stream_url = url;
          console.log(stream_url);
          avplay.init();
          plugin = avplay.setPlayerPluginObject();
          avplay.onEvent = eventHandler;
        }
      },
      get: function get() {}
    });

    /**
     * Позиция
     */
    Object.defineProperty(video, "currentTime", {
      set: function set(t) {
        try {
          seekTo(t);
        } catch (e) {
          listener.send('error', {
            error: 'code [' + e.code + '] ' + e.message
          });
        }
      },
      get: function get() {
        return current_time ? current_time / 1000 : 0;
      }
    });
    /**
     * 
     */
    function seekTo(time) {
      var time_s;
      var time_ms = Math.ceil(time) * 1000;
      var duration_ms = avplay.getDuration();
      if (time_ms >= 0 && current_time - time_ms >= 0) {
        time_s = Math.ceil((current_time - time_ms) / 1000);
        plugin.Execute("JumpBackward", time_s);
      } else if (time_ms >= 0 && duration_ms - current_time + time_ms >= 0) {
        time_s = Math.ceil((time_ms - current_time) / 1000);
        plugin.Execute("JumpForward", time_s);
      }
    }
    /**
     * Длительность
     */
    Object.defineProperty(video, "duration", {
      set: function set() {},
      get: function get() {
        var d = 0;
        try {
          d = avplay.getDuration();
        } catch (e) {}
        return d ? d / 1000 : 0;
      }
    });
    /**
     * Пауза
     */
    Object.defineProperty(video, "paused", {
      set: function set() {},
      get: function get() {
        try {
          return avplay.status == '5';
        } catch (e) {
          return false;
        }
      }
    });

    /**
     * Аудиодорожки
     */
    Object.defineProperty(video, "audioTracks", {
      set: function set() {},
      get: function get() {
        try {
          var amount = avplay.getTotalNumOfStreamID(1);
          var tracks = Array.apply(null, {
            length: amount
          }).map(Number.call, Number).map(function (i) {
            var item = {
              extra: JSON.parse(avplay.getStreamExtraData(1, i)),
              index: parseInt(i),
              language: languageNumToStr(avplay.getStreamLanguageInfo(1, i))
            };
            Object.defineProperty(item, "enabled", {
              set: function set(v) {
                if (v) {
                  try {
                    avplay.setStreamID(1, item.index);
                  } catch (e) {
                    console.log('Player', 'no change audio:', e.message);
                  }
                }
              },
              get: function get() {}
            });
            return item;
          }).sort(function (a, b) {
            return a.index - b.index;
          });
          return tracks;
        } catch (e) {
          return [];
        }
      }
    });

    /**
     * Субтитры
     */
    Object.defineProperty(video, "textTracks", {
      set: function set() {},
      get: function get() {
        try {
          var amount = avplay.getTotalNumOfStreamID(4);
          var tracks = Array.apply(null, {
            length: amount
          }).map(Number.call, Number).map(function (i) {
            var item = {
              extra: JSON.parse(avplay.getStreamExtraData(4, i)),
              index: parseInt(i),
              language: languageNumToStr(avplay.getStreamLanguageInfo(4, i))
            };
            Object.defineProperty(item, "mode", {
              set: function set(v) {
                if (v == 'showing') {
                  try {
                    avplay.setStreamID(4, item.index);
                  } catch (e) {
                    console.log('Player', 'no change text:', e.message);
                  }
                }
              },
              get: function get() {}
            });
            return item;
          }).sort(function (a, b) {
            return a.index - b.index;
          });
          return tracks;
        } catch (e) {
          return [];
        }
      }
    });
    /**
     * Получаем текст языка субтитров или аудио
     */
    function languageNumToStr(num) {
      var str;
      //Словарь кодов озвучек
      var lang = {
        6384738: "Albanian",
        7565673: "Albanian",
        6647399: "English",
        6388325: "Azerbaijan",
        6386285: "Armenian",
        6448492: "Belarusian",
        6452588: "Bulgarian",
        6514793: "Chinese",
        6776178: "German",
        6911073: "Italian",
        7565409: "Spanish",
        7037306: "Kazakh",
        7040882: "Korean",
        7368562: "Portuguese",
        7501171: "Russian",
        7564399: "Slovak",
        7564406: "Slovenian",
        7565936: "Serbian",
        7632242: "Turkish",
        7699042: "Uzbek",
        7695218: "Ukrainian",
        8026747: "Ukrainian",
        6713957: "French",
        7567205: "Swedish",
        6975598: "Japanese"
      };
      if (lang[num] != undefined) {
        str = lang[num];
      } else {
        var nHex = num.toString(16);
        var sHex1 = "0x" + nHex.substring(0, 2);
        var sHex2 = "0x" + nHex.substring(2, 2);
        var sHex3 = "0x" + nHex.substring(4, 2);
        var str1 = String.fromCharCode(sHex1);
        var str2 = String.fromCharCode(sHex2);
        var str3 = String.fromCharCode(sHex3);
        str = str1 + str2 + str3;
        if (str === "\0\0\0") {
          str = "Неизвестный";
        }
      }
      return str;
    }
    /**
     * Ширина видео
     */
    Object.defineProperty(video, "videoWidth", {
      set: function set() {},
      get: function get() {
        if (canGetVideoResolution) {
          return avplay.getVideoResolution().split('|')[0];
        } else {
          return 0;
        }
      }
    });

    /**
     * Высота видео
     */
    Object.defineProperty(video, "videoHeight", {
      set: function set() {},
      get: function get() {
        if (canGetVideoResolution) {
          return avplay.getVideoResolution().split('|')[1];
        } else {
          return 0;
        }
      }
    });

    /**
     * Меняем размер видео
     * @param {string} scale - default|fill
     */
    function changeScale(scale) {
      try {
        var xV = curWidget.width,
          yV = curWidget.height,
          aX = 0,
          aY = 0,
          aW = curWidget.width,
          aH = curWidget.height,
          cX = 0,
          cY = 0,
          pH = 100,
          pW = 100,
          cW = video.videoWidth,
          cH = video.videoHeight;
        if (cH == 0 || cW == 0) {
          throw false;
        }
        switch (scale) {
          //original
          case 'default':
            if (cW / cH < 1.79) {
              aW = yV * cW / cH;
              aX = (xV - aW) / 2;
            } else {
              aH = xV * cH / cW;
              aY = (yV - aH) / 2;
            }
            ;
            break;
          //full
          case 'fill':
            break;
          default:
            //zoom
            var type = scale[0];
            var zoom = parseInt(scale.replace(/\D+/g, ""));
            if (type == 's') {
              pH = zoom;
              pW = zoom;
            } else if (type == 'v') {
              pH = zoom;
              pW = 100;
            }
            if (zoom >= 80 && zoom <= 140) {
              if (pW <= 100) {
                aW = xV / 100 * pW;
                aX = (xV - aW) / 2;
              } else {
                cX = cW * (pW / 200 - 0.5);
                cW = cW * (2 - pW / 100);
              }
              if (pH <= 100) {
                aH = yV / 100 * pH;
                aY = (yV - aH) / 2;
              } else {
                cY = cH * (pH / 200 - 0.5);
                cH = cH * (2 - pH / 100);
              }
            } else {
              changeScale('default');
              return;
            }
            break;
        }
        ;
        avplay.setDisplayArea({
          left: aX,
          top: aY,
          width: aW,
          height: aH
        });
        if (scale != 'fill') {
          avplay.setCropArea(function () {
            console.log('Player', 'change scale ' + scale);
          }, function (e) {
            listener.send('error', {
              error: 'code [' + e.code + '] ' + e.message
            });
          }, {
            left: cX,
            top: cY,
            width: cW,
            height: cH
          });
        } else {
          avplay.setCropArea(function () {
            console.log('Player', 'change scale ' + scale);
          }, function (e) {
            listener.send('error', {
              error: 'code [' + e.code + '] ' + e.message
            });
          }, {
            left: 0,
            top: 0,
            width: 0,
            height: 0
          });
        }
      } catch (e) {
        change_scale_later = scale;
      }
    }
    function changeSpeed(speed) {
      try {
        avplay.setSpeed(speed);
      } catch (e) {
        change_speed_later = speed;
      }
    }

    /**
     * Всегда говорим да, мы можем играть
     */
    video.canPlayType = function () {
      return true;
    };

    /**
     * Вешаем кастомные события
     */
    video.addEventListener = listener.follow.bind(listener);

    /**
     * Вешаем события от плеера orsay
     */
    var eventHandler = function eventHandler(type, data) {
      switch (type) {
        // 1 CONNECTION_FAILED;
        case 1:
          listener.send('error', {
            error: '[orsay native player: CONNECTION_FAILED]'
          });
          break;
        // 2 AUTHENTICATION_FAILED
        case 2:
          listener.send('error', {
            error: '[orsay native player: AUTHENTICATION_FAILED]'
          });
          break;
        // 3 STREAM_NOT_FOUND
        case 3:
          listener.send('error', {
            error: '[orsay native player: STREAM_NOT_FOUND]'
          });
          break;
        // 4 NETWORK_DISCONNECTED
        case 4:
          listener.send('error', {
            error: '[orsay native player: NETWORK_DISCONNECTED]'
          });
          break;
        // 5 NETWORK_SLOW
        case 5:
          listener.send('error', {
            error: '[orsay native player: NETWORK_SLOW]'
          });
          break;
        // 6 RENDER_ERROR (a)
        case 6:
          switch (data) {
            case "0":
              listener.send('error', {
                error: '[orsay native player: UNKNOWN_ERROR]'
              });
              break;
            case "1":
              listener.send('error', {
                error: '[orsay native player: UNSUPPORTED_CONTAINER]'
              });
              break;
            case "2":
              listener.send('error', {
                error: '[orsay native player: UNSUPPORTED_VIDEO_CODEC]'
              });
              break;
            case "3":
              listener.send('error', {
                error: '[orsay native player: UNSUPPORTED_AUDIO_CODEC]'
              });
              break;
            case "4":
              listener.send('error', {
                error: '[orsay native player: UNSUPPORTED_VIDEO_RESOLUTION]'
              });
              break;
            case "5":
              listener.send('error', {
                error: '[orsay native player: UNSUPPORTED_VIDEO_FRAMERATE]'
              });
              break;
            case "6":
              listener.send('error', {
                error: '[orsay native player: CURRUPTED_STREAM]'
              });
              break;
            case "100":
              listener.send('error', {
                error: '[orsay native player: CUSTOM_ERROR]'
              });
              break;
          }
        // 7 RENDERING_START
        case 7:
          console.log('Player', 'RENDERING_START');
          break;
        // 8 RENDERING_COMPLETE
        case 8:
          console.log('Player', 'RENDERING_COMPLETE');
          avplay.stop();
          listener.send('ended');
          break;
        // 9 STREAM_INFO_READY
        case 9:
          canGetVideoResolution = true;
          $('body').toggleClass('orsay-player--show', true);
          console.log('Player', 'STREAM_INFO_READY');
          avplay.startSubtitle({
            path: "/dtv/temp/",
            streamID: 999,
            sync: 999,
            callback: function callback() {}
          });
          listener.send('loadeddata');
          break;
        // 10 DECODING_COMPLETE
        case 10:
          console.log('Player', 'DECODING_COMPLETE');
          break;
        case 11:
          console.log('Player', 'buffering start');
          listener.send('waiting');
          break;
        // 12 BUFFERING_COMPLETE
        case 12:
          console.log('Player', 'BUFFERING_COMPLETE');
          listener.send('playing');
          break;
        // 13 BUFFERING_PROGRESS
        case 13:
          listener.send('progress', {
            percent: data
          });
          break;
        // 14 CURRENT_PLAYBACK_TIME
        case 14:
          current_time = data;
          listener.send('timeupdate');
          if (change_scale_later) {
            changeScale(change_scale_later);
            change_scale_later = false;
          }
          if (change_speed_later) {
            changeSpeed(change_speed_later);
            change_speed_later = false;
          }
          break;
        // 15 AD_START
        case 15:
          console.log('Player', 'AD_START');
          break;
        // 16 AD_END
        case 16:
          console.log('Player', 'AD_END');
          break;
        // 17 RESOLUTION_CHANGED
        case 17:
          console.log('Player', 'RESOLUTION_CHANGED ' + data);
          break;
        // 18 BITRATE_CHANGED
        case 18:
          console.log('Player', 'BITRATE_CHANGED ' + data);
          break;
        // 19 SUBTITLE
        case 19:
          listener.send('subtitle', {
            text: data
          });
          break;
      }
    };

    /**
     * Загрузить
     */
    video.load = function () {
      if (stream_url) {
        if (avplay.open(stream_url)) {
          loaded = true;
          listener.send('canplay');
        }
      }
    };

    /**
     * Играть
     */
    video.play = function () {
      if (loaded) {
        if (avplay.status == '5') {
          avplay.resume();
        } else {
          avplay.play(function () {
            console.log('Player', 'play');
          }, function (e) {
            listener.send('error', {
              error: 'code [' + e.code + '] ' + e.message
            });
          });
        }
      }
    };

    /**
     * Пауза
     */
    video.pause = function () {
      if (loaded) avplay.pause();
    };

    /**
     * Установить масштаб
     */
    video.size = function (type) {
      changeScale(type);
    };

    /**
     * Установить скорость
     */
    video.speed = function (speed) {
      changeSpeed(speed);
    };

    /**
     * Уничтожить
     */
    video.destroy = function () {
      try {
        console.log('Player', 'destroy');
        avplay.destroy();
      } catch (e) {}
      $('body').toggleClass('orsay-player--show', false);
      video.remove();
      listener.destroy();
    };
    webapis.avplay.getAVPlay(function (av) {
      avplay = av;
    }, function (e) {
      listener.send('error', {
        error: 'code [' + e.code + '] ' + e.message
      });
    });
    call_video(video);
    return object;
  }

  function YouTube$1(call_video) {
    var stream_url, loaded;
    var needclick = true; //Platform.screen('mobile') || navigator.userAgent.toLowerCase().indexOf("android") >= 0

    var object = $('<div class="player-video__youtube"><div class="player-video__youtube-player" id="youtube-player"></div><div class="player-video__youtube-line-top"></div><div class="player-video__youtube-line-bottom"></div><div class="player-video__youtube-noplayed hide">' + Lang.translate('player_youtube_no_played') + '</div></div>');
    var video = object[0];
    var listener = start$8();
    var volume = 100;
    var youtube;
    var timeupdate;
    var timetapplay;
    var screen_size = 2;
    function videoSize() {
      var size = {
        width: 0,
        height: 0
      };
      if (youtube) {
        var str = '';
        try {
          str = youtube.getPlaybackQuality();
        } catch (e) {}
        if (str == 'highres' || str == 'hd2160') {
          size.width = 3840;
          size.height = 2160;
        } else if (str == 'hd1440') {
          size.width = 2560;
          size.height = 1440;
        } else if (str == 'hd1080') {
          size.width = 1920;
          size.height = 1080;
        } else if (str == 'hd720') {
          size.width = 1280;
          size.height = 720;
        } else {
          size.width = 854;
          size.height = 480;
        }
      }
      return size;
    }

    /**
     * Установить урл
     */
    Object.defineProperty(video, "src", {
      set: function set(url) {
        if (url) {
          stream_url = url;
        }
      },
      get: function get() {}
    });

    /**
     * Позиция
     */
    Object.defineProperty(video, "currentTime", {
      set: function set(t) {
        try {
          youtube.seekTo(t);
        } catch (e) {}
      },
      get: function get() {
        try {
          return youtube.getCurrentTime();
        } catch (e) {
          return 0;
        }
      }
    });

    /**
     * Длительность
     */
    Object.defineProperty(video, "duration", {
      set: function set() {},
      get: function get() {
        try {
          return youtube.getDuration();
        } catch (e) {
          return 0;
        }
      }
    });

    /**
     * Пауза
     */
    Object.defineProperty(video, "paused", {
      set: function set() {},
      get: function get() {
        if (needclick) return true;
        try {
          return youtube.getPlayerState() == YT.PlayerState.PAUSED;
        } catch (e) {
          return true;
        }
      }
    });

    /**
     * Аудиодорожки
     */
    Object.defineProperty(video, "audioTracks", {
      set: function set() {},
      get: function get() {
        return [];
      }
    });

    /**
     * Субтитры
     */
    Object.defineProperty(video, "textTracks", {
      set: function set() {},
      get: function get() {
        return [];
      }
    });

    /**
     * Ширина видео
     */
    Object.defineProperty(video, "videoWidth", {
      set: function set() {},
      get: function get() {
        return videoSize().width;
      }
    });

    /**
     * Высота видео
     */
    Object.defineProperty(video, "videoHeight", {
      set: function set() {},
      get: function get() {
        return videoSize().height;
      }
    });
    Object.defineProperty(video, "volume", {
      set: function set(num) {
        volume = num * 100;
        if (youtube) youtube.setVolume(volume);
      },
      get: function get() {}
    });

    /**
     * Всегда говорим да, мы можем играть
     */
    video.canPlayType = function () {
      return true;
    };
    video.resize = function () {
      object.find('.player-video__youtube-player').width(window.innerWidth * screen_size);
      object.find('.player-video__youtube-player').height((window.innerHeight + 600) * screen_size);
      object.find('.player-video__youtube-player').css({
        transform: 'scale(0.5)'
      });
    };

    /**
    * Вешаем кастомные события
    */
    video.addEventListener = listener.follow.bind(listener);

    /**
     * Загрузить
     */
    video.load = function () {
      if (stream_url && !youtube) {
        video.resize();
        var id = stream_url.replace('//youtu.be/', '//www.youtube.com/watch?v=').split('?v=').pop();
        if (typeof YT == 'undefined') {
          return object.append('<div class="player-video__youtube-needclick"><img src="https://img.youtube.com/vi/' + id + '/sddefault.jpg" /><div>' + Lang.translate('torrent_error_connect') + '</div></div>');
        }
        if (needclick) {
          object.append('<div class="player-video__youtube-needclick"><img src="https://img.youtube.com/vi/' + id + '/sddefault.jpg" /><div>' + Lang.translate('loading') + '...' + '</div></div>');
          timetapplay = setTimeout(function () {
            object.find('.player-video__youtube-needclick div').text(Lang.translate('player_youtube_start_play'));
            PlayerPanel.update('pause');
          }, 10000);
        }
        console.log('YouTube', 'create');
        youtube = new YT.Player('youtube-player', {
          height: (window.innerHeight + 600) * screen_size,
          width: window.innerWidth * screen_size,
          playerVars: {
            'controls': 1,
            'showinfo': 0,
            'autohide': 1,
            'modestbranding': 1,
            'autoplay': 1,
            'disablekb': 1,
            'fs': 0,
            'enablejsapi': 1,
            'playsinline': 1,
            'rel': 0,
            'suggestedQuality': 'hd1080',
            'setPlaybackQuality': 'hd1080'
          },
          videoId: id,
          events: {
            onReady: function onReady(event) {
              loaded = true;
              youtube.setVolume(volume);
              listener.send('canplay');
              listener.send('loadeddata');
              timeupdate = setInterval(function () {
                if (youtube.getPlayerState() !== YT.PlayerState.PAUSED) listener.send('timeupdate');
              }, 100);
              if (needclick) listener.send('playing');
            },
            onStateChange: function onStateChange(state) {
              object.removeClass('ended');
              if (needclick) object.find('.player-video__youtube-needclick div').text(Lang.translate('loading') + '...');
              if (state.data == YT.PlayerState.PLAYING) {
                listener.send('playing');
                clearTimeout(timetapplay);
                if (needclick) {
                  needclick = false;
                  setTimeout(function () {
                    object.find('.player-video__youtube-needclick').remove();
                  }, 500);
                }
              }
              if (state.data == YT.PlayerState.ENDED) {
                object.addClass('ended');
                listener.send('ended');
              }
              if (state.data == YT.PlayerState.BUFFERING) {
                listener.send('waiting');
                state.target.setPlaybackQuality('hd1080');
              }
            },
            onPlaybackQualityChange: function onPlaybackQualityChange(state) {
              console.log('YouTube', 'quality', youtube.getPlaybackQuality());
            },
            onError: function onError(e) {
              object.find('.player-video__youtube-noplayed').removeClass('hide');
              object.addClass('ended');
              if (needclick) object.find('.player-video__youtube-needclick').remove();
              clearTimeout(timetapplay);
            }
          }
        });
      }
    };

    /**
     * Играть
     */
    video.play = function () {
      try {
        youtube.playVideo();
      } catch (e) {}
    };

    /**
     * Пауза
     */
    video.pause = function () {
      try {
        youtube.pauseVideo();
      } catch (e) {}
    };

    /**
     * Установить масштаб
     */
    video.size = function (type) {};

    /**
     * Установить скорость
     */
    video.speed = function (speed) {};

    /**
     * Уничтожить
     */
    video.destroy = function () {
      if (loaded) {
        clearInterval(timeupdate);
        try {
          youtube.destroy();
        } catch (e) {}
      }
      object.remove();
      clearTimeout(timetapplay);
      listener.destroy();
    };
    call_video(video);
    return object;
  }

  var loaded_data$1 = {
    ad: [],
    time: 0,
    position: 0
  };
  function stat$3(method, name) {
    $.ajax({
      dataType: 'text',
      url: Utils$2.protocol() + object$2.pris_domain + '/api/ad/stat?platform=' + Platform.get() + '&type=video&method=' + method + '&name=' + name
    });
  }
  var VideoBlock = /*#__PURE__*/function () {
    function VideoBlock(number) {
      _classCallCheck(this, VideoBlock);
      this.network = new create$e();
      this.listener = start$8();
      this.paused = false;
      this.number = number || 1;
      if (loaded_data$1.time < Date.now() + 1000 * 60 * 60 * 1) this.get();else if (loaded_data$1.ad.length) setTimeout(this.start.bind(this), 100);else this.get();
    }
    return _createClass(VideoBlock, [{
      key: "get",
      value: function get() {
        var _this = this;
        var domain = object$2.pris_domain;
        this.network.timeout(5000);
        this.network.silent(Utils$2.protocol() + domain + '/api/ad/all', function (data) {
          loaded_data$1.time = Date.now();
          var need_shuffle = !loaded_data$1.ad.length;
          data.forEach(function (elem) {
            var ad = loaded_data$1.ad.find(function (a) {
              return a.url == elem.url;
            });
            if (!ad) {
              ad = elem;
              loaded_data$1.ad.push(elem);
            }
            ad.volume = elem.volume;
            ad.duration = elem.duration;
          });
          if (need_shuffle) Arrays.shuffle(loaded_data$1.ad);
          _this.start();
        }, function () {
          _this.listener.send('empty');
        });
      }
    }, {
      key: "start",
      value: function start() {
        var ad = loaded_data$1.ad[loaded_data$1.position];
        if (!ad) {
          loaded_data$1.position = 0;
          Arrays.shuffle(loaded_data$1.ad);
          ad = loaded_data$1.ad[0];
        }
        loaded_data$1.position++;
        if (ad) {
          this.time = Date.now();
          this.create(ad);
          this.load(ad);
        }
      }
    }, {
      key: "load",
      value: function load(data) {
        this.video.src = data.url;
        this.video.load();
      }
    }, {
      key: "create",
      value: function create(data) {
        var _this2 = this;
        stat$3('launch', '');
        this.block = Template.js('ad_video_block');
        this.block.find('.ad-video-block__text').text(Lang.translate('ad') + ' - ' + Lang.translate('ad_disable'));
        this.block.find('.ad-video-block__info').text(data.info || '');
        this.video = this.block.find('.ad-video-block__video');
        var detention = 0;
        var duration = data.duration;
        var passed = 0;
        var skip = this.block.find('.ad-video-block__skip');
        var progressbar = this.block.find('.ad-video-block__progress-fill');
        var pause = this.block.find('.player-video__paused');
        var skip_sec = data.skip ? data.skip / 1000 : 10;
        skip.find('span').text(skip_sec);
        if (duration <= 1000 * skip_sec) skip.classList.add('hide');
        this.video.addEventListener('loadeddata', function () {
          _this2.video.play();
          detention = Math.min(1000 * 2, Date.now() - _this2.time);
          _this2.video.classList.add('loaded');
          _this2.block.find('.ad-video-block__loader').remove();
        });
        this.video.addEventListener('timeupdate', function () {
          _this2.listener.send('timeupdate');
        });
        this.video.addEventListener('ended', function () {
          _this2.destroy();
        });
        function enter() {
          var left = Math.max(0, Math.round(skip_sec - passed / 1000));
          if (left == 0) return this.destroy();
          if (this.video.paused) {
            this.video.play();
            pause.classList.add('hide');
            this.paused = false;
          } else {
            this.video.pause();
            pause.classList.remove('hide');
            this.paused = true;
          }
        }
        this.block.on('click', enter.bind(this));
        this.video.volume = (Boolean(Platform.is('nw') || Platform.is('browser') || Platform.is('apple') && !Utils$2.isPWA()) ? parseFloat(Storage.get('player_volume', '1')) : 1) * data.volume;
        this.video.muted = false;
        document.body.append(this.block);
        this.timer = setInterval(function () {
          if (_this2.paused) return;
          passed += 100;
          var progress = Math.min(100, passed / (duration + detention) * 100);
          var left = Math.max(0, Math.round(skip_sec - passed / 1000));
          progressbar.style.width = progress + '%';
          skip.find('span').text(Lang.translate(left == 0 ? 'ad_skip' : left));
          if (progress == 100) _this2.destroy();
        }, 100);
        Controller.add('ad_video_block', {
          toggle: function toggle() {
            Controller.clear();
          },
          enter: enter.bind(this),
          back: function back() {}
        });
        Controller.toggle('ad_video_block');
        this.listener.send('launch');
        if (data.stat) {
          $.ajax({
            dataType: 'text',
            url: data.stat
          });
        }
      }
    }, {
      key: "destroy",
      value: function destroy() {
        clearInterval(this.timer);
        this.video.pause();
        this.video.src = '';
        this.block.remove();
        this.listener.send('ended');
      }
    }]);
  }();

  var components$2 = {};
  var params$2 = {};

  /**
   * Добавить компонент
   * @param {{component:string, icon:string, name:string}} data 
   */
  function addComponent(data) {
    components$2[data.component] = data;
    Template.add('settings_' + data.component, '<div></div>');
  }

  /**
   * Получить компонент
   * @param {string} component 
   * @returns {{component:string, icon:string, name:string}}
   */
  function getComponent(component) {
    return components$2[component];
  }

  /**
   * Добавить параметр
   * @param {{component:string, param:{name:string, type:string, values:string|object, default:string|boolean}, field:{name:string, description:string|undefined}, onRender:((item)=>void)|undefined, onChange?:((e)=>void)|undefined}} data 
   */
  function addParam(data) {
    if (!params$2[data.component]) params$2[data.component] = [];
    params$2[data.component].push(data);
    if (data.param.type == 'select' || data.param.type == 'input') Params.select(data.param.name, data.param.values, data.param["default"]);
    if (data.param.type == 'trigger') Params.trigger(data.param.name, data.param["default"]);
  }

  /**
   * Получить параметры
   * @param {string} component 
   * @returns {[{component:string, param:{name:string, type:string, values:string|object, default:string|boolean}, field:{name:string, description:string|undefined}, onRender:((item)=>void)|undefined, onChange?:((e)=>void)|undefined}]}
   */
  function getParam(component) {
    return params$2[component];
  }

  /**
   * Получить все компоненты
   * @returns {{name:{component:string, icon:string, name:string}}}
   */
  function allComponents() {
    return components$2;
  }

  /**
   * Получить все параметры
   * @returns {{component:[{component:string, param:{name:string, type:string, values:string|object, default:string|boolean}, field:{name:string, description:string|undefined}, onRender:((item)=>void)|undefined, onChange?:((e)=>void)|undefined}]}}
   */
  function allParams() {
    return params$2;
  }
  var SettingsApi = {
    allComponents: allComponents,
    allParams: allParams,
    addComponent: addComponent,
    addParam: addParam,
    getComponent: getComponent,
    getParam: getParam
  };

  var html$j;
  var controll$1;
  var active$5 = {};
  function open$6() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    active$5 = params;
    controll$1 = Controller.enabled().name;
    html$j = $('<div></div>');
    var keys = Object.keys(localStorage);
    keys.sort(function (a, b) {
      return a.localeCompare(b);
    });
    keys.forEach(function (key) {
      var value = Utils$2.shortText(localStorage.getItem(key), 50);
      var line = $('<div class="console__line selector"><span style="color: hsl(175, 49.70%, 64.90%)">' + key + '</span> ' + value + '</div>');
      line.on('hover:enter', function () {
        Select.show({
          title: key,
          items: [{
            title: Lang.translate('settings_remove'),
            action: 'delete'
          }],
          onSelect: function onSelect(selected) {
            Controller.toggle('modal');
            if (selected.action == 'delete') {
              localStorage.removeItem(key);
              line.remove();
            }
          },
          onBack: function onBack() {
            Controller.toggle('modal');
          }
        });
      });
      html$j.append(line);
    });
    Modal.open({
      title: Lang.translate('settings_manager'),
      size: 'large',
      html: html$j,
      onBack: close$7
    });
  }
  function close$7() {
    html$j.remove();
    Modal.close();
    if (active$5.onBack) active$5.onBack();else Controller.toggle(controll$1);
    active$5 = {};
  }
  var StorageMenager = {
    close: close$7,
    open: open$6
  };

  function Component$1(name) {
    var component_params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var scrl = new create$f({
      mask: true,
      over: true,
      step: 200
    });
    var comp = Template.get('settings_' + name);
    var last;
    scrl.addSwipeDown(function () {
      Controller.back();
    });

    /**
     * Обновить скролл
     */
    function updateScroll() {
      comp.find('.selector').unbind('hover:focus').on('hover:focus', function (e) {
        last = e.target;
        scrl.update($(e.target), true);
      }).unbind('hover:hover hover:touch').on('hover:hover hover:touch', function (e) {
        last = e.target;
      });
    }

    /**
     * Билдим все события
     */
    function buildEvents() {
      if (!Platform.is('android')) {
        comp.find('.is--android').remove();
      }
      if (!Platform.any()) {
        comp.find('.is--player').remove();
      }
      if (!Platform.desktop() || Platform.macOS()) {
        comp.find('.is--nw').remove();
      }
      if (!(Platform.is('android') || Platform.is('browser') || Platform.is('apple_tv') || Platform.desktop())) {
        comp.find('.is--sound').remove();
      }

      // Удаляем элементы только для ТВ, если платформа не ТВ
      if (!Platform.screen('tv')) {
        comp.find('.is--tv').remove();
      }
      if (!window.prisma_settings.lang_use) comp.find('[data-name="light_version"]').prev().remove();
      scrl.render().find('.scroll__content').addClass('layer--wheight').data('mheight', $('.settings__head'));
      scrl.render().css('max-height', window.innerWidth <= 480 ? window.innerHeight * 0.6 : 'unset');
      var clear = comp.find('.clear-storage');
      clear.on('hover:enter', function () {
        var controller = Controller.enabled().name;
        var status = clear.find('.settings-param__descr');
        Select.show({
          title: Lang.translate('settings_rest_cache'),
          items: [
          // Нагружает систему, пока не используется
          // {
          //     title: Lang.translate('settings_rest_cache_calculate'),
          //     action: 'calculate'
          // },
          {
            title: Lang.translate('extensions_edit'),
            action: 'manager'
          }, {
            title: Lang.translate('more'),
            separator: true
          }, {
            title: Lang.translate('settings_rest_cache_only'),
            subtitle: Lang.translate('settings_rest_cache_only_descr')
          }, {
            title: Lang.translate('settings_rest_cache_all'),
            subtitle: Lang.translate('settings_rest_cache_all_descr'),
            full: true
          }],
          onSelect: function onSelect(a) {
            Controller.toggle(controller);
            if (a.action == 'calculate') {
              Storage.getsize(function (size) {
                status.text(Lang.translate('title_left') + ' - ' + Prisma.Utils.bytesToSize(size));
              });
            } else if (a.action == 'manager') {
              StorageMenager.open({
                onBack: function onBack() {
                  Controller.toggle(controller);
                }
              });
            } else {
              Storage.clear(a.full);
              Cache.clearAll();
            }
          },
          onBack: function onBack() {
            Controller.toggle(controller);
          }
        });
      });
      Params.bind(comp.find('.selector'), comp);
      Params.listener.follow('update_scroll', updateScroll);
      Params.listener.follow('update_scroll_position', function () {
        if (last) scrl.update($(last), true);
      });
      updateScroll();
    }

    /**
     * Добавляем пользовательские параметры
     */
    function addParams() {
      var params = SettingsApi.getParam(name);
      if (params) {
        params.forEach(function (data) {
          var item;
          if (data.param.type == 'select') {
            item = $("<div class=\"settings-param selector\" data-type=\"select\" data-name=\"".concat(data.param.name, "\">\n                        <div class=\"settings-param__name\">").concat(data.field.name, "</div>\n                        <div class=\"settings-param__value\"></div>\n                    </div>"));
          }
          if (data.param.type == 'trigger') {
            item = $("<div class=\"settings-param selector\" data-type=\"toggle\" data-name=\"".concat(data.param.name, "\">\n                        <div class=\"settings-param__name\">").concat(data.field.name, "</div>\n                        <div class=\"settings-param__value\"></div>\n                    </div>"));
          }
          if (data.param.type == 'input') {
            item = $("<div class=\"settings-param selector\" data-type=\"input\" data-name=\"".concat(data.param.name, "\" placeholder=\"").concat(data.param.placeholder, "\">\n                        <div class=\"settings-param__name\">").concat(data.field.name, "</div>\n                        <div class=\"settings-param__value\"></div>\n                    </div>"));
          }
          if (data.param.type == 'title') {
            item = $("<div class=\"settings-param-title\"><span>".concat(data.field.name, "</span></div>"));
          }
          if (data.param.type == 'static') {
            item = $("<div class=\"settings-param selector\" data-static=\"true\">\n                        <div class=\"settings-param__name\">".concat(data.field.name, "</div>\n                    </div>"));
          }
          if (data.param.type == 'button') {
            item = $("<div class=\"settings-param selector settings-param--button\" data-name=\"".concat(data.param.name, "\" data-static=\"true\" data-type=\"button\">\n                        <div class=\"settings-param__name\">").concat(data.field.name, "</div>\n                    </div>"));
          }
          if (item) {
            if (data.field.description) item.append("<div class=\"settings-param__descr\">".concat(data.field.description, "</div>"));
            if (typeof data.onRender == 'function') data.onRender(item);
            if (typeof data.onChange == 'function') item.data('onChange', data.onChange);
            comp.append(item);
          }
        });
      }
    }

    /**
     * Стартуем
     */
    function start() {
      addParams();
      buildEvents();
      if (typeof component_params.last_index !== 'undefined' && component_params.last_index > 0) last = comp.find('.selector').eq(component_params.last_index)[0];
      Controller.add('settings_component', {
        toggle: function toggle() {
          Controller.collectionSet(comp);
          Controller.collectionFocus(last, comp);
        },
        up: function up() {
          Navigator.move('up');
        },
        down: function down() {
          Navigator.move('down');
        },
        back: function back() {
          scrl.destroy();
          comp.remove();
          Params.listener.remove('update_scroll', updateScroll);
          if (component_params.onBack) component_params.onBack();else Controller.toggle('settings');
        }
      });
    }
    start();

    /**
     * Уничтожить
     */
    this.destroy = function () {
      scrl.destroy();
      comp.remove();
      comp = null;
      Params.listener.remove('update_scroll', updateScroll);
    };

    /**
     * Рендер
     * @returns {object}
     */
    this.render = function () {
      scrl.append(comp);
      return scrl.render();
    };
  }

  // Полифилл для метода repeat
  if (!String.prototype.repeat) {
    String.prototype.repeat = function (count) {

      if (this == null) {
        throw new TypeError('can\'t convert ' + this + ' to object');
      }
      var str = '' + this;
      count = +count;
      if (count != count) {
        count = 0;
      }
      if (count < 0) {
        throw new RangeError('repeat count must be non-negative');
      }
      if (count == Infinity) {
        throw new RangeError('repeat count must be less than infinity');
      }
      count = Math.floor(count);
      if (str.length == 0 || count == 0) {
        return '';
      }
      // Обеспечиваем, что count является 31-битным целым числом. Это нужно для работы в Firefox.
      if (str.length * count >= 1 << 28) {
        throw new RangeError('repeat count must not overflow maximum string size');
      }
      var rpt = '';
      for (;;) {
        if ((count & 1) == 1) {
          rpt += str;
        }
        count >>>= 1;
        if (count == 0) {
          break;
        }
        str += str;
      }
      return rpt;
    };
  }

  // Полифилл для метода padStart для поддержки старых браузеров
  if (!String.prototype.padStart) {
    String.prototype.padStart = function padStart(targetLength, padString) {
      targetLength = targetLength >> 0; // truncate if number, or convert non-number to 0;
      padString = String(typeof padString !== 'undefined' ? padString : ' ');
      if (this.length >= targetLength) {
        return String(this);
      } else {
        targetLength = targetLength - this.length;
        if (targetLength > padString.length) {
          padString += padString.repeat(targetLength / padString.length); // append to original to ensure we are longer than needed
        }
        return padString.slice(0, targetLength) + String(this);
      }
    };
  }
  function Main$1() {
    var _this = this;
    var comp;
    var scrl = new create$f({
      mask: true,
      over: true,
      step: 200
    });
    var last;
    var time_node;
    var timer_interval;

    /**
     * Создать
     */
    this.create = function () {
      comp = Template.get('settings_main');
      if (!window.prisma_settings.account_use) comp.find('[data-component="account"]').remove();
      if (!window.prisma_settings.plugins_use) comp.find('[data-component="plugins"]').remove();
      if (!window.prisma_settings.torrents_use) {
        comp.find('[data-component="parser"]').remove();
        comp.find('[data-component="server"]').remove();
      }
      scrl.render().css('max-height', window.innerWidth <= 480 ? window.innerHeight * 0.6 : 'unset');
      scrl.append(comp);
      scrl.addSwipeDown(_this.swipeAction);

      // Слушаем изменения размера интерфейса
      Storage.listener.follow('change', function (event) {
        if (event.name == 'interface_size' || event.name == 'interface_size_fixed') {
          // Обновляем высоту скролла и позиции элементов
          setTimeout(function () {
            scrl.height($('.settings__head'));
            _this.updateScroll();

            // Переинициализируем отображение времени при изменении размера интерфейса
            if (time_node) {
              updateDateTime();
            }
          }, 100);
        }
      });
      _this.update();
    };

    /**
     * Очистить интервал обновления времени
     */
    this.clearTimeInterval = function () {
      if (timer_interval) {
        clearInterval(timer_interval);
        timer_interval = null;
      }
    };

    /**
     * Обновить дату и время
     */
    function updateDateTime() {
      var now = new Date();
      var currentLang = Storage.get('language', 'ru');

      // Данные для локализации
      var weekdays = {
        ru: ['вс', 'пн', 'вт', 'ср', 'чт', 'пт', 'сб'],
        en: ['Sun', 'Mon', 'Tue', 'Wed', 'Thu', 'Fri', 'Sat'],
        uk: ['нд', 'пн', 'вт', 'ср', 'чт', 'пт', 'сб']
      };
      var months = {
        ru: ['янв', 'фев', 'мар', 'апр', 'май', 'июн', 'июл', 'авг', 'сен', 'окт', 'ноя', 'дек'],
        en: ['Jan', 'Feb', 'Mar', 'Apr', 'May', 'Jun', 'Jul', 'Aug', 'Sep', 'Oct', 'Nov', 'Dec'],
        uk: ['січ', 'лют', 'бер', 'кві', 'тра', 'чер', 'лип', 'сер', 'вер', 'жов', 'лис', 'гру']
      };

      // Используем значения по умолчанию, если локализация отсутствует
      var dayOfWeek = weekdays[currentLang] ? weekdays[currentLang][now.getDay()] : weekdays.en[now.getDay()];
      var month = months[currentLang] ? months[currentLang][now.getMonth()] : months.en[now.getMonth()];
      var day = now.getDate();
      var hours = String(now.getHours()).padStart(2, '0');
      var minutes = String(now.getMinutes()).padStart(2, '0');

      // Проверяем размер интерфейса для выбора формата отображения даты
      var interfaceSize = Storage.field('interface_size');

      // При большом размере интерфейса используем более компактный формат даты
      if (interfaceSize === 'bigger' || interfaceSize === 'fixed') {
        // Проверяем разрешение экрана для выбора формата
        var isSmallScreen = window.innerWidth <= 1280 && window.innerHeight <= 720;
        if (isSmallScreen) {
          // Для малых экранов делаем более компактный формат в одну строку
          time_node.text("".concat(hours, ":").concat(minutes));
        } else {
          // Для больших экранов можем использовать двухстрочный формат
          time_node.html("".concat(hours, ":").concat(minutes, "<br>").concat(dayOfWeek, ", ").concat(day, " ").concat(month));
        }
      } else {
        time_node.text("".concat(dayOfWeek, ", ").concat(day, " ").concat(month, ". ").concat(hours, ":").concat(minutes));
      }
    }

    /**
     * Обновить события
     */
    this.update = function () {
      var components = SettingsApi.allComponents();
      for (var name in components) {
        var aded = components[name];
        if (!comp.find('[data-component="' + name + '"]').length) {
          var item = $("<div class=\"settings-folder selector\" data-component=\"".concat(name, "\">\n                    <div class=\"settings-folder__icon\">\n                        ").concat(aded.icon, "\n                    </div>\n                    <div class=\"settings-folder__name\">").concat(aded.name, "</div>\n                </div>"));
          if (aded.before) comp.find('[data-component="' + aded.before + '"]').before(item);else if (aded.after) comp.find('[data-component="' + aded.after + '"]').after(item);else comp.append(item);
        }
      }
      comp.find('.selector').unbind('hover:focus').on('hover:focus', function (event) {
        last = event.target;
        scrl.update($(event.target), true);
      }).unbind('hover:hover hover:touch').on('hover:hover hover:touch', function (event) {
        last = event.target;
        Navigator.focused(event.target);
      }).not('[data-static]').unbind('hover:enter').on('hover:enter', function (event) {
        _this.render().detach();
        _this.onCreate($(event.target).data('component'));
      });
    };

    /**
     * Обновить скролл и позиции элементов
     */
    this.updateScroll = function () {
      if (last) {
        scrl.update($(last), true);
      }
    };

    /**
     * Сделать активным
     */
    this.active = function () {
      // Инициализируем текущее время
      time_node = $('.settings__time');
      updateDateTime();

      // Обновляем время каждую минуту
      this.clearTimeInterval();
      timer_interval = setInterval(updateDateTime, 60000);
      Controller.collectionSet(comp);
      Controller.collectionFocus(last, comp);
      scrl.height($('.settings__head'));
    };

    /**
     * Рендер
     * @returns {object}
     */
    this.render = function () {
      return scrl.render();
    };
  }

  var already_requested = false;
  var last_time_requested = 0;
  var personal_codes = {};
  function init$N() {
    Params.trigger('parental_control', false);
    Params.select('parental_control_time', {
      'always': '#{settings_parental_control_param_time_always}',
      'once': '#{settings_parental_control_param_time_once}',
      '10': '#{settings_parental_control_param_time_10}',
      '20': '#{settings_parental_control_param_time_20}',
      '30': '#{settings_parental_control_param_time_30}',
      '60': '#{settings_parental_control_param_time_60}',
      '120': '#{settings_parental_control_param_time_120}'
    }, 'once');
    Template.add('settings_parental_control', "<div>\n        <div class=\"settings-param selector parental-control-toggle\" data-type=\"button\" data-static=\"true\">\n            <div class=\"settings-param__name\">#{title_parental_control}</div>\n            <div class=\"settings-param__value\"></div>\n        </div>\n        <div class=\"parental-control-other\">\n            <div class=\"settings-param selector settings-param--button parental-control-change\" data-type=\"button\" data-static=\"true\">\n                <div class=\"settings-param__name\">#{settings_parental_control_change_pin}</div>\n            </div>\n            <div class=\"settings-param selector\" data-type=\"select\" data-name=\"parental_control_time\">\n                <div class=\"settings-param__name\">#{settings_parental_control_demand_title}</div>\n                <div class=\"settings-param__value\"></div>\n                <div class=\"settings-param__descr\">#{settings_parental_control_demand_descr}</div>\n            </div>\n            <div class=\"parental-control-personal\">\n                <div class=\"settings-param-title\"><span>#{settings_parental_control_where}</span></div>\n                <div class=\"parental-control-personal-list\"></div>\n            </div>\n        </div>\n    </div>");
    Settings.listener.follow('open', function (e) {
      if (e.name == 'parental_control') {
        var toggle = e.body.find('.parental-control-toggle');
        var change = e.body.find('.parental-control-change');
        var other = e.body.find('.parental-control-other');
        var active;
        var updateStatus = function updateStatus() {
          toggle.find('.settings-param__value').text(Lang.translate(Storage.field('parental_control') ? 'settings_parental_control_enabled' : 'settings_parental_control_disabled'));
          other.toggleClass('hide', !Boolean(Storage.field('parental_control')));
        };
        var drawPersonalList = function drawPersonalList() {
          var enabled = Storage.get('parental_control_personal', '[]');
          var list = e.body.find('.parental-control-personal-list');
          var item = function item(name, data) {
            var line = $("<div class=\"selectbox-item selector selectbox-item--checkbox\" data-type=\"button\" data-static=\"true\">\n                        <div class=\"selectbox-item__title\">".concat(Lang.translate(data.title), "</div>\n                        <div class=\"selectbox-item__checkbox\"></div>\n                    </div>"));
            if (enabled.indexOf(name) >= 0) line.addClass('selectbox-item--checked');
            line.on('hover:enter', function () {
              active = Controller.enabled().name;
              query(function () {
                enabled = Storage.get('parental_control_personal', '[]');
                if (enabled.indexOf(name) >= 0) {
                  Arrays.remove(enabled, name);
                  Storage.set('parental_control_personal', enabled);
                  line.removeClass('selectbox-item--checked');
                } else {
                  Storage.add('parental_control_personal', name);
                  line.addClass('selectbox-item--checked');
                }
                Controller.toggle(active);
              }, function () {
                Controller.toggle(active);
              });
            });
            list.append(line);
          };
          for (var name in personal_codes) item(name, personal_codes[name]);
          Params.listener.send('update_scroll');
        };
        toggle.on('hover:enter', function () {
          active = Controller.enabled().name;
          if (Storage.field('parental_control')) {
            request(function () {
              Storage.set('parental_control', false);
              updateStatus();
              Controller.toggle(active);
            }, function () {
              Controller.toggle(active);
            });
          } else if (!Storage.value('parental_control_pin')) {
            set$3(function (code) {
              if (code) {
                Storage.set('parental_control_pin', code);
                Storage.set('parental_control', true);
                updateStatus();
              }
            });
          } else {
            Storage.set('parental_control', true);
            updateStatus();
          }
        });
        change.on('hover:enter', function () {
          active = Controller.enabled().name;
          if (Storage.value('parental_control_pin')) {
            request(function () {
              set$3(function (code) {
                if (code) {
                  Storage.set('parental_control_pin', code);
                }
                Controller.toggle(active);
              });
            }, function () {
              Controller.toggle(active);
            });
          }
        });
        updateStatus();
        drawPersonalList();
      }
    });
    add$b('bookmarks', {
      title: 'settings_input_links'
    });
  }

  /**
   * Запрос на установку PIN-кода
   * @param {function} call - вызов
   */
  function set$3(call) {
    var active = Controller.enabled().name;
    pin(Lang.translate('parental_control_input_new_code'), function (code_one) {
      if (code_one) {
        pin(Lang.translate('parental_control_confirm_new_code'), function (code_two) {
          if (code_one == code_two) {
            Controller.toggle(active);
            call(code_two);
          } else {
            Controller.toggle(active);
            Noty$1.show(Lang.translate('parental_control_no_match_code'));
            call();
          }
        });
      } else {
        Controller.toggle(active);
        call();
      }
    });
  }

  /**
   * Показать экран ввода пина
   * @param {string} title - заголовок
   * @param {function} call - вызов
   */
  function pin(title, call) {
    var input = '';
    var html_layer = $("<div class=\"pincode\">\n        <div class=\"pincode__container\">\n            <div class=\"pincode__title\">".concat(title, "</div>\n        </div>\n    </div>"));
    var html_code = $("<div class=\"pincode__code\">\n        <div></div>\n        <div></div>\n        <div></div>\n        <div></div>\n    </div>");
    var drawPin = function drawPin() {
      var div = html_code.find('div').removeClass('fill');
      for (var i = 0; i < 4; i++) {
        if (input[i]) div.eq(i).addClass('fill');
      }
    };
    var removeNum = function removeNum() {
      input = input.slice(0, Math.max(0, input.length - 1));
      drawPin();
      if (!input) callClose();
    };
    var callClose = function callClose() {
      html_layer.remove();
      call(input);
    };
    if (Platform.screen('tv')) {
      var html_body = $("<div class=\"pincode__body\">\n            <div class=\"pincode__left\">\n                <div class=\"pincode__text\">\n                    ".concat(Lang.translate('pincode_use_remote'), "\n                </div>\n                <div class=\"pincode__text\">\n                    ").concat(Lang.translate('pincode_use_toggle'), "\n                </div>\n            </div>\n            <div class=\"pincode__right\">\n                <div class=\"pincode-remote\">\n                    <div class=\"pincode-remote__light\"></div>\n                    <div class=\"pincode-remote__circle\">\n                        <svg width=\"77\" height=\"77\" viewBox=\"0 0 77 77\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                            <circle cx=\"38.5\" cy=\"38.5\" r=\"38.5\" fill=\"#666666\"/>\n                            <circle cx=\"38.5\" cy=\"38.5\" r=\"18.5\" fill=\"#2E2E2E\"/>\n                            <circle cx=\"38.5\" cy=\"38.5\" r=\"15.5\" fill=\"#666666\"/>\n                            <path d=\"M13.8977 12.6906L23.7972 22.5901L23.0901 23.2972L13.1906 13.3977L13.8977 12.6906Z\" fill=\"#020202\" fill-opacity=\"0.14\"/>\n                            <path d=\"M54.9099 53.7028L64.8094 63.6023L64.1023 64.3094L54.2028 54.4099L54.9099 53.7028Z\" fill=\"#020202\" fill-opacity=\"0.14\"/>\n                            <path d=\"M13.1906 63.6023L23.0901 53.7028L23.7972 54.4099L13.8977 64.3094L13.1906 63.6023Z\" fill=\"#020202\" fill-opacity=\"0.14\"/>\n                            <path d=\"M54.2028 22.5901L64.1023 12.6906L64.8094 13.3977L54.9099 23.2972L54.2028 22.5901Z\" fill=\"#020202\" fill-opacity=\"0.14\"/>\n                        </svg>\n                        <div class=\"pincode-remote__circle-pulse\"></div>\n                        <div class=\"pincode-remote__nums\">\n                            <div class=\"pincode-remote__num-top\"><span>1</span></div>\n                            <div class=\"pincode-remote__circle-center\">\n                                <div class=\"pincode-remote__num-left\"><span>4</span></div>\n                                <div class=\"pincode-remote__num-center\"><span>0</span></div>\n                                <div class=\"pincode-remote__num-right\"><span>2</span></div>\n                            </div>\n                            <div class=\"pincode-remote__num-bottom\"><span>3</span></div>\n                        </div>\n                    </div>\n\n                    <div class=\"pincode-remote__remove\">\n                        <div class=\"pincode-remote__remove-icon\">\n                            <svg width=\"13\" height=\"13\" viewBox=\"0 0 13 13\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                                <circle cx=\"6.5\" cy=\"6.5\" r=\"6\" stroke=\"white\" stroke-opacity=\"0.21\"/>\n                                <rect x=\"4.2952\" y=\"6.49226\" width=\"4.45542\" height=\"1.2899\" rx=\"0.644948\" transform=\"rotate(-45 4.2952 6.49226)\" fill=\"#D9D9D9\"/>\n                                <rect width=\"4.45542\" height=\"1.29877\" rx=\"0.649387\" transform=\"matrix(0.707107 0.707107 0.707107 -0.707107 4.2952 6.50774)\" fill=\"#D9D9D9\"/>\n                            </svg>\n                        </div>\n                        <div class=\"pincode-remote__remove-text\">").concat(Lang.translate('settings_remove'), "</div>\n                    </div>\n                </div>\n            </div>\n        </div>"));
      html_body.find('.pincode__left').prepend(html_code);
      html_layer.find('.pincode__container').append(html_body);
      var layout_active = 0;
      var layout_keys = [[1, 2, 3, 4, '0'], [5, 6, 7, 8, 9]];
      var drawLayout = function drawLayout() {
        var keys = layout_keys[layout_active];
        html_body.find('.pincode-remote__num-top span').text(keys[0]);
        html_body.find('.pincode-remote__num-right span').text(keys[1]);
        html_body.find('.pincode-remote__num-bottom span').text(keys[2]);
        html_body.find('.pincode-remote__num-left span').text(keys[3]);
        html_body.find('.pincode-remote__num-center span').text(keys[4]);
      };
      var animate = function animate() {
        var elem = html_body.find('.pincode-remote').removeClass('push');
        setTimeout(function () {
          elem.addClass('push');
        }, 60);
      };
      var writeNum = function writeNum(key) {
        input = input + layout_keys[layout_active][key];
        drawPin();
        if (input.length == 4) callClose();else animate();
      };
      drawLayout();
      Controller.add('parental_controll', {
        toggle: function toggle() {
          Controller.clear();
        },
        "long": function long() {
          layout_active++;
          if (layout_active >= layout_keys.length) layout_active = 0;
          drawLayout();
        },
        enter: function enter() {
          writeNum(4);
        },
        left: function left() {
          writeNum(3);
        },
        up: function up() {
          writeNum(0);
        },
        down: function down() {
          writeNum(2);
        },
        right: function right() {
          writeNum(1);
        },
        back: function back() {
          removeNum();
        }
      });
      Prisma.Controller.toggle('parental_controll');
    } else {
      html_layer.addClass('mobile');
      var html_keyboard = $("<div class=\"pincode-keyboard\">\n            <div data-key=\"1\" class=\"selector\"><span>1</span></div>\n            <div data-key=\"2\" class=\"selector\"><span>2</span></div>\n            <div data-key=\"3\" class=\"selector\"><span>3</span></div>\n            <div data-key=\"4\" class=\"selector\"><span>4</span></div>\n            <div data-key=\"5\" class=\"selector\"><span>5</span></div>\n            <div data-key=\"6\" class=\"selector\"><span>6</span></div>\n            <div data-key=\"7\" class=\"selector\"><span>7</span></div>\n            <div data-key=\"8\" class=\"selector\"><span>8</span></div>\n            <div data-key=\"9\" class=\"selector\"><span>9</span></div>\n            <div data-key=\"0\" class=\"selector\"><span>0</span></div>\n            <div></div>\n            <div class=\"remove selector\">\n                <svg width=\"139\" height=\"105\" viewBox=\"0 0 139 105\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M125.969 0.375122H47.5564C43.6325 0.375122 39.955 2.11446 37.4647 5.15569L0.979756 49.7513C-0.326911 51.3503 -0.326911 53.6496 0.979756 55.2486L37.469 99.8486C39.9546 102.886 43.6325 104.625 47.5564 104.625H125.969C133.155 104.625 139 98.7792 139 91.5936V13.4063C139 6.22026 133.155 0.375122 125.969 0.375122V0.375122ZM130.313 91.5936C130.313 93.9904 128.365 95.9372 125.969 95.9372H47.5564C46.2458 95.9372 45.0197 95.356 44.1925 94.3464L9.95578 52.4997L44.1881 10.6574C45.0197 9.64349 46.2454 9.06227 47.5564 9.06227H125.969C128.365 9.06227 130.312 11.0095 130.312 13.4058C130.313 13.4063 130.313 91.5936 130.313 91.5936V91.5936Z\" fill=\"white\"/>\n                <path d=\"M96.8349 27.71L78.1873 46.3576L59.5397 27.71L53.3975 33.8522L72.0451 52.4998L53.3975 71.1474L59.5397 77.2897L78.1873 58.6421L96.8349 77.2897L102.977 71.1474L84.3296 52.4998L102.977 33.8522L96.8349 27.71Z\" fill=\"white\"/>\n                </svg>\n            </div>\n        </div>");
      html_keyboard.find('[data-key]').on('hover:enter', function () {
        input = input + $(this).data('key');
        drawPin();
        if (input.length == 4) callClose();
      });
      html_keyboard.find('.remove').on('hover:enter', removeNum);
      html_layer.find('.pincode__container').append(html_code).append(html_keyboard);
      Controller.add('parental_controll', {
        toggle: function toggle() {
          Controller.collectionSet(html_keyboard);
        },
        back: function back() {
          call('');
        }
      });
      Prisma.Controller.toggle('parental_controll');
    }
    $('body').append(html_layer);
    setTimeout(function () {
      html_layer.addClass('animate');
    }, 100);
  }

  /**
   * Устаревший метод, но все еще используется,
   * если пароль состоит не из 4 цифр
   * @param {string} title
   * @param {function} call
   */
  function pinFree(title, call) {
    Input.edit({
      free: true,
      title: title,
      nosave: true,
      value: '',
      layout: 'nums',
      keyboard: 'prisma',
      password: true
    }, call);
  }

  /**
   * Запросить PIN-код для настроек
   * @param {string} title - заголовок
   * @param {function} call - вызов
   */
  function request(call, error) {
    if (Storage.field('parental_control')) {
      var called = Storage.value('parental_control_pin').length == 4 ? pin : pinFree;
      called(Lang.translate('parental_control_input_code'), function (code) {
        if (code == Storage.value('parental_control_pin')) {
          call();
        } else if (code) {
          Noty$1.show(Lang.translate('parental_control_input_error'));
          if (error) error();
        } else if (error) error();
      });
    } else {
      call();
    }
  }

  /**
   * Запросить PIN-код (Обший)
   * @param {function} call - если pin верный
   * @param {function} error - если нет
   * @param {boolean} save_controller - переключить на прошлый контроллер
   */
  function query(call, error, save_controller) {
    if (Storage.field('parental_control')) {
      var type = Storage.field('parental_control_time');
      var active = Controller.enabled().name;
      if (type !== 'always') {
        if (type == 'once') {
          if (already_requested) return call();
        } else {
          if (last_time_requested + 1000 * 60 * parseInt(type) > Date.now()) return call();
        }
      }
      request(function () {
        already_requested = true;
        last_time_requested = Date.now();
        if (save_controller) Controller.toggle(active);
        call();
      }, function () {
        if (save_controller) Controller.toggle(active);
        if (error) error();
      });
    } else {
      call();
    }
  }

  /**
   * Запросить PIN-код (Персональный)
   * @param {string} name - название модуля
   * @param {function} call - если pin верный
   * @param {function} error - если нет
   * @param {boolean} save_controller - переключить на прошлый контроллер
   */
  function personal(name, call, error, save_controller) {
    var enabled = Storage.get('parental_control_personal', '[]');
    if (enabled.indexOf(name) !== -1) query(call, error, save_controller);else call();
  }

  /**
   * Запрос на установку PIN-кода, перед этим нужно проверить через enabled()
   * @param {function} call - callback
   */
  function install$2(call) {
    set$3(function (code) {
      if (code) {
        Storage.set('parental_control_pin', code);
        Storage.set('parental_control', true);
      }
      call(Boolean(code));
    });
  }

  /**
   * Добавить персональный PIN-код для запроса
   * @param {string} name - название модуля
   * @param {object} data - данные
   */
  function add$b(name, data) {
    Arrays.extend(data, {
      title: Lang.translate('player_unknown'),
      "default": false
    });
    if (data["default"]) Storage.add('parental_control_personal', name);
    personal_codes[name] = data;
  }

  /**
   * Проверить, установлен ли контроль
   * @returns bollean
   */
  function enabled$1() {
    return Storage.field('parental_control');
  }
  var ParentalControl = {
    init: init$N,
    query: query,
    personal: personal,
    enabled: enabled$1,
    install: install$2,
    add: add$b
  };

  var html$i;
  var body$2;
  var listener$h = start$8();
  var last$4 = '';
  var _main;

  /**
   * Запуск
   */
  function init$M() {
    html$i = Template.get('settings');
    body$2 = html$i.find('.settings__body');
    html$i.find('.settings__layer').on('click', function (e) {
      if (DeviceInput.canClick(e.originalEvent)) Controller.back();
    });
    _main = new Main$1();
    _main.onCreate = create$o;
    _main.swipeAction = swipeAction;
    _main.create();
    Controller.add('settings', {
      toggle: function toggle() {
        _main.render().detach();
        _main.update();
        listener$h.send('open', {
          name: 'main',
          body: _main.render()
        });
        body$2.empty().append(_main.render());
        _main.active();
        $('body').toggleClass('settings--open', true);
        html$i.addClass('animate');
        Activity$1.mixState('settings=main');
      },
      up: function up() {
        Navigator.move('up');
      },
      down: function down() {
        Navigator.move('down');
      },
      left: function left() {
        Navigator.move('left');
      },
      right: function right() {
        Navigator.move('right');
      },
      gone: function gone(to) {
        if (to !== 'settings_component') {
          $('body').toggleClass('settings--open', false);
          html$i.removeClass('animate').removeClass('animate-down');

          // Очищаем интервал обновления времени при закрытии меню
          if (_main && _main.clearTimeInterval) _main.clearTimeInterval();
        }
      },
      back: function back() {
        _main.render().detach();
        Controller.toggle('head');
        Activity$1.mixState();
      }
    });
    ParentalControl.add('settings', {
      title: 'title_settings'
    });
  }
  function swipeAction() {
    html$i.addClass('animate-down');
    setTimeout(function () {
      Controller.back();
    }, 200);
  }

  /**
   * Создать компонент
   * @param {string} name 
   * @param {{last_index:integer}} params 
   */
  function create$o(name) {
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var comp = new Component$1(name, params);
    body$2.empty().append(comp.render());
    listener$h.send('open', {
      name: name,
      body: comp.render(),
      params: params
    });
    last$4 = name;
    Controller.toggle('settings_component');
    Activity$1.mixState('settings=' + name);
  }

  /**
   * Обновить открытый компонент
   */
  function update$a() {
    var selects = body$2.find('.selector');
    var lastinx = selects.index(body$2.find('.selector.focus'));
    create$o(last$4, {
      last_index: lastinx
    });
  }

  /**
   * Рендер
   * @returns {object}
   */
  function render$f() {
    return html$i;
  }
  var Settings = {
    listener: listener$h,
    init: init$M,
    render: render$f,
    update: update$a,
    create: create$o,
    main: function main() {
      return _main;
    }
  };

  var data$3 = {};
  var listener$g = start$8();
  var category$2 = ['like', 'wath', 'book', 'history', 'look', 'viewed', 'scheduled', 'continued', 'thrown'];
  var marks = ['viewed', 'scheduled', 'continued', 'thrown'];
  function save$4() {
    Storage.set('favorite', data$3);
  }

  /**
   * Добавить
   * @param {String} where 
   * @param {Object} card 
   */
  function add$a(where, card, limit) {
    if (Account.working()) {
      listener$g.send('add', {
        where: where,
        card: card
      });
    } else {
      //read()

      var find = data$3[where].find(function (id) {
        return id == card.id;
      });
      if (!find) {
        Arrays.insert(data$3[where], 0, card.id);
        listener$g.send('add', {
          where: where,
          card: card
        });
        if (!search$5(card.id)) data$3.card.push(card);
        if (limit) {
          var excess = data$3[where].slice(limit);
          for (var i = excess.length - 1; i >= 0; i--) {
            remove$3(where, {
              id: excess[i]
            });
          }
        }
        save$4();
      } else {
        Arrays.remove(data$3[where], card.id);
        Arrays.insert(data$3[where], 0, card.id);
        save$4();
        listener$g.send('added', {
          where: where,
          card: card
        });
      }
    }
  }

  /**
   * Удалить
   * @param {String} where 
   * @param {Object} card 
   */
  function remove$3(where, card) {
    if (Account.working()) {
      listener$g.send('remove', {
        where: where,
        card: card,
        method: 'id'
      });
    } else {
      //read()

      Arrays.remove(data$3[where], card.id);
      listener$g.send('remove', {
        where: where,
        card: card,
        method: 'id'
      });
      for (var i = data$3.card.length - 1; i >= 0; i--) {
        var element = data$3.card[i];
        if (!check$3(element).any) {
          Arrays.remove(data$3.card, element);
          listener$g.send('remove', {
            where: where,
            card: element,
            method: 'card'
          });
        }
      }
      save$4();
    }
  }

  /**
   * Найти
   * @param {integer} id 
   * @returns Object
   */
  function search$5(id) {
    var found;
    for (var index = 0; index < data$3.card.length; index++) {
      var element = data$3.card[index];
      if (element.id == id) {
        found = element;
        break;
      }
    }
    return found;
  }

  /**
   * Переключить
   * @param {String} where 
   * @param {Object} card 
   */
  function toggle$9(where, card) {
    //if(!Account.working()) read()

    var find = cloud(card);
    if (marks.find(function (a) {
      return a == where;
    })) {
      var added = marks.find(function (a) {
        return find[a];
      });
      if (added && added !== where) remove$3(added, card);
    }
    if (find[where]) remove$3(where, card);else add$a(where, card);
    return find[where] ? false : true;
  }

  /**
   * Проверить
   * @param {Object} card 
   * @returns Object
   */
  function check$3(card) {
    var result = {
      any: false
    };
    category$2.forEach(function (a) {
      result[a] = data$3[a].find(function (id) {
        return id == card.id;
      });
      if (result[a]) result.any = true;
    });
    return result;
  }

  /**
   * Проверить есть ли карточка где либо кроме истории
   * @param {Object} status 
   * @returns {Boolean}
   */
  function checkAnyNotHistory(status) {
    var any = false;
    category$2.filter(function (a) {
      return a !== 'history';
    }).forEach(function (a) {
      if (status[a]) any = true;
    });
    return any;
  }

  /**
   * Облако, закладки из cub
   * @param {Object} card 
   * @returns {Object}
   */
  function cloud(card) {
    if (Account.working()) {
      var result = {
        any: true
      };
      category$2.forEach(function (a) {
        result[a] = Boolean(Account.get({
          type: a
        }).find(function (elem) {
          return elem.id == card.id;
        }));
        if (result[a]) result.any = true;
      });
      return result;
    } else return check$3(card);
  }

  /**
   * Получить списаок по типу
   * @param {String} params.type - тип 
   * @returns Object
   */
  function get$b(params) {
    if (Account.working()) {
      return Account.get(params);
    } else {
      //read()

      var result = [];
      var ids = data$3[params.type];
      ids.forEach(function (id) {
        for (var i = 0; i < data$3.card.length; i++) {
          var card = data$3.card[i];
          if (card.id == id) result.push(card);
        }
      });
      return result;
    }
  }

  /**
   * Очистить
   * @param {String} where 
   * @param {Object} card 
   */
  function clear$8(where, card) {
    if (Account.working()) {
      Account.clear(where);
    } else {
      //read()

      if (card) remove$3(where, card);else {
        for (var i = data$3[where].length - 1; i >= 0; i--) {
          var _card = search$5(data$3[where][i]);
          if (_card) remove$3(where, _card);
        }
      }
    }
  }

  /**
   * Считать последние данные
   */
  function read() {
    data$3 = Storage.get('favorite', '{}');
    var empty = {
      card: []
    };
    category$2.forEach(function (a) {
      empty[a] = [];
    });
    Arrays.extend(data$3, empty);
  }

  /**
   * Получить весь список что есть
   */
  function full$2() {
    var empty = {
      card: []
    };
    category$2.forEach(function (a) {
      empty[a] = [];
    });
    Arrays.extend(data$3, empty);
    return data$3;
  }
  function all$3() {
    var result = {};
    category$2.forEach(function (a) {
      result[a] = get$b({
        type: a
      });
    });
    return result;
  }
  function continues(type) {
    return Arrays.clone(get$b({
      type: 'history'
    }).filter(function (e) {
      return type == 'tv' ? e.number_of_seasons || e.first_air_date : !(e.number_of_seasons || e.first_air_date);
    }).slice(0, 19)).map(function (e) {
      e.check_new_episode = true;
      return e;
    }).map(function (c) {
      delete c.ready;
      return c;
    });
  }

  /**
   * Запуск
   */
  function init$L() {
    read();
  }
  var Favorite = {
    listener: listener$g,
    check: cloud,
    add: add$a,
    remove: remove$3,
    toggle: toggle$9,
    get: get$b,
    init: init$L,
    clear: clear$8,
    continues: continues,
    full: full$2,
    checkAnyNotHistory: checkAnyNotHistory,
    all: all$3
  };

  var listener$f = start$8();
  function filename() {
    var acc = Account.canSync();
    var name = 'file_view' + (acc ? '_' + acc.profile.id : '');

    if(window.localStorage.getItem(name) === null && acc){
        Storage.set(name, Arrays.clone(Storage.cache('file_view',10000,{})))
    }

    return name;
  }
  function update$9(params) {
    if (params.hash == 0) return;
    var viewed = Storage.cache(filename(), 10000, {});
    var road = viewed[params.hash];
    if (typeof road == 'undefined' || typeof road == 'number') {
      road = {
        duration: 0,
        time: 0,
        percent: 0,
        profile: 0
      };
      viewed[params.hash] = road;
    }
    road.percent = params.percent;
    if (typeof params.time !== 'undefined') road.time = params.time;
    if (typeof params.duration !== 'undefined') road.duration = params.duration;
    if (typeof params.profile !== 'undefined') road.profile = params.profile;
    Storage.set(filename(), viewed);
    var line = $('.time-line[data-hash="' + params.hash + '"]').toggleClass('hide', params.percent ? false : true);
    $('> div', line).css({
      width: params.percent + '%'
    });
    $('.time-line-details[data-hash="' + params.hash + '"]').each(function () {
      var f = format(road);
      $(this).find('[a="t"]').text(f.time);
      $(this).find('[a="p"]').text(f.percent);
      $(this).find('[a="d"]').text(f.duration);
      $(this).toggleClass('hide', road.duration ? false : true);
    });
    listener$f.send('update', {
      data: {
        hash: params.hash,
        road: road
      }
    });
    if (!params.received && Account.hasPremium()) Socket.send('timeline', {
      params: params
    });
  }
  function view$1(hash) {
    var viewed = Storage.cache(filename(), 10000, {}),
      curent = typeof viewed[hash] !== 'undefined' ? viewed[hash] : 0;
    var account = Account.canSync();
    var profile = account && account.profile ? account.profile.id : 0;
    var road = {
      percent: 0,
      time: 0,
      duration: 0,
      profile: 0
    };
    if (_typeof(curent) == 'object') {
      road.percent = curent.percent;
      road.time = curent.time;
      road.duration = curent.duration;
      road.profile = curent.profile || profile;
    } else {
      road.percent = curent || 0;
      road.profile = profile;
    }
    listener$f.send('view', {
      data: {
        hash: hash,
        road: road
      }
    });
    return {
      hash: hash,
      percent: road.percent,
      time: road.time,
      duration: road.duration,
      profile: road.profile,
      handler: function handler(percent, time, duration) {
        return update$9({
          hash: hash,
          percent: percent,
          time: time,
          duration: duration,
          profile: road.profile
        });
      }
    };
  }
  function render$e(params) {
    var line = Template.get('timeline', params);
    line.toggleClass('hide', params.percent ? false : true);
    return line;
  }
  function details(params) {
    var str = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    var line = Template.get('timeline_details', format(params));
    if (str) line.prepend(str);
    line.attr('data-hash', params.hash);
    line.toggleClass('hide', params.duration ? false : true);
    return line;
  }
  function watched(card) {
    var hash = Prisma.Utils.hash(card.original_name ? [1, 1, card.original_name].join('') : card.original_title);
    return view$1(hash).percent;
  }
  function format(params) {
    var road = {
      percent: params.percent + '%',
      time: Utils$2.secondsToTimeHuman(params.time),
      duration: Utils$2.secondsToTimeHuman(params.duration)
    };
    return road;
  }
  var Timeline$1 = {
    listener: listener$f,
    render: render$e,
    update: update$9,
    view: view$1,
    details: details,
    format: format,
    watched: watched,
    filename: filename
  };

  var socket;
  var ping;
  var _uid = Utils$2.uid();
  var _devices = [];
  var listener$e = start$8();
  var expects = [];
  var timeping = 5000;
  var timeout;
  function connect$1() {
    var ws = Platform.is('orsay') || Platform.is('netcast') ? 'ws://' : 'wss://';
    Arrays.extend(window.prisma_settings, {
      socket_url: ws + object$2.pris_domain + '/ws'
    });
    if (!window.prisma_settings.socket_use || !window.prisma_settings.socket_url) return;
    clearInterval(ping);
    clearTimeout(timeout);
    timeout = setTimeout(function () {
      console.log('Socket', 'timeout close');
      if (socket) socket.close();
    }, 10000);
    try {
      socket = new WebSocket(window.prisma_settings.socket_url);
    } catch (e) {
      console.log('Socket', 'not work');
    }
    if (!socket) return;
    socket.addEventListener('open', function (event) {
      console.log('Socket', 'open on ' + window.prisma_settings.socket_url);
      timeping = 5000;
      clearTimeout(timeout);
      send('start', {});
      listener$e.send('open', {});
    });
    socket.addEventListener('close', function (event) {
      console.log('Socket', 'close', event.code);
      clearTimeout(timeout);
      listener$e.send('close', {});
      timeping = Math.min(1000 * 60 * 5, timeping);
      console.log('Socket', 'try connect to ' + window.prisma_settings.socket_url + ' after', Math.round(timeping) / 1000, 'sec.');
      setTimeout(connect$1, Math.round(timeping));
      timeping *= 2;
    });
    socket.addEventListener('error', function (event) {
      console.log('Socket', 'error:', 'maybe there is no connection to the server');
      socket.close();
    }, false);
    socket.addEventListener('message', function (event) {
      var result = JSON.parse(event.data);
      if (window.prisma_settings.socket_methods) {
        if (result.method == 'devices') {
          _devices = result.data;
        } else if (result.method == 'open') {
          Controller.toContent();
          Activity$1.push(result.data);
        } else if (result.method == 'timeline') {
          result.data.received = true; //чтоб снова не отправлять и не зациклить

          var account = Account.canSync();
          if (account && account.profile && account.profile.id == result.data.profile) {
            Timeline$1.update(result.data);
          }
        } else if (result.method == 'bookmarks') {
          Account.update();
        } else if (result.method == 'logoff') {
          Account.logoff(result.data);
        } else if (result.method == 'info') {
          console.log('Socket', 'info', result.data);
        } else if (result.method == 'other' && result.data.submethod == 'play') {
          Controller.toContent();
          Modal.open({
            title: '',
            align: 'center',
            html: $('<div class="about">' + Lang.translate('confirm_open_player') + '</div>'),
            buttons: [{
              name: Prisma.Lang.translate('settings_param_no'),
              onSelect: function onSelect() {
                Modal.close();
                Controller.toggle('content');
              }
            }, {
              name: prisma.Lang.translate('settings_param_yes'),
              onSelect: function onSelect() {
                Modal.close();
                Controller.toggle('content');
                Player.play(result.data.object.player);
                Player.playlist(result.data.object.playlist);
              }
            }],
            onBack: function onBack() {
              Modal.close();
              Controller.toggle('content');
            }
          });
        }
      }
      listener$e.send('message', result);
    });
    setInterval(function () {
      if (expects.length > 50) expects = expects.slice(-50);
      if (socket && socket.readyState == 1 && expects.length) {
        var msg = expects.shift();
        console.log('Socket', 'sent with a delay:', msg.method);
        send(msg.method, msg);
      }
    }, 1000);
  }
  function send(method, data) {
    var name_devise = Platform.get() ? Platform.get() : navigator.userAgent.toLowerCase().indexOf('mobile') > -1 ? 'mobile' : navigator.userAgent.toLowerCase().indexOf('x11') > -1 ? 'chrome' : 'other';
    data.device_id = _uid;
    data.name = Utils$2.capitalizeFirstLetter(name_devise) + ' - ' + Storage.field('device_name');
    data.method = method;
    data.version = 1;
    data.account = Storage.get('account', '{}');
    data.premium = Account.hasPremium();
    if (socket && socket.readyState == 1) socket.send(JSON.stringify(data));else expects.push(data);
  }
  function restart() {
    if (socket) socket.close();
    connect$1();
  }
  var Socket = {
    listener: listener$e,
    init: connect$1,
    send: send,
    uid: function uid() {
      return _uid;
    },
    devices: function devices() {
      return _devices;
    },
    restart: restart
  };

  var broken_images = 0;
  function proxy(name) {
    var proxy = Storage.field(name);
    if (proxy.length > 0 && proxy.charAt(proxy.length - 1) == '/') {
      proxy = proxy.substring(0, proxy.length - 1);
    }
    return Utils$2.checkHttp(proxy);
  }
  function api$3(url) {
    var base = Utils$2.protocol() + 'api.manhan.one/tmdb/api/3/' + url;
    return Storage.field('proxy_tmdb') && Storage.field('tmdb_proxy_api') ? proxy('tmdb_proxy_api') + '/' + base : base;
  }
  function image(url) {
    var base = Utils$2.protocol() + 'img.pris.cam/' + url;
    return Storage.field('proxy_tmdb') && Storage.field('tmdb_proxy_image') ? proxy('tmdb_proxy_image') + '/' + base : base;
  }
  function broken() {
    broken_images++;
    if (broken_images > 50) {
      broken_images = 0;
      if (Storage.field('tmdb_proxy_image') && Storage.field('proxy_tmdb_auto')) Storage.set('proxy_tmdb', true);
    }
  }
  function key() {
    return '2e9c6a2121fca2fdf303aff51dbdfe63';
  }
  var TMDB$1 = {
    api: api$3,
    key: key,
    image: image,
    broken: broken
  };

  var NoticeClass = /*#__PURE__*/function () {
    function NoticeClass() {
      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      _classCallCheck(this, NoticeClass);
      this.params = params;
      this.name = 'Noname';
    }
    return _createClass(NoticeClass, [{
      key: "active",
      value: function active() {
        return true;
      }
    }, {
      key: "push",
      value: function push(element, resolve, reject) {
        resolve();
      }
    }, {
      key: "empty",
      value: function empty() {
        return Lang.translate('notice_none_system');
      }
    }, {
      key: "viewed",
      value: function viewed() {}
    }, {
      key: "items",
      value: function items() {
        return [];
      }
    }, {
      key: "count",
      value: function count() {
        return 0;
      }
    }]);
  }();

  var NoticeAll = /*#__PURE__*/function (_NoticeClass) {
    function NoticeAll() {
      var _this;
      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      _classCallCheck(this, NoticeAll);
      _this = _callSuper(this, NoticeAll, [params]);
      _this.name = Lang.translate('settings_param_jackett_interview_all');
      return _this;
    }
    _inherits(NoticeAll, _NoticeClass);
    return _createClass(NoticeAll, [{
      key: "active",
      value: function active() {
        return false;
      }
    }, {
      key: "count",
      value: function count() {
        return Notice$1.count();
      }
    }, {
      key: "viewed",
      value: function viewed() {
        for (var name in Notice$1.classes) {
          if (Notice$1.classes[name] !== this) {
            Notice$1.classes[name].viewed();
          }
        }
      }
    }, {
      key: "items",
      value: function items() {
        var _this2 = this;
        var items = [];
        var _loop = function _loop(name) {
          if (Notice$1.classes[name] !== _this2) {
            items = items.concat(Notice$1.classes[name].items().map(function (item) {
              var new_item = Arrays.clone(item);
              new_item.display = name;
              return new_item;
            }));
          }
        };
        for (var name in Notice$1.classes) {
          _loop(name);
        }
        items.sort(function (a, b) {
          return a.time > b.time ? -1 : a.time < b.time ? 1 : 0;
        });
        return items;
      }
    }]);
  }(NoticeClass);

  var NoticePrisma = /*#__PURE__*/function (_NoticeClass) {
    function NoticePrisma() {
      var _this;
      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      _classCallCheck(this, NoticePrisma);
      _this = _callSuper(this, NoticePrisma, [params]);
      _this.name = params.name || 'Prisma';
      _this.time = 0;
      _this.view = 0;
      _this.db_name = params.db_name || 'notice';
      _this.notices = [];
      _this.connect();
      return _this;
    }
    _inherits(NoticePrisma, _NoticeClass);
    return _createClass(NoticePrisma, [{
      key: "connect",
      value: function connect() {
        this.db = new IndexedDB(this.db_name, ['all', 'readed'], 2);
        this.db.openDatabase().then(this.update.bind(this))["catch"](function () {
          return console.log('Notice', 'error', 'no open database');
        });
      }
    }, {
      key: "update",
      value: function update() {
        var _this2 = this;
        this.db.getData('readed', 'time').then(function (time) {
          _this2.time = time || 0;
          return _this2.db.getData('all');
        }).then(function (result) {
          result.sort(function (a, b) {
            return a.time > b.time ? -1 : a.time < b.time ? 1 : 0;
          });
          _this2.notices = result;
          _this2.view = result.filter(function (n) {
            return n.time > _this2.time;
          }).length;
          Notice$1.drawCount();
        })["catch"](function (e) {});
      }
    }, {
      key: "count",
      value: function count() {
        return this.view;
      }
    }, {
      key: "push",
      value: function push(element, resolve, reject) {
        if (!(element.id && element.from)) {
          if (reject) reject('No (id) or (from)');
          return;
        }
        if (!this.notices.find(function (n) {
          return n.id == element.id;
        })) {
          this.db.addData('all', element.id, element).then(this.update.bind(this)).then(function (e) {
            if (resolve) resolve(e);
          })["catch"](function (e) {
            if (reject) reject(e);
          });
        } else if (reject) reject('Already added');
      }
    }, {
      key: "viewed",
      value: function viewed() {
        this.db.rewriteData('readed', 'time', Date.now());
        this.view = 0;
        this.time = Date.now();
        Notice$1.drawCount();
      }
    }, {
      key: "items",
      value: function items() {
        return this.notices;
      }
    }]);
  }(NoticeClass);

  var NoticeCub = /*#__PURE__*/function (_NoticeClass) {
    function NoticeCub() {
      var _this;
      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      _classCallCheck(this, NoticeCub);
      _this = _callSuper(this, NoticeCub, [params]);
      _this.name = 'CUB';
      _this.time = Storage.get('cub_notice_time', '0');
      _this.notices = [];
      setInterval(_this.update.bind(_this), 1000 * 60 * 5);
      _this.update();
      return _this;
    }
    _inherits(NoticeCub, _NoticeClass);
    return _createClass(NoticeCub, [{
      key: "update",
      value: function update() {
        var _this2 = this;
        Account.notice(function (result) {
          _this2.notices = result.map(function (item) {
            var data = JSON.parse(item.data);
            var text = Lang.translate('notice_new_quality');
            var labels = [];
            if (data.card.seasons) {
              var k = [];
              for (var i in data.card.seasons) k.push(i);
              var s = k.pop();
              labels.push('S - <b>' + s + '</b>');
              labels.push('E - <b>' + data.card.seasons[s] + '</b>');
              if (data.voice) labels.push(data.voice);
              text = Lang.translate('notice_new_episode');
            } else {
              labels.push(Lang.translate('notice_quality') + ' - <b>' + data.card.quality + '</b>');
            }
            return {
              time: item.time || Utils.parseToDate(item.date).getTime(),
              title: !Lang.selected(['ru', 'uk', 'be']) ? data.card.original_title || data.card.original_name : data.card.title || data.card.name,
              text: text,
              poster: data.card.poster ? data.card.poster : data.card.img ? data.card.img : data.card.poster_path,
              card: data.card,
              labels: labels
            };
          });
          _this2.notices.sort(function (a, b) {
            return a.time > b.time ? -1 : a.time < b.time ? 1 : 0;
          });
          Notice$1.drawCount();
        });
      }
    }, {
      key: "viewed",
      value: function viewed() {
        Storage.set('cub_notice_time', Date.now());
        this.time = Date.now();
        Notice$1.drawCount();
      }
    }, {
      key: "empty",
      value: function empty() {
        return Lang.translate(Account.logged() ? 'notice_none_account' : 'notice_none');
      }
    }, {
      key: "count",
      value: function count() {
        var _this3 = this;
        return this.notices.filter(function (n) {
          return n.time > _this3.time;
        }).length;
      }
    }, {
      key: "items",
      value: function items() {
        return this.notices;
      }
    }]);
  }(NoticeClass);

  function translate$1(str) {
    if (Arrays.isObject(str)) {
      var code = Prisma.Storage.get('language', 'ru');
      if (str[code]) return str[code];else if (str.ru) return str.ru;else return str[Arrays.getKeys(str)[0]];
    }
    return str;
  }
  var Notice = /*#__PURE__*/function () {
    function Notice() {
      _classCallCheck(this, Notice);
      this.listener = start$8();
      this.display = 'all';
      this.classes = {};
    }
    return _createClass(Notice, [{
      key: "init",
      value: function init() {
        var _this = this;
        this.classes.all = new NoticeAll();
        this.classes.prisma = new NoticePrisma();
        this.classes.cub = new NoticeCub();
        Prisma.Listener.follow('app', function (e) {
          if (e.type == 'ready') _this.drawCount();
        });
      }
    }, {
      key: "open",
      value: function open() {
        var _this2 = this;
        if (Prisma.Controller.enabled().name == 'modal') Modal.close();
        var html = $('<div></div>');
        var tabs = [];
        var viever = this.classes[this.display];
        var items = viever.items();
        var navigation = $('<div class="navigation-tabs"></div>');
        for (var name in this.classes) {
          var count = this.classes[name].count();
          var tab = {
            name: name,
            count: count
          };
          tabs.push(tab);
        }
        tabs.forEach(function (tab, i) {
          var button = $('<div class="navigation-tabs__button selector">' + _this2.classes[tab.name].name + '</div>');
          if (tab.count) button.append('<span class="navigation-tabs__badge">' + tab.count + '</span>');
          button.on('hover:enter', function () {
            _this2.display = tab.name;
            _this2.open();
          });
          if (tab.name == _this2.display) button.addClass('active');
          if (i > 0) navigation.append('<div class="navigation-tabs__split">|</div>');
          navigation.append(button);
        });
        html.append(navigation);
        items.forEach(function (element) {
          var item = Template.get('notice_card', {});
          var icon = element.poster || element.icon || element.img;
          var author_data = {};
          var author_html;
          item.addClass('image--' + (element.poster ? 'poster' : element.icon ? 'icon' : element.img ? 'img' : 'none'));
          item.find('.notice__title').html(translate$1(element.title));
          item.find('.notice__descr').html(translate$1(element.text));
          item.find('.notice__time').html(Utils$2.parseTime(element.time)["short"]);
          if (element.labels) item.find('.notice__descr').append($('<div class="notice__footer">' + element.labels.map(function (label) {
            return '<div>' + translate$1(label) + '</div>';
          }).join(' ') + '</div>'));
          if (element.author) {
            author_data = translate$1(element.author);
            author_html = $("<div class=\"notice__author\">\n                    <div class=\"notice__author-img\">\n                        <img />\n                    </div>\n                    <div class=\"notice__author-body\">\n                        <div class=\"notice__author-name\"></div>\n                        <div class=\"notice__author-text\"></div>\n                    </div>\n                </div>");
            author_html.find('.notice__author-name').html(author_data.name);
            author_html.find('.notice__author-text').html(author_data.text);
            item.find('.notice__body').append(author_html);
          }
          item.on('hover:enter', function () {
            if (element.card) {
              _this2.close();
              Activity$1.push({
                url: '',
                component: 'full',
                id: element.card.id,
                method: element.card.number_of_seasons || element.card.seasons ? 'tv' : 'movie',
                card: element.card,
                source: Lang.selected(['ru', 'uk', 'be']) ? 'cub' : ''
              });
            } else _this2.listener.send('select', {
              display: element.display || _this2.display,
              element: element
            });
          }).on('visible', function () {
            if (icon) {
              icon = translate$1(icon);
              if (icon.indexOf('http') == -1) icon = TMDB$1.image('t/p/w300/' + icon);
              var img_icon = item.find('.notice__left img')[0] || {};
              var img_author = item.find('.notice__author img')[0] || {};
              img_icon.onload = function () {
                item.addClass('image--loaded');
              };
              img_icon.onerror = function () {
                img_icon.src = './img/img_broken.svg';
              };
              img_author.onload = function () {
                item.addClass('image-author--loaded');
              };
              img_author.onerror = function () {
                img_author.src = './img/img_broken.svg';
              };
              img_icon.src = Utils$2.fixProtocolLink(icon);
              if (element.author) img_author.src = Utils$2.fixProtocolLink(author_data.img.indexOf('http') >= 0 ? author_data.img : TMDB$1.image('t/p/w200/' + author_data.img));
            }
          });
          html.append(item);
        });
        if (!items.length) {
          var empty = $('<div class="about"></div>');
          empty.append(viever.empty());
          html.append(empty);
        }
        viever.viewed();
        this.listener.send('viewed', {
          display: this.display
        });
        Modal.open({
          title: Lang.translate('title_notice'),
          select: html.find('.navigation-tabs .active')[0],
          size: 'medium',
          html: html,
          onBack: this.close.bind(this)
        });
      }
    }, {
      key: "count",
      value: function count() {
        var all = 0;
        for (var name in this.classes) {
          if (this.classes[name].active()) all += this.classes[name].count();
        }
        return all;
      }
    }, {
      key: "close",
      value: function close() {
        Modal.close();
        Controller.toggle('head');
      }
    }, {
      key: "drawCount",
      value: function drawCount() {
        var status = Boolean(this.count());
        var icon = $('.head .notice--icon');
        icon.toggleClass('active', status);
        clearInterval(this.blick_timer);
        if (status) {
          this.blick_timer = setInterval(function () {
            icon.addClass('animate');
            setTimeout(function () {
              icon.removeClass('animate');
            }, 1000);
          }, 1000 * 15);
        }
      }
    }, {
      key: "addClass",
      value: function addClass(class_name, noticeClass) {
        this.classes[class_name] = noticeClass;
      }
    }, {
      key: "pushNotice",
      value: function pushNotice(class_name, data, resolve, reject) {
        if (this.classes[class_name] && this.classes[class_name].push) {
          this.classes[class_name].push(data, resolve, reject);
        } else if (reject) reject('No find class');
      }
    }]);
  }();
  var Notice$1 = new Notice();

  var timer$5;
  var listener$d;

  /**
   * Открыть окно
   * @param {{type:string, object:{}}} params 
   */
  function open$5(params) {
    var enabled = Controller.enabled().name;
    var text = params.type == 'card' ? Lang.translate('broadcast_open') : params.type == 'play' ? Lang.translate('broadcast_play') : '';
    var temp = Template.get('broadcast', {
      text: text
    });
    var list = temp.find('.broadcast__devices');
    var last = '';
    if (!text) temp.find('.about').remove();
    Socket.send('devices', {});
    timer$5 = setInterval(function () {
      Socket.send('devices', {});
    }, 3000);
    listener$d = function listener(e) {
      if (e.method == 'devices') {
        var devices = e.data.filter(function (d) {
          return !(d.name == 'CUB' || d.device_id == Socket.uid());
        });
        var select;
        list.empty();
        devices.forEach(function (device) {
          var item = $('<div class="broadcast__device selector">' + device.name + '</div>');
          item.on('hover:enter', function () {
            close$6();
            Controller.toggle(enabled);
            if (params.type == 'card') {
              var object = Arrays.clone(params.object);
              var card = {
                id: object.card.id,
                source: object.card.source || 'tmdb'
              };
              object.card = card;
              Socket.send('open', {
                params: object,
                uid: device.uid
              });
            }
            if (params.type == 'play') {
              Socket.send('other', {
                params: {
                  submethod: 'play',
                  object: params.object
                },
                uid: device.uid
              });
            }
          }).on('hover:focus', function () {
            last = device.uid;
          });
          list.append(item);
          if (last == device.uid) select = item[0];
        });
        Modal.toggle(select);
      }
    };
    Modal.open({
      title: '',
      html: temp,
      size: 'small',
      mask: true,
      onBack: function onBack() {
        close$6();
        Controller.toggle(enabled);
      }
    });
    listener$d({
      method: 'devices',
      data: Socket.devices()
    });
    Socket.listener.follow('message', listener$d);
  }

  /**
   * Закрыть окно
   */
  function close$6() {
    Socket.listener.remove('message', listener$d);
    clearInterval(timer$5);
    Modal.close();
    listener$d = null;
  }
  var Broadcast = {
    open: open$5
  };

  function status$2(need) {
    this.data = {};
    this.work = 0;
    this.need = need;
    this.complited = false;
    this.check = function () {
      if (this.stopped) return;
      if (this.work >= this.need && !this.complited) {
        this.complited = true;
        this.onComplite(this.data);
      }
    };
    this.append = function (name, json) {
      this.work++;
      this.data[name] = json;
      this.check();
    };
    this.error = function () {
      this.work++;
      this.check();
    };
    this.stop = function () {
      this.stopped = true;
    };
  }

  var data$2 = [];

  /**
   * Запуск
   */
  function init$K() {
    data$2 = Storage.cache('recomends_scan', 300, []);
    setInterval(function () {
      var history = Favorite.get({
        type: 'history'
      });
      var added = 0;
      console.log('Recomendations', 'find history:', history.length);
      history.forEach(function (elem) {
        if (['cub', 'tmdb'].indexOf(elem.source) >= 0) {
          var id = data$2.filter(function (a) {
            return a.id == elem.id;
          });
          if (!id.length) {
            data$2.push({
              id: elem.id,
              tv: elem.number_of_seasons || elem.seasons
            });
            added++;
          }
        }
      });
      console.log('Recomendations', 'added to scan:', added, 'ready:', data$2.length);
      Storage.set('recomends_scan', data$2);
      search$4();
    }, 120 * 1000);
  }
  function search$4() {
    var ids = data$2.filter(function (e) {
      return !e.scan;
    });
    if (ids.length) {
      var elem = ids[0];
      elem.scan = 1;
      console.log('Recomendations', 'scan:', elem.id, elem.title || elem.name);
      TMDB.get((elem.tv ? 'tv' : 'movie') + '/' + elem.id + '/recommendations', {}, function (json) {
        console.log('Recomendations', 'result:', json.results && json.results.length ? json.results.length : 0);
        if (json.results && json.results.length) {
          var recomend = Storage.cache('recomends_list', 100, []);
          var favorite = Favorite.get({
            type: 'history'
          });
          json.results.forEach(function (e) {
            if (!recomend.filter(function (r) {
              return r.id == e.id;
            }).length && !favorite.filter(function (h) {
              return h.id == e.id;
            }).length) {
              recomend.push(e);
            }
          });
          Storage.set('recomends_list', recomend);
        }
      });
    } else {
      data$2.forEach(function (a) {
        return a.scan = 0;
      });
    }
    Storage.set('recomends_scan', data$2);
  }
  function get$a(type) {
    var all = Storage.get('recomends_list', '[]');
    var items = all.filter(function (e) {
      return type == 'tv' ? e.number_of_seasons || e.first_air_date : !(e.number_of_seasons || e.first_air_date);
    }).reverse();
    items.forEach(function (item) {
      item.ready = false;
    });
    return items;
  }
  var Recomends = {
    init: init$K,
    get: get$a
  };

  /**
   * Карточка
   * @param {object} data
   * @param {{isparser:boolean, card_small:boolean, card_category:boolean, card_collection:boolean, card_wide:true}} params 
   */
  function Episode(data) {
    var card = data.card;
    var episode = data.episode;
    Arrays.extend(card, {
      title: card.name,
      original_title: card.original_name,
      release_date: card.first_air_date
    });
    card.release_year = ((card.release_date || '0000') + '').slice(0, 4);
    function remove(elem) {
      if (elem) elem.remove();
    }

    /**
     * Загрузить шаблон
     */
    this.build = function () {
      this.card = Template.js('card_episode');
      this.img_poster = this.card.querySelector('.card__img') || {};
      this.img_episode = this.card.querySelector('.full-episode__img img') || {};
      this.card.querySelector('.card__title').innerText = card.title;
      this.card.querySelector('.full-episode__name').innerText = episode.name || Lang.translate('noname');
      this.card.querySelector('.full-episode__num').innerText = episode.episode_number || '';
      this.card.querySelector('.full-episode__date').innerText = episode.air_date ? Utils$2.parseTime(episode.air_date).full : '----';
      if (card.release_year == '0000') {
        remove(this.card.querySelector('.card__age'));
      } else {
        this.card.querySelector('.card__age').innerText = card.release_year;
      }
      this.card.addEventListener('visible', this.visible.bind(this));
    };

    /**
     * Загрузить картинку
     */
    this.image = function () {
      var _this = this;
      this.img_poster.onload = function () {
        //this.card.classList.add('card--loaded')
      };
      this.img_poster.onerror = function () {
        _this.img_poster.src = './img/img_broken.svg';
      };
      this.img_episode.onload = function () {
        _this.card.querySelector('.full-episode__img').classList.add('full-episode__img--loaded');
      };
      this.img_episode.onerror = function () {
        _this.img_episode.src = './img/img_broken.svg';
      };
    };

    /**
     * Создать
     */
    this.create = function () {
      var _this2 = this;
      this.build();
      this.card.addEventListener('hover:focus', function () {
        if (_this2.onFocus) _this2.onFocus(_this2.card, card);
      });
      this.card.addEventListener('hover:hover', function () {
        if (_this2.onHover) _this2.onHover(_this2.card, card);
      });
      this.card.addEventListener('hover:enter', function () {
        if (_this2.onEnter) _this2.onEnter(_this2.card, card);
      });
      this.image();
    };

    /**
     * Загружать картинку если видна карточка
     */
    this.visible = function () {
      if (card.poster_path) this.img_poster.src = Api.img(card.poster_path);else if (card.profile_path) this.img_poster.src = Api.img(card.profile_path);else if (card.poster) this.img_poster.src = card.poster;else if (card.img) this.img_poster.src = card.img;else this.img_poster.src = './img/img_broken.svg';
      if (episode.still_path) this.img_episode.src = Api.img(episode.still_path, 'w300');else if (card.backdrop_path) this.img_episode.src = Api.img(card.backdrop_path, 'w300');else this.img_episode.src = './img/img_broken.svg';
      if (this.onVisible) this.onVisible(this.card, card);
    };

    /**
     * Уничтожить
     */
    this.destroy = function () {
      this.img_poster.onerror = function () {};
      this.img_poster.onload = function () {};
      this.img_episode.onerror = function () {};
      this.img_episode.onload = function () {};
      this.img_poster.src = '';
      this.img_episode.src = '';
      remove(this.card);
      this.card = null;
      this.img_poster = null;
      this.img_episode = null;
    };

    /**
     * Рендер
     * @returns {object}
     */
    this.render = function (js) {
      return js ? this.card : $(this.card);
    };
  }

  var network$b = new create$e();
  var menu_list = [];
  var genres$1 = {
    movie: [{
      "id": 28,
      "title": "#{filter_genre_ac}"
    }, {
      "id": 12,
      "title": "#{filter_genre_ad}"
    }, {
      "id": 16,
      "title": "#{filter_genre_mv}"
    }, {
      "id": 35,
      "title": "#{filter_genre_cm}"
    }, {
      "id": 80,
      "title": "#{filter_genre_cr}"
    }, {
      "id": 99,
      "title": "#{filter_genre_dc}"
    }, {
      "id": 18,
      "title": "#{filter_genre_dr}"
    }, {
      "id": 10751,
      "title": "#{filter_genre_fm}"
    }, {
      "id": 14,
      "title": "#{filter_genre_fe}"
    }, {
      "id": 36,
      "title": "#{filter_genre_hi}"
    }, {
      "id": 27,
      "title": "#{filter_genre_ho}"
    }, {
      "id": 10402,
      "title": "#{filter_genre_mu}"
    }, {
      "id": 9648,
      "title": "#{filter_genre_de}"
    }, {
      "id": 10749,
      "title": "#{filter_genre_md}"
    }, {
      "id": 878,
      "title": "#{filter_genre_fa}"
    }, {
      "id": 10770,
      "title": "#{filter_genre_tv}"
    }, {
      "id": 53,
      "title": "#{filter_genre_tr}"
    }, {
      "id": 10752,
      "title": "#{filter_genre_mi}"
    }, {
      "id": 37,
      "title": "#{filter_genre_ve}"
    }],
    tv: [{
      "id": 10759,
      "title": "#{filter_genre_aa}"
    }, {
      "id": 16,
      "title": "#{filter_genre_mv}"
    }, {
      "id": 35,
      "title": "#{filter_genre_cm}"
    }, {
      "id": 80,
      "title": "#{filter_genre_cr}"
    }, {
      "id": 99,
      "title": "#{filter_genre_dc}"
    }, {
      "id": 18,
      "title": "#{filter_genre_dr}"
    }, {
      "id": 10751,
      "title": "#{filter_genre_fm}"
    }, {
      "id": 10762,
      "title": "#{filter_genre_ch}"
    }, {
      "id": 9648,
      "title": "#{filter_genre_de}"
    }, {
      "id": 10763,
      "title": "#{filter_genre_nw}"
    }, {
      "id": 10764,
      "title": "#{filter_genre_rs}"
    }, {
      "id": 10765,
      "title": "#{filter_genre_hf}"
    }, {
      "id": 10766,
      "title": "#{filter_genre_op}"
    }, {
      "id": 10767,
      "title": "#{filter_genre_tc}"
    }, {
      "id": 10768,
      "title": "#{filter_genre_mp}"
    }, {
      "id": 37,
      "title": "#{filter_genre_ve}"
    }],
    anime: [{
      "id": 28,
      "title": "#{filter_genre_ac}"
    }, {
      "id": 16,
      "title": "#{filter_genre_mv}"
    }, {
      "id": 35,
      "title": "#{filter_genre_cm}"
    }, {
      "id": 14,
      "title": "#{filter_genre_fe}"
    }, {
      "id": 27,
      "title": "#{filter_genre_ho}"
    }, {
      "id": 9648,
      "title": "#{filter_genre_de}"
    }, {
      "id": 10749,
      "title": "#{filter_genre_md}"
    }, {
      "id": 878,
      "title": "#{filter_genre_fa}"
    }]
  };
  var stop_keywords = ['порно', 'эротика', 'член', 'порно', 'porn', 'xxx', 'sexy', 'erotic'];
  var blocked_ids = [124185, 234291, 1226743, 1268218, 1049998, 234763, 879412, 779280, 825808, 1168166, 1048516, 884184, 458156, 324552, 979595, 1087388, 864238, 895539, 716612, 1082415, 576920, 808176, 659384, 718838, 676705, 412656, 729577, 579831, 927714, 778810, 955569, 598212, 406759, 967561, 996525, 960139, 857553, 742070, 598355, 536437, 729854, 965571, 546121, 589752, 576986, 864120, 1152354, 1250567, 522016, 732684, 746524, 128032, 1256724, 586386, 818415, 635440, 719463, 95530, 713335, 680779, 842033, 930976, 977470, 1353496, 1152238, 732698, 829361, 783110, 120000, 838209, 1057001, 717088, 1026819, 138558, 837335, 76203, 484641, 627290, 518756, 595464, 478820, 114080, 577020, 267192, 575075, 296524, 468987, 571263, 444218, 577028, 395991, 533642, 157350, 262500, 262504, 575131, 394661, 469287, 334524, 581905, 577040, 542836, 75656, 291805, 10908, 282984, 618416, 429351, 385137, 10222, 986718, 313369, 415381, 184155, 45927, 307649, 598252, 6395, 587617, 522162, 567801, 818427, 915000, 208611, 575088, 579875, 380111, 415842, 454992, 576987, 760873, 806128, 354859, 800497, 579872, 589761, 585257, 454615, 407887, 406761, 683311, 660000, 400535, 768726, 410554, 497722, 287948, 403300, 298250, 17935, 394537, 107846, 544404, 459992, 523781, 438623, 524659, 80164, 274854, 49049, 844386, 579884, 961484, 579805, 484247, 643586, 564145, 525661, 146216, 516850, 375588, 48234, 1149912];
  function url$5(u) {
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var ln = [Storage.field('tmdb_lang')];
    if (params.langs) ln = typeof params.langs == 'string' ? [params.langs] : ln.concat(params.langs.filter(function (n) {
      return n !== ln[0];
    }));
    u = add$9(u, 'api_key=' + TMDB$1.key());
    u = add$9(u, 'language=' + ln.join(','));
    if (params.genres && u.indexOf('with_genres') == -1) u = add$9(u, 'with_genres=' + params.genres);
    if (params.page) u = add$9(u, 'page=' + params.page);
    if (params.query) u = add$9(u, 'query=' + params.query);
    if (params.keywords) u = add$9(u, 'with_keywords=' + params.keywords);
    if (params.watch_region) u = add$9(u, 'watch_region=' + params.watch_region);
    if (params.watch_providers) u = add$9(u, 'with_watch_providers=' + params.watch_providers);
    if (params.networks) u = add$9(u, 'with_networks=' + params.networks);
    if (params.sort_by) u = add$9(u, 'sort_by=' + params.sort_by);
    if (params.filter) {
      for (var i in params.filter) {
        u = add$9(u, i + '=' + params.filter[i]);
      }
    }
    if (params.genres && u.indexOf('discover/') !== 0) {
      u = 'discover/' + u;
    }
    return TMDB$1.api(u);
  }
  function add$9(u, params) {
    return u + (/\?/.test(u) ? '&' : '?') + params;
  }
  function img(src, size) {
    var type = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'poster';
    var poster_size = Storage.field('poster_size');
    var baseimg;
    if (type === 'logo') {
      baseimg = 't/p/original/';
    } else {
      baseimg = "t/p/".concat(poster_size, "/");
    }
    var path = baseimg;
    if (size) path = path.replace(new RegExp(poster_size, 'g'), size);
    return src ? TMDB$1.image(path + src) : '';
  }

  /**
   * Получает логотипы для фильма или сериала
   * @param {number} id - ID фильма или сериала
   * @param {string} mediaType - Тип медиа ('movie' или 'tv')
   * @param {string} language - Код языка (например, 'ru', 'en')
   * @returns {Promise} - Промис с данными о логотипах
   */
  function movieLogos(id) {
    var mediaType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'movie';
    var language = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
    if (!id) return Promise.reject('ID не указан');

    // Используем язык из настроек, если не указан
    if (!language) language = Storage.field('tmdb_lang');
    var apiUrl = "".concat(mediaType, "/").concat(id, "/images?api_key=").concat(TMDB$1.key(), "&language=").concat(language);
    return new Promise(function (resolve, reject) {
      network$b.silent(TMDB$1.api(apiUrl), function (json) {
        if (json && !json.error) {
          resolve(json);
        } else {
          reject((json === null || json === void 0 ? void 0 : json.error) || 'Ошибка получения логотипов');
        }
      }, function (error) {
        reject(error || 'Сетевая ошибка');
      });
    });
  }
  function find$1(find) {
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var finded;
    var filtred = function filtred(items) {
      for (var i = 0; i < items.length; i++) {
        var item = items[i];
        if (params.original_title == item.original_title || params.title == item.title) {
          finded = item;
          break;
        }
      }
    };
    if (find.movie && find.movie.results.length) filtred(find.movie.results);
    if (find.tv && find.tv.results.length && !finded) filtred(find.tv.results);
    return finded;
  }

  // Функция для применения small и wide к json с проверкой на исключения
  function applyCardStyles(json) {
    var options = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    // По умолчанию применяем и small и wide
    if (options.small !== false) {
      json.small = true;
    }
    if (options.wide !== false) {
      json.wide = true;
    }

    // Всегда добавляем promo и promo_title
    if (Array.isArray(json.results)) {
      json.results.forEach(function (card) {
        card.promo = card.overview;
        card.promo_title = card.title || card.name;
      });
    }
    return json;
  }

  // Модифицированный main с исправлениями
  function main$2() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    // Увеличиваем лимит для загрузки большего количества категорий
    var parts_limit = 7;

    // Опции сортировки
    var sortOptions = [{
      key: 'vote_count.desc',
      title: 'title_many_votes'
    }, {
      key: 'vote_average.desc',
      title: 'title_high_rating'
    }, {
      key: 'release_date.desc',
      title: 'title_new_releases'
    }, {
      key: 'popularity.desc',
      title: 'title_popular'
    }, {
      key: 'revenue.desc',
      title: 'title_audience_interest'
    }];

    // Жанры фильмов
    var genres = [{
      id: 28,
      title: 'filter_genre_ac'
    }, {
      id: 35,
      title: 'filter_genre_cm'
    }, {
      id: 18,
      title: 'filter_genre_dr'
    }, {
      id: 10749,
      title: 'filter_genre_md'
    }, {
      id: 16,
      title: 'filter_genre_mv'
    }, {
      id: 12,
      title: 'filter_genre_ad'
    }, {
      id: 80,
      title: 'filter_genre_cr'
    }, {
      id: 9648,
      title: 'filter_genre_de'
    }, {
      id: 878,
      title: 'filter_genre_fa'
    }, {
      id: 14,
      title: 'filter_genre_fe'
    }, {
      id: 10752,
      title: 'filter_genre_mi'
    }, {
      id: 37,
      title: 'filter_genre_ve'
    }, {
      id: 53,
      title: 'filter_genre_tr'
    }, {
      id: 10751,
      title: 'filter_genre_fm'
    }, {
      id: 99,
      title: 'filter_genre_dc'
    }, {
      id: 36,
      title: 'filter_genre_hi'
    }, {
      id: 27,
      title: 'filter_genre_ho'
    }];

    // Стриминговые сервисы
    var streamingServices = [{
      id: 49,
      title: 'HBO'
    }, {
      id: 2552,
      title: 'Apple TV+'
    }, {
      id: 453,
      title: 'Hulu'
    }, {
      id: 1024,
      title: 'Amazon Prime'
    }, {
      id: 213,
      title: 'Netflix'
    }, {
      id: 3186,
      title: 'HBO Max'
    }, {
      id: 2076,
      title: 'Paramount+'
    }, {
      id: 3353,
      title: 'Peacock'
    }, {
      id: 2739,
      title: 'Disney+'
    }, {
      id: 318,
      title: 'Starz'
    }, {
      id: 3746,
      title: 'BBC'
    }, {
      id: 19,
      title: 'FOX'
    }];

    // Дополнительные российские сервисы
    var russianServices = [{
      id: 2493,
      title: 'Start'
    }, {
      id: 2859,
      title: 'Premier'
    }, {
      id: 4085,
      title: 'KION'
    }, {
      id: 3923,
      title: 'ИВИ'
    }, {
      id: 3871,
      title: 'Okko'
    }, {
      id: 3827,
      title: 'Кинопоиск'
    }, {
      id: 5806,
      title: 'Wink'
    }, {
      id: 806,
      title: 'СТС'
    }, {
      id: 1191,
      title: 'ТНТ'
    }];

    // Если пользовательский интерфейс на русском, добавляем российские сервисы
    if (Storage.field('language') === 'ru') {
      streamingServices.push.apply(streamingServices, russianServices);
    }

    // Получаем временные периоды
    var periods = [{
      start: 1980,
      end: 1989,
      title: 'title_period_80s'
    }, {
      start: 1990,
      end: 1999,
      title: 'title_period_90s'
    }, {
      start: 2000,
      end: 2009,
      title: 'title_period_2000s'
    }, {
      start: 2010,
      end: 2019,
      title: 'title_period_2010s'
    }, {
      start: 2020,
      end: 2025,
      title: 'title_period_2020s'
    }];

    // Перемешивание массива
    function shuffleArray(array) {
      var newArray = _toConsumableArray(array);
      for (var i = newArray.length - 1; i > 0; i--) {
        var j = Math.floor(Math.random() * (i + 1));
        var _ref = [newArray[j], newArray[i]];
        newArray[i] = _ref[0];
        newArray[j] = _ref[1];
      }
      return newArray;
    }

    // Функция-обертка для запросов, гарантирующая минимальное количество результатов
    function requestWithMinResults(apiUrl, baseTitle, fallbackUrl, callback) {
      var params = arguments.length > 4 && arguments[4] !== undefined ? arguments[4] : {};
      var minResults = arguments.length > 5 && arguments[5] !== undefined ? arguments[5] : 5;
      // Первый запрос
      get$9(apiUrl, params, function (json) {
        json.title = baseTitle;

        // Только применяем стили, не фильтруем еще
        json = applyCardStyles(json, {
          wide: json.title === 'title_now_watch' ? false : true
        });

        // Если результатов достаточно, возвращаем их
        if (json.results && json.results.length >= minResults) {
          callback(json);
        }
        // Если результатов мало, но есть fallback запрос
        else if (fallbackUrl) {
          // Пробуем fallback запрос
          get$9(fallbackUrl, params, function (newJson) {
            newJson.title = baseTitle;
            newJson = applyCardStyles(newJson, {
              wide: newJson.title === 'title_now_watch' ? false : true
            });

            // Если и тут мало, соединяем результаты
            if (newJson.results && newJson.results.length < minResults && json.results) {
              // Объединяем результаты из обоих запросов
              var combinedResults = _toConsumableArray(json.results);
              newJson.results.forEach(function (item) {
                // Добавляем только уникальные элементы
                if (!combinedResults.some(function (existing) {
                  return existing.id === item.id;
                })) {
                  combinedResults.push(item);
                }
              });
              newJson.results = combinedResults;
            }

            // Возвращаем результат
            callback(newJson);
          }, function () {
            // Если fallback не сработал, используем оригинальный результат
            callback(json);
          });
        }
        // Если результатов мало и нет fallback запроса
        else {
          callback(json);
        }
      }, function () {
        // Если первый запрос не сработал, пробуем fallback
        if (fallbackUrl) {
          get$9(fallbackUrl, params, function (newJson) {
            newJson.title = baseTitle;
            newJson = applyCardStyles(newJson, {
              wide: newJson.title === 'title_now_watch' ? false : true
            });
            callback(newJson);
          }, function () {
            // Создаем пустой шаблон, если оба запроса не сработали
            callback({
              title: baseTitle,
              results: []
            });
          });
        } else {
          // Создаем пустой шаблон, если запрос не сработал
          callback({
            title: baseTitle,
            results: []
          });
        }
      });
    }

    // Функция для создания запроса по жанру с обеспечением минимального количества результатов
    function getGenreRequest(genreId) {
      var mediaType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'movie';
      var sortKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'vote_average.desc';
      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      return function (call) {
        var _sortOptions$find;
        var genre = genres.find(function (g) {
          return g.id === genreId;
        }) || {
          id: genreId,
          title: 'filter_genre_unknown'
        };
        var sortTitle = ((_sortOptions$find = sortOptions.find(function (s) {
          return s.key.includes(sortKey.split('&')[0]);
        })) === null || _sortOptions$find === void 0 ? void 0 : _sortOptions$find.title) || 'title_popular';
        var titlePrefix = options.titlePrefix || Lang.translate(sortTitle);
        var titleSuffix = options.titleSuffix || '';

        // Основной запрос с жанром
        var apiUrl = 'discover/' + mediaType + '?with_genres=' + genreId + '&sort_by=' + sortKey + '&vote_count.gte=' + (options.minVotes || 100);

        // Запрос без ограничения по жанру, но с тем же типом сортировки
        var fallbackUrl = 'discover/' + mediaType + '?sort_by=' + sortKey + '&vote_count.gte=' + (options.minVotes || 50);

        // Базовое название категории
        var baseTitle = titlePrefix + ' (' + Lang.translate(genre.title) + ')' + titleSuffix;

        // Выполняем запрос с обеспечением минимального количества результатов
        requestWithMinResults(apiUrl, baseTitle, fallbackUrl, function (json) {
          // Добавляем line_type = 'top' для высокого рейтинга
          if (sortTitle === 'title_high_rating' || sortKey.includes('vote_average.desc')) {
            json.line_type = 'top';
          }
          call(json);
        }, params);

        // Выполняем запрос с обеспечением минимального количества результатов
        requestWithMinResults(apiUrl, baseTitle, fallbackUrl, call, params);
      };
    }

    // Функция для создания запроса по стримингу с обеспечением минимального количества результатов
    function getStreamingRequest(serviceId, serviceName) {
      var genreId = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : null;
      var options = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : {};
      return function (call) {
        var apiUrl = 'discover/tv?with_networks=' + serviceId;
        if (genreId) {
          var _sortOptions$find2;
          var genre = genres.find(function (g) {
            return g.id === genreId;
          }) || {
            id: genreId,
            title: 'filter_genre_unknown'
          };
          apiUrl += '&with_genres=' + genreId;
          var sortKey = options.sortKey || 'popularity.desc';
          var sortTitle = ((_sortOptions$find2 = sortOptions.find(function (s) {
            return s.key.includes(sortKey.split('&')[0]);
          })) === null || _sortOptions$find2 === void 0 ? void 0 : _sortOptions$find2.title) || 'title_popular';
          apiUrl += '&sort_by=' + sortKey;

          // Базовое название с жанром
          var baseTitle = Lang.translate(sortTitle) + ' (' + Lang.translate(genre.title) + ') ' + Lang.translate('title_on') + ' ' + serviceName;

          // Fallback запрос без ограничения по жанру
          var fallbackUrl = 'discover/tv?with_networks=' + serviceId + '&sort_by=' + sortKey;
          requestWithMinResults(apiUrl, baseTitle, fallbackUrl, call, params);
        } else {
          var _sortOptions$find3;
          var _sortKey = options.sortKey || sortOptions[Math.floor(Math.random() * sortOptions.length)].key;
          var _sortTitle = ((_sortOptions$find3 = sortOptions.find(function (s) {
            return s.key.includes(_sortKey.split('&')[0]);
          })) === null || _sortOptions$find3 === void 0 ? void 0 : _sortOptions$find3.title) || 'title_popular';
          apiUrl += '&sort_by=' + _sortKey;

          // Базовое название без жанра
          var _baseTitle = Lang.translate(_sortTitle) + ' ' + Lang.translate('title_on') + ' ' + serviceName;
          requestWithMinResults(apiUrl, _baseTitle, null, call, params);
        }
      };
    }

    // Функция для создания запроса с российским контентом
    function getRussianContentRequest() {
      var genreId = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : null;
      var mediaType = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 'movie';
      var sortKey = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : 'popularity.desc';
      return function (call) {
        var apiUrl = 'discover/' + mediaType + '?with_original_language=ru';
        if (genreId) {
          var _sortOptions$find4;
          var genre = genres.find(function (g) {
            return g.id === genreId;
          }) || {
            id: genreId,
            title: 'filter_genre_unknown'
          };
          apiUrl += '&with_genres=' + genreId;
          var sortTitle = ((_sortOptions$find4 = sortOptions.find(function (s) {
            return s.key.includes(sortKey.split('&')[0]);
          })) === null || _sortOptions$find4 === void 0 ? void 0 : _sortOptions$find4.title) || 'title_popular';
          apiUrl += '&sort_by=' + sortKey;

          // Базовое название с жанром
          var baseTitle = Lang.translate(sortTitle) + ' (' + Lang.translate(genre.title) + ') ' + Lang.translate('title_russian');

          // Fallback с меньшим количеством параметров
          var fallbackUrl = 'discover/' + mediaType + '?with_original_language=ru&sort_by=' + sortKey;
          requestWithMinResults(apiUrl, baseTitle, fallbackUrl, call, params);
        } else {
          apiUrl += '&sort_by=' + sortKey;

          // Базовое название без жанра
          var _baseTitle2 = mediaType === 'movie' ? Lang.translate('title_russian_movies') : Lang.translate('title_russian_tv_shows');
          requestWithMinResults(apiUrl, _baseTitle2, null, call, params);
        }
      };
    }

    // Основной массив частей данных (базовые категории)
    var parts_data = [
    // Сейчас смотрят (без wide флага)
    function (call) {
      get$9('movie/now_playing', params, function (json) {
        json.title = Lang.translate('title_now_watch');
        json.wide = false;
        json.small = false;
        json.results.forEach(function (card) {
          card.promo = card.overview;
          card.promo_title = card.title || card.name;
        });
        call(json);
      }, call);
    },
    // Предстоящие эпизоды
    function (call) {
      var result = {
        results: TimeTable.lately().slice(0, 20),
        title: Lang.translate('title_upcoming_episodes'),
        nomore: true,
        cardClass: function cardClass(_elem, _params) {
          return new Episode(_elem, _params);
        }
      };

      // Применяем стили
      result = applyCardStyles(result);
      call(result);
    },
    // Популярные сегодня
    function (call) {
      get$9('trending/movie/day', params, function (json) {
        json.title = Lang.translate('title_trend_day');
        json = applyCardStyles(json);
        call(json);
      }, call);
    },
    // Популярные за неделю
    function (call) {
      get$9('trending/tv/week', params, function (json) {
        json.title = Lang.translate('title_trend_week');
        json = applyCardStyles(json);
        call(json);
      }, call);
    }];

    // Получаем все жанры
    var allGenreIds = genres.map(function (g) {
      return g.id;
    });

    // Добавляем запросы для жанров в перемешанном порядке
    var shuffledGenres = shuffleArray(_toConsumableArray(allGenreIds));

    // Добавляем высокорейтинговые фильмы и сериалы
    for (var i = 0; i < 10; i++) {
      var genreId = shuffledGenres[i % shuffledGenres.length];
      parts_data.push(getGenreRequest(genreId, i % 2 === 0 ? 'movie' : 'tv', 'vote_average.desc', {
        titlePrefix: Lang.translate('title_high_rating'),
        minVotes: 300
      }));
    }

    // Добавляем популярные фильмы и сериалы
    for (var _i = 0; _i < 10; _i++) {
      var _genreId = shuffledGenres[(_i + 10) % shuffledGenres.length];
      parts_data.push(getGenreRequest(_genreId, _i % 2 === 0 ? 'movie' : 'tv', 'popularity.desc', {
        titlePrefix: Lang.translate('title_popular'),
        minVotes: 100
      }));
    }

    // Добавляем фильмы и сериалы с большим количеством голосов
    for (var _i2 = 0; _i2 < 10; _i2++) {
      var _genreId2 = shuffledGenres[(_i2 + 20) % shuffledGenres.length];
      parts_data.push(getGenreRequest(_genreId2, _i2 % 2 === 0 ? 'movie' : 'tv', 'vote_count.desc', {
        titlePrefix: Lang.translate('title_many_votes'),
        minVotes: 500
      }));
    }

    // Добавляем новинки
    for (var _i3 = 0; _i3 < 10; _i3++) {
      var _genreId3 = shuffledGenres[(_i3 + 30) % shuffledGenres.length];
      parts_data.push(getGenreRequest(_genreId3, _i3 % 2 === 0 ? 'movie' : 'tv', _i3 % 2 === 0 ? 'release_date.desc' : 'first_air_date.desc', {
        titlePrefix: Lang.translate('title_new_releases'),
        minVotes: 50
      }));
    }

    // Добавляем подборки по временным периодам
    var shuffledPeriods = shuffleArray([].concat(periods));
    var _loop = function _loop() {
      var period = shuffledPeriods[_i4 % shuffledPeriods.length];
      var genreId = shuffledGenres[_i4 % shuffledGenres.length];
      var mediaType = _i4 % 2 === 0 ? 'movie' : 'tv';
      parts_data.push(function (call) {
        var genre = genres.find(function (g) {
          return g.id === genreId;
        }) || {
          id: genreId,
          title: 'filter_genre_unknown'
        };
        var dateField = mediaType === 'movie' ? 'primary_release_date' : 'first_air_date';
        var typeTitle = mediaType === 'movie' ? 'title_best_movies' : 'title_best_shows';
        var apiUrl = 'discover/' + mediaType + '?with_genres=' + genreId + '&sort_by=vote_average.desc' + '&vote_count.gte=200' + '&' + dateField + '.gte=' + period.start + '-01-01' + '&' + dateField + '.lte=' + period.end + '-12-31';
        var fallbackUrl = 'discover/' + mediaType + '?sort_by=vote_average.desc' + '&vote_count.gte=200' + '&' + dateField + '.gte=' + period.start + '-01-01' + '&' + dateField + '.lte=' + period.end + '-12-31';
        var baseTitle = Lang.translate(typeTitle) + ' (' + Lang.translate(genre.title) + ') ' + period.start + '-' + period.end;
        requestWithMinResults(apiUrl, baseTitle, fallbackUrl, call, params);
      });
    };
    for (var _i4 = 0; _i4 < 10; _i4++) {
      _loop();
    }

    // Добавляем запросы для стриминговых сервисов
    var shuffledServices = shuffleArray([].concat(streamingServices));

    // Добавляем стриминговые сервисы без жанров
    shuffledServices.forEach(function (service) {
      parts_data.push(getStreamingRequest(service.id, service.title));
    });

    // Добавляем стриминговые сервисы с жанрами
    for (var _i5 = 0; _i5 < 20; _i5++) {
      var service = shuffledServices[_i5 % shuffledServices.length];
      var _genreId4 = shuffledGenres[_i5 % shuffledGenres.length];
      parts_data.push(getStreamingRequest(service.id, service.title, _genreId4, {
        sortKey: sortOptions[_i5 % sortOptions.length].key
      }));
    }

    // Если интерфейс на русском, добавляем российский контент
    if (Storage.field('language') === 'ru') {
      // Общий российский контент
      parts_data.push(getRussianContentRequest(null, 'movie'));
      parts_data.push(getRussianContentRequest(null, 'tv'));

      // Российский контент по жанрам
      for (var _i6 = 0; _i6 < 15; _i6++) {
        var _genreId5 = shuffledGenres[_i6 % shuffledGenres.length];
        var mediaType = _i6 % 2 === 0 ? 'movie' : 'tv';
        var sortKey = sortOptions[_i6 % sortOptions.length].key;
        parts_data.push(getRussianContentRequest(_genreId5, mediaType, sortKey));
      }
    }

    // Добавляем partPersons, как в оригинальном коде
    Arrays.insert(parts_data, 0, Api.partPersons(parts_data, parts_limit, 'movie'));

    // Перемешиваем категории для разнообразия, начиная с 5-й позиции
    Arrays.shuffleArrayFromIndex(parts_data, 5);

    // Обработка загрузки частей
    function loadPart(partLoaded, partEmpty) {
      Api.partNext(parts_data, parts_limit, partLoaded, partEmpty);
    }
    loadPart(oncomplite, onerror);
    return loadPart;
  }
  function category$1() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    var fullcat = !(params.genres || params.keywords);
    var show = ['movie', 'tv', 'anime'].indexOf(params.url) > -1 && fullcat;
    var books = show ? Favorite.continues(params.url) : [];
    var recomend = show ? Arrays.shuffle(Recomends.get(params.url)).slice(0, 19) : [];
    var parts_limit = 6;
    var parts_data = [function (call) {
      if (params.url == 'tv' || params.url == 'anime') {
        call({
          results: TimeTable.lately().slice(0, 20),
          title: Lang.translate('title_upcoming_episodes'),
          nomore: true,
          cardClass: function cardClass(_elem, _params) {
            return new Episode(_elem, _params);
          }
        });
      } else {
        call();
      }
    }, function (call) {
      var json = {
        results: books,
        title: params.url == 'tv' ? Lang.translate('title_continue') : Lang.translate('title_watched')
      };
      if (params.url == 'tv') {
        json["continue"] = true;
        json.line_type = 'continue';
      }
      if (params.url == 'movie') {
        json["continue"] = true;
        json.line_type = 'continue';
      }
      call(json);
    }, function (call) {
      var json = {
        results: recomend,
        title: Lang.translate('title_recomend_watch'),
        small: true,
        wide: true
      };
      json.results.forEach(function (card) {
        card.promo = card.overview;
        card.promo_title = card.title || card.name;
      });
      call(json);
    }, function (call) {
      if (params.url == 'movie') {
        get$9('discover/' + params.url + '?with_release_type=3', params, function (json) {
          json.title = Lang.translate('title_now_watch');
          json.small = true;
          json.wide = true;
          json.results.forEach(function (card) {
            card.promo = card.overview;
            card.promo_title = card.title || card.name;
          });
          call(json);
        }, call);
      } else call();
    }, function (call) {
      if (params.url == 'tv') {
        get$9('discover/tv?language=ru&with_networks=213', params, function (json) {
          json.title = Lang.translate('title_trend_netflix');
          json.small = true;
          json.wide = true;
          json.results.forEach(function (card) {
            card.promo = card.overview;
            card.promo_title = card.title || card.name;
          });
          call(json);
        }, call);
      } else call();
    }, function (call) {
      if (params.url == 'movie') {
        get$9('discover/movie?language=ru&region=RU&with_original_language=ru', params, function (json) {
          json.title = Lang.translate('title_russian_movies');
          json.small = true;
          json.wide = true;
          json.results.forEach(function (card) {
            card.promo = card.overview;
            card.promo_title = card.title || card.name;
          });
          call(json);
        }, call);
      } else call();
    }, function (call) {
      if (params.url == 'tv') {
        get$9('discover/tv?language=ru&region=RU&with_original_language=ru', params, function (json) {
          json.title = Lang.translate('title_russian_tv_shows');
          json.small = true;
          json.wide = true;
          json.results.forEach(function (card) {
            card.promo = card.overview;
            card.promo_title = card.title || card.name;
          });
          call(json);
        }, call);
      } else call();
    }, function (call) {
      get$9(params.url == 'movie' ? 'discover/movie' : 'trending/tv/day', params, function (json) {
        json.title = Lang.translate('title_popular');
        json.small = true;
        json.wide = true;
        json.results.forEach(function (card) {
          card.promo = card.overview;
          card.promo_title = card.title || card.name;
        });

        // if(params.url == 'tv'){
        //     json.ad    = 'bot'
        //     json.type  = params.url
        // }

        call(json);
      }, call);
    }, function (call) {
      if (params.url == 'tv') {
        get$9('discover/tv?language=ru&with_networks=3827', params, function (json) {
          json.title = Lang.translate('title_trend_kinopoisk');
          json.small = true;
          json.wide = true;
          json.results.forEach(function (card) {
            card.promo = card.overview;
            card.promo_title = card.title || card.name;
          });
          call(json);
        }, call);
      } else call();
    },
    // Потом что нибудь придумаю. Лезет всякий мусор
    // (call)=>{
    //     get('discover/' + params.url + '?'+(params.url == 'movie' ? 'primary_release_year' : 'first_air_date_year')+'=' + (new Date().getFullYear() - 1) + '&vote=6-8',params,(json)=>{

    //         json.title = Lang.translate('title_last_year')

    //         json.small = true
    //         json.wide = true

    //         json.results.forEach(card=>{
    //             card.promo = card.overview
    //             card.promo_title = card.title || card.name
    //         })

    //         call(json)
    //     },call)
    // },
    function (call) {
      var lte = new Date().getFullYear() - 2 + '-12-31';
      var gte = new Date().getFullYear() - 7 + '-01-01';
      var reg = params.url == 'movie' ? 'primary_release_date' : 'first_air_date';
      lte = reg + '.lte=' + lte;
      gte = reg + '.gte=' + gte;
      get$9('discover/' + params.url + '?' + lte + '&' + gte + '&vote_average.gte=7', params, function (json) {
        json.title = Lang.translate('title_worth_rewatch');
        json.small = true;
        json.wide = true;
        json.results.forEach(function (card) {
          card.promo = card.overview;
          card.promo_title = card.title || card.name;
        });
        call(json);
      }, call);
    }, function (call) {
      var lte = new Date().getFullYear() - 2 + '-12-31';
      var gte = new Date().getFullYear() - 7 + '-01-01';
      var reg = params.url == 'movie' ? 'primary_release_date' : 'first_air_date';
      lte = reg + '.lte=' + lte;
      gte = reg + '.gte=' + gte;
      get$9('discover/' + params.url + '?' + lte + '&' + gte + '&vote_average.gte=8&vote_average.lte=9', params, function (json) {
        json.title = Lang.translate('title_hight_voite');
        json.line_type = 'top';
        json.small = true;
        json.wide = true;
        json.results.forEach(function (card) {
          card.promo = card.overview;
          card.promo_title = card.title || card.name;
        });
        call(json);
      }, call);
    }, function (call) {
      if (params.genres) return call();
      if (params.url == 'tv') {
        get$9('trending/tv/week', params, function (json) {
          json.results = json.results.filter(function (movie) {
            return movie.vote_average >= 7 && !['IN'].includes(movie.original_country);
          });
          json.title = Lang.translate('title_this_week');
          json.small = true;
          json.wide = true;
          json.results.forEach(function (card) {
            card.promo = card.overview;
            card.promo_title = card.title || card.name;
          });
          call(json);
        }, call);
      } else {
        get$9('movie/upcoming', params, function (json) {
          json.results = json.results.filter(function (movie) {
            return movie.vote_average >= 7 && !['IN'].includes(movie.original_country);
          });
          json.title = Lang.translate('title_upcoming');
          json.small = true;
          json.wide = true;
          json.results.forEach(function (card) {
            card.promo = card.overview;
            card.promo_title = card.title || card.name;
            card.release_quality;
          });
          call(json);
        }, call);
      }
    }];
    var start_shuffle = parts_data.length + 1;
    if (fullcat) Arrays.insert(parts_data, 0, Api.partPersons(parts_data, parts_limit, params.url, start_shuffle));
    genres$1[params.url].forEach(function (genre) {
      var gen = params.genres ? [].concat(params.genres, genre.id) : [genre.id];
      if (params.genres && params.genres == genre.id) return;
      var event = function event(call) {
        get$9('discover/' + params.url + '?with_genres=' + gen.join(','), params, function (json) {
          json.title = Lang.translate(genre.title.replace(/[^a-z_]/g, ''));
          call(json);
        }, call);
      };
      parts_data.push(event);
      Arrays.shuffleArrayFromIndex(parts_data, start_shuffle);
    });

    /* Реализуем раздел с Аниме и подпишем все категории для понимания что это */
    if (params.url == 'anime') {
      var animeLoadPart = function animeLoadPart(partLoaded, partEmpty) {
        Api.partNext(_parts_data, _parts_limit, partLoaded, partEmpty);
      }; // Вызываем oncomplite с нашей функцией загрузки
      // Используем ключевое слово для аниме
      params.keywords = params.keywords || "210024";
      var old_url = params.url;
      params.url = 'movie';
      var _parts_limit = 10; // Увеличиваем лимит для большего количества категорий
      var _parts_data = [];

      // Сейчас смотрят / Популярное
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&sort_by=popularity.desc', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('title_popular');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('title_popular'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('title_popular'),
            results: []
          });
        });
      });

      // Новинки
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&sort_by=primary_release_date.desc&vote_average.gte=6&vote_count.gte=10', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('title_new');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('title_new'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('title_new'),
            results: []
          });
        });
      });

      // В топе
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&sort_by=vote_average.desc&vote_count.gte=100', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('title_in_top');
            json.line_type = 'top';
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('title_in_top'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('title_in_top'),
            results: []
          });
        });
      });

      // Новинки этого года
      var current_year = new Date().getFullYear();
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&primary_release_year=' + current_year, params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('title_this_year');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('title_this_year'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('title_this_year'),
            results: []
          });
        });
      });

      // Стоит пересмотреть (рейтинг выше 8)
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&vote_average.gte=8&vote_count.gte=100', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('title_worth_rewatch');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('title_worth_rewatch'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('title_worth_rewatch'),
            results: []
          });
        });
      });

      // Драма
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&with_genres=18', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('filter_genre_dr');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('filter_genre_dr'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('filter_genre_dr'),
            results: []
          });
        });
      });

      // Фантастика
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&with_genres=878', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('filter_genre_fa');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('filter_genre_fa'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('filter_genre_fa'),
            results: []
          });
        });
      });

      // Фэнтези
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&with_genres=14', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('filter_genre_fe');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('filter_genre_fe'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('filter_genre_fe'),
            results: []
          });
        });
      });

      // Детектив
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&with_genres=9648', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('filter_genre_de');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('filter_genre_de'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('filter_genre_de'),
            results: []
          });
        });
      });

      // Боевик
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&with_genres=28', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('filter_genre_ac');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('filter_genre_ac'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('filter_genre_ac'),
            results: []
          });
        });
      });

      // Приключения
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&with_genres=12', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('filter_genre_ad');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('filter_genre_ad'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('filter_genre_ad'),
            results: []
          });
        });
      });

      // Комедия
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&with_genres=35', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('filter_genre_cm');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('filter_genre_cm'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('filter_genre_cm'),
            results: []
          });
        });
      });

      // Мелодрама
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&with_genres=10749', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('filter_genre_md');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('filter_genre_md'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('filter_genre_md'),
            results: []
          });
        });
      });

      // Семейные
      _parts_data.push(function (call) {
        get$9('discover/movie?with_keywords=210024&with_genres=10751', params, function (json) {
          if (json && json.results) {
            json.title = Lang.translate('filter_genre_fm');
            json.small = true;
            json.wide = true;
            json.results.forEach(function (card) {
              card.promo = card.overview;
              card.promo_title = card.title || card.name;
            });
          } else {
            json = {
              title: Lang.translate('filter_genre_fm'),
              results: []
            };
          }
          call(json);
        }, function (error) {
          call({
            title: Lang.translate('filter_genre_fm'),
            results: []
          });
        });
      });

      // Восстанавливаем оригинальный url
      params.url = old_url;
      animeLoadPart(oncomplite, onerror);

      // Возвращаем функцию загрузки
      return animeLoadPart;
    }
    function loadPart(partLoaded, partEmpty) {
      Api.partNext(parts_data, parts_limit, partLoaded, partEmpty);
    }
    loadPart(oncomplite, onerror);
    return loadPart;
  }
  function full$1() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    var status = new status$2(7);
    status.onComplite = function (data) {
      if (data.movie && blocked_ids.includes(data.movie.id)) {
        Prisma.Noty.show(Prisma.Lang.translate('Контент заблокирован по требованию правообладателя'));
        onerror();
        return;
      }
      oncomplite(data);
    };
    if (Utils$2.dcma(params.method, params.id)) {
      Prisma.Noty.show(Prisma.Lang.translate('Контент заблокирован по требованию правообладателя'));
      return onerror();
    }
    get$9(params.method + '/' + params.id + '?append_to_response=content_ratings,release_dates,external_ids,keywords,logos,alternative_titles', params, function (json) {
      if (blocked_ids.includes(json.id)) {
        Prisma.Noty.show(Prisma.Lang.translate('Контент заблокирован по требованию правообладателя'));
        status.error();
        return;
      }
      json.source = 'tmdb';
      json.logo = json.logos && json.logos.length > 0 ? json.logos[0].file_path : null;
      if (json.external_ids) {
        json.imdb_id = json.external_ids.imdb_id;
      }
      if (params.method == 'tv') {
        var season = Utils$2.countSeasons(json);
        get$9('tv/' + json.id + '/season/' + season, {}, function (ep) {
          status.append('episodes', ep);
        }, status.error.bind(status));
      } else status.need--;
      if (json.belongs_to_collection) {
        get$9('collection/' + json.belongs_to_collection.id, {}, function (collection) {
          collection.results = collection.parts.slice(0, 19);
          status.append('collection', collection);
        }, status.error.bind(status));
      } else status.need--;
      status.append('movie', json);
    }, function () {
      status.need -= 2;
      status.error();
    });
    get$9(params.method + '/' + params.id + '/credits', params, function (json) {
      status.append('persons', json);
    }, status.error.bind(status));
    get$9(params.method + '/' + params.id + '/recommendations', params, function (json) {
      status.append('recomend', json);
    }, status.error.bind(status));
    get$9(params.method + '/' + params.id + '/similar', params, function (json) {
      status.append('simular', json);
    }, status.error.bind(status));
    videos(params, function (json) {
      status.append('videos', json);
    }, status.error.bind(status));
    reactionsGet(params, function (json) {
      status.append('reactions', json);
    });
    if (Lang.selected(['ru', 'uk', 'be']) && window.prisma_settings.account_use) {
      status.need++;
      discussGet(params, function (json) {
        status.append('discuss', json);
      }, status.error.bind(status));
    }
  }
  function videos() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var lg = Storage.field('tmdb_lang');
    var status = new status$2(lg == 'en' ? 1 : 2);
    status.onComplite = function (res) {
      var data = [];
      if (res.one && res.one.results && res.one.results.length) data = data.concat(res.one.results);
      if (res.two && res.two.results && res.two.results.length) data = data.concat(res.two.results);
      oncomplite({
        results: data
      });
    };
    get$9(params.method + '/' + params.id + '/videos', {
      langs: Storage.field('tmdb_lang')
    }, function (json) {
      status.append('one', json);
    }, status.error.bind(status));
    if (lg !== 'en') {
      get$9(params.method + '/' + params.id + '/videos', {
        langs: 'en'
      }, function (json) {
        status.append('two', json);
      }, status.error.bind(status));
    }
  }
  function discussGet(params, oncomplite, onerror) {
    if (window.prisma_settings.disable_features.discuss) return onerror();
    network$b.silent(Utils$2.protocol() + object$2.pris_domain + '/api/discuss/get/' + params.method + '_' + params.id + '/' + (params.page || 1) + '/' + Storage.field('language'), oncomplite, onerror, false, {
      timeout: 1000 * 5
    });
  }
  function reactionsGet(params, oncomplite) {
    network$b.silent(Utils$2.protocol() + 'ws.' + object$2.api_domain + '/api/reactions/get/' + params.method + '_' + params.id + '?userId=' + params.userId, oncomplite, function () {
      oncomplite({
        result: {
          averageRating: 0,
          totalRatings: 0,
          userRating: 0
        }
      });
    }, false, {
      timeout: 1000 * 5
    });
  }
  function reactionsAdd(params, oncomplite, onerror) {
    network$b.silent(Utils$2.protocol() + 'ws.' + object$2.api_domain + '/api/reactions/add/' + params.method + '_' + params.id, function (response) {
      oncomplite(response);
    }, onerror, {
      rating: params.rating,
      userId: params.userId
    });
  }
  function list$2() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    var u = url$5(params.url, params);
    network$b.silent(u, oncomplite, onerror);
  }
  function get$9(method) {
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var oncomplite = arguments.length > 2 ? arguments[2] : undefined;
    var onerror = arguments.length > 3 ? arguments[3] : undefined;
    var u = url$5(method, params);
    network$b.timeout(1000 * 10);
    network$b.silent(u, function (json) {
      json.url = method;
      oncomplite(json);
    }, onerror);
  }
  function isBlockedContent(item) {
    if (blocked_ids.includes(item.id)) return true;
    var title = (item.title || item.name || '').toLowerCase();
    return stop_keywords.some(function (keyword) {
      return title.includes(keyword);
    });
  }
  function filterResults(results) {
    return results.filter(function (item) {
      return !isBlockedContent(item);
    });
  }
  function search$3() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var status = new status$2(3);
    status.onComplite = function (data) {
      var items = [];
      if (data.movie && data.movie.results.length) {
        data.movie.results = filterResults(data.movie.results);
        if (data.movie.results.length) items.push(data.movie);
      }
      if (data.tv && data.tv.results.length) {
        data.tv.results = filterResults(data.tv.results);
        if (data.tv.results.length) items.push(data.tv);
      }
      if (data.person && data.person.results.length) items.push(data.person);
      oncomplite(items);
    };
    get$9('search/movie', params, function (json) {
      json.title = Lang.translate('menu_movies');
      json.type = 'movie';
      status.append('movie', json);
    }, status.error.bind(status));
    get$9('search/tv', params, function (json) {
      json.title = Lang.translate('menu_tv');
      json.type = 'tv';
      status.append('tv', json);
    }, status.error.bind(status));
    get$9('search/person', params, function (json) {
      json.title = Lang.translate('title_actors');
      json.type = 'person';
      status.append('person', json);
    }, status.error.bind(status));
  }
  function discovery$1() {
    return {
      title: 'TMDB',
      search: search$3,
      params: {
        align_left: true,
        object: {
          source: 'tmdb'
        }
      },
      onMore: function onMore(params) {
        Activity$1.push({
          url: 'search/' + params.data.type,
          title: Lang.translate('search') + ' - ' + params.query,
          component: 'category_full',
          page: 2,
          query: encodeURIComponent(params.query),
          source: 'tmdb'
        });
      },
      onCancel: network$b.clear.bind(network$b)
    };
  }
  function person$1() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var sortCredits = function sortCredits(credits) {
      return credits.map(function (a) {
        a.year = parseInt(((a.release_date || a.first_air_date || '0000') + '').slice(0, 4));
        return a;
      }).sort(function (a, b) {
        return b.vote_average - a.vote_average && b.vote_count - a.vote_count;
      }); //сортируем по оценке и кол-ву голосов (чтобы отсечь мусор с 1-2 оценками)
    };
    var convert = function convert(credits, person_data) {
      if (params.only_credits) {
        var cast = sortCredits(credits.cast);
        var result = {};
        result[params.only_credits] = sortCredits(cast.filter(function (media) {
          return media.media_type === params.only_credits;
        }));
        return result;
      } else {
        var title_production = Lang.translate('full_production'),
          title_directing = Lang.translate('full_directing'),
          title_writing = Lang.translate('full_writing');
        credits.crew.forEach(function (a) {
          switch (a.department) {
            case "Production":
              a.department = title_production;
              break;
            case "Directing":
              a.department = title_directing;
              break;
            case "Writing":
              a.department = title_writing;
              break;
          }
        });
        var _cast = sortCredits(credits.cast),
          crew = sortCredits(credits.crew),
          tv = sortCredits(_cast.filter(function (media) {
            return media.media_type === 'tv';
          })),
          movie = sortCredits(_cast.filter(function (media) {
            return media.media_type === 'movie';
          })),
          knownFor;

        //Наиболее известные работы человека
        //1. Группируем все работы по департаментам (Актер, Режиссер, Сценарист и т.д.)
        knownFor = Arrays.groupBy(crew, 'department');
        var actorGender = person_data.gender === 1 ? Lang.translate('title_actress') : Lang.translate('title_actor');
        if (movie.length > 0) knownFor["".concat(actorGender, " - ") + Lang.translate('menu_movies')] = movie;
        if (tv.length > 0) knownFor["".concat(actorGender, " - ") + Lang.translate('menu_tv')] = tv;

        //2. Для каждого департамента суммируем кол-ва голосов (вроде бы сам TMDB таким образом определяет knownFor для людей)
        knownFor = Object.entries(knownFor).map(function (_ref2) {
          var _ref3 = _slicedToArray(_ref2, 2),
            depIdx = _ref3[0],
            dep = _ref3[1];
          //убираем дубликаты (человек может быть указан в одном департаменте несколько раз на разных должностях (job))
          var set = {},
            credits = dep.filter(function (credit) {
              return set.hasOwnProperty(credit.original_title || credit.original_name) ? false : credit.original_title ? set[credit.original_title] = true : set[credit.original_name] = true;
            });
          return {
            name: depIdx,
            credits: credits,
            vote_count: dep.reduce(function (a, b) {
              return a + b.vote_count;
            }, 0)
          };
          //3. Сортируем департаменты по кол-ву голосов
        }).sort(function (a, b) {
          return b.vote_count - a.vote_count;
        });
        return {
          raw: credits,
          cast: _cast,
          crew: crew,
          tv: tv,
          movie: movie,
          knownFor: knownFor
        };
      }
    };
    var status = new status$2(params.only_credits ? 1 : 2);
    status.onComplite = function () {
      var fulldata = {};
      if (status.data.person) fulldata.person = status.data.person;
      if (status.data.credits) fulldata.credits = convert(status.data.credits, status.data.person || {});
      oncomplite(fulldata);
    };
    if (!params.only_credits) {
      get$9('person/' + params.id, params, function (json) {
        status.append('person', json);
      }, status.error.bind(status));
    }
    get$9('person/' + params.id + '/combined_credits', params, function (json) {
      status.append('credits', json);
    }, status.error.bind(status));
  }
  function menu$1() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    if (menu_list.length) oncomplite(menu_list);else {
      var u = url$5('genre/movie/list', params);
      network$b.silent(u, function (j) {
        j.genres.forEach(function (g) {
          menu_list.push({
            title: g.name,
            id: g.id
          });
        });
        oncomplite(menu_list);
      });
    }
  }
  function menuCategory$1(params, oncomplite) {
    var menu = [];
    if (params.action !== 'tv') {
      menu.push({
        title: Lang.translate('title_now_watch'),
        url: params.action + '/now_playing'
      });
    }
    menu.push({
      title: Lang.translate('title_popular'),
      url: params.action + '/popular'
    });
    var date = new Date();
    var query = [];
    query.push('sort_by=release_date.desc');
    query.push('year=' + date.getFullYear());
    query.push('first_air_date_year=' + date.getFullYear());
    query.push('vote_average.gte=7');
    menu.push({
      title: Lang.translate('title_new'),
      url: 'discover/' + params.action + '?' + query.join('&')
    });
    if (params.action == 'tv') {
      menu.push({
        title: Lang.translate('title_tv_today'),
        url: params.action + '/airing_today'
      });
      menu.push({
        title: Lang.translate('title_this_week'),
        url: params.action + '/on_the_air'
      });
    }
    menu.push({
      title: Lang.translate('title_in_top'),
      url: params.action + '/top_rated'
    });
    oncomplite(menu);
  }
  function external_ids() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    get$9((params.type || 'tv') + '/' + params.id + '/external_ids', params, oncomplite, onerror);
  }
  function external_imdb_id() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    get$9(params.type + '/' + params.id + '/external_ids', params, function (ids) {
      oncomplite(ids.imdb_id || '');
    }, function () {
      oncomplite('');
    });
  }
  function company$1() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    var status = new status$2(3);
    status.onComplite = function () {
      function sortResultsByVoteAverage(results) {
        return results.sort(function (a, b) {
          return b.vote_average - a.vote_average;
        });
      }
      if (status.data.company) {
        var fulldata = {
          company: status.data.company,
          lines: []
        };
        if (status.data.movie && status.data.movie.results.length) fulldata.lines.push({
          nomore: true,
          title: Lang.translate('menu_movies'),
          results: sortResultsByVoteAverage(status.data.movie.results)
        });
        if (status.data.tv && status.data.tv.results.length) fulldata.lines.push({
          nomore: true,
          title: Lang.translate('menu_tv'),
          results: sortResultsByVoteAverage(status.data.tv.results)
        });
        oncomplite(fulldata);
      } else onerror();
    };
    get$9('company/' + params.id, params, function (json) {
      status.append('company', json);
    }, status.error.bind(status));
    get$9('discover/movie?sort_by=vote_count.desc&with_companies=' + params.id, params, function (json) {
      status.append('movie', json);
    }, status.error.bind(status));
    get$9('discover/tv?sort_by=vote_count.desc&with_companies=' + params.id, params, function (json) {
      status.append('tv', json);
    }, status.error.bind(status));
  }
  function seasons$1(tv, from, oncomplite) {
    var status = new status$2(from.length);
    status.onComplite = oncomplite;
    from.forEach(function (season) {
      get$9('tv/' + tv.id + '/season/' + season, {}, function (json) {
        status.append('' + season, json);
      }, status.error.bind(status));
    });
  }
  function parsePG(movie) {
    var pg;
    var cd = Storage.field('language');
    if (movie.content_ratings) {
      try {
        var _find = movie.content_ratings.results.find(function (a) {
          return a.iso_3166_1 == cd.toUpperCase();
        });
        if (!_find) _find = movie.content_ratings.results.find(function (a) {
          return a.iso_3166_1 == 'US';
        });
        if (_find) pg = Utils$2.decodePG(_find.rating);
      } catch (e) {}
    }
    if (movie.release_dates && !pg) {
      var _find2 = movie.release_dates.results.find(function (a) {
        return a.iso_3166_1 == cd.toUpperCase();
      });
      if (!_find2) _find2 = movie.release_dates.results.find(function (a) {
        return a.iso_3166_1 == 'US';
      });
      if (_find2 && _find2.release_dates.length) {
        pg = Utils$2.decodePG(_find2.release_dates[0].certification);
      }
    }
    if (movie.restrict) pg = movie.restrict + '+';
    return pg;
  }
  function parseCountries(movie) {
    var iso_countries = {
      'AD': Lang.translate('country_ad'),
      'AE': Lang.translate('country_ae'),
      'AF': Lang.translate('country_af'),
      'AL': Lang.translate('country_al'),
      'AM': Lang.translate('country_am'),
      'AO': Lang.translate('country_ao'),
      'AR': Lang.translate('country_ar'),
      'AT': Lang.translate('country_at'),
      'AU': Lang.translate('country_au'),
      'AZ': Lang.translate('country_az'),
      'BA': Lang.translate('country_ba'),
      'BD': Lang.translate('country_bd'),
      'BE': Lang.translate('country_be'),
      'BG': Lang.translate('country_bg'),
      'BH': Lang.translate('country_bh'),
      'BJ': Lang.translate('country_bj'),
      'BO': Lang.translate('country_bo'),
      'BR': Lang.translate('country_br'),
      'BS': Lang.translate('country_bs'),
      'BW': Lang.translate('country_bw'),
      'BY': Lang.translate('country_by'),
      'CA': Lang.translate('country_ca'),
      'CH': Lang.translate('country_ch'),
      'CL': Lang.translate('country_cl'),
      'CM': Lang.translate('country_cm'),
      'CN': Lang.translate('country_cn'),
      'CO': Lang.translate('country_co'),
      'CR': Lang.translate('country_cr'),
      'CU': Lang.translate('country_cu'),
      'CV': Lang.translate('country_cv'),
      'CY': Lang.translate('country_cy'),
      'CZ': Lang.translate('country_cz'),
      'DE': Lang.translate('country_de'),
      'DK': Lang.translate('country_dk'),
      'DO': Lang.translate('country_do'),
      'DZ': Lang.translate('country_dz'),
      'EC': Lang.translate('country_ec'),
      'EE': Lang.translate('country_ee'),
      'ES': Lang.translate('country_es'),
      'ET': Lang.translate('country_et'),
      'FI': Lang.translate('country_fi'),
      'FO': Lang.translate('country_fo'),
      'FR': Lang.translate('country_fr'),
      'GA': Lang.translate('country_ga'),
      'GB': Lang.translate('country_gb'),
      'GE': Lang.translate('country_ge'),
      'GH': Lang.translate('country_gh'),
      'GL': Lang.translate('country_gl'),
      'GR': Lang.translate('country_gr'),
      'GT': Lang.translate('country_gt'),
      'HK': Lang.translate('country_hk'),
      'HR': Lang.translate('country_hr'),
      'HU': Lang.translate('country_hu'),
      'IE': Lang.translate('country_ie'),
      'IL': Lang.translate('country_il'),
      'IQ': Lang.translate('country_iq'),
      'IS': Lang.translate('country_is'),
      'IT': Lang.translate('country_it'),
      'JM': Lang.translate('country_jm'),
      'JO': Lang.translate('country_jo'),
      'JP': Lang.translate('country_jp'),
      'KE': Lang.translate('country_ke'),
      'KG': Lang.translate('country_kg'),
      'KH': Lang.translate('country_kh'),
      'KR': Lang.translate('country_kr'),
      'KW': Lang.translate('country_kw'),
      'KZ': Lang.translate('country_kz'),
      'LA': Lang.translate('country_la'),
      'LB': Lang.translate('country_lb'),
      'LI': Lang.translate('country_li'),
      'LK': Lang.translate('country_lk'),
      'LT': Lang.translate('country_lt'),
      'LU': Lang.translate('country_lu'),
      'LV': Lang.translate('country_lv'),
      'LY': Lang.translate('country_ly'),
      'MA': Lang.translate('country_ma'),
      'MC': Lang.translate('country_mc'),
      'MD': Lang.translate('country_md'),
      'ME': Lang.translate('country_me'),
      'MK': Lang.translate('country_mk'),
      'MM': Lang.translate('country_mm'),
      'MN': Lang.translate('country_mn'),
      'MO': Lang.translate('country_mo'),
      'MT': Lang.translate('country_mt'),
      'MV': Lang.translate('country_mv'),
      'MX': Lang.translate('country_mx'),
      'MY': Lang.translate('country_my'),
      'MZ': Lang.translate('country_mz'),
      'NG': Lang.translate('country_ng'),
      'NI': Lang.translate('country_ni'),
      'NL': Lang.translate('country_nl'),
      'NO': Lang.translate('country_no'),
      'NP': Lang.translate('country_np'),
      'NZ': Lang.translate('country_nz'),
      'OM': Lang.translate('country_om'),
      'PA': Lang.translate('country_pa'),
      'PE': Lang.translate('country_pe'),
      'PK': Lang.translate('country_pk'),
      'PL': Lang.translate('country_pl'),
      'PR': Lang.translate('country_pr'),
      'PT': Lang.translate('country_pt'),
      'PY': Lang.translate('country_py'),
      'QA': Lang.translate('country_qa'),
      'RO': Lang.translate('country_ro'),
      'RS': Lang.translate('country_rs'),
      'RU': Lang.translate('country_ru'),
      'SA': Lang.translate('country_sa'),
      'SE': Lang.translate('country_se'),
      'SG': Lang.translate('country_sg'),
      'SI': Lang.translate('country_si'),
      'SK': Lang.translate('country_sk'),
      'SU': Lang.translate('country_su'),
      'SV': Lang.translate('country_sv'),
      'TH': Lang.translate('country_th'),
      'TJ': Lang.translate('country_tj'),
      'TR': Lang.translate('country_tr'),
      'TW': Lang.translate('country_tw'),
      'UA': Lang.translate('country_ua'),
      'US': Lang.translate('country_us'),
      'UY': Lang.translate('country_uy'),
      'UZ': Lang.translate('country_uz'),
      'VE': Lang.translate('country_ve'),
      'VN': Lang.translate('country_vn'),
      'YU': Lang.translate('country_yu'),
      'ZA': Lang.translate('country_za')
    };
    return movie.production_countries ? movie.production_countries.map(function (a) {
      //let cc = 'country_' + a.iso_3166_1.toLowerCase()
      //return Lang.translate(cc) // FIXME! return a.name as fallback
      if (iso_countries.hasOwnProperty(a.iso_3166_1)) {
        return iso_countries[a.iso_3166_1];
      } else {
        return a.name;
      }
    }) : '';
  }
  function getGenresNameFromIds(card_type, ids) {
    var finded = [];
    var where = genres$1[card_type];
    ids.forEach(function (a) {
      var find = where.find(function (i) {
        return i.id == a;
      });
      if (find) finded.push(Utils$2.capitalizeFirstLetter(Lang.translate(find.title)));
    });
    return finded;
  }
  function clear$7() {
    network$b.clear();
  }

  /**
   * Получить трейлеры для фильма или сериала
   * @param {object} params - Параметры запроса (id, method, language)
   * @param {function} oncomplite - Функция обратного вызова при успехе
   * @param {function} onerror - Функция обратного вызова при ошибке
   */
  function trailers() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    if (!params.id) {
      onerror && onerror('ID не указан');
      return;
    }

    // Определяем метод (тип медиа: movie/tv)
    var method = params.method || 'movie';

    // Целевой язык (по умолчанию из настроек)
    var targetLang = params.language || Storage.field('tmdb_lang');

    // Используем тот же подход, что и в videos - запрашиваем видео и на языке, и на английском
    var status = new status$2(targetLang === 'en' ? 1 : 2);
    status.onComplite = function (res) {
      var allVideos = [];

      // Объединяем видео с языка пользователя и английского
      if (res.targetLang && res.targetLang.results && res.targetLang.results.length) {
        allVideos = allVideos.concat(res.targetLang.results);
      }
      if (res.english && res.english.results && res.english.results.length) {
        allVideos = allVideos.concat(res.english.results);
      }
      if (allVideos.length === 0) {
        console.log("[TMDB] \u041D\u0435\u0442 \u0432\u0438\u0434\u0435\u043E \u0434\u043B\u044F ".concat(method, "/").concat(params.id, " \u043D\u0430 \u044F\u0437\u044B\u043A\u0430\u0445 ").concat(targetLang, " \u0438 en"));
        return oncomplite({
          results: []
        });
      }

      // Приоритетные типы видео (в порядке важности)
      var videoTypes = ['Trailer', 'Teaser', 'Clip', 'Behind the Scenes', 'Featurette'];

      // Сначала фильтруем по типу
      var filteredVideos = allVideos.filter(function (video) {
        return videoTypes.includes(video.type);
      }).sort(function (a, b) {
        // Приоритет по языку - сначала видео на языке пользователя
        if (a.iso_639_1 === targetLang && b.iso_639_1 !== targetLang) return -1;
        if (a.iso_639_1 !== targetLang && b.iso_639_1 === targetLang) return 1;

        // Приоритет: Official > Non-official
        var aIsOfficial = a.official ? 1 : 0;
        var bIsOfficial = b.official ? 1 : 0;
        if (aIsOfficial !== bIsOfficial) return bIsOfficial - aIsOfficial;

        // Приоритет по типу видео
        var aTypeIndex = videoTypes.indexOf(a.type);
        var bTypeIndex = videoTypes.indexOf(b.type);
        if (aTypeIndex !== bTypeIndex) return aTypeIndex - bTypeIndex;

        // Приоритет по дате - более новые выше
        return new Date(b.published_at || 0) - new Date(a.published_at || 0);
      });

      // Если в отфильтрованных нет результатов, берем любое видео
      if (filteredVideos.length === 0) {
        console.log("[TMDB] \u0414\u043B\u044F ".concat(method, "/").concat(params.id, " \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u043E \u0442\u0440\u0435\u0439\u043B\u0435\u0440\u043E\u0432 \u043D\u0443\u0436\u043D\u043E\u0433\u043E \u0442\u0438\u043F\u0430, \u0438\u0441\u043F\u043E\u043B\u044C\u0437\u0443\u0435\u043C \u043B\u044E\u0431\u043E\u0435 \u0432\u0438\u0434\u0435\u043E"));
        filteredVideos = allVideos.sort(function (a, b) {
          // Приоритет по языку
          if (a.iso_639_1 === targetLang && b.iso_639_1 !== targetLang) return -1;
          if (a.iso_639_1 !== targetLang && b.iso_639_1 === targetLang) return 1;

          // Затем по дате
          return new Date(b.published_at || 0) - new Date(a.published_at || 0);
        });
      }
      console.log("[TMDB] \u041D\u0430\u0439\u0434\u0435\u043D\u043E ".concat(filteredVideos.length, " \u0432\u0438\u0434\u0435\u043E \u0434\u043B\u044F ").concat(method, "/").concat(params.id));
      oncomplite({
        results: filteredVideos
      });
    };

    // Запрос на языке пользователя
    get$9("".concat(method, "/").concat(params.id, "/videos"), {
      langs: targetLang
    }, function (json) {
      status.append('targetLang', json);
    }, status.error.bind(status));

    // Если язык не английский, делаем дополнительный запрос на английском
    if (targetLang !== 'en') {
      get$9("".concat(method, "/").concat(params.id, "/videos"), {
        langs: 'en'
      }, function (json) {
        status.append('english', json);
      }, status.error.bind(status));
    }
  }
  var TMDB = {
    main: main$2,
    menu: menu$1,
    img: img,
    full: full$1,
    list: list$2,
    category: category$1,
    search: search$3,
    clear: clear$7,
    company: company$1,
    person: person$1,
    seasons: seasons$1,
    find: find$1,
    external_ids: external_ids,
    get: get$9,
    menuCategory: menuCategory$1,
    discovery: discovery$1,
    parsePG: parsePG,
    parseCountries: parseCountries,
    genres: genres$1,
    external_imdb_id: external_imdb_id,
    getGenresNameFromIds: getGenresNameFromIds,
    videos: videos,
    reactionsGet: reactionsGet,
    reactionsAdd: reactionsAdd,
    movieLogos: movieLogos,
    trailers: trailers,
    discussGet: discussGet
  };

  var data$1 = [];
  var object$1 = false;
  var limit$2 = 300;
  var started = Date.now();

  /**
   * Запуск
   */
  function init$J() {
    data$1 = Storage.cache('timetable', limit$2, []);
    setInterval(extract$1, 1000 * 60 * (2));
    setInterval(favorites, 1000 * 60 * 10);
    Favorite.listener.follow('add,added', function (e) {
      if (e.card.number_of_seasons && e.where !== 'history') update$8(e.card);
    });
    Favorite.listener.follow('remove', function (e) {
      if (e.card.number_of_seasons && e.method == 'id') {
        var find = data$1.find(function (a) {
          return a.id == e.card.id;
        });
        if (find) {
          Arrays.remove(data$1, find);
          Storage.set('timetable', data$1);
          Storage.remove('timetable', find.id);
        }
      }
    });
    Prisma.Listener.follow('worker_storage', function (e) {
      if (e.type == 'insert' && e.name == 'timetable') {
        data$1 = Storage.get('timetable', '[]');
      }
    });
  }

  /**
   * Добавить карточки к парсингу
   * @param {[{id:integer,number_of_seasons:integer}]} elems - карточки
   */
  function add$8(elems) {
    if (started + 1000 * 60 * 2 > Date.now()) return;
    var filtred = elems.filter(function (elem) {
      return elem.number_of_seasons && typeof elem.id == 'number' && (elem.source == 'tmdb' || elem.source == 'cub');
    });
    console.log('Timetable', 'add:', elems.length, 'filtred:', filtred.length);
    filtred.forEach(function (elem) {
      var find = data$1.find(function (a) {
        return a.id == elem.id;
      });
      if (!find) {
        data$1.push({
          id: elem.id,
          season: elem.number_of_seasons,
          episodes: []
        });
      }
    });
    Storage.set('timetable', data$1);
  }

  /**
   * Добавить из закладок
   */
  function favorites() {
    var category = ['like', 'wath', 'book', 'look', 'viewed', 'scheduled', 'continued', 'thrown'];
    category.forEach(function (a) {
      add$8(Favorite.get({
        type: a
      }));
    });
  }
  function filter(episodes) {
    var filtred = [];
    var fileds = ['air_date', 'season_number', 'episode_number', 'name', 'still_path'];
    episodes.forEach(function (episode) {
      var item = {};
      fileds.forEach(function (field) {
        if (typeof episode[field] !== 'undefined') item[field] = episode[field];
      });
      filtred.push(item);
    });
    return filtred;
  }

  /**
   * Парсим карточку
   */
  function parse$2(to_database) {
    var check = Favorite.check(object$1);
    var any = Favorite.checkAnyNotHistory(check);
    console.log('Timetable', 'parse:', object$1.id, 'any:', any, 'season:', object$1.season);
    if (any || to_database) {
      TMDB.get('tv/' + object$1.id + '/season/' + object$1.season, {}, function (ep) {
        if (!ep.episodes) return save$3();
        object$1.episodes = filter(ep.episodes);
        Cache.getData('timetable', object$1.id).then(function (obj) {
          if (obj) obj.episodes = object$1.episodes;else obj = Arrays.clone(object$1);
          Cache.rewriteData('timetable', object$1.id, obj).then(function () {})["catch"](function () {});
        })["catch"](function (e) {});
        save$3();
      }, save$3);
    } else {
      Arrays.remove(data$1, object$1);
      Storage.remove('timetable', object$1.id);
      save$3();
    }
  }

  /**
   * Получить карточку для парсинга
   */
  function extract$1() {
    var ids = data$1.filter(function (e) {
      return !e.scaned && (e.scaned_time || 0) + 60 * 60 * 12 * 1000 < Date.now();
    });
    console.log('Timetable', 'extract:', ids.length, 'total:', data$1.length);
    if (ids.length) {
      object$1 = ids[0];
      parse$2();
    } else {
      data$1.forEach(function (a) {
        return a.scaned = 0;
      });
    }
    Storage.set('timetable', data$1);
  }

  /**
   * Сохранить состояние
   */
  function save$3() {
    if (object$1) {
      object$1.scaned = 1;
      object$1.scaned_time = Date.now();
      Storage.set('timetable', data$1);
    }
  }

  /**
   * Получить эпизоды для карточки если есть
   * @param {{id:integer}} elem - карточка
   * @returns {array}
   */
  function get$8(elem, callback) {
    var fid = data$1.filter(function (e) {
      return e.id == elem.id;
    });
    var res = (fid.length ? fid[0] : {}).episodes || [];
    if (typeof callback == 'function') {
      if (res.length) return callback(res);
      Cache.getData('timetable', elem.id).then(function (obj) {
        callback(obj ? obj.episodes || [] : []);
      })["catch"](function (e) {
        callback(res);
      });
    } else {
      return res;
    }
  }

  /**
   * Добавить карточку в парсинг самостоятельно
   * @param {{id:integer,number_of_seasons:integer}} elem - карточка
   */
  function update$8(elem) {
    if (elem.number_of_seasons && typeof elem.id == 'number' && (elem.source == 'tmdb' || elem.source == 'cub')) {
      var check = Favorite.check(elem);
      var any = Favorite.checkAnyNotHistory(check);
      var id = data$1.filter(function (a) {
        return a.id == elem.id;
      });
      var item = {
        id: elem.id,
        season: Utils$2.countSeasons(elem),
        episodes: []
      };
      TMDB.clear();
      if (any) {
        if (!id.length) {
          console.log('Timetable', 'push:', elem.id);
          data$1.push(item);
          Storage.set('timetable', data$1);
          object$1 = item;
        } else {
          object$1 = id[0];
          object$1.season = Utils$2.countSeasons(elem);
        }
        parse$2();
      } else {
        object$1 = item;
        parse$2(true);
      }
    }
  }

  /**
   * Получить все данные
   * @returns {[{id:integer,season:integer,episodes:[]}]}
   */
  function all$2() {
    return data$1;
  }
  function lately() {
    var fav = Favorite.full().card;
    if (Account.working()) fav = Account.all();
    fav = fav.filter(function (f) {
      return f.number_of_seasons;
    });
    var now_date = new Date();
    now_date.setHours(0, 0, 0);
    var now_time = now_date.getTime();
    var cards = [];
    data$1.filter(function (d) {
      return fav.find(function (c) {
        return c.id == d.id;
      });
    }).forEach(function (season) {
      var episodes = season.episodes.filter(function (ep) {
        return Prisma.Utils.parseToDate(ep.air_date).getTime() >= now_time;
      });
      if (episodes.length) {
        cards.push({
          card: Arrays.clone(fav.find(function (c) {
            return c.id == season.id;
          })),
          episode: episodes[0],
          time: Prisma.Utils.parseToDate(episodes[0].air_date).getTime(),
          season: season
        });
      }
    });
    cards = cards.sort(function (a, b) {
      if (a.time > b.time) return 1;else if (a.time < b.time) return -1;else return 0;
    });
    return cards;
  }
  var TimeTable = {
    init: init$J,
    get: get$8,
    add: add$8,
    all: all$2,
    update: update$8,
    lately: lately
  };

  var callback_cancel, controller_enabled, loader$1, timer$4;
  function start$6(on_cancel, text) {
    callback_cancel = on_cancel;
    controller_enabled = Controller.enabled().name;
    loader$1 = $("<div class=\"loading-layer\">\n        <div class=\"loading-layer__box\">\n            <div class=\"loading-layer__text\">".concat(Lang.translate('loading'), "</div>\n            <div class=\"loading-layer__ico\"></div>\n        </div>\n    </div>"));
    if (text) loader$1.find('.loading-layer__text').text(text);
    loader$1.on('click', function (e) {
      if (DeviceInput.canClick(e.originalEvent)) cancel();
    });
    clearTimeout(timer$4);
    timer$4 = setTimeout(function () {
      $('body').append(loader$1);
    }, 500);
    toggle$8();
  }
  function toggle$8() {
    Controller.add('loading', {
      invisible: true,
      toggle: function toggle() {
        Controller.clear();
      },
      back: cancel,
      up: cancel,
      down: cancel,
      left: cancel,
      right: cancel
    });
    Controller.toggle('loading');
  }
  function cancel() {
    if (callback_cancel) callback_cancel();
  }
  function stop() {
    if (loader$1) loader$1.remove();
    clearTimeout(timer$4);
    if (controller_enabled) Controller.toggle(controller_enabled);
  }
  function setText(text) {
    if (loader$1) loader$1.find('.loading-layer__text').text(text);
  }
  var Loading = {
    start: start$6,
    stop: stop,
    setText: setText
  };

function _0x5ef5(n,e){var r=_0x2b6d();return(_0x5ef5=function(n,e){return r[n-=470]})(n,e)}function _0x2b6d(){var n=["tmdb=","Найдено ви","ный резуль","YEAai","bsOFP","tive","Обнаружен ","ZYmsZ","pAEBL","yTRtX","c для пото","Запрос ","ASyKT","hide","шибки","VgzcO","3051198RJvlEZ","ан ответ J","QQatt","SNBdF"," кнопок зв","forEach","WYeQR","s?params=","kp_trailer","yapJS","polSW","lWXPD","GSXrd","onended","trailer_mu","allow"," трейлеров","doAfI","ска","ERROR","Ошибка ини",".m3u8","ен из-за о","muMbO","BVfWD","find","FbzBu","iler_","JEbhu","streamUrl","OSCUI"," trailer a"," найден в ","GriEd","1687774tSjDWY","error","readyState","PbsEQ","и с виджет","zNFiI","SON в объе","Tube"," альтернат","iaError"," прямую ус","ция HLS.js","xqBFe","BKuwy","KRFAZ","ейлера не ","Нефатальна"," запросами","рейлера че","yZeYY","Звук ","url","lRLhW","FhcDq","MmghI","йлер в вид","осу: ","NhYtQ","tgRwO","bTpJw","RChQL","оиска: ","x-webkit-a","strm.yande","ewMGJ","now","sent","Вторая поп","ого источн","gyPBP","JxskZ",".full-star","6744iXfjnr","trailer","рузки HLS.","results","Wkjcr","erted","loadedmeta","qxDGg","93GZCrbU","jTLqS","IsNSv","trailer_vo","я ошибка H","ошибка HLS","nFpjh","bfxpE","TcFgC","kSlZk","3|6|4|0|1|","UwRYh","ка:","onloadedda","attr","HxeFl","cEvhR","GQdHP","ftIcP","OMITW","original_n","stop","https://ap","JBLQH","inOjI","return","IVEAj","MAPSv","Попытка во","rFoMB","QPQQf",".button--s","SzGQk","mvoMb","i.alloha.t","HvNij","aObCL","лучить тре","volume","JprUr","bJHRE","ame","CGhia","sjKiv","jKLOu","KQYlP","HHyzK","VDtHA","SZpBq","https://go","4941a9a3ca","ответе вид","inmrm","делен"," ответа ви","VcEMx","ту Кинопои","CyUtd","ания запро","hjReg"," кэширован","HLS.js","kground","поиска:","GGBkf","message","nd clearin","clear","x.ru","ейлера"," запустить","fdYtQ","Используем","<video>","fQmua","append"," - ","HLS не под","startsWith","ра не опре","abcqd","DuumU","34502eJRpKt","5|1","Превышено ","ended","sjdMG"," даже с от","йлер на Ки","%2C%200%2C","TLScl","IVDez","PjfdI","ZCKOz","show","жета Киноп","VsBlN","Vzqkj","startLoad","OHCqv","psDOC","ика","removeClas","vQokW","0%2C%20rnd","qDEbG","iRfcm","wjhTl","tEwRU","FhKPQ","addEventLi","Alternativ","аем HLS дл","api_domain","Ошибка пар","add","агрузку тр","названию: ","просу: ","Qkdsi","cjfck","14|2","45npyyFf"," источнику","rIvxp","Trailer de","pointer-ev"," поиске тр"," контейнер","alternativ","get","dim","hover:ente","йлер с You"," трейлера","idiqw","ка при заг","load","upn_domain","ent","parse","jAlma","AtGGh","opacity 0.","end","_id:","tqvvC","ами:","poisk.ru/d","UPPjm","AUROg","alt_traile","Элемент тр","Tiwje","ojcXB","ROR","itle","GbRqY"," getAltern","n/x-mpegUR","abrupt"," трейлера:","youtube.co","UFhia","AJAX запро","sAqFs","jjRCV","first_air_","dhPbD","abort","id_kp","йти трейле","http","PCGkD","value","2|5","Ошибка авт","classList","MEDIA_ERRO","hoEzi","LJwEM","oJVKs","рузке трей","wwAke","wNTOq","vh-kp-conv","NmRAQ","ия сети...","imeout","zmuRY","лера по за","Найден тре","ьтернативн","ра отсутст","tCXmp","mgxkK",", requestI","inuYb","[Trailer] ","zGLzx"," видео:","./vender/h","onpause","string","qJZXC","eiCVG","EEOHC","Destroying","w__trailer","ncelled","e.mpegurl","ейлера по ","Трейлеры н","mEbIv","жете Киноп","Автостоп т","canPlayTyp","урсов","9478OzTgPg","Tpron","gfsVn","pause","Gddlz","са к видже","LutNC"," трейлера ","100%","RVQFI","concat","WdeIh","jXjVG","ailers","script","sBFxx","LKUXI","TTTcp","map","YADWM","JLtIu","Пробуем по","UPXQc","keys","join","querySelec","NFKAg","title","iWzzV","yROkF","eKwqO","11372qiWdba","GKElG","aded","vshSH","xFccO","ElRpw","cOUCx","vEBgJ","HLS (m3u8)","mark","catch","removeAttr","BsDXu","vuvKm","QPqLm","date","BAgaA","zSxvt","DVUTd","finish","length","JGJYQ","ивного тре","BqCYi","Hbwda","%2C","HjfKW","deo","VObbc","део: "," нативную ","ibute","ZqkUo","g resource","cprsi","pmvGz","createElem","lRLDs","FTyRY","lBexP","Поиск трей","yhIHV","XqiJC","VQeeC","trailerIns","ykIuJ","KGXWu","isSupporte","MzklS","ведения m3","dXiNK","р по поиск","loaded","звуком:","details","TvJMC","онтейнера ","NZdCY","loadSource","ound"," HLS:","silent","addClass","са к альте","rIPPi","YJmza","qZndh","20iUPAAe","mnavc","pUvFe","JPGOV","Трейлер не","NETWORK_ER","uUCFe","Vuldb","нопоиске","4|1|2|3|0","bIBUC","включен","yhwaI","release_da","VkRhN","Error","Отменяем з","оиска","KhBQH","рнативными","осле Киноп","FghzJ","едения:","kYUSU","рнативного","urlVQ","я браузеро","ITSTe","Qnfop"," отменен в","OKxbm","vod-conten","VjDOW","uCzps","2|9|7|4|3","currentTim","WnnAq","fatal","Ошибка заг","play","рез 30 сек","object","ARSED","сстановлен","v/?token=0","setInitial","lutjd","ests","RuPsC","cache","oTSfN","%2C0%2C%20","tor","FnJkE","ейлера для","lXObh","BEbTy"," поток"," обработке","awscT","tance","getMovieTr","data","attachMedi"," отменен п","FCVPV","TuTsS","PoGqh",".card__tra","ZTrAn","log","guTKi","e source t","original_t","&_=","xzNIQ","RolUm","ытка с вид","ePzge","bKpWh","PWReK","AfzUa","dqMHm","CKjnX","lPxhN","WSeUL","yHcaj","QdGTt","NotAllowed","has","lkEXU","xyolm","унд для эк","ZoACt","dnADi","jszFR","prev","destroy","wCupn","torAll","vePLt","Request ca","api/video/","wXTZs","State"," отмене AJ","трейлера:","none","yfPGs","raYBD","CZAPW","GrBwq","ativeTrail","VMjFO","4|3|2|6|0|","aQYsX","stopLoad","CvPoR","type","RaQzF",".sound--of","protocol","Tdicg","iDEIP"," очистке к","iler, .ful","рузки виде","jqtoc","ия медиа..","3|0|4|1|2","LS: ","toggleSoun","<source>","держиваетс","jzmsc","DhWBm","ные данные"," о медиа","PFSCI","тат поиска","oncanplay","JXOHf","trailer-vi","kp=","3250112yzCiRI","ZSTCF","йлера:","YIGJF","OutAj","onerror","MANIFEST_P","YnWLe","выключен","HLS","js:","gQHAq","AX запроса","LzdUh","27347bbc1&","URL трейле","RUPej","Hls","mbMYz","fotUP","Преобразов","pwlRw","INrUB","tczSk","время ожид","irplay","dgets.kino","%3B","PjzkX","appendChil","CNrJX","SjvDj","rLiah"," остановке","jPJFT","vetJg","ykuvH","с Кинопоис","random","PvOIl"," удалении ","visible lo","AzaxY","recoverMed","dHCUN","neXTp","yEPxy","DzIVs","search_tra","undefined","вует","pgoDu","erSource","Общая ошиб","OMtWI","ents","FoiXs"," получении","ekfoO","dYLnO","uWHip","qmgpK","Gotjk","key","AlTIt","ZSTBy","applicatio","trailer-ac","rqLzh","TRCSc","DheXX","Tttoe","опоиска: ","QTjsS","6|5|0|8|1|","nEZYX","cuBBx","cVuGK","еред альте","substring","huNiO","ScTmx","TuiZt","GTtPn","-out","lume","l-start-ne","lzcdw","SPoMx","YNTfZ","zTXLF","gvqrV","5s ease-in",".sound--on","HbbdR","e Kinopois","Events","LsoFg","апрос ","XurvH","vCfXu","oUKCG","iscovery/a","QZang",".pris.cam/","match","DPpUO","Устанавлив","dOoii","vSOTM","hlsInstanc","1|4|0|8|3|","Timeout","k widgets ","xXydq","eroOV"," для KP тр","Xodqp","тановку sr","LjFJc","sCVsn","поддержку ","FKzUf","wrap","найден","ErrorTypes","baJBO","Начинаем з","caEiC","VSZxj","rDuwU","mrSOq","remove","3ac16e2b43","10|7|9|13|","Xjnsk","vWBwa","hzxnc","njVRY","рнативному","Загружаем ","MpsYq","VtLil","sChtX","delete","ivevT","овоспроизв","xPpNB","t-new__bac","oyYrk","uUVxh","cancelRequ","HqTiH","filmId","HWObA","Пробуем на","DZrBH","LKRAt","hls","ука:","stener","eoHTx","next","FqJqs","empty","JKvLm","OfbQG","неизвестны"," был отмен","timeout","LrmMX","muted","pjInN","src","includes","jsDlW","css","Инициализа","qbLic","zTopb","yWaXs"," kinopoisk","ономии рес","5|1|12|6|1","d: "," для альте","еализована","HPKPi","лера:","джета Кино","toJeJ","ODRVb","Ошибка при","AVwwU","hUlPU","UaBlj","с отменен","TTetg","KdlhE","video/mp4","YJjEZ","pvpph","WOnJr","zPniO","Bdzjd"," - функция","ehmfn","синга JSON","onload","apply","ZsTYX","GGWkg","ента:"," пока не р","8ALGqxl","youtu.be","ключенным ","vMuQI","https://wi","%20rnd-","ryPkE","hamOy","TtEvb","Нет данных","ls/hls.js","Ошибка вто","жетами Кин","head","ted","й язык","nYPYa","done","n/vnd.appl","SgCDu","овому запр","oPVWD","mCOeC","йлер из ал","ccessfully","stroyed su","Не удалось","then","циализации","MJxrr","kinopoisk_","CDgMg","split","LZeKP","oxGuq","AkjaV","hiLlP","asKOg","TBEFT","LGUcl","BHbgB","zYzcD","field","vDKpy","rQqpz","QqUcv","name","QDFlG","wsPME","видео элем","iBzKi","fXTYW","REbnp","jtvYB","я воспроиз"," трейлер","AjMex","pdGMG","kp.","кового вид","Hbtee","iso_639_1"," получить ","Фатальная ","sPUfo","loadeddata","pi/trailer","е найдены","race","tmdb_lang","iRriL","рой попытк","eQdoO"];return(_0x2b6d=function(){return n})()}function init$I(){var d,v,e,p=_0x5ef5,h={inmrm:function(n,e){return n+e},TcFgC:function(n,e){return n+e},SNBdF:p(1141),RVQFI:function(n,e){return n!==e},TTetg:p(607)+p(1092)+p(862),dHCUN:p(1281),PvOIl:p(607)+p(996)+p(525)+p(779)+" ",jXjVG:p(605)+p(1053),CNrJX:p(607)+p(1167),UwRYh:p(1037)+"ен",zYzcD:function(n,e,r){return n(e,r)},SjvDj:p(789)+p(745)+p(742),mCOeC:p(607)+p(600)+p(497)+p(733),tqvvC:p(607)+p(648)+p(1293)+p(542)+p(1213),wNTOq:p(1152),jtvYB:function(n,e){return e<n},SgCDu:p(607)+p(1157)+p(687),lRLDs:p(485),uCzps:p(1036)+p(1098),BqCYi:p(1138),AjMex:p(607)+p(1024)+p(580)+p(709)+p(1103)+p(1232),AUROg:p(917)+p(1199),FoiXs:function(n,e){return n(e)},ewMGJ:p(607)+p(481)+p(1316)+p(1158)+p(864)+p(543),DheXX:p(668),gyPBP:p(607)+p(1061)+p(536)+p(620)+p(526),pjInN:p(607)+p(1061)+p(926)+p(570),HvNij:p(1037)+p(1194)+p(1170),guTKi:p(607)+p(922)+p(545)+p(591)+p(1057),vEBgJ:p(1013),VgzcO:p(607)+p(621)+p(1150),sCVsn:p(553),xzNIQ:function(n){return n()},abcqd:function(n,e){return n(e)},CZAPW:p(1278)+p(1290)+p(769)+p(1306)+p(1002)+p(883)+p(1156),VObbc:p(607)+p(1061)+p(926)+p(634)+p(906)+p(1268),HxeFl:function(n,e,r){return n(e,r)},CGhia:function(n){return n()},OutAj:function(n){return n()},Wkjcr:function(n){return n()},LZeKP:p(826)+p(618),KhBQH:p(981),GGBkf:function(n,e,r){return n(e,r)},cjfck:p(607)+p(1109)+p(1145)+p(1113)+"id",GTtPn:p(607)+p(1061)+p(926)+p(1050)+p(554),doAfI:p(1180)+"_",GQdHP:p(607)+p(481)+p(1316)+p(861)+p(985)+p(478),yhwaI:p(1087)+p(895)+p(557)+p(971)+p(1149)+p(1179),zTopb:p(776)+p(513)+"-",KRFAZ:p(799),pgoDu:function(n,e,r){return n(e,r)},HHyzK:function(n,e){return n(e)},qbLic:function(n){return n()},ftIcP:p(1266)+p(584),jAlma:function(n,e){return n===e},NmRAQ:p(612),JKvLm:p(607)+p(889)+p(1173)+p(1212)+"кт",oyYrk:p(607)+p(523)+p(1076)+":",FTyRY:function(n,e){return n==e},OMtWI:p(607)+p(600)+p(1231)+p(623)+p(1237),LJwEM:p(1193),QqUcv:p(607)+p(1162)+p(666)+p(782),xXydq:p(1239)+p(477),oTSfN:p(594)+p(1253),pwlRw:p(756)+"t",TRCSc:p(607)+p(729)+p(1204)+p(1307)+p(504)+p(742),QPqLm:function(n,e){return n===e},hiLlP:p(581),LGUcl:p(607)+p(1061)+p(783)+p(1310)+p(1058)+p(472),QDFlG:p(683),psDOC:p(498)+p(1088),UPXQc:function(n,e){return n+e},OHCqv:p(607)+p(493)+p(893)+p(1314)+p(632)+p(1312)+p(1190),vePLt:function(n,e){return n(e)},njVRY:p(520)+p(964)+p(982)+p(1038),KQYlP:p(1278)+p(1290)+p(769)+p(1306)+p(1002)+p(883)+p(868),vWBwa:p(607)+p(493)+p(893)+p(1314)+p(721)+p(1008)+p(532),nYPYa:function(n,e){return n(e)},AlTIt:p(520)+p(797)+p(597),PWReK:p(754)+p(567)+p(837)+p(921),xyolm:p(607)+p(648)+p(1293)+p(1106)+p(601)+p(1244)+p(510),XqiJC:p(560)+"r_",cuBBx:p(607)+p(481)+p(1316)+p(861)+p(1054)+p(749)+p(543),cprsi:p(789)+p(947)+p(744)+p(1223),caEiC:p(896),Vzqkj:function(n){return n()},VkRhN:p(607)+p(1243)+p(802)+p(1095)+p(941),fQmua:function(n,e,r){return n(e,r)},CKjnX:p(607)+p(1094)+p(1154)+p(1210)+p(556),kYUSU:p(571)+"m",bJHRE:p(1084),rDuwU:function(n,e){return n(e)},aObCL:p(607)+p(1061)+p(926)+p(1214)+p(680)+p(871),wjhTl:function(n,e){return n(e)},Xjnsk:function(n,e){return n<e},Qkdsi:p(607)+p(1061)+p(926)+p(1188)+":",yHcaj:function(n){return n()},RaQzF:function(n){return n()},Gotjk:p(839)+p(492),lWXPD:p(1287)+p(717),GKElG:p(607)+p(1226),sPUfo:p(877),LzdUh:p(736),iWzzV:function(n,e){return n<e},DuumU:p(1040),oxGuq:p(845)+"f",cEvhR:p(962),muMbO:function(n,e){return n&&e},fdYtQ:function(n,e){return n(e)},ykIuJ:function(n,e){return n(e)},gvqrV:function(n,e){return n(e)},LKUXI:function(n,e){return n(e)},qxDGg:p(763)+p(851)+"о:",SPoMx:p(607)+p(763)+p(1250)+p(879),rIPPi:p(607)+p(1109)+p(479)+p(496)+p(1085)+p(711),ykuvH:p(607)+p(585)+p(1015)+p(747),AfzUa:p(813)+p(740),TBEFT:p(607)+p(1046)+p(1217),ITSTe:function(n,e){return n*e},ZCKOz:p(935)+p(1101)+p(619),Tttoe:p(607)+p(481)+p(688)+p(990)+p(878),GSXrd:p(1254)+p(787),vetJg:p(607)+p(486)+p(858)+p(751)+"м",RolUm:p(607)+p(624)+p(1224)+p(765)+p(817)+p(1051)+p(626),Tdicg:p(734),huNiO:p(641),tczSk:p(607)+p(1146)+p(1261)+": ",hjReg:p(607)+p(1284)+p(768)+p(596),cVuGK:p(607)+p(1284)+p(768)+p(853)+".",wsPME:p(607)+p(1222)+p(1260)+p(855),WYeQR:p(710),awscT:p(884)+p(602)+p(919),Hbtee:p(1186)+p(1097),yROkF:function(n,e){return n===e},tCXmp:p(766),REbnp:function(n,e){return n(e)},JEbhu:p(884)+p(488)+p(1309),MpsYq:p(793)+p(850)+p(955)+p(617),bsOFP:function(n,e){return n!==e},urlVQ:function(n,e){return n!==e},lBexP:p(561)+p(1221)+p(993),zTXLF:p(1247)+p(1017)+p(471),mnavc:p(910)+p(660),HqTiH:p(540),IsNSv:p(552)+p(961)+p(953),WdeIh:p(867)+p(685),RuPsC:p(635),lRLhW:p(482),RChQL:p(607)+p(976)+p(521)+p(1137)+p(707)+"u8",iDEIP:p(1238)+p(894),vshSH:p(1187),oPVWD:function(n,e){return n&&e},qmgpK:p(607)+p(481)+p(1216)+p(987)+p(1166)+p(1142)+"ео",lkEXU:p(1042),wXTZs:function(n,e,r){return n(e,r)},vMuQI:p(857),QZang:p(935)+p(568)+"L",OMITW:p(1068),aQYsX:p(1207),GriEd:p(918),mbMYz:p(607)+p(1009)+p(470),LutNC:p(610)+p(1093),UPPjm:function(n,e,r){return n(e,r)},QPQQf:p(607)+p(1192)+p(1111)+p(718),TvJMC:p(936)+p(1161),KGXWu:p(1148),rQqpz:p(494),AtGGh:function(n,e,r){return n(e,r)},eoHTx:p(535)+p(924),rqLzh:p(832),ASyKT:p(541)+"r",hoEzi:function(n,e,r){return n(e,r)},zGLzx:function(n,e){return n!==e},PjfdI:p(607)+p(573)+p(1065),NhYtQ:p(607)+p(1061)+p(830)+p(881)+":",BHbgB:p(607)+p(741)+p(967),AkjaV:p(1052)+p(980)+p(1003)+p(530),jsDlW:p(607)+p(1061)+p(783)+p(537)+"а:",FqJqs:p(607)+p(534)+p(1108)+p(1107),asKOg:p(607)+p(1061)+p(849)+p(714)+p(831),jPJFT:p(607)+p(616)+p(1203)+p(475)+p(691)+"s",VcEMx:p(943)+p(759),inOjI:p(607)+p(1061)+p(902)+p(609),FghzJ:p(854),Vuldb:p(1169),yapJS:function(n,e){return n&&e},yZeYY:function(n,e){return n(e)},ivevT:p(607)+p(1061)+p(783)+p(1176)+p(1028),OSCUI:p(607)+p(1061)+p(909)+p(1132)+p(1081),HWObA:function(n,e){return n(e)},QQatt:p(607)+p(698)+p(599)+p(527),HPKPi:p(1074)+p(1082)+p(1055),bfxpE:p(1259)+p(954),mvoMb:p(1305)+p(973)+p(827)},m=this,b=h[p(1289)],T=null,P=null,w=null,k=null,y=null,f=Storage[p(539)](h[p(1143)],!0),j=new create$e,g=null,R=new Set,n=new Set;function C(){var n=p;return h[n(1308)](h[n(1308)](h[n(1264)](Utils$2[n(846)](),h[n(1175)]),object$2[n(522)]),"/")}this[p(539)]=(v={wwAke:function(n,e){return h[_0x5ef5(636)](n,e)},SzGQk:h[(d=p)(1066)],BEbTy:h[d(913)],dXiNK:h[d(908)],gfsVn:h[d(639)],hUlPU:h[d(899)],vDKpy:h[d(1267)],TLScl:function(n,e,r){return h[d(1124)](n,e,r)},RUPej:h[d(900)],NFKAg:h[d(1105)],tgRwO:h[d(555)],GrBwq:h[d(593)],LsoFg:function(n,e){return h[d(1136)](n,e)},qJZXC:h[d(1102)],GGWkg:h[d(695)],hamOy:h[d(758)],TuTsS:h[d(681)],vuvKm:h[d(1139)],Bdzjd:h[d(559)],kSlZk:function(n,e){return h[d(925)](n,e)},YADWM:h[d(1240)],cOUCx:h[d(939)],MAPSv:h[d(1245)],toJeJ:h[d(1041)],MzklS:h[d(1291)],qDEbG:h[d(796)],HbbdR:h[d(665)],TuiZt:h[d(1171)],WSeUL:h[d(989)],YJjEZ:function(n){return h[d(800)](n)}},e=h[d(925)](_asyncToGenerator,h[d(800)](_regeneratorRuntime)[d(667)](function n(r){var t,o,u,c,i,a,s,l=d,f={tEwRU:function(n,e){return v[_0x5ef5(592)](n,e)},PFSCI:v[l(1288)],bTpJw:v[l(781)],qZndh:v[l(708)],ehmfn:v[l(629)],pUvFe:v[l(1063)],VMjFO:v[l(1126)],pmvGz:function(n,e,r){return v[l(499)](n,e,r)},MJxrr:v[l(885)],OfbQG:v[l(653)],pAEBL:v[l(1234)],PbsEQ:v[l(836)],zNFiI:function(n,e){return v[l(966)](n,e)},yfPGs:v[l(613)],pvpph:v[l(1080)],JPGOV:v[l(1090)],FCVPV:v[l(791)],mEbIv:v[l(671)],iRriL:v[l(1073)],TTTcp:function(n,e){return v[l(1265)](n,e)},eQdoO:v[l(646)],DhWBm:v[l(664)],XurvH:v[l(1283)],Tiwje:v[l(1059)],FhKPQ:v[l(706)],BsDXu:v[l(514)],FhcDq:v[l(963)],bIBUC:v[l(951)],dOoii:v[l(810)]};return v[l(1069)](_regeneratorRuntime)[l(992)](function(n){for(var e=l;;)switch(n[e(821)]=n[e(1031)]){case 0:if(f[e(517)](r,null)&&f[e(517)](r,void 0)&&r.id){n[e(1031)]=3;break}return console[e(795)](f[e(863)]),n[e(569)](f[e(1235)],null);case 3:if(t=""[e(637)](r.id,"_")[e(637)](Date[e(1241)]()),g=t,console[e(795)](f[e(724)][e(637)](r.id,f[e(1075)])[e(637)](t)),n[e(821)]=6,R[e(814)](t))return console[e(795)](f[e(727)][e(637)](t,f[e(838)])),n[e(569)](f[e(1235)],null);n[e(1031)]=10;break;case 10:return n[e(1031)]=12,f[e(693)](z,r,t);case 12:if(o=n[e(1242)],R[e(814)](t))return console[e(795)](f[e(727)][e(637)](t,f[e(1112)])),n[e(569)](f[e(1235)],null);n[e(1031)]=16;break;case 16:if(o)return console[e(795)](f[e(1035)]),n[e(569)](f[e(1235)],o);n[e(1031)]=19;break;case 19:return console[e(795)](f[e(1164)]),u=Storage[e(1125)](f[e(1209)]),n[e(821)]=21,n[e(1031)]=24,f[e(693)](q,r,u);case 24:if((u=n[e(1242)])&&f[e(1211)](u[e(678)],0))return c=u[0],console[e(795)](f[e(833)][e(637)](c[e(843)],f[e(1070)])[e(637)](c[e(1129)]," (")[e(637)](c[e(1144)]||f[e(728)],")")),n[e(569)](f[e(1235)],""[e(637)](b)[e(637)](c[e(932)]));n[e(1031)]=29;break;case 29:if(r[e(1129)]||r[e(1276)+e(1297)]||r[e(654)]||r[e(798)+e(565)]){if(c=r[e(1129)]||r[e(1276)+e(1297)]||r[e(654)]||r[e(798)+e(565)],i=r[e(576)+e(673)]||r[e(738)+"te"],i=i?""[e(637)](c," ")[e(637)](i[e(948)](0,4),f[e(790)]):""[e(637)](c,f[e(790)]),console[e(795)](f[e(622)][e(637)](i)),a=f[e(1153)][e(637)](f[e(644)](encodeURIComponent,i)),s=Storage[e(774)](a))return console[e(795)](f[e(1155)]),n[e(569)](f[e(1235)],s);n[e(1031)]=39}else n[e(1031)]=51;break;case 39:return n[e(821)]=39,n[e(1031)]=42,f[e(644)](L,i);case 42:if(s=n[e(1242)])return Storage[e(774)](a,s,86400),n[e(569)](f[e(1235)],s);n[e(1031)]=46;break;case 46:n[e(1031)]=51;break;case 48:n[e(821)]=48,n.t0=n[f[e(860)]](39),console[e(795)](f[e(968)][e(637)](n.t0[e(474)]||n.t0));case 51:n[e(1031)]=56;break;case 53:n[e(821)]=53,n.t1=n[f[e(860)]](21),console[e(795)](f[e(562)],n.t1[e(474)]||n.t1);case 56:n[e(1031)]=64;break;case 58:if(n[e(821)]=58,n.t2=n[f[e(860)]](6),R[e(814)](t))return console[e(795)](f[e(727)][e(637)](t,f[e(518)])),n[e(569)](f[e(1235)],null);n[e(1031)]=63;break;case 63:console[e(795)](f[e(670)],n.t2[e(474)]||n.t2);case 64:return n[e(821)]=64,R[f[e(1229)]](t),n[e(677)](64);case 67:return console[e(795)](f[e(735)]),n[e(569)](f[e(1235)],null);case 69:case f[e(977)]:return n[e(1277)]()}},n,null,[[6,58,64,67],[21,53],[39,48]])})),function(n){return e[d(1078)](this,arguments)});O={vQokW:function(n,e){return h[_0x5ef5(489)](n,e)},ePzge:h[(u=p)(1116)],dnADi:h[u(743)],DVUTd:function(n,e,r){return h[u(473)](n,e,r)},lutjd:h[u(529)],zmuRY:h[u(913)],UFhia:h[u(939)],SZpBq:h[u(952)],uUVxh:h[u(1189)],FKzUf:h[u(1273)],HjfKW:function(n,e,r){return h[u(1271)](n,e,r)},VjDOW:function(n){return h[u(800)](n)},YnWLe:h[u(737)],VDtHA:h[u(1048)],IVEAj:h[u(1220)],jqtoc:function(n,e,r){return h[u(920)](n,e,r)},YIGJF:h[u(686)],rLiah:function(n,e,r){return h[u(1124)](n,e,r)},iRfcm:h[u(989)]},o=h[u(1302)](_asyncToGenerator,h[u(1047)](_regeneratorRuntime)[u(667)](function n(a,s){var e,r,t,c,o,l=u,f={LKRAt:function(n,e){return h[_0x5ef5(489)](n,e)},CDgMg:h[l(835)],JprUr:h[l(686)],FbzBu:function(n,e,r){return h[l(1271)](n,e,r)},nFpjh:h[l(913)],zPniO:h[l(989)],uWHip:function(n){return h[l(1298)](n)},jjRCV:function(n){return h[l(873)](n)}};return h[l(1252)](_regeneratorRuntime)[l(992)](function(n){for(var i=l,u={JGJYQ:function(n,e){return O[_0x5ef5(512)](n,e)},AzaxY:O[i(803)],OKxbm:O[i(819)],ZSTCF:function(n,e,r){return O[i(676)](n,e,r)}};;)switch(n[i(821)]=n[i(1031)]){case 0:if(a[i(1113)+"id"]){n[i(1031)]=17;break}return n[i(821)]=1,n[i(1031)]=4,new Promise(function(e,r){var t=i,o={xPpNB:function(n,e){return f[_0x5ef5(1026)](n,e)}};j[t(719)](f[t(1114)][t(637)](a.id),function(n){return o[t(1016)](e,n)},function(n){return u[t(679)](r,n)})});case 4:(r=n[i(1242)])&&r[i(787)]&&r[i(787)][i(579)]?(a[i(1113)+"id"]=r[i(787)][i(579)],n[i(1031)]=11):n[i(1031)]=9;break;case 9:return console[i(795)](O[i(771)]),n[i(569)](O[i(598)],null);case 11:n[i(1031)]=17;break;case 13:return n[i(821)]=13,n.t0=n[O[i(572)]](1),console[i(795)](O[i(1304)],n.t0),n[i(569)](O[i(598)],null);case 17:if(n[i(821)]=17,e=O[i(1019)][i(637)](a[i(1113)+"id"]),r=Storage[i(774)](e))return console[i(795)](O[i(991)]),n[i(569)](O[i(598)],O[i(684)](E,r,a[i(1113)+"id"]));n[i(1031)]=23;break;case 23:return o=Math[i(907)](),t=Date[i(1241)](),c=""[i(637)](O[i(757)](C),O[i(876)])[i(637)](a[i(1113)+"id"],O[i(1303)])[i(637)](o,O[i(1282)])[i(637)](t),n[i(1031)]=28,Promise[i(1151)]([new Promise(function(r,t){var o=i;R[o(814)](s)?u[o(679)](t,new Error(u[o(911)])):j[o(719)](c,function(n){var e=o;R[e(814)](s)?u[e(679)](t,new Error(u[e(911)])):u[e(679)](r,n)},function(n){return u[o(679)](t,n)})}),new Promise(function(n,e){var r=i;return u[r(870)](setTimeout,function(){var n=r;u[n(679)](e,new Error(u[n(755)]))},5e4)})])[O[i(572)]](function(){var u=i,c={CyUtd:f[u(1295)],Gddlz:function(n,e,r){return f[u(1198)](n,e,r)},KdlhE:f[u(1262)],sBFxx:f[u(1072)],mrSOq:function(n){return f[u(929)](n)}},e=f[u(1026)](_asyncToGenerator,f[u(575)](_regeneratorRuntime)[u(667)](function n(r){var t=u,o={EEOHC:c[t(1313)],YNTfZ:function(n,e,r){return c[t(631)](n,e,r)},LrmMX:c[t(1067)],INrUB:c[t(642)]};return c[t(1e3)](_regeneratorRuntime)[t(992)](function(n){for(var e=t;;)switch(n[e(821)]=n[e(1031)]){case 0:return console[e(795)](o[e(615)],r),n[e(1031)]=3,o[e(958)](G,a[e(1113)+"id"],s);case 3:return n[e(569)](o[e(1039)],n[e(1242)]);case 4:case o[e(891)]:return n[e(1277)]()}},n)}));return function(n){return e[u(1078)](this,arguments)}}());case 28:return(o=n[i(1242)])&&Storage[i(774)](e,o,86400),n[i(569)](O[i(598)],O[i(852)](E,o,a[i(1113)+"id"]));case 33:return n[i(821)]=33,n.t1=n[O[i(572)]](17),console[i(795)](O[i(872)],n.t1),n[i(1031)]=38,O[i(901)](G,a[i(1113)+"id"],s);case 38:return n[i(569)](O[i(598)],n[i(1242)]);case 39:case O[i(515)]:return n[i(1277)]()}},n,null,[[1,13],[17,33]])}));var i,a,r,c,S,t,u,O,o,s,l,x,z=function(n,e){return o[u(1078)](this,arguments)},E=function(n,e){var r=p;try{for(var t=h[r(1274)][r(1115)]("|"),o=0;;){switch(t[o++]){case"0":if(h[r(550)](typeof n,h[r(595)]))try{f=JSON[r(549)](n),console[r(795)](h[r(1034)])}catch(n){console[r(795)](h[r(1018)],n[r(474)])}continue;case"1":if(f){var u=Object[r(650)](f);if(u&&h[r(1136)](u[r(678)],0)){var c,i=h[r(489)](_createForOfIteratorHelper,u);try{for(i.s();!(c=i.n())[r(1100)];){var a,s,l=f[c[r(583)]];if(l&&l[r(1022)]&&h[r(696)](l[r(1022)],e)&&l[r(1201)])return console[r(795)](h[r(923)][r(637)](l.id)),l[r(1201)][r(1043)](h[r(589)])?(console[r(795)](h[r(1128)]),{url:a=(a=l[r(1201)])[r(1043)](h[r(983)])||a[r(1043)](h[r(775)])||a[r(1043)](h[r(890)])?""[r(637)](h[r(873)](C))[r(637)](a):a,hls:!0,kinopoisk_trailer:!0}):s=(s=l[r(1201)])[r(1043)](h[r(983)])?""[r(637)](h[r(1047)](C))[r(637)](s):s}}catch(n){i.e(n)}finally{i.f()}}}continue;case"2":console[r(795)](h[r(938)]);continue;case"3":if(h[r(672)](typeof n,h[r(595)])&&n[r(487)](h[r(1119)]))return n;continue;case"4":var f=n;continue;case"5":return null;case"6":if(n&&n[r(538)+"e"]&&n[r(787)])return n[r(787)];continue}break}}catch(n){return console[r(795)](h[r(1122)],n),null}},G=(S={raYBD:h[(c=p)(1130)],sAqFs:h[c(509)],nEZYX:function(n,e){return h[c(649)](n,e)},ZTrAn:h[c(508)],oUKCG:function(n,e){return h[c(825)](n,e)},Qnfop:h[c(1007)],dYLnO:h[c(1116)],jszFR:h[c(1301)],PCGkD:h[c(1005)],wCupn:function(n,e){return h[c(1099)](n,e)},sChtX:h[c(933)],DzIVs:h[c(913)],VSZxj:h[c(899)],Xodqp:h[c(805)],dhPbD:h[c(816)],VsBlN:h[c(700)],IVDez:h[c(945)],WnnAq:h[c(692)],BVfWD:h[c(997)],oJVKs:function(n){return h[c(506)](n)},TtEvb:h[c(737)],yEPxy:h[c(1220)],jzmsc:h[c(739)],mgxkK:function(n,e,r){return h[c(483)](n,e,r)},zSxvt:h[c(939)],xFccO:h[c(808)],CvPoR:h[c(748)],ZYmsZ:h[c(1296)],lXObh:function(n,e){return h[c(999)](n,e)},PjzkX:h[c(1292)],UaBlj:h[c(989)]},t=h[c(516)](_asyncToGenerator,h[c(506)](_regeneratorRuntime)[c(667)](function n(a,s){var e,r,t,l,o,u,f,d,v=c,p={yhIHV:function(n,e){return h[_0x5ef5(1302)](n,e)},LjFJc:h[v(1116)],iBzKi:function(n,e){return h[v(1302)](n,e)},fotUP:function(n,e,r){return h[v(473)](n,e,r)},polSW:function(n,e,r){return h[v(473)](n,e,r)}};return h[v(800)](_regeneratorRuntime)[v(992)](function(n){for(var c=v,i={VtLil:S[c(834)],dqMHm:S[c(574)],ODRVb:function(n,e){return S[c(944)](n,e)},sjKiv:S[c(794)],QTjsS:function(n,e){return S[c(970)](n,e)},ryPkE:S[c(753)],lPxhN:function(n,e){return S[c(970)](n,e)},yWaXs:S[c(928)],Hbwda:function(n,e){return S[c(970)](n,e)},idiqw:S[c(820)],rFoMB:S[c(582)],ojcXB:function(n,e){return S[c(823)](n,e)},ElRpw:S[c(1012)]};;)switch(n[c(821)]=n[c(1031)]){case 0:if(a){n[c(1031)]=2;break}return n[c(569)](S[c(916)],null);case 2:if(R[c(814)](s))return console[c(795)](S[c(998)][c(637)](s,S[c(986)])),n[c(569)](S[c(916)],null);n[c(1031)]=5;break;case 5:if(console[c(795)](S[c(577)]),n[c(821)]=6,e=S[c(505)][c(637)](a),t=Storage[c(774)](e))return console[c(795)](S[c(500)]),n[c(569)](S[c(916)],t);n[c(1031)]=12;break;case 12:if(R[c(814)](s))return console[c(795)](S[c(998)][c(637)](s,S[c(761)])),n[c(569)](S[c(916)],null);n[c(1031)]=15;break;case 15:return n[c(821)]=15,r=Math[c(907)](),t=Date[c(1241)](),o=[0,201868,202869,203294][c(645)](function(n){var e=c;return""[e(637)](a,i[e(1011)])[e(637)](n,i[e(807)])[e(637)](i[e(1060)](r,Math[e(907)]()))}),o=o[c(651)](S[c(1196)]),l=""[c(637)](S[c(590)](C),S[c(1091)])[c(637)](o,S[c(915)])[c(637)](t),console[c(795)](S[c(859)][c(637)](l)),n[c(1031)]=25,Promise[c(1151)]([new Promise(function(r,t){var o=c,u={rIvxp:function(n,e){return p[_0x5ef5(699)](n,e)},pdGMG:p[o(988)],QdGTt:function(n,e){return p[o(699)](n,e)},xqBFe:function(n,e){return p[o(1133)](n,e)}};R[o(814)](s)?p[o(699)](t,new Error(p[o(988)])):j[o(719)](l,function(n){var e=o;R[e(814)](s)?u[e(533)](t,new Error(u[e(1140)])):u[e(812)](r,n)},function(n){return u[o(1218)](t,n)})}),new Promise(function(n,e){var r=c;return p[r(888)](setTimeout,function(){var n=r;console[n(795)](i[n(1299)]),i[n(942)](e,new Error(i[n(1089)]))},5e4)})]);case 25:if(o=n[c(1242)],u=S[c(604)](E,o,a))return Storage[c(774)](e,u,86400),n[c(569)](S[c(916)],u);n[c(1031)]=30;break;case 30:n[c(1031)]=35;break;case 32:n[c(821)]=32,n.t0=n[S[c(675)]](15),console[c(795)](S[c(662)],n.t0);case 35:return n[c(1031)]=37,Promise[c(1151)]([new Promise(function(r,t){var o=c,u={jKLOu:function(n,e){return i[_0x5ef5(942)](n,e)},yTRtX:i[o(1049)]};R[o(814)](s)?i[o(682)](t,new Error(i[o(1049)])):j[o(719)](i[o(544)][o(637)](a),function(n){var e=o;R[e(814)](s)?u[e(1300)](t,new Error(u[e(1165)])):u[e(1300)](r,n)},function(n){return i[o(809)](t,n)})}),new Promise(function(n,e){var r=c;return p[r(1182)](setTimeout,function(){var n=r;console[n(795)](i[n(1285)]),i[n(563)](e,new Error(i[n(663)]))},5e4)})]);case 37:if(u=n[c(1242)],f=null,u&&u[c(787)]&&u[c(787)][c(1249)])return(f=(f=u[c(787)][c(1249)])&&(f[c(1043)](S[c(842)])||f[c(1043)](S[c(1163)]))&&(d=S[c(780)](I,f))?""[c(637)](b)[c(637)](d):f)&&Storage[c(774)](e,f,86400),n[c(569)](S[c(916)],f);n[c(1031)]=44;break;case 44:return n[c(569)](S[c(916)],null);case 47:return n[c(821)]=47,n.t1=n[S[c(675)]](6),console[c(795)](S[c(897)],n.t1),n[c(569)](S[c(916)],null);case 51:case S[c(1064)]:return n[c(1277)]()}},n,null,[[6,47],[15,32]])})),function(n,e){return t[c(1078)](this,arguments)}),I=function(n){var e=p;if(n)for(var r=0,t=[/(?:youtube\.com\/watch\?v=|youtu\.be\/)([^&\?\/]+)/i,/youtube\.com\/embed\/([^&\?\/]+)/i,/youtube\.com\/v\/([^&\?\/]+)/i];h[e(1004)](r,t[e(678)]);r++){var o=t[r],o=n[e(974)](o);if(o&&o[1])return o[1]}return null},q=(a={vCfXu:h[(i=p)(913)],jTLqS:h[i(939)],eiCVG:h[i(528)],baJBO:h[i(989)],JXOHf:function(n){return h[i(811)](n)}},r=h[i(516)](_asyncToGenerator,h[i(844)](_regeneratorRuntime)[i(667)](function n(r,t){var o,u=i,c={vSOTM:a[u(969)],ZsTYX:a[u(1257)],ekfoO:a[u(614)],hzxnc:a[u(995)]};return a[u(866)](_regeneratorRuntime)[u(992)](function(n){for(var e=u;;)switch(n[e(821)]=n[e(1031)]){case 0:return n[e(821)]=0,n[e(1031)]=3,Api[e(786)+e(640)](r,t);case 3:return o=n[e(1242)],n[e(569)](c[e(978)],o&&o[e(1251)]?o[e(1251)]:null);case 7:return n[e(821)]=7,n.t0=n[c[e(1079)]](0),console[e(1207)](c[e(927)],n.t0),n[e(569)](c[e(978)],null);case 11:case c[e(1006)]:return n[e(1277)]()}},n,null,[[0,7]])})),function(n,e){return r[i(1078)](this,arguments)}),L=(this[p(856)+"d"]=function(){for(var n=p,e=h[n(931)][n(1115)]("|"),r=0;;){switch(e[r++]){case"0":var t=document[n(652)+n(824)](h[n(1183)]);continue;case"1":console[n(795)](h[n(1264)](h[n(659)],f?h[n(1147)]:h[n(882)]));continue;case"2":T[n(1040)]=f;continue;case"3":f=!f;continue;case"4":if(T)continue;return;case"5":if(t&&t[n(678)])for(var o=0;h[n(655)](o,t[n(678)]);o++){f?t[o][n(586)][n(524)](h[n(490)]):t[o][n(586)][n(1001)](h[n(490)]);var u=t[o][n(652)+n(777)](h[n(1117)]),c=t[o][n(652)+n(777)](h[n(1272)]);h[n(1195)](u,c)&&(f?(h[n(480)]($,u)[n(503)](),h[n(703)]($,c)[n(1169)]()):(h[n(960)]($,u)[n(1169)](),h[n(643)]($,c)[n(503)]()))}continue;case"6":T[n(1294)]=f?0:.5;continue}break}},this[p(770)+p(829)]=function(n){var e=p;n&&(n[e(1040)]=f,n[e(1294)]=f?0:.5)},this[p(764)]=function(n,e,r){var o=p,i={neXTp:h[o(847)],ZSTBy:h[o(949)],BAgaA:h[o(892)],inuYb:h[o(695)],sjdMG:h[o(1315)],ZoACt:h[o(946)],MmghI:function(n){return h[o(873)](n)},eKwqO:h[o(1131)],YEAai:h[o(1178)]};if(n){f=Storage[o(539)](h[o(1143)],!0);var t=h[o(656)](typeof n,h[o(595)])?n:n[o(1227)],u=h[o(672)](h[o(999)](_typeof,n),h[o(603)])&&n[o(1027)],n=h[o(550)](h[o(1135)](_typeof,n),h[o(603)])&&n[o(1113)+o(1249)];if(t){if(P=(w=e)[o(1197)](h[o(1010)]),h[o(1160)](c=P,null)&&h[o(750)](c,void 0)&&c[o(678)]){w&&(w[o(1197)](h[o(959)])[o(511)+"s"](h[o(726)])[o(720)](h[o(1021)]),w[o(1197)](h[o(959)])[o(1045)]({opacity:"0",transition:h[o(1258)]})),P[o(1033)]();var c={id:h[o(638)],width:h[o(773)],height:h[o(773)],autoplay:!0,muted:f,playsinline:!0,loop:!1,"webkit-playsinline":!0},a=(y=h[o(1271)]($,h[o(1228)],c),u&&(console[o(795)](h[o(1236)]),y[o(1270)](h[o(848)],h[o(661)])),h[o(1104)](n,u)||t[o(1043)](object$2[o(547)])?(console[o(795)](h[o(930)]),y[o(1270)](h[o(815)],t)):((c=h[o(828)]($,h[o(1086)],{src:t,type:u?h[o(972)]:h[o(1275)]})).on(h[o(840)],function(n){var e=o;console[e(795)](h[e(1255)],n),m[e(822)]()}),y[o(484)](c)),P[o(484)](y),y[0]);if(T=a,u)try{h[o(656)](typeof window[o(886)],h[o(1205)])?(console[o(795)](h[o(887)]),h[o(480)](function(c){return new Promise(function(n,e){for(var r=_0x5ef5,t=i[r(914)][r(1115)]("|"),o=0;;){switch(t[o++]){case"0":document[r(1096)][r(898)+"d"](u);continue;case"1":u[r(1042)]=c;continue;case"2":u[r(1077)]=n;continue;case"3":u[r(874)]=e;continue;case"4":var u=document[r(694)+r(548)](i[r(934)]);continue}break}})},h[o(633)])[o(1110)](function(){h[o(1271)](l,a,t)})[h[o(939)]](function(n){var e=o;console[e(795)](h[e(957)],n)})):h[o(558)](l,a,t)}catch(n){console[o(795)](h[o(1286)],n[o(474)])}m[o(770)+o(829)](a),e[o(720)](h[o(713)]),a[o(519)+o(1029)](h[o(704)],function(){var n=o;P&&P[n(720)](i[n(1159)])});var s=function(){var n=o;m[n(822)](),r&&h[n(800)](r)},n=(a[o(519)+o(1029)](h[o(1127)],s),a[o(519)+o(1029)](h[o(840)],s),k&&h[o(643)](clearTimeout,k),k=h[o(551)](setTimeout,function(){var n=o;console[n(795)](h[n(801)]),h[n(506)](s)},3e4),P&&P[o(1045)](h[o(1030)],h[o(937)]),e[o(1197)](h[o(1183)]));return n[o(678)]&&n.on(h[o(1168)],function(){m[o(856)+"d"]()}),k=h[o(588)](setTimeout,function(){return m[o(822)]()},12e4),s}console[o(795)](h[o(697)])}else console[o(795)](h[o(1200)])}else console[o(795)](h[o(784)]);function l(n,e){var t,u=o,r={JLtIu:h[u(722)],VQeeC:h[u(905)],eroOV:function(n,e){return h[u(550)](n,e)},JBLQH:h[u(806)],BKuwy:h[u(939)],DZrBH:function(n,e){return h[u(672)](n,e)}};window[u(886)]&&window[u(886)][u(705)+"d"]()?(console[u(795)](h[u(1121)]),(t=new window[u(886)]({maxBufferLength:30,maxMaxBufferLength:60,maxBufferSize:h[u(752)](h[u(752)](10,1e3),1e3),maxBufferHole:.5,lowLatencyMode:!1,timeout:1e4})).on(window[u(886)][u(965)][u(1191)],function(n,e){var r=u;if(e[r(762)])switch(console[r(795)](i[r(674)][r(637)](e[r(843)],i[r(606)])[r(637)](e[r(712)])),e[r(843)]){case window[r(886)][r(994)][r(730)+r(564)]:console[r(795)](i[r(495)]),t[r(507)]();break;case window[r(886)][r(994)][r(587)+"R"]:console[r(795)](i[r(818)]),t[r(912)+r(1215)]();break;default:i[r(1230)](s)}else console[r(795)](i[r(657)][r(637)](e[r(843)],i[r(606)])[r(637)](e[r(712)]))}),t[u(716)](e),t[u(788)+"a"](n),t.on(window[u(886)][u(965)][u(875)+u(767)],function(){var o=u,e={YJmza:r[o(647)],AVwwU:r[o(701)],WOnJr:function(n,e){return r[o(984)](n,e)},ZqkUo:r[o(1279)],NZdCY:r[o(1219)]};a[o(764)]()[r[o(1219)]](function(n){var r=o,t={lzcdw:e[r(723)]};console[r(795)](e[r(1062)],n[r(474)]),e[r(1071)](n[r(1129)],e[r(690)])&&(a[r(1040)]=!0,f=!0,a[r(764)]()[e[r(715)]](function(n){var e=r;return console[e(795)](t[e(956)],n[e(474)])}))})}),a[u(979)+"e"]=t):a[u(625)+"e"](h[u(502)])?(console[u(795)](h[u(940)]),a[u(1042)]=e,a[u(519)+u(1029)](h[u(1184)],function(){var o=u,e={uUCFe:r[o(647)],DPpUO:r[o(701)],gQHAq:function(n,e){return r[o(1025)](n,e)},JxskZ:r[o(1279)],ScTmx:r[o(1219)]};a[o(764)]()[r[o(1219)]](function(n){var r=o,t={fXTYW:e[r(731)]};console[r(795)](e[r(975)],n[r(474)]),e[r(880)](n[r(1129)],e[r(1246)])&&(a[r(1040)]=!0,f=!0,a[r(764)]()[e[r(950)]](function(n){var e=r;return console[e(795)](t[e(1134)],n[e(474)])}))})})):console[u(795)](h[u(904)])}},this[p(1020)+p(772)]=function(){var r=p;g&&(R[r(524)](g),console[r(795)](h[r(1123)][r(637)](g))),n[r(1177)](function(n){var e=r;try{n&&h[e(608)](n[e(1208)],4)&&(n[e(578)](),console[e(795)](h[e(501)]))}catch(n){console[e(795)](h[e(1233)],n)}}),n[r(476)](),j&&j[r(476)]()},this[p(822)]=function(){for(var e=p,n=h[e(1118)][e(1115)]("|"),r=0;;){switch(n[r++]){case"0":if(w)try{var t=w[e(1197)](h[e(959)]);t[e(678)]&&(t[e(511)+"s"](h[e(1021)])[e(720)](h[e(726)]),t[e(1045)]({opacity:"1",transition:h[e(1258)]})),w[e(511)+"s"](h[e(713)])}catch(n){console[e(795)](h[e(1044)],n[e(474)])}continue;case"1":m[e(1020)+e(772)]();continue;case"2":console[e(795)](h[e(1032)]);continue;case"3":T=null;continue;case"4":if(P)try{P[e(1033)](),P[e(511)+"s"](h[e(1178)]),P=null}catch(n){console[e(795)](h[e(1120)],n[e(474)])}continue;case"5":console[e(795)](h[e(903)]);continue;case"6":if(T)try{for(var o=h[e(1311)][e(1115)]("|"),u=0;;){switch(o[u++]){case"0":T[e(760)+"e"]=0;continue;case"1":T[e(546)]();continue;case"2":T[e(1269)+"ta"]=null;continue;case"3":T[e(865)]=null;continue;case"4":T[e(874)]=null;continue;case"5":T[e(630)]();continue;case"6":T[e(979)+"e"]&&(T[e(979)+"e"][e(841)](),T[e(979)+"e"][e(822)](),T[e(979)+"e"]=null);continue;case"7":T[e(611)]=null;continue;case"8":T[e(669)+e(689)](h[e(815)]);continue;case"9":T[e(1185)]=null;continue}break}}catch(n){console[e(795)](h[e(1280)],n[e(474)])}continue;case"7":w=null;continue;case"8":try{var c=document[e(652)+e(824)](h[e(1183)]);if(c&&c[e(678)])for(var i=0;h[e(655)](i,c[e(678)]);i++)for(var a=h[e(746)][e(1115)]("|"),s=0;;){switch(a[s++]){case"0":c[i][e(586)][e(524)](h[e(732)]);continue;case"1":var l=c[i][e(652)+e(777)](h[e(1272)]);continue;case"2":h[e(1181)](f,l)&&(h[e(1225)]($,f)[e(503)](),h[e(960)]($,l)[e(1169)]());continue;case"3":c[i][e(586)][e(524)](h[e(490)]);continue;case"4":var f=c[i][e(652)+e(777)](h[e(1117)]);continue}break}}catch(n){console[e(795)](h[e(1014)],n[e(474)])}continue;case"9":P=null;continue;case"10":y=null;continue;case"11":if(y)try{y[e(630)]&&y[e(630)](),y[e(1001)]&&y[e(1001)]()}catch(n){console[e(795)](h[e(1202)],n[e(474)])}continue;case"12":k&&(h[e(1023)](clearTimeout,k),k=null);continue;case"13":g=null;continue;case"14":R[e(476)]();continue}break}},l={GbRqY:h[(s=p)(1174)],FnJkE:h[s(1056)],PoGqh:h[s(913)],Tpron:h[s(989)],bKpWh:function(n){return h[s(506)](n)}},x=h[s(1225)](_asyncToGenerator,h[s(811)](_regeneratorRuntime)[s(667)](function n(r){var t=s;return l[t(804)](_regeneratorRuntime)[t(992)](function(n){for(var e=t;;)switch(n[e(821)]=n[e(1031)]){case 0:return console[e(795)](l[e(566)][e(637)](r,l[e(778)])),n[e(569)](l[e(792)],null);case 2:case l[e(628)]:return n[e(1277)]()}},n)})),function(n){return x[s(1078)](this,arguments)}),U={setMuted:function(n){var e=p;f=n,y&&(y[e(1040)]=n,y[e(1294)]=n?0:Storage[e(539)](h[e(1263)],.5))},getMuted:function(){return f}};return window[p(702)+p(785)]=U}!function(){for(var n=_0x5ef5,e=_0x2b6d();;)try{if(203515==+parseInt(n(491))*(-parseInt(n(1083))/2)+-parseInt(n(1256))/3*(parseInt(n(658))/4)+-parseInt(n(531))/5*(parseInt(n(1248))/6)+parseInt(n(627))/7+parseInt(n(869))/8+parseInt(n(1172))/9+parseInt(n(725))/10*(-parseInt(n(1206))/11))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();var Trailer={init:init$I};


  /**
   * Карточка
   * @param {object} data
   * @param {{isparser:boolean, card_small:boolean, card_category:boolean, card_collection:boolean, card_continue:true, card_wide:true}} params 
   */
function Card(C){var R=_0x23f6,P={pEzqe:function(n,e){return n+e},yTyPi:R(536)+R(810)+R(586)+R(314)+R(667)+R(756)+"e7",XnjVs:function(n,e){return n+e},JEdbO:R(269),UqVSs:R(159),MIFvC:R(582)+"2",SpzPC:R(531),spkbk:R(238)+R(804),xZirI:function(n){return n()},lWRPs:R(432),mAAcY:function(n,e){return n(e)},EbtlV:function(n,e){return e<n},QOQwl:R(650)+R(639),YZFRf:function(n,e){return n(e)},hIxKI:R(407)+R(687),sRVxg:function(n,e,t){return n(e,t)},UuSiC:function(n,e){return n===e},FrkUD:function(n,e){return n!==e},WpvRj:R(240),BAjET:R(673)+R(209),TvcFO:R(790),BlCIj:R(577),BCWDB:R(254),YlUha:R(771),qhJhd:R(333)+"b",UIidO:R(224)+R(252),wSCiY:R(224)+R(581),DuWtc:R(333)+R(767),ahqqm:R(731),yVqXE:R(208)+R(252),KPVKY:R(623),fqtLb:R(464),GKxeL:R(683),wFqag:R(780),KZOuT:R(177),vIbal:R(167),teEFa:R(478),rIMZN:R(495),KClDX:R(164),ratyC:R(498),MlFUI:R(605)+R(391),OmlGH:R(588)+R(440),pAqBk:R(588)+R(621),lmtne:R(588)+R(652)+"m",SxHzM:R(588)+R(398),oCaKP:R(588)+R(467),OariT:R(618),evbsc:R(814)+R(414),pQpox:R(573),jLFSL:function(n,e){return n===e},OWLKe:function(n,e){return n(e)},pzICa:R(670),NzTIS:function(n){return n()},SAPay:R(718)+"ty",UDlsj:R(154)+"3",kvXul:R(156)+"r",ASpmi:R(458),usFQE:R(510)+R(374)+R(707),MOCMz:function(n,e){return n+e},EUJNv:function(n,e){return n+e},yZzwB:R(844)+R(748),MesDb:R(469),IsQYZ:R(746),tuhwB:function(n,e){return n+e},fxlNA:function(n,e){return n+e},EBFZO:function(n,e){return n+e},GczWP:R(844)+R(779),QrzJZ:R(534)+R(542)+"s",WteEi:R(534)+R(309),nHtnf:R(534)+R(435),Waxbe:R(678)+R(832)+R(296)+"7",AYtkO:R(328)+R(405),mluMA:R(739)+R(822),bayHj:R(781)+R(660),OwWYx:function(n,e){return n(e)},CYKkO:function(n,e){return n+e},eYAHC:R(817)+R(712),uarex:R(741)+"l",ZjWlb:function(n,e){return n(e)},uFequ:R(416)+"le",IzwxH:function(n,e){return e<n},QBDsb:R(653),JrdHa:function(n,e){return e<=n},YlIqy:R(401),wGFhL:R(392)+"w",SkwqR:function(n,e){return e<=n},XDJEj:R(401)+R(843),xRhqs:function(n,e){return e<=n},vUcLA:R(401)+R(591),RRAJi:R(401)+R(835),RtXnp:function(n,e){return n==e},yvOVc:R(791),wJkjN:R(827),DVftt:R(788),QoYZS:R(482)+R(720),BjnPt:R(378),WoVFH:R(546),avbzD:R(745)+R(726),LTECv:R(745)+"o",nvhOG:R(745)+R(382),SOyPc:function(n,e){return n+e},qkGZQ:function(n,e){return e<n},OQwWG:R(358),LgmoB:function(n,e){return n(e)},AfMtb:R(674),OPYUk:R(375)+R(622),PIAwA:R(753),LBEyM:R(408)+"e",vEgnA:R(230),IAVkf:R(315)+R(686),wuoQv:R(165),sjGmq:R(514),bQtmo:R(470),Wicay:R(297)+"ed",VQabw:R(555),eUkbh:R(716),zXpIR:R(385)+R(228),WBekI:R(496),nTnxI:R(220),KiUwT:R(776)+R(485),vlLdE:R(176),ufuDp:function(n,e){return n(e)},ZRmpJ:R(446),dHQWV:R(619)+R(732),LJcmO:R(313)+"ed",HtKgh:R(163)+R(606),DlVJC:function(n,e){return n+e},IMmBo:function(n,e){return n+e},urzML:R(578)+"de",Nppnv:R(237)+R(356),KAGTS:R(655),qCMlX:function(n,e){return n==e},RLiGe:function(n,e){return n/e},KRaVR:function(n,e){return n-e},mdIfl:function(n,e){return n*e},cquFW:R(786),rUZoN:function(n,e){return e<n},zRfZC:R(578)+R(659)+"ft",xEjwI:R(737),Wkcsq:R(769)+R(479),GwlKe:R(781)+R(598),smJyk:function(n,e){return n+e},tQnoE:R(250)+R(743),ffjhJ:function(n,e){return n==e},sgzLs:R(342)+"ed",mJqvD:R(527),xvKjQ:R(613)+R(727),nhpig:function(n,e){return n<e},DGNvs:function(n,e){return n(e)},uWZjY:R(552)+R(276),WyyBg:R(215),mnKTi:R(376),bZzWZ:R(204)+R(158),GbSXb:R(750),ExFtx:R(285),HFQKS:R(188),NeDpB:R(459)+R(262)+"|3",YoAPQ:R(487)+"on",nXFDX:R(672),dEQhh:R(649),vkALD:R(431),HCLTs:R(298),RFTGL:R(821)+"ry",ibIMU:R(284)+"en",grwPm:R(198),OsEKo:R(685),nKgYi:R(493),ovKXE:R(413)+R(627)+R(583),NVpDp:R(403),tOHDv:R(696)+"r",xwRVt:R(182)+R(277)+R(395)+R(339),QWsJI:R(171),DnnBD:function(n,e){return n!==e},vaCKe:R(155),xyTJC:function(n,e){return n(e)},qnxjR:R(170),PQRaE:R(681)+R(522)+R(709)+"2",luint:R(289)+"h",JFbwT:function(n,e){return n===e},UnyUX:R(450)+"e",FoMzM:R(630)+R(671),tGIJw:R(451),HpMqw:R(199),DISMX:R(217)+R(624),jLALS:R(834),kupRI:function(n,e){return n&&e},IuTDl:function(n,e,t){return n(e,t)},gZTOD:function(n){return n()},dWWoZ:function(n,e){return n(e)},vonaM:function(n,e){return n===e},UPLBC:R(281),dxSMv:R(453)+"r",mUlNy:function(n,e){return n(e)},hznmd:function(n){return n()},rPbAA:R(418)+"s",Hkghr:function(n,e){return n(e)},LWCxq:function(n){return n()},DPjfY:R(742),HZgmo:R(658),ujTAx:R(191),AblCI:R(629)+R(463),PDdKN:function(n,e){return n===e},Wtweg:R(837),NIqCU:R(760),lsgCH:R(614),hWzhy:R(365),cXrWT:function(n,e){return n===e},DudMs:R(312),dTMuI:R(789),XyLhB:R(302)+"4",kjEZc:function(n,e){return n(e)},NqNSK:function(n,e){return n+e}},Q=P[R(194)](arguments[R(662)],1)&&P[R(841)](arguments[1],void 0)?arguments[1]:{};function W(n){n&&n[R(325)]()}Arrays[R(587)](C,{title:C[R(424)],original_title:C[R(801)+R(622)],release_date:C[R(787)+R(490)]}),C[R(255)+"ar"]=P[R(489)](C[R(702)+"te"]||P[R(394)],"")[R(454)](0,4);function B(g){for(var n,e,r=R,t=P[r(189)][r(353)]("|"),c=0;;){switch(t[c++]){case"0":var a=function(){var n=r;return g[n(540)][n(396)+"e"]};continue;case"1":if(C[r(633)+"id"]||C[r(292)])return void P[r(256)](s,C[r(633)+"id"],C[r(292)]);continue;case"2":var o=function(){function e(t){return new Promise(function(n,e){TMDB[_0x23f6(547)+"ds"]({type:t,id:C.id},n,e)})}var t=r,c={GVJYu:function(n,e,t){return D[_0x23f6(556)](n,e,t)}},o=D[t(261)](i);D[t(715)](e,o)[t(719)](function(n){var e=t;return!(!n||!n[e(292)]&&!n[e(633)+"id"]||(C[e(292)]=n[e(292)]||"",C[e(633)+"id"]=n[e(633)+"id"]||"",c[e(444)](s,n[e(633)+"id"],n[e(292)]),0))})[D[t(352)]](function(n){var i,r=t,a={Kvjwb:D[r(434)],irDTn:function(n,e){return D[r(541)](n,e)},ajTNu:function(n,e,t){return D[r(556)](n,e,t)}};return!!D[r(765)](n[r(213)],404)&&(i=D[r(765)](o,"tv")?D[r(631)]:"tv",D[r(152)](e,i)[r(719)](function(n){var e=r;if(n&&(n[e(292)]||n[e(633)+"id"]))for(var t=a[e(327)][e(353)]("|"),c=0;;){switch(t[c++]){case"0":C[e(292)]=n[e(292)]||"";continue;case"1":a[e(279)](u,i);continue;case"2":C[e(633)+"id"]=n[e(633)+"id"]||"";continue;case"3":return!0;case"4":a[e(677)](s,n[e(633)+"id"],n[e(292)]);continue}break}return!1}))})[D[t(352)]](function(n){})};continue;case"3":var D={QlWlW:function(n,e){return P[r(824)](n,e)},ldRxQ:function(n,e){return P[r(796)](n,e)},arais:P[r(332)],QafMj:P[r(275)],GfVvP:function(n,e){return P[r(194)](n,e)},Qdhwu:P[r(797)],taJkJ:P[r(798)],pgfci:P[r(268)],wtkRl:P[r(384)],WSryv:P[r(348)],OgxXW:P[r(770)],WXmzp:P[r(617)],sAeSG:P[r(802)],HzAhD:P[r(530)],oXCeT:P[r(632)],mqGfH:function(n,e){return P[r(162)](n,e)},tYarR:P[r(845)],CkdoF:P[r(218)],OowIC:P[r(264)],mxpgT:P[r(257)],bXhvA:P[r(774)],RDQhW:P[r(549)],NtkrL:P[r(412)],ecaju:P[r(321)],wUges:P[r(212)],yZAJr:P[r(689)],hngpc:P[r(323)],iPaCA:P[r(580)],bMIRQ:P[r(505)],aedJx:P[r(354)],xykZD:P[r(713)],bnBOd:P[r(537)],CVZdQ:P[r(515)],auZer:P[r(668)],LYhVB:P[r(441)],kVjGR:function(n,e){return P[r(162)](n,e)},PjPpm:function(n,e,t){return P[r(256)](n,e,t)},IoHJm:function(n,e){return P[r(355)](n,e)},AXaUI:P[r(508)],mCUYB:function(n,e){return P[r(642)](n,e)},GTNvU:function(n){return P[r(247)](n)},iuHCG:function(n,e){return P[r(222)](n,e)},DNavg:P[r(816)]};continue;case"4":var i=function(){for(var n=r,e=P[n(241)][n(353)]("|"),t=0;;){switch(e[t++]){case"0":if(c)return c;continue;case"1":(g[n(516)][n(772)](P[n(635)])||g[n(433)+n(390)](P[n(343)])||C[n(346)+n(316)]||C[n(393)]||C[n(424)]||C[n(316)]||C[n(787)+n(490)])&&(i="tv");continue;case"2":return i;case"3":var c=P[n(247)](a);continue;case"4":var i=P[n(508)];continue;case"5":P[n(162)](u,i);continue}break}};continue;case"5":var u=function(n){var e=r;g[e(540)][e(396)+"e"]=n};continue;case"6":var s=function(n,e){var I=r,n=P[I(287)](P[I(287)](P[I(253)],n?P[I(223)](P[I(193)],n):""),e?P[I(223)](P[I(535)],e):"");$[I(812)](n,function(n){var i=I,r={JMFQL:function(n,e){return D[_0x23f6(663)](n,e)}};if(n&&D[i(207)](n,""))try{var e=JSON[i(721)](n);if(D[i(663)](e[i(213)],D[i(636)])&&e[i(303)]&&e[i(303)][i(417)])for(var t=D[i(404)][i(353)]("|"),c=0;;){switch(t[c++]){case"0":u=u[i(645)](function(n){var e=i;return n[e(511)+"e"]()[e(819)]()})[i(227)](function(n){return n})[i(227)](function(n,e,t){var c=i;return r[c(717)](t[c(402)](n),e)});continue;case"1":try{for(l.s();!(h=l.n())[i(334)];){var a=h[i(293)],o=d[a]||0;D[i(243)](o,v)&&(v=o,s=a)}}catch(n){l.e(n)}finally{l.f()}continue;case"2":var u=D[i(663)](typeof e[i(303)][i(417)],D[i(833)])?e[i(303)][i(417)][i(353)](","):Array[i(794)](e[i(303)][i(417)])?e[i(303)][i(417)]:[e[i(303)][i(417)]];continue;case"3":var s=null;continue;case"4":var f={"WEB-DL":D[i(368)],BDRIP:D[i(785)],"WEB-DLRIP":D[i(225)],WEBRIP:D[i(225)],HDTV:D[i(225)],DVB:Lang[i(503)](D[i(166)]),HDTVRIP:Lang[i(503)](D[i(153)]),HDRIP:Lang[i(503)](D[i(196)]),DVDRIP:Lang[i(503)](D[i(564)]),TS:Lang[i(503)](D[i(288)]),IPTVRIP:Lang[i(503)](D[i(322)])};continue;case"5":var h,l=D[i(762)](_createForOfIteratorHelper,u);continue;case"6":var v=-1;continue;case"7":var d={"WEB-DL":8,BDRIP:7,"WEB-DLRIP":6,WEBRIP:5,HDTV:4,DVB:4,HDTVRIP:3,HDRIP:3,DVDRIP:2,TS:1,IPTVRIP:1};continue;case"8":var p={high:[D[i(234)]],top:[D[i(214)]],medium:[D[i(324)],D[i(648)],D[i(216)],D[i(680)]],low:[D[i(590)],D[i(235)],D[i(421)],"TS",D[i(682)]]};continue;case"9":if(s)for(var m=D[i(604)][i(353)]("|"),w=0;;){switch(m[w++]){case"0":_[i(381)+"d"](b);continue;case"1":p[i(566)][i(773)](s)?_[i(516)][i(571)](D[i(438)]):p[i(422)][i(773)](s)?_[i(516)][i(571)](D[i(820)]):p[i(331)][i(773)](s)?_[i(516)][i(571)](D[i(603)]):_[i(516)][i(571)](D[i(551)]);continue;case"2":_[i(516)][i(571)](D[i(679)]);continue;case"3":g[i(381)+"d"](_);continue;case"4":b[i(290)]=f[s]||s;continue;case"5":var b=document[i(370)+i(291)](D[i(267)]);continue;case"6":var k=g[i(433)+i(390)](D[i(661)]);continue;case"7":k&&k[i(325)]();continue;case"8":var _=document[i(370)+i(291)](D[i(267)]);continue}break}continue}break}}catch(n){}})[I(494)](function(n){})};continue;case"7":C.id?P[r(247)](o):(C[r(150)]||C[r(424)])&&(n=C[r(150)]||C[r(424)],e=P[r(768)](i),TMDB[r(755)]({query:n,type:e},function(n){var e=r;if(n&&P[e(194)](n[e(662)],0))for(var t=P[e(811)][e(353)]("|"),c=0;;){switch(t[c++]){case"0":C.id=i.id;continue;case"1":i[e(424)]&&(C[e(424)]=i[e(424)]);continue;case"2":i[e(787)+e(490)]&&(C[e(787)+e(490)]=i[e(787)+e(490)]);continue;case"3":i[e(286)]&&P[e(642)](u,i[e(286)]);continue;case"4":i[e(346)+e(316)]&&(C[e(346)+e(316)]=i[e(346)+e(316)]);continue;case"5":var i=n[0];continue;case"6":P[e(247)](o);continue}break}}));continue;case"8":if(Storage[r(280)](P[r(149)]))continue;return}break}}this[R(179)]=function(){for(var n=R,e=P[n(299)][n(353)]("|"),t=0;;){switch(e[t++]){case"0":this[n(458)]=Template.js(Q[n(341)]?P[n(607)]:P[n(517)],C);continue;case"1":this[n(458)][n(366)]=C;continue;case"2":if(Q[n(341)])for(var c=P[n(570)][n(353)]("|"),i=0;;){switch(c[i++]){case"0":a[n(381)+"d"](r);continue;case"1":s&&(s[n(290)]=C[n(695)]);continue;case"2":r[n(462)]=P[n(287)](P[n(249)](P[n(168)](Lang[n(503)](P[n(501)]),P[n(700)]),C[n(512)]),P[n(282)]);continue;case"3":o&&(o[n(290)]=C[n(729)]);continue;case"4":a[n(462)]="";continue;case"5":var r=document[n(370)+n(291)](P[n(515)]);continue;case"6":u[n(462)]=P[n(548)](P[n(809)](P[n(836)](Lang[n(503)](P[n(611)]),P[n(700)]),C[n(320)]),P[n(282)]);continue;case"7":var a=this[n(458)][n(433)+n(390)](P[n(388)]);continue;case"8":var o=this[n(458)][n(433)+n(390)](P[n(579)]);continue;case"9":var u=document[n(370)+n(291)](P[n(515)]);continue;case"10":var s=this[n(458)][n(433)+n(390)](P[n(419)]);continue;case"11":a[n(381)+"d"](u);continue}break}else for(var f,h=P[n(763)][n(353)]("|"),l=0;;){switch(h[l++]){case"0":Q[n(455)+n(389)]&&this[n(458)][n(516)][n(571)](P[n(754)]);continue;case"1":Q[n(615)+n(362)]&&(this[n(458)][n(516)][n(571)](P[n(318)]),f=this[n(458)][n(433)+n(390)](P[n(532)]))&&P[n(513)](W,f);continue;case"2":var v=P[n(513)](parseFloat,P[n(178)](C[n(723)+"ge"]||0,""))[n(574)](1);continue;case"3":Q[n(521)+n(666)]&&this[n(458)][n(516)][n(571)](P[n(782)]);continue;case"4":Q[n(344)]&&(this[n(458)][n(516)][n(571)](P[n(326)]),P[n(560)](W,this[n(458)][n(433)+n(390)](P[n(646)])));continue;case"5":if(P[n(561)](v,0))for(var d=P[n(616)][n(353)]("|"),p=0;;){switch(d[p++]){case"0":m[n(290)]=P[n(711)](v,10)?10:v;continue;case"1":var m=document[n(370)+n(291)](P[n(515)]);continue;case"2":m[n(516)][n(571)](P[n(192)]);continue;case"3":this[n(458)][n(433)+n(390)](P[n(752)])[n(381)+"d"](m);continue;case"4":P[n(363)](v,8)?m[n(516)][n(571)](P[n(428)]):P[n(766)](v,6)?m[n(516)][n(571)](P[n(460)]):m[n(516)][n(571)](P[n(476)]);continue}break}continue;case"6":b&&(b[n(290)]=C[n(150)]);continue;case"7":P[n(222)](B,w);continue;case"8":P[n(842)](C[n(255)+"ar"],P[n(394)])?P[n(513)](W,this[n(458)][n(433)+n(390)](P[n(725)])):(f=this[n(458)][n(433)+n(390)](P[n(725)]))&&(f[n(290)]=C[n(255)+"ar"]);continue;case"9":var w=this[n(458)][n(433)+n(390)](P[n(752)]);continue;case"10":var b=this[n(458)][n(433)+n(390)](P[n(646)]);continue;case"11":if(Q[n(465)])for(var k=P[n(197)][n(353)]("|"),_=0;;){switch(k[_++]){case"0":Storage[n(280)](P[n(669)])&&P[n(513)](W,this[n(458)][n(433)+n(390)](P[n(646)]));continue;case"1":C[n(360)]=C[n(697)];continue;case"2":this[n(458)][n(516)][n(571)](P[n(483)]);continue;case"3":if(C[n(733)]||C[n(523)+"e"])for(var I,g=P[n(698)][n(353)]("|"),D=0;;){switch(g[D++]){case"0":this[n(458)][n(433)+n(390)](P[n(752)])[n(381)+"d"](T);continue;case"1":C[n(523)+"e"]&&((I=document[n(370)+n(291)](P[n(515)]))[n(516)][n(571)](P[n(558)]),I[n(290)]=C[n(523)+"e"],T[n(381)+"d"](I));continue;case"2":T[n(516)][n(571)](P[n(568)]);continue;case"3":C[n(733)]&&((I=document[n(370)+n(291)](P[n(515)]))[n(516)][n(571)](P[n(387)]),I[n(290)]=P[n(628)](C[n(733)][n(454)](0,110),P[n(380)](C[n(733)][n(662)],110)?P[n(626)]:""),T[n(381)+"d"](I));continue;case"4":var T=document[n(370)+n(291)](P[n(515)]);continue}break}continue;case"4":P[n(565)](W,this[n(458)][n(433)+n(390)](P[n(646)]));continue}break}continue;case"12":if(C[n(801)+n(622)])for(var y=P[n(609)][n(353)]("|"),L=0;;){switch(y[L++]){case"0":x[n(290)]=C[n(801)+n(622)]?Lang[n(503)](P[n(758)]):P[n(688)];continue;case"1":this[n(458)][n(516)][n(571)](C[n(801)+n(622)]?P[n(635)]:P[n(692)]);continue;case"2":this[n(458)][n(433)+n(390)](P[n(752)])[n(381)+"d"](x);continue;case"3":var x=document[n(370)+n(291)](P[n(515)]);continue;case"4":x[n(516)][n(571)](P[n(625)]);continue}break}continue;case"13":Q[n(557)+n(307)]&&this[n(458)][n(516)][n(571)](P[n(160)]);continue}break}continue;case"3":this[n(458)][n(699)+n(823)](P[n(347)],this[n(165)][n(184)](this));continue;case"4":this[n(458)][n(699)+n(823)](P[n(426)],this[n(514)][n(184)](this));continue;case"5":this[n(373)]=this[n(458)][n(433)+n(390)](P[n(477)])||{};continue}break}},this[R(807)]=function(){var e=R,t=this;Q[e(341)]||(this[e(373)][e(415)]=function(){var n=e;t[n(458)][n(516)][n(571)](P[n(504)]),ImageCache[n(599)](t[n(373)],t[n(373)][n(651)])},this[e(373)][e(232)]=function(){var n=e;TMDB$1[n(491)](),console[n(831)](P[n(271)],P[n(724)],t[n(373)][n(651)]),t[n(373)][n(651)]=P[n(799)]})},this[R(439)]=function(n){var e=R,t=document[e(370)+e(291)](P[e(515)]);t[e(516)][e(571)](P[e(151)]),t[e(516)][e(571)](P[e(836)](P[e(784)],n)),this[e(458)][e(433)+e(390)](P[e(359)])[e(381)+"d"](t)},this[R(165)]=function(){for(var n=R,e=P[n(576)][n(353)]("|"),t=0;;){switch(e[t++]){case"0":if(Q[n(341)])return;continue;case"1":this[n(335)+"ap"]&&P[n(340)](W,this[n(335)+"ap"]);continue;case"2":this[n(764)]();continue;case"3":this[n(458)][n(516)][n(772)](P[n(329)])&&this[n(572)]();continue;case"4":this[n(730)+n(595)]=!1;continue}break}},this[R(572)]=function(){for(var d=R,n=P[d(693)][d(353)]("|"),e=0;;){switch(n[e++]){case"0":if(Storage[d(280)](P[d(828)]))continue;return;case"1":var p={sesIR:function(n,e){return P[d(642)](n,e)},uZtGq:function(n,e){return P[d(194)](n,e)},XWWQP:function(n,e){return P[d(735)](n,e)}};continue;case"2":this[d(730)+d(595)]||(P[d(379)](function(n){var e=d;C[e(801)+e(622)]?TimeTable[e(812)](C,n):p[e(157)](n,[])},function(n){for(var e,t,s,f=d,c=P[f(550)][f(353)]("|"),i=0;;){switch(c[i++]){case"0":C[f(801)+f(622)]&&(e=Timeline$1[f(244)](Utils$2[f(486)]([C[f(703)+f(612)]][f(304)](""))))[f(210)]&&(s={ep:{name:P[f(249)](P[f(168)](Lang[f(503)](P[f(488)])," "),e[f(246)]?Utils$2[f(751)+f(761)](e[f(246)]):P[f(809)](e[f(210)],"%"))},view:e});continue;case"1":!s&&C[f(801)+f(622)]&&(e=Storage[f(812)](P[f(641)],"{}")[Utils$2[f(486)](C[f(703)+f(612)])])&&e[f(278)]&&(s={ep:{episode_number:e[f(278)],name:P[f(744)](P[f(545)](Lang[f(503)](P[f(710)])," "),e[f(278)])},view:Timeline$1[f(244)](Utils$2[f(486)]([e[f(795)],P[f(194)](e[f(795)],10)?":":"",e[f(278)],C[f(703)+f(612)]][f(304)]("")))});continue;case"2":var h={SkCQu:function(n,e){return P[f(380)](n,e)},DRoou:P[f(447)],pKXvK:P[f(515)],ZTsFn:P[f(386)],tcLHU:function(n,e){return P[f(274)](n,e)},FyCBB:function(n,e){return P[f(597)](n,e)},qCBBd:function(n,e){return P[f(749)](n,e)},LuAAV:function(n,e){return P[f(520)](n,e)},ejCvT:function(n,e){return P[f(520)](n,e)},NEXKA:function(n,e){return P[f(178)](n,e)},iDZmB:P[f(593)],SfQzf:function(n,e){return P[f(803)](n,e)},XBSss:P[f(592)],PLxPF:P[f(529)],ZCZJw:P[f(301)],HhBws:P[f(783)]};continue;case"3":s||C[f(801)+f(622)]||(t=Timeline$1[f(244)](Utils$2[f(486)]([C[f(703)+f(612)]][f(304)](""))))[f(210)]&&(s={ep:{name:P[f(168)](P[f(211)](Lang[f(503)](P[f(488)])," "),t[f(246)]?Utils$2[f(751)+f(761)](t[f(246)]):P[f(223)](t[f(210)],"%"))},view:t});continue;case"4":if(s)for(var r=P[f(200)][f(353)]("|"),a=0;;){switch(r[a++]){case"0":var o=m[f(458)][f(433)+f(390)](P[f(752)]);continue;case"1":m[f(335)+"ap"]=v;continue;case"2":var u=[];continue;case"3":P[f(562)](l[f(662)],0)&&(l=[s.ep]);continue;case"4":var l=n[f(454)](n[f(402)](s.ep))[f(227)](function(n){return n[f(205)]})[f(227)](function(n){var e=f,t=Utils$2[e(187)+"e"](n[e(205)])[e(319)]();return p[e(492)](t,Date[e(420)]())&&u[e(231)](n),p[e(452)](t,Date[e(420)]())})[f(454)](0,5);continue;case"5":u[f(662)]&&l[f(231)](u[0]);continue;case"6":o[f(519)+"re"](v,o[f(643)]);continue;case"7":var v=Template.js(P[f(640)],{});continue;case"8":l[f(437)](function(n){for(var e=f,t=h[e(457)][e(353)]("|"),c=0;;){switch(t[c++]){case"0":var i=document[e(370)+e(291)](h[e(610)]);continue;case"1":var r=document[e(370)+e(291)](h[e(846)]);continue;case"2":h[e(691)](n,s.ep)&&i[e(381)+"d"](Timeline$1[e(186)](s[e(244)])[0]);continue;case"3":var a=Math[e(601)](h[e(259)](h[e(706)](u[e(319)](),o),h[e(173)](h[e(173)](h[e(647)](24,60),60),1e3)));continue;case"4":i[e(381)+"d"](r);continue;case"5":var o=Date[e(420)]();continue;case"6":var u=Utils$2[e(187)+"e"](n[e(205)]);continue;case"7":r[e(290)]=h[e(310)](n[e(372)+e(830)]?h[e(310)](n[e(372)+e(830)],h[e(740)]):"",h[e(202)](a,0)?h[e(310)](h[e(310)](Lang[e(503)](h[e(722)]),": "),a):n[e(424)]||Lang[e(503)](h[e(728)]));continue;case"8":i[e(516)][e(571)](h[e(497)]);continue;case"9":v[e(433)+e(390)](h[e(481)])[e(381)+"d"](i);continue}break}});continue}break}continue;case"5":continue;case"6":n[f(437)](function(n){var e=f,t=Utils$2[e(486)]([n[e(468)+e(839)],h[e(665)](n[e(468)+e(839)],10)?":":"",n[e(372)+e(830)],C[e(703)+e(612)]][e(304)]("")),t=Timeline$1[e(244)](t);t[e(210)]&&(s={ep:n,view:t})});continue}break}}),this[d(730)+d(595)]=!0);continue;case"3":if(Q[d(615)+d(362)])return;continue;case"4":var m=this;continue}break}},this[R(764)]=function(){for(var n=R,e=P[n(704)][n(353)]("|"),t=0;;){switch(e[t++]){case"0":(c[n(215)]||Timeline$1[n(572)](C))&&this[n(439)](P[n(308)]);continue;case"1":var c=Favorite[n(349)](C);continue;case"2":c[n(376)]&&this[n(439)](P[n(708)]);continue;case"3":this[n(458)][n(433)+n(390)](P[n(526)]);continue;case"4":this[n(458)][n(433)+n(390)](P[n(359)])[n(462)]="";continue;case"5":c[n(750)]&&this[n(439)](P[n(430)]);continue;case"6":c[n(285)]&&this[n(439)](P[n(311)]);continue;case"7":c[n(188)]&&this[n(439)](P[n(260)]);continue}break}},this[R(694)]=function(n,i){for(var a=R,e=P[a(461)][a(353)]("|"),t=0;;){switch(e[t++]){case"0":var r=[];continue;case"1":var o=Controller[a(620)]()[a(424)];continue;case"2":object$2[a(411)][a(437)](function(c){var n=a;s[n(507)](c[n(229)],s[n(736)])&&c[n(397)+n(183)]&&c[n(371)+n(500)]&&r[n(231)]({title:c[n(424)],subtitle:c[n(466)]||c[n(429)+"n"],onSelect:function(){var t=n;document[t(451)][t(516)][t(772)](s[t(559)])&&Search[t(544)](),!i[t(292)]&&s[t(507)](i[t(425)],s[t(644)])?(Loading[t(734)](function(){var n=t;Loading[n(480)](),Controller[n(567)](o)}),TMDB[t(547)+t(777)]({type:i[t(424)]?"tv":s[t(172)],id:i.id},function(n){var e=t;Loading[e(480)](),i[e(292)]=n,c[e(371)+e(500)](i)})):c[t(371)+t(500)](i)}})});continue;case"3":Select[a(270)]({title:Lang[a(503)](P[a(553)]),items:f,onBack:function(){Controller[a(567)](o)},onCheck:function(n){var e=a;Q[e(596)]&&(i[e(425)]=Q[e(596)][e(425)]),n[e(337)]&&(Favorite[e(567)](n[e(337)],i),h[e(764)]())},onSelect:function(n){var e=a;Q[e(596)]&&(i[e(425)]=Q[e(596)][e(425)]),n[e(690)]&&(Favorite[e(567)](n[e(337)],i),h[e(764)]()),h[e(775)+"ct"]&&h[e(775)+"ct"](n,h[e(458)],i),Controller[e(567)](o)},onDraw:function(n,e){var t=a;if(e[t(690)])for(var c=s[t(219)][t(353)]("|"),i=0;;){switch(c[i++]){case"0":n[t(445)](s[t(226)])[t(325)]();continue;case"1":n[t(838)](r);continue;case"2":r[t(838)](Template.js(s[t(554)]));continue;case"3":n.on(s[t(175)],function(){Select[t(544)]()});continue;case"4":var r=s[t(602)]($,s[t(589)]);continue}break}}});continue;case"4":var c=[{title:Lang[a(503)](P[a(263)]),where:P[a(430)],checkbox:!0,checked:u[a(750)]},{title:Lang[a(503)](P[a(443)]),where:P[a(311)],checkbox:!0,checked:u[a(285)]},{title:Lang[a(503)](P[a(295)]),where:P[a(260)],checkbox:!0,checked:u[a(188)]},{title:Lang[a(503)](P[a(818)]),where:P[a(708)],checkbox:!0,checked:u[a(376)]},{title:Lang[a(503)](P[a(203)]),where:P[a(308)],checkbox:!0,checked:u[a(215)]}];continue;case"5":var u=Favorite[a(349)](i);continue;case"6":var s={luDNV:P[a(826)],tOpcc:function(n,e){return P[a(274)](n,e)},VODpt:P[a(169)],xQpQa:P[a(508)],iQhNM:P[a(448)],hQbEb:P[a(705)],ukpPs:P[a(367)],npEiH:P[a(813)],olhBe:P[a(714)],apkQR:function(n,e){return P[a(565)](n,e)},TaySp:P[a(174)]};continue;case"7":var f=r[a(662)]?r[a(317)](c):c;continue;case"8":this[a(221)]&&this[a(221)](f,this[a(458)],i);continue;case"9":var h=this;continue;case"10":r[a(662)]&&r[a(231)]({title:Lang[a(503)](P[a(528)]),separator:!0});continue}break}},this[R(442)]=function(){for(var u,s=R,n=P[s(410)][s(353)]("|"),e=0;;){switch(n[e++]){case"0":continue;case"1":this[s(458)][s(699)+s(823)](P[s(714)],function(){var n=s;f[n(330)](typeof Trailer,f[n(608)])&&Trailer[n(575)](),v[n(701)]&&v[n(701)](v[n(458)],C)});continue;case"2":this[s(458)][s(699)+s(823)](P[s(800)],function(){var n=s;v[n(572)](),v[n(538)]&&v[n(538)](v[n(458)],C)});continue;case"3":var f={EeVzd:function(n,e){return P[s(449)](n,e)},kRtzD:P[s(805)],hIyjS:function(n,e){return P[s(642)](n,e)},bpcgV:P[s(383)],VTwID:function(n,e){return P[s(565)](n,e)},CImFl:P[s(499)],btvZQ:P[s(472)],PUnZV:function(n,e){return P[s(449)](n,e)},QwwVD:P[s(409)],jQXlD:P[s(539)],wJWpD:function(n,e){return P[s(423)](n,e)},qXrgP:function(n,e,t){return P[s(185)](n,e,t)},VGNAO:function(n){return P[s(634)](n)},nlakb:P[s(369)],jKAdO:function(n,e){return P[s(294)](n,e)},BGkud:function(n,e){return P[s(664)](n,e)},qpnYQ:function(n,e){return P[s(841)](n,e)},NsifZ:P[s(206)]};continue;case"4":this[s(179)]();continue;case"5":var h=0;continue;case"6":this[s(458)][s(699)+s(823)](P[s(815)],P[s(759)](_asyncToGenerator,P[s(181)](_regeneratorRuntime)[s(829)](function n(){var t=s;return P[t(247)](_regeneratorRuntime)[t(351)](function(n){for(var e=t;;)switch(n[e(563)]=n[e(638)]){case 0:v[e(572)](),v[e(399)]&&v[e(399)](v[e(458)],C);case 2:case f[e(524)]:return n[e(480)]()}},n)})));continue;case"7":this[s(458)][s(699)+s(823)](P[s(361)],P[s(345)](_asyncToGenerator,P[s(475)](_regeneratorRuntime)[s(829)](function n(){var t,c,i,r,a=s,o={XffPY:function(n,e){return P[_0x23f6(841)](n,e)},GDMsk:P[a(518)],XTQyk:function(n,e){return P[a(242)](n,e)},nZEcJ:P[a(369)],YilTS:function(n){return P[a(768)](n)}};return P[a(247)](_regeneratorRuntime)[a(351)](function(n){for(var e=a;;)switch(n[e(563)]=n[e(638)]){case 0:v[e(572)](),Trailer[e(575)](),f[e(509)](clearTimeout,u),t=Storage[e(280)](f[e(364)]),i=f[e(506)]($,f[e(840)])[e(637)](f[e(427)]),c=f[e(190)](Storage[e(280)](f[e(195)]),f[e(474)]),i=f[e(266)](i,c),f[e(266)](t,!i)&&Q[e(344)]&&Q[e(465)]&&(r=++h,u=f[e(657)](setTimeout,f[e(509)](_asyncToGenerator,f[e(793)](_regeneratorRuntime)[e(829)](function n(){var t,c=e,i={XOZCg:function(n,e){return o[_0x23f6(594)](n,e)},KwZPI:o[c(569)],GWILY:function(n,e){return o[c(594)](n,e)},IQzZV:function(n,e){return o[c(806)](n,e)},dJpsw:o[c(336)]};return o[c(825)](_regeneratorRuntime)[c(351)](function(n){for(var e=c;;)switch(n[e(563)]=n[e(638)]){case 0:if(i[e(684)](r,h))return n[e(585)](i[e(533)]);n[e(638)]=2;break;case 2:return n[e(638)]=4,Trailer[e(812)](C);case 4:if(t=n[e(484)]){if(i[e(676)](r,h))return n[e(585)](i[e(533)]);n[e(638)]=8}else n[e(638)]=11;break;case 8:Trailer[e(575)](),Trailer[e(543)](t,i[e(338)]($,v[e(458)])),l=v[e(458)];case 11:case i[e(757)]:return n[e(480)]()}},n)})),200)),v[e(436)]&&v[e(436)](v[e(458)],C);case 9:case f[e(524)]:return n[e(480)]()}},n)})));continue;case"8":this[s(458)][s(699)+s(823)](P[s(245)],function(){var n=s;v[n(694)]&&v[n(694)](v[n(458)],C)});continue;case"9":Storage[s(584)][s(808)](P[s(600)],function(n){var e=s;f[e(251)](n[e(424)],f[e(258)])&&v[e(514)]()});continue;case"10":this[s(458)][s(699)+s(823)](P[s(239)],function(){var n=s;f[n(747)](clearTimeout,u),f[n(201)](l,v[n(458)])&&(Trailer[n(575)](),l=null),h++});continue;case"11":var l=null;continue;case"12":this[s(807)]();continue;case"13":var v=this;continue}break}},this[R(514)]=function(){for(var n,e,t,c=R,i=P[c(248)][c(353)]("|"),r=0;;){switch(i[r++]){case"0":var a=Storage[c(280)](P[c(805)]);continue;case"1":continue;case"2":P[c(265)](a,P[c(350)])?(n=P[c(738)],e=P[c(350)],t=P[c(350)]):P[c(664)](a,P[c(283)])?(n=P[c(180)],e=P[c(283)],t=P[c(283)]):P[c(161)](a,P[c(300)])&&(n=P[c(656)],e=P[c(300)],t=P[c(300)]);continue;case"3":this[c(675)]&&this[c(675)](this[c(458)],C);continue;case"4":this[c(165)]();continue;case"5":o=Q[c(465)]&&C[c(456)+c(357)]||Q[c(557)+c(307)]&&C[c(456)+c(357)]||Q[c(615)+c(362)]&&C[c(456)+c(357)]?Api[c(373)](C[c(456)+c(357)],n):C[c(400)+"h"]?Api[c(373)](C[c(400)+"h"],e):C[c(377)]?Api[c(373)](C[c(377)],e):C[c(236)+"th"]?Api[c(373)](C[c(236)+"th"],t):C[c(360)]?C[c(360)]:C[c(373)]?C[c(373)]:P[c(799)];continue;case"6":ImageCache[c(306)](this[c(373)],o);continue;case"7":var o="";continue}break}},this[R(575)]=function(){for(var n=R,e=P[n(502)][n(353)]("|"),t=0;;){switch(e[t++]){case"0":this[n(373)][n(415)]=function(){};continue;case"1":this[n(373)][n(651)]="";continue;case"2":this[n(373)][n(232)]=function(){};continue;case"3":this[n(458)]=null;continue;case"4":this[n(373)]=null;continue;case"5":P[n(471)](W,this[n(458)]);continue}break}},this[R(186)]=function(n){var e=R;return n?this[e(458)]:P[e(642)]($,this[e(458)])}}function _0x23f6(n,e){var t=_0x1e24();return(_0x23f6=function(n,e){return t[n-=149]})(n,e)}function _0x1e24(){var n=["sAeSG","LgmoB","high","toggle","LTECv","GDMsk","usFQE","add","watched","1|0|2|4|3","toFixed","destroy","vlLdE","4K🔥","full_episo","WteEi","OmlGH","rip","3|0|4|1|5|","ckbox","listener","abrupt",".org/?toke","extend","card__qual","TaySp","NtkrL","--medium","zRfZC","cquFW","XffPY","ecked","object","RLiGe","hed__body","write","HZgmo","ceil","apkQR","aedJx","hngpc","6|7|8|2|5|","ched_last","kvXul","NsifZ","AfMtb","pKXvK","GczWP","itle","card_episo","w300","card_conti","QBDsb","wSCiY","div","2|5|6|0|1|","enabled","ity--top","ame","WEB-DL","style","vEgnA","OQwWG","-item__che","SOyPc","7|0|1|2|5|","poster_tra","AXaUI","yVqXE","kinopoisk_","gZTOD","SpzPC","arais","hasClass","next","1|6","sgzLs","HtKgh","YZFRf","firstChild","VODpt","map","uFequ","ejCvT","mxpgT","title_look","5|0|3|2|4|","src","ity--mediu","1|2|4|0|3","7940616tOkYoy","span","dTMuI","qXrgP","change","de_days_le","hed","auZer","length","QlWlW","vonaM","SkCQu","rer","59e505c343","evbsc","QoYZS","catch","iler","title_book","2|0|8|7|4|","3|4|0|2|1","onVisible","GWILY","ajTNu","10|6|12|4|","bnBOd","RDQhW","3|13|4|0|1","yZAJr","WEB-DLRIP","XOZCg","video","ection","1|4|2|7","PIAwA","ratyC","collect","tcLHU","LBEyM","mJqvD","onMenu","size","hover:ente","cover","WoVFH","addEventLi","MesDb","onEnter","release_da","original_t","uWZjY","nKgYi","qCBBd","|0|11","mnKTi","|2|6|1|8|1","urzML","JrdHa","orer","SxHzM","tOHDv","iuHCG","noload","JMFQL","card_quali","then","ion","parse","XBSss","vote_avera","eUkbh","wJkjN","o-title","des","PLxPF","Title","watched_ch","quality_ts","3|4","promo","start","nhpig","iQhNM","noname","NIqCU","card--cont","iDZmB","card--smal","hover:long","8|1|0|6","DlVJC","card__prom","</span>","jKAdO","em_seeds","KRaVR","book","secondsToT","wGFhL","MOV","AYtkO","search","c2063edc97","dJpsw","OPYUk","mUlNy","w780","imeHuman","mqGfH","Waxbe","favorite","IoHJm","xRhqs","drip","NzTIS","card-watch","UIidO","720p","contains","includes","KZOuT","onMenuSele",".card__ico","mdb_id","1323ZcuPUI","em_grabs","WEBRIP",".card-watc","eYAHC","GwlKe","nTnxI","pgfci"," - ","first_air_","2|4|1|3|0","original","string","0000","6140fcAawH","VGNAO","isArray","season","FrkUD","TvcFO","BlCIj","zXpIR","luint","original_n","DuWtc","rUZoN","ies","UnyUX","XTQyk","image","follow","fxlNA","i.apbugall","QOQwl","get","NVpDp",".card__qua","dxSMv","pzICa","card--expl","HCLTs","trim","bMIRQ","menu_histo","inue","stener","UuSiC","YilTS","ibIMU",".card__age","xvKjQ","mark","mber","log","0|3|13|1|1","Qdhwu","space","--low","EBFZO","w200","append","ber","CImFl","DnnBD","RtXnp","--high","torrent_it","KPVKY","ZTsFn","SAPay","title","WBekI","mCUYB","OgxXW","0|5|1|2|4|","return","card_parse","sesIR","ker","&imdb=","IAVkf","cXrWT","mAAcY","online_wat","DVDRIP","update","WSryv","DVB","EUJNv","grwPm","end","more","xQpQa","LuAAV","xwRVt","olhBe","0|4|1|2|3","HDTV","CYKkO","build","hWzhy","hznmd","<div class","enu","bind","IuTDl","render","parseToDat","like","hIxKI","PUnZV","hover:blur","YlIqy","JEdbO","EbtlV","QwwVD","WXmzp","DVftt","tmdb","news-cards","tQnoE","BGkud","SfQzf","RFTGL",".card__mar","air_date","UPLBC","ldRxQ","quality_ip","3|6|5|1|9","percent","smJyk","KClDX","status","CkdoF","history","bXhvA","interface_","fqtLb","hQbEb","icon--","onMenuShow","OWLKe","XnjVs","quality_hd","wtkRl","ukpPs","filter","broken.svg","type","card__type","push","onerror","9195955ERwxOv","tYarR","ecaju","profile_pa","0|1|6|5|3|",".card__ser","ujTAx","success","MIFvC","xyTJC","GfVvP","view","DPjfY","time","xZirI","AblCI","MOCMz","2|4|3|5|7|","EeVzd","tvrip","yTyPi","1080p","release_ye","sRVxg","wFqag","kRtzD","FyCBB","HFQKS","GTNvU","4|2|10|7|8","nXFDX","GKxeL","PDdKN","wJWpD","CVZdQ","BCWDB","&kp=","show","VQabw","684962hnJWEH","3zSdFjM","qCMlX","BAjET","7|2|0",'="selectbo',"episode","irDTn","field","undefined","IsQYZ","lsgCH","search--op","look","media_type","pEzqe","HzAhD","hover:touc","innerText","ent","imdb_id","value","dWWoZ","vkALD","1|8|2|5|9|","card--load","title_wath","UDlsj","DudMs","Wkcsq","2|0|1|5|3|","data","join","11349TEtaIn","read","ction","WyyBg","er__title","NEXKA","ExFtx","w500","title_view","n=d3174413","card--coll","seasons","concat","mluMA","getTime","Peers","rIMZN","oXCeT","MlFUI","OowIC","remove","uarex","Kvjwb","card--cate","ZRmpJ","qpnYQ","medium","WpvRj","quality_dv","done","watched_wr","nZEcJ","where","IQzZV",'ck"></div>',"ufuDp","isparser","card_watch","spkbk","card_small","Hkghr","number_of_","wuoQv","qhJhd","check","Wtweg","wrap","DNavg","split","lmtne","jLFSL","8|4|7|2|9","ath","...","KiUwT","poster","rPbAA","nue","SkwqR","bpcgV","w1280","card_data","ovKXE","taJkJ","qnxjR","createElem","onContextL","episode_nu","img","|5|9|4|2|6","tv_shows_n","wath","logos_path","card--wide","DGNvs","qkGZQ","appendChil","o-text","FoMzM","YlUha","./img/img_","KAGTS","nvhOG","QrzJZ","ory","tor","4|1|0|3",".card__vie","episodes","yvOVc","x-item__lo","contentTyp","onContextM","ity--low","onHover","poster_pat","card__vote","indexOf","icon_lock","QafMj","gory","9868hyrkWO","3|8|5|0|6|","card--movi","DISMX","PQRaE","plugins","teEFa",".selectbox","lity","onload",".card__tit","quality","hover:focu","nHtnf","now","wUges","top","kupRI","name","source","sjGmq","btvZQ","XDJEj","descriptio","GbSXb","title_like","movie","querySelec","LYhVB","er__size","onFocus","forEach","iPaCA","addicon","ity--high","pQpox","create","dEQhh","GVJYu","find","focus","Nppnv","OsEKo","JFbwT","poster_siz","body","XWWQP","hover:hove","slice","card_categ","backdrop_p","DRoou","card","6|9|1|5|0|","vUcLA","NeDpB","innerHTML","6|4|3","BDRIP","card_wide","subtitle","ity","season_num",": <span>",".card__img","kjEZc","HpMqw","7663033GSBxjL","jQXlD","LWCxq","RRAJi","bQtmo","HDTVRIP","ed__item","stop","HhBws","light_vers","BjnPt","sent","ns-inner","hash","title_acti","LJcmO","NqNSK","date","broken","uZtGq","4|2|0|1|3","fail","HDRIP","card__icon","ZCZJw","IPTVRIP","tGIJw","auch","yZzwB","XyLhB","translate","Wicay","pAqBk","VTwID","tOpcc","lWRPs","hIyjS","8|10|7|3|1","toUpperCas","Seeders","OwWYx","visible","OariT","classList","ASpmi","vaCKe","insertBefo","mdIfl","card_explo","1|5|9|7|10","promo_titl","nlakb","908424ZTHXGj","bZzWZ","1|4|0|3|2","QWsJI","xEjwI","ahqqm","card--tv","bayHj","KwZPI",".card-pars","UqVSs","https://ap","oCaKP","onTouch","jLALS","dataset","kVjGR","er__detail","play","close","IMmBo","4|2|1|3|0","external_i","tuhwB","vIbal","dHQWV","xykZD","1|3|4|5|6|","YoAPQ","npEiH","Img","PjPpm","card_colle","avbzD","luDNV","ZjWlb","IzwxH","ffjhJ","prev"];return(_0x1e24=function(){return n})()}!function(){for(var n=_0x23f6,e=_0x1e24();;)try{if(941627==-parseInt(n(273))*(-parseInt(n(272))/2)+-parseInt(n(778))/3*(-parseInt(n(406))/4)+parseInt(n(233))/5+-parseInt(n(525))/6+-parseInt(n(473))/7+-parseInt(n(654))/8+-parseInt(n(305))/9*(parseInt(n(792))/10))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();

  function create$n() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var card = Template.js('more');
    card.querySelector('.card-more__title').innerText = Lang.translate('more');
    if (params.card_small) {
      card.classList.add('card-more--small');
    }
    this.create = function () {
      var _this = this;
      card.addEventListener('hover:focus', function (e) {
        _this.onFocus(e.target);
      });
      card.addEventListener('hover:enter', function (e) {
        _this.onEnter(e.target);
      });
    };
    this.render = function (js) {
      return js ? card : $(card);
    };
    this.destroy = function () {
      card.remove();
      card = null;
    };
  }

  function create$m() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var card = Template.js('back');
    card.querySelector('.card-back__title').innerText = Lang.translate('back_to_start');
    if (params.card_small) {
      card.classList.add('card-back--small');
    }
    this.create = function () {
      var _this = this;
      card.addEventListener('hover:focus', function (e) {
        _this.onFocus(e.target);
      });
      card.addEventListener('hover:enter', function (e) {
        _this.onEnter(e.target);
      });
    };
    this.render = function (js) {
      return js ? card : $(card);
    };
    this.destroy = function () {
      card.remove();
      card = null;
    };
  }

  function create$l(data) {
    var _this = this;
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var content = Template.js('items_line', {
      title: data.title
    });
    var body = content.querySelector('.items-line__body');
    var scroll = new create$f({
      horizontal: true,
      step: params.card_wide ? 600 : 300
    });
    var items = [];
    var active = 0;
    var tv = Platform.screen('tv');
    var view = (tv ? Prisma.Storage.field('interface_size') == 'small' ? 7 : 6 : 12) + (params.align_left ? 4 : 0);
    var more;
    var back;
    var last;
    var onmore = function onmore() {
      if (_this.onEnter) _this.onEnter();
      if (data.onMore) data.onMore(data);else if (_this.onMore) {
        _this.onMore(data);
      } else {
        Activity$1.push({
          url: data.url,
          title: data.title || Lang.translate('title_category'),
          component: 'category_full',
          page: 1,
          genres: params.genres,
          filter: data.filter,
          source: data.source || params.object.source
        });
      }
    };
    this.event = function (type) {
      Prisma.Listener.send('line', {
        line: this,
        type: type,
        params: params,
        data: data,
        scroll: scroll,
        body: body,
        items: items,
        active: active
      });
    };
    this.create = function () {
      var _this2 = this;
      this.event('create');
      scroll.body(true).classList.add('items-cards');
      content.querySelector('.items-line__title').innerHTML = data.title;
      content.classList.add('items-line--type-' + (params.type || 'none'));
      content.addEventListener('visible', this.visible.bind(this));
      data.results.slice(0, view).forEach(this.append.bind(this));
      body.appendChild(scroll.render(true));
      scroll.onWheel = function (step) {
        if (!Controller.own(_this2)) _this2.toggle();
        Controller.enabled().controller[step > 0 ? 'right' : 'left']();
      };
      scroll.onScroll = this.attach.bind(this);
    };

    /* 
    События
    
    this.onAppend    = function(){}
    this.onFocus     = function(){}
    this.onEnter     = function(){}
    this.onSelect    = function(){}
    this.onMore      = function(){}
    this.onFocusMore = function(){}
    this.onLeft      = function(){}
    this.onBack      = function(){}
    this.onDown      = function(){}
    this.onUp        = function(){}
    */

    this.visible = function () {
      var _this3 = this;
      data.results.slice(0, view).forEach(this.append.bind(this));
      if ((data.results.length >= 20 || data.more) && !params.nomore) {
        // Добавляем кнопку "Вернуться назад"
        var backButton = document.createElement('div');
        backButton.classList.add('items-line__back');
        backButton.classList.add('selector');
        backButton.innerText = Lang.translate('back_to_start');
        backButton.addEventListener('hover:enter', function () {
          // Сбрасываем позицию к первой карточке
          active = 0;

          // Обновляем скролл к первой карточке
          if (items.length > 0) {
            scroll.update(items[0].render(true), params.align_left ? false : true);

            // Фокусируемся на первой карточке если контроллер активен
            if (Controller.own(_this3)) {
              Controller.collectionFocus(items[0].render(true), scroll.render(true));
            }
            last = items[0].render(true);

            // Вызываем событие фокуса для первой карточки
            if (_this3.onFocus && items[0]) {
              _this3.onFocus(items[0].data || {});
            }
          }
        });

        // Создаем контейнер для кнопок
        var buttonsContainer = document.createElement('div');
        buttonsContainer.classList.add('items-line__buttons');
        buttonsContainer.appendChild(backButton);
        var button = document.createElement('div');
        button.classList.add('items-line__more');
        button.classList.add('selector');
        button.innerText = Lang.translate('more');
        button.addEventListener('hover:enter', onmore);
        buttonsContainer.appendChild(button);
        content.querySelector('.items-line__head').appendChild(buttonsContainer);
      }
      this.event('visible');
      Layer.visible(scroll.render(true));
    };
    this.append = function (element) {
      var _this4 = this;
      if (element.ready) return;
      element.ready = true;
      var card = params.cardClass ? params.cardClass(element, params) : element.cardClass ? element.cardClass(element, params) : new Card(element, params);
      card.create();
      card.onFocus = function (target, card_data) {
        last = target;
        var prev_active = active;
        active = items.indexOf(card);
        if (active > 0 || prev_active > active) scroll.update(items[active].render(true), params.align_left ? false : true);
        if (!data.noimage) Background.change(Utils$2.cardImgBackground(card_data));
        if (_this4.onFocus) _this4.onFocus(card_data);
      };
      card.onEnter = function (target, card_data) {
        last = target;
        if (_this4.onEnter) _this4.onEnter(target, card_data);
        if (_this4.onSelect) return _this4.onSelect(target, card_data);
        if (!card_data.source) card_data.source = params.object.source;

        // Очищаем трейлер при переходе к другому фильму
        if (typeof window.clearTrailer === 'function') {
          window.clearTrailer();
        }
        if (typeof card_data.gender !== 'undefined') {
          Activity$1.push({
            url: card_data.url,
            title: Lang.translate('title_person'),
            component: 'actor',
            id: card_data.id,
            source: card_data.source || params.object.source
          });
        } else {
          Activity$1.push({
            url: card_data.url,
            component: 'full',
            id: card_data.id,
            method: card_data.name ? 'tv' : 'movie',
            card: card_data,
            source: card_data.source || params.object.source
          });
        }
      };
      card.onHover = function (target, card_data) {
        if (_this4.onHover) _this4.onHover(card_data);
      };
      card.onVisible = function () {
        if (Controller.own(_this4)) Controller.collectionAppend(card.render(true));
      };
      if (this.onMenu) card.onMenu = this.onMenu;
      if (params.card_events) {
        for (var i in params.card_events) {
          card[i] = params.card_events[i];
        }
      }
      scroll.append(card.render(true));
      items.push(card);
      if (this.onAppend) this.onAppend(card);
      this.event('append');
      return card.render(true);
    };
    this.more = function () {
      var _this5 = this;
      more = new create$n(params);
      more.create();
      more.onFocus = function (target) {
        last = target;
        active = items.indexOf(more);
        scroll.update(more.render(true), params.align_left ? false : true);
        if (_this5.onFocusMore) _this5.onFocusMore();
      };
      more.onEnter = onmore.bind(this);
      scroll.append(more.render(true));
      items.push(more);
      return more.render(true);
    };
    this.back = function () {
      var _this6 = this;
      back = new create$m(params);
      back.create();
      back.onFocus = function (target) {
        last = target;
        active = items.indexOf(back);
        scroll.update(back.render(true), params.align_left ? false : true);
        if (_this6.onFocusBack) _this6.onFocusBack();
      };
      back.onEnter = function () {
        active = 0;
        scroll.update(items[0].render(true), params.align_left ? false : true);
        if (Controller.own(_this6)) Controller.collectionFocus(items[0].render(true), scroll.render(true));
      };
      scroll.append(back.render(true));
      items.push(back);
      return back.render(true);
    };
    this.attach = function () {
      var size = tv ? (Math.round(active / view) + 1) * view + 1 : data.results.length;
      data.results.slice(0, size).filter(function (e) {
        return !e.ready;
      }).forEach(this.append.bind(this));
      if (!more && !params.nomore && data.results.length == data.results.filter(function (e) {
        return e.ready;
      }).length && data.results.length >= 20) {
        var back_item = this.back();
        var more_item = this.more();
        if (Controller.own(this)) {
          Controller.collectionAppend(back_item);
          Controller.collectionAppend(more_item);
        }
      }
      Layer.visible(scroll.render(true));
    };
    this.toggle = function () {
      var _this7 = this;
      Controller.add('items_line', {
        link: this,
        toggle: function toggle() {
          Controller.collectionSet(scroll.render(true));
          Controller.collectionFocus(items.length ? last : false, scroll.render(true));
          if (_this7.onToggle) _this7.onToggle(_this7);
          _this7.event('toggle');
        },
        update: function update() {},
        right: function right() {
          Navigator.move('right');
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else if (_this7.onLeft) _this7.onLeft();else Controller.toggle('menu');
        },
        down: this.onDown,
        up: this.onUp,
        gone: function gone() {},
        back: this.onBack
      });
      Controller.toggle('items_line');
    };
    this.render = function (js) {
      return js ? content : $(content);
    };
    this.destroy = function () {
      Arrays.destroy(items);
      scroll.destroy();
      content.remove();
      items = null;
      this.event('destroy');
    };
  }

  function create$k(source) {
    var timer,
      html = $('<div></div>'),
      items = [],
      active = 0,
      query;
    var source_name = 'search_' + source.title.toLowerCase();
    this.listener = start$8();
    this.params = source.params;
    this.create = function () {
      this.empty();
    };
    this.recall = function (last_query) {
      var _this = this;
      Cache.getData('other', source_name + '_' + (last_query || 'last'), 60 * 24).then(function (data) {
        _this.clear();
        html.empty();
        data.forEach(_this.build.bind(_this));
        _this.listener.send('finded', {
          count: _this.count(data),
          data: data
        });
      })["catch"](function () {});
    };
    this.empty = function () {
      html.empty().append($('<div class="search-looking"><div class="search-looking__text">' + Lang.translate(query ? source.params.nofound || 'search_nofound' : source.params.start_typing || 'search_start_typing') + '</div></div>'));
    };
    this.loading = function () {
      this.listener.send('start');
      html.empty().append($('<div><div class="broadcast__text">' + Lang.translate('search_searching') + '</div><div class="broadcast__scan"><div></div></div></div>'));
    };
    this.cancel = function () {
      clearTimeout(timer);
      if (source.onCancel) source.onCancel();
    };
    this.search = function (value, immediately) {
      var _this2 = this;
      clearTimeout(timer);
      if (value.length >= 3) {
        timer = setTimeout(function () {
          if (query == value) return;
          query = value;
          _this2.loading();
          source.search({
            query: encodeURIComponent(value)
          }, function (data) {
            _this2.clear();
            _this2.dmca(data);
            var count = _this2.count(data);
            if (count > 0) {
              html.empty();
              var copy = Arrays.clone(data);
              Cache.rewriteData('other', source_name + '_' + value, copy)["catch"](function () {});
              Cache.rewriteData('other', source_name + '_last', copy)["catch"](function () {});
              data.forEach(_this2.build.bind(_this2));
            } else _this2.empty();
            _this2.listener.send('finded', {
              count: count,
              data: data
            });
          });
        }, immediately ? 10 : 2500);
      } else {
        query = value;
        this.clear();
        if (!value) this.recall('');
      }
    };
    this.count = function (result) {
      var count = 0;
      result.forEach(function (data) {
        count += data.results.length;
      });
      return count;
    };
    this.dmca = function (result) {
      if (Arrays.isArray(window.prisma_settings.dcma)) {
        result.forEach(function (data) {
          data.results = data.results.filter(function (item) {
            return !window.prisma_settings.dcma.find(function (b) {
              return b.id == item.id && b.cat == (item.name ? 'tv' : 'movie');
            });
          });
        });
      }
    };
    this.build = function (data) {
      var _this3 = this;
      data.noimage = true;
      source.params.card_view = 6;
      if (Arrays.isArray(window.prisma_settings.dcma)) {
        data.results = data.results.filter(function (item) {
          return !window.prisma_settings.dcma.find(function (b) {
            return b.id == item.id && b.cat == (item.name ? 'tv' : 'movie');
          });
        });
      }
      var line = new create$l(data, source.params);
      line.onDown = this.down.bind(this);
      line.onUp = this.up.bind(this);
      line.onBack = this.back.bind(this);
      line.onLeft = function () {};
      line.onMore = function () {
        if (source.onMore) source.onMore({
          data: data,
          line: line,
          query: query
        }, function () {
          _this3.listener.send('select');
        });
      };
      if (source.onSelect) {
        line.onSelect = function (e, element) {
          source.onSelect({
            data: data,
            line: line,
            query: query,
            element: element
          }, function () {
            _this3.listener.send('select');
          });
        };
      } else {
        line.onEnter = function () {
          _this3.listener.send('select');
        };
      }
      if (source.onRender) source.onRender(line);
      if (source.onAppend) line.onAppend = source.onAppend;
      line.create();
      items.push(line);
      html.append(line.render());
    };
    this.any = function () {
      return items.length;
    };
    this.back = function () {
      this.listener.send('back');
    };
    this.down = function () {
      active++;
      active = Math.min(active, items.length - 1);
      items[active].toggle();
      this.listener.send('toggle', {
        element: items[active].render()
      });
    };
    this.up = function () {
      active--;
      if (active < 0) this.listener.send('up');
      if (active < 0) {
        active = 0;
      } else {
        items[active].toggle();
        this.listener.send('toggle', {
          element: items[active].render()
        });
      }
    };
    this.clear = function () {
      this.empty();
      active = 0;
      Arrays.destroy(items);
      items = [];
      this.listener.send('clear');
    };
    this.toggle = function () {
      var _this4 = this;
      Controller.add('search_results', {
        invisible: true,
        toggle: function toggle() {
          Controller.collectionSet(html);
          if (items.length) {
            items[active].toggle();
            _this4.listener.send('toggle', {
              element: items[active].render()
            });
          }
        },
        back: function back() {
          _this4.listener.send('back');
        }
      });
      Controller.toggle('search_results');
    };
    this.render = function () {
      return html;
    };
    this.destroy = function () {
      clearTimeout(timer);
      this.clear();
      this.listener.destroy();
    };
  }

  var stop_keys = ['пор', 'порн', 'порно', 'секс', 'член', 'por', 'porn', 'porno', 'sex', 'hot', 'xxx'];
  function create$j() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var scroll,
      last,
      active,
      last_query = '';
    var html = $('<div></div>'),
      results = [];
    this.listener = start$8();
    this.create = function () {
      scroll = new create$f({
        over: true,
        mask: false,
        horizontal: true
      });
      var sources = params.sources || Api.availableDiscovery();
      sources.forEach(this.build.bind(this));
      if (!params.sources) {
        params.additional.forEach(this.build.bind(this));
      }
      this.enable(results[0]);
      if (results.length < 2) {
        scroll.render().addClass('hide');
        html.addClass('search__results-offset');
      }
      results.forEach(function (source) {
        source.recall(last_query);
      });
    };
    this.enable = function (result) {
      if (active) active.render().detach();
      active = result;
      if (active.params.lazy && last_query) active.search(last_query, true);
      html.empty().append(result.render());
      scroll.render().find('.search-source').removeClass('active').eq(results.indexOf(result)).addClass('active');
      Layer.visible(result.render());
    };
    this.build = function (source) {
      var _this = this;
      var tab = $('<div class="search-source selector"><div class="search-source__tab">' + source.title + '</div><div class="search-source__count">0</div></div>');
      var result = new create$k(source);
      result.create();
      if (source.params.lazy) tab.find('.search-source__count').remove();
      result.listener.follow('start', function () {
        tab.addClass('search-source--loading');
        tab.find('.search-source__count').html('&nbsp;');
      });
      result.listener.follow('clear', function () {
        tab.find('.search-source__count').text(0);
      });
      result.listener.follow('finded', function (e) {
        tab.removeClass('search-source--loading');
        tab.find('.search-source__count').text(e.count);
        if (active == result) Layer.visible(result.render());
        _this.listener.send('finded', {
          source: source,
          result: result,
          count: e.count,
          data: e.data
        });
      });
      result.listener.follow('up', function (e) {
        if (results.length < 2) _this.listener.send('up');else _this.toggle();
      });
      result.listener.follow('select', this.listener.send.bind(this.listener, 'select'));
      result.listener.follow('back', this.listener.send.bind(this.listener, 'back'));
      result.listener.follow('toggle', function (e) {
        _this.listener.send('toggle', {
          source: source,
          result: e.result,
          element: e.element
        });
      });
      tab.on('hover:enter', function () {
        _this.enable(result);
      }).on('hover:focus', function (e) {
        last = e.target;
        scroll.update($(e.target));
      });
      scroll.append(tab);
      results.push(result);
      this.listener.send('create', {
        source: source,
        result: result
      });
    };
    this.toggle = function (from_search) {
      var _this2 = this;
      Controller.add('search_sources', {
        toggle: function toggle() {
          Controller.collectionSet(scroll.render());
          Controller.collectionFocus(last, scroll.render());
          if (from_search && results.length < 2 && active.any()) active.toggle();
        },
        update: function update() {},
        up: function up() {
          _this2.listener.send('up');
        },
        down: function down() {
          if (active.any()) active.toggle();
        },
        right: function right() {
          Navigator.move('right');
        },
        left: function left() {
          Navigator.move('left');
        },
        back: function back() {
          _this2.listener.send('back');
        }
      });
      Controller.toggle('search_sources');
    };
    this.search = function (query, immediately) {
      results.forEach(function (result) {
        return result.cancel();
      });
      if (!stop_keys.find(function (k) {
        return k == query.toLowerCase();
      })) {
        last_query = query;
        this.listener.send('search', {
          query: query,
          immediately: immediately
        });
        results.forEach(function (result) {
          if (!result.params.lazy || active === result) result.search(query, immediately);
        });
      }
    };
    this.cancel = function () {
      results.forEach(function (result) {
        return result.cancel();
      });
    };
    this.tabs = function () {
      return scroll.render();
    };
    this.render = function () {
      return html;
    };
    this.destroy = function () {
      scroll.destroy();
      results.forEach(function (result) {
        return result.cancel();
      });
      this.listener.destroy();
    };
  }

  function create$i() {
    var scroll,
      last,
      keys = [];
    this.listener = start$8();
    this.create = function () {
      var _this = this;
      scroll = new create$f({
        over: true,
        mask: false,
        horizontal: true
      });
      scroll.onWheel = function (step) {
        _this.toggle();
        Controller.enabled().controller[step > 0 ? 'right' : 'left']();
      };
      scroll.onScroll = function (step) {};
      keys = Storage.get('search_history', '[]');
      keys.map(function (v) {
        return v;
      }).reverse().slice(0, 15).forEach(function (key) {
        _this.append(key);
      });
      if (!keys.length) scroll.append($('<div class="selector search-history-empty">' + Lang.translate('search_empty') + '</div>'));
    };
    this.append = function (value) {
      var _this2 = this;
      var key = $('<div class="search-history-key selector"><div><span>' + value + '</span></div></div>');
      key.on('hover:enter', function () {
        _this2.listener.send('enter', {
          value: value
        });
      }).on('hover:focus', function (e) {
        last = e.target;
        scroll.update($(e.target), true);
      }).on('hover:long', function () {
        var selc = scroll.render().find('.selector');
        Arrays.remove(keys, value);
        Storage.set('search_history', keys);
        Storage.remove('search_history', value);
        var index = selc.index(key);
        if (index > 0) last = selc.eq(index - 1)[0];else if (selc[index + 1]) last = selc.eq(index + 1)[0];
        key.remove();
        if (selc.length - 1 <= 0) last = false;
        Controller.collectionFocus(last, scroll.render());
      });
      scroll.append(key);
    };
    this.add = function (value) {
      var inx = keys.indexOf(value);
      if (inx == -1) {
        keys.push(value);
      } else {
        Arrays.remove(keys, value);
        keys.push(value);
      }
      Storage.set('search_history', keys);
    };
    this.toggle = function () {
      var _this3 = this;
      Controller.add('search_history', {
        toggle: function toggle() {
          Controller.collectionSet(scroll.render());
          Controller.collectionFocus(last, scroll.render());
        },
        update: function update() {},
        up: function up() {
          _this3.listener.send('up');
        },
        down: function down() {
          _this3.listener.send('down');
        },
        right: function right() {
          Navigator.move('right');
        },
        back: function back() {
          _this3.listener.send('back');
        },
        left: function left() {
          Navigator.move('left');
        }
      });
      Controller.toggle('search_history');
    };
    this.any = function () {
      return keys.length;
    };
    this.render = function () {
      return scroll.render();
    };
    this.destroy = function () {
      scroll.destroy();
      this.listener.destroy();
      keys = null;
      last = null;
    };
  }

  function HeadBackward (title, use_js) {
    var head = Template[use_js ? 'js' : 'get']('head_backward', {
      title: title
    });
    if (use_js) {
      head.querySelector('.head-backward__button').addEventListener('click', function () {
        Controller.back();
      });
      head.querySelector('.head-backward__title').innerText = title;
    } else {
      head.find('.head-backward__button').on('click', function () {
        Controller.back();
      });
    }
    return head;
  }

  var html$h = $('<div class="main-search"></div>'),
    search$2,
    history,
    sources$1,
    keyboard$1,
    scroll$1,
    input$1 = '',
    params$1 = {},
    additional = [],
    listener$c = start$8();
  function open$4() {
    var use_params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    params$1 = use_params;
    input$1 = use_params.input || '';
    $('body').toggleClass('ambience--enable', true);
    $('body').toggleClass('search--open', true);
    create$h();
    toggle$7();
    Layer.update(html$h[0]);
    listener$c.send('open');
  }
  function toggle$7() {
    Controller.add('search', {
      invisible: true,
      toggle: function toggle() {
        keyboard$1.toggle();
      },
      update: function update() {},
      back: destroy$8
    });
    Controller.toggle('search');
  }
  function scrollTo(element) {
    scroll$1.update(element ? element : search$2.find('.search__input'), true);
  }
  function create$h() {
    search$2 = Template.get('search');
    scroll$1 = new create$f({
      step: 300
    });
    scroll$1.height();
    scroll$1.render().addClass('search');
    scroll$1.append(HeadBackward(Lang.translate('search')));
    scroll$1.append(search$2);
    html$h.append(scroll$1.render());
    scroll$1.onScroll = function (step) {
      Layer.visible(scroll$1.render(true));
    };
    if (Storage.field('keyboard_type') !== 'prisma') search$2.find('.search__input').hide();
    createKeyboard();
    createHistory();
    createSources();
    keyboard$1.value(input$1);
    sources$1.search(input$1, true);
  }
  function createSources() {
    sources$1 = new create$j({
      sources: params$1.sources,
      additional: additional
    });
    listener$c.send('sources', {
      sources: sources$1
    });
    sources$1.create();
    sources$1.listener.follow('back', destroy$8);
    sources$1.listener.follow('up', function () {
      if (history.any()) history.toggle();else keyboard$1.toggle();
      scrollTo();
    });
    sources$1.listener.follow('toggle', function (e) {
      scrollTo(e.element);
    });
    sources$1.listener.follow('select', function (e) {
      if (input$1) history.add(input$1);
      destroy$8();
    });
    search$2.find('.search__sources').append(sources$1.tabs());
    search$2.find('.search__results').append(sources$1.render());
  }
  function createHistory() {
    history = new create$i();
    history.create();
    history.listener.follow('down', function () {
      sources$1.toggle(true);
    });
    history.listener.follow('up', function () {
      keyboard$1.toggle();
    });
    history.listener.follow('enter', function (event) {
      keyboard$1.value(event.value);
      sources$1.search(event.value, true);
    });
    history.listener.follow('back', destroy$8);
    search$2.find('.search__history').append(history.render());
  }
  function createKeyboard() {
    keyboard$1 = new create$2({
      layout: 'search'
    });
    keyboard$1.create();
    keyboard$1.listener.follow('change', function (event) {
      input$1 = event.value;
      if (input$1) {
        search$2.find('.search__input').toggleClass('filled', true).html(input$1.replace(/\s/g, '&nbsp;'));
        sources$1.search(input$1);
      } else {
        search$2.find('.search__input').toggleClass('filled', false).text(Lang.translate('search_input') + '...');
        sources$1.search('');
      }
    });
    keyboard$1.listener.follow('down', function () {
      if (history.any()) history.toggle();else sources$1.toggle();
    });
    keyboard$1.listener.follow('hover', function () {
      input$1.length <= 2 ? sources$1.cancel() : sources$1.search(input$1);
    });
    keyboard$1.listener.follow('back', destroy$8);
  }
  function addSource(source) {
    additional.push(source);
  }
  function removeSource(source) {
    Arrays.remove(additional, source);
  }
  function render$d() {
    return html$h;
  }
  function destroy$8() {
    keyboard$1.destroy();
    history.destroy();
    sources$1.destroy();
    search$2.remove();
    html$h.empty();
    $('body').toggleClass('ambience--enable', false);
    $('body').toggleClass('search--open', false);
    if (params$1.onBack) params$1.onBack();else Controller.toggle('content');
    params$1 = {};
    input$1 = '';
    listener$c.send('close');
  }
  function close$5() {
    destroy$8();
  }
  var Search = {
    listener: listener$c,
    open: open$4,
    render: render$d,
    addSource: addSource,
    removeSource: removeSource,
    close: close$5
  };

  var html$g = $('<div class="processing hide"><div><div class="processing__loader"></div><div class="processing__text"></div></div></div>'),
    text = html$g.find('.processing__text');
  var processing = [];
  function init$H() {
    update$7();
  }
  function update$7() {
    if (processing.length) {
      text.text(processing.length > 1 ? processing.length : '1 / ' + Math.round(processing[0].percent) + '%');
      var complite = processing.find(function (a) {
        return a.percent >= 100;
      });
      if (complite) Prisma.Arrays.remove(processing, complite);
      requestAnimationFrame(update$7);
    } else html$g.addClass('hide');
  }
  function push$4(id, percent) {
    var find = processing.find(function (a) {
      return a.id == id;
    });
    if (!find) {
      processing.push({
        id: id,
        percent: percent,
        start: Date.now()
      });
      html$g.removeClass('hide');
      update$7();
    } else find.percent = percent;
  }
  function render$c(js) {
    return js ? html$g[0] : html$g;
  }
  var Processing = {
    init: init$H,
    push: push$4,
    render: render$c
  };

  var html$f;
  var last$3;
  var activi = false;
  function observe$2() {
    if (typeof MutationObserver == 'undefined') return;
    var observer = new MutationObserver(function (mutations) {
      for (var i = 0; i < mutations.length; i++) {
        var mutation = mutations[i];
        if (mutation.type == 'childList' && !mutation.removedNodes.length) {
          var selectors = Array.from(mutation.target.querySelectorAll('.selector'));
          selectors.forEach(function (s) {
            $(s).unbind('hover:focus hover:hover hover:touch').on('hover:focus hover:hover hover:touch', function (e) {
              last$3 = e.target;
            });
          });
        }
      }
    });
    observer.observe(html$f[0], {
      childList: true,
      subtree: true
    });
  }
  function appExit() {
    Activity$1.out();
    if (Platform.is('apple_tv')) window.location.assign('exit://exit');
    if (Platform.is('tizen')) tizen.application.getCurrentApplication().exit();
    if (Platform.is('webos')) window.close();
    if (Platform.is('android')) ExitHelper.exitApp();
    if (Platform.is('orsay')) Orsay.exit();
    if (Platform.is('nw')) nw.Window.get().close();
  }
  function init$G() {
    html$f = Template.get('head');
    if (!window.prisma_settings.feed) html$f.find('.open--feed').remove();
    if (!window.prisma_settings.account_use || window.prisma_settings.disable_features.ads) html$f.find('.open--premium').remove();
    if (window.local_prisma) html$f.find('.head__logo-icon').append('<span class="head__logo-local">local</span>');
    html$f.find('.head__actions').prepend(Processing.render());
    Utils$2.time(html$f);
    html$f.find('.selector').data('controller', 'head').on('hover:focus hover:hover hover:touch', function (event) {
      last$3 = event.target;
    });
    observe$2();
    html$f.find('.open--settings').on('hover:enter', function () {
      ParentalControl.personal('settings', function () {
        Controller.toggle('settings');
      }, false, true);
    });
    html$f.find('.open--notice').on('hover:enter', Notice$1.open.bind(Notice$1));
    html$f.find('.open--search').on('hover:enter', Search.open.bind(Search));
    html$f.find('.head__logo-icon,.head__menu-icon').on('click', function (e) {
      if (DeviceInput.canClick(e.originalEvent)) Controller.toggle('menu');
    });
    Storage.listener.follow('change', function (e) {
      if (e.name == 'account') {
        html$f.find('.open--profile').toggleClass('hide', e.value.token && window.prisma_settings.account_use ? false : true);
      }
      if (e.name == 'account_user') {
        html$f.find('.open--premium').toggleClass('hide', Account.hasPremium() || window.prisma_settings.white_use ? true : !Lang.selected(['ru', 'uk', 'be']));
      }
    });
    html$f.find('.full-screen').on('hover:enter', function () {
      Utils$2.toggleFullscreen();
    }).toggleClass('hide', Platform.tv() || Platform.is('android') || !Utils$2.canFullScreen());
    if (!Lang.selected(['ru', 'uk', 'be'])) {
      html$f.find('.open--feed').remove();
    } else {
      html$f.find('.open--feed').on('hover:enter', function () {
        Activity$1.push({
          url: '',
          title: Lang.translate('menu_feed'),
          component: 'feed',
          page: 1
        });
      });
    }
    html$f.find('.open--premium').toggleClass('hide', Account.hasPremium() || window.prisma_settings.white_use ? true : !Lang.selected(['ru', 'uk', 'be'])).on('hover:enter', function () {
      Modal.open({
        title: '',
        size: 'full',
        mask: true,
        html: Template.get('prisma_premium_modal'),
        onBack: function onBack() {
          Modal.close();
          Controller.toggle('head');
        }
      });
    });
    html$f.find('.open--exit').on('hover:enter', appExit);
    Controller.add('head', {
      toggle: function toggle() {
        Controller.collectionSet(html$f, false, true);
        Controller.collectionFocus(last$3, html$f, true);
      },
      right: function right() {
        Navigator.move('right');
      },
      left: function left() {
        if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
      },
      down: function down() {
        Controller.toggle('content');
      },
      back: function back() {
        Activity$1.backward();
      }
    });
    var timer;
    var broadcast = html$f.find('.open--broadcast').hide();
    broadcast.on('hover:enter', function () {
      Broadcast.open({
        type: 'card',
        object: Activity$1.extractObject(activi)
      });
    });
    Prisma.Listener.follow('activity', function (e) {
      if (e.type == 'start') activi = e.object;
      clearTimeout(timer);
      timer = setTimeout(function () {
        if (activi) {
          if (activi.component !== 'full') {
            broadcast.hide();
            activi = false;
          }
        }
      }, 1000);
      if (e.type == 'start' && e.component == 'full') {
        broadcast.show();
        activi = e.object;
      }
    });
  }
  function title$1(title) {
    html$f.find('.head__title').text(title || '');
  }
  function render$b() {
    return html$f;
  }
  var Head = {
    render: render$b,
    title: title$1,
    init: init$G,
    appExit: appExit
  };

  var permit = {};
  Object.defineProperty(permit, 'account', {
    get: function get() {
      return Storage.get('account', '{}');
    }
  });
  Object.defineProperty(permit, 'token', {
    get: function get() {
      return permit.account.token;
    }
  });
  Object.defineProperty(permit, 'use', {
    get: function get() {
      return permit.token && Storage.field('account_use') && window.prisma_settings.account_use;
    }
  });
  Object.defineProperty(permit, 'sync', {
    get: function get() {
      return permit.use && window.prisma_settings.account_sync;
    }
  });

  var network$a = new create$e();
  function url$4() {
    return Utils$2.protocol() + object$2.pris_domain + '/api/';
  }
  function load$3(path) {
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    return new Promise(function (resolve, reject) {
      if (permit.token) {
        var account = permit.account;
        Arrays.extend(params, {
          headers: {
            token: account.token,
            profile: account.profile.id
          },
          timeout: 8000
        });
        network$a.silent(url$4() + path, resolve, function (e) {
          reject(network$a.errorCode(e));
        }, false, params);
      } else {
        reject(403);
      }
    });
  }
  var Api$1 = {
    url: url$4,
    load: load$3
  };

  /**
   * Обновить таймлайн
   * @param {Boolean} full обновить полностью или только новые элементы
   * @param {Boolean} visual обновить визуально Timeline.update когда socket открылся
   */

  function update$6() {
    var full = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : false;
    var visual = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    if (permit.sync) {
      var url = 'timeline/all';
      var all = full;
      console.log('Timeline', 'full update:', Utils$2.parseTime(Storage.get('timeline_full_update_time', '0')).briefly);
      if (Storage.get('timeline_full_update_time', '0') + 1000 * 60 * 60 * 24 < Date.now() && !visual) all = true;
      if (all) url = url + '?full=true';
      Api$1.load(url).then(function (result) {
        var name = 'file_view_' + permit.account.profile.id;
        if (visual) {
          for (var i in result.timelines) {
            var time = result.timelines[i];
            time.received = true;
            Timeline$1.update(time);
          }
        } else {
          if (window.localStorage.getItem(name) === null) {
            Storage.set(name, Arrays.clone(Storage.cache('file_view', 10000, {})));
          }
          var viewed = Storage.cache(name, 10000, {});
          for (var _i in result.timelines) {
            var _time = result.timelines[_i];
            viewed[_i] = _time;
            Arrays.extend(viewed[_i], {
              duration: 0,
              time: 0,
              percent: 0
            });
            delete viewed[_i].hash;
          }

          //  Storage.set(name, viewed)

          if (all) Storage.set('timeline_full_update_time', Date.now());
          Storage.set(name, viewed, false, function () {
            Storage.set('timeline_full_update_time', 0);
          });
        }
        console.log('Timeline', 'update success: total', Arrays.getKeys(Storage.get(name, '{}')).length, 'items', 'load:', Arrays.getKeys(result.timelines).length, 'items');
      })["catch"](function (e) {
        if (e == 403) {
          Storage.set('timeline_full_update_time', 0);
        } else {
          console.log('Timeline', 'update error:', e);
        }
      });
    }
  }
  var Timeline = {
    update: update$6
  };

  var body$1;
  var network$9 = new create$e();
  var listener$b = start$8();
  var start_time = Date.now();
  var user_data;
  var notice_load = {
    time: 0,
    data: []
  };
  var bookmarks = [];
  function api$2() {
    return Utils$2.protocol() + object$2.pris_domain + '/api/';
  }

  /**
   * Запуск
   */
  function init$F() {
    if (!window.prisma_settings.account_use) return;
    Settings.listener.follow('open', function (e) {
      body$1 = null;
      if (e.name == 'account') {
        body$1 = e.body;
        renderPanel();
        check$2();
      }
    });
    Storage.listener.follow('change', function (e) {
      if (e.name == 'account_use') Timeline.update(true);
      if (e.name == 'account') {
        Timeline.update(true);
        updateProfileIcon();
      }
      if (e.name == 'protocol') {
        updateProfileIcon();
        update$5();
      }
    });
    Socket.listener.follow('open', checkValidAccount);
    Socket.listener.follow('open', function () {
      if (Date.now() - start_time > 1000 * 60 * 5) Timeline.update(false, true);
    });
    Favorite.listener.follow('add,added', function (e) {
      save$2('add', e.where, e.card);
    });
    Favorite.listener.follow('remove', function (e) {
      if (e.method == 'id') save$2('remove', e.where, e.card);
    });
    Head.render().find('.head__body .open--profile').on('hover:enter', function () {
      showProfiles('head');
    });
    network$9.silent(Utils$2.protocol() + object$2.pris_domain + '/api/blocked', function (dcma) {
      window.prisma_settings.dcma = dcma;
    });
    setInterval(checkValidAccount, 1000 * 60 * 10);
    notice_load.data = Storage.get('account_notice', '[]');
    checkProfile(function () {
      getUser();
      Timeline.update();
      updateProfileIcon();

      // persons()
    });

    // ParentalControl.add('account_profiles',{
    //     title: 'account_profiles'
    // })
  }
  function task$3(call) {
    if (!window.prisma_settings.account_use) return call();
    update$5(call);
  }
  function checkProfile(call) {
    var account = Storage.get('account', '{}');
    if (account.token && window.prisma_settings.account_use) {
      if (account.profile.id) call();else {
        network$9.silent(api$2() + 'profiles/all', function (result) {
          var main = result.profiles.find(function (p) {
            return p.main;
          });
          if (main) {
            account.profile = main;
            Storage.set('account', account, true);
          }
          call();
        }, function () {
          setTimeout(checkProfile.bind(checkProfile, call), 1000 * 60);
        }, false, {
          headers: {
            token: account.token
          },
          timeout: 5000
        });
      }
    } else {
      Storage.set('account_user', '');
    }
  }
  function checkValidAccount() {
    var account = Storage.get('account', '{}');
    if (account.token) {
      Socket.send('check_token', {});
    }
  }
  function updateProfileIcon() {
    var account = Storage.get('account', '{}');
    var button = Head.render().find('.head__body .open--profile').toggleClass('hide', !Boolean(account.token));
    if (account.token) {
      var img = button.find('img')[0];
      if (!img) {
        button.empty();
        button.append('<img class="profile-icon" />');
        img = button.find('img')[0];
      }
      if (img) {
        img.onerror = function () {
          img.src = './img/img_load.svg';
        };
        var validIcons = ['l_1', 'l_2', 'l_3', 'l_4', 'l_5', 'l_6', 'l_7', 'l_8', 'l_9', 'l_10'];
        var icon = account.profile && account.profile.icon && validIcons.includes(account.profile.icon) ? account.profile.icon : 'l_1';

        // Правильный путь к иконкам
        img.src = Utils$2.protocol() + object$2.pris_domain + '/img/profiles/' + icon + '.png?t=' + Date.now();
      }
    }
  }

  // function persons(secuses, error){
  //     let account = Storage.get('account','{}')

  //     if(account.token && window.prisma_settings.account_use){
  //         network.silent(api() + 'person/list',(data)=>{
  //             Storage.set('person_subscribes_id',data.results.map(a=>a.person_id))

  //             if(secuses) secuses(data.results)
  //         },error ? error : false,false,{
  //             headers: {
  //                 token: account.token
  //             }
  //         })
  //     }
  //     lse if(error) error()
  // }

  function getUser() {
    var account = Storage.get('account', '{}');
    if (account.token && window.prisma_settings.account_use) {
      network$9.silent(api$2() + 'users/get', function (result) {
        user_data = result.user;
        Storage.set('account_user', JSON.stringify(result.user));
      }, false, false, {
        headers: {
          token: account.token
        }
      });
    }
  }
  function checkPremium() {
    var user = user_data || Storage.get('account_user', '{}');
    return user.id ? Utils$2.countDays(Date.now(), user.premium) : 0;
  }
  function save$2(method, type, card) {
    var account = workingAccount();
    if (account) {
      var find = bookmarks.find(function (elem) {
        return elem.card_id == card.id && elem.type == type;
      });
      network$9.clear();
      network$9.silent(api$2() + 'bookmarks/' + method, false, false, {
        type: type,
        data: JSON.stringify(Utils$2.clearCard(Arrays.clone(card))),
        card_id: card.id,
        id: find ? find.id : 0
      }, {
        headers: {
          token: account.token,
          profile: account.profile.id
        }
      });
      if (method == 'remove') {
        if (find) {
          Arrays.remove(bookmarks, find);
        }
      } else {
        if (find) Arrays.remove(bookmarks, find);
        Arrays.insert(bookmarks, 0, {
          id: find ? find.id : 0,
          cid: find ? find.cid : account.id,
          card_id: card.id,
          type: type,
          data: Utils$2.clearCard(Arrays.clone(card)),
          profile: account.profile.id,
          time: Date.now()
        });
        bookmarks.filter(function (elem) {
          return elem.card_id == card.id;
        }).forEach(function (elem) {
          elem.time = Date.now();
        });
        bookmarks.sort(function (a, b) {
          return b.time - a.time;
        });
      }
      updateChannels();
      Socket.send('bookmarks', {});
    }
  }
  function clear$6(where) {
    var account = Storage.get('account', '{}');
    if (account.token && window.prisma_settings.account_use && window.prisma_settings.account_sync) {
      network$9.silent(api$2() + 'bookmarks/clear', function (result) {
        if (result.secuses) update$5();
      }, false, {
        type: 'group',
        group: where
      }, {
        headers: {
          token: account.token,
          profile: account.profile.id
        }
      });
    }
  }
  function update$5(call) {
    var account = Storage.get('account', '{}');
    if (account.token && window.prisma_settings.account_use && window.prisma_settings.account_sync) {
      network$9.silent(api$2() + 'bookmarks/all?full=1', function (result) {
        AppWorker.json({
          type: 'parse',
          data: result
        }, function (e) {
          updateBookmarks(e.data.bookmarks, function () {
            if (call && typeof call == 'function') call();
          });
        });
      }, function () {
        if (call && typeof call == 'function') call();
      }, false, {
        dataType: 'text',
        timeout: 8000,
        headers: {
          token: account.token,
          profile: account.profile.id
        }
      });
    } else {
      updateBookmarks([], function () {
        if (call && typeof call == 'function') call();
      });
    }
  }
  function plugins(call) {
    var account = Storage.get('account', '{}');
    if (account.token && window.prisma_settings.account_use) {
      network$9.timeout(3000);
      network$9.silent(api$2() + 'plugins/all', function (result) {
        if (result.secuses) {
          Storage.set('account_plugins', result.plugins);
          call(result.plugins);
        } else {
          call(Storage.get('account_plugins', '[]'));
        }
      }, function () {
        call(Storage.get('account_plugins', '[]'));
      }, false, {
        headers: {
          token: account.token,
          profile: account.profile.id
        }
      });
    } else {
      call([]);
    }
  }
  function extensions$1(call) {
    var account = Storage.get('account', '{}');
    var headers = {};
    if (account.token && window.prisma_settings.account_use) {
      headers = {
        headers: {
          token: account.token,
          profile: account.profile.id
        }
      };
    }
    network$9.timeout(5000);
    network$9.silent(api$2() + 'extensions/list', function (result) {
      if (result.secuses) {
        if (window.prisma_settings.white_use) {
          var forbidden = [9, 10, 12, 180, 5, 149, 13, 158, 179];
          result.results.forEach(function (elem) {
            elem.results = elem.results.filter(function (plug) {
              return forbidden.indexOf(plug.id) == -1;
            });
          });
        }
        Storage.set('account_extensions', result);
        call(result);
      } else {
        call(Storage.get('account_extensions', '{}'));
      }
    }, function () {
      call(Storage.get('account_extensions', '{}'));
    }, false, headers);
  }
  function pluginsStatus(plugin, status) {
    var account = Storage.get('account', '{}');
    if (account.token && window.prisma_settings.account_use) {
      network$9.silent(api$2() + (plugin.author ? 'extensions' : 'plugins') + '/status', false, false, {
        id: plugin.id,
        status: status
      }, {
        headers: {
          token: account.token,
          profile: account.profile.id
        }
      });
    }
  }

  /**
   * Статус
   */
  function renderStatus(name) {
    var value = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : '';
    if (body$1) {
      body$1.find('.settings--account-status .settings-param__value').text(name);
      body$1.find('.settings--account-status .settings-param__descr').text(value);
    }
  }
  function addDevice() {
    var _displayModal = function displayModal() {
      var html = Template.get('account_add_device');
      html.find('.simple-button').on('hover:enter', function () {
        Modal.close();
        Input.edit({
          free: true,
          title: Lang.translate('account_code_enter'),
          nosave: true,
          value: '',
          layout: 'nums',
          keyboard: 'prisma'
        }, function (new_value) {
          var code = parseInt(new_value);
          if (new_value && new_value.length == 6 && !isNaN(code)) {
            var login = function login(error) {
              network$9.silent(api$2() + 'device/add', function (result) {
                Loading.stop();
                Storage.set('account', result, true);
                Storage.set('account_email', result.email, true);
                window.location.reload();
              }, error, {
                code: code
              });
            };
            Loading.start(function () {
              network$9.clear();
              Loading.stop();
            });
            network$9.clear();
            login(function (e) {
              localStorage.setItem('protocol', window.location.protocol == 'https:' ? 'https' : 'http');
              login(function () {
                Loading.stop();
                Noty$1.show(Lang.translate(network$9.errorCode(e) == 200 ? 'account_code_error' : 'network_noconnect'));
              });
            });
          } else {
            _displayModal();
            Noty$1.show(Lang.translate('account_code_wrong'));
          }
        });
      });
      Modal.open({
        title: '',
        html: html,
        size: 'small',
        onBack: function onBack() {
          Modal.close();
          Controller.toggle('settings_component');
        }
      });
    };
    _displayModal();
  }
  function renderPanel() {
    if (body$1) {
      var account = Storage.get('account', '{}');
      var signed = account.token ? true : false;
      if (!window.prisma_settings.account_sync) {
        body$1.find('[data-name="account_use"]').remove();
        body$1.find('.settings--account-status').nextAll().remove();
      }
      body$1.find('.settings--account-signin').toggleClass('hide', signed);
      body$1.find('.settings--account-user').toggleClass('hide', !signed);
      body$1.find('.settings--account-premium').toggleClass('selectbox-item--checked', Boolean(checkPremium()));
      body$1.find('.settings-param__label').toggleClass('hide', !Boolean(checkPremium()));
      if (!checkPremium()) {
        body$1.find('.selectbox-item').on('hover:enter', showPrismaPremium);
      }
      body$1.find('.settings--account-device-add').on('hover:enter', addDevice);
      if (account.token) {
        body$1.find('.settings--account-user-info .settings-param__value').text(account.email);
        body$1.find('.settings--account-user-profile .settings-param__value').text(account.profile.name);
        body$1.find('.settings--account-user-out').on('hover:enter', function () {
          Storage.set('account', '');
          Storage.set('account_user', '');
          Storage.set('account_email', '');
          Settings.update();
          update$5();
        });
        body$1.find('.settings--account-user-sync').on('hover:enter', function () {
          account = Storage.get('account', '{}');
          Select.show({
            title: Lang.translate('settings_prisma_sync'),
            items: [{
              title: Lang.translate('confirm'),
              subtitle: Lang.translate('account_sync_to_profile') + ' (' + account.profile.name + ')',
              confirm: true
            }, {
              title: Lang.translate('cancel')
            }],
            onSelect: function onSelect(a) {
              if (a.confirm) {
                var file;
                try {
                  file = new File([localStorage.getItem('favorite') || '{}'], "bookmarks.json", {
                    type: "text/plain"
                  });
                } catch (e) {}
                if (!file) {
                  try {
                    file = new Blob([localStorage.getItem('favorite') || '{}'], {
                      type: 'text/plain'
                    });
                    file.lastModifiedDate = new Date();
                  } catch (e) {
                    Noty$1.show(Lang.translate('account_export_fail'));
                  }
                }
                if (file) {
                  var formData = new FormData($('<form></form>')[0]);
                  formData.append("file", file, "bookmarks.json");
                  var loader = $('<div class="broadcast__scan" style="margin: 1em 0 0 0"><div></div></div>');
                  body$1.find('.settings--account-user-sync').append(loader);
                  $.ajax({
                    url: api$2() + 'bookmarks/sync',
                    type: 'POST',
                    data: formData,
                    async: true,
                    cache: false,
                    contentType: false,
                    enctype: 'multipart/form-data',
                    processData: false,
                    headers: {
                      token: account.token,
                      profile: account.profile.id
                    },
                    success: function success(j) {
                      if (j.secuses) {
                        Noty$1.show(Lang.translate('account_sync_secuses'));
                        update$5();
                        loader.remove();
                      }
                    },
                    error: function error() {
                      Noty$1.show(Lang.translate('account_export_fail'));
                      loader.remove();
                    }
                  });
                }
              }
              Controller.toggle('settings_component');
            },
            onBack: function onBack() {
              Controller.toggle('settings_component');
            }
          });
        });
        body$1.find('.settings--account-user-backup').on('hover:enter', backup);
        profile();
      } else check$2();
    }
  }
  function profile() {
    var account = Storage.get('account', '{}');
    body$1.find('.settings--account-user-profile .settings-param__value').text(account.profile.name);
    body$1.find('.settings--account-user-profile').on('hover:enter', function () {
      showProfiles('settings_component');
    });
  }
  function showProfiles(controller) {
    // ParentalControl.personal('account_profiles',()=>{
    var account = Storage.get('account', '{}');
    Loading.start(function () {
      network$9.clear();
      Loading.stop();
    });
    network$9.clear();
    network$9.silent(api$2() + 'profiles/all', function (result) {
      Loading.stop();
      if (result.secuses) {
        var items = Arrays.clone(result.profiles);
        var clone = Arrays.clone(result.profiles);
        items.reverse();
        clone.reverse();
        Select.show({
          title: Lang.translate('account_profiles'),
          items: items.map(function (elem, index) {
            elem.title = elem.name;
            elem.template = 'selectbox_icon';
            elem.icon = '<img src="' + Utils$2.protocol() + object$2.pris_domain + '/img/profiles/' + elem.icon + '.png" />';
            elem.index = index;
            elem.selected = account.profile.id == elem.id;
            return elem;
          }),
          onSelect: function onSelect(a) {
            account.profile = clone[a.index];
            Storage.set('account', account);
            if (body$1) body$1.find('.settings--account-user-profile .settings-param__value').text(a.name);
            notice_load.time = 0;
            Controller.toggle(controller);
            update$5();
          },
          onBack: function onBack() {
            Controller.toggle(controller);
          }
        });
      } else {
        Noty$1.show(result.text);
      }
    }, function () {
      Loading.stop();
      Noty$1.show(Lang.translate('account_profiles_empty'));
    }, false, {
      headers: {
        token: account.token
      }
    });
    // },false, true)
  }
  function check$2() {
    var account = Storage.get('account', '{}');
    if (account.token) {
      renderStatus(Lang.translate('account_authorized'), Lang.translate('account_logged_in') + ' ' + account.email);
    } else {
      renderStatus(Lang.translate('account_login_failed'), Lang.translate('account_login_wait'));
    }
  }
  function working() {
    return Storage.get('account', '{}').token && Storage.field('account_use') && window.prisma_settings.account_use && window.prisma_settings.account_sync;
  }
  function canSync(logged_check) {
    return (logged_check ? logged() && window.prisma_settings.account_sync : working()) ? Storage.get('account', '{}') : false;
  }
  function workingAccount() {
    return working() ? Storage.get('account', '{}') : false;
  }
  function logged() {
    return Storage.get('account', '{}').token ? window.prisma_settings.account_use : false;
  }
  function get$7(params) {
    return bookmarks.filter(function (elem) {
      return elem.type == params.type;
    }).map(function (elem) {
      return elem.data;
    });
  }
  function all$1() {
    return bookmarks.map(function (elem) {
      return elem.data;
    });
  }
  function addDiscuss(params, call) {
    var account = Storage.get('account', '{}');
    if (account.token) {
      network$9.silent(api$2() + 'discuss/add', function (data) {
        data.result.icon = account.profile.icon;
        call(data.result);
      }, function (j, e) {
        var errorData = network$9.errorJSON(j);
        Noty$1.show(errorData.message || errorData.text || Lang.translate('network_500'), {
          time: 5000
        });
      }, {
        id: [params.method, params.id].join('_'),
        comment: params.comment,
        review_type: params.review_type || 'neutral',
        lang: Storage.field('language')
      }, {
        headers: {
          token: account.token,
          profile: account.profile.id
        }
      });
    }
  }
  function voiteDiscuss(params, call) {
    var account = Storage.get('account', '{}');
    if (account.token) {
      network$9.silent(api$2() + 'discuss/voite', function (result) {
        if (result && result.success && call) {
          call(result);
        }
      }, function (j, e) {
        var errorData = network$9.errorJSON(j);
        Noty$1.show(errorData.message || errorData.text || Lang.translate('network_500'));
      }, params, {
        headers: {
          token: account.token,
          profile: account.profile.id
        }
      });
    }
  }
  function updateChannels() {
    if (Platform.is('android') && typeof AndroidJS.saveBookmarks !== 'undefined' && bookmarks.length) {
      AppWorker.json({
        type: 'stringify',
        data: bookmarks
      }, function (j) {
        AndroidJS.saveBookmarks(j.data);
      });
    }
  }
  function updateBookmarks(rows, call) {
    if (!rows || !Array.isArray(rows)) {
      console.log('Bookmarks data error: invalid data format', rows);
      if (call) call();
      return;
    }
    AppWorker.utils({
      type: 'account_bookmarks_parse',
      data: rows
    }, function (e) {
      if (e && e.data) {
        bookmarks = e.data;
        bookmarks.forEach(function (elem) {
          elem.data = Utils$2.clearCard(elem.data);
        });
        updateChannels();
        console.log('Bookmarks updated successfully:', bookmarks.length);
        if (call) call();
        listener$b.send('update_bookmarks', {
          rows: rows,
          bookmarks: bookmarks
        });
      } else {
        console.log('Bookmarks parse worker error:', e);
        if (call) call();
      }
    });
  }
  function notice(call) {
    var account = Storage.get('account', '{}');
    if (account.token && window.prisma_settings.account_use && window.prisma_settings.account_sync) {
      if (notice_load.time + 1000 * 60 * 10 < Date.now()) {
        network$9.timeout(5000);
        network$9.silent(api$2() + 'notice/all', function (result) {
          if (result.secuses) {
            notice_load.time = Date.now();
            notice_load.data = result.notice;
            Storage.set('account_notice', result.notice.map(function (n) {
              return n;
            }));
            call(result.notice);
          } else call(notice_load.data);
        }, function () {
          call(notice_load.data);
        }, false, {
          headers: {
            token: account.token,
            profile: account.profile.id
          }
        });
      } else call(notice_load.data);
    } else call([]);
  }
  function backup() {
    var account = Storage.get('account', '{}');
    if (account.token) {
      Select.show({
        title: Lang.translate('settings_prisma_backup'),
        nomark: true,
        items: [{
          title: Lang.translate('settings_prisma_backup_export'),
          subtitle: Lang.translate('settings_prisma_backup_export_descr'),
          "export": true,
          selected: true
        }, {
          title: Lang.translate('settings_prisma_backup_import'),
          subtitle: Lang.translate('settings_prisma_backup_import_descr'),
          "import": true
        }, {
          title: Lang.translate('cancel')
        }],
        onSelect: function onSelect(a) {
          if (a["export"]) {
            Select.show({
              title: Lang.translate('sure'),
              nomark: true,
              items: [{
                title: Lang.translate('confirm'),
                "export": true,
                selected: true
              }, {
                title: Lang.translate('cancel')
              }],
              onSelect: function onSelect(a) {
                if (a["export"]) {
                  var file;
                  try {
                    file = new File([JSON.stringify(localStorage)], "backup.json", {
                      type: "text/plain"
                    });
                  } catch (e) {
                    console.log('Backup', 'file create error', e.message);
                  }
                  if (!file) {
                    try {
                      file = new Blob([JSON.stringify(localStorage)], {
                        type: 'text/plain'
                      });
                      file.lastModifiedDate = new Date();
                    } catch (e) {
                      console.log('Backup', 'file create error', e.message);
                      Noty$1.show(Lang.translate('account_export_fail'));
                    }
                  }
                  if (file) {
                    var formData = new FormData($('<form></form>')[0]);
                    formData.append("file", file, "backup.json");
                    var loader = $('<div class="broadcast__scan" style="margin: 1em 0 0 0"><div></div></div>');
                    body$1.find('.settings--account-user-backup').append(loader);
                    $.ajax({
                      url: api$2() + 'users/backup/export',
                      type: 'POST',
                      data: formData,
                      async: true,
                      cache: false,
                      contentType: false,
                      enctype: 'multipart/form-data',
                      processData: false,
                      headers: {
                        token: account.token
                      },
                      success: function success(j) {
                        if (j.secuses) {
                          // if(j.limited) showLimitedAccount()
                          //else Noty.show(Lang.translate('account_export_secuses'))
                          Noty$1.show(Lang.translate('account_export_secuses'));
                        } else Noty$1.show(Lang.translate('account_export_fail'));
                        loader.remove();
                      },
                      error: function error(e, x) {
                        console.log('Backup', 'network error', network$9.errorDecode(e, x));
                        Noty$1.show(Lang.translate('account_export_fail_' + (network$9.errorJSON(e).code || 500)));
                        loader.remove();
                      }
                    });
                  } else {
                    console.log('Backup', 'file not created');
                  }
                }
                Controller.toggle('settings_component');
              },
              onBack: function onBack() {
                Controller.toggle('settings_component');
              }
            });
          } else if (a["import"]) {
            network$9.silent(api$2() + 'users/backup/import', function (data) {
              if (data.data) {
                var imp = 0;
                var ers = 0;
                for (var i in data.data) {
                  try {
                    localStorage.setItem(i, data.data[i]);
                    imp++;
                  } catch (e) {
                    ers++;
                  }
                }
                Noty$1.show(Lang.translate('account_import_secuses') + ' - ' + Lang.translate('account_imported') + ' (' + imp + '/' + ers + ') - ' + Lang.translate('account_reload_after'));
                setTimeout(function () {
                  window.location.reload();
                }, 5000);
              } else Noty$1.show(Lang.translate('nodata'));
            }, function () {
              Noty$1.show(Lang.translate('account_import_fail'));
            }, false, {
              headers: {
                token: account.token
              }
            });
            Controller.toggle('settings_component');
          } else {
            Controller.toggle('settings_component');
          }
        },
        onBack: function onBack() {
          Controller.toggle('settings_component');
        }
      });
    }
  }
  function subscribes(params, secuses, error) {
    var account = canSync(true);
    if (account) {
      network$9.silent(api$2() + 'notifications/all', function (result) {
        secuses({
          results: result.notifications.map(function (r) {
            return Arrays.decodeJson(r.card, {});
          })
        });
      }, error, false, {
        headers: {
          token: account.token,
          profile: account.profile.id
        }
      });
    } else error();
  }
  function showModal(template_name) {
    var enabled = Controller.enabled().name;
    Modal.open({
      title: '',
      html: Template.get(template_name),
      onBack: function onBack() {
        Modal.close();
        Controller.toggle(enabled);
      }
    });
  }
  function showNoAccount() {
    showModal('account');
  }
  function showLimitedAccount() {
    showModal('account_limited');
  }
  function showPrismaPremium() {
    var enabled = Controller.enabled().name;
    Modal.open({
      title: '',
      html: Template.get('prisma_premium'),
      onBack: function onBack() {
        Modal.close();
        Controller.toggle(enabled);
      }
    });
    Modal.render().addClass('modal--prisma-premium').find('.modal__content').before('<div class="modal__icon"><svg xmlns="http://www.w3.org/2000/svg" width="512" height="512" viewBox="0 0 32 32"><path d="m2.837 20.977q-.912-5.931-1.825-11.862a.99.99 0 0 1 1.572-.942l5.686 4.264a1.358 1.358 0 0 0 1.945-.333l4.734-7.104a1.263 1.263 0 0 1 2.1 0l4.734 7.1a1.358 1.358 0 0 0 1.945.333l5.686-4.264a.99.99 0 0 1 1.572.942q-.913 5.931-1.825 11.862z" fill="#D8C39A"></svg></div>');
  }
  function subscribeToTranslation() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var call = arguments.length > 1 ? arguments[1] : undefined;
    var error = arguments.length > 2 ? arguments[2] : undefined;
    var account = canSync(true);
    if (account && params.voice) {
      network$9.timeout(5000);
      network$9.silent(api$2() + 'notifications/add', function (result) {
        if (result.limited) showLimitedAccount();else if (call) call();
      }, function () {
        if (error) error();
      }, {
        voice: params.voice,
        data: JSON.stringify(params.card),
        episode: params.episode,
        season: params.season
      }, {
        headers: {
          token: account.token
        }
      });
    } else if (error) error();
  }
  function logoff(data) {
    var account = Storage.get('account', '{}');
    if (account.token && account.email == data.email) {
      Storage.set('account', '', true);
      Storage.set('account_use', false, true);
      Storage.set('account_user', '', true);
      Storage.set('account_email', '', true);
      Storage.set('account_notice', '', true);
      Storage.set('account_bookmarks', '', true);
      $('.head .open--profile').addClass('hide');
      window.location.reload();
    }
  }
  var Account = {
    listener: listener$b,
    init: init$F,
    task: task$3,
    working: working,
    canSync: canSync,
    workingAccount: workingAccount,
    get: get$7,
    all: all$1,
    plugins: plugins,
    notice: notice,
    pluginsStatus: pluginsStatus,
    showProfiles: showProfiles,
    clear: clear$6,
    update: update$5,
    network: network$9,
    backup: backup,
    extensions: extensions$1,
    subscribeToTranslation: subscribeToTranslation,
    subscribes: subscribes,
    showNoAccount: showNoAccount,
    showPrismaPremium: showPrismaPremium,
    showLimitedAccount: showLimitedAccount,
    logged: logged,
    removeStorage: function removeStorage() {},
    //устарело
    logoff: logoff,
    // persons,
    addDiscuss: addDiscuss,
    voiteDiscuss: voiteDiscuss,
    updateUser: function updateUser() {
      getUser();
    }
  };
  Object.defineProperty(Account, 'hasPremium', {
    value: function value() {
      return checkPremium();
    },
    writable: false
  });

  var network$8 = new create$e();
  function region(call) {
    var reg = Storage.get('region', '{}');
    Arrays.extend({
      time: 0
    });
    if (!reg.code || reg.time + 1000 * 60 * 60 * 24 < Date.now()) {
      var extracted = function extracted(code) {
        code = code.trim().toLowerCase();
        code = code || 'ru';
        Storage.set('region', {
          code: code,
          time: Date.now()
        });
        call(code);
      };
      extract(extracted, function () {
        console.log('VPN', 'domain not responding');
        Storage.set('region', {
          code: Storage.field('language'),
          time: Date.now()
        });
        call(Storage.field('language'));
      });
    } else call(reg.code);
  }
  var extract = function extract(call, error) {
    network$8.silent(Utils$2.protocol() + object$2.api_domain + '/geo?select=country', call, error, false, {
      dataType: 'text',
      timeout: 8000
    });
  };
  function task$2(call) {
    extract(function (country) {
      console.log('VPN', object$2.api_domain + '/geo?select=country' + ' domain responding ', country);
      if (country.trim().toLowerCase() == 'ru' || country.trim().toLowerCase() == 'be' || country.trim() == '') {
        console.log('VPN', 'launch TMDB Proxy');

        // TMDBProxy.init()
      }
      call();
    }, function (e, x) {
      console.log('VPN', object$2.api_domain + '/geo?select=country' + ' domain not responding:', network$8.errorDecode(e, x));

      // TMDBProxy.init() //будем считать что если не ответил, то все равно запускаем

      call();
    });
  }
  var VPN = {
    region: region,
    task: task$2
  };

  var listener$a = start$8();
  var html$e;
  var display;
  var paused;
  var subtitles$1;
  var backworkIcon;
  var forwardIcon;
  var timer$3 = {};
  var params = {};
  var rewind_position = 0;
  var rewind_force = 0;
  var last_mutation = 0;
  var customsubs;
  var _video;
  var wait;
  var neeed_sacle;
  var neeed_sacle_last;
  var neeed_speed;
  var webos;
  var hls;
  var dash;
  var webos_wait = {};
  var normalization;
  var hls_parser;
  var click_nums = 0;
  var click_timer;
  var pause_timer;
  var video_tube = [];
  function init$E() {
    html$e = Template.get('player_video');
    display = html$e.find('.player-video__display');
    paused = html$e.find('.player-video__paused');
    subtitles$1 = html$e.find('.player-video__subtitles');
    backworkIcon = html$e.find('.player-video__backwork-icon');
    forwardIcon = html$e.find('.player-video__forward-icon');
    html$e.find('.player-video__backwork-icon,.player-video__forward-icon').on('animationend', function () {
      $(this).removeClass('rewind');
    });
    html$e.on('click', function (e) {
      if ((Storage.field('navigation_type') == 'mouse' || Utils$2.isTouchDevice()) && DeviceInput.canClick(e.originalEvent)) {
        clearTimeout(click_timer);
        click_nums++;
        if (PlayerIPTV.playning()) click_nums = 1;
        if (click_nums === 1) {
          click_timer = setTimeout(function () {
            click_nums = 0;
            if (PlayerPanel.visibleStatus() && !PlayerIPTV.playning()) playpause();else PlayerPanel.mousemove();
          }, 300);
        } else if (click_nums > 1) {
          click_timer = setTimeout(function () {
            var dir = e.clientX > window.innerWidth / 2 ? 1 : -1;
            var pow = (click_nums - 1) * 10;
            if (dir == 1) {
              forwardIcon.addClass('rewind').find('span').text('+' + pow + ' sec');
            } else {
              backworkIcon.addClass('rewind').find('span').text('-' + pow + ' sec');
            }
            to(_video.currentTime + dir * pow);
            click_nums = 0;
          }, 300);
        }
      }
    });
    var time_resize;
    $(window).on('resize', function () {
      clearTimeout(time_resize);
      time_resize = setTimeout(function () {
        if (_video) {
          neeed_sacle = neeed_sacle_last;
          scale();
          if (_video.resize) _video.resize();
        }
      }, 200);
    });

    /**
     * Специально для вебось
     */
    listener$a.follow('webos_subs', function (data) {
      webos_wait.subs = convertToArray(data.subs);
    });
    listener$a.follow('webos_tracks', function (data) {
      webos_wait.tracks = convertToArray(data.tracks);
    });
    registerTube({
      name: 'YouTube',
      verify: function verify(src) {
        return src.indexOf('youtube.com') >= 0 || src.indexOf('youtu.be') >= 0;
      },
      create: YouTube$1
    });
  }

  /**
   * Переключаем субтитры с предыдущей серии
   */
  function webosLoadSubs() {
    var subs = webos_wait.subs;
    _video.webos_subs = subs;
    var inx = params.sub + 1;
    if (typeof params.sub !== 'undefined' && subs[inx]) {
      subs.forEach(function (e) {
        e.mode = 'disabled';
        e.selected = false;
      });
      subs[inx].mode = 'showing';
      subs[inx].selected = true;
      console.log('WebOS', 'enable subs', inx);
      subsview(true);
    } else if (Storage.field('subtitles_start')) {
      var full = subs.find(function (s) {
        return (s.label || '').indexOf('олные') >= 0;
      });
      subs[0].selected = false;
      if (full) {
        full.mode = 'showing';
        full.selected = true;
      } else {
        subs[1].mode = 'showing';
        subs[1].selected = true;
      }
      subsview(true);
    }
  }

  /**
   * Переключаем дорожки с предыдущей серии
   */
  function webosLoadTracks() {
    var tracks = webos_wait.tracks;
    _video.webos_tracks = tracks;
    if (typeof params.track !== 'undefined' && tracks[params.track]) {
      tracks.forEach(function (e) {
        return e.selected = false;
      });
      console.log('WebOS', 'enable tracks', params.track);
      tracks[params.track].enabled = true;
      tracks[params.track].selected = true;
    }
  }

  /**
   * Добовляем события к контейнеру
   */
  function bind$2() {
    // ждем загрузки
    _video.addEventListener("waiting", function () {
      loader(true);
    });

    // начали играть
    _video.addEventListener("playing", function () {
      loader(false);
    });

    // видео закончилось
    _video.addEventListener('ended', function () {
      listener$a.send('ended', {});
    });
    if (Platform.is('apple') && Storage.field('player') == 'ios') {
      _video.addEventListener('webkitendfullscreen', function (e) {
        Controller.back();
      });
    }

    // что-то пошло не так
    _video.addEventListener('error', function (e) {
      var error = _video.error || {};
      var msg = (error.message || '').toUpperCase();
      if (msg.indexOf('EMPTY SRC') == -1) {
        if (error.code == 3) {
          listener$a.send('error', {
            error: Lang.translate('player_error_one'),
            fatal: true
          });
        } else if (error.code == 4) {
          listener$a.send('error', {
            error: Lang.translate('player_error_two'),
            fatal: true
          });
        } else if (typeof error.code !== 'undefined') {
          listener$a.send('error', {
            error: 'code [' + error.code + '] details [' + msg + ']',
            fatal: true
          });
        }
      }
    });

    // прогресс буферизации
    _video.addEventListener('progress', function (e) {
      if (typeof e.percent !== 'undefined') {
        listener$a.send('progress', {
          down: e.percent + '%'
        });
      } else {
        var duration = _video.duration;
        var seconds = 0;
        if (duration > 0) {
          try {
            for (var i = 0; i < _video.buffered.length; i++) {
              if (_video.buffered.start && _video.buffered.start(_video.buffered.length - 1 - i) < _video.currentTime) {
                var down = Math.max(0, Math.min(100, _video.buffered.end(_video.buffered.length - 1 - i) / duration * 100)) + "%";
                seconds = Math.max(0, _video.buffered.end(_video.buffered.length - 1 - i) - _video.currentTime);
                listener$a.send('progress', {
                  down: down
                });
                break;
              }
            }
          } catch (e) {}
          hlsBitrate(seconds);
        }
      }
    });

    // можно ли уже проигрывать?
    _video.addEventListener('canplay', function () {
      listener$a.send('canplay', {});
    });

    // сколько прошло
    _video.addEventListener('timeupdate', function () {
      if (rewind_position == 0 && !_video.rewind) listener$a.send('timeupdate', {
        duration: _video.duration,
        current: _video.currentTime
      });
      listener$a.send('videosize', {
        width: _video.videoWidth,
        height: _video.videoHeight
      });
      scale();
      mutation();
      if (customsubs) customsubs.update(_video.currentTime);
    });

    // обновляем субтитры
    _video.addEventListener('subtitle', function (e) {
      //В srt существует тег {\anX}, где X - цифра от 1 до 9, Тег определяет нестандартное положение субтитра на экране.
      //Здесь удаляется тег из строки и обрабатывается положение 8 (субтитр вверху по центру).
      //{\an8} используется когда нужно, чтобы субтитр не перекрывал надписи в нижней части экрана или субтитры вшитые в видеоряд.
      subtitles$1.removeClass('on-top');
      var posTag = e.text.match(/^{\\an(\d)}/);
      if (posTag) {
        e.text = e.text.replace(/^{\\an(\d)}/, '');
        if (posTag[1] && parseInt(posTag[1]) === 8) {
          subtitles$1.addClass('on-top');
        }
      }
      e.text = e.text.trim();
      $('> div', subtitles$1).html(e.text ? e.text : '&nbsp;').css({
        display: e.text ? 'inline-block' : 'none'
      });
      clearTimeout(timer$3.subtitle);
      timer$3.subtitle = setTimeout(function () {
        $('> div', subtitles$1).html('&nbsp;').css({
          display: 'none'
        });
      }, 10000);
    });

    //получены первые данные
    _video.addEventListener('loadeddata', function (e) {
      listener$a.send('videosize', {
        width: _video.videoWidth,
        height: _video.videoHeight
      });
      listener$a.send('loadeddata', {});
      scale();
      if (neeed_speed) speed(neeed_speed);
      loaded$1();
    });
    var pc = Boolean(Platform.is('nw') || Platform.is('browser') || Platform.is('apple') && !Utils$2.isPWA());

    // для страховки
    _video.volume = pc ? parseFloat(Storage.get('player_volume', '1')) : 1;
    _video.muted = false;
  }
  function hlsBitrate(seconds) {
    if (hls && hls.streamController && hls.streamController.fragPlaying && hls.streamController.fragPlaying.baseurl && hls.streamController.fragPlaying.stats) {
      var ch = Lang.translate('title_channel') + ' ' + parseFloat(hls.streamController.fragLastKbps / 1000).toFixed(2) + ' ' + Lang.translate('speed_mb');
      var bt = ' &nbsp;•&nbsp; ' + Lang.translate('torrent_item_bitrate') + ' ~' + parseFloat(hls.streamController.fragPlaying.stats.total / 1000000 / 10 * 8).toFixed(2) + ' ' + Lang.translate('speed_mb');
      var bf = ' &nbsp;•&nbsp; ' + Lang.translate('title_buffer') + ' ' + Utils$2.secondsToTimeHuman(seconds);
      Prisma.PlayerInfo.set('bitrate', ch + bt + bf);
    }
  }
  function hlsLevelName(level) {
    var level_width = level.width || 0;
    var level_height = level.height || 0;
    var levels = [240, 360, 480, 720, 1080, 1440, 2160];
    var name = levels.find(function (size) {
      var quality_width = Math.round(size * 1.777);
      var quality_height = size;
      var w = level_width > quality_width - 50 && level_width < quality_width + 50;
      var h = level_height > quality_height - 50 && level_height < quality_height + 50;
      return w || h;
    });
    return name ? name + 'p' : level.qu ? level.qu : level.width ? level.height + 'p' : 'AUTO';
  }
  function hlsLevelDefault(where) {
    var start_level = where.levels.find(function (level, i) {
      var level_width = level.width || 0;
      var level_height = level.height || 0;
      var quality_width = Math.round(Storage.field('video_quality_default') * 1.777);
      var quality_height = Storage.field('video_quality_default');
      var w = level_width > quality_width - 50 && level_width < quality_width + 50;
      var h = level_height > quality_height - 50 && level_height < quality_height + 50;
      return w || h;
    });
    return start_level ? where.levels.indexOf(start_level) : where.currentLevel;
  }

  /**
   * Может поможет избавится от скринсейва
   */
  function mutation() {
    if (last_mutation < Date.now() - 5000) {
      var style = _video.style;
      style.top = style.top;
      style.left = style.left;
      style.width = style.width;
      style.height = style.height;
      last_mutation = Date.now();
    }
  }

  /**
   * Конвертировать object to array
   * @param {object[]} arr 
   * @returns {array}
   */
  function convertToArray(arr) {
    if (!Arrays.isArray(arr)) {
      var new_arr = [];
      for (var index = 0; index < arr.length; index++) {
        new_arr.push(arr[index]);
      }
      arr = new_arr;
    }
    return arr;
  }

  /**
   * Масштаб видео
   */
  function scale() {
    if (!neeed_sacle) return;
    var vw = _video.videoWidth,
      vh = _video.videoHeight,
      rt = 1,
      sx = 1.00,
      sy = 1.00;
    if (vw == 0 || vh == 0 || typeof vw == 'undefined') return;
    var increase = function increase(sfx, sfy) {
      rt = Math.min(window.innerWidth / vw, window.innerHeight / vh);
      sx = sfx;
      sy = sfy;
    };
    if (neeed_sacle == 'default') {
      rt = Math.min(window.innerWidth / vw, window.innerHeight / vh);
    } else if (neeed_sacle == 'fill') {
      rt = Math.min(window.innerWidth / vw, window.innerHeight / vh);
      sx = window.innerWidth / (vw * rt);
      sy = window.innerHeight / (vh * rt);
    } else if (neeed_sacle == 's115') {
      increase(1.15, 1.15);
    } else if (neeed_sacle == 's130') {
      increase(1.34, 1.34);
    } else if (neeed_sacle == 'v115') {
      increase(1.01, 1.15);
    } else if (neeed_sacle == 'v130') {
      increase(1.01, 1.34);
    } else {
      rt = Math.min(window.innerWidth / vw, window.innerHeight / vh);
      vw = vw * rt;
      vh = vh * rt;
      rt = Math.max(window.innerWidth / vw, window.innerHeight / vh);
      sx = rt;
      sy = rt;
    }
    sx = sx.toFixed(2);
    sy = sy.toFixed(2);
    if (Platform.is('orsay') && Storage.field('player') == 'inner' || Storage.field('player_scale_method') == 'calculate') {
      var nw = vw * rt,
        nh = vh * rt;
      var sz = {
        width: Math.round(nw * sx) + 'px',
        height: Math.round(nh * sy) + 'px',
        marginLeft: Math.round(window.innerWidth / 2 - nw * sx / 2) + 'px',
        marginTop: Math.round(window.innerHeight / 2 - nh * sy / 2) + 'px'
      };
    } else {
      var sz = {
        width: Math.round(window.innerWidth) + 'px',
        height: Math.round(window.innerHeight) + 'px',
        transform: sx == 1.00 ? 'unset' : 'scaleX(' + sx + ') scaleY(' + sy + ')'
      };
    }
    $(_video).css(sz);
    neeed_sacle = false;
  }

  /**
   * Сохранить текущие состояние дорожек и сабов
   * @returns {{sub:integer, track:integer, level:integer}}
   */
  function saveParams() {
    var subs = _video.customSubs || _video.webos_subs || _video.textTracks || [];
    var tracks = [];
    if (hls && hls.audioTracks && hls.audioTracks.length) tracks = hls.audioTracks;else if (dash) tracks = dash.getTracksFor('audio');else if (_video.audioTracks && _video.audioTracks.length) tracks = _video.audioTracks;
    if (webos && webos.sourceInfo) tracks = _video.webos_tracks || [];
    if (tracks.length) {
      for (var i = 0; i < tracks.length; i++) {
        if (tracks[i].enabled == true || tracks[i].selected == true) params.track = i;
      }
    }
    if (subs.length) {
      for (var _i = 0; _i < subs.length; _i++) {
        if (subs[_i].enabled == true || subs[_i].selected == true) {
          params.sub = subs[_i].index;
        }
      }
    }
    if (hls && hls.levels) params.level = hls.currentLevel;
    if (dash) params.level = dash.getQualityFor('video');
    console.log('WebOS', 'saved params', params);
    return params;
  }

  /**
   * Очисить состояние
   */
  function clearParamas() {
    params = {};
  }

  /**
   * Загрузитьновое состояние из прошлого
   * @param {{sub:integer, track:integer, level:integer}} saved_params 
   */
  function setParams(saved_params) {
    params = saved_params;
  }

  /**
   * Смотрим есть ли дорожки и сабы
   */
  function loaded$1() {
    var tracks = [];
    var subs = _video.customSubs || _video.textTracks || [];
    console.log('Player', 'video full loaded');
    if (hls) console.log('Player', 'hls test', hls.audioTracks.length);
    if (hls && hls.audioTracks && hls.audioTracks.length) {
      tracks = hls.audioTracks;
      tracks.forEach(function (track) {
        if (hls.audioTrack == track.id) track.selected = true;
        Object.defineProperty(track, "enabled", {
          set: function set(v) {
            if (v) hls.audioTrack = track.id;
          },
          get: function get() {}
        });
      });
    } else if (dash) {
      tracks = dash.getTracksFor('audio');
      tracks.forEach(function (track, i) {
        if (i == 0) track.selected = true;
        track.language = (track.lang + '').replace(/\d+/g, '');
        Object.defineProperty(track, "enabled", {
          set: function set(v) {
            if (v) dash.setCurrentTrack(track);
          },
          get: function get() {}
        });
      });
    } else if (_video.audioTracks && _video.audioTracks.length) tracks = _video.audioTracks;
    console.log('Player', 'tracks', _video.audioTracks);
    if (webos && webos.sourceInfo) {
      tracks = [];
      if (webos_wait.tracks) webosLoadTracks();
      if (webos_wait.subs) webosLoadSubs();
    }
    if (tracks.length) {
      tracks = convertToArray(tracks);
      if (typeof params.track !== 'undefined' && tracks[params.track]) {
        tracks.forEach(function (e) {
          e.selected = false;
        });
        tracks[params.track].enabled = true;
        tracks[params.track].selected = true;
        console.log('Player', 'enable track by default');
      }
      listener$a.send('tracks', {
        tracks: tracks
      });
    }
    if (subs.length) {
      subs = convertToArray(subs);
      if (typeof params.sub !== 'undefined' && subs[params.sub]) {
        subs.forEach(function (e) {
          e.mode = 'disabled';
          e.selected = false;
        });
        subs[params.sub].mode = 'showing';
        subs[params.sub].selected = true;
        subsview(true);
      } else if (Storage.field('subtitles_start')) {
        var full = subs.find(function (s) {
          return (s.label || '').indexOf('олные') >= 0;
        });
        if (full) {
          full.mode = 'showing';
          full.selected = true;
        } else {
          subs[0].mode = 'showing';
          subs[0].selected = true;
        }
        subsview(true);
      }
      listener$a.send('subs', {
        subs: subs
      });
    }
    if (hls && hls.levels) {
      var current_level = 'AUTO';
      hls.levels.forEach(function (level, i) {
        level.title = hlsLevelName(level);
        if (hls.currentLevel == i) {
          current_level = level.title;
          level.selected = true;
        }
        Object.defineProperty(level, "enabled", {
          set: function set(v) {
            if (v) {
              hls.currentLevel = i;
              hls.levels.map(function (e) {
                return e.selected = false;
              });
              level.selected = true;
            }
          },
          get: function get() {}
        });
      });
      if (typeof params.level !== 'undefined' && hls.levels[params.level]) {
        hls.levels.map(function (e) {
          return e.selected = false;
        });
        hls.levels[params.level].enabled = true;
        hls.levels[params.level].selected = true;
        current_level = hls.levels[params.level].title;
      } else {
        if (hls.currentLevel >= 0) current_level = hls.levels[hls.currentLevel].title;
      }
      listener$a.send('levels', {
        levels: hls.levels,
        current: current_level
      });
    }
    if (dash) {
      var bitrates = dash.getBitrateInfoListFor("video"),
        _current_level = 'AUTO';
      bitrates.forEach(function (level, i) {
        level.title = level.width ? level.width + 'x' + level.height : 'AUTO';
        if (i == 0) _current_level = level.title;
        Object.defineProperty(level, "enabled", {
          set: function set(v) {
            if (v) {
              dash.getSettings().streaming.abr.autoSwitchBitrate = false;
              dash.setQualityFor("video", level.qualityIndex);
            }
          },
          get: function get() {}
        });
      });
      if (typeof params.level !== 'undefined' && bitrates[params.level]) {
        bitrates.map(function (e) {
          return e.selected = false;
        });
        dash.getSettings().streaming.abr.autoSwitchBitrate = false;
        bitrates[params.level].enabled = true;
        bitrates[params.level].selected = true;
        _current_level = bitrates[params.level].title;
      }
      listener$a.send('levels', {
        levels: bitrates,
        current: _current_level
      });
    }
  }

  /**
   * Установить собственные субтитры
   * @param {[{index:integer, label:string, url:string}]} subs 
   */
  function customSubs(subs) {
    if (!Arrays.isArray(subs)) return console.log('Player', 'custom subs not array', subs);
    _video.customSubs = Arrays.clone(subs);
    console.log('Player', 'custom subs', subs);
    customsubs = new CustomSubs();
    customsubs.listener.follow('subtitle', function (e) {
      $('> div', subtitles$1).html(e.text ? e.text : '&nbsp;').css({
        display: e.text ? 'inline-block' : 'none'
      });
    });
    var index = -1;
    _video.customSubs.forEach(function (sub) {
      index++;
      if (typeof sub.index == 'undefined') sub.index = index;
      if (!sub.ready) {
        sub.ready = true;
        Object.defineProperty(sub, "mode", {
          set: function set(v) {
            if (v == 'showing') {
              customsubs.load(sub.url);
            }
          },
          get: function get() {}
        });
      }
    });
  }

  /**
   * Включить или выключить субтитры
   * @param {boolean} status 
   */
  function subsview(status) {
    subtitles$1.toggleClass('hide', !status);
  }

  /**
   * Применяет к блоку субтитров пользовательские настройки
   */
  function applySubsSettings() {
    var hasStroke = Storage.field('subtitles_stroke'),
      hasBackdrop = Storage.field('subtitles_backdrop'),
      size = Storage.field('subtitles_size');
    subtitles$1.removeClass('has--stroke has--backdrop size--normal size--large size--small');
    subtitles$1.addClass('size--' + size);
    if (hasStroke) {
      subtitles$1.addClass('has--stroke');
    }
    if (hasBackdrop) {
      subtitles$1.addClass('has--backdrop');
    }
  }

  /**
   * Создать контейнер для видео
   */
  function create$g() {
    var videobox;
    if (Platform.is('tizen') && Storage.field('player') == 'tizen') {
      videobox = AVPlay$1(function (object) {
        _video = object;
      });
    } else if (Platform.is('orsay') && Storage.field('player') == 'orsay') {
      videobox = AVPlay(function (object) {
        _video = object;
      });
    } else {
      videobox = $('<video class="player-video__video" poster="./img/video_poster.png" crossorigin="anonymous"></video>');
      if (Platform.is('apple') && Storage.field('player') !== 'ios') videobox.attr('playsinline', 'true');
      _video = videobox[0];
      if (typeof _video.canPlayType !== 'function') _video.canPlayType = function () {};
      if (Storage.field('player_normalization')) {
        try {
          console.log('Player', 'normalization enabled');
          normalization = new Normalization();
          normalization.attach(_video);
        } catch (e) {
          console.log('Player', 'normalization error:', e.stack);
        }
      }
    }
    applySubsSettings();
    display.append(videobox);
    if (Platform.is('webos') && !webos && !Player.playdata().voiceovers) {
      webos = new create$p(_video);
      webos.callback = function () {
        var src = _video.src;
        var sub = _video.customSubs;
        console.log('WebOS', 'video loaded');
        $(_video).remove();
        if (normalization) normalization.destroy();
        url$3(src, true);
        _video.customSubs = sub;
        webos.repet(_video);
        listener$a.send('reset_continue', {});
      };
      webos.start();
    }
    bind$2();
  }
  function createTube(src) {
    var verify = verifyTube(src);
    if (verify) {
      var videobox = verify.create(function (object) {
        _video = object;
      });
      !!videobox && display.append(videobox);
      bind$2();
      setTimeout(function () {
        load$2(src);
      }, 100);
      return true;
    }
    return false;
  }
  function normalizationVisible(status) {
    if (normalization) normalization.visible(status);
  }

  /**
   * Показать загрузку или нет
   * @param {boolean} status 
   */
  function loader(status) {
    wait = status;
    html$e.toggleClass('video--load', status);
  }

  /**
   * Устанавливаем ссылку на видео
   * @param {string} src 
   */
  function url$3(src, change_quality) {
    loader(true);
    if (hls) {
      hls.destroy();
      hls = false;
    }
    if (dash) {
      dash.destroy();
      dash = false;
    }
    if (createTube(src)) return;
    create$g();
    if (/\.mpd/.test(src) && typeof dashjs !== 'undefined') {
      try {
        if (Platform.is('orsay') && Storage.field('player') == 'orsay') {
          load$2(src);
        } else {
          dash = dashjs.MediaPlayer().create();
          dash.getSettings().streaming.abr.autoSwitchBitrate = false;
          dash.initialize(_video, src, true);
        }
      } catch (e) {
        console.log('Player', 'Dash error:', e.stack);
        load$2(src);
      }
    } else if (/\.m3u8/.test(src)) {
      if (navigator.userAgent.toLowerCase().indexOf('maple') > -1) src += '|COMPONENT=HLS';
      if (typeof Hls !== 'undefined') {
        var use_program = Storage.field('player_hls_method') == 'hlsjs';
        var hls_type = Player.playdata().hls_type;
        var hls_native = _video.canPlayType('application/vnd.apple.mpegurl');

        //если это плеер тайзен, то используем только системный
        if (Platform.is('tizen') && Storage.field('player') == 'tizen') use_program = false;
        //если это плеер orsay, то используем только системный
        else if (Platform.is('orsay') && Storage.field('player') == 'orsay') use_program = false;
        //а если системный и m3u8 не поддерживается, то переключаем на программный
        else if (!use_program && !hls_native) use_program = true;

        //однако, если программный тоже не поддерживается, то переключаем на системный и будет что будет
        if (!Hls.isSupported()) use_program = false;

        //если оглайн выбрал тип hls, то используем его
        if (hls_type == 'hlsjs') use_program = true;else if (hls_type == 'native' && hls_native) use_program = false;
        console.log('Player', 'use program hls:', use_program, 'hlsjs:', Hls.isSupported());
        if (!Platform.is('tizen')) console.log('Player', 'can play vnd.apple.mpegurl', hls_native ? true : false);

        //погнали
        if (use_program) {
          console.log('Player', 'hls start program');
          hls = new Hls({
            manifestLoadTimeout: Player.playdata().hls_manifest_timeout || 10000,
            manifestLoadMaxRetryTimeout: Player.playdata().hls_retry_timeout || 30000,
            xhrSetup: function xhrSetup(xhr, url) {
              xhr.timeout = Player.playdata().hls_manifest_timeout || 10000;
              xhr.ontimeout = function () {
                console.log('Player', 'hls manifestLoadTimeout');
              };
            }
          });
          hls.attachMedia(_video);
          hls.loadSource(src);
          hls.on(Hls.Events.ERROR, function (event, data) {
            console.log('Player', 'hls error', data.reason, data.details, data.fatal);
            if (data.details === Hls.ErrorDetails.MANIFEST_PARSING_ERROR) {
              if (data.reason === "no EXTM3U delimiter") {
                load$2(src);
              } else {
                listener$a.send('error', {
                  error: 'details [' + data.details + '] fatal [' + data.fatal + ']',
                  fatal: data.fatal
                });
              }
            } else {
              listener$a.send('error', {
                error: 'details [' + data.details + '] fatal [' + data.fatal + ']',
                fatal: data.fatal
              });
            }
          });
          hls.on(Hls.Events.MANIFEST_LOADED, function () {
            play$2();
          });
          hls.on(Hls.Events.MANIFEST_PARSED, function (event, data) {
            hls.currentLevel = hlsLevelDefault(hls);
          });
        } else if (!change_quality && !PlayerIPTV.playning()) {
          console.log('Player', 'hls start parse');
          var send_load_ready = false;
          hls_parser = new Hls({
            manifestLoadTimeout: Player.playdata().hls_manifest_timeout || 10000,
            manifestLoadMaxRetryTimeout: Player.playdata().hls_retry_timeout || 30000,
            xhrSetup: function xhrSetup(xhr, url) {
              xhr.timeout = Player.playdata().hls_manifest_timeout || 10000;
              xhr.ontimeout = function () {
                console.log('Player', 'hls manifestLoadTimeout');
              };
            }
          });
          hls_parser.loadSource(src);
          hls_parser.on(Hls.Events.ERROR, function (event, data) {
            console.log('Player', 'hls parse error', data.reason, data.details, data.fatal);
            if (!send_load_ready) load$2(src);
          });
          hls_parser.on(Hls.Events.MANIFEST_LOADED, function () {
            if (hls_parser.audioTracks.length) listener$a.send('translate', {
              where: 'tracks',
              translate: hls_parser.audioTracks.map(function (a) {
                return {
                  name: a.name
                };
              })
            });
            if (hls_parser.subtitleTracks.length) listener$a.send('translate', {
              where: 'subs',
              translate: hls_parser.subtitleTracks.map(function (a) {
                return {
                  label: a.name
                };
              })
            });
            console.log('Player', 'parse hls audio', hls_parser.audioTracks.length, hls_parser.audioTracks.map(function (a) {
              return a.name;
            }));
            console.log('Player', 'parse hls subs', hls_parser.subtitleTracks.length, hls_parser.subtitleTracks.map(function (a) {
              return a.name;
            }));
            if (!hls_parser.audioTracks.length) {
              var start_level = hlsLevelDefault(hls_parser);
              var select_level = start_level >= 0 ? hls_parser.levels[start_level] : hls_parser.levels[hls_parser.levels.length - 1];
              var parsed_levels = hls_parser.levels.map(function (level) {
                return {
                  title: hlsLevelName(level),
                  change_quality: true,
                  url: level.url[0],
                  selected: level === select_level
                };
              });
              console.log('Player', 'set hls levels', parsed_levels);
              listener$a.send('levels', {
                levels: parsed_levels,
                current: hlsLevelName(select_level)
              });
              console.log('Player', 'hls select level url:', select_level.url[0]);
              load$2(select_level.url[0]);
            } else load$2(src);
            send_load_ready = true;
          });
        } else load$2(src);
      } else load$2(src);
    } else load$2(src);
  }

  /**
   * Начать загрузку
   * @param {string} src 
   */
  function load$2(src) {
    if (hls_parser) {
      hls_parser.destroy();
      hls_parser = false;
    }
    _video.src = src;
    console.log('Player', 'video load url:', src);
    _video.load();
    play$2();
  }

  /**
   * Играем
   */
  function play$2() {
    var playPromise;
    try {
      playPromise = _video.play();
    } catch (e) {}
    if (playPromise !== undefined) {
      playPromise.then(function () {
        console.log('Player', 'start plaining');
      })["catch"](function (e) {
        console.log('Player', 'play promise error:', e.message);
      });
    }
    paused.addClass('hide');
    listener$a.send('play', {});
  }

  /**
   * Пауза
   */
  function pause() {
    var pausePromise;
    try {
      pausePromise = _video.pause();
    } catch (e) {}
    if (pausePromise !== undefined) {
      pausePromise.then(function () {
        console.log('Player', 'pause');
      })["catch"](function (e) {
        console.log('Player', 'pause promise error:', e.message);
      });
    }
    paused.removeClass('hide');
    clearTimeout(pause_timer);
    pause_timer = setTimeout(function () {
      paused.addClass('hide');
    }, 4000);
    listener$a.send('pause', {});
  }

  /**
   * Играем или пауза
   */
  function playpause() {
    if (wait || rewind_position) return;
    if (_video.paused) {
      play$2();
      listener$a.send('play', {});
    } else {
      pause();
      listener$a.send('pause', {});
    }
  }

  /**
   * Завершаем перемотку
   * @param {boolean} immediately - завершить немедленно
   */
  function rewindEnd(immediately) {
    clearTimeout(timer$3.rewind_call);
    timer$3.rewind_call = setTimeout(function () {
      _video.currentTime = rewind_position;
      rewind_position = 0;
      rewind_force = 0;
      play$2();
      if (webos) webos.rewinded();
    }, immediately ? 0 : 1000);
  }

  /**
   * Подготовка к перемотке
   * @param {number} position_time - новое время
   * @param {boolean} immediately - завершить немедленно
   */
  function rewindStart(position_time, immediately) {
    if (!_video.duration) return;
    rewind_position = Math.max(0, Math.min(position_time, _video.duration));
    pause();
    if (rewind_position == 0) _video.currentTime = 0;else if (rewind_position == _video.duration) _video.currentTime = _video.duration;
    timer$3.rewind = Date.now();
    listener$a.send('timeupdate', {
      duration: _video.duration,
      current: rewind_position
    });
    listener$a.send('rewind', {});
    rewindEnd(immediately);
  }

  /**
   * Начать перематывать
   * @param {boolean} forward - направление, true - вперед
   * @param {number} custom_step - свое значение в секундах
   */
  function rewind(forward, custom_step) {
    if (_video.duration) {
      var step = Storage.field('player_rewind');
      if (rewind_position == 0) {
        rewind_force = Math.max(5, custom_step || step);
        rewind_position = _video.currentTime;
      }
      rewind_force *= 1.03;
      if (forward) {
        rewind_position += rewind_force;
      } else {
        rewind_position -= rewind_force;
      }
      rewindStart(rewind_position);
    }
  }

  /**
   * Размер видео, масштаб
   * @param {string} type
   */
  function size$1(type) {
    neeed_sacle = type;
    neeed_sacle_last = type;
    scale();
    if (_video.size) _video.size(type);
  }
  function speed(value) {
    neeed_speed = value;
    var fv = value == 'default' ? 1 : parseFloat(value);
    if (_video.speed) _video.speed(fv);else if (webos) webos.speed(fv);else _video.playbackRate = fv;
  }

  /**
   * Перемотка на позицию 
   * @param {number} type 
   */
  function to(seconds) {
    pause();
    try {
      if (seconds == -1) _video.currentTime = Math.max(0, _video.duration - 3);else _video.currentTime = seconds;
    } catch (e) {}
    play$2();
  }
  function enterToPIP() {
    if (!document.pictureInPictureElement && document.pictureInPictureEnabled && _video.requestPictureInPicture) {
      _video.requestPictureInPicture();
    }
  }
  function exitFromPIP() {
    if (document.pictureInPictureElement) {
      document.exitPictureInPicture();
    }
  }
  function togglePictureInPicture() {
    if (document.pictureInPictureElement) exitFromPIP();else enterToPIP();
  }
  function changeVolume(volume) {
    _video.volume = volume;
    Storage.set('player_volume', volume);
  }
  function registerTube(params) {
    if (typeof params.verify === 'function' && typeof params.create === 'function') {
      if (video_tube.indexOf(params) == -1) video_tube.push(params);
      return true;
    }
    return false;
  }
  function verifyTube(src) {
    var find = video_tube.find(function (e) {
      return e.verify(src);
    });
    return find ? find : false;
  }
  function removeTube(params) {
    Arrays.remove(video_tube, params);
  }

  /**
   * Уничтожить
   * @param {boolean} type - сохранить с параметрами
   */
  function destroy$7(savemeta) {
    subsview(false);
    neeed_sacle = false;
    paused.addClass('hide');
    if (webos) webos.destroy();
    $('> div', subtitles$1).empty();
    webos = null;
    webos_wait = {};
    clearTimeout(click_timer);
    var hls_destoyed = false;
    var dash_destoyed = false;
    if (hls) {
      try {
        hls.destroy();
      } catch (e) {}
      hls = false;
      hls_destoyed = true;
    }
    if (hls_parser) {
      try {
        hls_parser.destroy();
      } catch (e) {}
      hls_parser = false;
    }
    if (dash) {
      try {
        dash.destroy();
      } catch (e) {}
      dash = false;
      dash_destoyed = true;
    }
    if (!savemeta) {
      if (customsubs) {
        customsubs.destroy();
        customsubs = false;
      }
    } else {
      Prisma.PlayerInfo.set('bitrate', '');
    }
    exitFromPIP();
    if (_video && !(hls_destoyed || dash_destoyed)) {
      if (_video.destroy) _video.destroy();else {
        _video.src = "";
        _video.load();
      }
    }
    if (normalization) {
      normalization.destroy();
      normalization = false;
    }
    display.empty();
    loader(false);
  }
  function render$a() {
    return html$e;
  }
  var PlayerVideo = {
    init: init$E,
    listener: listener$a,
    url: url$3,
    render: render$a,
    destroy: destroy$7,
    playpause: playpause,
    rewind: rewind,
    play: play$2,
    pause: pause,
    size: size$1,
    speed: speed,
    subsview: subsview,
    customSubs: customSubs,
    to: to,
    video: function video() {
      return _video;
    },
    saveParams: saveParams,
    clearParamas: clearParamas,
    setParams: setParams,
    normalizationVisible: normalizationVisible,
    togglePictureInPicture: togglePictureInPicture,
    changeVolume: changeVolume,
    registerTube: registerTube,
    removeTube: removeTube,
    verifyTube: verifyTube
  };

  function parse$1(data) {
    var result = {
      hash_string: '',
      season: null,
      episode: null,
      serial: !!data.movie.number_of_seasons
    };
    var regexps = [[/\bs(\d+)\.?ep?(\d+)\b/i, 'season', 'episode'], [/\b(\d{1,2})[x\-](\d+)\b/i, 'season', 'episode'], [/\bs(\d{2})(\d{2,3})\b/i, 'season', 'episode'], [/season (\d+) episode (\d+)/i, 'season', 'episode'], [/сезон (\d+) серия (\d+)/i, 'season', 'episode'], [/(\d+) season (\d+) episode/i, 'season', 'episode'], [/(\d+) сезон (\d+) серия/i, 'season', 'episode'], [/episode (\d+)/i, 'episode'], [/серия (\d+)/i, 'episode'], [/(\d+) episode/i, 'episode'], [/(\d+) серия/i, 'episode'], [/season (\d+)/i, 'season'], [/сезон (\d+)/i, 'season'], [/(\d+) season/i, 'season'], [/(\d+) сезон/i, 'season'], [/\bs(\d+)\b/i, 'season'], [/\bep?\.?(\d+)\b/i, 'episode'], [/\b(\d{1,3}) of (\d+)/i, 'episode'], [/\b(\d{1,3}) из (\d+)/i, 'episode'], [/ - (\d{1,3})\b/i, 'episode'], [/\[(\d{1,3})\]/i, 'episode'], [/(\d+) сер/i, 'episode']];
    var folder_regexps = [[/season (\d+)/i, 'season'], [/сезон (\d+)/i, 'season'], [/(\d+) season/i, 'season'], [/(\d+) сезон/i, 'season'], [/\bs(\d+)\b/i, 'season']];
    var parts = data.path.replace(/_/g, ' ').split('/');
    var fname = parts.pop();
    var folder = parts.pop();
    regexps.forEach(function (regexp) {
      var match = fname.match(regexp[0]);
      if (match) {
        var arr = regexp.slice(1);
        arr.forEach(function (a, i) {
          var v = match[i + 1];
          if (v && result[a] == null) result[a] = parseInt(v);
        });
      }
    });
    if (folder && result.season == null) {
      folder_regexps.forEach(function (regexp) {
        var match = folder.match(regexp[0]);
        if (match) {
          var arr = regexp.slice(1);
          arr.forEach(function (a, i) {
            var v = match[i + 1];
            if (v && result[a] == null) result[a] = parseInt(v);
          });
        }
      });
    }
    if (result.season == null) result.season = data.movie.number_of_seasons ? 1 : 0;
    if (result.episode == null) {
      var match = data.filename.replace(/_/g, ' ').trim().match(/^(\d{1,3})\b/i);
      result.episode = match ? parseInt(match[1]) : 0;
    }
    if (!data.is_file) {
      if (data.movie.number_of_seasons) {
        result.hash_string = [result.season, result.season > 10 ? ':' : '', result.episode, data.movie.original_title].join('');
      } else if (data.movie.original_title && !result.serial) {
        result.hash_string = data.movie.original_title;
      } else {
        result.hash_string = data.path;
      }
    } else {
      result.hash_string = data.path;
    }
    return result;
  }
  var EpisodeParser = {
    parse: parse$1
  };

  var network$7 = new create$e();
  function url$2() {
    var u = ip();
    return u ? Utils$2.checkEmptyUrl(u) : u;
  }
  function ip() {
    var one = Storage.get('torrserver_url');
    var two = Storage.get('torrserver_url_two');
    return Storage.field('torrserver_use_link') == 'two' ? two || one : one || two;
  }
  function my(success, fail) {
    var data = JSON.stringify({
      action: 'list'
    });
    clear$5();
    network$7.silent(url$2() + '/torrents', function (result) {
      if (result.length) success(result);else fail();
    }, fail, data);
  }
  function cache$1(hash, success, fail) {
    var data = JSON.stringify({
      action: 'get',
      hash: hash
    });
    network$7.silent(url$2() + '/cache', success, fail, data);
  }
  function add$7(object, success, fail) {
    var data = JSON.stringify({
      action: 'add',
      link: object.link,
      title: '' + (object.title + '').replace('??', '?'),
      poster: object.poster,
      data: object.data ? JSON.stringify(object.data) : '',
      save_to_db: true
    });
    clear$5();
    network$7.silent(url$2() + '/torrents', success, fail, data);
  }
  function hash$1(object, success, fail) {
    var data = JSON.stringify({
      action: 'add',
      link: object.link,
      title: '' + (object.title + '').replace('??', '?'),
      poster: object.poster,
      data: object.data ? JSON.stringify(object.data) : '',
      save_to_db: Storage.get('torrserver_savedb', 'false')
    });
    clear$5();
    network$7.silent(url$2() + '/torrents', success, function (a, c) {
      fail(network$7.errorDecode(a, c));
    }, data);
  }
  function files$1(hash, success, fail) {
    var data = JSON.stringify({
      action: 'get',
      hash: hash
    });
    clear$5();
    network$7.timeout(2000);
    network$7.silent(url$2() + '/torrents', function (json) {
      if (json.file_stats) {
        success(json);
      }
    }, fail, data);
  }
  function connected(success, fail) {
    clear$5();
    network$7.timeout(5000);
    network$7.silent(url$2() + '/settings', function (json) {
      if (typeof json.CacheSize == 'undefined') {
        fail(Lang.translate('torrent_error_nomatrix'));
      } else {
        success(json);
      }
    }, function (a, c) {
      fail(network$7.errorDecode(a, c));
    }, JSON.stringify({
      action: 'get'
    }));
  }
  function stream(path, hash, id) {
    return url$2() + '/stream/' + encodeURIComponent(path.split('\\').pop().split('/').pop()) + '?link=' + hash + '&index=' + id + '&' + (Storage.field('torrserver_preload') ? 'preload' : 'play');
  }
  function drop(hash, success, fail) {
    var data = JSON.stringify({
      action: 'drop',
      hash: hash
    });
    clear$5();
    network$7.silent(url$2() + '/torrents', success, fail, data, {
      dataType: 'text'
    });
  }
  function remove$2(hash, success, fail) {
    var data = JSON.stringify({
      action: 'rem',
      hash: hash
    });
    clear$5();
    network$7.silent(url$2() + '/torrents', success, fail, data, {
      dataType: 'text'
    });
  }
  function parse(data) {
    var result = EpisodeParser.parse(data);
    result.hash = Utils$2.hash(result.hash_string);
    return result;
  }
  function clearFileName(files) {
    var combo = [];
    files.forEach(function (element) {
      var spl = element.path.split('/');
      var nam = spl[spl.length - 1].split('.');
      if (nam.length > 1) nam.pop();
      nam = nam.join('.');
      element.path_human = Utils$2.pathToNormalTitle(nam, false).trim();
      if (spl.length > 1) {
        spl.pop();
        element.folder_name = Utils$2.pathToNormalTitle(spl.pop(), false).trim();
      }
    });
    if (files.length > 1) {
      files.forEach(function (element) {
        var spl = element.path_human.split(' ');
        for (var i = spl.length - 1; i >= 0; i--) {
          var com = spl.join(' ');
          if (combo.indexOf(com) == -1) combo.push(com);
          spl.pop();
        }
      });
      combo.sort(function (a, b) {
        return a.length > b.length ? -1 : a.length < b.length ? 1 : 0;
      });
      var _loop = function _loop() {
        var com = combo[i];
        var len = files.filter(function (f) {
          return f.path_human.slice(0, com.length) == com;
        }).length;
        if (len < files.length) Arrays.remove(combo, com);
      };
      for (var i = combo.length - 1; i >= 0; i--) {
        _loop();
      }
      files.forEach(function (element) {
        for (var _i = 0; _i < combo.length; _i++) {
          var com = combo[_i];
          var inx = element.path_human.indexOf(com);
          if (inx >= 0 && com !== element.path_human) {
            element.path_human = element.path_human.slice(com.length).trim();
            break;
          }
        }
      });
    }
    return files;
  }
  function clear$5() {
    network$7.clear();
  }
  function error$1() {
    var temp = Template.get('torrent_error', {
      ip: ip()
    });
    var list = temp.find('.torrent-checklist__list > li');
    var info = temp.find('.torrent-checklist__info > div');
    var next = temp.find('.torrent-checklist__next-step');
    var prog = temp.find('.torrent-checklist__progress-bar > div');
    var comp = temp.find('.torrent-checklist__progress-steps');
    var btn = temp.find('.selector');
    var position = -2;
    function makeStep() {
      position++;
      list.slice(0, position + 1).addClass('wait');
      var total = list.length;
      comp.text(Lang.translate('torrent_error_made') + ' ' + Math.max(0, position) + ' ' + Lang.translate('torrent_error_from') + ' ' + total);
      if (position > list.length) {
        Modal.close();
        Controller.toggle('content');
      } else if (position >= 0) {
        info.addClass('hide');
        info.eq(position).removeClass('hide');
        var next_step = list.eq(position + 1);
        prog.css('width', Math.round(position / total * 100) + '%');
        list.slice(0, position).addClass('check');
        btn.text(position < total ? Lang.translate('torrent_error_next') : Lang.translate('torrent_error_complite'));
        next.text(next_step.length ? '- ' + next_step.text() : '');
      }
    }
    makeStep();
    btn.on('hover:enter', function () {
      makeStep();
    });
    Modal.title(Lang.translate('torrent_error_connect'));
    Modal.update(temp);
    Controller.add('modal', {
      invisible: true,
      toggle: function toggle() {
        Controller.collectionSet(temp);
        Controller.collectionFocus(false, temp);
      },
      back: function back() {
        Modal.close();
        Controller.toggle('content');
      }
    });
    Controller.toggle('modal');
  }
  var Torserver = {
    ip: ip,
    my: my,
    add: add$7,
    url: url$2,
    hash: hash$1,
    files: files$1,
    clear: clear$5,
    drop: drop,
    stream: stream,
    remove: remove$2,
    connected: connected,
    parse: parse,
    error: error$1,
    cache: cache$1,
    clearFileName: clearFileName
  };

  var html$d;
  var listener$9 = start$8();
  var network$6 = new create$e();
  var elems;
  var error, stat_timer;
  function init$D() {
    html$d = Template.get('player_info');
    html$d.find('.player-info__body').prepend(HeadBackward('Плеер'));
    elems = {
      name: $('.player-info__name,.head-backward__title', html$d),
      size: $('.value--size span', html$d),
      stat: $('.value--stat span', html$d),
      speed: $('.value--speed span', html$d),
      error: $('.player-info__error', html$d),
      pieces: $('.value--pieces', html$d),
      format: $('.value--format span', html$d)
    };
    Utils$2.time(html$d);
  }

  /**
   * Установить значение
   * @param {string} need
   * @param {string|{width,height}} value 
   */
  function set$2(need, value) {
    if (need == 'name') elems.name.html(value);else if (need == 'size' && value.width && value.height) elems.size.text(value.width + 'x' + value.height);else if (need == 'error') {
      clearTimeout(error);
      elems.error.removeClass('hide').text(value);
      error = setTimeout(function () {
        elems.error.addClass('hide');
      }, 10000);
    } else if (need == 'stat') stat$2(value);else if (need == 'bitrate') elems.stat.html(value);else if (need == 'format') elems.format.html(value);
  }
  function pieces(cache) {
    elems.pieces.empty();
    if (cache.Readers.length) {
      var reader = cache.Readers[0].Reader;
      var end = cache.Readers[0].End;
      var start = reader;
      var total = end - reader;
      var dots = 5;
      var loaded = 0;
      while (cache.Pieces[start] && cache.Pieces[start].Completed && start < end) {
        start++;
        loaded++;
      }
      var percent = loaded / total * 100;
      for (var i = 0; i < dots; i++) {
        var color = '';
        var filled = Math.round(dots * (loaded / total)) >= i;
        if (i == 0) {
          if (percent > 80) color = 'green';else if (percent >= 40) color = 'yellow';else color = 'red';
        } else if (filled) color = 'active';
        elems.pieces.append('<span class="' + color + '"></span>');
      }
    }
  }

  /**
   * Показываем статистику по торренту
   * @param {string} url 
   */
  function stat$2(url) {
    var wait = 0;
    elems.stat.text('- / - • - ' + Lang.translate('connected_seeds'));
    elems.speed.text('--');
    var update = function update() {
      // если панель скрыта, то зачем каждую секунду чекать? хватит и 5 сек
      // проверено, если ставить на паузу, разадача удаляется, но если чекать постоянно, то все норм
      if (!html$d.hasClass('info--visible')) {
        wait++;
        if (wait <= 5) return;else wait = 0;
      }
      network$6.timeout(2000);
      network$6.silent(url.replace('preload', 'stat').replace('play', 'stat'), function (data) {
        elems.stat.text((data.active_peers || 0) + ' / ' + (data.total_peers || 0) + ' • ' + (data.connected_seeders || 0) + ' ' + Lang.translate('connected_seeds'));
        elems.speed.text(Utils$2.bytesToSize(data.download_speed ? data.download_speed * 8 : 0, true));
        var hash = url.match(/link=(.*?)\&/);
        if (hash) {
          Torserver.cache(hash[1], function (cache) {
            pieces(cache);
            listener$9.send('stat', {
              data: data,
              cache: cache
            });
          }, function () {
            listener$9.send('stat', {
              data: data
            });
          });
        } else {
          listener$9.send('stat', {
            data: data
          });
        }
      });
    };
    stat_timer = setInterval(update, 2000);
    update();
  }

  /**
   * Показать скрыть инфо
   * @param {boolean} status 
   */
  function toggle$6(status) {
    html$d.toggleClass('info--visible', status);
  }
  function loading$2() {
    elems.size.text(Lang.translate('loading') + '...');
  }

  /**
   * Уничтожить
   */
  function destroy$6() {
    elems.size.text(Lang.translate('loading') + '...');
    elems.stat.text('');
    elems.speed.text('');
    elems.error.addClass('hide');
    elems.pieces.empty();
    elems.format.text('');
    clearTimeout(error);
    clearInterval(stat_timer);
    network$6.clear();
  }
  function render$9() {
    return html$d;
  }
  var PlayerInfo = {
    init: init$D,
    listener: listener$9,
    render: render$9,
    set: set$2,
    toggle: toggle$6,
    loading: loading$2,
    destroy: destroy$6
  };

  var listener$8 = start$8();
  var current = '';
  var playlist$1 = [];
  var _position = 0;

  /**
   * Показать плейлист
   */
  function show$7() {
    active$4();
    var enabled = Controller.enabled();
    Select.show({
      title: Lang.translate('player_playlist'),
      items: playlist$1,
      onSelect: function onSelect(a) {
        Controller.toggle(enabled.name);
        listener$8.send('select', {
          playlist: playlist$1,
          item: a,
          position: _position
        });
      },
      onBack: function onBack() {
        Controller.toggle(enabled.name);
      }
    });
  }

  /**
   * Установить активным
   */
  function active$4() {
    playlist$1.forEach(function (element) {
      element.selected = element.url == current;
      if (element.selected) _position = playlist$1.indexOf(element);
    });
  }

  /**
   * Назад
   */
  function prev() {
    active$4();
    if (_position > 0) {
      listener$8.send('select', {
        playlist: playlist$1,
        position: _position - 1,
        item: playlist$1[_position - 1]
      });
    }
  }

  /**
   * Далее
   */
  function next$1() {
    active$4();
    if (_position < playlist$1.length - 1) {
      listener$8.send('select', {
        playlist: playlist$1,
        position: _position + 1,
        item: playlist$1[_position + 1]
      });
    }
  }

  /**
   * Можно ли далее
   * @returns {boolean}
   */
  function canNext() {
    active$4();
    return _position < playlist$1.length - 1;
  }

  /**
   * Установить плейлист
   * @param {[{title:string, url:string}]} p 
   */
  function set$1(p) {
    playlist$1 = p;
    playlist$1.forEach(function (l, i) {
      if (l.url == current) _position = i;
    });
    listener$8.send('set', {
      playlist: playlist$1,
      position: _position
    });
  }

  /**
   * Получить список
   * @returns {[{title:string, url:string}]}
   */
  function get$6() {
    return playlist$1;
  }

  /**
   * Установить текуший урл
   * @param {string} u 
   */
  function url$1(u) {
    current = u;
  }
  var PlayerPlaylist = {
    listener: listener$8,
    active: active$4,
    show: show$7,
    url: url$1,
    get: get$6,
    canNext: canNext,
    set: set$1,
    prev: prev,
    next: next$1,
    position: function position() {
      return _position;
    }
  };

  var Nature = /*#__PURE__*/function () {
    function Nature() {
      _classCallCheck(this, Nature);
      this.slide = 'one';
      this.direct = ['lt', 'rt', 'br', 'lb', 'ct'];
    }
    return _createClass(Nature, [{
      key: "create",
      value: function create() {
        this.html = Template.get('screensaver');
        this.timer = setInterval(this.next.bind(this), 30000);
        this.time = Utils$2.time(this.html);
        this.time.tik();
        this.next();
      }
    }, {
      key: "next",
      value: function next() {
        var _this = this;
        var image = 'https://picsum.photos/1600/900?v=' + Math.random();
        var to_img = $('.screensaver__slides-' + (this.slide == 'one' ? 'two' : 'one'), this.html)[0];
        to_img.onload = function () {
          $(to_img).removeClass(_this.direct.join(' ') + ' animate').addClass(_this.direct[Math.floor(Math.random() * _this.direct.length)]);
          setTimeout(function () {
            $('.screensaver__slides-' + _this.slide, _this.html).removeClass('visible');
            _this.slide = _this.slide == 'one' ? 'two' : 'one';
            $(to_img).addClass('visible').addClass('animate');
          }, 100);
        };
        to_img.onerror = this.next.bind(this);
        to_img.src = image;
      }
    }, {
      key: "render",
      value: function render() {
        return this.html;
      }
    }, {
      key: "destroy",
      value: function destroy() {
        clearInterval(this.timer);
        clearInterval(this.time.timer);
        this.html.remove();
      }
    }]);
  }();

  var Chrome = /*#__PURE__*/function () {
    function Chrome() {
      _classCallCheck(this, Chrome);
    }
    return _createClass(Chrome, [{
      key: "create",
      value: function create() {
        this.html = $('<div class="screensaver-chrome"><iframe src="https://clients3.google.com/cast/chromecast/home" class="screensaver-chrome__iframe"></iframe><div class="screensaver-chrome__overlay"></div></div>');
      }
    }, {
      key: "render",
      value: function render() {
        return this.html;
      }
    }, {
      key: "destroy",
      value: function destroy() {
        this.html.remove();
      }
    }]);
  }();

  var Aerial = /*#__PURE__*/function () {
    function Aerial(params) {
      _classCallCheck(this, Aerial);
      this.params = params;
      this.net = new create$e();
      this.visible = false;
      this.items = [];
      this.opacity = 0;
      this.transition_time = 4000;
      this.transition_timeout;
    }
    return _createClass(Aerial, [{
      key: "create",
      value: function create() {
        var _this = this;
        this.html = Template.get('screensaver');
        this.preload = $('<div class="screensaver__preload"></div>');
        this.video = $('<video class="screensaver__video" muted="" preload=""></video>')[0];
        this.overlay = $('<div class="screensaver__video-overlay"></div>');
        this.video.addEventListener('timeupdate', function () {
          if (_this.video.duration) {
            var visible = _this.video.currentTime > 0 && _this.video.currentTime < _this.video.duration - 5;
            var points = _this.object.pointsOfInterest;
            if (visible !== _this.visible) {
              _this.visible = visible;
              _this.info.toggleClass('visible', visible);
              if (_this.visible) _this.fadeVideoOut(_this.transition_time);else _this.fadeVideoIn(_this.transition_time);
            }
            if (_this.video.currentTime == _this.video.duration && !_this.wait_load) {
              _this.wait_load = true;
              _this.select();
              _this.play();
            }
            if (points) {
              for (var time in points) {
                var text = points[time];
                if (parseInt(time) <= _this.video.currentTime && _this.tagline.text_ready !== text) {
                  _this.tagline.text_ready = text;
                  _this.tagline.text(text);
                }
              }
            }
          }
        });
        this.info = $("<div class=\"screensaver__title\">\n            <div class=\"screensaver__title-name\"></div>\n            <div class=\"screensaver__title-tagline\"></div>\n        </div>");
        this.title = this.info.find('.screensaver__title-name');
        this.tagline = this.info.find('.screensaver__title-tagline');
        this.html.prepend(this.preload);
        this.html.prepend(this.overlay);
        this.html.prepend(this.video);
        this.html.find('.screensaver__slides').remove();
        this.html.find('.screensaver__gradient').after(this.info);
        this.time = Utils$2.time(this.html);
        this.time.tik();
        this.cache(function () {
          _this.select();
          _this.play();
        });
      }
    }, {
      key: "select",
      value: function select() {
        this.object = this.items[Math.floor(Math.random() * this.items.length)];
        this.title.text(this.object.name.replace(/\s\d$/, ''));
        this.tagline.text(Utils$2.capitalizeFirstLetter(this.object.type));
      }
    }, {
      key: "fadeVideoIn",
      value: function fadeVideoIn(time) {
        if (time > 0) {
          this.transition_timeout = setTimeout(this.fadeVideoIn.bind(this), 16, time - 16);
        }
        this.opacity = 1 - time / this.transition_time;
        this.overlay[0].style.opacity = this.opacity;
      }
    }, {
      key: "fadeVideoOut",
      value: function fadeVideoOut(time) {
        if (time > 0) {
          this.transition_timeout = setTimeout(this.fadeVideoOut.bind(this), 16, time - 16);
        }
        this.opacity = time / this.transition_time;
        this.overlay[0].style.opacity = this.opacity;
      }
    }, {
      key: "play",
      value: function play() {
        var _this2 = this;
        this.video.src = this.object.src.H2641080p.replace('https:', 'http:');
        this.video.load();
        var playPromise;
        try {
          playPromise = this.video.play();
        } catch (e) {}
        var startPlay = function startPlay() {
          console.log('Screesaver', 'playing');
          _this2.preload.remove();
          _this2.wait_load = false;
        };
        if (playPromise !== undefined) {
          playPromise.then(function () {
            return startPlay();
          })["catch"](function (e) {
            console.log('Player', 'play promise error:', e.message);
          });
        } else startPlay();
      }
    }, {
      key: "cache",
      value: function cache(call) {
        var _this3 = this;
        this.items = Storage.get('screensaver_aerial_items', '[]');
        if (this.items.length) call();else {
          this.net.silent('https://raw.githubusercontent.com/OrangeJedi/Aerial/master/videos.json', function (json) {
            _this3.items = json.filter(function (a) {
              return a.src.H2641080p;
            });
            Storage.set('screensaver_aerial_items', _this3.items);
            call();
          });
        }
      }
    }, {
      key: "render",
      value: function render() {
        return this.html;
      }
    }, {
      key: "destroy",
      value: function destroy() {
        this.html.remove();
        this.net.clear();
        clearTimeout(this.transition_timeout);
      }
    }]);
  }();

  var Screensaver$1 = /*#__PURE__*/function () {
    function Screensaver() {
      _classCallCheck(this, Screensaver);
      this.listener = start$8();
      this.enabled = false;
      this.worked = false;
      this.screensaver;
      this.timer;
      this.time_reset = 0;
      this.time_start = 0;
      this.class_list = {
        nature: Nature,
        aerial: Aerial,
        chrome: Chrome
      };
    }
    return _createClass(Screensaver, [{
      key: "init",
      value: function init() {
        var _this = this;
        this.html = $('<div class="screensaver-layer"></div>');
        this.html.on('click', this.stop.bind(this));
        $('body').append(this.html);
        this.resetTimer();
        Keypad.listener.follow('keydown', function (e) {
          _this.resetTimer();
          if (_this.worked) {
            _this.stopSlideshow();
            e.event.preventDefault();
          }
        });
        Keypad.listener.follow('keyup', function (e) {
          if (_this.worked) e.event.preventDefault();
        });
        $(window).on('mousedown', function (e) {
          _this.resetTimer();
        });
        $(window).on('focus', this.resetTimer.bind(this));
      }
    }, {
      key: "toggle",
      value: function toggle(enabled) {
        this.enabled = enabled;
        this.resetTimer();
        this.listener.send('toggle', {
          status: this.enabled
        });
      }
    }, {
      key: "enable",
      value: function enable() {
        this.toggle(true);
      }
    }, {
      key: "disable",
      value: function disable() {
        this.toggle(false);
      }
    }, {
      key: "isWorked",
      value: function isWorked() {
        return this.enabled ? this.worked : this.enabled;
      }
    }, {
      key: "stop",
      value: function stop() {
        if (this.isWorked()) this.stopSlideshow();
      }

      /* Зачем чтобы выгорали olde панели, делаем рандом тайм. */
    }, {
      key: "setRandomPosition",
      value: function setRandomPosition() {
        var positions = [{
          top: '10%',
          right: '5%',
          bottom: 'auto',
          left: 'auto',
          textAlign: 'right'
        }, {
          top: 'auto',
          right: '5%',
          bottom: '10%',
          left: 'auto',
          textAlign: 'right'
        }, {
          top: '10%',
          right: 'auto',
          bottom: 'auto',
          left: '5%',
          textAlign: 'left'
        }];
        var randomPosition = positions[Math.floor(Math.random() * positions.length)];
        var datetimeElement = this.html.find('.screensaver__datetime');
        if (datetimeElement.length) {
          datetimeElement.css(randomPosition);
        }
      }
    }, {
      key: "startPositionChange",
      value: function startPositionChange() {
        var _this2 = this;
        this.setRandomPosition(); // Устанавливаем начальную позицию
        this.positionInterval = setInterval(function () {
          _this2.setRandomPosition();
        }, 15000); // 15000 миллисекунд = 15 секунд
      }
    }, {
      key: "stopPositionChange",
      value: function stopPositionChange() {
        if (this.positionInterval) {
          clearInterval(this.positionInterval);
          this.positionInterval = null;
        }
      }
    }, {
      key: "show",
      value: function show(type, params) {
        clearTimeout(this.timer);
        this.listener.send('start', {});
        var select = Storage.field('screensaver_type');
        if (typeof type == 'string') select = type;
        var Class = Chrome;
        if (this.class_list[select]) Class = this.class_list[select];
        this.screensaver = new Class(params);
        this.screensaver.create();
        this.html.append(this.screensaver.render());
        this.startPositionChange();
        this.html.fadeIn(300);
        this.worked = true;
      }
    }, {
      key: "resetTimer",
      value: function resetTimer() {
        var _this3 = this;
        clearTimeout(this.timer);
        this.time_reset = Date.now();
        if (!Storage.field('screensaver') || !this.enabled || this.worked) return;
        var timeout = 1000 * 60 * Storage.field('screensaver_time');
        this.timer = setTimeout(function () {
          /* для ведра, когда в приложении появляетя фокус срабатывает таймер */
          if (Date.now() - _this3.time_reset <= timeout + 100) _this3.show();else _this3.resetTimer();
        }, timeout);
      }
    }, {
      key: "stopSlideshow",
      value: function stopSlideshow() {
        var _this4 = this;
        this.worked = false;
        this.stopPositionChange();
        this.html.fadeOut(300, function () {
          _this4.html.removeClass('visible');
          if (_this4.screensaver) {
            _this4.screensaver.destroy();
            _this4.screensaver = false;
          }
        });
        this.resetTimer();
        this.listener.send('stop', {});
      }
    }]);
  }();
  var Screensaver$2 = new Screensaver$1();

  var loaded_data = {
    ad: [],
    time: 0
  };
  var last_responce = {};
  function stat$1(method, name) {
    var additionalData = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : {};
    var movie = Storage.get('activity', '{}').movie;
    var movie_genres = [];
    var movie_id = movie ? movie.id : 0;
    var movie_imdb = movie ? movie.imdb_id : '';
    var movie_type = movie ? movie.original_name ? 'tv' : 'movie' : 'movie';
    try {
      movie_genres = movie.genres.map(function (g) {
        return g.id;
      });
    } catch (e) {}
    var paramData = _objectSpread2({
      platform: Platform.get(),
      type: 'vast',
      method: method,
      name: name,
      uid: getUid(),
      guid: getGuid(),
      movie_id: movie_id,
      movie_genres: movie_genres.join(','),
      movie_imdb: movie_imdb,
      movie_type: movie_type
    }, additionalData);

    // Преобразуем в строку параметров
    var params = Object.keys(paramData).map(function (key) {
      return encodeURIComponent(key) + '=' + encodeURIComponent(paramData[key]);
    }).join('&');
    $.ajax({
      dataType: 'text',
      url: Utils$2.protocol() + object$2.pris_domain + '/api/ad/stat?' + params.toString()
    });
  }
  function log(data) {
    var movie = Storage.get('activity', '{}').movie;
    var movie_genres = [];
    var movie_id = movie ? movie.id : 0;
    var movie_imdb = movie ? movie.imdb_id : '';
    var movie_type = movie ? movie.original_name ? 'tv' : 'movie' : 'movie';
    try {
      movie_genres = movie.genres.map(function (g) {
        return g.id;
      });
    } catch (e) {}
    $.ajax({
      type: 'POST',
      dataType: 'text',
      url: Utils$2.protocol() + object$2.pris_domain + '/api/ad/log',
      data: _objectSpread2(_objectSpread2({
        platform: Platform.get(),
        deviceUid: getUid(),
        guid: getGuid(),
        movieId: movie_id,
        movieGenres: movie_genres.join(','),
        movieImdb: movie_imdb,
        movieType: movie_type
      }, data), last_responce)
    });
    last_responce = {};
  }
  function getGuid() {
    var guid = Storage.get('vast_device_guid', '');
    if (!guid || guid.indexOf('00000000') === 0) {
      guid = Utils$2.guid();
      Storage.set('vast_device_guid', guid);
    }
    return guid;
  }
  function getUid() {
    var uid = Storage.get('vast_device_uid', '');
    if (!uid) {
      uid = Utils$2.uid(15);
      Storage.set('vast_device_uid', uid);
    }
    return uid;
  }
  window.adv_logs_responce_event = function (e) {
    last_responce = {
      status: e.status,
      text: e.text
    };
    console.log('Ad', 'logs responce', last_responce);
  };
  var Vast = /*#__PURE__*/function () {
    function Vast(num, vast_url, vast_msg) {
      _classCallCheck(this, Vast);
      this.network = new create$e();
      this.listener = start$8();
      this.paused = false;
      this.num = num;
      this.vast_url = vast_url;
      this.vast_msg = vast_msg;
      if (Date.now() - loaded_data.time > 1000 * 60 * 60) this.load();else if (loaded_data.ad.length) setTimeout(this.start.bind(this), 100);else this.load();
    }
    return _createClass(Vast, [{
      key: "load",
      value: function load() {
        var _this = this;
        if (this.vast_url) return setTimeout(this.start.bind(this), 100);
        var domain = object$2.pris_domain;
        this.network.silent(Utils$2.protocol() + domain + '/api/ad/vast', function (data) {
          loaded_data.time = Date.now();
          loaded_data.ad = data.ad.filter(function (a) {
            return a.active;
          });
          loaded_data.ad = loaded_data.ad.filter(function (a) {
            return a.platforms ? a.platforms.indexOf(Platform.get()) >= 0 : true;
          });
          if (loaded_data.ad.length) _this.start();else _this.listener.send('empty');
        }, function () {
          _this.listener.send('empty');
        });
      }
    }, {
      key: "get",
      value: function get() {
        var list = loaded_data.ad;
        if (this.num > 1 && loaded_data.selected) {
          list = loaded_data.ad.filter(function (ad) {
            return ad.name !== loaded_data.selected.name;
          });
        }
        if (list.length === 0) list = loaded_data.ad;

        // Шаг 1: Создаем "взвешенный массив"
        var weightedArray = [];
        list.forEach(function (ad) {
          // Добавляем элемент в массив столько раз, каков его приоритет
          for (var i = 0; i < ad.priority; i++) {
            weightedArray.push(ad);
          }
        });

        // Шаг 2: Выбираем случайный элемент из взвешенного массива
        if (weightedArray.length === 0) {
          return null; // Если нет приоритетов, вернуть null
        }
        var randomIndex = Math.floor(Math.random() * weightedArray.length);
        loaded_data.selected = weightedArray[randomIndex];
        return loaded_data.selected;
      }
    }, {
      key: "start",
      value: function start() {
        var _this2 = this;
        var block = this.vast_url ? {
          url: this.vast_url,
          name: 'plugin'
        } : this.get();
        var movie = Storage.get('activity', '{}').movie;
        var movie_genres = [];
        var movie_id = movie ? movie.id : 0;
        var movie_imdb = movie ? movie.imdb_id : '';
        var movie_type = movie ? movie.original_name ? 'tv' : 'movie' : 'movie';
        try {
          movie_genres = movie.genres.map(function (g) {
            return g.id;
          });
          if (block.whitout_genre && movie.genres.find(function (g) {
            return g.id === block.whitout_genre;
          })) return this.listener.send('empty');
        } catch (e) {}
        stat$1('launch', block.name);
        this.block = Template.js('ad_video_block');
        this.block.find('video').remove();
        this.block.find('.ad-video-block__text').text(Lang.translate('ad') + ' - ' + Lang.translate('ad_disable')).toggleClass('hide', Boolean(this.vast_url));
        this.block.find('.ad-video-block__info').text('');
        if (this.vast_msg) this.block.find('.ad-video-block__text').text(this.vast_msg).toggleClass('hide', false);
        var skip = this.block.find('.ad-video-block__skip');
        var progressbar = this.block.find('.ad-video-block__progress-fill');
        var loader = this.block.find('.ad-video-block__loader');
        var container = this.block.find('.ad-video-block__vast');
        var player;
        var timer;
        var timer_end;
        var last_progress = Date.now();
        var playning = true;
        var create_time = Date.now();
        var adInterval;
        var adReadySkip;
        var adStarted;
        var adDuration = 0;
        var error = function error(code, msg) {
          _this2.block.remove();
          clearTimeout(timer);
          clearInterval(timer_end);
          console.log('Ad', 'error', code, msg);
          _this2.listener.send('error');
          stat$1('error', block.name);
          stat$1('error_' + code, block.name);
          log({
            code: code,
            name: block.name,
            message: msg
          });
        };
        function initialize() {
          var _this3 = this;
          container.style.opacity = 0;
          player = new VASTPlayer(container);
          player.once('AdStopped', function () {
            stat$1('complete', block.name);
            console.log('Ad', 'complete');
            clearTimeout(timer);
            clearInterval(timer_end);
            clearInterval(adInterval);
            _this3.destroy();
          });
          player.on('AdPaused', function () {
            console.log('Ad', 'event', 'PAUSE');
            playning = false;
          });
          player.on('AdPlaying', function () {
            console.log('Ad', 'event', 'PLAY');
            playning = true;
          });
          player.on('AdVideoStart', function () {
            console.log('Ad', 'event', 'VIDEO_START');
            var video = player.container.find('video');
            if (video) {
              video.addEventListener('pause', function () {
                console.log('Ad', 'event', 'PAUSE');
                playning = false;
              });
            }
          });
          player.once('AdStarted', onAdStarted.bind(this));
          var pixel_ratio = window.devicePixelRatio || 1;
          var u = block.url.replace('{RANDOM}', Math.round(Date.now() * Math.random()));
          u = u.replace(/{TIME}/g, Date.now());
          u = u.replace(/{WIDTH}/g, Math.round(window.innerWidth * pixel_ratio));
          u = u.replace(/{HEIGHT}/g, Math.round(window.innerHeight * pixel_ratio));
          u = u.replace(/{PLATFORM}/g, Platform.get());
          u = u.replace(/{UID}/g, encodeURIComponent(getUid()));
          u = u.replace(/{PIXEL}/g, pixel_ratio);
          u = u.replace(/{GUID}/g, encodeURIComponent(getGuid()));
          u = u.replace(/{MOVIE_ID}/g, movie_id);
          u = u.replace(/{MOVIE_GENRES}/g, movie_genres.join(','));
          u = u.replace(/{MOVIE_IMDB}/g, movie_imdb);
          u = u.replace(/{MOVIE_TYPE}/g, movie_type);
          player.load(u).then(function () {
            return player.startAd();
          })["catch"](function (reason) {
            error(100, reason.message);
          });
        }
        function onAdStarted() {
          var _this4 = this;
          console.log('Ad', 'event', 'STARTED');
          container.style.opacity = 1;
          if (!adStarted) stat$1('started', block.name);
          adStarted = true;
          clearTimeout(timer);
          clearInterval(timer_end);
          try {
            loader.remove();
          } catch (e) {}
          if (player.adDuration) {
            adDuration = player.adDuration;
            clearInterval(adInterval);
            adInterval = setInterval(updateAdProgress, 100);
          }
          timer_end = setInterval(function () {
            if (Date.now() - last_progress > 1000 * 10 && playning) stop.bind(_this4)();
          }, 1000);
        }
        function updateAdProgress() {
          var remainingTime = player.adRemainingTime;
          var progress = Math.min(100, (1 - remainingTime / adDuration) * 100);
          last_progress = Date.now();
          progressbar.style.width = progress + '%';
          adReadySkip = adDuration > 60 ? adDuration - remainingTime > 45 : progress > (block.progress || 60);
          skip.find('span').text(Lang.translate(adReadySkip ? 'ad_skip' : Math.round(remainingTime)));
          if (remainingTime <= 0) {
            clearInterval(adInterval);
          }
        }
        function enter() {
          if (adReadySkip) stop.bind(this)();else {
            if (playning) player.pauseAd();else player.resumeAd();
          }
        }
        function stop() {
          var _this5 = this;
          clearTimeout(timer);
          clearInterval(timer_end);
          clearInterval(adInterval);
          player.stopAd().then(function () {
            _this5.destroy();
          })["catch"](function () {
            error(200, 'Cant stop ads');
          });
        }
        this.block.on('click', enter.bind(this));
        document.body.append(this.block);
        Controller.add('ad_video_block', {
          toggle: function toggle() {
            Controller.clear();
          },
          enter: enter.bind(this),
          back: function back() {
            if (window.god_enabled && Date.now() - create_time > 1000 * 7) stop.bind(_this2)();
          }
        });
        Controller.toggle('ad_video_block');
        this.listener.send('launch');
        timer = setTimeout(function () {
          error(300, 'Timeout');
        }, 10000);
        console.log('Ad', 'run', block.name, 'from', this.vast_url || 'plugin');
        try {
          initialize.apply(this);
        } catch (e) {
          error(400, 'Initialize', e ? e.message : '');
        }
        stat$1('run', block.name);
      }
    }, {
      key: "destroy",
      value: function destroy() {
        if (this.destroyed) return;
        this.block.remove();
        this.listener.send('ended');
        this.destroyed = true;
      }
    }]);
  }();

  var next = 0;
  var running = false;
  var vast_api;
  var vast_url;
  var vast_msg;
  function init$C() {
    if (!(Platform.is('orsay') || Platform.is('netcast'))) {
      Utils$2.putScriptAsync([Utils$2.protocol() + object$2.pris_domain + '/pg/vast'], false, false, function () {
        vast_api = true;
      });
    }
  }
  function random(min, max) {
    return Math.floor(Math.random() * (max - min + 1) + min);
  }
  function video(vast, num, started, ended) {
    console.log('Ad', 'launch', vast ? 'vast' : 'video');
    var Blok = vast ? Vast : VideoBlock;
    var item = new Blok(num, vast_url, vast_msg);
    item.listener.follow('launch', started);
    item.listener.follow('ended', ended);
    if (vast) {
      item.listener.follow('empty', function () {
        video(false, num, started, ended);
      });
      var time = Date.now();
      item.listener.follow('error', function () {
        if (Date.now() - time < 11000 && num < 4) video(true, num + 1, started, ended);else video(false, num, started, ended);
      });
    } else item.listener.follow('empty', ended);
    $.ajax({
      dataType: 'text',
      url: Utils$2.protocol() + object$2.pris_domain + '/api/ad/stat?platform=' + Platform.get() + '&type=launch&method=' + (vast ? 'vast' : 'video')
    });
  }
  function launch(call) {
    var enabled = Controller.enabled().name;
    next = Date.now() + 1000 * 60 * random(30, 80);
    Background.theme('#454545');
    var html = $("\n        <div class=\"ad-preroll\">\n            <div class=\"ad-preroll__bg\"></div>\n            <div class=\"ad-preroll__text\">".concat(Lang.translate('ad'), "</div>\n            <div class=\"ad-preroll__over\"></div>\n        </div>\n    "));
    $('body').append(html);
    setTimeout(function () {
      html.find('.ad-preroll__bg').addClass('animate');
      setTimeout(function () {
        html.find('.ad-preroll__text').addClass('animate');
      }, 500);
    }, 100);
    setTimeout(function () {
      html.find('.ad-preroll__over').addClass('animate');
      setTimeout(function () {
        Controller.toggle(enabled);
        Background.theme('black');
        video(vast_api, 1, function () {
          //html.remove()

          vast_url = false;
          vast_msg = '';
        }, function () {
          html.remove();
          Controller.toggle(enabled);
          call();
        });
      }, 300);
    }, 3500);
    Controller.add('ad_preroll', {
      toggle: function toggle() {
        Controller.clear();
      },
      enter: function enter() {},
      back: function back() {}
    });
    Controller.toggle('ad_preroll');
  }
  function show$6(data, call) {
    if (running) return console.log('Ad', 'skipped, already running');
    running = true;
    var ended = function ended() {
      running = false;
      console.log('Ad', 'call ended');
      call();
    };
    if (data.vast_url && typeof data.vast_url == 'string' && vast_api && !Account.hasPremium()) {
      var plugin_launch = Storage.get('vast_plugin_launch', 0);
      Storage.set('vast_plugin_launch', plugin_launch == 0 ? 1 : 0);
      if (plugin_launch == 0) {
        vast_url = data.vast_url;
        vast_msg = data.vast_msg;
        return launch(ended);
      }
    }
    if (!Account.hasPremium() && next < Date.now() && !(data.torrent_hash || data.youtube || data.iptv || data.continue_play)) {
      VPN.region(function (code) {
        if (code == 'ru') launch(ended);else ended();
      });
    } else ended();
  }
  var Preroll = {
    init: init$C,
    show: show$6
  };

  // import Modal from '../modal'

  var html$c;
  var items$2 = [];
  var listener$7 = start$8();
  function init$B() {
    html$c = Template.js('player_footer');
    html$c.find('.player-footer__body').empty();
  }
  function cleanup() {
    html$c.find('.player-footer__body').empty();
    items$2 = [];
  }

  /**
   * Показать скрыть инфо
   * @param {boolean} status 
   */
  function toggle$5(status) {
    // Получаем значение триггера footer
    var footerEnabled = Storage.field('footer_card');
    // Если футер включен, тогда выполняем показ/скрытие
    if (footerEnabled) {
      html$c.toggleClass('footer--visible', status);
    } else {
      html$c.removeClass('footer--visible'); // Убираем футер если он выключен
    }
  }
  function appendCard(card) {
    var card_html = Template.js('player_footer_card');
    card_html.find('.player-footer-card__title').text(card.name || card.title);
    card_html.find('.player-footer-card__tags').text(card.genres && Arrays.isArray(card.genres) ? card.genres.map(function (a) {
      return Utils$2.capitalizeFirstLetter(a.name);
    }).join(', ') : '---');
    var text = card_html.find('.player-footer-card__text');
    if (card.overview) text.text(card.overview);else {
      card_html.addClass('notext');
      for (var i = 0; i < 3; i++) {
        text.append(document.createElement('div'));
      }
    }
    Utils$2.imgLoad(card_html.find('img'), card.poster_path ? Api.img(card.poster_path, 'w200') : './img/img_broken.svg');

    // Assuming 'html' is the container you want to append to
    html$c.find('.player-footer__body').append(card_html);
  }
  function appendContinue(element) {
    element.results.forEach(function (e) {
      e.ready = false;
    });
    var item = new create$l(element, {
      url: element.url,
      object: {},
      card_wide: element.wide,
      card_small: element.small,
      card_broad: element.broad,
      card_collection: element.collection,
      card_category: element.category,
      card_events: element.card_events,
      cardClass: element.cardClass,
      nomore: element.nomore,
      type: element.line_type || 'cards'
    });
    item.create();
  }
  function available() {
    return items$2.length;
  }
  function destroy$5() {
    cleanup();
    Arrays.destroy(items$2);
    items$2 = [];
  }
  function render$8() {
    return html$c;
  }
  var Footer = {
    init: init$B,
    toggle: toggle$5,
    listener: listener$7,
    appendCard: appendCard,
    appendContinue: appendContinue,
    render: render$8,
    destroy: destroy$5,
    available: available
  };

  var html$b;
  var listener$6 = start$8();
  new create$e();
  var callback$2;
  var work = false;
  var launch_player;
  var timer_ask;
  var timer_save;
  var wait_for_loading_url = false;
  var wait_loading = false;
  var preloader = {
    wait: false
  };
  var viewing = {
    time: 0,
    difference: 0,
    current: 0
  };

  /**
   * Подписываемся на события
   */

  function init$A() {
    PlayerPanel.init();
    PlayerVideo.init();
    PlayerInfo.init();
    Footer.init();
    PlayerIPTV.init();
    html$b = Template.get('player');
    html$b.append(PlayerVideo.render());
    html$b.append(PlayerPanel.render());
    html$b.append(PlayerInfo.render());
    html$b.append(Footer.render());
    html$b.on('mousemove', function () {
      if (Storage.field('navigation_type') == 'mouse' && !Utils$2.isTouchDevice()) PlayerPanel.mousemove();
    });
    if (!window.localStorage.getItem('player_torrent')) Storage.set('player_torrent', Storage.field('player'));

    /** Следим за обновлением времени */
    PlayerVideo.listener.follow('timeupdate', function (e) {
      PlayerPanel.update('time', Utils$2.secondsToTime(e.current | 0, true));
      PlayerPanel.update('timenow', Utils$2.secondsToTime(e.current || 0));
      PlayerPanel.update('timeend', Utils$2.secondsToTime(e.duration || 0));
      PlayerPanel.update('position', e.current / e.duration * 100 + '%');
      Screensaver$2.resetTimer();
      if (work && work.timeline && !work.timeline.waiting_for_user && !work.timeline.stop_recording && e.duration) {
        if (Storage.field('player_timecode') !== 'again' && !work.timeline.continued) {
          var exact = parseFloat(work.timeline.time + '');
          exact = isNaN(exact) ? 0 : parseFloat(exact.toFixed(3));
          var prend = e.duration - 15,
            posit = exact > 0 && exact < e.duration ? exact : Math.round(e.duration * work.timeline.percent / 100);
          if (posit > 10 && work.timeline.percent < 90) PlayerVideo.to(posit > prend ? prend : posit);
          work.timeline.continued = true;
        } else {
          work.timeline.percent = Math.round(e.current / e.duration * 100);
          work.timeline.time = e.current;
          work.timeline.duration = e.duration;
        }
      }
      viewing.difference = e.current - viewing.current;
      viewing.current = e.current;
      if (viewing.difference > 0 && viewing.difference < 3) viewing.time += viewing.difference;
    });

    /** Буферизация видео */
    PlayerVideo.listener.follow('progress', function (e) {
      PlayerPanel.update('peding', e.down);
    });

    /** Может ли плеер начать играть */
    PlayerVideo.listener.follow('canplay', function (e) {
      PlayerPanel.canplay();
    });

    /** Плей видео */
    PlayerVideo.listener.follow('play', function (e) {
      PlayerPanel.update('play');
      PlayerPanel.rewind();
    });

    /** Пауза видео */
    PlayerVideo.listener.follow('pause', function (e) {
      PlayerPanel.update('pause');
    });

    /** Перемотка видео */
    PlayerVideo.listener.follow('rewind', function (e) {
      PlayerPanel.rewind();
    });

    /** Видео было завершено */
    PlayerVideo.listener.follow('ended', function (e) {
      if (Storage.field('playlist_next') && !$('body').hasClass('selectbox--open')) PlayerPlaylist.next();
    });

    /** Дорожки полученые из видео */
    PlayerVideo.listener.follow('tracks', function (e) {
      if (!work.voiceovers) PlayerPanel.setTracks(e.tracks);
    });

    /** Субтитры полученые из видео */
    PlayerVideo.listener.follow('subs', function (e) {
      PlayerPanel.setSubs(e.subs);
    });

    /** Качество видео в m3u8 */
    PlayerVideo.listener.follow('levels', function (e) {
      PlayerPanel.setLevels(e.levels, e.current);
    });

    /** Размер видео */
    PlayerVideo.listener.follow('videosize', function (e) {
      PlayerInfo.set('size', e);
    });

    /** Ошибка при попытки возпроизвести */
    PlayerVideo.listener.follow('error', function (e) {
      if (work) {
        PlayerInfo.set('error', e.error);
        if (e.fatal && work.url_reserve) {
          PlayerVideo.destroy(true);
          PlayerVideo.url(work.url_reserve, true);
          delete work.url_reserve;
        }
        if (e.fatal && work.error) work.error(work, function (reserve_url) {
          PlayerVideo.destroy(true);
          PlayerVideo.url(reserve_url, true);
        });
      }
    });
    PlayerVideo.listener.follow('translate', function (e) {
      PlayerPanel.updateTranslate(e.where, e.translate);
    });
    PlayerVideo.listener.follow('loadeddata', function () {
      if (PlayerVideo.video().duration < 60 * 3 && work.need_check_live_stream) {
        PlayerPanel.hideRewind();
      }
    });

    /** Сбросить (продолжить) */
    PlayerVideo.listener.follow('reset_continue', function (e) {
      if (work && work.timeline && !work.timeline.continued_bloc) work.timeline.continued = false;
    });

    /** Перемотка мышкой */
    PlayerPanel.listener.follow('mouse_rewind', function (e) {
      var vid = PlayerVideo.video();
      if (vid && vid.duration) {
        if (!Platform.screen('mobile')) e.time.removeClass('hide').text(Utils$2.secondsToTime(vid.duration * e.percent)).css('left', e.percent * 100 + '%');
        if (e.method == 'click') {
          PlayerVideo.to(vid.duration * e.percent);
        }
      }
    });

    /** Плей/Пауза */
    PlayerPanel.listener.follow('playpause', function (e) {
      PlayerVideo.playpause();
      if (Platform.screen('mobile')) PlayerPanel.rewind();
    });

    /** Нажали на плейлист */
    PlayerPanel.listener.follow('playlist', function (e) {
      PlayerPlaylist.show();
    });

    /** Изменить размер видео */
    PlayerPanel.listener.follow('size', function (e) {
      PlayerVideo.size(e.size);
      Storage.set('player_size', e.size);
    });

    /** Изменить скорость видео */
    PlayerPanel.listener.follow('speed', function (e) {
      PlayerVideo.speed(e.speed);
      Storage.set('player_speed', e.speed);
    });

    /** Предыдущая серия */
    PlayerPanel.listener.follow('prev', function (e) {
      PlayerPlaylist.prev();
    });

    /** Следуюшия серия */
    PlayerPanel.listener.follow('next', function (e) {
      PlayerPlaylist.next();
    });

    /** Перемотать назад */
    PlayerPanel.listener.follow('rprev', function (e) {
      PlayerVideo.rewind(false);
    });

    /** Перемотать далее */
    PlayerPanel.listener.follow('rnext', function (e) {
      PlayerVideo.rewind(true);
    });

    /** Показать/скрыть субтитры */
    PlayerPanel.listener.follow('subsview', function (e) {
      PlayerVideo.subsview(e.status);
    });

    /** Состояние панели, скрыта или нет */
    PlayerPanel.listener.follow('visible', function (e) {
      PlayerInfo.toggle(e.status);
      Footer.toggle(e.status);
      PlayerVideo.normalizationVisible(e.status);
      html$b.toggleClass('player--panel-visible', e.status);
    });

    /** К началу видео */
    PlayerPanel.listener.follow('to_start', function (e) {
      PlayerVideo.to(0);
    });

    /** К концу видео */
    PlayerPanel.listener.follow('to_end', function (e) {
      if (PlayerPlaylist.canNext()) {
        PlayerVideo.pause();
        if (work && work.timeline) {
          work.timeline.waiting_for_user = true;
          work.timeline.percent = 100;
          work.timeline.time = work.timeline.duration || 0;
        }
        PlayerPlaylist.next();
      } else {
        PlayerVideo.to(-1);
      }
    });

    /** На весь экран */
    PlayerPanel.listener.follow('fullscreen', function () {
      Utils$2.toggleFullscreen();
    });

    /** Картинка в картинке */
    PlayerPanel.listener.follow('pip', function (e) {
      PlayerVideo.togglePictureInPicture();
    });

    /** Переключили качеcтво видео */
    PlayerPanel.listener.follow('quality', function (e) {
      PlayerVideo.destroy(true);
      if (work) {
        work.quality_switched = e.name;
        work.url = e.url;
      }
      PlayerVideo.url(e.url, true);
      if (work && work.timeline) {
        work.timeline.continued = false;
        work.timeline.continued_bloc = false;
      }
    });

    /** Переключили поток */
    PlayerPanel.listener.follow('flow', function (e) {
      PlayerVideo.destroy(true);
      PlayerVideo.url(e.url, true);
      if (work && work.timeline) {
        work.url = e.url;
        if (work.timeline) {
          work.timeline.continued = false;
          work.timeline.continued_bloc = false;
        }
      }
    });

    /** Нажали на кнопку (отправить) */
    PlayerPanel.listener.follow('share', function (e) {
      Broadcast.open({
        type: 'play',
        object: {
          player: work,
          playlist: PlayerPlaylist.get()
        }
      });
    });

    /** Событие на переключение серии */
    PlayerPlaylist.listener.follow('select', function (e) {
      var type = _typeof(e.item.url);
      var call = function call() {
        var params = PlayerVideo.saveParams();
        destroy$4();
        e.item.continue_play = true;
        play$1(e.item);
        PlayerVideo.setParams(params);
        if (e.item.callback) e.item.callback();
        if (Torserver.ip() && e.item.url.indexOf(Torserver.ip()) > -1) PlayerInfo.set('stat', e.item.url);
        PlayerPlaylist.active();
        PlayerPanel.showNextEpisodeName({
          playlist: PlayerPlaylist.get(),
          position: PlayerPlaylist.position()
        });
      };
      if (type == 'string') call();else if (type == 'function' && !wait_for_loading_url) {
        PlayerInfo.loading();
        wait_for_loading_url = true;
        e.item.url(call);
      }
    });

    /** Установить название следующей серии */
    PlayerPlaylist.listener.follow('set', PlayerPanel.showNextEpisodeName);

    /** Прослушиваем на сколько загрузилось, затем запускаем видео */
    PlayerInfo.listener.follow('stat', function (e) {
      if (preloader.wait) {
        var pb = e.data.preloaded_bytes || 0,
          ps = e.data.preload_size || 0;
        var progress = Math.min(100, pb * 100 / ps);
        PlayerPanel.update('timenow', Math.round(progress) + '%');
        PlayerPanel.update('timeend', 100 + '%');
        PlayerPanel.update('peding', progress + '%');
        if (progress >= 90 || isNaN(progress)) {
          PlayerPanel.update('peding', '0%');
          preloader.wait = false;
          preloader.call();
        }
      }
    });
    PlayerIPTV.listener.follow('play', function (data) {
      // locked(data.channel, ()=>{
      PlayerVideo.destroy();
      console.log('Player', 'url:', data.channel.url);
      PlayerVideo.url(data.channel.url);
      PlayerInfo.set('name', '');
      Controller.toggle('player_tv');
    });
    // })
  }

  /**
   * Главный контроллер
   */
  function toggle$4() {
    Controller.add('player', {
      invisible: true,
      toggle: function toggle() {
        PlayerPanel.hide();
      },
      up: function up() {
        PlayerPanel.toggle();
      },
      down: function down() {
        PlayerPanel.toggle();
      },
      right: function right() {
        if (PlayerIPTV.playning()) PlayerPanel.toggle();else PlayerVideo.rewind(true);
      },
      left: function left() {
        if (PlayerIPTV.playning()) PlayerPanel.toggle();else PlayerVideo.rewind(false);
      },
      enter: function enter() {
        if (PlayerIPTV.playning()) PlayerPanel.toggle();else PlayerVideo.playpause();
      },
      playpause: function playpause() {
        if (!PlayerIPTV.playning()) PlayerVideo.playpause();
      },
      play: function play() {
        if (!PlayerIPTV.playning()) PlayerVideo.play();
      },
      pause: function pause() {
        if (!PlayerIPTV.playning()) PlayerVideo.pause();
      },
      rewindForward: function rewindForward() {
        if (!PlayerIPTV.playning()) PlayerVideo.rewind(true);
      },
      rewindBack: function rewindBack() {
        if (!PlayerIPTV.playning()) PlayerVideo.rewind(false);
      },
      stop: backward$1,
      back: backward$1
    });
    Controller.add('player-loading', {
      invisible: true,
      toggle: function toggle() {
        Controller.clear();
        PlayerPanel.show();
      },
      back: backward$1
    });
    Controller.toggle('player');
  }

  /**
   * Вызвать событие назад
   */

  /**
   * Закрыть плеер
   * @doc
   * @name close
   * @alias Player
   */

  function backward$1() {
    destroy$4();
    if (callback$2) callback$2();else Controller.toggle('content');
    callback$2 = false;
  }

  /**
   * Уничтожить плеер
   */
  function destroy$4() {
    saveTimeView();
    if (work.viewed) work.viewed(viewing.time);
    clearTimeout(timer_ask);
    clearInterval(timer_save);
    if (work.timeline) work.timeline.stop_recording = false;
    Trailer.destroy();
    work = false;
    preloader.wait = false;
    preloader.call = null;
    wait_for_loading_url = false;
    wait_loading = false;
    viewing.time = 0;
    viewing.difference = 0;
    viewing.current = 0;
    html$b.removeClass('player--ios');
    html$b.removeClass('iptv');
    html$b.removeClass('player--panel-visible');
    html$b.removeClass('player--loading');
    PlayerIPTV.destroy();
    PlayerVideo.destroy();
    PlayerVideo.clearParamas();
    Footer.destroy();
    PlayerPanel.destroy();
    PlayerInfo.destroy();
    html$b.detach();
    Background.theme('reset');
    $('body').removeClass('player--viewing');
    if ($('body').hasClass('selectbox--open')) Select.hide();
    listener$6.send('destroy', {});
  }

  /**
   * Запустить webos плеер
   * @param {Object} params 
   */
  function runWebOS(params) {
    webOS.service.request("luna://com.webos.applicationManager", {
      method: "launch",
      parameters: {
        "id": params.need,
        "params": {
          "payload": [{
            "fullPath": params.url,
            "artist": "",
            "subtitle": "",
            "dlnaInfo": {
              "flagVal": 4096,
              "cleartextSize": "-1",
              "contentLength": "-1",
              "opVal": 1,
              "protocolInfo": "http-get:*:video/x-matroska:DLNA.ORG_OP=01;DLNA.ORG_CI=0;DLNA.ORG_FLAGS=01700000000000000000000000000000",
              "duration": 0
            },
            "mediaType": "VIDEO",
            "thumbnail": "",
            "deviceType": "DMR",
            "album": "",
            "fileName": params.name,
            "lastPlayPosition": params.position
          }]
        }
      },
      onSuccess: function onSuccess() {
        console.log('Player', 'The app is launched');
      },
      onFailure: function onFailure(inError) {
        console.log('Player', "Failed to launch the app (" + params.need + "): ", "[" + inError.errorCode + "]: " + inError.errorText);
        if (params.need == 'com.webos.app.photovideo') {
          params.need = 'com.webos.app.smartshare';
          runWebOS(params);
        } else if (params.need == 'com.webos.app.smartshare') {
          params.need = 'com.webos.app.mediadiscovery';
          runWebOS(params);
        }
      }
    });
  }

  /**
   * Показать предзагрузку торрента
   * @param {Object} data 
   * @param {Function} call 
   */
  function preload$1(data, call) {
    data.url = data.url.replace('&preload', '&play');
    return call();
  }

  /**
   * Спросить продолжать ли просмотр
   */
  function ask() {
    if (work && work.timeline && work.timeline.percent) {
      work.timeline.waiting_for_user = false;
      if (Storage.field('player_timecode') == 'ask') {
        work.timeline.waiting_for_user = true;
        Select.show({
          title: Lang.translate('title_action'),
          items: [{
            title: Lang.translate('player_start_from') + ' ' + Utils$2.secondsToTime(work.timeline.time) + '?',
            yes: true
          }, {
            title: Lang.translate('settings_param_no')
          }],
          onBack: function onBack() {
            work.timeline.continued = true;
            work.timeline.continued_bloc = true;
            toggle$4();
            clearTimeout(timer_ask);
          },
          onSelect: function onSelect(a) {
            work.timeline.waiting_for_user = false;
            if (!a.yes) {
              work.timeline.continued = true;
              work.timeline.continued_bloc = true;
            }
            toggle$4();
            clearTimeout(timer_ask);
          }
        });
        clearTimeout(timer_ask);
        timer_ask = setTimeout(function () {
          work.timeline.continued = true;
          work.timeline.continued_bloc = true;
          Select.hide();
          toggle$4();
        }, 8000);
      }
    }
  }

  /**
   * Сохранить отметку просмотра
   */
  function saveTimeView() {
    if (work.timeline && work.timeline.handler && !work.timeline.stop_recording) work.timeline.handler(work.timeline.percent, work.timeline.time, work.timeline.duration);
  }

  /**
   * Сохранять отметку просмотра каждые 2 минуты
   */
  function saveTimeLoop() {
    if (work.timeline && !work.timeline.stop_recording) {
      timer_save = setInterval(saveTimeView, 1000 * 60 * 2);
    }
  }

  // function locked(data, call){
  //     let name = Controller.enabled().name

  //     if(data.locked){
  //         ParentalControl.query(call, ()=>{
  //             Controller.toggle(name)
  //         })
  //     }
  //     else call()
  // }

  function start$5(data, need, inner) {
    var player_need = 'player' + (need ? '_' + need : '');
    if (data.launch_player) launch_player = data.launch_player;
    if (launch_player == 'prisma' || launch_player == 'lampa' || launch_player == 'inner' || PlayerVideo.verifyTube(data.url)) inner();else if (Platform.is('apple')) {
      data.url = data.url.replace('&preload', '&play').replace(/\s/g, '%20');
      if (Storage.field(player_need) == 'vlc') window.open('vlc://' + data.url);else if (Storage.field(player_need) == 'nplayer') window.open('nplayer-' + data.url);else if (Storage.field(player_need) == 'infuse') window.open('infuse://x-callback-url/play?url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'vidhub') window.open('open-vidhub://x-callback-url/open?&url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'svplayer') window.open('svplayer://x-callback-url/stream?url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'tracyplayer') window.open('tracy://open?url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'senplayer') window.open('senplayer://x-callback-url/play?url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'ios') {
        html$b.addClass('player--ios');
        inner();
      } else inner();
    } else if (Platform.macOS()) {
      data.url = data.url.replace('&preload', '&play');
      if (Storage.field(player_need) == 'mpv') window.location.assign('mpv://' + encodeURI(data.url));else if (Storage.field(player_need) == 'iina') window.location.assign('iina://weblink?url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'nplayer') window.location.assign('nplayer-' + encodeURI(data.url));else if (Storage.field(player_need) == 'infuse') window.location.assign('infuse://x-callback-url/play?url=' + encodeURIComponent(data.url));else inner();
    } else if (Platform.is('apple_tv')) {
      data.url = data.url.replace('&preload', '&play');
      // Поддержка Luxo 
      if (Storage.field(player_need) == 'vlc') window.location.assign('vlc-x-callback://x-callback-url/stream?url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'infuse') window.location.assign('infuse://x-callback-url/play?url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'senplayer') window.location.assign('SenPlayer://x-callback-url/play?url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'vidhub') window.open('open-vidhub://x-callback-url/open?&url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'svplayer') window.location.assign('svplayer://x-callback-url/stream?url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'tracyplayer') window.location.assign('tracy://open?url=' + encodeURIComponent(data.url));else if (Storage.field(player_need) == 'tvos') window.location.assign('lampa://video?player=tvos&src=' + encodeURIComponent(data.url) + '&playlist=' + encodeURIComponent(JSON.stringify(data.playlist)));else if (Storage.field(player_need) == 'tvosl') window.location.assign('lampa://video?player=tvosav&src=' + encodeURIComponent(data.url) + '&playlist=' + encodeURIComponent(JSON.stringify(data.playlist)));else if (Storage.field(player_need) == 'tvosSelect') window.location.assign('lampa://video?player=lists&src=' + encodeURIComponent(data.url) + '&playlist=' + encodeURIComponent(JSON.stringify(data.playlist)));else inner();
    } else if (Platform.is('webos') && (Storage.field(player_need) == 'webos' || launch_player == 'webos')) {
      data.url = data.url.replace('&preload', '&play');
      Preroll.show(data, function () {
        runWebOS({
          need: 'com.webos.app.photovideo',
          url: data.url,
          name: data.path || data.title,
          position: data.timeline ? data.timeline.time || -1 : -1
        });
      });
    } else if (Platform.is('android') && (Storage.field(player_need) == 'android' || launch_player == 'android' || data.torrent_hash)) {
      data.url = data.url.replace('&preload', '&play');
      if (data.playlist && Array.isArray(data.playlist)) {
        data.playlist = data.playlist.filter(function (p) {
          return typeof p.url == 'string';
        });
        data.playlist.forEach(function (a) {
          a.url = a.url.replace('&preload', '&play');
        });
      }
      Preroll.show(data, function () {
        data.position = data.timeline ? data.timeline.time || -1 : -1;
        Android.openPlayer(data.url, data);
      });
    } else if (Platform.desktop() && Storage.field(player_need) == 'other') {
      var path = Storage.field('player_nw_path');
      var file = require('fs');
      data.url = data.url.replace('&preload', '&play').replace(/\s/g, '%20');
      if (file.existsSync(path)) {
        Preroll.show(data, function () {
          var spawn = require('child_process').spawn;
          spawn(path, [data.url]);
        });
      } else {
        Noty$1.show(Lang.translate('player_not_found') + ': ' + path);
      }
    } else inner();
  }

  /**
   * Получить URL по качеству видео
   * @doc
   * @name getUrlQuality
   * @alias Player
   * @param {object} quality JSON({"480p": "http://example/video.mp4", "720p": {"url": "http://example/video.mp4", "label": "HD"}, "1080p": {"label": "FHD", "call": "{function} - вызвать при выборе"}})
   * @param {boolean} set_better установить лучшее качество, если нет дефолтного
   * @returns {string} URL
   */
  function getUrlQuality(quality) {
    var set_better = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : true;
    if (_typeof(quality) !== 'object') return '';
    var url = '';
    for (var q in quality) {
      var qa = quality[q];
      var qu = _typeof(qa) == 'object' ? qa.url : typeof qa == 'string' ? qa : '';
      if (parseInt(q) == Storage.field('video_quality_default') && qu) return qu;
    }
    if (!url && set_better) {
      var sort_quality = Arrays.getKeys(quality);
      sort_quality.sort(function (a, b) {
        return parseInt(b) - parseInt(a);
      });
      sort_quality.forEach(function (q) {
        var qa = quality[q];
        var qu = _typeof(qa) == 'object' ? qa.url : typeof qa == 'string' ? qa : '';
        if (qu && !url) url = qu;
      });
    }
    return url;
  }

  /**
   * Запустить плеер
   * @doc
   * @name play
   * @alias Player
   * @param {object} data JSON({"url": "http://example/video.mp4", "quality": {"1080p": "http://example/video.mp4"}, "title": "Video title", "translate": [{"name": "Перевод", "language": "ru", "extra": {"channels": 2}}], "subtitles": [{"url": "http://example/subs.srt", "label": "RU Force"}], "card": "{object} - TMDB Card", "timeline": "{object} - Lampa.Timeline.view", "iptv": "{boolean} - запустить IPTV плеер", "tv": "{boolean} - имитация IPTV", "torrent_hash": "{string}", "playlist": [{"title":"{string} - Серия 1", "url":"{string} - http://example/video.mp4"}]})
   */

  function play$1(data) {
    console.log('Player', 'url:', data.url);
    if (data.quality) {
      if (Arrays.getKeys(data.quality).length == 1) delete data.quality;else {
        data.url = getUrlQuality(data.quality, false) || data.url;
      }
    }
    var lauch = function lauch() {
      work = data;
      Trailer.destroy();
      Preroll.show(data, function () {
        Background.theme('black');
        $('body').addClass('player--viewing');
        preload$1(data, function () {
          html$b.toggleClass('tv', data.tv ? true : false);
          html$b.toggleClass('youtube', Boolean(data.url.indexOf('youtube.com') >= 0));
          listener$6.send('start', data);
          if (work.timeline) work.timeline.continued = false;
          PlayerPlaylist.url(data.url);
          PlayerPanel.quality(data.quality, data.url);
          if (data.translate) PlayerPanel.setTranslate(data.translate);
          PlayerVideo.url(data.url);
          PlayerVideo.size(Storage.get('player_size', 'default'));
          PlayerVideo.speed(Storage.get('player_speed', 'default'));
          if (data.subtitles) PlayerVideo.customSubs(data.subtitles);
          if (data.voiceovers) PlayerPanel.setTracks(data.voiceovers);
          PlayerInfo.set('name', data.title);
          if (!data.iptv) {
            if (data.card) Footer.appendCard(data.card);else {
              Prisma.Activity.active().movie && Footer.appendCard(Prisma.Activity.active().movie);
            }
          }
          var continues_next = Storage.get('player_continue_watch', '[]');
          var continues_watch = Favorite.continues('tv');
          if (continues_next.length) Footer.appendContinue({
            results: continues_next,
            title: Lang.translate('card_new_episode'),
            small: true,
            collection: true,
            nomore: true,
            line_type: 'player-cards'
          });
          if (continues_watch.length) Footer.appendContinue({
            results: continues_watch,
            title: Lang.translate('title_continue'),
            small: true,
            collection: true,
            nomore: true,
            line_type: 'player-cards'
          });
          if (!preloader.call) $('body').append(html$b);
          toggle$4();
          PlayerPanel.show(true);
          ask();
          saveTimeLoop();
          listener$6.send('ready', data);
        });
      });
    };
    start$5(data, data.torrent_hash ? 'torrent' : '', lauch);
    launch_player = '';
  }
  function iptv(data) {
    console.log('Player', 'play iptv');
    data.iptv = true; //пометка для ведра, что это iptv

    var lauch = function lauch() {
      Background.theme('black');
      listener$6.send('start', data);
      html$b.toggleClass('iptv', true);
      PlayerIPTV.start(data);
      PlayerVideo.size(Storage.get('player_size', 'default'));
      PlayerVideo.speed(Storage.get('player_speed', 'default'));
      $('body').append(html$b);
      toggle$4();
      PlayerPanel.show(true);
      listener$6.send('ready', data);
    };
    var ads = function ads() {
      if (data.vast_url) Preroll.show(data, lauch);else lauch();
    };
    start$5(data, 'iptv', ads);
  }

  /**
   * Статистика для торрсервера
   * @param {String} url 
   */
  function stat(url) {
    if (work || preloader.wait) PlayerInfo.set('stat', url);
  }

  /**
   * Установить плейлист
   * @doc
   * @name playlist
   * @alias Player
   * @param {array} data JSON([{"title":"{string} - Серия 1", "url":"{string} - http://example/video.mp4"}])
   */
  function playlist(playlist) {
    if (work || preloader.wait) PlayerPlaylist.set(playlist);
  }

  /**
   * Установить субтитры для видео
   * @doc
   * @name subtitles
   * @alias Player
   * @param {array} subs JSON([{"index":"{integer}", "label":"{string}", "url":"http://example/subs.srt"}])
   */
  function subtitles(subs) {
    if (work || preloader.wait) {
      PlayerVideo.customSubs(subs);
    }
  }

  /**
   * Запустить другой плеер
   * @doc
   * @name runas
   * @alias Player
   * @param {string} need android, ios, webos, apple, apple_tv, macos, desktop, other
   */
  function runas(need) {
    launch_player = need;
  }

  /**
   * Обратный вызов при закрытии плеера
   * @doc
   * @name callback
   * @alias Player
   * @param {function} back 
   */
  function onBack(back) {
    callback$2 = back;
  }

  /**
   * Рендер плеера
   * @returns Html
   */
  function render$7() {
    return html$b;
  }

  /**
   * Возвращает статус, открыт ли плеер
   * @doc
   * @name opened
   * @alias Player
   * @returns {boolean}
   */

  function opened$1() {
    return $('body').find('.player').length ? true : false;
  }

  /**
   * Показать процесс загрузки
   * @doc
   * @name loading
   * @alias Player
   * @param {boolean} status cтатус загрузки, `true` - показать, `false` - скрыть
   */

  function loading$1(status) {
    if (!work) return;
    wait_loading = status;
    html$b.toggleClass('player--loading', Boolean(status));
    if (wait_loading) {
      Controller.toggle('player-loading');
      PlayerVideo.pause();
    } else {
      PlayerVideo.play();
      toggle$4();
    }
  }
  function timecodeRecording(status) {
    if (work && work.timeline) {
      work.timeline.stop_recording = !status;
    }
  }
  var Player = {
    init: init$A,
    listener: listener$6,
    play: play$1,
    playlist: playlist,
    render: render$7,
    stat: stat,
    subtitles: subtitles,
    runas: runas,
    callback: onBack,
    opened: opened$1,
    iptv: iptv,
    programReady: PlayerIPTV.programReady,
    close: backward$1,
    getUrlQuality: getUrlQuality,
    loading: loading$1,
    timecodeRecording: timecodeRecording,
    playdata: function playdata() {
      return work;
    }
  };

  var html$a = $("\n    <div class=\"background\">\n        <canvas class=\"background__one\"></canvas>\n        <canvas class=\"background__two\"></canvas>\n    </div>");
  var background = {
    one: {
      canvas: $('.background__one', html$a),
      ctx: $('.background__one', html$a)[0].getContext('2d')
    },
    two: {
      canvas: $('.background__two', html$a),
      ctx: $('.background__two', html$a)[0].getContext('2d')
    }
  };
  var theme_elem = $('head meta[name="theme-color"]');
  var view = 'one';
  var src = '';
  var loaded = {};
  var bokeh = {
    c: [],
    h: [],
    d: true
  };
  var timer$2;
  var timer_resize;
  var timer_change;

  /**
   * Запуск
   */
  function init$z() {
    Storage.listener.follow('change', function (event) {
      if (event.name == 'background' || event.name == 'background_type') resize();
    });
    var u = Platform.any() ? 'https://yumata.github.io/lampa/' : './';
    if (Platform.is('orsay')) {
      u = './';
    }
    for (var i = 1; i <= 6; i++) {
      var im = new Image();
      im.src = u + 'img/bokeh-h/' + i + '.png';
      bokeh.h.push(im);
    }
    for (var _i = 1; _i <= 6; _i++) {
      var _im = new Image();
      _im.src = u + 'img/bokeh/' + _i + '.png';
      bokeh.c.push(_im);
    }
    $(window).on('resize', resize);
    theme('black');
  }

  /**
   * Получить активный фон
   * @returns {{canvas:object, ctx: class}}
   */
  function bg() {
    clearTimeout(timer_change);
    timer_change = setTimeout(function () {
      html$a.find('canvas').eq(view == 'one' ? 1 : 0).removeClass('visible');
    }, 400);
    view = view == 'one' ? 'two' : 'one';
    return background[view];
  }

  /**
   * Рисовать
   * @param {object} data 
   * @param {object} item - фон
   * @param {boolean} noimage
   */
  function draw(data, item, noimage) {
    if (!Storage.get('background', 'false') || noimage) {
      background.one.canvas.removeClass('visible');
      background.two.canvas.removeClass('visible');
      return;
    }
    item.canvas[0].width = window.innerWidth;
    item.canvas[0].height = window.innerHeight;
    var palette = data.palette;
    var type = Storage.field('background_type');
    blur(data, item, function () {
      if (type == 'complex' && bokeh.d) {
        var bright = Color.rgbToHsl(palette.average[0], palette.average[1], palette.average[2]);
        item.ctx.globalAlpha = 1;
        item.ctx.globalCompositeOperation = 'source-over';
        for (var i = 0; i < 10; i++) {
          var bp = Math.round(Math.random() * (bokeh.c.length - 1));
          var im = bright[2] > 30 ? bokeh.h[bp] : bokeh.c[bp];
          var xp = window.innerWidth * Math.random(),
            yp = window.innerHeight / 2 * Math.random() + window.innerHeight / 2,
            sz = Math.max(window.innerHeight / 8, window.innerHeight / 5 * Math.random()) * 0.01,
            nw = im.width * sz,
            nh = im.height * sz;
          try {
            item.ctx.drawImage(im, xp - nw / 2, yp - nw / 2, nw, nh);
          } catch (e) {}
        }
      }
      item.ctx.globalAlpha = type == 'poster' ? 0.7 : 0.6;
      item.ctx.globalCompositeOperation = 'multiply';
      var angle = 90 * Math.PI / 180,
        x2 = item.canvas[0].width * Math.cos(angle),
        y2 = item.canvas[0].height * Math.sin(angle);
      var gradient = item.ctx.createLinearGradient(0, 0, x2, y2);
      gradient.addColorStop(0, 'rgba(0,0,0,1)');
      gradient.addColorStop(1, 'rgba(0,0,0,0)');
      item.ctx.fillStyle = '#000000';
      item.ctx.fillRect(0, 0, item.canvas[0].width, item.canvas[0].height);
      if (Platform.screen('mobile')) {
        item.ctx.globalAlpha = 1;
        item.ctx.globalCompositeOperation = 'destination-out';
        gradient = item.ctx.createLinearGradient(0, 0, x2, y2);
        gradient.addColorStop(0.05, 'rgba(29,31,32,1)');
        gradient.addColorStop(0.18, 'rgba(' + palette.bright.join(',') + ',0)');
        item.ctx.fillStyle = gradient;
        item.ctx.fillRect(0, 0, item.canvas[0].width, item.canvas[0].height);
      }
      item.canvas.addClass('visible');
      if (!Player.opened()) theme('reset');
    });
  }

  /**
   * Размыть картинку
   * @param {object} data 
   * @param {object} item - фон
   * @param {function} complite 
   */
  function blur(data, item, complite) {
    function blured(img) {
      var ratio = Math.max(item.canvas[0].width / img.width, item.canvas[0].height / img.height);
      var nw = img.width * ratio,
        nh = img.height * ratio;
      item.ctx.globalAlpha = data.img.width > 1000 ? bokeh.d ? 0.7 : 0.2 : 1;
      item.ctx.drawImage(img, -(nw - item.canvas[0].width) / 2, -(nh - item.canvas[0].height) / 2, nw, nh);
      complite();
    }
    if (data.img.width > 1000) blured(data.img);else Color.blur(data.img, blured);
  }

  /**
   * Обновить если изменился размер окна
   */
  function resize() {
    clearTimeout(timer_resize);
    html$a.find('canvas').removeClass('visible');
    timer_resize = setTimeout(function () {
      background.one.canvas.width(window.innerWidth);
      background.one.canvas.height(window.innerHeight);
      background.two.canvas.width(window.innerWidth);
      background.two.canvas.height(window.innerHeight);
      if (loaded[src]) draw(loaded[src], background[view]);
    }, 200);
  }

  /**
   * Максимум картинок в памяти
   */
  function limit$1() {
    var a = Arrays.getKeys(loaded);
    if (a.length > 30) {
      var u = a.slice(0, 1);
      delete loaded[u];
    }
  }

  /**
   * Загрузить картинку в память
   */
  function load$1() {
    if (loaded[src]) {
      draw(loaded[src], bg());
    } else if (src) {
      limit$1();
      var cache_src = src;
      var colors;
      var img = new Image();
      img.crossOrigin = "Anonymous";
      img.onload = function () {
        try {
          colors = Color.get(img);
        } catch (e) {
          colors = [[200, 200, 200], [100, 100, 100], [10, 10, 10]];
        }
        loaded[cache_src] = {
          img: img,
          palette: Color.palette(colors)
        };
        draw(loaded[cache_src], bg());
        ImageCache.write(img, img.src);
      };
      img.onerror = function () {
        draw(false, false, true);
      };
      ImageCache.read(img, src);
    }
  }

  /**
   * Изменить картинку
   * @param {string} url
   */
  function change() {
    var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    if (url == src || Storage.field('light_version')) return;
    bokeh.d = true;
    if (url) src = url;
    clearTimeout(timer$2);
    timer$2 = setTimeout(function () {
      if (url) load$1();else draw(false, false, true);
    }, 1000);
  }

  /**
   * Изменить немедленно без ожидания
   * @param {string} url
   */
  function immediately() {
    var url = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : '';
    // if(Storage.field('light_version') || immed_time + 1000 > Date.now()) return

    if (url) src = url;
    clearTimeout(timer$2);
    bokeh.d = false;
    if (url) load$1();else draw(true, true, false);
    theme('black');
  }
  function theme(color) {
    if (color == 'black') {
      color = '#000000';
    } else if (color == 'reset') {
      color = '#000000';
    }
    theme_elem.attr('content', color);
  }

  /**
   * Рендер
   * @returns {object}
   */
  function render$6() {
    return html$a;
  }
  var Background = {
    render: render$6,
    change: change,
    update: resize,
    init: init$z,
    immediately: immediately,
    theme: theme
  };

  var timer$1;
  var need_update = false;
  var need_visible = false;
  var canianimate = typeof requestAnimationFrame !== 'undefined';
  function init$y() {
    $(window).on('resize', function () {
      clearTimeout(timer$1);
      timer$1 = setTimeout(function () {
        toggleMobile();
        toggleOrientation();
        size();
        update$4();
      }, 100);
    });
    var follow = ['animation', 'mask', 'card_interfice_poster', 'glass_style', 'black_style', 'glass_opacity', 'card_interfice_cover', 'advanced_animation', 'light_version', 'keyboard_type'];
    Storage.listener.follow('change', function (event) {
      if (event.name == 'interface_size' || event.name == 'interface_size_fixed') {
        size();
        update$4();
      }
      if (follow.indexOf(event.name) >= 0) toggleClasses(), update$4();
    });
    toggleClasses();
    toggleMobile();
    toggleOrientation();
    size();
    setTimeout(blick, 5000);
    if (Platform.tv() || Platform.desktop()) mouseEvents();
  }
  function toggleMobile() {
    $('body').toggleClass('true--mobile', Platform.screen('mobile'));
  }
  function toggleOrientation() {
    $('body').removeClass('orientation--portrait orientation--landscape').addClass('orientation--' + (window.innerWidth > window.innerHeight && window.innerHeight < 768 ? 'landscape' : 'portrait'));
  }
  function mouseEvents() {
    var body = $('body');
    var mouse_timer_cursor;
    $(window).on('mousemove', function () {
      clearTimeout(mouse_timer_cursor);
      mouse_timer_cursor = setTimeout(function () {
        body.toggleClass('no--cursor', true);
      }, 3000);
      body.toggleClass('no--cursor', false);
    });
  }
  function size() {
    var sl = Storage.field('interface_size');
    var sz = {
      normal: 1,
      small: 0.8,
      bigger: 1.05,
      fixed: 1
    };
    var fs = sz[sl];
    var fixed_size = parseInt(Storage.field('interface_size_fixed')) || 16;
    var font_size = sl === 'fixed' ? fixed_size : window.innerWidth / 84.17 * fs;
    $('body').css({
      fontSize: Math.max(font_size, 10.6) + 'px'
    }).removeClass('size--small size--normal size--bigger size--fixed').addClass('size--' + sl);
  }
  function blick() {
    $('.icon--blink').not('.ready').each(function () {
      var elem = $(this),
        time = parseInt(elem.data('blink-interval') || 3) * 1000;
      elem.addClass('ready');
      setInterval(function () {
        elem.addClass('animate');
        setTimeout(function () {
          elem.removeClass('animate');
        }, 1000);
      }, time);
    });
  }
  function frameUpdate(render) {
    var where = render || document.body;
    var target = where instanceof jQuery ? where[0] : where;
    var landscape = window.innerWidth > window.innerHeight && window.innerHeight < 768;
    var wrap = document.querySelector('.wrap__left');
    var head = document.querySelector('.head');
    var navi = document.querySelector('.navigation-bar');
    var menu_left = wrap ? wrap.getBoundingClientRect().left : 0;
    var menu_width = wrap ? wrap.getBoundingClientRect().width : 0;
    var head_height = head ? head.getBoundingClientRect().height : 0;
    var navi_height = navi && !landscape ? navi.getBoundingClientRect().height : 0;
    var navi_width = navi && landscape ? navi.getBoundingClientRect().width : 0;
    var layer_width = Array.from(target.querySelectorAll('.layer--width'));
    var layer_height = Array.from(target.querySelectorAll('.layer--height'));
    var layer_wheight = Array.from(target.querySelectorAll('.layer--wheight'));
    if (target.classList.contains('layer--width')) layer_width.push(target);
    if (target.classList.contains('layer--height')) layer_height.push(target);
    if (target.classList.contains('layer--wheight')) layer_wheight.push(target);
    for (var i = 0; i < layer_width.length; i++) {
      var elem = layer_width[i],
        read = parseFloat(elem.style.width),
        widh = window.innerWidth - (Platform.screen('light') && menu_left == 0 ? menu_width : 0) - navi_width;
      if (read !== widh) layer_width[i].style.width = widh;
    }
    for (var _i = 0; _i < layer_wheight.length; _i++) {
      var _elem = layer_wheight[_i],
        heig = window.innerHeight - head_height - navi_height,
        attr = _elem.mheight,
        _read = parseFloat(_elem.style.height);
      if (attr) {
        heig -= attr.getBoundingClientRect().height;
      }
      if (_read !== heig) _elem.style.height = heig;
    }
    for (var _i2 = 0; _i2 < layer_height.length; _i2++) {
      var _elem2 = layer_height[_i2],
        _heig = window.innerHeight,
        _attr = _elem2.mheight,
        _read2 = parseFloat(_elem2.style.height);
      if (_attr) {
        _heig -= _attr.getBoundingClientRect().height;
      }
      if (_read2 !== _heig) _elem2.style.height = _heig;
    }
  }
  function intersected(a, b) {
    return a[0] <= b[2] && b[0] <= a[2] && a[1] <= b[3] && b[1] <= a[3];
  }
  function frameVisible(render) {
    var active = Prisma.Activity.active();
    var where = render ? render : active && active.activity ? active.activity.render() : false;
    var area = 1.5;
    var hide = Storage.field('hide_outside_the_screen');
    var v_w = window.innerWidth * area;
    var v_h = window.innerHeight * area;
    var m_w = window.innerWidth - v_w;
    var m_h = window.innerHeight - v_h;
    if (where) {
      var target = where instanceof jQuery ? where[0] : where;
      var elems = [];
      if (target.classList.contains('layer--visible')) {
        elems.push({
          type: 'visible',
          elem: target
        });
      }
      if (target.classList.contains('layer--render')) {
        elems.push({
          type: 'render',
          elem: target
        });
      }
      elems = elems.concat(Array.from(target.querySelectorAll('.layer--visible')).map(function (elem) {
        return {
          type: 'visible',
          elem: elem
        };
      }), Array.from(target.querySelectorAll('.layer--render')).map(function (elem) {
        return {
          type: 'render',
          elem: elem
        };
      }));
      for (var i = 0; i < elems.length; i++) {
        var item = elems[i];
        var elem = item.elem;
        if (item.type == 'visible') {
          if (!elem.call_visible) {
            var bond = elem.getBoundingClientRect();
            if (intersected([m_w, m_h, v_w, v_h], [bond.left, bond.top, bond.left + bond.width, bond.top + bond.height])) {
              elem.call_visible = true;
              item.visible = true;
            }
          }
        }
        if (elem.call_visible) {
          var _bond = elem.getBoundingClientRect();
          var view = hide ? intersected([m_w, m_h, v_w, v_h], [_bond.left, _bond.top, _bond.left + _bond.width, _bond.top + _bond.height]) : true;
          var visibility = view ? 'visible' : 'hidden';
          if (elem.visibility !== visibility) {
            if (!elem.visibility && visibility == 'visible') continue;
            elem.visibility = visibility;
            item.visibility = visibility;
          }
        }
      }
      for (var _i3 = 0; _i3 < elems.length; _i3++) {
        var _item = elems[_i3];
        var _elem3 = _item.elem;
        if (_item.type == 'visible') {
          if (_item.visible) Utils$2.trigger(_elem3, 'visible');
        }
        if (_item.visibility) {
          _elem3.style.visibility = _elem3.visibility;
        }
      }
    }
  }
  function toggleClasses() {
    $('body').toggleClass('no--animation', !Storage.field('animation'));
    $('body').toggleClass('no--mask', !Storage.field('mask'));
    $('body').toggleClass('no--poster', !Storage.field('card_interfice_poster'));
    $('body').toggleClass('glass--style', Storage.field('glass_style'));
    $('body').toggleClass('black--style', Storage.field('black_style'));
    $('body').toggleClass('card--no-cover', !Storage.field('card_interfice_cover'));
    $('body').toggleClass('advanced--animation', Storage.field('advanced_animation'));
    $('body').toggleClass('light--version', Storage.field('light_version'));
    $('body').toggleClass('system--keyboard', Storage.field('keyboard_type') == 'prisma' ? false : true);
    $('body').removeClass('glass--style-opacity--easy glass--style-opacity--medium glass--style-opacity--blacked');
    if (Storage.field('glass_style')) $('body').addClass('glass--style-opacity--' + Storage.field('glass_opacity'));
    Background.theme(Storage.field('black_style') ? 'black' : 'reset');
  }
  function visible(where) {
    requestFrame();
    need_visible = where;
    if (!canianimate) frameVisible(where);
  }
  function update$4(where) {
    requestFrame();
    need_update = where;
    if (!canianimate) frameUpdate(where);
  }
  function requestFrame() {
    if (canianimate && need_update === false && need_visible === false) requestAnimationFrame(updateFrame);
  }
  function updateFrame() {
    if (need_update !== false) frameUpdate(need_update);
    if (need_visible !== false) frameVisible(need_visible);
    need_update = false;
    need_visible = false;
  }
  var Layer = {
    update: update$4,
    visible: visible,
    init: init$y
  };

  function create$f() {
    var _this = this;
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var _self = this;
    var html = Template.js('scroll');
    var body = html.querySelector('.scroll__body');
    var content = html.querySelector('.scroll__content');
    var caianimate = typeof requestAnimationFrame !== 'undefined';
    var frame_time = 0;
    var scroll_position = 0;
    var scroll_transition = 0;
    var scroll_time = 0,
      scroll_step = params.step || 150;
    var call_update_time = Date.now();
    var call_transition_time = Date.now();
    if (params.horizontal) html.classList.toggle('scroll--horizontal', true);
    if (params.mask) html.classList.toggle('scroll--mask', true);
    if (params.over) html.classList.toggle('scroll--over', true);
    if (params.nopadding) html.classList.toggle('scroll--nopadding', true);
    if (params.notransition) body.classList.toggle('notransition', true);
    html.addEventListener('mousewheel', function (e) {
      var parent = $(e.target).parents('.scroll');
      var inner = onTheRightSide(e, true);
      if (!params.horizontal && $(html).is(parent[0])) inner = true;
      if (Storage.field('navigation_type') == 'mouse' && Date.now() - scroll_time > 200 && inner) {
        scroll_time = Date.now();
        if (e.wheelDelta / 120 > 0) {
          if (_this.onWheel) _this.onWheel(-scroll_step);else _this.wheel(-scroll_step);
        } else {
          if (_this.onWheel) _this.onWheel(scroll_step);else _this.wheel(scroll_step);
        }
      }
    });
    html.Scroll = _self;
    body.addEventListener('webkitTransitionEnd', function () {
      if (Date.now() - call_transition_time > 400) return;

      //чет на моей карте выходит 180-190, странно, ну да ладно, поставил 150
      if (Date.now() - call_update_time > 150) scrollEnded();
    });
    if (Platform.screen('tv')) {
      html.addEventListener('scroll', function (e) {
        html.scrollTop = 0;
        html.scrollLeft = 0;
      });
    } else {
      html.addEventListener('scroll', scrollEnded);
    }
    function onTheRightSide(e) {
      var inleft = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var offset = content.getBoundingClientRect().left;
      var width = window.innerWidth - offset;
      var position = e.clientX - offset;
      return params.horizontal ? position > width / 2 : inleft ? position < width / 2 : false;
    }
    function maxOffset(offset) {
      var w = params.horizontal ? html.offsetWidth : html.offsetHeight;
      var p = parseInt(window.getComputedStyle(content, null).getPropertyValue('padding-' + (params.horizontal ? 'left' : 'top')));
      var s = body[params.horizontal ? 'scrollWidth' : 'scrollHeight'];
      offset = Math.min(0, offset);
      offset = Math.max(-(Math.max(s + p * 2, w) - w), offset);
      return offset;
    }
    function scrollEnded() {
      call_update_time = Date.now();
      if (_self.onScroll) _self.onScroll(!Platform.screen('tv') ? html[params.horizontal ? 'scrollLeft' : 'scrollTop'] : -scroll_position);else Layer.visible(html);
      if (_self.onEnd && _self.isEnd()) _self.onEnd();
    }
    function scrollTo(scrl) {
      scroll_position = scrl;
      if (!Platform.screen('tv')) {
        var object = {};
        object[params.horizontal ? 'scrollLeft' : 'scrollTop'] = -scrl;
        $(html).animate(object, 200);
      } else {
        if (scroll_transition == false) {
          scroll_transition = scrl;
          if (caianimate && Storage.field('animation')) {
            var cannow = Date.now() - frame_time > 500;
            if (cannow) animate();else requestAnimationFrame(animate);
          } else animate();
        }
      }
    }
    function animate() {
      body.style['-webkit-transform'] = 'translate3d(' + Math.round(params.horizontal ? scroll_transition : 0) + 'px, ' + Math.round(params.horizontal ? 0 : scroll_transition) + 'px, 0px)';
      scroll_transition = false;
      if (!Storage.field('animation') || Date.now() - call_update_time < 300) scrollEnded();
      frame_time = Date.now();
    }
    function startScroll(scrl) {
      scrollTo(scrl);
      call_update_time = Date.now();
      call_transition_time = Date.now();
    }
    this.addSwipeDown = function (call) {
      if (window.innerWidth > 480) return;
      var s = 0;
      var t = 0;
      html.addEventListener('touchstart', function (e) {
        var point = e.touches[0] || e.changedTouches[0];
        if (s == 0) {
          s = point.clientY;
          t = Date.now();
        }
      });
      html.addEventListener('touchmove', function (e) {
        var point = e.touches[0] || e.changedTouches[0];
        if (s !== 0) {
          if (point.clientY - s > 50 && html.scrollTop == 0 && Date.now() - t < 100) {
            s = 0;
            call();
          }
        }
      });
      html.addEventListener('touchend', function (e) {
        s = 0;
      });
    };
    this.wheel = function (size) {
      var direct = params.horizontal ? 'left' : 'top';
      var scrl = scroll_position,
        scrl_offset = html.getBoundingClientRect()[direct],
        scrl_padding = parseInt(window.getComputedStyle(content, null).getPropertyValue('padding-' + direct));
      if (params.scroll_by_item) {
        var pos = body.scroll_position;
        pos = pos || 0;
        var items = Array.from(body.children);
        pos += size > 0 ? 1 : -1;
        pos = Math.max(0, Math.min(items.length - 1, pos));
        body.scroll_position = pos;
        var item = items[pos],
          ofst = item.getBoundingClientRect()[direct];
        size = ofst - scrl_offset - scrl_padding;
      }
      var max = params.horizontal ? 30000 : body.offsetHeight;
      max -= params.horizontal ? html.offsetWidth : html.offsetHeight;
      max += scrl_padding * 2;
      scrl -= size;
      scrl = Math.min(0, Math.max(-max, scrl));
      scrl = maxOffset(scrl);
      startScroll(scrl);
    };
    this.update = function (elem, tocenter) {
      var dir = params.horizontal ? 'left' : 'top',
        siz = params.horizontal ? 'offsetWidth' : 'offsetHeight';
      var target = elem instanceof jQuery ? elem[0] : elem;
      var ofs_elm = target.getBoundingClientRect()[dir],
        ofs_box = body.getBoundingClientRect()[dir],
        center = ofs_box + (tocenter ? content[siz] / 2 - target[siz] / 2 : 0),
        scrl = Math.min(0, center - ofs_elm);
      scrl = maxOffset(scrl);
      startScroll(scrl);
    };
    this.vieport = function () {
      var vieport = {};
      if (!Platform.screen('tv')) {
        vieport.position = html[params.horizontal ? 'scrollLeft' : 'scrollTop'], vieport.body = body[params.horizontal ? 'scrollWidth' : 'scrollHeight'], vieport.content = html[params.horizontal ? 'offsetWidth' : 'offsetHeight'];
      } else {
        vieport.position = scroll_position;
        vieport.body = body[params.horizontal ? 'offsetWidth' : 'offsetHeight'];
        vieport.content = html[params.horizontal ? 'offsetWidth' : 'offsetHeight'];
      }
      return vieport;
    };
    this.isEnd = function (end_ratio) {
      var vieport = this.vieport();
      if (vieport.body < vieport.content) return vieport.position <= 0;
      return vieport.body - vieport.content * Math.max(1, end_ratio || params.end_ratio || 1) < Math.abs(vieport.position);
    };
    this.isFilled = function () {
      var vieport = this.vieport();
      return vieport.body > vieport.content;
    };
    this.append = function (object) {
      body.appendChild(object instanceof jQuery ? object[0] : object);
    };
    this.minus = function (minus) {
      html.classList.add('layer--wheight');
      html.mheight = minus instanceof jQuery ? minus[0] : minus;
    };
    this.height = function (minus) {
      html.classList.add('layer--height');
      html.mheight = minus instanceof jQuery ? minus[0] : minus;
    };
    this.body = function (js) {
      return js ? body : $(body);
    };
    this.render = function (js) {
      return js ? html : $(html);
    };
    this.clear = function () {
      body.innerHTML = '';
    };
    this.params = function () {
      return params;
    };
    this.position = function () {
      return scroll_position;
    };
    this.reset = function () {
      body.classList.add('transition-reset');
      body.style['-webkit-transform'] = 'translate3d(0px, 0px, 0px)';
      setTimeout(function () {
        body.classList.remove('transition-reset');
      }, 0);
      scroll_position = 0;
    };
    this.destroy = function () {
      html.remove();
    };
  }

  var html$9, active$3, _scroll, last$2;
  var listener$5 = start$8();
  function open$3(params) {
    active$3 = params;
    listener$5.send('preshow', {
      active: active$3
    });
    html$9 = Template.get('modal', {
      title: params.title
    });
    html$9.on('mousedown', function (e) {
      if (!$(e.target).closest($('.modal__content', html$9)).length && DeviceInput.canClick(e.originalEvent)) Controller.back();
    });
    title(params.title);
    html$9.toggleClass('modal--medium', params.size == 'medium' ? true : false);
    html$9.toggleClass('modal--large', params.size == 'large' ? true : false);
    html$9.toggleClass('modal--full', params.size == 'full' ? true : false);
    html$9.toggleClass('modal--overlay', params.overlay ? true : false);
    html$9.toggleClass('modal--align-center', params.align == 'center' ? true : false);
    if (params.zIndex) html$9.css('z-index', params.zIndex);
    _scroll = new create$f({
      over: true,
      mask: params.mask
    });
    _scroll.render().toggleClass('layer--height', params.size == 'full' ? true : false);
    html$9.find('.modal__body').append(_scroll.render());
    if (Platform.screen('mobile') && params.size !== 'full') {
      var close_button = $("<div class=\"modal__close-button\"><svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <rect x=\"3.51477\" y=\"0.686279\" width=\"28\" height=\"4\" rx=\"2\" transform=\"rotate(45 3.51477 0.686279)\" fill=\"currentColor\"/>\n            <rect width=\"28\" height=\"4\" rx=\"2\" transform=\"matrix(-0.707107 0.707107 0.707107 0.707107 20.4854 0.686279)\" fill=\"currentColor\"/>\n            </svg>\n        </div>");
      close_button.on('click', function () {
        Controller.back();
      });
      html$9.find('.modal__content').prepend(close_button);
    }
    bind$1(params.html);
    _scroll.onWheel = function (step) {
      roll(step > 0 ? 'down' : 'up');
    };
    if (params.size == 'full' && Platform.screen('mobile')) {
      _scroll.append(HeadBackward(params.title || ''));
    }
    _scroll.append(params.html);
    _scroll.addSwipeDown(function () {
      html$9.addClass('animate-down');
      setTimeout(function () {
        Controller.back();
      }, 200);
    });
    if (params.buttons) buttons();
    $('body').append(html$9);
    max();
    listener$5.send('fullshow', {
      active: active$3,
      html: html$9
    });
    toggle$3(params.select);
    html$9.addClass('animate');
  }
  function max() {
    var height = window.innerWidth <= 480 ? window.innerHeight * 0.6 : window.innerHeight - _scroll.render().offset().top - window.innerHeight * 0.1 - (active$3.buttons && active$3.buttons_position == 'outside' ? window.innerHeight * 0.1 : 0);
    _scroll.render().find('.scroll__content').css('max-height', Math.round(height) + 'px');
  }
  function buttons() {
    var footer = $('<div class="modal__footer"></div>');
    active$3.buttons.forEach(function (button) {
      var btn = $('<div class="modal__button selector"></div>');
      btn.text(button.name);
      btn.on('click hover:enter', function (e) {
        if (DeviceInput.noDubleClick(e)) button.onSelect();
      });
      footer.append(btn);
    });
    if (active$3.buttons_position == 'outside') html$9.find('.modal__content').append(footer);else _scroll.append(footer);
  }
  function bind$1(where) {
    where.find('.selector').on('hover:focus', function (e) {
      last$2 = e.target;
      _scroll.update($(e.target));
    }).on('hover:enter', function (e) {
      last$2 = e.target;
      if (active$3.onSelect) active$3.onSelect($(e.target));
    });
  }
  function jump(tofoward) {
    var select = _scroll.render().find('.selector.focus');
    if (tofoward) select = select.nextAll().filter('.selector');else select = select.prevAll().filter('.selector');
    select = select.slice(0, 10);
    select = select.last();
    if (select.length) {
      Controller.collectionFocus(select[0], _scroll.render());
    }
  }
  function roll(direction) {
    var select = _scroll.render().find('.selector');
    if (select.length) {
      Navigator.move(direction);
    } else {
      var step = Math.round(window.innerHeight * 0.15);
      _scroll.wheel(direction == 'down' ? step : -step);
    }
  }
  function toggle$3(need_select) {
    Controller.add('modal', {
      invisible: true,
      toggle: function toggle() {
        Controller.collectionSet(_scroll.render());
        Controller.collectionFocus(need_select || last$2, _scroll.render());
        Layer.visible(_scroll.render(true));
        listener$5.send('toggle', {
          active: active$3,
          html: html$9
        });
      },
      up: function up() {
        if (active$3.buttons && active$3.buttons_position == 'outside' && (_scroll.isEnd() || !_scroll.isFilled())) {
          Controller.toggle('modal');
          roll('up');
        } else roll('up');
      },
      down: function down() {
        if (active$3.buttons && active$3.buttons_position == 'outside' && (_scroll.isEnd() || !_scroll.isFilled())) {
          Controller.collectionSet(html$9.find('.modal__footer'));
          Controller.collectionFocus(false, html$9.find('.modal__footer'));
        } else roll('down');
      },
      right: function right() {
        if (Navigator.canmove('right')) Navigator.move('right');else jump(true);
      },
      left: function left() {
        if (Navigator.canmove('left')) Navigator.move('left');else jump(false);
      },
      back: function back() {
        if (active$3.onBack) active$3.onBack();
      }
    });
    Controller.toggle('modal');
  }
  function update$3(new_html) {
    last$2 = false;
    _scroll.clear();
    _scroll.append(new_html);
    bind$1(new_html);
    max();
    listener$5.send('update', {
      active: active$3,
      html: html$9,
      new_html: new_html
    });
    toggle$3(active$3.select);
  }
  function title(tit) {
    html$9.find('.modal__title').text(tit);
    html$9.toggleClass('modal--empty-title', tit ? false : true);
  }
  function destroy$3() {
    last$2 = false;
    _scroll.destroy();
    html$9.remove();
    listener$5.send('close', {
      active: active$3
    });
  }
  function close$4() {
    destroy$3();
  }
  function render$5() {
    return html$9;
  }
  var Modal = {
    listener: listener$5,
    open: open$3,
    close: close$4,
    update: update$3,
    title: title,
    toggle: toggle$3,
    render: render$5,
    scroll: function scroll() {
      return _scroll;
    }
  };

  function init$x() {
    var agent = navigator.userAgent.toLowerCase();
    if (typeof webOS !== 'undefined' && webOS.platform.tv === true) {
      Storage.set('platform', 'webos');
      webOS.deviceInfo(function (e) {
        webOS.sdk_version = parseFloat(e.sdkVersion);
      });
    } else if (typeof webapis !== 'undefined' && typeof tizen !== 'undefined') {
      Storage.set('platform', 'tizen');
      tizen.tvinputdevice.registerKey("MediaPlayPause");
      tizen.tvinputdevice.registerKey("MediaPlay");
      tizen.tvinputdevice.registerKey("MediaStop");
      tizen.tvinputdevice.registerKey("MediaPause");
      tizen.tvinputdevice.registerKey("MediaRewind");
      tizen.tvinputdevice.registerKey("MediaFastForward");
      tizen.tvinputdevice.registerKey("ChannelUp");
      tizen.tvinputdevice.registerKey("ChannelDown");
    } else if (agent.indexOf("prisma_client") > -1) {
      Storage.set('platform', 'android');
    } else if (agent.indexOf("whaletv") > -1 || agent.indexOf("philips") > -1 || agent.indexOf("nettv") > -1) {
      Storage.set('platform', 'philips');
    } else if (agent.indexOf("ipad") > -1 && window.innerWidth == 1920 && window.innerHeight == 1080) {
      Storage.set('platform', 'apple_tv');
    } else if (agent.indexOf("iphone") > -1 || agent.indexOf("mac os") > -1 && Utils$2.isTouchDevice() || agent.indexOf("macintosh") > -1 && Utils$2.isTouchDevice()) {
      Storage.set('platform', 'apple');
    } else if (typeof nw !== 'undefined') {
      Storage.set('platform', 'nw');
    } else if (agent.indexOf("electron") > -1) {
      Storage.set('platform', 'electron');
    } else if (agent.indexOf("netcast") > -1) {
      Storage.set('platform', 'netcast');
    } else if (agent.indexOf("version/5.1.7 safari/534.57.2") > -1) {
      Storage.set('platform', 'orsay');
    } else if (agent.indexOf("windows nt") > -1 || agent.indexOf("macintosh") > -1 && !Utils$2.isTouchDevice()) {
      Storage.set('platform', 'browser');
    } else if (agent.indexOf("maple") > -1) {
      Storage.set('platform', 'orsay');
      Orsay$1.init();
    } else {
      Storage.set('platform', '');
    }
    Storage.set('native', Storage.get('platform') ? true : false);
    $('body').addClass('platform--' + (get$5() || 'noname'));
    if (!screen('tv')) $('body').addClass('touch-device');
  }

  /**
   * Какая платформа
   * @returns String
   */
  function get$5() {
    return Storage.get('platform', '');
  }

  /**
   * Если это платформа
   * @param {String} need - какая нужна? tizen, webos, android, orsay
   * @returns Boolean
   */
  function is(need) {
    return get$5() == need ? true : false;
  }

  /**
   * Если хоть одна из платформ tizen, webos, android
   * @returns Boolean
   */
  function any() {
    return is('tizen') || is('webos') || is('android') || is('netcast') || is('orsay') || is('apple') || is('apple_tv') || macOS() || desktop() ? true : false;
  }

  /**
   * Если это именно телек
   * @returns Boolean
   */
  function tv() {
    return is('tizen') || is('webos') || is('orsay') || is('netcast') || is('apple_tv') ? true : false;
  }

  /**
   * Если это NW.js или Electron
   * @returns Boolean
   */
  function desktop() {
    return is('nw') || is('electron') ? true : false;
  }
  function macOS() {
    var agent = navigator.userAgent.toLowerCase();
    return agent.indexOf("mac os x") > -1 && !Utils$2.isTouchDevice();
  }
  function version(name) {
    if (name == 'app') {
      return object$2.app_version;
    } else if (name == 'android') {
      return AndroidJS.appVersion();
    } else if (name == 'orsay') {
      return curWidget.version;
    } else {
      return '';
    }
  }
  function screen(need) {
    if (need == 'light') {
      return Storage.field('light_version') && screen('tv');
    }
    var is_tv = true;
    if (!tv()) {
      if (Storage.get('is_true_mobile', 'false')) is_tv = false;else if (Boolean(Storage.get('platform', '') == 'apple')) is_tv = false;else if (Boolean(navigator.userAgent.toLowerCase().match(/iphone|ipad/i))) is_tv = false;else if (Utils$2.isTouchDevice()) {
        if (!Boolean(navigator.userAgent.toLowerCase().match(/(large screen)|googletv|mibox|mitv|smarttv|google tv|android tv/i))) {
          var ratio = window.devicePixelRatio || 1;
          var width = Math.ceil(window.innerWidth * ratio);
          var height = Math.ceil(window.innerHeight * ratio);
          is_tv = width > height && width >= 1280;
        }
      }
    }
    if (need == 'tv') return is_tv;
    if (need == 'mobile') return !is_tv;
    return false;
  }
  function install$1(what) {
    var about = Template.get('about');
    if ($('.modal').length) Modal.close();
    if (what == 'apk') {
      $('> div:eq(0)', about).html(Lang.translate('install_app_apk_text'));
      $('.about__contacts', about).empty();
      $('.about__rules', about).remove();
      $('.about__contacts', about).append("\n            <div>\n                <small>Telegram</small><br>\n                @prisma_party\n            </div>\n        ");
      Modal.open({
        title: '',
        html: about,
        size: 'medium',
        onBack: function onBack() {
          Modal.close();
          Controller.toggle('content');
        }
      });
    }
  }
  var Platform = {
    init: init$x,
    get: get$5,
    any: any,
    is: is,
    tv: tv,
    desktop: desktop,
    version: version,
    screen: screen,
    install: install$1,
    macOS: macOS
  };

  var bell;
  var items$1 = [];
  function Item$1(params) {
    var _this = this;
    Arrays.extend(params, {
      icon: "<svg width=\"24\" height=\"24\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M12 6.75V13.5\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-linecap=\"round\"/>\n                <circle cx=\"12\" cy=\"16.875\" r=\"1.125\" fill=\"currentColor\"/>\n                <path d=\"M23.0246 11.9999C23.0246 5.91091 18.0885 0.974854 11.9996 0.974854C5.91067 0.974854 0.974609 5.91091 0.974609 11.9999C0.974609 18.0888 5.91067 23.0249 11.9996 23.0249C18.0885 23.0249 23.0246 18.0888 23.0246 11.9999Z\" stroke=\"currentColor\" stroke-width=\"1.5\" stroke-miterlimit=\"10\"/>\n                </svg>",
      type: 'info',
      text: '',
      time: 5000
    });
    var element = $("<div class=\"bell__item bell__item--".concat(params.type, "\">\n        <div class=\"bell__item-icon\">").concat(params.icon, "</div>\n        <div class=\"bell__item-text\">").concat(params.text, "</div>    \n    </div>"));
    setTimeout(function () {
      element.removeClass('show');
      setTimeout(function () {
        var slide = $("<div class=\"bell__item-slide\"></div>");
        slide.css('height', element.outerHeight() + 'px');
        element.after(slide);
        element.remove();
        Arrays.remove(items$1, _this);
        slide.animate({
          height: 0
        }, 300, function () {
          slide.remove();
        });
        if (items$1.length == 0) {
          bell.removeClass('show');
        }
      }, 300);
    }, params.time);
    bell.find('.bell__wrap').append(element);
    setTimeout(function () {
      element.addClass('show');
    }, 100);
    items$1.push(this);
    Sound$1.play('bell');
  }
  function init$w() {
    bell = $("<div class=\"bell\">\n        <div class=\"bell__wrap\"></div>\n    </div>");
    $('body').append(bell);
  }
  function push$3(params) {
    new Item$1(params);
    bell.addClass('show');
  }
  var Bell = {
    init: init$w,
    push: push$3
  };

  var reqCallback = {};
  var timeCallback = {};
  function init$v() {
    if (Platform.is('android')) {
      Params.listener.follow('button', function (e) {
        if (e.name === 'reset_player') {
          resetDefaultPlayer();
        }
      });
      Favorite.listener.follow('add,added,remove', function (e) {
        updateChannel(e.where);
      });
    }
  }
  function exit() {
    if (checkVersion(1)) AndroidJS.exit();else $('<a href="prisma://exit"></a>')[0].click();
  }
  function playHash(SERVER) {
    var magnet = "magnet:?xt=urn:btih:" + SERVER.hash;
    if (checkVersion(10)) {
      var intentExtra = "";
      if (SERVER.movie) {
        intentExtra = {
          title: " " + (SERVER.movie.title || 'No title').replace(/\s+/g, ' ').trim(),
          poster: SERVER.movie.img,
          media: SERVER.movie.name ? 'tv' : 'movie',
          data: {
            prisma: true,
            movie: SERVER.movie
          }
        };
      }
      AndroidJS.openTorrentLink(magnet, JSON.stringify(intentExtra));
    } else {
      $('<a href="' + magnet + '"/>')[0].click();
    }
  }
  function openTorrent(SERVER) {
    if (checkVersion(10)) {
      var intentExtra = {
        title: " " + (SERVER.movie.title || 'No title').replace(/\s+/g, ' ').trim(),
        poster: SERVER.object.poster,
        media: SERVER.movie.name ? 'tv' : 'movie',
        data: {
          prisma: true,
          movie: SERVER.movie
        }
      };
      AndroidJS.openTorrentLink(SERVER.object.MagnetUri || SERVER.object.Link, JSON.stringify(intentExtra));
    } else {
      $('<a href="' + (SERVER.object.MagnetUri || SERVER.object.Link) + '"/>')[0].click();
    }
  }
  function openPlayer(link, data) {
    var updateTimeline = function updateTimeline(elem) {
      if (elem.timeline) {
        var new_timeline = Prisma.Timeline.view(elem.timeline.hash);
        elem.timeline.time = Math.round(new_timeline.time);
        elem.timeline.duration = Math.round(new_timeline.duration);
        elem.timeline.percent = new_timeline.percent;
        timeCallback[elem.timeline.hash] = elem;
      }
    };
    if (checkVersion(98, true)) {
      if (data.timeline) {
        updateTimeline(data);
      }
      if (data.playlist) {
        data.playlist.forEach(function (elem) {
          updateTimeline(elem);
        });
      }
    }
    if (checkVersion(10)) AndroidJS.openPlayer(link, JSON.stringify(data));else $('<a href="' + link + '"><a/>')[0].click();
  }
  function openYoutube(link) {
    if (checkVersion(15)) AndroidJS.openYoutube(link);else $('<a href="' + link + '"><a/>')[0].click();
  }
  function openBrowser(link) {
    if (checkVersion(484)) AndroidJS.openBrowser(link);
  }
  function resetDefaultPlayer() {
    if (checkVersion(15)) AndroidJS.clearDefaultPlayer();
  }
  function httpReq(data, call) {
    var index = Math.floor(Math.random() * 5000);
    reqCallback[index] = {
      data: data,
      call: call
    };
    if (checkVersion(16)) AndroidJS.httpReq(JSON.stringify(data), index);else call.error({
      responseText: "No Native request"
    });
  }
  function httpCall(index, callback) {
    var req = reqCallback[index];
    if (req && req.call[callback]) {
      var resp = AndroidJS.getResp(index);
      if (!req.data.dataType || req.data.dataType && req.data.dataType.toLowerCase() == 'json' || callback === 'error') {
        try {
          resp = JSON.parse(resp);
        } catch (e) {}
      }
      delete reqCallback[index];
      req.call[callback](resp);
    }
  }
  function timeCall(timeline) {
    var hash = timeline.hash;
    if (timeCallback[hash]) {
      timeCallback[hash].timeline.handler(timeline.percent, timeline.time, timeline.duration);
      timeCallback[hash].timeline.percent = timeline.percent;
      timeCallback[hash].timeline.duration = timeline.duration;
      timeCallback[hash].timeline.time = timeline.time;
      delete timeCallback[hash];
    }
  }
  function voiceStart() {
    if (checkVersion(25)) AndroidJS.voiceStart();else Prisma.Noty.show("Работает только на Android TV");
  }
  function updateChannel(where) {
    if (checkVersion(28)) AndroidJS.updateChannel(where);
  }
  function checkVersion(needVersion) {
    var silent = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    if (typeof AndroidJS !== 'undefined') {
      try {
        var current = AndroidJS.appVersion().split('-');
        var versionCode = current.pop();
        if (parseInt(versionCode, 10) >= needVersion) {
          return true;
        } else {
          if (!silent) Bell.push({
            text: 'Обновите приложение до версии ' + needVersion
          });
          return false;
        }
      } catch (e) {
        Bell.push({
          text: 'Обновите приложение до версии ' + needVersion
        });
        return false;
      }
    } else return false;
  }
  var Android = {
    init: init$v,
    exit: exit,
    openTorrent: openTorrent,
    openPlayer: openPlayer,
    playHash: playHash,
    openYoutube: openYoutube,
    resetDefaultPlayer: resetDefaultPlayer,
    httpReq: httpReq,
    voiceStart: voiceStart,
    httpCall: httpCall,
    timeCall: timeCall,
    updateChannel: updateChannel,
    openBrowser: openBrowser
  };

  function create$e() {
    var listener = start$8();
    var _calls = [];
    var _last;
    var last_reguest;
    var need = {
      timeout: 1000 * 60
    };
    this.timeout = function (time) {
      need.timeout = time;
    };

    /**
     * Видимый запрос
     * @param {String} url адрес
     * @param {Function} complite успешно
     * @param {Function} error ошибка
     * @param {Object} post_data данные для пост запроса
     */

    this.get = function (url, _complite, _error, post_data) {
      clear();
      go({
        url: url,
        post_data: post_data,
        start: function start() {
          listener.send('start');
        },
        before_complite: function before_complite() {
          listener.send('before_complite');
        },
        complite: function complite(data) {
          if (_complite) _complite(data);
        },
        after_complite: function after_complite() {
          listener.send('after_complite');
        },
        before_error: function before_error() {
          listener.send('before_error');
        },
        error: function error(data) {
          if (_error) _error(data);
        },
        after_error: function after_error() {
          listener.send('after_error');
        },
        end: function end() {
          listener.send('end');
        }
      });
    };

    /**
     * Тихий запрос, отработает в любом случае
     * @param {String} url адрес
     * @param {Function} complite успешно
     * @param {Function} error ошибка
     * @param {Object} post_data данные для пост запроса
     * @param {Object} params дополнительные параметры
     */
    this.quiet = function (url, _complite2, _error2, post_data, params) {
      var add_params = {};
      if (params) {
        add_params = params;
      }
      var data = {
        url: url,
        post_data: post_data,
        complite: function complite(data) {
          if (_complite2) _complite2(data);
        },
        error: function error(data) {
          if (_error2) _error2(data);
        }
      };
      Arrays.extend(data, add_params, true);
      go(data);
    };

    /**
     * Бесшумный запрос, сработает прерывание при новом запросе
     * @param {String} url адрес
     * @param {Function} complite успешно
     * @param {Function} error ошибка
     * @param {Object} post_data данные для пост запроса
     * @param {Object} params дополнительные параметры
     */
    this.silent = function (url, complite, error, post_data, params) {
      var add_params = {};
      if (params) {
        add_params = params;
      }
      var reguest = {
        url: url,
        complite: complite,
        error: error
      };
      _calls.push(reguest);
      var data = {
        url: url,
        post_data: post_data,
        complite: function complite(data) {
          if (_calls.indexOf(reguest) !== -1 && reguest.complite) reguest.complite(data);
        },
        error: function error(data) {
          if (_calls.indexOf(reguest) !== -1 && reguest.error) reguest.error(data);
        },
        end: function end() {
          listener.send('end');
        }
      };
      Arrays.extend(data, add_params, true);
      go(data);
    };

    /**
     * Отработать только последний запрос в стеке
     * @param {String} url адрес
     * @param {Function} complite успешно
     * @param {Function} error ошибка
     * @param {Object} post_data данные для пост запроса
     */
    this.last = function (url, complite, error, post_data) {
      var reguest = {
        url: url,
        complite: complite,
        error: error
      };
      _last = reguest;
      go({
        url: url,
        post_data: post_data,
        complite: function complite(data) {
          if (_last && _last.complite) _last.complite(data);
        },
        error: function error(data) {
          if (_last && _last.error) _last.error(data);
        },
        end: function end() {
          dispatchEvent({
            type: 'load:end'
          });
        }
      });
    };
    this["native"] = function (url, complite, error, post_data, params) {
      var add_params = {};
      if (params) {
        add_params = params;
      }
      var reguest = {
        url: url,
        complite: complite,
        error: error
      };
      _calls.push(reguest);
      var data = {
        url: url,
        post_data: post_data,
        complite: function complite(data) {
          if (_calls.indexOf(reguest) !== -1 && reguest.complite) reguest.complite(data);
        },
        error: function error(data) {
          if (_calls.indexOf(reguest) !== -1 && reguest.error) reguest.error(data);
        },
        end: function end() {
          listener.send('end');
        }
      };
      Arrays.extend(data, add_params, true);
      _native(data);
    };

    /**
     * Очистить все запросы
     */
    this.clear = function () {
      _calls = [];
    };

    /**
     * Повторить запрос
     * @param {Object} custom 
     */
    this.again = function (custom) {
      if (custom || last_reguest) {
        go(custom || last_reguest);
      }
    };

    /**
     * Вернуть обьект последненго запроса
     * @returns Object
     */
    this.latest = function () {
      return last_reguest;
    };

    /**
     * Декодировать ошибку в запросе
     * @param {Object} jqXHR 
     * @param {String} exception 
     * @returns String
     */

    this.errorDecode = function (jqXHR, exception) {
      return errorDecode(jqXHR, exception);
    };
    this.errorCode = function (jqXHR) {
      return errorCode(jqXHR);
    };
    this.errorJSON = function (jqXHR) {
      return errorJSON(jqXHR);
    };
    function errorDecode(jqXHR, exception) {
      if (!Arrays.isObject(jqXHR)) return Lang.translate('network_error');
      var msg = '';
      var txt = jqXHR.responseText || jqXHR.message || jqXHR.status || '';
      if (jqXHR.status === 0 && exception !== 'timeout') {
        msg = Lang.translate('network_noconnect');
      } else if (jqXHR.responseJSON && jqXHR.responseJSON.code) {
        msg = Lang.translate('network_500').replace('500', jqXHR.responseJSON.code) + (jqXHR.responseJSON.text ? ' [' + jqXHR.responseJSON.text + ']' : '');
      } else if (jqXHR.status == 404) {
        msg = Lang.translate('network_404');
      } else if (jqXHR.status == 401) {
        msg = Lang.translate('network_401');
      } else if (jqXHR.status == 500) {
        msg = Lang.translate('network_500');
      } else if (exception === 'parsererror') {
        msg = Lang.translate('network_parsererror');
      } else if (exception === 'timeout') {
        msg = Lang.translate('network_timeout');
      } else if (exception === 'abort') {
        msg = Lang.translate('network_abort');
      } else if (exception === 'custom') {
        msg = jqXHR.responseText;
      } else {
        msg = Lang.translate('network_error') + (txt ? ': ' + txt : '');
      }
      return msg;
    }
    function errorCode(jqXHR) {
      return jqXHR && jqXHR.responseJSON ? jqXHR.responseJSON.code : jqXHR ? jqXHR.status : 404;
    }
    function errorJSON(jqXHR) {
      return jqXHR && jqXHR.responseJSON ? jqXHR.responseJSON : {
        code: jqXHR ? jqXHR.status : 404,
        text: jqXHR ? jqXHR.responseText || jqXHR.message || Lang.translate('network_404') : Lang.translate('network_404')
      };
    }

    /**
     * Сделать запрос
     * @param {Object} params 
     */
    function go(params) {
      var start_time = Date.now();
      var error = function error(jqXHR, exception) {
        jqXHR.decode_error = errorDecode(jqXHR, exception);
        jqXHR.decode_code = errorCode(jqXHR);
        params.url = params.url || 'no url';
        Prisma.Listener.send('request_error', {
          params: params,
          error: jqXHR,
          exception: exception
        });
        var end_time = Date.now() - start_time;
        var time = end_time > 1000 ? Math.round(end_time / 1000) + 's' : end_time + 'ms';
        console.log('Request', params.post_data ? 'POST' : 'GET', 'time:', time, 'error of ' + params.url + ' :', errorDecode(jqXHR, exception));
        if (params.before_error) params.before_error(jqXHR, exception);
        if (params.error) params.error(jqXHR, exception);
        if (params.after_error) params.after_error(jqXHR, exception);
        if (params.end) params.end();
      };
      if (typeof params.url !== 'string' || !params.url) return error({
        status: 404
      }, '');
      listener.send('go');
      last_reguest = params;
      if (params.start) params.start();
      var secuses = function secuses(data, textStatus, jqXHR) {
        if (params.before_complite) params.before_complite(data);
        if (params.complite) {
          try {
            params.complite(data);
          } catch (e) {
            console.error('Request', 'complite error:', e.message + "\n\n" + e.stack);
            Noty$1.show('Error: ' + (e.error || e).message + '<br><br>' + (e.error && e.error.stack ? e.error.stack : e.stack || '').split("\n").join('<br>'));
          }
        }
        if (params.after_complite) params.after_complite(data);
        if (params.end) params.end();
      };
      var datatype = params.dataType || 'json';
      var data = {
        dataType: datatype,
        url: params.url,
        timeout: need.timeout,
        crossDomain: true,
        success: function success(data, textStatus, jqXHR) {
          if (datatype === 'json' && !data) error({
            status: 500
          });else secuses(data);
        },
        error: error,
        beforeSend: function beforeSend(xhr) {
          var use = Storage.field('torrserver_auth');
          var srv = Storage.get(Storage.field('torrserver_use_link') == 'two' ? 'torrserver_url_two' : 'torrserver_url');
          if (use && srv && params.url.indexOf(srv) >= 0) {
            var authorization = "Basic " + Base64.encode(Storage.get('torrserver_login') + ':' + Storage.get('torrserver_password'));
            console.log('Request', 'authorization:', authorization);
            xhr.setRequestHeader("Authorization", authorization);
          }
          if (params.beforeSend) {
            xhr.setRequestHeader(params.beforeSend.name, params.beforeSend.value);
          }
        }
      };
      if (params.withCredentials) {
        data.xhrFields = {
          withCredentials: true
        };
      }
      if (params.post_data) {
        data.type = 'POST';
        data.data = params.post_data;
      }
      if (params.type) data.type = params.type;
      if (params.headers) {
        data.headers = params.headers;
      }
      $.ajax(data);
      need.timeout = 1000 * 60;
    }

    /**
     * Сделать нативный Android запрос
     * @param {Object} params 
     */
    function android_go(params) {
      var start_time = Date.now();
      var error = function error(jqXHR, exception) {
        var end_time = Date.now() - start_time;
        var time = end_time > 1000 ? Math.round(end_time / 1000) + 's' : end_time + 'ms';
        console.log('Request', params.post_data ? 'POST' : 'GET', 'time:', time, 'error of ' + params.url + ' :', errorDecode(jqXHR, exception));
        if (params.before_error) params.before_error(jqXHR, exception);
        if (params.error) params.error(jqXHR, exception);
        if (params.after_error) params.after_error(jqXHR, exception);
        if (params.end) params.end();
      };
      if (typeof params.url !== 'string' || !params.url) return error({
        status: 404
      }, '');
      listener.send('go');
      last_reguest = params;
      if (params.start) params.start();
      var secuses = function secuses(data) {
        if (params.before_complite) params.before_complite(data);
        if (params.complite) {
          try {
            params.complite(data);
          } catch (e) {
            console.error('Request', 'complite error:', e.message + "\n\n" + e.stack);
            Noty$1.show('Error: ' + (e.error || e).message + '<br><br>' + (e.error && e.error.stack ? e.error.stack : e.stack || '').split("\n").join('<br>'));
          }
        }
        if (params.after_complite) params.after_complite(data);
        if (params.end) params.end();
      };
      params.timeout = need.timeout;
      Android.httpReq(params, {
        complite: secuses,
        error: error
      });
      need.timeout = 1000 * 60;
    }
    function _native(params) {
      if (Platform.is('android')) android_go(params);else go(params);
    }
  }

  function Progress() {
    var works = [];
    var result = [];
    var loaded = 0;
    this.append = function (call) {
      if (Arrays.isArray(call)) works = works.concat(call);else if (typeof call == 'function') works.push(call);
    };
    this.start = function (complite) {
      works.forEach(function (fun, i) {
        fun(function (data) {
          result[i] = data;
          loaded++;
          if (loaded == works.length) complite(result);
        });
      });
    };
  }

  /**
   * Источники
   */
  var sources = {
    tmdb: TMDB
  };

  /**
   * Чтоб не переписали их
   */
  Object.defineProperty(sources, 'tmdb', {
    get: function get() {
      return TMDB;
    }
  });
  // Object.defineProperty(sources, 'cub', { get: ()=> CUB })

  var network$5 = new create$e();

  /**
   * Получить источник
   * @param {{source:string}} params 
   * @returns {class}
   */
  function source(params) {
    return params.source && sources[params.source] ? sources[params.source] : sources.tmdb;
  }
  function availableDiscovery() {
    var list = [];
    var active = Storage.get('source', 'tmdb');
    for (var key in sources) {
      console.log('Api', 'discovery check:', key, sources[key].discovery ? true : false, _typeof(sources[key].discovery));
      if (sources[key].discovery) {
        if (key === active) list.splice(0, 0, sources[key].discovery());else list.push(sources[key].discovery());
      }
    }
    return list;
  }

  /**
   * Главная страница
   * @param {{source:string}} params 
   * @param {function} oncomplite 
   * @param {function} onerror 
   */
  function main$1() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    return source(params).main(params, oncomplite, onerror);
  }

  /**
   * Категория
   * @param {{url:string, source:string}} params 
   * @param {function} oncomplite 
   * @param {function} onerror 
   */
  function category() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    return source(params).category(params, oncomplite, onerror);
  }

  /**
   * Просмотр карточки
   * @param {{id:string, source:string, method:string, card:{}}} params 
   * @param {function} oncomplite 
   * @param {function} onerror 
   */
  function full() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    source(params).full(params, oncomplite, onerror);
  }

  /**
   * Главный поиск
   * @param {{query:string}} params 
   * @param {function} oncomplite
   */
  function search$1() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    TMDB.search(params, function (json) {
      var result = {
        movie: json.find(function (a) {
          return a.type == 'movie';
        }),
        tv: json.find(function (a) {
          return a.type == 'tv';
        })
      };
      oncomplite(result);
    }, function () {
      oncomplite({});
    });
  }

  /**
   * Что-то старое, надо проверить
   * @param {object} params
   * @param {function} oncomplite 
   */
  function menuCategory() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    source(params).menuCategory(params, oncomplite);
  }

  /**
   * Информация об актёре
   * @param {{id:integer, source:string}} params 
   * @param {function} oncomplite 
   * @param {function} onerror 
   */
  function person() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    source(params).person(params, oncomplite, onerror);
  }

  /**
   * Жанры
   * @param {object} params 
   * @param {function} oncomplite 
   * @param {function} onerror 
   */
  function genres() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    TMDB.genres(params, oncomplite, onerror);
  }

  /**
   * Компания
   * @param {{id:integer}} params 
   * @param {function} oncomplite 
   * @param {function} onerror 
   */
  function company() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    TMDB.company(params, oncomplite, onerror);
  }

  /**
   * Полная категори
   * @param {{page:integer, url:string, source:string}} params 
   * @param {function} oncomplite 
   * @param {function} onerror 
   */
  function list$1() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    source(params).list(params, oncomplite, onerror);
  }

  /**
   * Получить список категорий для каталога в меню
   * @param {{source:string}} params 
   * @param {function} oncomplite 
   */
  function menu() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    source(params).menu(params, oncomplite);
  }

  /**
   * Сезоны
   * @param {{id:integer, source:string}} tv 
   * @param {[1,2,3]} from - список сезонов 1,3,4...
   * @param {function} oncomplite 
   */
  function seasons(tv, from, oncomplite) {
    source(tv).seasons(tv, from, oncomplite);
  }

  /**
   * Коллекции 
   * @param {object} params 
   * @param {function} oncomplite 
   * @param {function} onerror 
   */
  function collections(params, oncomplite, onerror) {
    source(params).collections(params, oncomplite, onerror);
  }

  /**
   * Закладки
   * @param {{page:integer, type:string}} params 
   * @param {function} oncomplite 
   * @param {function} onerror 
   */
  function favorite() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    var extract = function extract() {
      var data = {};
      data.results = Favorite.get(params);
      if (params.filter) {
        data.results = data.results.filter(function (a) {
          return params.filter == 'tv' ? a.name : !a.name;
        });
      }
      data.total_pages = Math.ceil(data.results.length / 20);
      data.page = Math.min(params.page, data.total_pages);
      var offset = data.page - 1;
      data.results = data.results.slice(20 * offset, 20 * offset + 20);
      if (data.results.length) oncomplite(data);else onerror();
    };
    if (Account.working()) {
      var tic = 0;
      var timer = setInterval(function () {
        var any = Prisma.Account.all();
        if (any.length) {
          clearInterval(timer);
          extract();
        } else if (tic > 10) {
          clearInterval(timer);
          onerror();
        }
        tic++;
      }, 1000);
    } else extract();
  }

  /**
   * Релизы
   * @param {function} oncomplite 
   * @param {function} onerror 
   */
  function relise(params, oncomplite, onerror) {
    network$5.silent(Utils$2.protocol() + 'tmdb.' + object$2.cub_domain + '?sort=releases&results=20&page=' + params.page, oncomplite, onerror);
  }
  function partPersons(parts, parts_limit, type) {
    var shift = arguments.length > 3 && arguments[3] !== undefined ? arguments[3] : 0;
    if (shift == 0) shift = parts.length;
    return function (call) {
      if (['movie', 'tv'].indexOf(type) == -1) return call();
      TMDB.get('person/popular', {}, function (json) {
        call();
        json.results.sort(function (a, b) {
          return a.popularity - b.popularity;
        });
        var filtred = json.results.filter(function (p) {
          return p.known_for_department && p.known_for;
        });
        var persons = filtred.filter(function (p) {
          return (p.known_for_department || '').toLowerCase() == 'acting' && p.known_for.length && p.popularity > 30;
        }).slice(0, 10);
        persons.forEach(function (person_data, index) {
          var event = function event(call_inner) {
            person({
              only_credits: type,
              id: person_data.id
            }, function (result) {
              if (!result.credits) return call_inner();
              var items = (result.credits[type] || []).filter(function (m) {
                return m.backdrop_path && m.popularity > 30 && m.vote_count > 20;
              });
              if (type == 'tv') items = items.filter(function (m) {
                return !(m.genre_ids.indexOf(10767) >= 0 || m.genre_ids.indexOf(10763) >= 0);
              });
              items.sort(function (a, b) {
                var da = a.release_date || a.first_air_date;
                var db = b.release_date || b.first_air_date;
                if (db > da) return 1;else if (db < da) return -1;else return 0;
              });
              var src = person_data.profile_path ? TMDB.img(person_data.profile_path, 'w90_and_h90_face') : person_data.img || './img/actor.svg';
              var icon = "<div class=\"full-person layer--visible full-person--small full-person--loaded\">\n                            <div class=\"full-person__photo\">\n                                <img src=\"".concat(src, "\">\n                            </div>\n                        \n                            <div class=\"full-person__body\">\n                                <div class=\"full-person__name\">").concat(person_data.name, "</div>\n                            </div>\n                        </div>");
              call_inner({
                results: items.length > 5 ? items.slice(0, 20) : [],
                nomore: true,
                title: icon
              });
            });
          };
          parts.push(event);
          Arrays.shuffleArrayFromIndex(parts, shift);
        });
      }, call);
    };
  }
  function partNext(parts, parts_limit, partLoaded, partEmpty) {
    var pieces = parts.filter(function (p) {
      return typeof p == 'function';
    }).slice(0, 0 + parts_limit);
    if (pieces.length) {
      var progress = new Progress();
      progress.append(pieces);
      progress.start(function (result) {
        var data = result.filter(function (r) {
          return r && r.results && r.results.length;
        });
        for (var i = 0; i < pieces.length; i++) {
          parts[parts.indexOf(pieces[i])] = false;
        }
        if (data.length) {
          if (data.length < 3) {
            partNext(parts, parts_limit, function (more_data) {
              data = data.concat(more_data);
              partLoaded(data);
            }, function () {
              partLoaded(data);
            });
          } else partLoaded(data);
        } else partNext(parts, parts_limit, partLoaded, partEmpty);
      });
    } else partEmpty();
  }

  /**
   * Очистить
   */
  function clear$4() {
    for (var i in sources) sources[i].clear();
    network$5.clear();
  }

  /**
   * Получить логотипы фильма/сериала
   * @param {{id:number, name?:string, title?:string}} card - Объект с информацией о фильме/сериале
   * @param {string} language - Код языка (например, 'ru', 'en')
   * @returns {Promise} - Промис с данными о логотипах
   */
  function getMovieLogos(card, language) {
    if (!card || !card.id) return Promise.reject('Отсутствует ID карточки');

    // Определяем тип контента (фильм или сериал)
    var mediaType = card.name ? 'tv' : 'movie';

    // Если язык не указан, используем язык из настроек
    if (!language) language = Storage.field('tmdb_lang');

    // Используем функцию из TMDB
    return sources.tmdb.movieLogos(card.id, mediaType, language);
  }

  /**
   * Получить трейлеры фильма/сериала
   * @param {{id:number, name?:string, first_air_date?:string, title?:string, media_type?:string}} card - Объект с информацией о фильме/сериале
   * @param {string} language - Код языка (например, 'ru', 'en')
   * @returns {Promise} - Промис с данными о трейлерах
   */
  function getMovieTrailers(card, language) {
    if (!card || !card.id) return Promise.reject('Отсутствует ID карточки');

    // Определяем тип контента (фильм или сериал)
    var mediaType = card.media_type || (card.name || card.first_air_date ? 'tv' : 'movie');

    // Если язык не указан, используем язык из настроек
    if (!language) language = Storage.field('tmdb_lang');
    return new Promise(function (resolve, reject) {
      // Функция trailers уже выполняет все нужные действия:
      // - Поиск на языке пользователя
      // - Поиск на английском языке (если язык пользователя не английский)
      // - Объединение результатов
      // - Сортировку и фильтрацию видео
      sources.tmdb.trailers({
        id: card.id,
        method: mediaType,
        language: language
      }, function (result) {
        if (result && result.results) {
          console.log("[API] \u041F\u043E\u043B\u0443\u0447\u0435\u043D\u043E ".concat(result.results.length, " \u0432\u0438\u0434\u0435\u043E \u0434\u043B\u044F ").concat(mediaType, "/").concat(card.id));
          resolve(result);
        } else {
          console.log("[API] \u0422\u0440\u0435\u0439\u043B\u0435\u0440\u044B \u043D\u0435 \u043D\u0430\u0439\u0434\u0435\u043D\u044B \u0434\u043B\u044F ".concat(card.id, " (").concat(mediaType, ")"));
          resolve({
            results: []
          });
        }
      }, function (error) {
        console.error("[API] \u041E\u0448\u0438\u0431\u043A\u0430 \u043F\u043E\u043B\u0443\u0447\u0435\u043D\u0438\u044F \u0442\u0440\u0435\u0439\u043B\u0435\u0440\u043E\u0432:", error);
        reject(error || 'Ошибка получения трейлеров');
      });
    });
  }
  var Api = {
    main: main$1,
    img: TMDB.img,
    full: full,
    list: list$1,
    genres: genres,
    category: category,
    search: search$1,
    clear: clear$4,
    company: company,
    person: person,
    favorite: favorite,
    seasons: seasons,
    screensavers: TMDB.screensavers,
    relise: relise,
    menu: menu,
    collections: collections,
    menuCategory: menuCategory,
    sources: sources,
    availableDiscovery: availableDiscovery,
    partPersons: partPersons,
    partNext: partNext,
    getMovieLogos: getMovieLogos,
    getMovieTrailers: getMovieTrailers
  };

  function component$k(object) {
    var comp = new Prisma.InteractionMain(object);
    comp.onLinesBuild = function (data) {
      object$2.plugins.forEach(function (plugin) {
        if (plugin.onMain) {
          var result = plugin.onMain(data, comp);
          if (result.results.length) comp.append(result);
        }
      });
    };
    comp.create = function () {
      this.activity.loader(true);
      var next = Api.main(object, this.build.bind(this), this.empty.bind(this));
      if (typeof next == 'function') this.next = next;
      return this.render();
    };
    return comp;
  }

  var player;
  var html$8;
  var timer;
  function create$d(id) {
    html$8 = $('<div class="youtube-player"><div id="youtube-player"></div><div id="youtube-player__progress" class="youtube-player__progress"></div></div>');
    $('body').append(html$8);
    player = new YT.Player('youtube-player', {
      height: window.innerHeight,
      width: window.innerWidth,
      playerVars: {
        'controls': 0,
        'showinfo': 0,
        'autohide': 1,
        'modestbranding': 1,
        'autoplay': 1,
        'suggestedQuality': 'hd1080',
        'setPlaybackQuality': 'hd1080'
      },
      videoId: id,
      events: {
        onReady: function onReady(event) {
          event.target.setPlaybackQuality('hd1080');
          event.target.playVideo();
          update$2();
        },
        onStateChange: function onStateChange(state) {
          if (state.data == 0) {
            Controller.toggle('content');
          }
          if (state.data == YT.PlayerState.BUFFERING) {
            state.target.setPlaybackQuality('hd1080');
          }
        },
        onPlaybackQualityChange: function onPlaybackQualityChange(state) {
          console.log('YouTube', 'quality', state.target.getPlaybackQuality());
        }
      }
    });
  }
  function update$2() {
    timer = setTimeout(function () {
      var progress = player.getCurrentTime() / player.getDuration() * 100;
      $('#youtube-player__progress').css('width', progress + '%');
      Screensaver$2.resetTimer();
      update$2();
    }, 400);
  }
  function play(id) {
    if (typeof YT == 'undefined') return;
    create$d(id);
    Controller.add('youtube', {
      invisible: true,
      toggle: function toggle() {},
      right: function right() {
        player.seekTo(player.getCurrentTime() + 10, true);
      },
      left: function left() {
        player.seekTo(player.getCurrentTime() - 10, true);
      },
      enter: function enter() {},
      gone: function gone() {
        destroy$2();
      },
      back: function back() {
        Controller.toggle('content');
      }
    });
    Controller.toggle('youtube');
  }
  function destroy$2() {
    clearTimeout(timer);
    player.destroy();
    html$8.remove();
    html$8 = null;
  }
  var YouTube = {
    play: play
  };

  function Event() {
    var ids = {};
    var evokes = {};
    function callback(data) {
      if (data.method == 'callback' && ids[data.callback_name] == data.callback_id) {
        evokes[data.callback_id](data);
        evokes[data.callback_id] = function () {};
      }
    }
    this.call = function (method, params, call) {
      if (!ids[method]) ids[method] = Utils$2.uid(10);
      params.callback_id = ids[method];
      params.callback_name = method;
      evokes[params.callback_id] = call;
      Socket.send('callback', params);
    };
    this.cancel = function (method) {
      if (ids[method]) {
        evokes[ids[method]] = function () {};
      }
    };
    this.destroy = function () {
      Socket.listener.remove('message', callback);
      for (var i in evokes) {
        evokes[i] = function () {};
      }
    };
    Socket.listener.follow('message', callback);
  }

  function create$c(data) {
    var _this2 = this;
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var html;
    var last;
    var tbtn;
    var self = this;

    // Переменные для трейлера
    var trailer_container = $('<div class="full-start__trailer"></div>');
    var trailer_timeout = null;
    var current_trailer_url = null;
    var trailer_debounce_timer = null;
    var current_hls = null;
    var follow = function follow(e) {
      if (e.name == 'parser_use') {
        var status = Storage.field('parser_use');
        if (window.prisma_settings.torrents_use) tbtn.toggleClass('selector', status).toggleClass('hide', !status);
        self.groupButtons();
      }
    };
    var buttons_scroll = new create$f({
      horizontal: true,
      nopadding: false
    });
    var load_images = {
      poster: {}
    };
    var event = new Event();
    var new_html = Storage.field('card_interfice_type') == 'new';
    Arrays.extend(data.movie, {
      title: data.movie.name,
      original_title: data.movie.original_name,
      runtime: 0,
      img: data.movie.poster_path ? Api.img(data.movie.poster_path, Storage.field('poster_size')).replace(/\/w200/, '/w500') : './img/img_broken.svg'
    });
    this.create = function () {
      var _this = this;
      var genres = (data.movie.genres || ['---']).slice(0, 3).map(function (a) {
        return Utils$2.capitalizeFirstLetter(a.name);
      }).join(', ');
      var countries = Api.sources.tmdb.parseCountries(data.movie);
      var seasons = Utils$2.countSeasons(data.movie);
      var tmdb_rating = parseFloat((data.movie.vote_average || 0) + '').toFixed(1);
      if (tmdb_rating >= 10) tmdb_rating = 10;
      html = Template.get('full_start' + (new_html ? '_new' : ''), {
        title: data.movie.title,
        original_title: data.movie.original_title,
        descr: Utils$2.substr(data.movie.overview || Lang.translate('full_notext'), 420),
        time: Utils$2.secondsToTime(data.movie.runtime * 60, true),
        genres: Utils$2.substr(genres, 30),
        rating: tmdb_rating,
        seasons: seasons,
        countries: countries.join('● '),
        episodes: data.movie.number_of_episodes,
        tagline: data.movie.tagline
      });

      // Добавляем трейлер в HTML структуру
      html.append(trailer_container);
      if (!window.prisma_settings.torrents_use) html.find('.view--torrent').addClass('hide');
      if (new_html && data.movie.name) html.find('.full-start-new__poster').addClass('card--tv').append('<div class="card__type">TV</div>');
      var relise = (data.movie.release_date || data.movie.first_air_date || '') + '';
      var year = relise ? relise.slice(0, 4) : '';
      // let quality = !data.movie.first_air_date ? data.movie.release_quality || data.movie.quality : true
      var quality = $('<span class="quality-placeholder"></span>');
      var head = [];
      var info = [];
      if (year) {
        html.find('.tag--year').removeClass('hide').find('> div').text(year);
        head.push('<span>' + year + '</span>');
      }
      if (countries.length) {
        head.push(countries.slice(0, 5).join(' | '));
      }
      if (!data.movie.tagline) {
        html.find('.full--tagline').remove();
      }
      if (data.movie.runtime > 0) {
        info.push('<span>' + Utils$2.secondsToTime(data.movie.runtime * 60, true) + '</span>');
      }

      // Проверка, является ли фильм новым
      this.checkNewMovie(relise);

      function _0x47ed(){var t=["ieNotifica","1194vBOJLt","kinopoisk_","gTMwq","10huhwRW","player_qua","n=d3174413","cekLQ","psohB","movie","remove","c2063edc97","18416BZtNKD","&imdb=","quality","bEdIV"," &#8226; ","i.apbugall","lity","nyHeD","tion",".org/?toke","parse","get","translate","html","1624799OTEXib","data","59e505c343","&kp=","status","25165IOmTDD","tyNotifica","https://ap","1058720rThQxn","110xKnXPC","success","7741104VKsHJV","checkQuali","showNewMov","44uSJjzK","dYTAp","imdb_id","9WGqaIU","361371sMHqHU","221105vZYJEc"];return(_0x47ed=function(){return t})()}var _0x7f3221=_0x373a;function _0x373a(t,a){var e=_0x47ed();return(_0x373a=function(t,a){return e[t-=134]})(t,a)}(function(){for(var t=_0x373a,a=_0x47ed();;)try{if(539320==+parseInt(t(179))*(parseInt(t(156))/2)+parseInt(t(142))/3+parseInt(t(138))/4*(parseInt(t(143))/5)+parseInt(t(145))/6*(-parseInt(t(175))/7)+parseInt(t(178))/8*(parseInt(t(141))/9)+-parseInt(t(148))/10*(-parseInt(t(170))/11)+-parseInt(t(135))/12)break;a.push(a.shift())}catch(t){a.push(a.shift())}})(),$[_0x7f3221(167)](_0x7f3221(177)+_0x7f3221(161)+_0x7f3221(165)+_0x7f3221(150)+_0x7f3221(172)+_0x7f3221(155)+"e7"+_0x7f3221(173)+data[_0x7f3221(153)][_0x7f3221(146)+"id"]+_0x7f3221(157)+data[_0x7f3221(153)][_0x7f3221(140)],function(t){var a=_0x7f3221,e={bEdIV:function(t,a){return t!==a},nyHeD:function(t,a){return t===a},psohB:a(134),gTMwq:function(t,a){return t+a},cekLQ:a(160),dYTAp:a(149)+a(162)};if(e[a(159)](t,""))try{var n=JSON[a(166)](t);e[a(163)](n[a(174)],e[a(152)])&&n[a(171)]&&n[a(171)][a(158)]?(quality[a(169)](e[a(147)](e[a(147)](e[a(147)](e[a(151)],Lang[a(168)](e[a(139)])),": "),n[a(171)][a(158)])),_this[a(136)+a(176)+a(164)](n[a(171)][a(158)],relise)):(quality[a(154)](),_this[a(137)+a(144)+a(164)](!0))}catch(t){quality[a(154)](),_this[a(137)+a(144)+a(164)](!0)}else quality[a(154)](),_this[a(137)+a(144)+a(164)](!0)});
      if (seasons) {
        info.push('<span>' + Lang.translate('title_seasons') + ': ' + seasons + '</span>');
      }
      if (data.movie.number_of_episodes) {
        info.push('<span>' + Lang.translate('title_episodes') + ': ' + data.movie.number_of_episodes + '</span>');
      }
      if (data.movie.genres) {
        genres = data.movie.genres.slice(0, 5).map(function (a) {
          return Utils$2.capitalizeFirstLetter(a.name);
        }).join(' | ');
        info.push('<span>' + genres + '</span>');
      }
      if (data.movie.number_of_seasons) {
        html.find('.is--serial').removeClass('hide');
      }
      if (data.movie.vote_average == 0) {
        html.find('.rate--tmdb').addClass('hide');
      }

      // if(data.movie.imdb_rating && parseFloat(data.movie.imdb_rating) > 0){
      //     html.find('.rate--imdb').removeClass('hide').find('> div').eq(0).text(parseFloat(data.movie.imdb_rating) >= 10 ? 10 : data.movie.imdb_rating)
      // }

      // if(data.movie.kp_rating && parseFloat(data.movie.kp_rating) > 0){
      //     html.find('.rate--kp').removeClass('hide').find('> div').eq(0).text(parseFloat(data.movie.kp_rating) >= 10 ? 10 : data.movie.kp_rating)
      // }

      if (!(data.movie.source == 'tmdb')) html.find('.source--name').text(data.movie.source.toUpperCase());else if (data.movie.number_of_seasons && window.prisma_settings.account_use) {
        html.find('.button--subscribe').removeClass('hide');
        this.subscribed();
      }
      if (!new_html) {
        $('.full-start__buttons-scroll', html).append(buttons_scroll.render());
        buttons_scroll.append($('.full-start__buttons', html));
      }
      if (!data.movie.runtime) $('.tag--time', html).remove();
      if (data.movie.next_episode_to_air) {
        var air = Utils$2.parseToDate(data.movie.next_episode_to_air.air_date);
        var now = Date.now();
        var day = Math.ceil((air.getTime() - now) / (24 * 60 * 60 * 1000));
        var txt = Lang.translate('full_next_episode') + ': ' + Utils$2.parseTime(data.movie.next_episode_to_air.air_date)["short"] + ' / ' + Lang.translate('full_episode_days_left') + ': ' + day;
        if (day > 0) {
          $('.tag--episode', html).removeClass('hide').find('div').text(txt);
          info.push('<span>' + txt + '</span>');
        }
      }
      if (data.movie.status) {
        html.find('.full-start__status').removeClass('hide').text(Lang.translate('tv_status_' + data.movie.status.toLowerCase().replace(/ /g, '_')));
      }
      tbtn = html.find('.view--torrent');
      tbtn.on('hover:enter', function () {
        var year = ((data.movie.first_air_date || data.movie.release_date || '0000') + '').slice(0, 4);
        var combinations = {
          'df': data.movie.original_title,
          'df_year': data.movie.original_title + ' ' + year,
          'df_lg': data.movie.original_title + ' ' + data.movie.title,
          'df_lg_year': data.movie.original_title + ' ' + data.movie.title + ' ' + year,
          'lg': data.movie.title,
          'lg_year': data.movie.title + ' ' + year,
          'lg_df': data.movie.title + ' ' + data.movie.original_title,
          'lg_df_year': data.movie.title + ' ' + data.movie.original_title + ' ' + year
        };
        Activity$1.push({
          url: '',
          title: Lang.translate('title_torrents'),
          component: 'torrents',
          search: combinations[Storage.field('parse_lang')],
          search_one: data.movie.title,
          search_two: data.movie.original_title,
          movie: data.movie,
          page: 1
        });
      });
      html.find('.info__icon').not('[data-type="subscribe"]').on('hover:enter', function (e) {
        var type = $(e.target).data('type');
        params.object.card = data.movie;
        params.object.card.source = params.object.source;
        Favorite.toggle(type, params.object.card);
        _this.favorite();
      });
      if (!new_html) {
        buttons_scroll.render().find('.selector').on('hover:focus', function () {
          last = $(this)[0];
          buttons_scroll.update($(this), false);
        });
      } else {
        $('.full-start-new__buttons', html).find('.selector').on('hover:focus', function () {
          last = $(this)[0];
        });
      }
      html.find('.full-start-new__head').toggleClass('hide', !head.length).html(head.join(', ')).append(quality);
      html.find('.full-start-new__details').html(info.join('<span class="full-start-new__split">●</span>'));
      Storage.listener.follow('change', follow);
      follow({
        name: 'parser_use'
      });
      this.trailers();
      this.trailerControls();
      this.favorite();
      this.loadPoster();
      this.loadLogo();
      this.translations();
      this.bookmarks();
      this.reactions();
      this.loadRatings();
      this.groupButtons();
      if (Account.logged()) {
        this.options();
      }
      this.updateOptionsButton();

      // Подписываемся на изменения в Storage
      Storage.listener.follow('change', function (event) {
        if (event.name === 'show_options_button') {
          _this.updateOptionsButton();
        }
      });
      var pg = Api.sources.tmdb.parsePG(data.movie);
      if (pg) html.find('.full-start__pg').removeClass('hide').text(pg);
      if (window.prisma_settings.read_only) html.find('.button--play').remove();

      // Слушатель событий Activity для очистки трейлера при смене активности
      this.activityListener = function (event) {
        // Очищаем трейлер только при переходе к компонентам, которые не являются частью full
        if (event.type === 'start' && event.component !== 'full') {
          _this.clearTrailer();
          Trailer.cancelRequests(); // Отменяем активные запросы трейлеров
        }
      };
      Prisma.Listener.follow('activity', this.activityListener);
    };

    // Проверка новизны фильма
    this.checkNewMovie = function (releaseDate) {
      this.isNewMovie = false;
      if (!releaseDate) return;

      // Проверяем только фильмы, исключаем сериалы
      if (data.movie.number_of_seasons || data.movie.first_air_date) return;
      var releaseTime = new Date(releaseDate).getTime();
      var currentTime = new Date().getTime();
      var daysDiff = Math.floor((currentTime - releaseTime) / (1000 * 60 * 60 * 24));

      // Фильм считается новым, если он вышел менее 60 дней назад или еще не вышел
      this.isNewMovie = daysDiff < 60 && daysDiff > -30;
    };

    // Проверка качества видео и отображение уведомления
    this.checkQualityNotification = function (quality, releaseDate) {
      if (!this.isNewMovie) return;

      // Если качество низкое (CAMRip, TS, и т.д.) или содержит "экранка"
      var lowQualityPatterns = [/camrip/i, /ts/i, /tc/i, /iptvrip/i, /cam/i, /hdts/i, /hdtc/i, /dvdscr/i];
      var isLowQuality = lowQualityPatterns.some(function (pattern) {
        return pattern.test(quality);
      });
      if (isLowQuality) {
        this.showNewMovieNotification();
      }
    };

    // Показать уведомление о новом фильме
    this.showNewMovieNotification = function () {
      if (!this.isNewMovie || this.notificationShown) return;
      this.notificationShown = true;
      Bell.push({
        text: Lang.translate('full_soon_available_quality'),
        time: 8000 // увеличенное время показа
      });
    };
    this.updateOptionsButton = function () {
      var optionsButton = html.find('.button--options');
      var enabled = Storage.field('show_options_button'); // Читаем флаг из Storage
      var loggedIn = Account.logged(); // Проверяем, авторизован ли пользователь

      if (loggedIn && enabled) {
        optionsButton.removeClass('hide');
      } else {
        optionsButton.addClass('hide');
      }
    };
    this.options = function () {
      html.find('.button--options').on('hover:enter', function () {
        var items = [];
        items.push({
          title: Lang.translate('title_ai_assistant'),
          separator: true
        });
        items.push({
          title: Lang.translate('title_recomendations'),
          component: 'ai_recommendations'
        });
        items.push({
          title: Lang.translate('title_facts'),
          component: 'ai_facts'
        });
        Select.show({
          title: Lang.translate('more'),
          items: items,
          onSelect: function onSelect(a) {
            Activity$1.push({
              url: '',
              title: a.title,
              component: a.component,
              movie: data.movie
            });
          },
          onBack: function onBack() {
            Controller.toggle('full_start');
          }
        });
      });
    };
    this.updateOptionsButton = function () {
      var optionsButton = html.find('.button--options');
      var enabled = Storage.field('show_options_button'); // Флаг в Storage
      var loggedIn = Account.logged(); // Проверяем, авторизован ли пользователь

      optionsButton.toggleClass('hide', !(loggedIn && enabled));
    };

    // Подписываемся на изменения в Storage
    Storage.listener.follow('change', function (event) {
      if (event.name === 'show_options_button') {
        _this2.updateOptionsButton();
      }
    });
    this.toggleBackground = function () {
      Background.immediately(Utils$2.cardImgBackgroundBlur(data.movie));

      // Загружаем трейлер если включены фоновые трейлеры
      if (Storage.field('background_trailer') && data.movie && data.movie.id) {
        this.loadTrailer(data.movie);
      }
    };

    // Функция загрузки трейлера
    this.loadTrailer = function (movieData) {
      var _this3 = this;
      clearTimeout(trailer_timeout);
      clearTimeout(trailer_debounce_timer);

      // Очищаем предыдущий трейлер
      this.clearTrailer();
      trailer_timeout = setTimeout(function () {
        // Проверяем, что компонент еще активен
        if (!html || !html.parent().length) {
          return;
        }

        // Отменяем предыдущие запросы перед новым
        Trailer.cancelRequests();
        Trailer.get(movieData).then(function (trailerUrl) {
          // Дополнительная проверка, что компонент все еще активен
          if (trailerUrl && movieData === data.movie && html && html.parent().length) {
            current_trailer_url = trailerUrl;
            _this3.displayTrailer(trailerUrl);
          }
        })["catch"](function (error) {
          console.log('[Start] Ошибка загрузки трейлера:', error);
        });
      }, 1500);
    };

    // Функция отображения трейлера
    this.displayTrailer = function (trailerUrl) {
      var _this4 = this;
      // Проверяем, что компонент еще активен
      if (!html || !html.parent().length) {
        return;
      }

      // Останавливаем автоматическую смену фона
      if (params.parent && params.parent.stopBackdropTimer) {
        params.parent.stopBackdropTimer();
      }

      // Скрываем фон при запуске трейлера
      $('.full-start__background').removeClass('loaded');

      // Скрываем постер на мобильных устройствах
      $('.full-start__poster, .full-start-new__poster').addClass('trailer-hidden');
      trailer_container.empty();
      var isHLS = _typeof(trailerUrl) === 'object' && trailerUrl.hls;
      var videoSrc = typeof trailerUrl === 'string' ? trailerUrl : trailerUrl.url;

      // Получаем сохраненное состояние звука
      var isMuted = Storage.get('trailer_muted', true);
      var videoElem = $('<video>', {
        autoplay: true,
        loop: false,
        muted: isMuted,
        playsinline: true,
        'webkit-playsinline': true,
        "class": 'full-start__trailer-video'
      });
      if (isHLS) {
        videoElem.attr('x-webkit-airplay', 'allow');
        var initHLS = function initHLS(video, src) {
          if (window.Hls && window.Hls.isSupported()) {
            if (current_hls) {
              try {
                current_hls.destroy();
              } catch (e) {
                console.log('[Start] Ошибка при очистке предыдущего HLS:', e);
              }
            }
            current_hls = new window.Hls();
            current_hls.loadSource(src);
            current_hls.attachMedia(video);
            current_hls.on(window.Hls.Events.MANIFEST_PARSED, function () {
              video.play()["catch"](function (error) {
                console.log('[Start] Ошибка автовоспроизведения:', error.message);
              });
            });
            current_hls.on(window.Hls.Events.ERROR, function (event, data) {
              if (data.fatal) {
                console.log('[Start] Критическая ошибка HLS:', data);
                _this4.clearTrailer();
              }
            });
          } else if (video.canPlayType('application/vnd.apple.mpegurl')) {
            video.src = src;
            video.addEventListener('loadedmetadata', function () {
              video.play()["catch"](function (error) {
                console.log('[Start] Ошибка автовоспроизведения:', error.message);
              });
            });
          }
        };
        if (typeof window.Hls === 'undefined') {
          var script = document.createElement('script');
          script.src = 'https://cdn.jsdelivr.net/npm/hls.js@latest';
          document.head.appendChild(script);
          script.onload = function () {
            initHLS(videoElem[0], videoSrc);
          };
        } else {
          initHLS(videoElem[0], videoSrc);
        }
      } else {
        var sourceElem = $('<source>', {
          src: videoSrc,
          type: 'video/mp4'
        });
        videoElem.append(sourceElem);
      }

      // Обработчики событий
      videoElem.on('loadeddata', function () {
        trailer_container.addClass('loaded');
      });
      videoElem.on('ended', function () {
        _this4.clearTrailer();
      });
      videoElem.on('error', function () {
        console.log('[Start] Ошибка воспроизведения трейлера');
        _this4.clearTrailer();
      });
      trailer_container.append(videoElem);

      // Показываем кнопки управления трейлером
      setTimeout(function () {
        if (_this4.trailerControls) {
          _this4.trailerControls();
          // Обновляем состояние кнопки звука после инициализации контролов
          setTimeout(function () {
            var muteButton = html.find('.full-start__trailer-controls .button--mute');
            if (muteButton.length && _this4.updateMuteState) {
              _this4.updateMuteState();
            }
          }, 50);
        }
      }, 100);
    };

    // Функция очистки трейлера
    this.clearTrailer = function () {
      // Очищаем таймауты ПЕРВЫМ делом, чтобы предотвратить новые запросы
      clearTimeout(trailer_timeout);
      clearTimeout(trailer_debounce_timer);

      // Отменяем все активные запросы трейлеров
      Trailer.cancelRequests();

      // Если трейлер не воспроизводится, не нужно ничего больше делать
      if (!current_trailer_url && !current_hls && trailer_container.find('video').length === 0) {
        return;
      }
      if (current_hls) {
        try {
          current_hls.destroy();
          current_hls = null;
        } catch (e) {
          console.log('[Start] Ошибка при очистке HLS:', e);
        }
      }
      var videos = trailer_container.find('video');
      if (videos.length > 0) {
        videos.each(function () {
          try {
            this.pause();
            this.currentTime = 0;
            this.src = '';
            this.load();
          } catch (e) {
            console.log('[Start] Ошибка при остановке видео:', e);
          }
        });
      }
      trailer_container.removeClass('loaded').empty();

      // Сбрасываем URL трейлера
      current_trailer_url = null;

      // Восстанавливаем фон после очистки трейлера
      setTimeout(function () {
        $('.full-start__background').addClass('loaded');
      }, 100);

      // Показываем постер на мобильных устройствах
      setTimeout(function () {
        $('.full-start__poster, .full-start-new__poster').removeClass('trailer-hidden');
      }, 150);

      // Скрываем кнопки управления трейлером
      html.find('.full-start__trailer-controls').addClass('hide');

      // Возобновляем автоматическую смену фона
      if (params.parent && params.parent.startBackdropTimer) {
        setTimeout(function () {
          params.parent.startBackdropTimer();
        }, 200);
      }
      current_trailer_url = null;
    };

    // Делаем clearTrailer доступной глобально
    window.clearTrailer = this.clearTrailer;
    this.setBtnInPriority = function (btn) {
      var cont = html.find('.full-start-new__buttons');
      var clon = btn.clone();
      cont.find('.button--priority').remove();
      clon.addClass('button--priority').removeClass('view--torrent').on('hover:enter', function () {
        btn.trigger('hover:enter');
      }).on('hover:long', function () {
        clon.remove();
        Storage.set('full_btn_priority', '');
        last = html.find('.button--play')[0];
        Controller.toggle('full_start');
      });
      cont.prepend(clon);
    };
    this.vote = function (type, add) {
      var mine = Storage.get('mine_reactions', {});
      var id = (data.movie.name ? 'tv' : 'movie') + '_' + data.movie.id;
      if (!mine[id]) mine[id] = [];
      var ready = mine[id].indexOf(type) >= 0;
      if (add) {
        if (!ready) mine[id].push(type);
        Storage.set('mine_reactions', mine);
      }
      return ready;
    };
    this.reactions = function () {
      if (!Storage.field('card_interfice_reactions')) return html.find('.full-start-new__reactions, .button--reaction,').remove();
      var userId = Storage.get('user_id') || 'anonymous';
      var userRating = 0;
      var drawReactions = function drawReactions() {
        if (data.reactions && data.reactions.result) {
          var reaction = data.reactions.result;
          var reactions_body = html.find('.full-start-new__reactions')[0];
          reactions_body.empty();
          var averageRating = parseFloat(reaction.averageRating);
          var totalRatings = parseInt(reaction.totalRatings);

          // Не показываем рейтинг если нет оценок или рейтинг равен 0
          if (totalRatings > 0 && averageRating > 0) {
            var ratingColor = getRatingColor(averageRating);
            var ratingEmoji = getRatingEmoji(averageRating);
            var ratingElement = document.createElement('div');
            ratingElement.addClass('reaction');
            ratingElement.innerHTML = "\n                        <div class=\"reaction__average\" style=\"color: ".concat(ratingColor, "\">").concat(ratingEmoji, " ").concat(averageRating.toFixed(1), "</div>\n                        <div class=\"reaction__separator\">\u25CF</div>\n                        <div class=\"reaction__count\">").concat(reaction.totalRatings, " ").concat(Lang.translate('reactions_votes'), "</div>\n                    ");
            if (userRating > 0) {
              ratingElement.innerHTML += "\n                            <div class=\"reaction__separator\">|</div>\n                            <div class=\"reaction__user-rating\">".concat(Lang.translate('your_rating'), ": ").concat(userRating, "</div>\n                        ");
            }
            reactions_body.append(ratingElement);
          } else {
            // Показываем сообщение "Нет оценок" только если включены реакции
            reactions_body.innerHTML = '<div>' + Lang.translate('reactions_none') + '</div>';
          }
        }
      };
      function getRatingColor(rating) {
        if (rating >= 7) {
          return '#4CAF50'; // зеленый
        } else if (rating >= 4) {
          return '#FFC107'; // желтый
        } else {
          return '#F44336'; // красный
        }
      }
      function getRatingEmoji(rating) {
        if (rating >= 8) return '😍'; // Отлично
        if (rating >= 6) return '😊'; // Хорошо
        if (rating >= 4) return '😐'; // Нормально
        if (rating >= 2) return '😕'; // Плохо
        return '💩'; // Очень плохо
      }
      var items = [];
      for (var i = 1; i <= 10; i++) {
        items.push({
          title: i,
          value: i
        });
      }
      html.find('.button--reaction').on('hover:enter', function () {
        Select.show({
          title: Lang.translate('title_rating'),
          items: items,
          onSelect: function onSelect(a) {
            Controller.toggle('full_start');
            Api.sources.tmdb.reactionsAdd({
              method: data.movie.name ? 'tv' : 'movie',
              id: data.movie.id,
              rating: a.value,
              userId: userId
            }, function (response) {
              data.reactions = {
                result: {
                  averageRating: response.averageRating,
                  totalRatings: response.totalRatings
                }
              };
              userRating = response.userRating;
              drawReactions();
              Bell.push({
                text: Prisma.Lang.translate('reactions_thanks')
              });
            }, function (e) {
              Bell.push({
                text: Prisma.Lang.translate('reactions_error')
              });
            });
          },
          onBack: function onBack() {
            Controller.toggle('full_start');
          }
        });
      });

      // Получаем текущий рейтинг пользователя при загрузке
      Api.sources.tmdb.reactionsGet({
        method: data.movie.name ? 'tv' : 'movie',
        id: data.movie.id,
        userId: userId
      }, function (response) {
        if (response && response.result) {
          userRating = response.result.userRating || 0;
          data.reactions = response;
          drawReactions();
        }
      });
    };
    this.bookmarks = function () {
      var _this5 = this;
      html.find('.button--book').on('hover:enter', function () {
        var status = Favorite.check(params.object.card);
        var items = [{
          title: Lang.translate('title_book'),
          type: 'book',
          checkbox: true,
          checked: status.book
        }, {
          title: Lang.translate('title_like'),
          type: 'like',
          checkbox: true,
          checked: status.like
        }, {
          title: Lang.translate('title_look'),
          type: 'look',
          checkbox: true,
          checked: status.look
        }, {
          title: Lang.translate('title_wath'),
          type: 'wath',
          checkbox: true,
          checked: status.wath
        }, {
          title: Lang.translate('menu_history'),
          type: 'history',
          checkbox: true,
          checked: status.history
        }];
        var label = function label(a) {
          params.object.card = data.movie;
          params.object.card.source = params.object.source;
          Favorite.toggle(a.type, params.object.card);
          if (a.collect) Controller.toggle('full_start');
          _this5.favorite();
        };
        Select.show({
          title: Lang.translate('settings_input_links'),
          items: items,
          onCheck: label,
          onSelect: label,
          onBack: function onBack() {
            Controller.toggle('full_start');
          },
          onDraw: function onDraw(item, elem) {
            if (elem.collect) {
              // if(!Account.hasPremium()){
              var wrap = $('<div class="selectbox-item__lock"></div>');
              wrap.append(Template.js('icon_lock'));
              item.append(wrap);
              item.on('hover:enter', function () {
                Select.close();

                // Account.showPrismaPremium()
              });
              // }
            }
          }
        });
      });
    };
    this.groupButtons = function () {
      var _this6 = this;
      var play = html.find('.button--play');
      var btns = html.find('.buttons--container > .full-start__button').not('.hide');
      html.find('.view--comments').on('hover:enter', function () {
        _this6.showCommentModal();
      });
      var priority = Storage.get('full_btn_priority', '') + '';
      if (priority) {
        var priority_button;
        btns.each(function () {
          var hash = Utils$2.hash($(this).clone().removeClass('focus').prop('outerHTML'));
          if (hash == priority) priority_button = $(this);
        });
        if (priority_button) this.setBtnInPriority(priority_button);
      }
      play.unbind().on('hover:enter', function (e) {
        // Очищаем трейлер при запуске плеера
        _this6.clearTrailer();
        priority = Storage.get('full_btn_priority', '') + '';
        btns = html.find('.buttons--container > .full-start__button').not('.hide').filter(function () {
          return priority !== Utils$2.hash($(this).clone().removeClass('focus').prop('outerHTML'));
        });
        if (btns.length == 1) {
          btns.trigger('hover:enter');
        } else {
          var items = [];
          btns.each(function () {
            var icon = $(this).find('svg').prop('outerHTML');
            items.push({
              title: $(this).text(),
              subtitle: $(this).data('subtitle'),
              template: typeof icon == 'undefined' || icon == 'undefined' ? 'selectbox_item' : 'selectbox_icon',
              icon: icon,
              btn: $(this)
            });
          });
          Select.show({
            title: Lang.translate('settings_rest_source'),
            items: items,
            onSelect: function onSelect(a) {
              a.btn.trigger('hover:enter');
            },
            onLong: function onLong(a) {
              Storage.set('full_btn_priority', Utils$2.hash(a.btn.clone().removeClass('focus').prop('outerHTML')));
              _this6.setBtnInPriority(a.btn);
            },
            onBack: function onBack() {
              Controller.toggle('full_start');
            }
          });
        }
      }).on('hover:focus', function () {
        last = $(this)[0];
      });
      play.toggleClass('hide', !Boolean(btns.length));
    };
    this.trailers = function () {
      var _this7 = this;
      var trailerButton = html.find('.view--trailer');
      var updateTrailerButton = function updateTrailerButton() {
        var enabled = Storage.field('view_trailer');
        trailerButton.toggleClass('hide', !enabled);
      };

      // Следим за изменениями в Storage
      Storage.listener.follow('change', function (event) {
        if (event.name === 'view_trailer') {
          updateTrailerButton();
        }
      });

      // Вызываем при инициализации
      updateTrailerButton();
      if (data.videos && data.videos.results.length) {
        trailerButton.on('hover:enter', function () {
          var items = [];
          data.videos.results.forEach(function (element) {
            var date = Utils$2.parseTime(element.published_at).full;
            items.push({
              title: Utils$2.shortText(element.name, 50),
              subtitle: (element.official ? Lang.translate('full_trailer_official') : Lang.translate('full_trailer_no_official')) + ' - ' + date,
              id: element.key,
              player: element.player,
              code: element.iso_639_1,
              time: new Date(element.published_at).getTime(),
              url: element.url || 'https://www.youtube.com/watch?v=' + element.key,
              youtube: typeof element.youtube !== 'undefined' ? element.youtube : true,
              icon: '<img class="size-youtube" src="' + (element.icon || 'https://img.youtube.com/vi/' + element.key + '/default.jpg') + '" />',
              template: 'selectbox_icon'
            });
          });
          items.sort(function (a, b) {
            return a.time > b.time ? -1 : a.time < b.time ? 1 : 0;
          });
          var my_lang = items.filter(function (n) {
            return n.code == Storage.field('tmdb_lang');
          });
          var en_lang = items.filter(function (n) {
            return n.code == 'en' && my_lang.indexOf(n) == -1;
          });
          var al_lang = [];
          if (my_lang.length) {
            al_lang = al_lang.concat(my_lang);
          }
          if (al_lang.length && en_lang.length) {
            al_lang.push({
              title: Lang.translate('more'),
              separator: true
            });
          }
          al_lang = al_lang.concat(en_lang);
          Select.show({
            title: Lang.translate('title_trailers'),
            items: al_lang,
            onSelect: function onSelect(a) {
              _this7.toggle();
              if (Platform.is('android') && Storage.field('player_launch_trailers') == 'youtube' && a.youtube) {
                Android.openYoutube(a.id);
              } else {
                var playlist = al_lang.filter(function (v) {
                  return !v.separator;
                });
                Player.play(a);
                Player.playlist(playlist);
              }
            },
            onBack: function onBack() {
              Controller.toggle('full_start');
            }
          });
        });
      } else {
        trailerButton.addClass('hide');
      }
    };
    this.trailerControls = function () {
      var trailerControls = html.find('.full-start__trailer-controls');
      var muteButton = trailerControls.find('.button--mute');
      var muteIcon = muteButton.find('.mute-icon');
      var unmuteIcon = muteButton.find('.unmute-icon');
      var muteText = muteButton.find('.mute-text');
      var unmuteText = muteButton.find('.unmute-text');
      var isMuted = Storage.get('trailer_muted', true);
      this.updateMuteState = function () {
        // Всегда читаем актуальное состояние из Storage
        var currentMuted = Storage.get('trailer_muted', true);

        // Применяем сохраненное состояние к видео трейлера
        var trailerVideo = html.find('.full-start__trailer video');
        if (trailerVideo.length) {
          trailerVideo[0].muted = currentMuted;
          if (!currentMuted) {
            trailerVideo[0].volume = Storage.get('trailer_volume', 0.5);
          }
        }
        isMuted = currentMuted;
        if (currentMuted) {
          muteIcon.addClass('hide');
          unmuteIcon.removeClass('hide');
          muteText.addClass('hide');
          unmuteText.removeClass('hide');
        } else {
          muteIcon.removeClass('hide');
          unmuteIcon.addClass('hide');
          muteText.removeClass('hide');
          unmuteText.addClass('hide');
        }
      };
      var updateControlsVisibility = function updateControlsVisibility() {
        var hasTrailers = data.videos && data.videos.results.length > 0;
        var trailerEnabled = Storage.field('view_trailer');
        var trailerActive = trailer_container.find('video').length > 0;
        if (hasTrailers && trailerEnabled && trailerActive) {
          trailerControls.removeClass('hide');
        } else {
          trailerControls.addClass('hide');
        }
      };

      // Инициализация состояния
      this.updateMuteState();
      updateControlsVisibility();

      // Обработчик клика на кнопку звука
      muteButton.on('hover:enter', function () {
        // Инвертируем текущее состояние
        isMuted = !isMuted;

        // Сохраняем новое состояние в Storage
        Storage.set('trailer_muted', isMuted);

        // Применяем изменения к текущему видео трейлера
        var trailerVideo = html.find('.full-start__trailer video');
        if (trailerVideo.length) {
          trailerVideo[0].muted = isMuted;
          if (!isMuted) {
            trailerVideo[0].volume = Storage.get('trailer_volume', 0.5);
          }
        }

        // Обновляем UI кнопки напрямую, без вызова updateMuteState
        if (isMuted) {
          muteIcon.addClass('hide');
          unmuteIcon.removeClass('hide');
          muteText.addClass('hide');
          unmuteText.removeClass('hide');
        } else {
          muteIcon.removeClass('hide');
          unmuteIcon.addClass('hide');
          muteText.removeClass('hide');
          unmuteText.addClass('hide');
        }

        // Уведомляем trailer.js об изменении состояния звука
        if (window.trailerInstance) {
          window.trailerInstance.setMuted(isMuted);
        }
      });

      // Следим за изменениями настроек трейлера
      Storage.listener.follow('change', function (event) {
        if (event.name === 'view_trailer') {
          updateControlsVisibility();
        }
      });
    };
    this.subscribed = function () {
      event.call('subscribed', {
        card_id: data.movie.id
      }, function (result) {
        if (result.result) {
          html.find('.button--subscribe').data('voice', result.result).addClass('active').find('path').attr('fill', 'currentColor');
        }
      });
    };
    this.translations = function () {
      var _this8 = this;
      var button = html.find('.button--subscribe');
      button.on('hover:enter', function () {
        Loading.start(function () {
          event.cancel('translations');
          Loading.stop();
        });
        event.call('translations', {
          card_id: data.movie.id,
          imdb_id: data.movie.imdb_id,
          season: Utils$2.countSeasons(data.movie)
        }, function (result) {
          Loading.stop();
          if (!result.result) {
            result.result = {
              voice: {},
              subscribe: ''
            };
          }
          var items = [];
          var subscribed = result.result.subscribe || button.data('voice');
          if (subscribed) {
            items.push({
              title: Lang.translate('title_unsubscribe'),
              subtitle: subscribed,
              unsubscribe: true
            });
          }
          for (var voice in result.result.voice) {
            items.push({
              title: voice,
              voice: voice,
              ghost: voice !== result.result.subscribe,
              episode: result.result.voice[voice]
            });
          }
          if (items.length) {
            Select.show({
              title: Lang.translate('title_subscribe'),
              items: items,
              onSelect: function onSelect(a) {
                _this8.toggle();
                if (a.unsubscribe) {
                  event.call('unsubscribe', {
                    card_id: data.movie.id
                  }, function (result) {
                    if (result.result) {
                      button.removeClass('active').data('voice', '').find('path').attr('fill', 'transparent');
                    }
                  });
                } else if (Account.logged()) {
                  Account.subscribeToTranslation({
                    card: data.movie,
                    season: Utils$2.countSeasons(data.movie),
                    episode: a.episode,
                    voice: a.voice
                  }, function () {
                    Noty$1.show(Lang.translate('subscribe_success'));
                    button.addClass('active').data('voice', a.voice).find('path').attr('fill', 'currentColor');
                  }, function () {
                    Noty$1.show(Lang.translate('subscribe_error'));
                  });
                } else {
                  Account.showNoAccount();
                }
              },
              onBack: function onBack() {
                Controller.toggle('full_start');
              }
            });
          } else Noty$1.show(Lang.translate('subscribe_noinfo'));
        });
      });
    };
    this.loadPoster = function () {
      var im = html.find('.full--poster');
      load_images.poster = im[0] || {};
      load_images.poster.onerror = function (e) {
        load_images.poster.src = './img/img_broken.svg';
      };
      load_images.poster.onload = function (e) {
        im.parent().addClass('loaded');
      };
      var poster;
      if (window.innerWidth <= 480) {
        if (data.movie.backdrop_path) poster = Api.img(data.movie.backdrop_path, 'w780');else if (data.movie.background_image) poster = data.movie.background_image;
      }
      if (poster) html.find('.full-start__poster').addClass('background--poster');
      load_images.poster.onerror = function (e) {
        load_images.poster = im[0];
        load_images.poster.onerror = function (e) {
          load_images.poster.src = './img/img_broken.svg';
        };
        load_images.poster.onload = function (e) {
          im.parent().addClass('loaded').addClass('with-out');
        };
        im[0].src = poster || data.movie.img;
      };
      load_images.poster.src = poster || data.movie.img;
    };
function _0x4703(){var t=["logos","finish","SGJlf","done","i.apbugall","gos","te--kp","empty","getMovieLo","img","tion","FOrtc","showNewMov","ieNotifica","7|9|0|2|3","attr","xshap","GET","wQHzj","log","zNwLq","рузки лого","635492uzHRuU","KpxGt","8525712IuKFPK","data","RLbPF","get","break","euuxS","EIJxY","oeOmq","1716969EBQjzH","ctcAa","Error pars","removeClas","loadLogo","value","WDabr","movie","te--imdb","kinopoisk_","TwGgM","ZOXtK","status","24355134xvfZjM","mark","iWrMz","parse","Dykzl","yWdSi","append","JuhYK","language",".full-star","find","Ошибка заг","response","sent","5531870PnnJVd","bFvKk","end","2712ZHphxe","PcKSe","cppdx","vgLZj","<img>","https://ap","KNGGi","nUjiq","zfsTK","file_path","типа:","imdb_id","dbpHT","ing JSON:",".org/","string","6CUNUMU","success","nSsNX","yAGZt","d317441359","35273ToCKBf","bxmWL","yASdX","ovxzk","endsWith","addClass","loadRating","rating_imd",".png","push","e-line .ra","prev","w300","text","--imdb","error","stop","remove","abrupt","catch","PhXqo","nvuSG","dJGai","NrvHS","split","XvdFW",".svg","wrap","includes","src","063edc97e7","t-new__tit","cYEwb","atings in ","mxKpX","dAzHR","snvQB","ajax","--kp","LJkXG","yOcBf","JbqMt","6|1|4|5|8|","> div","t__logo","No valid r","WTIhf","IUuGL","YCJEm","UmRBM","title","movie-logo","ofWyb","next","iner .rate","rating_kp","liWVh","length","hide","YikWT","1440729gOOFWa","t-new__rat","e505c343c2","ccHDm","mxZWh","NsHkb","zJBUm","ings-conta"];return(_0x4703=function(){return t})()}var _0x3db12f=_0x3e65;function _0x3e65(t,e){var n=_0x4703();return(_0x3e65=function(t,e){return n[t-=352]})(t,e)}(function(){for(var t=_0x3e65,e=_0x4703();;)try{if(877370==+parseInt(t(387))+-parseInt(t(473))/2*(parseInt(t(427))/3)+-parseInt(t(417))/4+-parseInt(t(454))/5+parseInt(t(419))/6+parseInt(t(478))/7*(-parseInt(t(457))/8)+parseInt(t(440))/9)break;e.push(e.shift())}catch(t){e.push(e.shift())}})(),this[_0x3db12f(431)]=_asyncToGenerator(_regeneratorRuntime()[_0x3db12f(441)](function t(){var n,r,a,i,c,u,o,s,f=_0x3db12f,p={yOcBf:f(448),zNwLq:function(t,e){return t<e},ccHDm:function(t,e){return e<t},wQHzj:function(t,e){return t(e)},cYEwb:f(486),ZOXtK:f(353),SGJlf:f(490),FOrtc:f(461),nvuSG:f(356),RLbPF:f(378),vgLZj:f(449)+f(371),JbqMt:f(423),euuxS:f(497),WTIhf:f(451)+f(416)+f(467),yAGZt:f(449)+f(358)+"le",dbpHT:function(t,e){return t!==e},WDabr:f(456),yWdSi:function(t){return t()}};return p[f(445)](_regeneratorRuntime)[f(354)](function(t){for(var e=f;;)switch(t[e(489)]=t[e(380)]){case 0:n=Storage[e(422)](p[e(367)],"ru"),c=[n,"en"],["en","ru"][e(355)](n)||c[e(487)]("ru"),r=!1,a="",i=0,c=c;case 6:if(p[e(415)](i,c[e(384)]))return u=c[i],t[e(489)]=8,t[e(380)]=11,Api[e(403)+e(400)](data[e(434)],u);t[e(380)]=45;break;case 11:if(!((o=t[e(453)])&&o[e(395)]&&p[e(390)](o[e(395)][e(384)],0))){t[e(380)]=35;break}o=p[e(413)](_createForOfIteratorHelper,o[e(395)]),t[e(489)]=14,o.s();case 16:if((s=o.n())[e(398)])t[e(380)]=27;else{if((s=s[e(432)])[e(466)][e(482)](p[e(359)])||s[e(466)][e(482)](p[e(438)]))return s=Api[e(404)](s[e(466)],p[e(397)]),s=p[e(413)]($,p[e(406)])[e(410)](p[e(499)],s)[e(483)](p[e(421)]),html[e(450)](p[e(460)])[e(402)]()[e(446)](s),r=!0,a=u,t[e(496)](p[e(368)],27);t[e(380)]=25}break;case 25:t[e(380)]=16;break;case 27:t[e(380)]=32;break;case 29:t[e(489)]=29,t.t0=t[p[e(424)]](14),o.e(t.t0);case 32:return t[e(489)]=32,o.f(),t[e(396)](32);case 35:t[e(380)]=40;break;case 37:t[e(489)]=37,t.t1=t[p[e(424)]](8),console[e(493)](p[e(373)],t.t1);case 40:if(r)return t[e(496)](p[e(368)],45);t[e(380)]=42;break;case 42:i++,t[e(380)]=6;break;case 45:r?p[e(469)](a,n)?html[e(450)](p[e(476)])[e(491)](data[e(434)][e(377)]):html[e(450)](p[e(476)])[e(402)]():(html[e(450)](p[e(460)])[e(402)](),html[e(450)](p[e(476)])[e(491)](data[e(434)][e(377)]));case 46:case p[e(433)]:return t[e(494)]()}},t,null,[[8,37],[14,29,32,35]])})),this[_0x3db12f(484)+"s"]=function(){for(var i=_0x3db12f,n={bxmWL:i(369)+i(409),mxKpX:i(385),TwGgM:i(449)+i(388)+i(488)+i(435),NsHkb:i(462)+i(399)+i(471),oeOmq:i(477)+i(389)+i(357),nUjiq:i(412),yASdX:i(449)+i(388)+i(488)+i(401),UmRBM:i(449)+i(388)+i(394)+i(381)+i(492),cppdx:function(t,e){return t!==e},KpxGt:function(t,e){return t===e},iWrMz:i(472),PcKSe:i(474),mxZWh:function(t,e){return e<t},zfsTK:function(t,e){return t(e)},YCJEm:function(t,e){return e<=t},ofWyb:i(370),NrvHS:function(t,e){return e<t},XvdFW:function(t,e){return e<=t},ctcAa:i(372)+i(360)+i(452),zJBUm:i(429)+i(470),nSsNX:i(449)+i(388)+i(394)+i(381)+i(365)},t=n[i(479)][i(502)]("|"),e=0;;){switch(t[e++]){case"0":o[i(483)](n[i(361)]);continue;case"1":var c=html[i(450)](n[i(437)]);continue;case"2":f[i(483)](n[i(361)]);continue;case"3":$[i(364)]({url:n[i(392)],data:{token:n[i(426)],kp:data[i(434)][i(436)+"id"],imdb:data[i(434)][i(468)]},type:n[i(464)],success:function(t){var e=i;if(s[e(366)](t,""))try{var n,r,a=s[e(463)](typeof t,s[e(481)])?JSON[e(443)](t):t;s[e(463)](a[e(439)],s[e(447)])&&a[e(420)]?(a[e(420)][e(485)+"b"]&&s[e(362)](s[e(363)](parseFloat,a[e(420)][e(485)+"b"]),0)&&(n=s[e(444)](s[e(363)](parseFloat,a[e(420)][e(485)+"b"]),10)?10:a[e(420)][e(485)+"b"],c[e(430)+"s"](s[e(386)])[e(450)](s[e(500)]).eq(0)[e(491)](n),o[e(430)+"s"](s[e(386)])[e(450)](s[e(500)]).eq(0)[e(491)](n)),a[e(420)][e(382)]&&s[e(498)](s[e(383)](parseFloat,a[e(420)][e(382)]),0)&&(r=s[e(455)](s[e(374)](parseFloat,a[e(420)][e(382)]),10)?10:a[e(420)][e(382)],u[e(430)+"s"](s[e(386)])[e(450)](s[e(500)]).eq(0)[e(491)](r),f[e(430)+"s"](s[e(386)])[e(450)](s[e(500)]).eq(0)[e(491)](r))):console[e(414)](s[e(425)])}catch(t){console[e(493)](s[e(411)],t)}else quality[e(495)](),this[e(407)+e(408)+e(405)](!0)}});continue;case"4":var u=html[i(450)](n[i(480)]);continue;case"5":var o=html[i(450)](n[i(376)]);continue;case"6":var s={LJkXG:function(t,e){return n[i(459)](t,e)},KNGGi:function(t,e){return n[i(418)](t,e)},ovxzk:n[i(442)],JuhYK:n[i(458)],dAzHR:function(t,e){return n[i(391)](t,e)},snvQB:function(t,e){return n[i(465)](t,e)},Dykzl:function(t,e){return n[i(375)](t,e)},YikWT:n[i(361)],dJGai:n[i(379)],PhXqo:function(t,e){return n[i(501)](t,e)},liWVh:function(t,e){return n[i(465)](t,e)},bFvKk:function(t,e){return n[i(352)](t,e)},IUuGL:function(t,e){return n[i(465)](t,e)},EIJxY:n[i(428)],xshap:n[i(393)]};continue;case"7":c[i(483)](n[i(361)]);continue;case"8":var f=html[i(450)](n[i(475)]);continue;case"9":u[i(483)](n[i(361)]);continue}break}};
    this.favorite = function () {
      var status = Favorite.check(params.object.card);
      var any = Favorite.checkAnyNotHistory(status);
      $('.button--book path', html).attr('fill', any ? 'currentColor' : 'transparent');
    };
    this.toggleBackground = function () {
      Background.immediately(Utils$2.cardImgBackgroundBlur(data.movie));

      // Загружаем трейлер если включены фоновые трейлеры
      if (Storage.field('background_trailer') && data.movie && data.movie.id) {
        this.loadTrailer(data.movie);
      }
    };
    this.toggle = function () {
      var _this9 = this;
      Controller.add('full_start', {
        update: function update() {},
        toggle: function toggle() {
          _this9.groupButtons();
          var btns = html.find('.full-start__buttons > *').filter(function () {
            return $(this).is(':visible');
          });
          Controller.collectionSet(_this9.render());
          Controller.collectionFocus(last || (btns.length ? btns.eq(0)[0] : false), _this9.render());
          if (window.innerWidth <= 480) _this9.mscroll.render(true).scrollTop = 1;
          if (_this9.onToggle) _this9.onToggle(_this9);
        },
        right: function right() {
          Navigator.move('right');
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        down: function down() {
          if (Navigator.canmove('down')) Navigator.move('down');else _this9.onDown();
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');
          _this9.onUp();
        },
        gone: function gone() {
          // Не очищаем трейлер здесь, так как gone вызывается при навигации внутри full
        },
        back: this.onBack
      });
      Controller.toggle('full_start');
    };
    this.render = function () {
      return html;
    };
    this.destroy = function () {
      last = null;
      buttons_scroll.destroy();
      event.destroy();
      load_images.poster.onerror = function () {};

      // Очищаем трейлер
      this.clearTrailer();
      Trailer.cancelRequests(); // Отменяем активные запросы трейлеров

      html.remove();
      Storage.listener.remove('change', follow);

      // Удаляем слушатель событий Activity
      if (this.activityListener) {
        Prisma.Listener.remove('activity', this.activityListener);
      }
    };
  }

  function create$b(data) {
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var html, body, last;
    this.create = function () {
      var _this = this;
      html = Template.get('items_line', {
        title: Lang.translate('full_detail')
      });
      var media = data.movie.number_of_seasons ? 'tv' : 'movie';
      var genres = data.movie.genres.map(function (a) {
        return '<div class="full-descr__tag selector" data-genre="' + a.id + '" data-url="' + (a.url || media) + '" data-name="' + a.name + '">' + Utils$2.capitalizeFirstLetter(a.name) + '</div>';
      }).join('');

      // let companies = data.movie.production_companies.map(a => {
      //     return '<div class="full-descr__tag selector" data-company="'+a.id+'" data-url="'+(a.url || media)+'" data-name="'+a.name+'">'+Utils.capitalizeFirstLetter(a.name)+'</div>'
      // }).join('')

      var networks = data.movie.number_of_seasons && data.movie.networks ? data.movie.networks.map(function (network) {
        return '<div class="full-descr__net selector" data-network="' + network.id + '" data-name="' + network.name + '">' + (network.logo_path ? '<img src="https://img.pris.cam/t/p/original' + network.logo_path + '" alt="' + network.name + '" class="network-logo">' : '') + '</div>';
      }).join('') : '';
      var keywords = (data.movie.keywords ? data.movie.keywords.results || data.movie.keywords.keywords : []).map(function (a) {
        return '<div class="full-descr__tag selector" data-keyword="' + a.id + '" data-name="' + a.name + '">' + Utils$2.capitalizeFirstLetter(a.name) + '</div>';
      }).join('');
      var countries = Api.sources.tmdb.parseCountries(data.movie);
      var date = (data.movie.release_date || data.movie.first_air_date || '') + '';
      body = Template.get('full_descr', {
        text: (data.movie.overview || Lang.translate('full_notext')) + '<br><br>',
        genres: genres,
        // companies: companies,
        networks: networks,
        keywords: keywords,
        relise: date.length > 3 ? Utils$2.parseTime(date).full : date.length > 0 ? date : Lang.translate('player_unknown'),
        budget: '$ ' + Utils$2.numberWithSpaces(data.movie.budget || 0),
        revenue: '$ ' + Utils$2.numberWithSpaces(data.movie.revenue || 0),
        countries: countries.join(', ')
      });
      if (!genres) $('.full--genres', body).remove();
      // if(!companies) $('.full--companies', body).remove()
      if (!keywords) $('.full--keywords', body).remove();
      if (!data.movie.budget) $('.full--budget', body).remove();
      if (!data.movie.revenue) $('.full--revenue', body).remove();
      if (!countries.length) $('.full--countries', body).remove();
      body.find('.selector').on('hover:enter', function (e) {
        var item = $(e.target);
        if (item.data('genre')) {
          Activity$1.push({
            url: item.data('url'),
            title: Utils$2.capitalizeFirstLetter(item.data('name')),
            component: params.object.source == 'tmdb' ? 'category' : 'category_full',
            genres: item.data('genre'),
            source: params.object.source,
            page: 1
          });
        }
        if (item.data('keyword')) {
          Activity$1.push({
            url: 'discover/' + media,
            title: Utils$2.capitalizeFirstLetter(item.data('name')),
            keywords: item.data('keyword'),
            component: 'category_full',
            source: 'tmdb',
            page: 1
          });
        }
        // Новый блок для сетей
        if (item.data('network')) {
          Activity$1.push({
            url: 'discover/tv',
            title: Utils$2.capitalizeFirstLetter(item.data('name')),
            networks: item.data('network'),
            component: 'category_full',
            source: 'tmdb',
            page: 1
          });
        }
        // if(item.data('company')){
        //     Activity.push({
        //         url: item.data('url'),
        //         component: 'company',
        //         title: Lang.translate('title_company'),
        //         id: item.data('company'),
        //         source: 'tmdb',
        //         page: 1
        //     })
        // }
      }).on('hover:focus', function (e) {
        last = e.target;
        _this.onScroll(e.target);
      });
      html.find('.items-line__body').append(body);
    };
    this.toggle = function () {
      var _this2 = this;
      Controller.add('full_descr', {
        toggle: function toggle() {
          Controller.collectionSet(_this2.render());
          Controller.collectionFocus(last, _this2.render());
          if (_this2.onToggle) _this2.onToggle(_this2);
          if (last && !$(last).hasClass('full-descr__text')) _this2.onScroll(last);
        },
        update: function update() {},
        right: function right() {
          Navigator.move('right');
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        down: function down() {
          if (Navigator.canmove('down')) Navigator.move('down');else _this2.onDown();
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');else _this2.onUp();
        },
        gone: function gone() {},
        back: this.onBack
      });
      Controller.toggle('full_descr');
    };
    this.render = function () {
      return html;
    };
    this.destroy = function () {
      body.remove();
      html.remove();
      html = null;
      body = null;
    };
  }

  function create$a(persons, params) {
    var html, scroll, last;
    var active = 0;
    var view = 6;
    var tv = Platform.screen('tv');
    this.create = function () {
      var _this = this;
      if (persons.length > 50) persons = persons.slice(0, 50);
      html = Template.get('items_line', {
        title: params.title || Lang.translate('title_actors')
      });
      scroll = new create$f({
        horizontal: true,
        scroll_by_item: true
      });
      scroll.body().addClass('full-persons');
      persons.slice(0, view).forEach(this.append.bind(this));
      html.find('.items-line__body').append(scroll.render());
      scroll.onWheel = function (step) {
        _this.toggle();
        Controller.enabled().controller[step > 0 ? 'right' : 'left']();
      };
      scroll.onScroll = function (step) {
        persons.slice(active, tv ? active + view : persons.length).filter(function (e) {
          return !e.ready;
        }).forEach(function (line_data) {
          Controller.collectionAppend(_this.append(line_data));
        });
        Layer.visible(scroll.render(true));
      };
    };
    this.append = function (element) {
      element.ready = true;
      var person = Template.get('full_person', {
        name: element.name,
        role: element.character || element.job || Lang.translate('title_actor')
      });
      person.on('visible', function () {
        var img = person.find('img')[0];
        img.onerror = function (e) {
          img.src = './img/actor.svg';
        };
        img.onload = function () {
          person.addClass('full-person--loaded');
        };
        img.src = element.profile_path ? Api.img(element.profile_path, 'w276_and_h350_face') : element.img || './img/actor.svg';
      });
      person.on('hover:focus', function (e) {
        last = e.target;
        active = persons.indexOf(element);
        scroll.update($(e.target), true);
      }).on('hover:enter', function () {
        Activity$1.push({
          url: element.url,
          title: Lang.translate('title_persons'),
          component: 'actor',
          id: element.id,
          source: params.object.source
        });
      });
      scroll.append(person);
      return person;
    };
    this.toggle = function () {
      var _this2 = this;
      Controller.add('full_descr', {
        link: this,
        toggle: function toggle() {
          Controller.collectionSet(_this2.render());
          Controller.collectionFocus(last, _this2.render());
          if (_this2.onToggle) _this2.onToggle(_this2);
        },
        update: function update() {},
        right: function right() {
          Navigator.move('right');
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        down: this.onDown,
        up: this.onUp,
        gone: function gone() {},
        back: this.onBack
      });
      Controller.toggle('full_descr');
    };
    this.render = function () {
      return html;
    };
    this.destroy = function () {
      scroll.destroy();
      html.remove();
      html = null;
    };
  }

  var Review = /*#__PURE__*/function () {
    function Review(element) {
      var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
      _classCallCheck(this, Review);
      Arrays.extend(params, {
        type: 'line'
      });
      this.element = element;
      this.params = params;
    }
    return _createClass(Review, [{
      key: "create",
      value: function create() {
        var _this = this;
        var text = (this.element.text || this.element.comment) + '';
        text = Utils$2.capitalizeFirstLetter(this.params.type == 'line' && text.length > 120 ? text.slice(0, 120) + '...' : text);
        var review_type = this.element.review_type || 'neutral';
        this.html = Template.get('full_review', _objectSpread2(_objectSpread2({}, this.element), {}, {
          text: text,
          review_type: review_type
        }));
        this.html.addClass('type--' + this.params.type);
        this.html.addClass('review-type--' + review_type);
        if (this.element.liked < 0) this.html.addClass('bad--comment');
        if (this.element.email) {
          var who = $("<div class=\"full-review__user\">\n                <div class=\"full-review__user-email\">".concat(Utils$2.capitalizeFirstLetter(this.element.email), "</div>\n            </div>"));
          var like = $("<div class=\"full-review__like\">\n                <div class=\"full-review__like-icon\">\n                    ".concat(Template.get('icon_like', {}, true), "\n                </div>\n                <div class=\"full-review__like-counter\">").concat(this.element.liked || 0, "</div>\n            </div>"));
          this.html.find('.full-review__header').html(who).append(like);
          this.html.on('visible', function () {
            var img = who.find('img')[0];
            Utils$2.imgLoad(img, Utils$2.protocol() + object$2.pris_domain + '/img/profiles/' + _this.element.icon + '.png', function () {
              who.addClass('loaded');
            }, function () {
              img.src = './img/actor.svg';
            });
          });
        }
      }
    }, {
      key: "updateLike",
      value: function updateLike(add) {
        this.element.liked = (this.element.liked || 0) + add;
        this.html.find('.full-review__like-counter').text(this.element.liked);
      }
    }, {
      key: "render",
      value: function render() {
        return this.html;
      }
    }, {
      key: "destroy",
      value: function destroy() {
        this.html.remove();
      }
    }]);
  }();

  // Экспорт глобального Navigator из vendor библиотеки
  var Navigator$1 = window.Navigator || Navigator;

  var ReviewSelector = /*#__PURE__*/function () {
    function ReviewSelector() {
      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      _classCallCheck(this, ReviewSelector);
      this.params = _objectSpread2({
        selected: 'neutral',
        onSelect: function onSelect() {}
      }, params);
      this.html = null;
      this.selected = this.params.selected;
      this.tv = Platform.screen('tv');
      this.listener = start$8();
      this.last = null;
    }
    return _createClass(ReviewSelector, [{
      key: "create",
      value: function create() {
        this.html = Template.get('review_selector', {
          title: Lang.translate('review_type_title'),
          neutral: Lang.translate('review_type_neutral'),
          positive: Lang.translate('review_type_positive'),
          negative: Lang.translate('review_type_negative')
        });
        this.setupEvents();
        this.updateSelection();
      }
    }, {
      key: "setupEvents",
      value: function setupEvents() {
        var _this = this;
        var buttons = this.html.find('.review-selector__button');
        buttons.each(function (index, button) {
          var $button = $(button);
          var type = $button.data('type');
          $button.on('hover:enter', function () {
            _this.select(type);
          });
          $button.on('hover:focus hover:touch', function (e) {
            _this.last = e.target;
          });
        });
      }
    }, {
      key: "select",
      value: function select(type) {
        if (['neutral', 'positive', 'negative'].includes(type)) {
          this.selected = type;
          this.updateSelection();
          this.params.onSelect(type);
        }
      }
    }, {
      key: "updateSelection",
      value: function updateSelection() {
        var buttons = this.html.find('.review-selector__button');
        buttons.removeClass('selected');
        buttons.filter("[data-type=\"".concat(this.selected, "\"]")).addClass('selected');
      }
    }, {
      key: "getSelected",
      value: function getSelected() {
        return this.selected;
      }
    }, {
      key: "render",
      value: function render() {
        return this.html;
      }
    }, {
      key: "toggle",
      value: function toggle() {
        var _this2 = this;
        Controller.add('review_selector', {
          toggle: function toggle() {
            Controller.collectionSet(_this2.html);
            Controller.collectionFocus(_this2.last, _this2.html);
          },
          update: function update() {},
          up: function up() {
            _this2.listener.send('up');
          },
          down: function down() {
            _this2.listener.send('down');
          },
          right: function right() {
            Navigator$1.move('right');
          },
          left: function left() {
            Navigator$1.move('left');
          },
          back: function back() {
            _this2.listener.send('back');
          }
        });
        Controller.toggle('review_selector');
      }
    }, {
      key: "destroy",
      value: function destroy() {
        if (this.html) {
          this.html.remove();
          this.html = null;
        }
        if (this.listener) {
          this.listener.destroy();
        }
      }
    }]);
  }();

  function Discuss(data) {
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var html, scroll, last, all_ready, rules_html;
    var active = 0;
    var view = 6;
    var tv = Platform.screen('tv');
    this.create = function () {
      var _this = this;
      html = Template.get('items_line', {
        title: Lang.translate('title_comments')
      });
      scroll = new create$f({
        horizontal: true
      });
      scroll.render().find('.scroll__body').addClass('full-reviews');
      html.find('.items-line__body').append(scroll.render());
      this.add();
      if (data.discuss.result.length === 0) {
        this.addEmptyMessage();
      }
      data.discuss.result.slice(0, view).forEach(this.append.bind(this));
      scroll.onWheel = function (step) {
        _this.toggle();
        Controller.enabled().controller[step > 0 ? 'right' : 'left']();
      };
      scroll.onScroll = function (step) {
        data.discuss.result.slice(active, tv ? active + view : data.discuss.result.length).filter(function (e) {
          return !e.ready;
        }).forEach(function (line_data) {
          Controller.collectionAppend(_this.append(line_data));
        });
        if ((!tv || active + view >= data.discuss.result.length) && !all_ready && data.discuss.total_pages > 1) {
          all_ready = true;
          _this.all();
        }
        Layer.visible(scroll.render(true));
      };
    };
    this.rules = function () {
      rules_html = Template.get('discuss_rules');
      $('body').append(rules_html);
    };
    this.filter = function (text) {
      var err = 0;
      function containsLongWords(str) {
        var length = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : 15;
        var any = false;
        str.split(/\s/).map(function (a) {
          if (a.length >= length) any = true;
        });
        return any;
      }
      function containsFiveWords(str) {
        var words = str.split(/\s/);
        var count = 0;
        words.map(function (a) {
          if (a.length >= 5) count++;
        });
        return count;
      }
      if (/\d{4,}/g.test(text)) err = 1;else if (!/[а-яА-ЯёЁ]{5,}/.test(text)) err = 2;else if (!/[.,:;!?]/.test(text)) err = 3;else if (/[*%$#_+=|^&]/.test(text)) err = 4;else if (containsFiveWords(text) < 5) err = 5;else if (containsLongWords(text)) err = 6;else if (text.length > 300) err = 7;
      return err;
    };
    this.add = function () {
      var _this2 = this;
      var add_button = $('<div class="full-review-add selector"></div>');
      var add_value = '';
      var review_type = 'neutral';
      add_button.on('hover:enter', function () {
        if (Account.logged()) {
          _this2.rules();

          // Создаем компонент выбора рецензии
          var reviewSelector = new ReviewSelector();
          reviewSelector.create();
          var keyboard = Input.edit({
            title: '',
            value: add_value,
            nosave: true,
            textarea: true
          }, function (new_value) {
            rules_html.remove();
            add_value = new_value;
            review_type = reviewSelector.getSelected();
            if (new_value) {
              Account.addDiscuss(_objectSpread2(_objectSpread2({}, params.object), {}, {
                comment: new_value,
                review_type: review_type
              }), function (comment) {
                // Удаляем уведомление о пустых комментариях если оно есть
                scroll.render().find('.full-review-empty').remove();
                add_button.after(_this2.append(comment));
                Layer.visible(scroll.render(true));
              });
            }
            _this2.toggle();
          });

          // Добавляем компонент выбора рецензии
          var keypad = $('.simple-keyboard');
          var helper = $('<div class="discuss-rules-helper hide"></div>');
          var reviewBlock = $('<div class="discuss-review-block"></div>');
          if (keypad.length > 0) {
            reviewBlock.append(reviewSelector.render());
            keypad.after(reviewBlock);
            keypad.append(helper);
            keyboard.listener.follow('down', function () {
              reviewSelector.toggle();
            });
            reviewSelector.listener.follow('up', function () {
              keyboard.toggle();
            });
            keyboard.listener.follow('change', function (event) {
              var code = _this2.filter(event.value.trim());
              helper.toggleClass('hide', !Boolean(code)).text(Lang.translate('discuss_rules_rule_' + code));
            });
          }
        } else {
          Prisma.Account.showNoAccount();
        }
      }).on('hover:focus hover:touch', function (e) {
        last = e.target;
        scroll.update($(e.target), true);
      });
      scroll.append(add_button);
    };
    this.addEmptyMessage = function () {
      var empty_message = $('<div class="full-review-empty selector"><div class="full-review-empty__text">' + Lang.translate('comments_empty') + '</div></div>');
      empty_message.on('hover:focus hover:touch', function (e) {
        last = e.target;
        scroll.update($(e.target), true);
      });
      scroll.append(empty_message);
    };
    this.all = function () {
      var _this3 = this;
      var all_button = $('<div class="full-review full-review-all selector"><div class="full-review-all__text">' + Lang.translate('more') + '</div><div class="full-review-all__count">' + (data.discuss.total - data.discuss.result.length) + '</div></div>');
      all_button.on('hover:enter', function () {
        var page = 2;
        var discuss = [];
        var wait = false;
        var position = 0;
        var container = $('<div><div class="content-loading"></div></div>');
        var draw = function draw() {
          Modal.scroll().reset();
          container.empty();
          discuss.forEach(function (element) {
            var review = new Review(element, {
              type: 'vertical'
            });
            review.create();
            review.render().on('hover:focus hover:touch', function (e) {
              position = discuss.indexOf(element);
            }).on('hover:enter', function () {
              _this3.see(review, Modal.toggle);
            });
            container.append(review.render());
          });
          if (data.discuss.total_pages !== page) container.append($('<div class="content-loading"></div>'));
          Modal.update(container);
          Modal.toggle();
        };
        var load = function load() {
          TMDB.discussGet(_objectSpread2(_objectSpread2({}, params.object), {}, {
            page: page
          }), function (anser) {
            wait = false;
            discuss = discuss.slice(position, discuss.length).concat(anser.result);
            position = 0;
            draw();
          }, function () {
            page--;
            wait = false;
          });
        };
        Modal.open({
          title: Lang.translate('title_comments'),
          html: container,
          size: 'medium',
          onBack: function onBack() {
            Modal.close();
            draw = function draw() {};
            load = function load() {};
            _this3.toggle();
          }
        });
        Modal.scroll().onEnd = function () {
          if (!wait && page < data.discuss.total_pages) {
            wait = true;
            page++;
            load();
          }
        };
        Modal.scroll().params().end_ratio = 1.5;
        setTimeout(load, 200); //задержка для анимации окна
      });
      scroll.append(all_button);
    };
    this.see = function (review, onBack) {
      var items = [];
      var voited = Storage.cache('discuss_voited', 100, []);
      if (voited.indexOf(review.element.id) == -1 && Account.logged()) {
        items = [{
          separator: true,
          title: Lang.translate('title_action')
        }, {
          title: Lang.translate('title_like'),
          like: 1
        }, {
          title: Lang.translate('reactions_shit'),
          like: -1
        }];
      }
      Select.show({
        title: Utils$2.capitalizeFirstLetter(review.element.email),
        items: items,
        onFullDraw: function onFullDraw(select_scroll) {
          select_scroll.body().prepend($('<div class="selectbox__text selector"><div>' + Utils$2.capitalizeFirstLetter(review.element.comment) + '</div></div>'));
        },
        onSelect: function onSelect(item) {
          onBack();
          Account.voiteDiscuss({
            id: review.element.id,
            like: item.like
          }, function (result) {
            voited.push(review.element.id);
            Storage.set('discuss_voited', voited);
            if (result && result.liked !== undefined) {
              review.element.liked = result.liked;
              review.html.find('.full-review__like-counter').text(review.element.liked);
            } else {
              review.updateLike(item.like);
            }
            Noty$1.show(Lang.translate('discuss_voited'));
          });
        },
        onBack: onBack
      });
    };
    this.append = function (element) {
      var _this4 = this;
      element.ready = true;
      var review = new Review(element);
      review.create();
      review.render().on('hover:focus', function (e) {
        last = e.target;
        active = data.discuss.result.indexOf(element);
        scroll.update($(e.target), true);
      }).on('hover:touch', function (e) {
        active = data.discuss.result.indexOf(element);
        last = e.target;
      }).on('hover:enter', function () {
        _this4.see(review, _this4.toggle.bind(_this4));
      });
      scroll.append(review.render());
      return review.render();
    };
    this.toggle = function () {
      var _this5 = this;
      Controller.add('full_reviews', {
        link: this,
        toggle: function toggle() {
          Controller.collectionSet(_this5.render());
          Controller.collectionFocus(last, _this5.render());
          if (_this5.onToggle) _this5.onToggle(_this5);
        },
        right: function right() {
          Navigator.move('right');
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        down: this.onDown,
        up: this.onUp,
        gone: function gone() {},
        back: this.onBack
      });
      Controller.toggle('full_reviews');
    };
    this.render = function () {
      return html;
    };
  }

  function create$9(data) {
    var html, scroll, last;
    var active = 0;
    var view = 6;
    var tv = Platform.screen('tv');
    this.create = function () {
      var _this = this;
      html = Template.get('items_line', {
        title: Lang.translate('title_comments')
      });
      scroll = new create$f({
        horizontal: true
      });
      scroll.render().find('.scroll__body').addClass('full-reviews');
      html.find('.items-line__body').append(scroll.render());
      if (data.comments.length === 0) {
        this.addEmptyMessage();
      }
      data.comments.slice(0, view).forEach(this.append.bind(this));
      scroll.onWheel = function (step) {
        _this.toggle();
        Controller.enabled().controller[step > 0 ? 'right' : 'left']();
      };
      scroll.onScroll = function (step) {
        data.comments.slice(active, tv ? active + view : data.comments.length).filter(function (e) {
          return !e.ready;
        }).forEach(function (line_data) {
          Controller.collectionAppend(_this.append(line_data));
        });
        Layer.visible(scroll.render(true));
      };
    };
    this.append = function (element) {
      element.ready = true;
      var review = new Review(element);
      review.create();
      review.render().on('hover:focus', function (e) {
        last = e.target;
        active = data.comments.indexOf(element);
        scroll.update($(e.target), true);
      });
      scroll.append(review.render());
      return review.render();
    };
    this.addEmptyMessage = function () {
      var empty_message = $('<div class="full-review-empty selector"><div class="full-review-empty__text">' + Lang.translate('comments_empty') + '</div></div>');
      empty_message.on('hover:focus hover:touch', function (e) {
        last = e.target;
        scroll.update($(e.target), true);
      });
      scroll.append(empty_message);
    };
    this.toggle = function () {
      var _this2 = this;
      Controller.add('full_reviews', {
        link: this,
        toggle: function toggle() {
          Controller.collectionSet(_this2.render());
          Controller.collectionFocus(last, _this2.render());
          if (_this2.onToggle) _this2.onToggle(_this2);
        },
        right: function right() {
          Navigator.move('right');
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        down: this.onDown,
        up: this.onUp,
        gone: function gone() {},
        back: this.onBack
      });
      Controller.toggle('full_reviews');
    };
    this.render = function () {
      return html;
    };
  }

  var Item = /*#__PURE__*/function () {
    function Item(data, params) {
      _classCallCheck(this, Item);
      this.data = data;
      this.params = params;
    }
    return _createClass(Item, [{
      key: "create",
      value: function create() {
        this.html = Template.js(this.template, {});
        this.html.addEventListener('visible', this.visible.bind(this));
      }
    }, {
      key: "update",
      value: function update() {
        var _this = this;
        var url = (this.data.url || this.data.link) + '';
        var loc = url.slice(0, 6) == 'https:' || window.location.protocol == 'https:';
        var hts = url.slice(0, 6) == 'https:' || url.slice(0, 5) == 'http:';
        if (Plugins.errors().find(function (s) {
          return s == (_this.data.url || _this.data.link);
        })) {
          var erl = this.html.querySelector('.extensions__item-error');
          if (erl) erl.toggleClass('hide', false);
        }
        if (window.location.protocol == 'https:' && hts) url = url.replace(/^(http:\/\/|https:\/\/)/, 'https://');
        this.html.querySelector('.extensions__item-name').innerText = this.data.name || Lang.translate('extensions_no_name');
        this.html.querySelector('.extensions__item-author').innerText = this.data.author || (this.params.type == 'plugins' ? '@cub' : '@prisma');
        this.html.querySelector('.extensions__item-descr').innerText = (this.data.descr || url).replace(/\n|\t|\r/g, ' ');
        var proto = this.html.querySelector('.extensions__item-proto');
        if (proto && hts) {
          proto.toggleClass('hide', !Boolean(this.params.type == 'plugins' || this.params.type == 'installs'));
          proto.addClass('protocol-' + (loc ? 'https' : 'http'));
        }
        var status = this.html.querySelector('.extensions__item-disabled');
        status.innerText = Lang.translate('player_disabled');
        if (this.data.status || !this.params.autocheck) status.classList.add('hide');else status.classList.remove('hide');
      }
    }, {
      key: "cub",
      value: function cub() {
        var cub = document.createElement('div');
        cub.classList.add('extensions__cub');
        cub.innerText = 'CUB';
        this.html.appendChild(cub);
      }
    }, {
      key: "premium",
      value: function premium() {
        var author = this.html.querySelector('.extensions__item-author');
        var premium = document.createElement('span');
        premium.classList.add('extensions__item-premium');
        premium.innerText = 'CUB Premium';
        var where = author || this.html;
        where.appendChild(premium);
      }
    }, {
      key: "visible",
      value: function visible() {
        this.update();
      }
    }, {
      key: "render",
      value: function render() {
        return this.html;
      }
    }, {
      key: "destroy",
      value: function destroy() {
        this.html.remove();
      }
    }]);
  }();

  function showReload(cancel) {
    Modal.open({
      title: '',
      align: 'center',
      zIndex: 300,
      html: $('<div class="about">' + Lang.translate('plugins_need_reload') + '</div>'),
      buttons: [{
        name: Lang.translate('settings_param_no'),
        onSelect: function onSelect() {
          Modal.close();
          cancel();
        }
      }, {
        name: Lang.translate('settings_param_yes'),
        onSelect: function onSelect() {
          window.location.reload();
        }
      }]
    });
  }
  function showInfo(plug, back) {
    var modal = Template.get('extensions_info');
    var footer = $('.extensions-info__footer', modal);
    if (plug.image) modal.prepend($('<img class="extensions-info__image" src="' + plug.image + '"/>'));
    $('.extensions-info__descr', modal).text(plug.descr);
    $('.extensions-info__instruction', modal).html((plug.instruction || Lang.translate('extensions_no_info')).replace(/\n/g, '<br>').replace(/\s\s/g, '&nbsp;&nbsp;'));
    function addLabel(name, value) {
      var label = $("<div>\n            <div class=\"extensions-info__label\">".concat(name, "</div>\n            <div class=\"extensions-info__value\">").concat(value, "</div>\n        </div>"));
      footer.append(label);
    }
    if (plug.link) addLabel(Lang.translate('settings_parser_jackett_link'), plug.link);
    if (plug.author) addLabel(Lang.translate('title_author'), plug.author);
    if (plug.time) addLabel(Lang.translate('settings_added'), Utils$2.parseTime(plug.time).full);
    Modal.open({
      title: plug.name || Lang.translate('extensions_info'),
      html: modal,
      size: 'large',
      onBack: function onBack() {
        Modal.close();
        back();
      }
    });
  }
  var Utils$1 = {
    showReload: showReload,
    showInfo: showInfo
  };

  var Extension = /*#__PURE__*/function (_Item) {
    function Extension(data, params) {
      var _this;
      _classCallCheck(this, Extension);
      _this = _callSuper(this, Extension, [data, params]);
      _this.network = new create$e();
      _this.template = 'extensions_item';
      return _this;
    }
    _inherits(Extension, _Item);
    return _createClass(Extension, [{
      key: "visible",
      value: function visible() {
        _superPropGet(Extension, "visible", this, 3)([]);
        if (this.params.cub) this.cub();
        if (this.data.premium) this.premium();
        if (this.params.autocheck) this.check();
        if (Plugins.loaded().indexOf(this.data.url || this.data.link) >= 0) this.html.querySelector('.extensions__item-included').classList.remove('hide');
        this.html.addEventListener('hover:enter', this.menu.bind(this));
      }
    }, {
      key: "menu",
      value: function menu() {
        var _this2 = this;
        if (this.removed) return;
        var menu = [];
        var controller = Controller.enabled().name;
        var back = function back() {
          Controller.toggle(controller);
        };
        if (this.params.type == 'plugins' || this.params.type == 'installs') {
          menu.push({
            title: Lang.translate('extensions_' + (this.data.status ? 'disable' : 'enable')),
            toggle: true
          });
        }
        menu.push({
          title: Lang.translate('extensions_check'),
          status: true
        });
        if (this.params.cub || this.params.noedit) {
          if (this.params.type == 'extensions') {
            menu.push({
              title: Lang.translate('extensions_install'),
              install: true
            });
          }
          menu.push({
            title: Lang.translate('extensions_info'),
            instruction: true
          });
        } else {
          menu.push({
            title: Lang.translate('extensions_edit'),
            separator: true
          });
          menu.push({
            title: Lang.translate('extensions_change_name'),
            change: 'name'
          });
          menu.push({
            title: Lang.translate('extensions_change_link'),
            change: 'url'
          });
          menu.push({
            title: Lang.translate('extensions_remove'),
            remove: true
          });
        }
        Select.show({
          title: Lang.translate('title_action'),
          items: menu,
          onBack: back,
          onSelect: function onSelect(a) {
            if (a.toggle) {
              _this2.data.status = _this2.data.status == 1 ? 0 : 1;
              if (_this2.params.cub) Account.pluginsStatus(_this2.data, _this2.data.status);else Plugins.save(_this2.data);
              _this2.update();
              if (_this2.data.status == 1) {
                back();
                Plugins.push(_this2.data);
              } else {
                Utils$1.showReload(back);
              }
            } else if (a.change) {
              Input.edit({
                title: a.change == 'name' ? Lang.translate('extensions_set_name') : Lang.translate('extensions_set_url'),
                value: _this2.data[a.change] || '',
                free: true,
                nosave: true
              }, function (new_value) {
                if (new_value) {
                  _this2.data[a.change] = new_value;
                  Plugins.save(_this2.data);
                  _this2.update();
                  if (a.change == 'url') {
                    _this2.check();
                    Plugins.push(_this2.data);
                  }
                }
                back();
              });
            } else if (a.status) {
              back();
              _this2.check();
            } else if (a.install) {
              var ready = Plugins.get().find(function (b) {
                return b.url == _this2.data.link;
              });
              if (ready) {
                Noty$1.show(Lang.translate('extensions_ready'));
                back();
              } else {
                back();
                Plugins.add({
                  url: _this2.data.link,
                  status: 1,
                  name: _this2.data.name,
                  author: _this2.data.author
                });
                _this2.html.querySelector('.extensions__item-included').classList.remove('hide');
              }
            } else if (a.instruction) {
              Utils$1.showInfo(_this2.data, back);
            } else if (a.remove) {
              Plugins.remove(_this2.data);
              _this2.html.style.opacity = 0.5;
              _this2.removed = true;
              Utils$1.showReload(back);
            }
          }
        });
      }
    }, {
      key: "check",
      value: function check() {
        var check = this.html.querySelector('.extensions__item-check');
        var code = this.html.querySelector('.extensions__item-code');
        var stat = this.html.querySelector('.extensions__item-status');
        check.classList.remove('hide');
        code.classList.add('hide');
        stat.classList.add('hide');
        var display = function display(type, num, text) {
          code.innerText = num;
          code.classList.remove('hide');
          code.classList.remove('success');
          code.classList.remove('error');
          code.classList.add(type);
          stat.innerText = text;
          stat.classList.remove('hide');
          check.classList.add('hide');
        };
        var url = Utils$2.fixMirrorLink(Utils$2.rewriteIfHTTPS(this.data.url || this.data.link));
        this.network.timeout(5000);
        this.network["native"](url, function (str) {
          if (/Prisma\./.test(str)) {
            display('success', 200, Lang.translate('extensions_worked'));
          } else {
            display('error', 500, Lang.translate('extensions_no_plugin'));
          }
        }, function (a, e) {
          display('error', 404, Lang.translate('title_error'));
        }, false, {
          dataType: 'text'
        });
      }
    }]);
  }(Item);

  var Recomend = /*#__PURE__*/function (_Extension) {
    function Recomend(data, params) {
      var _this;
      _classCallCheck(this, Recomend);
      _this = _callSuper(this, Recomend, [data, params]);
      _this.template = 'extensions_recomend';
      return _this;
    }
    _inherits(Recomend, _Extension);
    return _createClass(Recomend, [{
      key: "visible",
      value: function visible() {
        var _this2 = this;
        _superPropGet(Recomend, "visible", this, 3)([]);
        this.img = this.html.querySelector('.extensions__item-image');
        this.img.onload = function () {
          _this2.img.classList.add('loaded');
        };
        this.img.src = Utils$2.fixMirrorLink(Utils$2.rewriteIfHTTPS(this.data.image));
      }
    }, {
      key: "destroy",
      value: function destroy() {
        _superPropGet(Recomend, "destroy", this, 3)([]);
        if (this.img) {
          this.img.onload = false;
          this.img.onerror = false;
        }
      }
    }]);
  }(Extension);

  var Theme$1 = /*#__PURE__*/function () {
    function Theme() {
      _classCallCheck(this, Theme);
    }
    return _createClass(Theme, [{
      key: "init",
      value: function init() {
        var _this = this;
        if (this.get()) this.set(this.get());

        // Инициализируем стиль интерфейса
        this.applyInterfaceStyle();

        // Подписываемся на изменения настроек
        Storage.listener.follow('change', function (event) {
          if (event.name === 'interface_style') {
            _this.applyInterfaceStyle();
          }
        });
      }

      /**
       * Применяет стиль интерфейса в зависимости от настроек
       */
    }, {
      key: "applyInterfaceStyle",
      value: function applyInterfaceStyle() {
        // Применяем стиль только для ТВ-устройств
        var isTV = Platform.screen('tv');

        // Если это не ТВ, снимаем класс
        if (!isTV) {
          $('body').removeClass('news-cards');
          return;
        }

        // Для ТВ применяем стиль в зависимости от настроек
        var isSpaceStyle = Storage.field('interface_style') === 'space';

        // Принудительно удаляем и добавляем класс для мгновенного обновления стиля
        if (isSpaceStyle) {
          $('body').removeClass('news-cards').addClass('news-cards');
        } else {
          $('body').removeClass('news-cards');
        }

        // Принудительное обновление UI
        setTimeout(function () {
          $(window).trigger('resize');
        }, 0);
      }
    }, {
      key: "toggle",
      value: function toggle(url) {
        if (url) {
          Storage.set('cub_theme', url);
          this.set(url);
        } else {
          Storage.set('cub_theme', '');
          $('#cub-theme').remove();
        }
      }
    }, {
      key: "get",
      value: function get() {
        return Storage.get('cub_theme', '');
      }
    }, {
      key: "set",
      value: function set(url) {
        $('#cub-theme').remove();
        var href = Utils$2.rewriteIfHTTPS(Utils$2.addUrlComponent(url, 'token=' + encodeURIComponent(Storage.get('account', '{}').token)));
        var css = $('<link rel="stylesheet" href="' + href + '" id="cub-theme">');
        $('body').append(css);
      }
    }]);
  }();
  var Theme$2 = new Theme$1();

  var Theme = /*#__PURE__*/function (_Item) {
    function Theme(data, params) {
      var _this;
      _classCallCheck(this, Theme);
      _this = _callSuper(this, Theme, [data, params]);
      _this.template = 'extensions_theme';
      _this.link = Utils$2.rewriteIfHTTPS(Utils$2.protocol() + object$2.cub_domain + '/extensions/' + _this.data.id);
      return _this;
    }
    _inherits(Theme, _Item);
    return _createClass(Theme, [{
      key: "update",
      value: function update() {
        this.html.querySelector('.extensions__item-name').innerText = this.data.name || Lang.translate('extensions_no_name');
        if (this.active()) this.html.classList.add('active');else this.html.classList.remove('active');
      }
    }, {
      key: "active",
      value: function active() {
        return Storage.get('cub_theme', '') == this.link;
      }
    }, {
      key: "visible",
      value: function visible() {
        var _this2 = this;
        _superPropGet(Theme, "visible", this, 3)([]);
        if (this.data.premium) this.premium();
        this.img = this.html.querySelector('.extensions__item-image');
        this.img.onload = function () {
          _this2.img.classList.add('loaded');
        };
        this.img.src = Utils$2.fixMirrorLink(Utils$2.rewriteIfHTTPS(this.data.image));
        this.html.addEventListener('hover:enter', this.menu.bind(this));
      }
    }, {
      key: "menu",
      value: function menu() {
        var _this3 = this;
        var menu = [];
        var controller = Controller.enabled().name;
        menu.push({
          title: Lang.translate('extensions_' + (this.active() ? 'disable' : 'enable')),
          toggle: true
        });
        Select.show({
          title: Lang.translate('title_action'),
          items: menu,
          onBack: function onBack() {
            Controller.toggle(controller);
          },
          onSelect: function onSelect(a) {
            Controller.toggle(controller);
            if (a.toggle) {
              if (!_this3.active() && _this3.data.premium && !Account.hasPremium()) return Prisma.Account.showPrismaPremium();
              Theme$2.toggle(_this3.active() ? '' : _this3.link);
              _this3.update();
            }
          }
        });
      }
    }, {
      key: "destroy",
      value: function destroy() {
        _superPropGet(Theme, "destroy", this, 3)([]);
        if (this.img) {
          this.img.onload = false;
          this.img.onerror = false;
        }
      }
    }]);
  }(Item);

  var Screensaver = /*#__PURE__*/function (_Item) {
    function Screensaver(data, params) {
      var _this;
      _classCallCheck(this, Screensaver);
      _this = _callSuper(this, Screensaver, [data, params]);
      _this.template = 'extensions_screensaver';
      _this.link = Utils$2.rewriteIfHTTPS(Utils$2.protocol() + object$2.cub_domain + '/extensions/' + _this.data.id);
      return _this;
    }
    _inherits(Screensaver, _Item);
    return _createClass(Screensaver, [{
      key: "update",
      value: function update() {
        this.html.querySelector('.extensions__item-name').innerText = this.data.name || Lang.translate('extensions_no_name');
        this.html.querySelector('.extensions__item-time').innerText = Utils$2.parseTime(Date.now()).time;
        if (this.active()) this.html.classList.add('active');else this.html.classList.remove('active');
      }
    }, {
      key: "active",
      value: function active() {
        return Storage.field('screensaver_type') == 'cub' && Storage.get('cub_screensaver', '') == this.link;
      }
    }, {
      key: "visible",
      value: function visible() {
        var _this2 = this;
        _superPropGet(Screensaver, "visible", this, 3)([]);
        if (this.data.premium) this.premium();
        this.img = this.html.querySelector('.extensions__item-image');
        this.img.onload = function () {
          _this2.img.classList.add('loaded');
        };
        this.img.src = Utils$2.fixMirrorLink(Utils$2.rewriteIfHTTPS(this.data.image));
        this.html.addEventListener('hover:enter', this.menu.bind(this));
      }
    }, {
      key: "menu",
      value: function menu() {
        var _this3 = this;
        var menu = [];
        var controller = Controller.enabled().name;
        menu.push({
          title: Lang.translate('extensions_' + (this.active() ? 'disable' : 'enable')),
          toggle: true
        });
        menu.push({
          title: Lang.translate('title_watch'),
          watch: true
        });
        Select.show({
          title: Lang.translate('title_action'),
          items: menu,
          onBack: function onBack(a) {
            Controller.toggle(controller);
          },
          onSelect: function onSelect(a) {
            Controller.toggle(controller);
            if (a.toggle) {
              if (_this3.active()) Storage.set('cub_screensaver', '');else {
                if (_this3.data.premium && !Account.hasPremium()) return Prisma.Account.showPrismaPremium();
                Storage.set('cub_screensaver', _this3.link);
                Storage.set('screensaver_type', 'cub');
              }
              _this3.update();
            } else {
              Screensaver$2.show('cub', {
                url: _this3.link
              });
            }
          }
        });
      }
    }, {
      key: "destroy",
      value: function destroy() {
        _superPropGet(Screensaver, "destroy", this, 3)([]);
        if (this.img) {
          this.img.onload = false;
          this.img.onerror = false;
        }
      }
    }]);
  }(Item);

  var Line = /*#__PURE__*/function () {
    function Line(data, params) {
      _classCallCheck(this, Line);
      this.params = params;
      this.data = data;
      this.items = [];
      this.active = 0;
      this.view = 4;
      this.last;
    }
    return _createClass(Line, [{
      key: "create",
      value: function create() {
        var _this = this;
        this.scroll = new create$f({
          horizontal: true,
          step: window.innerWidth / 4
        });
        this.html = Template.js('extensions_block', {});
        this.html.querySelector('.extensions__block-title').innerText = this.params.title;
        this.html.addEventListener('visible', this.visible.bind(this));
        this.html.querySelector('.extensions__block-body').appendChild(this.scroll.render(true));
        this.scroll.onWheel = function (step) {
          if (!Controller.own(_this)) _this.toggle();
          Controller.enabled().controller[step > 0 ? 'right' : 'left']();
        };
        this.scroll.onScroll = this.attach.bind(this);
      }
    }, {
      key: "display",
      value: function display(num) {
        var _this2 = this;
        this.data.filter(function (p) {
          if (p.platform) {
            var platforms = p.platform.split(',');
            return platforms.find(function (n) {
              return Platform.is(n);
            });
          } else return true;
        }).filter(function (e) {
          return e.premium ? window.prisma_settings.account_use : true;
        }).filter(function (e) {
          return !_this2.items.find(function (f) {
            return f.data == e;
          });
        }).forEach(this.append.bind(this));
      }
    }, {
      key: "visible",
      value: function visible() {
        this.display(this.view);
        Layer.visible(this.scroll.render(true));
      }
    }, {
      key: "append",
      value: function append(elem) {
        var _this3 = this;
        var Class = Extension;
        if (this.params.hpu == 'recomend') Class = Recomend;
        if (this.params.hpu == 'theme') Class = Theme;
        if (this.params.hpu == 'screensaver') Class = Screensaver;
        var item = new Class(elem, this.params);
        item.create();
        item.render().addEventListener('hover:focus', function () {
          _this3.last = item.render();
          var prev_active = _this3.active;
          _this3.active = _this3.items.indexOf(item);
          if (_this3.active > 0 || prev_active > _this3.active) _this3.scroll.update(_this3.last, true);
        });
        this.scroll.body(true).appendChild(item.render());
        this.items.push(item);
        if (Controller.own(this)) Controller.collectionAppend(item.render());
      }
    }, {
      key: "attach",
      value: function attach() {
        var size = Platform.screen('tv') ? (Math.round(this.active / this.view) + 1) * this.view + 1 : this.data.length;
        this.display(size);
        Layer.visible(this.scroll.render(true));
      }
    }, {
      key: "render",
      value: function render() {
        return this.html;
      }
    }, {
      key: "toggle",
      value: function toggle() {
        var _this4 = this;
        Controller.add('extensions_line', {
          link: this,
          toggle: function toggle() {
            Controller.collectionSet(_this4.scroll.render(true));
            Controller.collectionFocus(_this4.items.length ? _this4.last : false, _this4.scroll.render(true));
            if (_this4.onToggle) _this4.onToggle(_this4);
          },
          update: function update() {},
          right: function right() {
            Navigator.move('right');
          },
          left: function left() {
            Navigator.move('left');
          },
          down: this.onDown,
          up: this.onUp,
          back: this.onBack
        });
        Controller.toggle('extensions_line');
      }
    }, {
      key: "destroy",
      value: function destroy() {
        Arrays.destroy(this.items);
        this.scroll.destroy();
        this.html.remove();
        this.items = null;
      }
    }]);
  }();

  var Add = /*#__PURE__*/function () {
    function Add() {
      var _this = this;
      _classCallCheck(this, Add);
      this.html = document.createElement('div');
      this.html.classList.add('extensions__block-add');
      this.html.classList.add('selector');
      this.html.innerText = Lang.translate('extensions_add');
      this.html.addEventListener('hover:enter', function () {
        Input.edit({
          title: Lang.translate('extensions_set_url'),
          value: '',
          free: true,
          nosave: true
        }, function (new_value) {
          _this.onAdd(new_value);
        });
      });
    }
    return _createClass(Add, [{
      key: "render",
      value: function render() {
        return this.html;
      }
    }]);
  }();

  var Main = /*#__PURE__*/function () {
    function Main(params) {
      _classCallCheck(this, Main);
      this.items = [];
      this.active = 0;
      this.params = params;
    }
    return _createClass(Main, [{
      key: "create",
      value: function create() {
        var _this = this;
        this.html = Template.js('extensions');
        this.scroll = new create$f({
          mask: true
        });
        this.scroll.onWheel = function (step) {
          if (step > 0) _this.down();else _this.up();
        };
        this.scroll.append(HeadBackward(Lang.translate('settings_main_plugins'), true));
        this.scroll.height();
        this.html.querySelector('.extensions__body').appendChild(this.scroll.render(true));
        if (this.params.store) this.loadCustomStore();else this.load();
      }
    }, {
      key: "add",
      value: function add() {
        var add = new Add();
        var line = this.items[0];
        add.onAdd = function (url) {
          if (url) {
            if (url.length > 300) {
              line.toggle();
              Noty$1.show(Lang.translate('account_export_fail_600'));
              return;
            }
            var data = {
              url: url,
              status: 1
            };
            var plugin = new Extension(data, {
              type: 'installs',
              autocheck: true
            });
            plugin.create();
            Plugins.add(data);
            $(add.render()).after(plugin.render());
            line.last = add.render();
            Layer.visible(line.render());
            line.toggle();
          } else {
            line.toggle();
          }
        };
        line.scroll.body(true).appendChild(add.render());
      }
    }, {
      key: "loadCustomStore",
      value: function loadCustomStore() {
        var _this2 = this;
        this.appendLoader();
        var net = new create$e();
        net.silent(this.params.store, function (data) {
          _this2.loader.remove();
          net = null;
          if (data.results && data.results.length) {
            if (_this2.params.with_installed) {
              _this2.appendLine(Plugins.get().reverse(), {
                title: Lang.translate('extensions_from_memory'),
                type: 'installs',
                autocheck: true
              });
            }
            data.results.forEach(function (a) {
              _this2.appendLine(a.results, {
                title: a.title || Lang.translate('player_unknown'),
                type: 'extensions',
                hpu: a.hpu,
                noedit: true
              });
            });
            if (_this2.params.with_installed) _this2.add();
            _this2.items.slice(0, 3).forEach(function (i) {
              return i.display();
            });
            Layer.visible(_this2.html);
            _this2.toggle();
          } else {
            _this2.error();
          }
        }, function () {
          _this2.loader.remove();
          net = null;
          _this2.error();
        });
      }
    }, {
      key: "load",
      value: function load() {
        var _this3 = this;
        this.appendLoader();
        var need = 2;
        if (window.prisma_settings.plugins_store) need += 2;
        var status = new status$2(need);
        status.onComplite = function () {
          _this3.loader.remove();
          _this3.appendLine(status.data.installs, {
            title: Lang.translate('extensions_from_memory'),
            type: 'installs',
            autocheck: true
          });
          if (status.data.plugins.length) _this3.appendLine(status.data.plugins, {
            title: Lang.translate('extensions_from_cub'),
            cub: true,
            type: 'plugins',
            autocheck: true
          });
          if (status.data.best && status.data.best.length) _this3.appendLine(status.data.best, {
            title: Lang.translate('extensions_from_popular'),
            cub: true,
            type: 'extensions'
          });
          if (status.data.all && status.data.all.length) _this3.appendLine(status.data.all.reverse(), {
            title: Lang.translate('extensions_from_lib'),
            cub: true,
            type: 'extensions'
          });
          if (status.data.list) {
            status.data.list.forEach(function (data) {
              if (data.results.length) {
                _this3.appendLine(data.results, {
                  title: Lang.translate('extensions_hpu_' + data.hpu),
                  cub: true,
                  type: 'extensions',
                  hpu: data.hpu
                });
              }
            });
          }
          _this3.add();
          _this3.items.slice(0, 3).forEach(function (i) {
            return i.display();
          });
          Layer.visible(_this3.html);
          _this3.toggle();
        };
        status.append('installs', Plugins.get().reverse());
        Account.plugins(function (plugins) {
          status.append('plugins', plugins);
        });
        if (window.prisma_settings.plugins_store) {
          Account.extensions(function (extensions) {
            if (extensions.results) {
              status.need--;
              status.append('list', extensions.results);
            } else {
              status.append('best', extensions.best);
              status.append('all', extensions.plugins);
            }
          });
        }
      }
    }, {
      key: "appendLoader",
      value: function appendLoader() {
        this.loader = document.createElement('div');
        this.loader.classList.add('broadcast__scan');
        this.loader.appendChild(document.createElement('div'));
        this.scroll.body(true).appendChild(this.loader);
      }
    }, {
      key: "error",
      value: function error() {
        var empty = new Prisma.Empty();
        this.scroll.body(true).appendChild(empty.render(true));
      }
    }, {
      key: "appendLine",
      value: function appendLine(data, params) {
        var _this4 = this;
        var line = new Line(data, params);
        line.onBack = this.onBack.bind(this);
        line.onUp = this.up.bind(this);
        line.onDown = this.down.bind(this);
        line.onToggle = function () {
          _this4.active = _this4.items.indexOf(line);
          _this4.scroll.update(line.render(), true);
        };
        line.create();
        this.scroll.body(true).appendChild(line.render());
        this.items.push(line);
      }
    }, {
      key: "down",
      value: function down() {
        this.active++;
        if (this.active <= this.items.length - 1) this.items[this.active].toggle();
        this.active = Math.min(this.items.length - 1, this.active);
      }
    }, {
      key: "up",
      value: function up() {
        this.active--;
        if (this.active >= 0) this.items[this.active].toggle();
        this.active = Math.max(0, this.active);
      }
    }, {
      key: "render",
      value: function render() {
        return this.html;
      }
    }, {
      key: "toggle",
      value: function toggle() {
        var _this5 = this;
        Controller.add('extensions', {
          toggle: function toggle() {
            Controller.collectionSet(_this5.html);
            if (_this5.items.length) {
              _this5.items[_this5.active].toggle();
            }
          },
          back: this.onBack
        });
        Controller.toggle('extensions');
      }
    }, {
      key: "destroy",
      value: function destroy() {
        Arrays.destroy(this.items);
        this.scroll.destroy();
        this.html.remove();
      }
    }]);
  }();

  var extensions;
  var listener$4 = start$8();
  function init$u() {
    ParentalControl.add('extensions', {
      title: 'settings_main_plugins'
    });
  }
  function show$5() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    if (extensions) return;
    var controller = Controller.enabled().name;
    extensions = new Main(params);
    extensions.onBack = function () {
      extensions.destroy();
      extensions = null;
      document.body.toggleClass('ambience--enable', false);
      Controller.toggle(controller);
      if (params.onClose) params.onClose();
      if (!params.store) listener$4.send('close', {});
    };
    extensions.create();
    document.body.toggleClass('ambience--enable', true);
    document.body.appendChild(extensions.render(true));
    extensions.toggle();
    if (!params.store) listener$4.send('open', {
      extensions: extensions
    });
  }
  function render$4(js) {
    var html = extensions ? extensions.render() : document.createElement('div');
    return js ? html : $(html);
  }
  var Extensions = {
    init: init$u,
    listener: listener$4,
    show: show$5,
    render: render$4
  };

  var _created = [];
  var _loaded = [];
  var _network = new create$e();
  var _blacklist = [];
  var _awaits = [];
  var _noload = [];

  /**
   * Запуск
   */
  function init$t() {
    _loaded = Storage.get('plugins', '[]');
    Settings.main().render().find('[data-component="plugins"]').unbind('hover:enter').on('hover:enter', function () {
      ParentalControl.personal('extensions', function () {
        Extensions.show();
      }, false, true);
    });
  }
  function get$4() {
    return _loaded.map(function (a) {
      return a;
    });
  }
  function modify() {
    var list = Storage.get('plugins', '[]');
    list = list.map(function (a) {
      return typeof a == 'string' ? {
        url: a,
        status: 1
      } : a;
    });
    list.forEach(function (a) {
      a.url = (a.url + '').replace('cub.watch', object$2.cub_domain);
    });
    console.log('Plugins', 'modify:', list);
    Storage.set('plugins', list);
  }
  function remove$1(plug) {
    Arrays.remove(_loaded, plug);
    console.log('Plugins', 'remove:', plug, 'index:', _loaded.indexOf(plug), 'from:', _loaded);
    Storage.set('plugins', _loaded);
  }
  function add$6(plug) {
    _loaded.push(plug);
    console.log('Plugins', 'add:', plug);
    Storage.set('plugins', _loaded);
    push$2(plug);
  }
  function push$2(plug) {
    var find = _created.find(function (a) {
      return a == plug.url;
    });
    if (!find && plug.status == 1) {
      if (_blacklist.find(function (a) {
        return plug.url.indexOf(a) >= 0;
      })) return Noty$1.show(Lang.translate('torrent_error_connect'), {
        time: 8000
      });
      _created.push(plug.url);
      console.log('Plugins', 'push:', plug);
      Utils$2.putScriptAsync([addPluginParams(plug.url)], false, function () {
        Noty$1.show(Lang.translate('plugins_check_fail'), {
          time: 8000
        });
      }, function () {
        updatePluginDB(plug.url, addPluginParams(plug.url));
        Noty$1.show(Lang.translate('plugins_add_success'));
      }, false);
    }
  }
  function save$1() {
    console.log('Plugins', 'save:', _loaded);
    Storage.set('plugins', _loaded);
  }
  function updatePluginDB(name, url) {
    //if(Account.hasPremium()){
    var cu = Utils$2.addUrlComponent(url, 'cache=true');
    _network["native"](cu, function (str) {
      Cache.rewriteData('plugins', name, str).then(function () {
        console.log('Plugins', 'update plugin cache:', name);
      })["catch"](function (e) {
        console.log('Plugins', 'add to cache fail:', name, typeof e == 'string' ? e : e ? e.message : 'no details');
      });
    }, false, false, {
      dataType: 'text'
    });
    //}
  }
  function createPluginDB(name) {
    //if(Account.hasPremium()){
    Cache.getData('plugins', name).then(function (code) {
      if (code) {
        var s = document.createElement('script');
        s.type = 'text/javascript';
        try {
          s.appendChild(document.createTextNode(code));
          document.body.appendChild(s);
        } catch (e) {
          s.text = code;
          document.body.appendChild(s);
        }
        console.log('Plugins', 'add plugin from cache:', name);
      } else console.log('Plugins', 'no find in cache:', name);
    })["catch"](function (e) {
      console.log('Plugins', 'include from cache fail:', name, typeof e == 'string' ? e : e.message);
    });
    //}
  }
  function addPluginParams(url) {
    var encode = url;
    encode = encode.replace('cub.watch', object$2.cub_domain);
    encode = Utils$2.fixMirrorLink(encode);
    if (!/[0-9]{1,3}[.][0-9]{1,3}[.][0-9]{1,3}[.][0-9]{1,3}/.test(encode)) {
      encode = encode.replace(/\{storage_(\w+|\d+|_|-)\}/g, function (match, key) {
        return encodeURIComponent(Base64.encode(localStorage.getItem(key) || ''));
      });
      var email = (localStorage.getItem('account_email') || '').trim();
      if (Account.logged() && email) encode = Utils$2.addUrlComponent(encode, 'email=' + encodeURIComponent(Base64.encode(email)));
      encode = Utils$2.addUrlComponent(encode, 'logged=' + encodeURIComponent(Account.logged() ? 'true' : 'false'));
      encode = Utils$2.addUrlComponent(encode, 'reset=' + Math.random());
      encode = Utils$2.addUrlComponent(encode, 'origin=' + encodeURIComponent(Base64.encode(window.location.host)));
      encode = Utils$2.rewriteIfHTTPS(encode);
    }
    return encode;
  }
  function loadBlackList(call) {
    if (window.prisma_settings.disable_features.blacklist) return call([]);
    var status = new status$2(2);
    status.onComplite = function (res) {
      call([].concat(res.cub, res.custom));
    };
    _network.silent(Utils$2.protocol() + object$2.pris_domain + '/api/plugins/blacklist', function (result) {
      var list = result.map(function (a) {
        return a.url;
      });
      Storage.set('plugins_blacklist', list);
      status.append('cub', list);
    }, function () {
      status.append('cub', Storage.get('plugins_blacklist', '[]'));
    }, false, {
      timeout: 1000 * 5
    });
    _network.silent('./plugins_black_list.json', function (list) {
      status.append('custom', list);
    }, function () {
      status.append('custom', []);
    }, false, {
      timeout: 1000 * 5
    });
  }

  /**
   * Загрузка всех плагинов
   */
  function load(call) {
    var errors = [];
    var original = {};
    var include = [];
    _awaits.forEach(function (url) {
      var encode = addPluginParams(url);
      include.push(encode);
      original[encode] = url;
    });
    Utils$2.putScriptAsync(include, function () {
      call();
      if (errors.length) {
        setTimeout(function () {
          Noty$1.show(Lang.translate('plugins_no_loaded') + ' (' + errors.join(', ') + ')', {
            time: 6000
          });
        }, 2000);
      }
    }, function (u) {
      if (u.indexOf('modification.js') == -1) {
        console.log('Plugins', 'error:', original[u]);
        errors.push(original[u]);
        _noload.push(original[u]);
        createPluginDB(original[u]);
      }
    }, function (u) {
      console.log('Plugins', 'include:', original[u]);
      console.log('Extensions', 'include:', original[u]);
      _created.push(original[u]);
      updatePluginDB(original[u], u);
    }, false);
  }
  function task$1(call) {
    modify();
    _loaded = Storage.get('plugins', '[]');
    loadBlackList(function (black_list) {
      Account.plugins(function (plugins) {
        var puts = window.prisma_settings.plugins_use ? plugins.filter(function (plugin) {
          return plugin.status;
        }).map(function (plugin) {
          return plugin.url;
        }).concat(Storage.get('plugins', '[]').filter(function (plugin) {
          return plugin.status;
        }).map(function (plugin) {
          return plugin.url;
        })) : [];
        puts = puts.filter(function (element, index) {
          return puts.indexOf(element) === index;
        });
        console.log('Plugins', 'load list:', puts);
        _blacklist = black_list;
        console.log('Plugins', 'black list:', black_list);
        black_list.forEach(function (b) {
          puts = puts.filter(function (p) {
            return p.toLowerCase().indexOf(b) == -1;
          });
        });
        console.log('Plugins', 'clear list:', puts);
        _awaits = puts;
        call();
      });
    });
  }
  function awaits() {
    return _awaits;
  }
  var Plugins = {
    init: init$t,
    load: load,
    remove: remove$1,
    loaded: function loaded() {
      return _created;
    },
    errors: function errors() {
      return _noload;
    },
    add: add$6,
    get: get$4,
    save: save$1,
    push: push$2,
    task: task$1,
    awaits: awaits
  };

  /**
   * Показать шаблон пустого экрана
   * @doc
   * @name class
   * @alias Empty
   * @param {Object} params заголовок и описание JSON({"title":"Заголовок","descr":"Описание"})
   * @returns {Object} объект класса
   */

  function Empty() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    Arrays.extend(params, {
      title: Lang.translate('empty_title_two'),
      descr: Lang.translate('empty_text_two'),
      noicon: false,
      width: 'large'
    });
    var html = Template.get('empty', params);
    html.addClass('empty--width-' + params.width);
    if (params.noicon) html.addClass('empty--noicon');
    this.start = function () {
      var _this = this;
      Controller.add('content', {
        toggle: function toggle() {
          var selects = html.find('.selector').filter(function () {
            return !$(this).hasClass('empty__img');
          });
          html.find('.empty__img').toggleClass('selector', selects.length > 0 ? false : true);
          Controller.collectionSet(html);
          Controller.collectionFocus(selects.length > 0 ? selects.eq(0)[0] : false, html);
        },
        left: function left() {
          if (_this.onLeft) _this.onLeft();else if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('head');
        },
        down: function down() {
          Navigator.move('down');
        },
        right: function right() {
          Navigator.move('right');
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.addInfoButton = function (add_information) {
      var footer = html.find('.empty__footer');
      if (!footer.length) {
        footer = $('<div class="empty__footer"></div>');
        html.append(footer);
      }
      var button = $('<div class="simple-button selector">' + Lang.translate('extensions_info') + '</div>');
      button.on('hover:enter', function () {
        var controller = Controller.enabled().name;
        var html = $('<div></div>');
        var line = function line(name, value) {
          html.append($("<div class=\"console__line selector\"><span class=\"console__time\">".concat(name, "</span> - <span>").concat(value, "</span></div>")));
        };
        line('Protocol', window.location.protocol);
        line('Host', window.location.host);
        line('Platform', Platform.get());
        line('Safe connection', Storage.field('protocol') == 'https' ? 'Yes' : 'No');
        line('Connection', Utils$2.protocol());
        // line('TMDB Proxy', Storage.field('tmdb_proxy') ? 'Yes' : 'No')
        // line('TMDB Proxy plugin',  Plugins.loaded().find(u=>/\/plugin\/tmdb-proxy/.test(u)) ? 'Yes' : 'No')
        line('Premium', Account.hasPremium() ? 'Yes' : 'No');
        if (add_information) {
          add_information.forEach(function (info) {
            line(info[0], info[1]);
          });
        }
        Modal.open({
          title: Lang.translate('extensions_info'),
          html: html,
          size: 'medium',
          onBack: function onBack() {
            Modal.close();
            Controller.toggle(controller);
          }
        });
      });
      footer.append(button);
    };
    this.append = function (add) {
      html.append(add);
    };
    this.render = function (add) {
      if (typeof add == 'boolean') return html[0];
      if (add) html.append(add);
      return html;
    };
  }

  function create$8(data) {
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var html, scroll, last;
    var view = 6;
    var tv = Platform.screen('tv');
    var active = 0;
    this.create = function () {
      var _this = this;
      html = Template.get('items_line', {
        title: params.season.name || Lang.translate('full_series_release')
      });
      scroll = new create$f({
        horizontal: true
      });
      scroll.render().find('.scroll__body').addClass('full-episodes');
      scroll.onWheel = function (step) {
        if (!Controller.own(_this)) _this.toggle();
        Controller.enabled().controller[step > 0 ? 'right' : 'left']();
      };
      scroll.onScroll = function (step) {
        data.slice(active, tv ? active + view : data.length).filter(function (e) {
          return !e.ready;
        }).forEach(function (elem) {
          Controller.collectionAppend(_this.append(elem));
        });
        Layer.visible(scroll.render(true));
      };
      html.find('.items-line__body').append(scroll.render());
      data.reverse();
      data.sort(function (a, b) {
        return a.episode_number - b.episode_number;
      });
      data.forEach(function (episode, num) {
        return episode.episode_number = episode.episode_number || num + 1;
      });
      var wath_all = Template.get('full_episode', {
        name: Lang.translate('more')
      });
      wath_all.addClass('full-episode--wath-all');
      wath_all.on('hover:enter', function () {
        Activity$1.push({
          url: '',
          title: Lang.translate('title_episodes'),
          component: 'episodes',
          movie: params.movie,
          page: 1
        });
      });
      scroll.append(wath_all);
      data.slice(0, view).forEach(this.append.bind(this));
    };
    this.append = function (element) {
      element.ready = true;
      element.date = element.air_date ? Utils$2.parseTime(element.air_date).full : '----';
      element.num = element.episode_number;
      var episode = Template.get('full_episode', element);
      var hash = Utils$2.hash([element.season_number, element.season_number > 10 ? ':' : '', element.episode_number, params.title].join(''));
      var view = Timeline$1.view(hash);
      episode.append('<div class="full-episode__viewed">' + Template.get('icon_viewed', {}, true) + '</div>');
      episode.toggleClass('full-episode--viewed', Boolean(view.percent));
      if (element.plus) {
        episode.addClass('full-episode--next');
      }
      episode.on('visible', function () {
        var img = episode.find('img')[0];
        img.onerror = function (e) {
          img.src = './img/img_broken.svg';
        };
        img.onload = function () {
          episode.addClass('full-episode--loaded');
        };
        if (element.still_path) img.src = Api.img(element.still_path, 'w300');else if (element.img) img.src = element.img;else img.src = './img/img_broken.svg';
      });
      episode.on('hover:focus', function (e) {
        last = e.target;
        active = data.indexOf(element);
        scroll.update($(e.target), true);
      }).on('hover:enter', function () {
        if (element.overview) {
          Modal.open({
            title: element.name,
            html: $('<div class="about">' + element.overview + '</div>'),
            onBack: function onBack() {
              Modal.close();
              Controller.toggle('content');
            },
            onSelect: function onSelect() {
              Modal.close();
              Controller.toggle('content');
            }
          });
        }
      }).on('hover:long', function () {
        if (Boolean(view.percent)) {
          view.time = 0;
          view.percent = 0;
        } else {
          view.time = view.duration * 0.95;
          view.percent = 95;
        }
        Timeline$1.update(view);
        episode.toggleClass('full-episode--viewed', Boolean(view.percent));
      });
      scroll.append(episode);
      return episode;
    };
    this.toggle = function () {
      var _this2 = this;
      Controller.add('full_episodes', {
        link: this,
        toggle: function toggle() {
          Controller.collectionSet(_this2.render());
          Controller.collectionFocus(last, _this2.render());
          if (_this2.onToggle) _this2.onToggle(_this2);
        },
        update: function update() {},
        right: function right() {
          Navigator.move('right');
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        down: this.onDown,
        up: this.onUp,
        gone: function gone() {},
        back: this.onBack
      });
      Controller.toggle('full_episodes');
    };
    this.render = function () {
      return html;
    };
  }

  var components$1 = {
    start: create$c,
    descr: create$b,
    persons: create$a,
    recomend: create$l,
    discuss: Discuss,
    comments: create$9,
    simular: create$l,
    episodes: create$8
  };
  function component$j(object) {
    var network = new create$e();
    var scroll = new create$f({
      mask: true,
      over: true,
      step: 400,
      scroll_by_item: false
    });
    var items = [];
    var create = [];
    var active = 0;
    var tv = Platform.screen('tv');
    var html = $('<div class="layer--wheight"><img class="full-start__background"></div>');
    var background_image;
    var loaded_data;
    var backdrop_timer = null;
    var backdrops = [];
    var current_backdrop_index = 0;
    var updateBackdrop = function updateBackdrop() {
      if (backdrops.length > 0) {
        var imgNew = new Image();
        imgNew.onload = function () {
          if (background_image) {
            // Убираем класс loaded для сброса анимации
            html.find('.full-start__background').removeClass('loaded');
            setTimeout(function () {
              background_image.src = imgNew.src;
              html.find('.full-start__background').addClass('loaded');
            }, 100);
          }
        };
        imgNew.src = Prisma.TMDB.image('t/p/w1280' + backdrops[current_backdrop_index]) + '?t=' + new Date().getTime();
        current_backdrop_index = (current_backdrop_index + 1) % backdrops.length;
      }
    };
    this.create = function () {
      var _this = this;
      this.activity.loader(true);
      if (object.source == 'tmdb' && Storage.field('source') == 'cub') {
        object.source = 'cub';
      }
      scroll.minus();
      scroll.onWheel = function (step) {
        if (step > 0) _this.down();else if (active > 0) _this.up();
      };
      scroll.onScroll = this.visible.bind(this);
      html.append(scroll.render());
      if (tv) {
        document.body.classList.add('tv-mode');
        // console.log('TV mode enabled')
      }
      Api.full(object, function (data) {
        if (data.movie && data.movie.blocked) {
          _this.empty({
            blocked: true
          });
        } else if (data.movie) {
          loaded_data = data;
          if (Activity$1.active().activity == _this.activity) Activity$1.active().card = data.movie;
          Prisma.Listener.send('full', {
            type: 'start',
            object: object,
            data: data
          });
          _this.build('start', data);
          if (data.discuss) _this.build('discuss', data);else if (data.comments && data.comments.length) _this.build('comments', data);
          _this.build('descr', data);
          if (data.episodes && data.episodes.episodes) {
            var today = new Date();
            var date = today.getFullYear() + '-' + (today.getMonth() + 1) + '-' + today.getDate();
            var time = Utils$2.parseToDate(date).getTime();
            var plus = false;
            var cameout = data.episodes.episodes.filter(function (a) {
              return a.air_date;
            }).filter(function (e) {
              var air = Utils$2.parseToDate(e.air_date).getTime();
              if (air <= time) return true;else if (!plus) {
                plus = true;
                e.plus = true;
                return true;
              }
              return false;
            });
            _this.build('episodes', cameout, {
              title: data.movie.original_title || data.movie.original_name,
              season: data.episodes,
              movie: data.movie
            });
          }
          if (data.persons && data.persons.crew && data.persons.crew.length) {
            var directors = data.persons.crew.filter(function (member) {
              return member.job === 'Director';
            });
            if (directors.length) {
              _this.build('persons', directors, {
                title: Lang.translate('title_producer')
              });
            }
          }
          if (data.persons && data.persons.cast && data.persons.cast.length) _this.build('persons', data.persons.cast);
          if (data.collection && data.collection.results.length) {
            data.collection.title = Lang.translate('title_collection');
            data.collection.noimage = true;
            data.collection.results.sort(function (a, b) {
              return new Date(a.release_date) - new Date(b.release_date);
            });
            _this.build('recomend', data.collection);
          }
          if (data.recomend && data.recomend.results.length) {
            data.recomend.title = Lang.translate('title_recomendations');
            data.recomend.noimage = true;
            _this.build('recomend', data.recomend);
          }
          if (data.simular && data.simular.results.length) {
            data.simular.title = Lang.translate('title_similar');
            data.simular.noimage = true;
            _this.build('simular', data.simular);
          }
          TimeTable.update(data.movie);
          _this.visible(0);
          Prisma.Listener.send('full', {
            type: 'complite',
            object: object,
            data: data
          });
          _this.loadBackground(data);
          _this.activity.toggle();
          _this.activity.loader(false);
          Layer.update(html);
        } else {
          _this.empty();
        }
      }, this.empty.bind(this));
      return this.render();
    };
    this.empty = function () {
      var er = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      var button;
      if (object.source == 'tmdb') {
        button = $('<div class="empty__footer"><div class="simple-button selector">' + Lang.translate('change_source_on_cub') + '</div></div>');
        button.find('.selector').on('hover:enter', function () {
          Storage.set('source', 'cub');
          Activity$1.replace({
            source: 'cub'
          });
        });
      }
      var text = {};
      if (Utils$2.dcma(object.method, object.id) || er.blocked) {
        text.title = Lang.translate('dmca_title');
        text.descr = Lang.translate('dmca_descr');
        text.noicon = true;
      }
      var empty = new Empty(text);
      if (button) empty.append(button);
      empty.addInfoButton([['Movie id', object.id], ['DCMA', Utils$2.dcma(object.method, object.id) ? 'Yes' : 'No']]);
      scroll.append(empty.render(true));
      this.start = empty.start;
      this.activity.loader(false);
      this.activity.toggle();
    };
    this.build = function (name, data, params) {
      var _this2 = this;
      create.push({
        created: false,
        create: function create() {
          var item = new components$1[name](data, _objectSpread2({
            object: object,
            nomore: true,
            parent: _this2
          }, params));
          item.mscroll = scroll;
          item.onDown = _this2.down.bind(_this2);
          item.onUp = _this2.up.bind(_this2);
          item.onBack = _this2.back.bind(_this2);
          item.onToggle = function () {
            active = items.indexOf(item);
          };
          item.onScroll = function (e, center) {
            scroll.update(e, center);
          };
          item.create();
          items.push(item);
          Prisma.Listener.send('full', {
            type: 'build',
            name: name,
            body: item.render()
          });
          scroll.append(item.render());
          return item.render();
        }
      });
    };
    this.visible = function (position) {
      create.slice(0, tv ? active + 3 : create.length).filter(function (e) {
        return !e.created;
      }).forEach(function (e) {
        e.created = true;
        e.create();
      });
      setTimeout(function () {
        Layer.visible(scroll.render(true));
      }, 100);
      this.toggleBackgroundOpacity(position);
    };
    this.down = function () {
      active++;
      active = Math.min(active, items.length - 1);
      if (items[active]) {
        items[active].toggle();
        scroll.update(items[active].render());
      }
    };
    this.up = function () {
      active--;
      if (active < 0) {
        active = 0;
        Controller.toggle('head');
      } else {
        items[active].toggle();
        scroll.update(items[active].render());
      }
    };
    this.toggleBackgroundOpacity = function (position) {
      if (background_image) {
        html.find('.full-start__background').toggleClass('dim', position > 0);
      }
    };
    this.back = function () {
      Activity$1.backward();
    };
    this.loadBackground = function (data) {
      var background = data.movie.backdrop_path ? Api.img(data.movie.backdrop_path, 'w1280') : data.movie.background_image ? data.movie.background_image : '';
      var loadBackdrops = function loadBackdrops() {
        if (data.movie && data.movie.id) {
          var method = data.movie.name ? 'tv' : 'movie';
          Api.sources.tmdb.get("".concat(method, "/").concat(data.movie.id, "/images"), {
            filter: {
              include_image_language: 'null'
            }
          }, function (result) {
            if (result && result.backdrops) {
              backdrops = result.backdrops.map(function (item) {
                return item.file_path;
              }).filter(Boolean);
              if (data.movie.backdrop_path && !backdrops.includes(data.movie.backdrop_path)) {
                backdrops.unshift(data.movie.backdrop_path);
              }
              if (backdrops.length > 1) {
                backdrop_timer = setInterval(updateBackdrop, 10000);
              }
            }
          }, function () {
            console.log('Failed to load backdrops');
          });
        }
      };
      if (window.innerWidth > 790 && background && !Storage.field('light_version')) {
        background_image = html.find('.full-start__background')[0] || {};
        background_image.onload = function (e) {
          html.find('.full-start__background').addClass('loaded');
        };
        background_image.src = background;
        loadBackdrops();
      } else html.find('.full-start__background').remove();
    };
    this.start = function () {
      if (items.length && Activity$1.active().activity == this.activity) {
        if (loaded_data) Activity$1.active().card = loaded_data.movie;
        items[0].toggleBackground();
      }
      Controller.add('content', {
        update: function update() {},
        toggle: function toggle() {
          if (items.length) {
            items[active].toggle();
          } else {
            Controller.collectionSet(scroll.render());
            Controller.collectionFocus(false, scroll.render());
          }
        },
        left: function left() {
          Controller.toggle('menu');
        },
        up: function up() {
          Controller.toggle('head');
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function () {
      return html;
    };
    this.stopBackdropTimer = function () {
      if (backdrop_timer) {
        clearInterval(backdrop_timer);
        backdrop_timer = null;
      }
    };
    this.startBackdropTimer = function () {
      if (backdrops.length > 1 && !backdrop_timer) {
        backdrop_timer = setInterval(updateBackdrop, 10000);
      }
    };
    this.destroy = function () {
      network.clear();
      Arrays.destroy(items);
      scroll.destroy();
      if (backdrop_timer) {
        clearInterval(backdrop_timer);
        backdrop_timer = null;
      }
      backdrops = [];
      html.remove();
      items = null;
      network = null;
      if (background_image) {
        background_image.onload = function () {};
        background_image.src = '';
        background_image = null;
      }
    };
  }

  function component$i(object) {
    var network = new create$e();
    var scroll = new create$f({
      mask: true,
      over: true,
      step: 250,
      end_ratio: 2
    });
    var items = [];
    var html = document.createElement('div');
    var body = document.createElement('div');
    var total_pages = 0;
    var last;
    var waitload;
    var active = 0;
    this.create = function () {};
    this.empty = function () {
      var button;
      if (object.source == 'tmdb') {
        button = $('<div class="empty__footer"><div class="simple-button selector">' + Lang.translate('change_source_on_cub') + '</div></div>');
        button.find('.selector').on('hover:enter', function () {
          Storage.set('source', 'cub');
          Activity$1.replace({
            source: 'cub'
          });
        });
      }
      var empty = new Empty();
      if (button) empty.append(button);
      empty.addInfoButton();
      html.appendChild(empty.render(true));
      this.start = empty.start;
      this.activity.loader(false);
      this.activity.toggle();
    };
    this.next = function () {
      var _this = this;
      if (waitload) return;
      if (object.page < total_pages) {
        waitload = true;
        object.page++;
        this.nextPageReuest(object, function (result) {
          _this.append(result, true);
          waitload = false;
          _this.limit();
        }, function () {
          waitload = false;
        });
      }
    };
    this.nextPageReuest = function (object, resolve, reject) {
      Api.list(object, resolve.bind(this), reject.bind(this));
    };
    this.append = function (data, append) {
      var _this2 = this;
      data.results.forEach(function (element) {
        var card = new Card(element, {
          object: object,
          card_category: typeof data.card_category == 'undefined' ? true : data.category,
          card_wide: data.wide,
          card_small: data.small,
          card_broad: data.broad,
          card_collection: data.collection,
          card_continue: data["continue"],
          card_events: data.card_events
        });
        card.create();
        card.onFocus = function (target, card_data) {
          last = target;
          active = items.indexOf(card);
          scroll.update(card.render(true));
          Background.change(Utils$2.cardImgBackground(card_data));
        };
        card.onTouch = function (target, card_data) {
          last = target;
          active = items.indexOf(card);
        };
        card.onEnter = function (target, card_data) {
          last = target;
          if (typeof card_data.gender !== 'undefined') {
            Activity$1.push({
              url: element.url,
              title: Lang.translate('title_person'),
              component: 'actor',
              id: element.id,
              source: element.source || object.source
            });
          } else {
            Activity$1.push({
              url: card_data.url,
              component: 'full',
              id: element.id,
              method: card_data.name ? 'tv' : 'movie',
              card: element,
              source: element.source || object.source
            });
          }
        };
        body.appendChild(card.render(true));
        items.push(card);
        if (_this2.cardRender) _this2.cardRender(object, element, card);
        if (append) Controller.collectionAppend(card.render(true));
      });
    };
    this.limit = function () {
      var limit_view = 12;
      var lilit_collection = 36;
      var colection = items.slice(Math.max(0, active - limit_view), active + limit_view);
      items.forEach(function (item) {
        if (colection.indexOf(item) == -1) {
          item.render(true).classList.remove('layer--render');
        } else {
          item.render(true).classList.add('layer--render');
        }
      });
      Navigator.setCollection(items.slice(Math.max(0, active - lilit_collection), active + lilit_collection).map(function (c) {
        return c.render(true);
      }));
      Navigator.focused(last);
      Layer.visible(scroll.render(true));
    };
    this.build = function (data) {
      var _this3 = this;
      if (data.results.length) {
        total_pages = data.total_pages;
        body.classList.add('category-full');
        scroll.minus();
        scroll.onEnd = this.next.bind(this);
        scroll.onScroll = this.limit.bind(this);
        scroll.onWheel = function (step) {
          if (!Controller.own(_this3)) _this3.start();
          if (step > 0) Navigator.move('down');else Navigator.move('up');
        };
        this.append(data);
        scroll.append(body);
        html.appendChild(scroll.render(true));
        this.limit();
        this.activity.loader(false);
        this.activity.toggle();
      } else {
        this.empty();
      }
    };
    this.start = function () {
      var _this4 = this;
      Controller.add('content', {
        link: this,
        toggle: function toggle() {
          if (_this4.activity.canRefresh()) return false;
          Controller.collectionSet(scroll.render(true));
          Controller.collectionFocus(last || false, scroll.render(true));
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        right: function right() {
          if (_this4.onRight) {
            if (Navigator.canmove('right')) Navigator.move('right');else _this4.onRight();
          } else Navigator.move('right');
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('head');
        },
        down: function down() {
          if (Navigator.canmove('down')) Navigator.move('down');
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.refresh = function () {
      this.activity.needRefresh();
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function (js) {
      return js ? html : $(html);
    };
    this.destroy = function () {
      network.clear();
      Arrays.destroy(items);
      scroll.destroy();
      html.remove();
      body.remove();
      items = [];
    };
  }

  function component$h(object) {
    var comp = new component$i(object);
    comp.create = function () {
      this.activity.loader(true);
      Api.list(object, this.build.bind(this), this.empty.bind(this));
    };
    return comp;
  }

  function component$g(object) {
    var comp = new Prisma.InteractionMain(object);
    comp.create = function () {
      this.activity.loader(true);
      var next = Api.category(object, this.build.bind(this), this.empty.bind(this));
      if (typeof next == 'function') this.next = next;
      return this.render();
    };
    return comp;
  }

  function create$7(data) {
    var html;
    var last;
    this.create = function () {
      html = Template.get('person_start', {
        name: data.name,
        birthday: Utils$2.parseTime(data.birthday).full,
        descr: Utils$2.substr(data.biography || '', 1020),
        img: data.profile_path ? Api.img(data.profile_path) : data.img || 'img/img_broken.svg',
        place: data.place_of_birth || ''
      });
      if (!data.birthday) html.find('.person-start__tag').remove();
      if (!data.place_of_birth) html.find('.person-start__place').remove();
      if (!data.biography) html.addClass('person-start--small');
    };
    this.toggle = function () {
      var _this = this;
      Controller.add('full_start', {
        toggle: function toggle() {
          Controller.collectionSet(_this.render());
          Controller.collectionFocus(last, _this.render());
        },
        update: function update() {},
        right: function right() {
          Navigator.move('right');
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        down: this.onDown,
        up: this.onUp,
        gone: function gone() {},
        back: this.onBack
      });
      Controller.toggle('full_start');
    };
    this.render = function () {
      return html;
    };
    this.destroy = function () {
      last = null;
      html.remove();
    };
  }

  var components = {
    start: create$7,
    line: create$l
  };
  function component$f(object) {
    var network = new create$e();
    var scroll = new create$f({
      mask: true,
      over: true,
      scroll_by_item: true
    });
    var items = [];
    var active = 0;
    var poster;
    this.create = function () {
      var _this = this;
      this.activity.loader(true);
      scroll.minus();
      Api.person(object, function (data) {
        _this.activity.loader(false);
        if (data.person) {
          poster = data.person.profile_path;
          _this.build('start', data.person);
          if (data.credits && data.credits.knownFor && data.credits.knownFor.length > 0) {
            for (var i = 0; i < data.credits.knownFor.length; i++) {
              var departament = data.credits.knownFor[i];
              var credits = departament.credits.map(function (a) {
                a.time_sort = new Date(a.first_air_date || a.release_date || '').getTime();
                return a;
              });
              credits.sort(function (a, b) {
                return b.time_sort - a.time_sort;
              });
              _this.build('line', {
                title: departament.name,
                noimage: true,
                results: credits
              });
            }
          }
          Layer.update(scroll.render(true));
          Layer.visible(scroll.render(true));
          _this.activity.toggle();
        } else {
          _this.empty();
        }
      }, this.empty.bind(this));
      return this.render();
    };
    this.empty = function () {
      var empty = new Empty();
      scroll.append(empty.render());
      this.start = empty.start;
      this.activity.loader(false);
      this.activity.toggle();
    };
    this.build = function (name, data) {
      var item = new components[name](data, {
        object: object,
        nomore: true
      });
      item.onDown = this.down;
      item.onUp = this.up;
      item.onBack = this.back;
      item.onToggle = function () {
        active = items.indexOf(item);
      };
      items.push(item);
      item.create();
      scroll.append(item.render());
    };
    this.down = function () {
      active++;
      active = Math.min(active, items.length - 1);
      scroll.update(items[active].render());
      items[active].toggle();
    };
    this.up = function () {
      active--;
      if (active < 0) {
        active = 0;
        Controller.toggle('head');
      } else {
        items[active].toggle();
        scroll.update(items[active].render());
      }
    };
    this.back = function () {
      Activity$1.backward();
    };
    this.start = function () {
      if (Activity$1.active().activity == this.activity && poster) Background.immediately(poster ? Api.img(poster, 'w200') : '');
      Controller.add('content', {
        toggle: function toggle() {
          if (items.length) {
            items[active].toggle();
          } else {
            Controller.collectionSet(scroll.render());
            Controller.collectionFocus(false, scroll.render());
          }
        },
        update: function update() {},
        left: function left() {
          Controller.toggle('menu');
        },
        up: function up() {
          Controller.toggle('head');
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function () {
      return scroll.render();
    };
    this.destroy = function () {
      network.clear();
      Arrays.destroy(items);
      scroll.destroy();
      items = [];
    };
  }

  function component$e(object) {
    var comp = new component$i(object);
    comp.create = function () {
      this.activity.loader(true);
      Api.favorite(object, this.build.bind(this), this.empty.bind(this));
    };
    comp.nextPageReuest = function (object, resolve, reject) {
      Api.favorite(object, resolve.bind(this), reject.bind(this));
    };

    // Перегружаем метод build, чтобы добавить информацию о родителе в данные карточек
    var originalBuild = comp.build;
    comp.build = function (data) {
      // Для каждой карточки добавляем информацию, что она от компонента favorite
      if (data && data.results) {
        data.results.forEach(function (item) {
          if (item) {
            item.from_favorite = true;
            item.from_component = 'favorite';
            item.card_style = 'standard';
          }
        });
      } else if (Array.isArray(data)) {
        // Если это массив линий
        data.forEach(function (line) {
          if (line && line.results) {
            line.results.forEach(function (item) {
              if (item) {
                item.from_favorite = true;
                item.from_component = 'favorite';
                item.card_style = 'standard';
              }
            });
          }
        });
      }

      // Вызываем оригинальный метод
      return originalBuild.call(this, data);
    };
    if (object.type == 'history') {
      comp.cardRender = function (object, data, card) {
        card.onMenuShow = function (menu_list) {
          menu_list.push({
            title: Lang.translate('menu_history'),
            separator: true
          });
          menu_list.push({
            title: Lang.translate('fav_clear_title'),
            subtitle: Lang.translate('fav_clear_descr'),
            all: true
          });
          menu_list.push({
            title: Lang.translate('fav_clear_label_title'),
            subtitle: Lang.translate('fav_clear_label_descr'),
            label: true
          });
          menu_list.push({
            title: Lang.translate('fav_clear_time_title'),
            subtitle: Lang.translate('fav_clear_time_descr'),
            timecode: true
          });
        };
        card.onMenuSelect = function (action) {
          if (action.all) {
            Favorite.clear('history');
            Prisma.Activity.replace({});
          } else if (action.label) {
            Storage.set('online_view', []);
            Storage.set('torrents_view', []);
            Noty$1.show(Lang.translate('fav_label_cleared'));
          } else if (action.timecode) {
            Storage.set('file_view', {});
            Noty$1.show(Lang.translate('fav_time_cleared'));
          }
        };
      };
    }
    return comp;
  }

  function create$6() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var search = Template.get('search_box');
    var input = '';
    function destroy() {
      $('body').toggleClass('ambience--enable', false);
      keyboard.destroy();
      search.remove();
      search = null;
    }
    function back() {
      destroy();
      params.onBack();
    }
    function enter() {
      destroy();
      params.onSearch(input);
    }
    function change(text) {
      input = text;
      if (input) {
        search.find('.search-box__input').toggleClass('filled', true).html(input.replace(/\s/g, '&nbsp;'));
      } else {
        search.find('.search-box__input').toggleClass('filled', false).text(Lang.translate('search_input') + '...');
      }
    }
    if (Storage.field('keyboard_type') !== 'prisma') search.find('.search-box__input').hide();
    $('body').append(search);
    $('body').toggleClass('ambience--enable', true);
    var keyboard = new create$2({
      layout: 'clarify'
    });
    keyboard.create();
    keyboard.listener.follow('change', function (event) {
      change(event.value);
    });
    keyboard.listener.follow('focus', function (event) {
      search.toggleClass('search-box--focus', true);
    });
    keyboard.listener.follow('blur', function (event) {
      search.toggleClass('search-box--focus', false);
    });
    keyboard.listener.follow('back', back);
    keyboard.listener.follow('enter', enter);
    keyboard.value(params.input);
    change(params.input);
    keyboard.toggle();
  }

  function create$5() {
    var _this2 = this;
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var line = Template.get('filter').addClass('torrent-filter');
    var empty = $('<div class="empty__footer"><div class="simple-button selector">' + Lang.translate('filter_clarify_two') + '</div></div>');
    var data = {
      sort: [],
      filter: []
    };
    var similars = [];
    var buttons_scroll = new create$f({
      horizontal: true,
      nopadding: true
    });
    if (typeof params.search == 'string') line.find('.filter--search div').text(Utils$2.shortText(params.search, 20)).removeClass('hide');
    function selectSearch() {
      var _this = this;
      var search = [];
      var year = ((params.movie ? params.movie.first_air_date || params.movie.release_date : '0000') + '').slice(0, 4);
      var earlier = Storage.get('user_clarifys', '{}')[params.movie.id];
      search.push({
        title: Lang.translate('filter_set_name'),
        query: ''
      });
      if (earlier) {
        search.push({
          title: Lang.translate('search'),
          separator: true
        });
        earlier.map(function (a) {
          return a;
        }).reverse().forEach(function (ear) {
          search.push({
            title: ear,
            query: ear
          });
        });
      }
      if (params.movie.names && params.movie.names.length) {
        search.push({
          title: Lang.translate('filter_alt_names'),
          separator: true
        });
        params.movie.names.forEach(function (n) {
          search.push({
            title: n,
            query: n
          });
        });
      }
      if (params.movie.alternative_titles && params.movie.alternative_titles.titles && params.movie.alternative_titles.titles.length) {
        params.movie.alternative_titles.titles.forEach(function (a) {
          if (['us', Storage.field('language')].indexOf(a.iso_3166_1.toLowerCase()) >= 0) {
            if (!search.find(function (s) {
              return s.title == a.title;
            })) {
              search.push({
                title: a.title,
                query: a.title
              });
            }
          }
        });
      }
      search.push({
        title: Lang.translate('filter_combinations'),
        separator: true
      });
      if (similars.length) {
        similars.forEach(function (sim) {
          search.push({
            title: sim,
            query: sim
          });
        });
      } else {
        var combinations = [];
        if (params.search_one) {
          combinations.push(params.search_one);
          combinations.push(params.search_one + ' ' + year);
          if (params.search_two) {
            combinations.push(params.search_one + ' ' + params.search_two);
            combinations.push(params.search_one + ' ' + params.search_two + ' ' + year);
          }
        }
        if (params.search_two) {
          combinations.push(params.search_two);
          combinations.push(params.search_two + ' ' + year);
          if (params.search_one) {
            combinations.push(params.search_two + ' ' + params.search_one);
            combinations.push(params.search_two + ' ' + params.search_one + ' ' + year);
          }
        }
        combinations.forEach(function (word) {
          search.push({
            title: word,
            query: word
          });
        });
      }
      var selected;
      search.forEach(function (elem) {
        elem.selected = elem.query == params.search && !selected;
        if (elem.selected) selected = true;
      });
      Select.show({
        title: Lang.translate('filter_clarify'),
        items: search,
        onBack: this.onBack,
        onSelect: function onSelect(a) {
          if (!a.query) {
            new create$6({
              input: params.search,
              onSearch: function onSearch(new_query) {
                var earliers = Storage.get('user_clarifys', '{}');
                if (!earliers[params.movie.id]) earliers[params.movie.id] = [];
                if (earliers[params.movie.id].indexOf(new_query) == -1) {
                  earliers[params.movie.id].push(new_query);
                  Storage.set('user_clarifys', earliers);
                }
                _this.onSearch(new_query);
              },
              onBack: _this.onBack
            });
          } else {
            _this.onSearch(a.query);
          }
        }
      });
    }
    empty.on('hover:enter', selectSearch.bind(this));
    line.find('.filter--search').on('hover:enter', selectSearch.bind(this));
    line.find('.filter--sort').on('hover:enter', function () {
      _this2.show(Lang.translate('filter_sorted'), 'sort');
    });
    line.find('.filter--filter').on('hover:enter', function () {
      _this2.show(Lang.translate('filter_filtred'), 'filter');
    });
    buttons_scroll.append(line);
    this.addButtonBack = function () {
      if (params.movie && params.movie.id) {
        line.prepend(Template.get('explorer_button_back'));
        line.find('.filter--back').on('hover:enter', function () {
          if (Activity$1.all().length > 1) {
            Activity$1.back();
          } else {
            Activity$1.push({
              url: params.movie.url,
              component: 'full',
              id: params.movie.id,
              method: params.movie.name ? 'tv' : 'movie',
              card: params.movie,
              source: params.movie.source
            });
          }
        });
      }
    };
    this.show = function (title, type) {
      var _this3 = this;
      var where = data[type];
      Select.show({
        title: title,
        items: where,
        onBack: this.onBack,
        onSelect: function onSelect(a) {
          if (!a.noselect) _this3.selected(where, a);
          if (a.items) {
            Select.show({
              title: a.title,
              items: a.items,
              onBack: function onBack() {
                _this3.show(title, type);
              },
              onSelect: function onSelect(b) {
                if (!b) _this3.selected(a.items, b);
                _this3.onSelect(type, a, b);
                _this3.show(title, type);
              },
              onCheck: function onCheck(b) {
                _this3.onCheck(type, a, b);
              }
            });
          } else {
            _this3.onSelect(type, a);
          }
        }
      });
    };
    this.selected = function (items, a) {
      items.forEach(function (element) {
        element.selected = false;
      });
      a.selected = true;
    };
    this.render = function () {
      return buttons_scroll.render();
    };
    this.append = function (add) {
      html.find('.files__body').append(add);
    };
    this.empty = function () {
      return empty;
    };
    this.toggle = function () {
      line.find('.filter--sort').toggleClass('selector', data.sort.length ? true : false).toggleClass('hide', data.sort.length ? false : true);
      line.find('.filter--filter').toggleClass('selector', data.filter.length ? true : false).toggleClass('hide', data.filter.length ? false : true);
    };
    this.set = function (type, items) {
      data[type] = items;
      this.toggle();
    };
    this.get = function (type) {
      return data[type];
    };
    this.similar = function (sim) {
      similars = sim;
      return empty;
    };
    this.sort = function (items, by) {
      items.sort(function (c, b) {
        if (c[by] < b[by]) return 1;
        if (c[by] > b[by]) return -1;
        return 0;
      });
    };
    this.chosen = function (type, select) {
      line.find('.filter--' + type + ' > div').html(Utils$2.shortText(select.join(', '), 25)).toggleClass('hide', select.length ? false : true);
    };
    this.destroy = function () {
      empty.remove();
      line.remove();
      buttons_scroll.destroy();
      empty = null;
      line = null;
      data = null;
    };
  }

  var html$7 = $("<div class=\"helper\">\n    <div class=\"helper__body\"> \n        <div class=\"helper__ico\">\n            <svg fill=\"#000000\" version=\"1.1\" id=\"Capa_1\" xmlns=\"http://www.w3.org/2000/svg\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" \n                width=\"800px\" height=\"800px\" viewBox=\"0 0 416.979 416.979\"\n                xml:space=\"preserve\">\n            <g>\n                <path d=\"M356.004,61.156c-81.37-81.47-213.377-81.551-294.848-0.182c-81.47,81.371-81.552,213.379-0.181,294.85\n                    c81.369,81.47,213.378,81.551,294.849,0.181C437.293,274.636,437.375,142.626,356.004,61.156z M237.6,340.786\n                    c0,3.217-2.607,5.822-5.822,5.822h-46.576c-3.215,0-5.822-2.605-5.822-5.822V167.885c0-3.217,2.607-5.822,5.822-5.822h46.576\n                    c3.215,0,5.822,2.604,5.822,5.822V340.786z M208.49,137.901c-18.618,0-33.766-15.146-33.766-33.765\n                    c0-18.617,15.147-33.766,33.766-33.766c18.619,0,33.766,15.148,33.766,33.766C242.256,122.755,227.107,137.901,208.49,137.901z\"/>\n            </g>\n            </svg>\n        </div>\n        <div class=\"helper__text\"></div>\n    </div>\n</div>");
  var body = html$7.find('.helper__text'),
    time;
  var memorys = {};
  var remember = 1000 * 60 * 60 * 14;
  function show$4(name, text, elem) {
    if (!Storage.field('helper')) return;
    var help = memorys[name];
    if (!help) {
      help = {
        time: 0,
        count: 0
      };
      if (_typeof(memorys) !== 'object') memorys = {}; //хз, вылазит ошибка, что в переменную true нельзя записать значение, откуда там true хз

      memorys[name] = help;
    }
    if (help.time + remember < Date.now() && help.count < 3) {
      help.time = Date.now();
      help.count++;
      Storage.set('helper', memorys);
      clearTimeout(time);
      time = setTimeout(function () {
        html$7.removeClass('helper--visible');
      }, 10000);
      body.html(text);
      html$7.addClass('helper--visible');
      if (elem) {
        var blink = $('<div class="helper-blink"></div>');
        elem.append(blink);
        setTimeout(function () {
          blink.remove();
        }, 3000);
      }
    }
  }
  function init$s() {
    memorys = Storage.cache('helper', 300, {});
    Settings.listener.follow('open', function (e) {
      if (e.name == 'more') {
        e.body.find('.helper--start-again').on('hover:enter', function () {
          memorys = {};
          Storage.set('helper', memorys);
          Noty$1.show(Lang.translate('helper_cleared'));
        });
      }
    });
    $('body').append(html$7);
  }
  var Helper = {
    show: show$4,
    init: init$s
  };

  var SERVER = {};
  var timers = {};
  var callback$1;
  var callback_back;
  var autostart_timer;
  var autostart_progress;
  var formats = ['asf', 'wmv', 'divx', 'avi', 'mp4', 'm4v', 'mov', '3gp', '3g2', 'mkv', 'trp', 'tp', 'mts', 'mpg', 'mpeg', 'dat', 'vob', 'rm', 'rmvb', 'm2ts', 'ts'];
  var formats_individual = ['vob', 'm2ts'];
  function start$4(element, movie) {
    SERVER.object = element;
    if (movie) SERVER.movie = movie;
    if (Platform.is('android') && !Storage.field('internal_torrclient')) {
      Android.openTorrent(SERVER);
      if (movie && movie.id) Favorite.add('history', movie, 100);
      if (callback$1) callback$1();
    } else if (Torserver.url()) {
      loading();
      connect();
    } else install();
  }
  function open$2(hash, movie) {
    SERVER.hash = hash;
    if (movie) SERVER.movie = movie;
    if (Platform.is('android') && !Storage.field('internal_torrclient')) {
      Android.playHash(SERVER);
      if (callback$1) callback$1();
    } else if (Torserver.url()) {
      loading();
      files();
    } else install();
  }
  function loading() {
    Modal.open({
      title: '',
      html: Template.get('modal_loading'),
      size: 'large',
      mask: true,
      onBack: function onBack() {
        Modal.close();
        close$3();
      }
    });
  }
  function connect() {
    Torserver.connected(function () {
      hash();
    }, function (echo) {
      Torserver.error();
    });
  }
  function hash() {
    Torserver.hash({
      title: SERVER.object.title,
      link: SERVER.object.MagnetUri || SERVER.object.Link,
      poster: SERVER.object.poster,
      data: {
        prisma: true,
        movie: SERVER.movie
      }
    }, function (json) {
      SERVER.hash = json.hash;
      files();
    }, function (echo) {
      //Torserver.error()

      var jac = Storage.field('parser_torrent_type') == 'jackett';
      var tpl = Template.get('torrent_nohash', {
        title: Lang.translate('title_error'),
        text: Lang.translate('torrent_parser_no_hash'),
        url: SERVER.object.MagnetUri || SERVER.object.Link,
        echo: echo
      });
      if (jac) tpl.find('.is--torlook').remove();else tpl.find('.is--jackett').remove();
      Modal.update(tpl);
    });
  }
  function files() {
    var repeat = 0;
    timers.files = setInterval(function () {
      repeat++;
      Torserver.files(SERVER.hash, function (json) {
        if (json.file_stats) {
          clearInterval(timers.files);
          show$3(json.file_stats);
        }
      });
      if (repeat >= 45) {
        Modal.update(Template.get('error', {
          title: Lang.translate('title_error'),
          text: Lang.translate('torrent_parser_timeout')
        }));
        Torserver.clear();
        Torserver.drop(SERVER.hash);
      }
    }, 2000);
  }
  function install() {
    Modal.open({
      title: '',
      html: Template.get('torrent_install', {}),
      size: 'large',
      onBack: function onBack() {
        Modal.close();
        Controller.toggle('content');
      }
    });
  }
  function show$3(files) {
    files.sort(function (a, b) {
      var an = a.path.replace(/\d+/g, function (m) {
        return m.length > 3 ? m : ('000' + m).substr(-4);
      });
      var bn = b.path.replace(/\d+/g, function (m) {
        return m.length > 3 ? m : ('000' + m).substr(-4);
      });
      return an.localeCompare(bn);
    });
    var active = Activity$1.active(),
      movie = active.movie || SERVER.movie || {};
    var plays = Torserver.clearFileName(files.filter(function (a) {
      var exe = a.path.split('.').pop().toLowerCase();
      return formats.indexOf(exe) >= 0;
    }));
    var seasons = [];
    plays.forEach(function (element) {
      var info = Torserver.parse({
        movie: movie,
        files: plays,
        filename: element.path_human,
        path: element.path
      });
      if (info.serial && info.season && seasons.indexOf(info.season) == -1) {
        seasons.push(info.season);
      }
    });
    if (seasons.length) {
      Api.seasons(movie, seasons, function (data) {
        list(plays, {
          movie: movie,
          seasons: data,
          files: files
        });
      });
    } else {
      list(plays, {
        movie: movie,
        files: files
      });
    }
  }
  function parseSubs(path, files) {
    var name = path.split('/').pop().split('.').slice(0, -1).join('.');
    var index = -1;
    var supportedFormats = subsrt.list();
    var subtitles = files.filter(function (a) {
      var _short = a.path.split('/').pop();
      var issub = supportedFormats.indexOf(a.path.split('.').pop().toLowerCase()) >= 0;
      return _short.indexOf(name) >= 0 && issub;
    }).map(function (a) {
      index++;
      var segments = a.path.split('/');
      segments.pop(); // drop filename
      var label = segments.slice(1).join(' - '); // drop initial folder and concat the rest

      return {
        label: label,
        url: Torserver.stream(a.path, SERVER.hash, a.id),
        index: index
      };
    });
    return subtitles.length ? subtitles : false;
  }
  function preload(data, run) {
    var need_preload = Torserver.ip() && data.url.indexOf(Torserver.ip()) > -1 && data.url.indexOf('&preload') > -1;
    if (need_preload) {
      var checkout;
      var network = new create$e();
      var first = true;
      Loading.start(function () {
        clearInterval(checkout);
        network.clear();
        Loading.stop();
      });
      var update = function update() {
        network.timeout(2000);
        network.silent(first ? data.url : data.url.replace('preload', 'stat'), function (res) {
          var pb = res.preloaded_bytes || 0,
            ps = res.preload_size || 0,
            sp = res.download_speed ? Utils$2.bytesToSize(res.download_speed * 8, true) : '0.0';
          var progress = Math.min(100, pb * 100 / ps);
          if (progress >= 95 || isNaN(progress)) {
            Loading.stop();
            clearInterval(checkout);
            run();
          } else {
            Loading.setText(Math.round(progress) + '%' + ' - ' + sp);
          }
        });
        first = false;
      };
      checkout = setInterval(update, 1000);
      update();
    } else run();
  }
  function list(items, params) {
    var html = $('<div class="torrent-files"></div>');
    var playlist = [];
    var scroll_to_element;
    var first_item;
    Prisma.Listener.send('torrent_file', {
      type: 'list_open',
      items: items
    });
    var folder = '';
    items.forEach(function (element, inx) {
      var exe = element.path.split('.').pop().toLowerCase();
      var info = Torserver.parse({
        movie: params.movie,
        files: items,
        filename: element.path_human,
        path: element.path,
        is_file: formats_individual.indexOf(exe) >= 0
      });
      var view = Timeline$1.view(info.hash);
      var item;
      Arrays.extend(element, {
        season: info.season,
        episode: info.episode,
        title: element.path_human,
        first_title: params.movie.name || params.movie.title,
        size: Utils$2.bytesToSize(element.length),
        url: Torserver.stream(element.path, SERVER.hash, element.id),
        torrent_hash: SERVER.hash,
        ffprobe: SERVER.object && SERVER.object.ffprobe ? SERVER.object.ffprobe : false,
        timeline: view,
        air_date: '--',
        img: './img/img_broken.svg',
        exe: exe
      });
      if (params.seasons) {
        var episodes = params.seasons[info.season];
        element.title = (info.episode ? info.episode + ' / ' : '') + element.path_human;
        element.fname = element.title;
        if (episodes) {
          var episode = episodes.episodes.filter(function (a) {
            return a.episode_number == info.episode;
          })[0];
          if (episode) {
            element.title = info.episode + ' / ' + episode.name;
            element.air_date = Utils$2.parseTime(episode.air_date).full;
            element.fname = episode.name;
            if (episode.still_path) element.img = Api.img(episode.still_path);else if (episode.img) element.img = episode.img;
          }
        }
        if (info.episode) {
          item = Template.get('torrent_file_serial', element);
          item.find('.torrent-serial__content').append(Timeline$1.render(view));
        } else {
          item = Template.get('torrent_file', element);
          item.append(Timeline$1.render(view));
        }
      } else if (items.length == 1 && params.movie && !params.movie.name) {
        element.fname = params.movie.title || element.title;
        if (params.movie.backdrop_path) element.img = Api.img(params.movie.backdrop_path);
        item = Template.get('torrent_file_serial', element);
        item.find('.torrent-serial__line').empty().text(params.movie.tagline || '');
        item.find('.torrent-serial__episode').remove();
        item.find('.torrent-serial__content').append(Timeline$1.render(view));
      } else {
        item = Template.get('torrent_file', element);
        item.append(Timeline$1.render(view));
        if (params.movie.title) element.title = params.movie.title;
      }
      item[0].visibility = 'hidden';
      if (view.percent > 0) scroll_to_element = item;
      element.subtitles = parseSubs(element.path, params.files);
      element.title = (element.fname || element.title).replace(/<[^>]*>?/gm, '');
      playlist.push(element);
      item.on('hover:enter', function () {
        stopAutostart();

        //если это андроид, но не андроид, то нефиг смотреть
        if (navigator.userAgent.toLowerCase().indexOf('android') >= 0 && !Platform.is('android')) return Platform.install('apk');
        if (params.movie.id) Favorite.add('history', params.movie, 100);
        if ((Platform.is('android') || Platform.is('apple_tv')) && playlist.length > 1) {
          var trim_playlist = [];
          playlist.forEach(function (elem) {
            trim_playlist.push({
              title: elem.title,
              url: elem.url,
              timeline: elem.timeline
            });
          });
          element.playlist = trim_playlist;
        }
        preload(element, function () {
          Player.play(element);
          Player.callback(function () {
            Controller.toggle('modal');
          });
          Player.playlist(playlist);
          Player.stat(element.url);
          if (callback$1) {
            callback$1();
            callback$1 = false;
          }
          Prisma.Listener.send('torrent_file', {
            type: 'onenter',
            element: element,
            item: item,
            items: items
          });
        });
      }).on('hover:long', function () {
        stopAutostart();
        var enabled = Controller.enabled().name;
        var menu = [{
          title: Lang.translate('time_reset'),
          timeclear: true
        }];
        if (Platform.is('webos')) {
          menu.push({
            title: Lang.translate('player_lauch') + ' - WebOS',
            player: 'webos'
          });
        }
        if (Platform.is('android')) {
          menu.push({
            title: Lang.translate('player_lauch') + ' - Android',
            player: 'android'
          });
        }
        menu.push({
          title: Lang.translate('player_lauch') + ' - Prisma',
          player: 'prisma'
        });
        if (!Platform.tv()) {
          menu.push({
            title: Lang.translate('copy_link'),
            link: true
          });
        }
        Prisma.Listener.send('torrent_file', {
          type: 'onlong',
          element: element,
          item: item,
          menu: menu,
          items: items
        });
        Select.show({
          title: Lang.translate('title_action'),
          items: menu,
          onBack: function onBack() {
            Controller.toggle(enabled);
          },
          onSelect: function onSelect(a) {
            if (a.timeclear) {
              view.percent = 0;
              view.time = 0;
              view.duration = 0;
              element.timeline = view;
              Timeline$1.update(view);
            }
            if (a.link) {
              Utils$2.copyTextToClipboard(element.url.replace('&preload', '&play'), function () {
                Noty$1.show(Lang.translate('copy_secuses'));
              }, function () {
                Noty$1.show(Lang.translate('copy_error'));
              });
            }
            Controller.toggle(enabled);
            if (a.player) {
              Player.runas(a.player);
              item.trigger('hover:enter');
            }
          }
        });
      }).on('hover:focus', function () {
        Prisma.Listener.send('torrent_file', {
          type: 'onfocus',
          element: element,
          item: item,
          items: items
        });
        Helper.show('torrents_view', Lang.translate('helper_torrents_view'), item);
      }).on('visible', function () {
        var img = item.find('img');
        img[0].onload = function () {
          img.addClass('loaded');
        };
        img[0].src = img.attr('data-src');
      });
      if (element.folder_name && element.folder_name !== folder) {
        html.append($('<div class="torrnet-folder-name' + (folder ? '' : ' selector') + '">' + element.folder_name + '</div>'));
        folder = element.folder_name;
      }
      html.append(item);
      if (!first_item) first_item = item;
      Prisma.Listener.send('torrent_file', {
        type: 'render',
        element: element,
        item: item,
        items: items
      });
    });
    if (items.length == 0) html = Template.get('error', {
      title: Lang.translate('empty_title'),
      text: Lang.translate('torrent_parser_nofiles')
    });else Modal.title(Lang.translate('title_files'));
    if (playlist.length == 1) autostart(first_item);
    Modal.update(html);
    if (scroll_to_element) Controller.collectionFocus(scroll_to_element, Modal.scroll().render());
  }
  function autostart(item) {
    var tim = Date.now();
    var div = $('<div class="torrent-serial__progress"></div>');
    autostart_timer = setInterval(function () {
      var dif = (Date.now() - tim) / 1000;
      div.css('height', Math.round(dif / 10 * 100) + '%');
      if (dif > 10) {
        stopAutostart();
        item.trigger('hover:enter');
      }
    }, 10);
    Keypad.listener.follow('keydown', listenKeydown);
    autostart_progress = div;
    item.prepend(div);
  }
  function listenKeydown() {
    stopAutostart();
    Keypad.listener.remove('keydown', listenKeydown);
  }
  function stopAutostart() {
    clearInterval(autostart_timer);
    if (autostart_progress) autostart_progress.remove();
    autostart_progress = null;
  }
  function opened(call) {
    callback$1 = call;
  }
  function back$4(call) {
    callback_back = call;
  }
  function close$3() {
    Torserver.drop(SERVER.hash);
    Torserver.clear();
    clearInterval(timers.files);
    if (callback_back) {
      callback_back();
    } else {
      Controller.toggle('content');
    }
    callback_back = false;
    SERVER = {};
    clearInterval(autostart_timer);
    Prisma.Listener.send('torrent_file', {
      type: 'list_close'
    });
  }
  var Torrent = {
    start: start$4,
    open: open$2,
    opened: opened,
    back: back$4
  };

  var url;
  var network$4 = new create$e();
  function init$r() {
    Storage.set('parser_torrent_type', Storage.get('parser_torrent_type') || 'jackett');
    var source = {
      title: Lang.translate('title_parser'),
      search: function search(params, oncomplite) {
        get$3({
          search: decodeURIComponent(params.query),
          other: true,
          from_search: true
        }, function (json) {
          json.title = Lang.translate('title_parser');
          json.results = json.Results.slice(0, 20);
          json.Results = null;
          json.results.forEach(function (element) {
            element.Title = Utils$2.shortText(element.Title, 110);
          });
          oncomplite(json.results.length ? [json] : []);
        }, function () {
          oncomplite([]);
        });
      },
      onCancel: function onCancel() {
        network$4.clear();
      },
      params: {
        lazy: true,
        align_left: true,
        isparser: true,
        card_events: {
          onMenu: function onMenu() {}
        }
      },
      onMore: function onMore(params, close) {
        close();
        Activity$1.push({
          url: '',
          title: Lang.translate('title_torrents'),
          component: 'torrents',
          search: params.query,
          from_search: true,
          noinfo: true,
          movie: {
            title: params.query,
            original_title: '',
            img: './img/img_broken.svg',
            genres: []
          },
          page: 1
        });
      },
      onSelect: function onSelect(params, close) {
        Torrent.start(params.element, {
          title: params.element.Title
        });
        Torrent.back(params.line.toggle.bind(params.line));
      }
    };
    function addSource() {
      var reg = Platform.is('android') ? true : Torserver.url();
      if (Storage.field('parse_in_search') && reg) Search.addSource(source);
    }
    Storage.listener.follow('change', function (e) {
      if (e.name == 'parse_in_search' || e.name == 'torrserver_url' || e.name == 'torrserver_url_two' || e.name == 'torrserver_use_link') {
        Search.removeSource(source);
        addSource();
      }
    });
    addSource();
  }
  function get$3() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    function complite(data) {
      oncomplite(data);
    }
    function error(e) {
      onerror(e);
    }
    if (Storage.field('parser_torrent_type') == 'jackett') {
      if (Storage.field('jackett_url')) {
        url = Utils$2.checkEmptyUrl(Storage.field('jackett_url'));
        var ignore = false; //params.from_search && !url.match(/\d+\.\d+\.\d+/g)

        if (ignore) error('');else {
          jackett(params, complite, error);
        }
      } else {
        error(Lang.translate('torrent_parser_set_link') + ': Jackett');
      }
    } else if (Storage.field('parser_torrent_type') == 'prowlarr') {
      if (Storage.field('prowlarr_url')) {
        url = Utils$2.checkEmptyUrl(Storage.field('prowlarr_url'));
        prowlarr(params, complite, error);
      } else {
        error(Lang.translate('torrent_parser_set_link') + ': Prowlarr');
      }
    } else if (Storage.field('parser_torrent_type') == 'torrserver') {
      if (Storage.field(Storage.field('torrserver_use_link') == 'two' ? 'torrserver_url_two' : 'torrserver_url')) {
        url = Utils$2.checkEmptyUrl(Storage.field(Storage.field('torrserver_use_link') == 'two' ? 'torrserver_url_two' : 'torrserver_url'));
        torrserver(params, complite, error);
      } else {
        error(Lang.translate('torrent_parser_set_link') + ': TorrServer');
      }
    }
  }
  function viewed(hash) {
    var view = Storage.cache('torrents_view', 5000, []);
    return view.indexOf(hash) > -1;
  }
  function jackett() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    network$4.timeout(1000 * Storage.field('parse_timeout'));
    var u = url + '/api/v2.0/indexers/' + (Storage.field('jackett_interview') == 'healthy' ? 'status:healthy' : 'all') + '/results?apikey=' + Storage.field('jackett_key') + '&Query=' + encodeURIComponent(params.search);
    if (!params.from_search) {
      var genres = params.movie.genres.map(function (a) {
        return a.name;
      });
      if (!params.clarification) {
        u = Utils$2.addUrlComponent(u, 'title=' + encodeURIComponent(params.movie.title));
        u = Utils$2.addUrlComponent(u, 'title_original=' + encodeURIComponent(params.movie.original_title));
      }
      u = Utils$2.addUrlComponent(u, 'year=' + encodeURIComponent(((params.movie.release_date || params.movie.first_air_date || '0000') + '').slice(0, 4)));
      u = Utils$2.addUrlComponent(u, 'is_serial=' + (params.movie.original_name ? '2' : params.other ? '0' : '1'));
      u = Utils$2.addUrlComponent(u, 'genres=' + encodeURIComponent(genres.join(',')));
      u = Utils$2.addUrlComponent(u, 'Category[]=' + (params.movie.number_of_seasons > 0 ? 5000 : 2000) + (params.movie.original_language == 'ja' ? ',5070' : ''));
    }
    network$4["native"](u, function (json) {
      if (json.Results) {
        json.Results.forEach(function (element) {
          element.PublisTime = Utils$2.strToTime(element.PublishDate);
          element.hash = Utils$2.hash(element.Title);
          element.viewed = viewed(element.hash);
          element.size = Utils$2.bytesToSize(element.Size);
        });
        oncomplite(json);
      } else onerror(Lang.translate('torrent_parser_no_responce') + ' (' + url + ') ' + Lang.translate('torrent_parser_settings_info'));
    }, function (a, c) {
      onerror(Lang.translate('torrent_parser_no_responce') + ' (' + url + ')' + Lang.translate('torrent_parser_settings_info'));
    });
  }

  // доки https://wiki.servarr.com/en/prowlarr/search#search-feed
  function prowlarr() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    var q = [];
    q.push({
      name: 'apikey',
      value: Storage.field('prowlarr_key')
    });
    q.push({
      name: 'query',
      value: params.search
    });
    if (!params.from_search) {
      var isSerial = !!params.movie.original_name;
      if (params.movie.number_of_seasons > 0) {
        q.push({
          name: 'categories',
          value: '5000'
        });
      }
      if (params.movie.original_language == 'ja') {
        q.push({
          name: 'categories',
          value: '5070'
        });
      }
      q.push({
        name: 'type',
        value: isSerial ? 'tvsearch' : 'search'
      });
    }
    var u = Utils$2.buildUrl(url, '/api/v1/search', q);
    network$4.timeout(1000 * Storage.field('parse_timeout'));
    network$4["native"](u, function (json) {
      if (Array.isArray(json)) {
        oncomplite({
          Results: json.filter(function (e) {
            return e.protocol === 'torrent';
          }).map(function (e) {
            var hash = Utils$2.hash(e.title);
            return {
              Title: e.title,
              Tracker: e.indexer,
              size: Utils$2.bytesToSize(e.size),
              PublishDate: Utils$2.strToTime(e.publishDate),
              Seeders: parseInt(e.seeders),
              Peers: parseInt(e.leechers),
              MagnetUri: e.downloadUrl,
              viewed: viewed(hash),
              hash: hash
            };
          })
        });
      } else {
        onerror(Lang.translate('torrent_parser_request_error') + ' (' + JSON.stringify(json) + ')');
      }
    }, function () {
      onerror(Lang.translate('torrent_parser_no_responce') + ' (' + url + ')' + Lang.translate('torrent_parser_settings_info'));
    });
  }
  function torrserver() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var oncomplite = arguments.length > 1 ? arguments[1] : undefined;
    var onerror = arguments.length > 2 ? arguments[2] : undefined;
    network$4.timeout(1000 * Storage.field('parse_timeout'));
    var u = Utils$2.buildUrl(url, '/search/', [{
      name: 'query',
      value: params.search
    }]);
    network$4["native"](u, function (json) {
      if (Array.isArray(json)) {
        oncomplite({
          Results: json.map(function (e) {
            var hash = Utils$2.hash(e.Title);
            return {
              Title: e.Title,
              Tracker: e.Tracker,
              size: e.Size,
              PublishDate: Utils$2.strToTime(e.CreateDate),
              Seeders: parseInt(e.Seed),
              Peers: parseInt(e.Peer),
              MagnetUri: e.Magnet,
              viewed: viewed(hash),
              CategoryDesc: e.Categories,
              bitrate: '-',
              hash: hash
            };
          })
        });
      } else onerror(Lang.translate('torrent_parser_request_error') + ' (' + JSON.stringify(json) + ')');
    }, function (a, c) {
      onerror(Lang.translate('torrent_parser_no_responce') + ' (' + url + ')');
    });
  }
  function clear$3() {
    network$4.clear();
  }
  var Parser = {
    init: init$r,
    get: get$3,
    jackett: jackett,
    clear: clear$3
  };

  function Explorer() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var html = Template.get('explorer', {});
    var scroll = new create$f({
      mask: true,
      over: true
    });
    var card = html.find('.explorer__card').clone();
    var backdrop_timer = null;
    var backdrops = [];
    var current_backdrop_index = 0;
    var qr_timer = null;
    html.find('.explorer__left').empty().append(scroll.render());
    scroll.append(card);
    scroll.minus();
    Arrays.extend(params, {
      movie: {
        title: '',
        original_title: '',
        img: './img/img_broken.svg',
        genres: []
      }
    });

    // Инициализируем таймер для QR-блока
    var initQrTimer = function initQrTimer() {
      var qrBlock = html.find('.explorer-card__qr-block--top');
      if (qrBlock.length && !params.noqr && !params.noinfo) {
        // Активируем таймер
        setTimeout(function () {
          qrBlock.addClass('timer-active');
        }, 300);

        // Запускаем таймер на скрытие
        qr_timer = setTimeout(function () {
          qrBlock.addClass('hide-animation');

          // Полностью удаляем элемент после окончания анимации
          setTimeout(function () {
            if (qrBlock.length && qrBlock.parent().length) {
              qrBlock.remove();
              // Принудительно обновляем layout
              html.find('.explorer__files-head').trigger('resize');
            }
          }, 500);
        }, 10000);

        // Добавляем возможность восстановить блок при наведении мыши
        qrBlock.on('mouseenter', function () {
          if (qr_timer) {
            clearTimeout(qr_timer);
            qr_timer = null;
          }
          qrBlock.removeClass('hide-animation timer-active');
        }).on('mouseleave', function () {
          if (!qrBlock.hasClass('hide-animation')) {
            qrBlock.addClass('timer-active');
            qr_timer = setTimeout(function () {
              qrBlock.addClass('hide-animation');

              // Полностью удаляем элемент после окончания анимации
              setTimeout(function () {
                if (qrBlock.length && qrBlock.parent().length) {
                  qrBlock.remove();
                  // Принудительно обновляем layout
                  html.find('.explorer__files-head').trigger('resize');
                }
              }, 500);
            }, 10000);
          }
        });
      }
    };
    if (params.noinfo || params.noqr) {
      html.find('.explorer-card__qr-block').remove();
    } else {
      // Запускаем таймер после рендеринга страницы
      setTimeout(initQrTimer, 1000);
    }
    if (params.movie.id) {
      html.find('.selector').on('hover:enter', function () {
        if (Activity$1.all().length > 1) {
          Activity$1.back();
        } else {
          Activity$1.push({
            url: params.movie.url,
            component: 'full',
            id: params.movie.id,
            method: params.movie.name ? 'tv' : 'movie',
            card: params.movie,
            source: params.movie.source
          });
        }
      });
    } else {
      html.find('.selector').removeClass('selector');
    }
    var year = ((params.movie.release_date || params.movie.first_air_date || '0000') + '').slice(0, 4);
    var pg = Api.sources.tmdb.parsePG(params.movie);
    var countries = Api.sources.tmdb.parseCountries(params.movie);
    var img = html.find('.explorer-card__head-img > img')[0];
    var rate = parseFloat((params.movie.vote_average || 0) + '');
    var title = params.movie.title || params.movie.name || '';
    var genres = (params.movie.genres || [{
      name: ''
    }]).slice(0, 3).map(function (a) {
      return Utils$2.capitalizeFirstLetter(a.name);
    });
    var loadBackdrops = function loadBackdrops() {
      if (params.movie && params.movie.id) {
        var method = params.movie.name ? 'tv' : 'movie';
        Api.sources.tmdb.get("".concat(method, "/").concat(params.movie.id, "/images"), {
          filter: {
            include_image_language: 'null'
          }
        }, function (result) {
          if (result && result.backdrops) {
            backdrops = result.backdrops.map(function (item) {
              return item.file_path;
            }).filter(Boolean);
            if (params.movie.backdrop_path && !backdrops.includes(params.movie.backdrop_path)) {
              backdrops.unshift(params.movie.backdrop_path);
            }

            // Перемешиваем массив для случайного порядка показа
            backdrops = backdrops.sort(function () {
              return Math.random() - 0.5;
            });

            // console.log('Available backdrops:', backdrops)

            if (backdrops.length > 1) {
              backdrop_timer = setInterval(updateBackdrop, 10000);
            }
          }
        }, function () {
          console.log('Failed to load backdrops');
        });
      }
    };
    var updateBackdrop = function updateBackdrop() {
      if (backdrops.length > 0) {
        var imgNew = new Image();
        imgNew.onload = function () {
          img.src = imgNew.src;
        };
        imgNew.src = Prisma.TMDB.image('t/p/w780' + backdrops[current_backdrop_index]) + '?t=' + new Date().getTime();
        current_backdrop_index = (current_backdrop_index + 1) % backdrops.length;
      } else if (params.movie.backdrop_path) {
        img.src = Prisma.TMDB.image('t/p/w780' + params.movie.backdrop_path);
      } else {
        img.src = params.movie.img;
      }
    };
    img.onerror = function (e) {
      img.src = './img/img_broken.svg';
    };

    // Первоначальная загрузка бэкдропа
    if (params.movie.backdrop_path) {
      img.src = Prisma.TMDB.image('t/p/w780' + params.movie.backdrop_path);
    } else {
      img.src = params.movie.img;
    }
    if (params.movie.id) {
      loadBackdrops();
    }
    html.find('.explorer-card__head-create').text(year + (countries.length ? ' - ' + countries[0] : '')).toggleClass('hide', Boolean(year == '0000'));
    html.find('.explorer-card__head-rate').toggleClass('hide', !Boolean(rate > 0)).find('span').text(rate.toFixed(1));
    html.find('.explorer-card__title').text(title).toggleClass('small', Boolean(title.length > 50));
    html.find('.explorer-card__descr').text(params.movie.overview || '');
    html.find('.explorer-card__genres').text(genres.join(', '));
    if (pg) html.find('.explorer-card__head-body').append('<div class="explorer-card__head-age">' + pg + '</div>');
    if (params.noinfo) html.addClass('explorer--fullsize');
    this.appendFiles = function (element) {
      html.find('.explorer__files-body').append(element);
    };
    this.appendHead = function (element) {
      html.find('.explorer__files-head').append(element);
    };
    this.render = function () {
      return html;
    };
    this.clearFiles = function () {
      html.find('.explorer__files-body').empty();
    };
    this.clearHead = function () {
      html.find('.explorer__files-head').empty();
    };
    this.toggle = function () {
      Controller.add('explorer', {
        toggle: function toggle() {
          Controller.collectionSet(scroll.render(true));
          Controller.collectionFocus(false, scroll.render(true));
        },
        left: function left() {
          Controller.toggle('menu');
        },
        up: function up() {
          if (scroll.position() == 0) Controller.toggle('head');else if (scroll.position() > -170) {
            scroll.wheel(scroll.position());
            Controller.toggle('explorer');
          } else scroll.wheel(-150);
        },
        right: function right() {
          Controller.toggle('content');
        },
        down: function down() {
          Controller.clear();
          scroll.wheel(150);
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('explorer');
    };
    this.destroy = function () {
      if (backdrop_timer) {
        clearInterval(backdrop_timer);
        backdrop_timer = null;
      }
      if (qr_timer) {
        clearTimeout(qr_timer);
        qr_timer = null;
      }
      backdrops = [];
      html.remove();
      img.onerror = function () {};
      img.src = '';
    };
  }

  function component$d(object) {
    var network = new create$e();
    var scroll = new create$f({
      mask: true,
      over: true
    });
    var files = new Explorer(object);
    var filter;
    var results = [];
    var filtred = [];
    var total_pages = 1;
    var last;
    var initialized;
    var filter_items = {
      quality: [Lang.translate('torrent_parser_any_one'), '4k', '1080p', '720p'],
      hdr: [Lang.translate('torrent_parser_no_choice'), Lang.translate('torrent_parser_yes'), Lang.translate('torrent_parser_no')],
      dv: [Lang.translate('torrent_parser_no_choice'), 'Dolby Vision', 'Dolby Vision TV', Lang.translate('torrent_parser_no')],
      imax: [Lang.translate('torrent_parser_no_choice'), Lang.translate('torrent_parser_yes'), Lang.translate('torrent_parser_no')],
      sub: [Lang.translate('torrent_parser_no_choice'), Lang.translate('torrent_parser_yes'), Lang.translate('torrent_parser_no')],
      voice: [],
      tracker: [Lang.translate('torrent_parser_any_two')],
      year: [Lang.translate('torrent_parser_any_two')],
      lang: [Lang.translate('torrent_parser_any_two')]
    };
    var filter_translate = {
      quality: Lang.translate('torrent_parser_quality'),
      hdr: 'HDR',
      dv: 'Dolby Vision',
      imax: 'IMAX',
      sub: Lang.translate('torrent_parser_subs'),
      voice: Lang.translate('torrent_parser_voice'),
      tracker: Lang.translate('torrent_parser_tracker'),
      year: Lang.translate('torrent_parser_year'),
      season: Lang.translate('torrent_parser_season'),
      lang: Lang.translate('title_language_short')
    };
    var filter_multiple = ['quality', 'voice', 'tracker', 'season', 'lang'];
    var sort_translate = {
      Seeders: Lang.translate('torrent_parser_sort_by_seeders'),
      Size: Lang.translate('torrent_parser_sort_by_size'),
      Title: Lang.translate('torrent_parser_sort_by_name'),
      Tracker: Lang.translate('torrent_parser_sort_by_tracker'),
      PublisTime: Lang.translate('torrent_parser_sort_by_date'),
      viewed: Lang.translate('torrent_parser_sort_by_viewed')
    };
    var i = 20,
      y = new Date().getFullYear();
    while (i--) {
      filter_items.year.push(y - (19 - i) + '');
    }
    var viewed = Storage.cache('torrents_view', 5000, []);
    var finded_seasons = [];
    var finded_seasons_full = [];
    var voices = ["Laci", "Kerob", "LE-Production", "Parovoz Production", "Paradox", "Omskbird", "LostFilm", "Причудики", "BaibaKo", "NewStudio", "AlexFilm", "FocusStudio", "Gears Media", "Jaskier", "ViruseProject", "Кубик в Кубе", "IdeaFilm", "Sunshine Studio", "Ozz.tv", "Hamster Studio", "Сербин", "To4ka", "Кравец", "Victory-Films", "SNK-TV", "GladiolusTV", "Jetvis Studio", "ApofysTeam", "ColdFilm", "Agatha Studdio", "KinoView", "Jimmy J.", "Shadow Dub Project", "Amedia", "Red Media", "Selena International", "Гоблин", "Universal Russia", "Kiitos", "Paramount Comedy", "Кураж-Бамбей", "Студия Пиратского Дубляжа", "Чадов", "Карповский", "RecentFilms", "Первый канал", "Alternative Production", "NEON Studio", "Колобок", "Дольский", "Синема УС", "Гаврилов", "Живов", "SDI Media", "Алексеев", "GreenРай Studio", "Михалев", "Есарев", "Визгунов", "Либергал", "Кузнецов", "Санаев", "ДТВ", "Дохалов", "Sunshine Studio", "Горчаков", "LevshaFilm", "CasStudio", "Володарский", "ColdFilm", "Шварко", "Карцев", "ETV+", "ВГТРК", "Gravi-TV", "1001cinema", "Zone Vision Studio", "Хихикающий доктор", "Murzilka", "turok1990", "FOX", "STEPonee", "Elrom", "Колобок", "HighHopes", "SoftBox", "GreenРай Studio", "NovaFilm", "Четыре в квадрате", "Greb&Creative", "MUZOBOZ", "ZM-Show", "RecentFilms", "Kerems13", "Hamster Studio", "New Dream Media", "Игмар", "Котов", "DeadLine Studio", "Jetvis Studio", "РенТВ", "Андрей Питерский", "Fox Life", "Рыбин", "Trdlo.studio", "Studio Victory Аsia", "Ozeon", "НТВ", "CP Digital", "AniLibria", "STEPonee", "Levelin", "FanStudio", "Cmert", "Интерфильм", "SunshineStudio", "Kulzvuk Studio", "Кашкин", "Вартан Дохалов", "Немахов", "Sedorelli", "СТС", "Яроцкий", "ICG", "ТВЦ", "Штейн", "AzOnFilm", "SorzTeam", "Гаевский", "Мудров", "Воробьев Сергей", "Студия Райдо", "DeeAFilm Studio", "zamez", "ViruseProject", "Иванов", "STEPonee", "РенТВ", "СВ-Дубль", "BadBajo", "Комедия ТВ", "Мастер Тэйп", "5-й канал СПб", "SDI Media", "Гланц", "Ох! Студия", "СВ-Кадр", "2x2", "Котова", "Позитив", "RusFilm", "Назаров", "XDUB Dorama", "Реальный перевод", "Kansai", "Sound-Group", "Николай Дроздов", "ZEE TV", "Ozz.tv", "MTV", "Сыендук", "GoldTeam", "Белов", "Dream Records", "Яковлев", "Vano", "SilverSnow", "Lord32x", "Filiza Studio", "Sony Sci-Fi", "Flux-Team", "NewStation", "XDUB Dorama", "Hamster Studio", "Dream Records", "DexterTV", "ColdFilm", "Good People", "RusFilm", "Levelin", "AniDUB", "SHIZA Project", "AniLibria.TV", "StudioBand", "AniMedia", "Kansai", "Onibaku", "JWA Project", "MC Entertainment", "Oni", "Jade", "Ancord", "ANIvoice", "Nika Lenina", "Bars MacAdams", "JAM", "Anika", "Berial", "Kobayashi", "Cuba77", "RiZZ_fisher", "OSLIKt", "Lupin", "Ryc99", "Nazel & Freya", "Trina_D", "JeFerSon", "Vulpes Vulpes", "Hamster", "KinoGolos", "Fox Crime", "Денис Шадинский", "AniFilm", "Rain Death", "LostFilm", "New Records", "Ancord", "Первый ТВЧ", "RG.Paravozik", "Profix Media", "Tycoon", "RealFake", "HDrezka", "Jimmy J.", "AlexFilm", "Discovery", "Viasat History", "AniMedia", "JAM", "HiWayGrope", "Ancord", "СВ-Дубль", "Tycoon", "SHIZA Project", "GREEN TEA", "STEPonee", "AlphaProject", "AnimeReactor", "Animegroup", "Shachiburi", "Persona99", "3df voice", "CactusTeam", "AniMaunt", "AniMedia", "AnimeReactor", "ShinkaDan", "Jaskier", "ShowJet", "RAIM", "RusFilm", "Victory-Films", "АрхиТеатр", "Project Web Mania", "ko136", "КураСгречей", "AMS", "СВ-Студия", "Храм Дорам ТВ", "TurkStar", "Медведев", "Рябов", "BukeDub", "FilmGate", "FilmsClub", "Sony Turbo", "ТВЦ", "AXN Sci-Fi", "NovaFilm", "DIVA Universal", "Курдов", "Неоклассика", "fiendover", "SomeWax", "Логинофф", "Cartoon Network", "Sony Turbo", "Loginoff", "CrezaStudio", "Воротилин", "LakeFilms", "Andy", "CP Digital", "XDUB Dorama + Колобок", "SDI Media", "KosharaSerials", "Екатеринбург Арт", "Julia Prosenuk", "АРК-ТВ Studio", "Т.О Друзей", "Anifilm", "Animedub", "AlphaProject", "Paramount Channel", "Кириллица", "AniPLague", "Видеосервис", "JoyStudio", "HighHopes", "TVShows", "AniFilm", "GostFilm", "West Video", "Формат AB", "Film Prestige", "West Video", "Екатеринбург Арт", "SovetRomantica", "РуФилмс", "AveBrasil", "Greb&Creative", "BTI Studios", "Пифагор", "Eurochannel", "NewStudio", "Кармен Видео", "Кошкин", "Кравец", "Rainbow World", "Воротилин", "Варус-Видео", "ClubFATE", "HiWay Grope", "Banyan Studio", "Mallorn Studio", "Asian Miracle Group", "Эй Би Видео", "AniStar", "Korean Craze", "LakeFilms", "Невафильм", "Hallmark", "Netflix", "Mallorn Studio", "Sony Channel", "East Dream", "Bonsai Studio", "Lucky Production", "Octopus", "TUMBLER Studio", "CrazyCatStudio", "Amber", "Train Studio", "Анастасия Гайдаржи", "Мадлен Дюваль", "Fox Life", "Sound Film", "Cowabunga Studio", "Фильмэкспорт", "VO-Production", "Sound Film", "Nickelodeon", "MixFilm", "GreenРай Studio", "Sound-Group", "Back Board Cinema", "Кирилл Сагач", "Bonsai Studio", "Stevie", "OnisFilms", "MaxMeister", "Syfy Universal", "TUMBLER Studio", "NewStation", "Neo-Sound", "Муравский", "IdeaFilm", "Рутилов", "Тимофеев", "Лагута", "Дьяконов", "Zone Vision Studio", "Onibaku", "AniMaunt", "Voice Project", "AniStar", "Пифагор", "VoicePower", "StudioFilms", "Elysium", "AniStar", "BeniAffet", "Selena International", "Paul Bunyan", "CoralMedia", "Кондор", "Игмар", "ViP Premiere", "FireDub", "AveTurk", "Sony Sci-Fi", "Янкелевич", "Киреев", "Багичев", "2x2", "Лексикон", "Нота", "Arisu", "Superbit", "AveDorama", "VideoBIZ", "Киномания", "DDV", "Alternative Production", "WestFilm", "Анастасия Гайдаржи + Андрей Юрченко", "Киномания", "Agatha Studdio", "GreenРай Studio", "VSI Moscow", "Horizon Studio", "Flarrow Films", "Amazing Dubbing", "Asian Miracle Group", "Видеопродакшн", "VGM Studio", "FocusX", "CBS Drama", "NovaFilm", "Novamedia", "East Dream", "Дасевич", "Анатолий Гусев", "Twister", "Морозов", "NewComers", "kubik&ko", "DeMon", "Анатолий Ашмарин", "Inter Video", "Пронин", "AMC", "Велес", "Volume-6 Studio", "Хоррор Мэйкер", "Ghostface", "Sephiroth", "Акира", "Деваль Видео", "RussianGuy27", "neko64", "Shaman", "Franek Monk", "Ворон", "Andre1288", "Selena International", "GalVid", "Другое кино", "Студия NLS", "Sam2007", "HaseRiLLoPaW", "Севастьянов", "D.I.M.", "Марченко", "Журавлев", "Н-Кино", "Lazer Video", "SesDizi", "Red Media", "Рудой", "Товбин", "Сергей Дидок", "Хуан Рохас", "binjak", "Карусель", "Lizard Cinema", "Варус-Видео", "Акцент", "RG.Paravozik", "Max Nabokov", "Barin101", "Васька Куролесов", "Фортуна-Фильм", "Amalgama", "AnyFilm", "Студия Райдо", "Козлов", "Zoomvision Studio", "Пифагор", "Urasiko", "VIP Serial HD", "НСТ", "Кинолюкс", "Project Web Mania", "Завгородний", "AB-Video", "Twister", "Universal Channel", "Wakanim", "SnowRecords", "С.Р.И", "Старый Бильбо", "Ozz.tv", "Mystery Film", "РенТВ", "Латышев", "Ващенко", "Лайко", "Сонотек", "Psychotronic", "DIVA Universal", "Gremlin Creative Studio", "Нева-1", "Максим Жолобов", "Good People", "Мобильное телевидение", "Lazer Video", "IVI", "DoubleRec", "Milvus", "RedDiamond Studio", "Astana TV", "Никитин", "КТК", "D2Lab", "НСТ", "DoubleRec", "Black Street Records", "Останкино", "TatamiFilm", "Видеобаза", "Crunchyroll", "Novamedia", "RedRussian1337", "КонтентикOFF", "Creative Sound", "HelloMickey Production", "Пирамида", "CLS Media", "Сонькин", "Мастер Тэйп", "Garsu Pasaulis", "DDV", "IdeaFilm", "Gold Cinema", "Че!", "Нарышкин", "Intra Communications", "OnisFilms", "XDUB Dorama", "Кипарис", "Королёв", "visanti-vasaer", "Готлиб", "Paramount Channel", "СТС", "диктор CDV", "Pazl Voice", "Прямостанов", "Zerzia", "НТВ", "MGM", "Дьяков", "Вольга", "АРК-ТВ Studio", "Дубровин", "МИР", "Netflix", "Jetix", "Кипарис", "RUSCICO", "Seoul Bay", "Филонов", "Махонько", "Строев", "Саня Белый", "Говинда Рага", "Ошурков", "Horror Maker", "Хлопушка", "Хрусталев", "Антонов Николай", "Золотухин", "АрхиАзия", "Попов", "Ultradox", "Мост-Видео", "Альтера Парс", "Огородников", "Твин", "Хабар", "AimaksaLTV", "ТНТ", "FDV", "3df voice", "The Kitchen Russia", "Ульпаней Эльром", "Видеоимпульс", "GoodTime Media", "Alezan", "True Dubbing Studio", "FDV", "Карусель", "Интер", "Contentica", "Мельница", "RealFake", "ИДДК", "Инфо-фильм", "Мьюзик-трейд", "Кирдин | Stalk", "ДиоНиК", "Стасюк", "TV1000", "Hallmark", "Тоникс Медиа", "Бессонов", "Gears Media", "Бахурани", "NewDub", "Cinema Prestige", "Набиев", "New Dream Media", "ТВ3", "Малиновский Сергей", "Superbit", "Кенс Матвей", "LE-Production", "Voiz", "Светла", "Cinema Prestige", "JAM", "LDV", "Videogram", "Индия ТВ", "RedDiamond Studio", "Герусов", "Элегия фильм", "Nastia", "Семыкина Юлия", "Электричка", "Штамп Дмитрий", "Пятница", "Oneinchnales", "Gravi-TV", "D2Lab", "Кинопремьера", "Бусов Глеб", "LE-Production", "1001cinema", "Amazing Dubbing", "Emslie", "1+1", "100 ТВ", "1001 cinema", "2+2", "2х2", "3df voice", "4u2ges", "5 канал", "A. Lazarchuk", "AAA-Sound", "AB-Video", "AdiSound", "ALEKS KV", "AlexFilm", "AlphaProject", "Alternative Production", "Amalgam", "AMC", "Amedia", "AMS", "Andy", "AniLibria", "AniMedia", "Animegroup", "Animereactor", "AnimeSpace Team", "Anistar", "AniUA", "AniWayt", "Anything-group", "AOS", "Arasi project", "ARRU Workshop", "AuraFilm", "AvePremier", "AveTurk", "AXN Sci-Fi", "Azazel", "AzOnFilm", "BadBajo", "BadCatStudio", "BBC Saint-Petersburg", "BD CEE", "Black Street Records", "Bonsai Studio", "Boльгa", "Brain Production", "BraveSound", "BTI Studios", "Bubble Dubbing Company", "Byako Records", "Cactus Team", "Cartoon Network", "CBS Drama", "CDV", "Cinema Prestige", "CinemaSET GROUP", "CinemaTone", "ColdFilm", "Contentica", "CP Digital", "CPIG", "Crunchyroll", "Cuba77", "D1", "D2lab", "datynet", "DDV", "DeadLine", "DeadSno", "DeMon", "den904", "Description", "DexterTV", "Dice", "Discovery", "DniproFilm", "DoubleRec", "DreamRecords", "DVD Classic", "East Dream", "Eladiel", "Elegia", "ELEKTRI4KA", "Elrom", "ELYSIUM", "Epic Team", "eraserhead", "erogg", "Eurochannel", "Extrabit", "F-TRAIN", "Family Fan Edition", "FDV", "FiliZa Studio", "Film Prestige", "FilmGate", "FilmsClub", "FireDub", "Flarrow Films", "Flux-Team", "FocusStudio", "FOX", "Fox Crime", "Fox Russia", "FoxLife", "Foxlight", "Franek Monk", "Gala Voices", "Garsu Pasaulis", "Gears Media", "Gemini", "General Film", "GetSmart", "Gezell Studio", "Gits", "GladiolusTV", "GoldTeam", "Good People", "Goodtime Media", "GoodVideo", "GostFilm", "Gramalant", "Gravi-TV", "GREEN TEA", "GreenРай Studio", "Gremlin Creative Studio", "Hallmark", "HamsterStudio", "HiWay Grope", "Horizon Studio", "hungry_inri", "ICG", "ICTV", "IdeaFilm", "IgVin &amp; Solncekleshka", "ImageArt", "INTERFILM", "Ivnet Cinema", "IНТЕР", "Jakob Bellmann", "JAM", "Janetta", "Jaskier", "JeFerSon", "jept", "JetiX", "Jetvis", "JimmyJ", "KANSAI", "KIHO", "kiitos", "KinoGolos", "Kinomania", "KosharaSerials", "Kолобок", "L0cDoG", "LakeFilms", "LDV", "LE-Production", "LeDoyen", "LevshaFilm", "LeXiKC", "Liga HQ", "Line", "Lisitz", "Lizard Cinema Trade", "Lord32x", "lord666", "LostFilm", "Lucky Production", "Macross", "madrid", "Mallorn Studio", "Marclail", "Max Nabokov", "MC Entertainment", "MCA", "McElroy", "Mega-Anime", "Melodic Voice Studio", "metalrus", "MGM", "MifSnaiper", "Mikail", "Milirina", "MiraiDub", "MOYGOLOS", "MrRose", "MTV", "Murzilka", "MUZOBOZ", "National Geographic", "NemFilm", "Neoclassica", "NEON Studio", "New Dream Media", "NewComers", "NewStation", "NewStudio", "Nice-Media", "Nickelodeon", "No-Future", "NovaFilm", "Novamedia", "Octopus", "Oghra-Brown", "OMSKBIRD", "Onibaku", "OnisFilms", "OpenDub", "OSLIKt", "Ozz TV", "PaDet", "Paramount Comedy", "Paramount Pictures", "Parovoz Production", "PashaUp", "Paul Bunyan", "Pazl Voice", "PCB Translate", "Persona99", "PiratVoice", "Postmodern", "Profix Media", "Project Web Mania", "Prolix", "QTV", "R5", "Radamant", "RainDeath", "RATTLEBOX", "RealFake", "Reanimedia", "Rebel Voice", "RecentFilms", "Red Media", "RedDiamond Studio", "RedDog", "RedRussian1337", "Renegade Team", "RG Paravozik", "RinGo", "RoxMarty", "Rumble", "RUSCICO", "RusFilm", "RussianGuy27", "Saint Sound", "SakuraNight", "Satkur", "Sawyer888", "Sci-Fi Russia", "SDI Media", "Selena", "seqw0", "SesDizi", "SGEV", "Shachiburi", "SHIZA", "ShowJet", "Sky Voices", "SkyeFilmTV", "SmallFilm", "SmallFilm", "SNK-TV", "SnowRecords", "SOFTBOX", "SOLDLUCK2", "Solod", "SomeWax", "Sony Channel", "Sony Turbo", "Sound Film", "SpaceDust", "ssvss", "st.Elrom", "STEPonee", "SunshineStudio", "Superbit", "Suzaku", "sweet couple", "TatamiFilm", "TB5", "TF-AniGroup", "The Kitchen Russia", "The Mike Rec.", "Timecraft", "To4kaTV", "Tori", "Total DVD", "TrainStudio", "Troy", "True Dubbing Studio", "TUMBLER Studio", "turok1990", "TV 1000", "TVShows", "Twister", "Twix", "Tycoon", "Ultradox", "Universal Russia", "VashMax2", "VendettA", "VHS", "VicTeam", "VictoryFilms", "Video-BIZ", "Videogram", "ViruseProject", "visanti-vasaer", "VIZ Media", "VO-production", "Voice Project Studio", "VoicePower", "VSI Moscow", "VulpesVulpes", "Wakanim", "Wayland team", "WestFilm", "WiaDUB", "WVoice", "XL Media", "XvidClub Studio", "zamez", "ZEE TV", "Zendos", "ZM-SHOW", "Zone Studio", "Zone Vision", "Агапов", "Акопян", "Алексеев", "Артемьев", "Багичев", "Бессонов", "Васильев", "Васильцев", "Гаврилов", "Герусов", "Готлиб", "Григорьев", "Дасевич", "Дольский", "Карповский", "Кашкин", "Киреев", "Клюквин", "Костюкевич", "Матвеев", "Михалев", "Мишин", "Мудров", "Пронин", "Савченко", "Смирнов", "Тимофеев", "Толстобров", "Чуев", "Шуваев", "Яковлев", "ААА-sound", "АБыГДе", "Акалит", "Акира", "Альянс", "Амальгама", "АМС", "АнВад", "Анубис", "Anubis", "Арк-ТВ", "АРК-ТВ Studio", "Б. Федоров", "Бибиков", "Бигыч", "Бойков", "Абдулов", "Белов", "Вихров", "Воронцов", "Горчаков", "Данилов", "Дохалов", "Котов", "Кошкин", "Назаров", "Попов", "Рукин", "Рутилов", "Варус Видео", "Васька Куролесов", "Ващенко С.", "Векшин", "Велес", "Весельчак", "Видеоимпульс", "Витя «говорун»", "Войсовер", "Вольга", "Ворон", "Воротилин", "Г. Либергал", "Г. Румянцев", "Гей Кино Гид", "ГКГ", "Глуховский", "Гризли", "Гундос", "Деньщиков", "Есарев", "Нурмухаметов", "Пучков", "Стасюк", "Шадинский", "Штамп", "sf@irat", "Держиморда", "Домашний", "ДТВ", "Дьяконов", "Е. Гаевский", "Е. Гранкин", "Е. Лурье", "Е. Рудой", "Е. Хрусталёв", "ЕА Синема", "Екатеринбург Арт", "Живаго", "Жучков", "З Ранку До Ночі", "Завгородний", "Зебуро", "Зереницын", "И. Еремеев", "И. Клушин", "И. Сафронов", "И. Степанов", "ИГМ", "Игмар", "ИДДК", "Имидж-Арт", "Инис", "Ирэн", "Ист-Вест", "К. Поздняков", "К. Филонов", "К9", "Карапетян", "Кармен Видео", "Карусель", "Квадрат Малевича", "Килька", "Кипарис", "Королев", "Котова", "Кравец", "Кубик в Кубе", "Кураж-Бамбей", "Л. Володарский", "Лазер Видео", "ЛанселаП", "Лапшин", "Лексикон", "Ленфильм", "Леша Прапорщик", "Лизард", "Люсьена", "Заугаров", "Иванов", "Иванова и П. Пашут", "Латышев", "Ошурков", "Чадов", "Яроцкий", "Максим Логинофф", "Малиновский", "Марченко", "Мастер Тэйп", "Махонько", "Машинский", "Медиа-Комплекс", "Мельница", "Мика Бондарик", "Миняев", "Мительман", "Мост Видео", "Мосфильм", "Муравский", "Мьюзик-трейд", "Н-Кино", "Н. Антонов", "Н. Дроздов", "Н. Золотухин", "Н.Севастьянов seva1988", "Набиев", "Наталья Гурзо", "НЕВА 1", "Невафильм", "НеЗупиняйПродакшн", "Неоклассика", "Несмертельное оружие", "НЛО-TV", "Новий", "Новый диск", "Новый Дубляж", "Новый Канал", "Нота", "НСТ", "НТВ", "НТН", "Оверлорд", "Огородников", "Омикрон", "Гланц", "Карцев", "Морозов", "Прямостанов", "Санаев", "Парадиз", "Пепелац", "Первый канал ОРТ", "Переводман", "Перец", "Петербургский дубляж", "Петербуржец", "Пирамида", "Пифагор", "Позитив-Мультимедиа", "Прайд Продакшн", "Премьер Видео", "Премьер Мультимедиа", "Причудики", "Р. Янкелевич", "Райдо", "Ракурс", "РенТВ", "Россия", "РТР", "Русский дубляж", "Русский Репортаж", "РуФилмс", "Рыжий пес", "С. Визгунов", "С. Дьяков", "С. Казаков", "С. Кузнецов", "С. Кузьмичёв", "С. Лебедев", "С. Макашов", "С. Рябов", "С. Щегольков", "С.Р.И.", "Сolumbia Service", "Самарский", "СВ Студия", "СВ-Дубль", "Светла", "Селена Интернешнл", "Синема Трейд", "Синема УС", "Синта Рурони", "Синхрон", "Советский", "Сокуров", "Солодухин", "Сонотек", "Сонькин", "Союз Видео", "Союзмультфильм", "СПД - Сладкая парочка", "Строев", "СТС", "Студии Суверенного Лепрозория", "Студия «Стартрек»", "KOleso", "Студия Горького", "Студия Колобок", "Студия Пиратского Дубляжа", "Студия Райдо", "Студия Трёх", "Гуртом", "Супербит", "Сыендук", "Так Треба Продакшн", "ТВ XXI век", "ТВ СПб", "ТВ-3", "ТВ6", "ТВИН", "ТВЦ", "ТВЧ 1", "ТНТ", "ТО Друзей", "Толмачев", "Точка Zрения", "Трамвай-фильм", "ТРК", "Уолт Дисней Компани", "Хихидок", "Хлопушка", "Цікава Ідея", "Четыре в квадрате", "Швецов", "Штамп", "Штейн", "Ю. Живов", "Ю. Немахов", "Ю. Сербин", "Ю. Товбин", "Я. Беллманн", "Red Head Sound", "UKR"];
    var filter_langs = [{
      title: '#{filter_lang_ru}',
      code: 'ru'
    }, {
      title: '#{filter_lang_uk}',
      code: 'uk'
    }, {
      title: '#{filter_lang_en}',
      code: 'en'
    }, {
      title: '#{filter_lang_be}',
      code: 'be'
    }, {
      title: '#{filter_lang_zh}',
      code: 'zh|cn'
    }, {
      title: '#{filter_lang_ja}',
      code: 'ja'
    }, {
      title: '#{filter_lang_ko}',
      code: 'ko'
    }, {
      title: '#{filter_lang_af}',
      code: 'af'
    }, {
      title: '#{filter_lang_sq}',
      code: 'sq'
    }, {
      title: '#{filter_lang_ar}',
      code: 'ar'
    }, {
      title: '#{filter_lang_az}',
      code: 'az'
    }, {
      title: '#{filter_lang_hy}',
      code: 'hy'
    }, {
      title: '#{filter_lang_ba}',
      code: 'ba'
    }, {
      title: '#{filter_lang_bg}',
      code: 'bg'
    }, {
      title: '#{filter_lang_bn}',
      code: 'bn'
    }, {
      title: '#{filter_lang_bs}',
      code: 'bs'
    }, {
      title: '#{filter_lang_ca}',
      code: 'ca'
    }, {
      title: '#{filter_lang_ce}',
      code: 'ce'
    }, {
      title: '#{filter_lang_cs}',
      code: 'cs'
    }, {
      title: '#{filter_lang_da}',
      code: 'da'
    }, {
      title: '#{filter_lang_ka}',
      code: 'ka'
    }, {
      title: '#{filter_lang_de}',
      code: 'de'
    }, {
      title: '#{filter_lang_el}',
      code: 'el'
    }, {
      title: '#{filter_lang_es}',
      code: 'es'
    }, {
      title: '#{filter_lang_et}',
      code: 'et'
    }, {
      title: '#{filter_lang_fa}',
      code: 'fa'
    }, {
      title: '#{filter_lang_fi}',
      code: 'fi'
    }, {
      title: '#{filter_lang_fr}',
      code: 'fr'
    }, {
      title: '#{filter_lang_ga}',
      code: 'ga'
    }, {
      title: '#{filter_lang_gl}',
      code: 'gl'
    }, {
      title: '#{filter_lang_gn}',
      code: 'gn'
    }, {
      title: '#{filter_lang_he}',
      code: 'he'
    }, {
      title: '#{filter_lang_hi}',
      code: 'hi'
    }, {
      title: '#{filter_lang_hr}',
      code: 'hr'
    }, {
      title: '#{filter_lang_hu}',
      code: 'hu'
    }, {
      title: '#{filter_lang_id}',
      code: 'id'
    }, {
      title: '#{filter_lang_is}',
      code: 'is'
    }, {
      title: '#{filter_lang_it}',
      code: 'it'
    }, {
      title: '#{filter_lang_kk}',
      code: 'kk'
    }, {
      title: '#{filter_lang_ks}',
      code: 'ks'
    }, {
      title: '#{filter_lang_ku}',
      code: 'ku'
    }, {
      title: '#{filter_lang_ky}',
      code: 'ky'
    }, {
      title: '#{filter_lang_lt}',
      code: 'lt'
    }, {
      title: '#{filter_lang_lv}',
      code: 'lv'
    }, {
      title: '#{filter_lang_mi}',
      code: 'mi'
    }, {
      title: '#{filter_lang_mk}',
      code: 'mk'
    }, {
      title: '#{filter_lang_mn}',
      code: 'mn'
    }, {
      title: '#{filter_lang_mo}',
      code: 'mo'
    }, {
      title: '#{filter_lang_mt}',
      code: 'mt'
    }, {
      title: '#{filter_lang_no}',
      code: 'no|nb|nn'
    }, {
      title: '#{filter_lang_ne}',
      code: 'ne'
    }, {
      title: '#{filter_lang_nl}',
      code: 'nl'
    }, {
      title: '#{filter_lang_pa}',
      code: 'pa'
    }, {
      title: '#{filter_lang_pl}',
      code: 'pl'
    }, {
      title: '#{filter_lang_ps}',
      code: 'ps'
    }, {
      title: '#{filter_lang_pt}',
      code: 'pt'
    }, {
      title: '#{filter_lang_ro}',
      code: 'ro'
    }, {
      title: '#{filter_lang_si}',
      code: 'si'
    }, {
      title: '#{filter_lang_sk}',
      code: 'sk'
    }, {
      title: '#{filter_lang_sl}',
      code: 'sl'
    }, {
      title: '#{filter_lang_sm}',
      code: 'sm'
    }, {
      title: '#{filter_lang_so}',
      code: 'so'
    }, {
      title: '#{filter_lang_sr}',
      code: 'sr'
    }, {
      title: '#{filter_lang_sv}',
      code: 'sv'
    }, {
      title: '#{filter_lang_sw}',
      code: 'sw'
    }, {
      title: '#{filter_lang_ta}',
      code: 'ta'
    }, {
      title: '#{filter_lang_tg}',
      code: 'tg'
    }, {
      title: '#{filter_lang_th}',
      code: 'th'
    }, {
      title: '#{filter_lang_tk}',
      code: 'tk'
    }, {
      title: '#{filter_lang_tr}',
      code: 'tr'
    }, {
      title: '#{filter_lang_tt}',
      code: 'tt'
    }, {
      title: '#{filter_lang_ur}',
      code: 'ur'
    }, {
      title: '#{filter_lang_uz}',
      code: 'uz'
    }, {
      title: '#{filter_lang_vi}',
      code: 'vi'
    }, {
      title: '#{filter_lang_yi}',
      code: 'yi'
    }];
    filter_items.lang = filter_items.lang.concat(filter_langs.map(function (a) {
      return Lang.translate(a.title);
    }));
    scroll.minus(files.render().find('.explorer__files-head'));
    scroll.body().addClass('torrent-list');
    this.create = function () {
      return this.render();
    };
    this.initialize = function () {
      var _this = this;
      this.activity.loader(true);
      if ((object.movie.original_language == 'ja' || object.movie.original_language == 'zh') && object.movie.genres.find(function (g) {
        return g.id == 16;
      }) && Storage.field('language') !== 'en') {
        network.silent(TMDB$1.api((object.movie.name ? 'tv' : 'movie') + '/' + object.movie.id + '?api_key=' + TMDB$1.key() + '&language=en'), function (result) {
          object.search_two = result.name || result.title;
          _this.parse();
        }, this.parse.bind(this));
      } else {
        this.parse();
      }
      scroll.onEnd = this.next.bind(this);
      return this.render();
    };
    this.parse = function () {
      var _this2 = this;
      filter = new create$5(object);
      Parser.get(object, function (data) {
        results = data;
        _this2.build();
        Layer.update(scroll.render(true));
        _this2.activity.loader(false);
        _this2.activity.toggle();
      }, function (text) {
        _this2.empty(Lang.translate('torrent_error_connect') + ': ' + text);
      });
      filter.onSearch = function (value) {
        Activity$1.replace({
          search: value,
          clarification: true
        });
      };
      filter.onBack = function () {
        _this2.start();
      };
      filter.render().find('.selector').on('hover:focus', function (e) {
      });
      filter.addButtonBack();
      files.appendHead(filter.render());
    };
    this.empty = function (descr) {
      var empty = new Empty({
        descr: descr
      });
      files.render().find('.explorer__files-head').addClass('hide');
      files.appendFiles(empty.render(filter.empty()));
      empty.render().find('.simple-button').on('hover:enter', function () {
        filter.render().find('.filter--search').trigger('hover:enter');
      });
      this.start = empty.start;
      this.activity.loader(false);
      this.activity.toggle();
    };
    this.listEmpty = function () {
      var em = Template.get('empty_filter');
      var bn = $('<div class="simple-button selector"><span>' + Lang.translate('filter_clarify') + '</span></div>');
      bn.on('hover:enter', function () {
        filter.render().find('.filter--filter').trigger('hover:enter');
      });
      em.find('.empty-filter__title').remove();
      em.find('.empty-filter__buttons').removeClass('hide').append(bn);
      scroll.append(em);
    };
    this.buildSorted = function () {
      var need = Storage.get('torrents_sort', 'Seeders');
      var select = [{
        title: Lang.translate('torrent_parser_sort_by_seeders'),
        sort: 'Seeders'
      }, {
        title: Lang.translate('torrent_parser_sort_by_size'),
        sort: 'Size'
      }, {
        title: Lang.translate('torrent_parser_sort_by_name'),
        sort: 'Title'
      }, {
        title: Lang.translate('torrent_parser_sort_by_tracker'),
        sort: 'Tracker'
      }, {
        title: Lang.translate('torrent_parser_sort_by_date'),
        sort: 'PublisTime'
      }, {
        title: Lang.translate('torrent_parser_sort_by_viewed'),
        sort: 'viewed'
      }];
      select.forEach(function (element) {
        if (element.sort == need) element.selected = true;
      });
      filter.sort(results.Results, need);
      this.sortWithPopular();
      filter.set('sort', select);
      this.selectedSort();
    };
    this.sortWithPopular = function () {
      var popular = [];
      var other = [];
      results.Results.forEach(function (a) {
        if (a.viewing_request) popular.push(a);else other.push(a);
      });
      popular.sort(function (a, b) {
        return b.viewing_average - a.viewing_average;
      });
      results.Results = popular.concat(other);
    };
    this.cardID = function () {
      return object.movie.id + ':' + (object.movie.number_of_seasons ? 'tv' : 'movie');
    };
    this.getFilterData = function () {
      var all = Storage.cache('torrents_filter_data', 500, {});
      var cid = this.cardID();
      return all[cid] || Storage.get('torrents_filter', '{}');
    };
    this.setFilterData = function (filter) {
      var all = Storage.cache('torrents_filter_data', 500, {});
      var cid = this.cardID();
      all[cid] = filter;
      Storage.set('torrents_filter_data', all);
      Storage.set('torrents_filter', filter);
    };
    this.buildFilterd = function () {
      var need = this.getFilterData();
      var select = [];
      var add = function add(type, title) {
        var items = filter_items[type];
        var subitems = [];
        var multiple = filter_multiple.indexOf(type) >= 0;
        var value = need[type];
        if (multiple) value = Arrays.toArray(value);
        items.forEach(function (name, i) {
          subitems.push({
            title: name,
            //selected: multiple ? i == 0 : value == i,
            checked: multiple && value.indexOf(name) >= 0,
            checkbox: multiple && i > 0,
            noselect: true,
            index: i
          });
        });
        select.push({
          title: title,
          subtitle: multiple ? value.length ? value.join(', ') : items[0] : typeof value == 'undefined' ? items[0] : items[value],
          items: subitems,
          noselect: true,
          stype: type
        });
      };
      filter_items.voice = [Lang.translate('torrent_parser_any_two'), Lang.translate('torrent_parser_voice_dubbing'), Lang.translate('torrent_parser_voice_polyphonic'), Lang.translate('torrent_parser_voice_two'), Lang.translate('torrent_parser_voice_amateur')];
      filter_items.tracker = [Lang.translate('torrent_parser_any_two')];
      filter_items.season = [Lang.translate('torrent_parser_any_two')];
      results.Results.forEach(function (element) {
        var title = element.Title.toLowerCase(),
          tracker = element.Tracker;
        for (var _i = 0; _i < voices.length; _i++) {
          var voice = voices[_i].toLowerCase();
          if (title.indexOf(voice) >= 0) {
            if (filter_items.voice.indexOf(voices[_i]) == -1) filter_items.voice.push(voices[_i]);
          }
          if (element.info && element.info.voices) {
            if (element.info.voices.map(function (v) {
              return v.toLowerCase();
            }).indexOf(voice) >= 0) {
              if (filter_items.voice.indexOf(voices[_i]) == -1) filter_items.voice.push(voices[_i]);
            }
          }
        }
        tracker.split(',').forEach(function (t) {
          if (filter_items.tracker.indexOf(t.trim()) === -1) filter_items.tracker.push(t.trim());
        });
        var season = title.match(/.?s\[(\d+)-\].?|.?s(\d+).?|.?\((\d+) сезон.?|.?season (\d+),.?/);
        if (season) {
          season = season.filter(function (c) {
            return c;
          });
          if (season.length > 1) {
            var orig = season[1];
            var number = parseInt(orig) + '';
            if (number && finded_seasons.indexOf(number) == -1) {
              finded_seasons.push(number);
              finded_seasons_full.push(orig);
            }
          }
        }
      });
      finded_seasons_full.sort(function (a, b) {
        var ac = parseInt(a);
        var bc = parseInt(b);
        if (ac > bc) return 1;else if (ac < bc) return -1;else return 0;
      });
      finded_seasons.sort(function (a, b) {
        var ac = parseInt(a);
        var bc = parseInt(b);
        if (ac > bc) return 1;else if (ac < bc) return -1;else return 0;
      });
      if (finded_seasons.length) filter_items.season = filter_items.season.concat(finded_seasons);

      //надо очистить от отсутствующих ключей
      need.voice = Arrays.removeNoIncludes(Arrays.toArray(need.voice), filter_items.voice);
      need.tracker = Arrays.removeNoIncludes(Arrays.toArray(need.tracker), filter_items.tracker);
      need.season = Arrays.removeNoIncludes(Arrays.toArray(need.season), filter_items.season);
      this.setFilterData(need);
      select.push({
        title: Lang.translate('torrent_parser_reset'),
        reset: true
      });
      add('quality', Lang.translate('torrent_parser_quality'));
      add('hdr', 'HDR');
      add('dv', 'Dolby Vision');
      add('imax', 'IMAX');
      add('sub', Lang.translate('torrent_parser_subs'));
      add('voice', Lang.translate('torrent_parser_voice'));
      add('lang', Lang.translate('title_language_short'));
      add('season', Lang.translate('torrent_parser_season'));
      add('tracker', Lang.translate('torrent_parser_tracker'));
      add('year', Lang.translate('torrent_parser_year'));
      filter.set('filter', select);
      this.selectedFilter();
    };
    this.selectedFilter = function () {
      var need = this.getFilterData(),
        select = [];
      for (var _i2 in need) {
        if (need[_i2]) {
          if (Arrays.isArray(need[_i2])) {
            if (need[_i2].length) select.push(filter_translate[_i2] + ':' + need[_i2].join(', '));
          } else {
            select.push(filter_translate[_i2] + ': ' + filter_items[_i2][need[_i2]]);
          }
        }
      }
      filter.chosen('filter', select);
    };
    this.selectedSort = function () {
      var select = Storage.get('torrents_sort', 'Seeders');
      filter.chosen('sort', [sort_translate[select]]);
    };
    this.build = function () {
      var _this3 = this;
      this.buildSorted();
      this.buildFilterd();
      this.filtred();
      filter.onSelect = function (type, a, b) {
        if (type == 'sort') {
          Storage.set('torrents_sort', a.sort);
          filter.sort(results.Results, a.sort);
          _this3.sortWithPopular();
        } else {
          if (a.reset) {
            _this3.setFilterData({});
            _this3.buildFilterd();
          } else {
            a.items.forEach(function (n) {
              return n.checked = false;
            });
            var filter_data = _this3.getFilterData();
            filter_data[a.stype] = filter_multiple.indexOf(a.stype) >= 0 ? [] : b.index;
            a.subtitle = b.title;
            _this3.setFilterData(filter_data);
          }
        }
        _this3.applyFilter();
        _this3.start();
      };
      filter.onCheck = function (type, a, b) {
        var data = _this3.getFilterData(),
          need = Arrays.toArray(data[a.stype]);
        if (b.checked && need.indexOf(b.title)) need.push(b.title);else if (!b.checked) Arrays.remove(need, b.title);
        data[a.stype] = need;
        _this3.setFilterData(data);
        a.subtitle = need.length ? need.join(', ') : a.items[0].title;
        _this3.applyFilter();
      };
      if (results.Results.length) this.showResults();else {
        this.empty(Lang.translate('torrent_parser_empty'));
      }
    };
    this.applyFilter = function () {
      this.filtred();
      this.selectedFilter();
      this.selectedSort();
      this.reset();
      this.showResults();
      last = scroll.render().find('.torrent-item:eq(0)')[0];
      if (last) scroll.update(last);else scroll.reset();
    };
    this.filtred = function () {
      var filter_data = this.getFilterData();
      var filter_any = false;
      for (var _i3 in filter_data) {
        var filr = filter_data[_i3];
        if (filr) {
          if (Arrays.isArray(filr)) {
            if (filr.length) filter_any = true;
          } else filter_any = true;
        }
      }
      filtred = results.Results.filter(function (element) {
        if (filter_any) {
          var passed = false,
            nopass = false,
            title = element.Title.toLowerCase(),
            tracker = element.Tracker;
          var qua = Arrays.toArray(filter_data.quality),
            hdr = filter_data.hdr,
            dv = filter_data.dv,
            imax = filter_data.imax,
            sub = filter_data.sub,
            voi = Arrays.toArray(filter_data.voice),
            tra = Arrays.toArray(filter_data.tracker),
            ses = Arrays.toArray(filter_data.season),
            lng = Arrays.toArray(filter_data.lang),
            yer = filter_data.year;
          var test = function test(search, test_index) {
            var regex = new RegExp(search);
            return test_index ? title.indexOf(search) >= 0 : regex.test(title);
          };
          var check = function check(search, invert) {
            if (test(search)) {
              if (invert) nopass = true;else passed = true;
            } else {
              if (invert) passed = true;else nopass = true;
            }
          };
          var includes = function includes(type, arr) {
            if (!arr.length) return;
            var any = false;
            arr.forEach(function (a) {
              if (type == 'quality') {
                if (a == '4k' && test('(4k|uhd)[ |\\]|,|$]|2160[pр]|ultrahd')) any = true;
                if (a == '1080p' && test('fullhd|1080[pр]')) any = true;
                if (a == '720p' && test('720[pр]')) any = true;
              }
              if (type == 'voice') {
                var p = filter_items.voice.indexOf(a);
                var n = element.info && element.info.voices ? element.info.voices.map(function (v) {
                  return v.toLowerCase();
                }) : [];
                if (p == 1) {
                  if (test('дублирован|дубляж|  apple| dub| d[,| |$]|[,|\\s]дб[,|\\s|$]')) any = true;
                } else if (p == 2) {
                  if (test('многоголос| p[,| |$]|[,|\\s](лм|пм)[,|\\s|$]')) any = true;
                } else if (p == 3) {
                  if (test('двухголос|двуголос| l2[,| |$]|[,|\\s](лд|пд)[,|\\s|$]')) any = true;
                } else if (p == 4) {
                  if (test('любитель|авторский| l1[,| |$]|[,|\\s](ло|ап)[,|\\s|$]')) any = true;
                } else if (test(a.toLowerCase(), true)) any = true;else if (n.length && n.indexOf(a.toLowerCase()) >= 0) any = true;
              }
              if (type == 'lang') {
                var _p = filter_items.lang.indexOf(a);
                var c = filter_langs[_p - 1];
                if (c) {
                  if (element.languages) {
                    if (element.languages.find(function (l) {
                      return l.toLowerCase().slice(0, 2) == c.code;
                    })) any = true;
                  } else if (title.indexOf(c.code) >= 0) any = true;
                } else any = true;
              }
              if (type == 'tracker') {
                if (tracker.split(',').find(function (t) {
                  return t.trim().toLowerCase() == a.toLowerCase();
                })) any = true;
              }
              if (type == 'season') {
                var pad = function pad(n) {
                  return n < 10 && n != '01' ? '0' + n : n;
                };
                var _i4 = finded_seasons.indexOf(a);
                var f = finded_seasons_full[_i4];
                var SES1 = title.match(/\[s(\d+)-(\d+)\]/);
                var SES2 = title.match(/season (\d+)-(\d+)/);
                var SES3 = title.match(/season (\d+) - (\d+).?/);
                var SES4 = title.match(/сезон: (\d+)-(\d+) \/.?/);
                if (Array.isArray(SES1) && (f >= SES1[1] && f <= SES1[2] || pad(f) >= SES1[1] && pad(f) <= SES1[2] || f >= pad(SES1[1]) && f <= pad(SES1[2]))) any = true;
                if (Array.isArray(SES2) && (f >= SES2[1] && f <= SES2[2] || pad(f) >= SES2[1] && pad(f) <= SES2[2] || f >= pad(SES2[1]) && f <= pad(SES2[2]))) any = true;
                if (Array.isArray(SES3) && (f >= SES3[1] && f <= SES3[2] || pad(f) >= SES3[1] && pad(f) <= SES3[2] || f >= pad(SES3[1]) && f <= pad(SES3[2]))) any = true;
                if (Array.isArray(SES4) && (f >= SES4[1] && f <= SES4[2] || pad(f) >= SES4[1] && pad(f) <= SES4[2] || f >= pad(SES4[1]) && f <= pad(SES4[2]))) any = true;
                if (test('.?\\[0' + f + 'x0.?|.?\\[s' + f + '-.?|.?-' + f + '\\].?|.?\\[s0' + f + '\\].?|.?\\[s' + f + '\\].?|.?s' + f + 'e.?|.?s' + f + '-.?|.?сезон: ' + f + ' .?|.?сезон:' + f + '.?|сезон ' + f + ',.?|\\[' + f + ' сезон.?|.?\\(' + f + ' сезон.?|.?season ' + f + '.?')) any = true;
              }
            });
            if (any) passed = true;else nopass = true;
          };
          includes('quality', qua);
          includes('voice', voi);
          includes('tracker', tra);
          includes('season', ses);
          includes('lang', lng);
          if (hdr) check('[\\[| ]hdr[10| |\\]|,|$]', hdr !== 1);
          if (imax) check('[\\[| ]imax[ |\\]|,|$]', imax !== 1);
          if (dv == 0) {
            check(filter_items.dv[dv], dv !== 1);
          } else if (dv == 1) {
            check('dolby vision');
          } else if (dv == 2) {
            check('dolby vision tv');
          } else if (dv == 3) {
            check('dolby vision', dv !== 0);
          }
          if (sub) check(' sub|[,|\\s]ст[,|\\s|$]', sub !== 1);
          if (yer) {
            check(filter_items.year[yer]);
          }
          return nopass ? false : passed;
        } else return true;
      });
    };
    this.showResults = function () {
      total_pages = Math.ceil(filtred.length / 20);
      if (filtred.length) {
        this.append(filtred.slice(0, 20));
      } else {
        this.listEmpty();
      }
      files.appendFiles(scroll.render());
    };
    this.reset = function () {
      last = false;
      scroll.clear();
    };
    this.next = function () {
      if (object.page < 15 && object.page < total_pages) {
        object.page++;
        var offset = (object.page - 1) * 20;
        this.append(filtred.slice(offset, offset + 20), true);
      }
    };
    this.mark = function (element, item, add) {
      if (add) {
        if (viewed.indexOf(element.hash) == -1) {
          viewed.push(element.hash);
          item.append('<div class="torrent-item__viewed">' + Template.get('icon_viewed', {}, true) + '</div>');
        }
      } else {
        element.viewed = true;
        Arrays.remove(viewed, element.hash);
        item.find('.torrent-item__viewed').remove();
      }
      element.viewed = add;
      Storage.set('torrents_view', viewed);
      if (!add) Storage.remove('torrents_view', element.hash);
    };
    this.addToBase = function (element) {
      Torserver.add({
        poster: object.movie.img,
        title: object.movie.title + ' / ' + object.movie.original_title,
        link: element.MagnetUri || element.Link,
        data: {
          prisma: true,
          movie: object.movie
        }
      }, function () {
        Noty$1.show(object.movie.title + ' - ' + Lang.translate('torrent_parser_added_to_mytorrents'));
      });
    };
    this.append = function (items, append) {
      var _this4 = this;
      items.forEach(function (element) {
        var date = Utils$2.parseTime(element.PublishDate);
        var bitrate = object.movie.runtime ? Utils$2.calcBitrate(element.Size, object.movie.runtime) : 0;
        Arrays.extend(element, {
          title: element.Title,
          date: date.full,
          tracker: element.Tracker,
          bitrate: bitrate,
          size: !isNaN(parseInt(element.Size)) ? Utils$2.bytesToSize(element.Size) : element.size,
          seeds: element.Seeders,
          grabs: element.Peers
        });
        var item = Template.get('torrent', element);
        if (element.ffprobe) {
          var ffprobe_elem = item.find('.torrent-item__ffprobe');
          var ffprobe_tags = [];
          var video = element.ffprobe.find(function (a) {
            return a.codec_type == 'video';
          });
          var audio = element.ffprobe.filter(function (a) {
            return a.codec_type == 'audio' && a.tags;
          });
          var subs = element.ffprobe.filter(function (a) {
            return a.codec_type == 'subtitle' && a.tags;
          });
          var voice = element.info && element.info.voices ? element.info.voices : [];
          if (video) ffprobe_tags.push({
            media: 'video',
            value: video.width + 'x' + video.height
          });
          var is_71 = element.ffprobe.find(function (a) {
            return a.codec_type == 'audio' && a.channels == 8;
          });
          var is_51 = element.ffprobe.find(function (a) {
            return a.codec_type == 'audio' && a.channels == 6;
          });
          if (is_71) ffprobe_tags.push({
            media: 'channels',
            value: '7.1'
          });
          if (is_51) ffprobe_tags.push({
            media: 'channels',
            value: '5.1'
          });
          audio.forEach(function (a) {
            var line = [];
            var lang = (a.tags.language || '').toUpperCase();
            var name = a.tags.title || a.tags.handler_name;
            if (lang) line.push(lang);
            if (name && lang !== 'ENG') {
              var translate = voice.find(function (v) {
                return name.toLowerCase().indexOf(v.toLowerCase()) >= 0;
              });
              name = translate ? translate : name;
              if (name.toLowerCase().indexOf('dub') >= 0 || name.toLowerCase() == 'd') name = Lang.translate('torrent_parser_voice_dubbing');
              line.push(Utils$2.shortText(Utils$2.capitalizeFirstLetter(name), 20));
            }
            if (line.length) ffprobe_tags.push({
              media: 'audio',
              value: line.join(' - ')
            });
          });
          var find_subtitles = [];
          subs.forEach(function (a) {
            var lang = (a.tags.language || '').toUpperCase();
            if (lang) find_subtitles.push(lang);
          });
          find_subtitles = find_subtitles.filter(function (el, pos) {
            return find_subtitles.indexOf(el) == pos;
          });
          find_subtitles.slice(0, 4).forEach(function (a) {
            ffprobe_tags.push({
              media: 'subtitle',
              value: a
            });
          });
          if (find_subtitles.length > 4) ffprobe_tags.push({
            media: 'subtitle',
            value: '+' + (find_subtitles.length - 4)
          });
          ffprobe_tags = ffprobe_tags.filter(function (el, pos) {
            return ffprobe_tags.map(function (a) {
              return a.value + a.media;
            }).indexOf(el.value + el.media) == pos;
          });
          ffprobe_tags.forEach(function (tag) {
            ffprobe_elem.append('<div class="m-' + tag.media + '">' + tag.value + '</div>');
          });
          if (ffprobe_tags.length) ffprobe_elem.removeClass('hide');
        }
        if (!bitrate) item.find('.bitrate').remove();
        if (element.viewed) item.append('<div class="torrent-item__viewed">' + Template.get('icon_viewed', {}, true) + '</div>');
        if (!element.size || parseInt(element.size) == 0) item.find('.torrent-item__size').remove();
        item.on('hover:focus', function (e) {
          last = e.target;
          scroll.update($(e.target), true);
          Helper.show('torrents', Lang.translate('helper_torrents'), item);
        }).on('hover:hover hover:touch', function (e) {
          last = e.target;
          Navigator.focused(last);
        }).on('hover:enter', function (e) {
          last = e.target;
          Torrent.opened(function () {
            _this4.mark(element, item, true);
          });
          element.poster = object.movie.img;
          _this4.start();
          Torrent.start(element, object.movie);
          Prisma.Listener.send('torrent', {
            type: 'onenter',
            element: element,
            item: item
          });
        }).on('hover:long', function () {
          var enabled = Controller.enabled().name;
          var menu = [{
            title: Lang.translate('torrent_parser_add_to_mytorrents'),
            tomy: true
          }, {
            title: Lang.translate('torrent_parser_label_title'),
            subtitle: Lang.translate('torrent_parser_label_descr'),
            mark: true
          }, {
            title: Lang.translate('torrent_parser_label_cancel_title'),
            subtitle: Lang.translate('torrent_parser_label_cancel_descr'),
            unmark: true
          }];
          Prisma.Listener.send('torrent', {
            type: 'onlong',
            element: element,
            item: item,
            menu: menu
          });
          Select.show({
            title: Lang.translate('title_action'),
            items: menu,
            onBack: function onBack() {
              Controller.toggle(enabled);
            },
            onSelect: function onSelect(a) {
              if (a.tomy) {
                _this4.addToBase(element);
              } else if (a.mark) {
                _this4.mark(element, item, true);
              } else if (a.unmark) {
                _this4.mark(element, item, false);
              }
              Controller.toggle(enabled);
            }
          });
        });
        Prisma.Listener.send('torrent', {
          type: 'render',
          element: element,
          item: item
        });
        scroll.append(item);
        if (append) Controller.collectionAppend(item);
      });
    };
    this.back = function () {
      Activity$1.backward();
    };
    this.start = function () {
      if (Prisma.Activity.active().activity !== this.activity) return;
      if (!initialized) {
        initialized = true;
        this.initialize();
      }
      Background.immediately(Utils$2.cardImgBackgroundBlur(object.movie));
      Controller.add('content', {
        toggle: function toggle() {
          Controller.collectionSet(scroll.render(), files.render(true));
          Controller.collectionFocus(last || false, scroll.render(true));
          Navigator.remove(files.render().find('.explorer-card__head-img')[0]);
        },
        update: function update() {},
        up: function up() {
          if (Navigator.canmove('up')) {
            Navigator.move('up');
          } else Controller.toggle('head');
        },
        down: function down() {
          Navigator.move('down');
        },
        right: function right() {
          if (Navigator.canmove('right')) Navigator.move('right');else filter.render().find('.filter--filter').trigger('hover:enter');
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else files.toggle();
        },
        back: this.back
      });
      Controller.toggle('content');
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function () {
      return files.render();
    };
    this.destroy = function () {
      network.clear();
      Parser.clear();
      files.destroy();
      scroll.destroy();
      results = null;
      network = null;
    };
  }

  function component$c(object) {
    var network = new create$e();
    var scroll = new create$f({
      mask: true,
      over: true,
      step: 250,
      end_ratio: 2
    });
    var items = [];
    var html = $('<div></div>');
    var body = $('<div class="category-full"></div>');
    var total_pages = 0;
    var last;
    var torrents = [];
    this.create = function () {
      var _this = this;
      this.activity.loader(true);
      Torserver.my(this.build.bind(this), function () {
        var empty = new Empty();
        html.append(empty.render());
        _this.start = empty.start;
        _this.activity.loader(false);
        _this.activity.toggle();
      });
      return this.render();
    };
    this.next = function () {
      if (object.page < 15 && object.page < total_pages) {
        object.page++;
        var offset = object.page - 1;
        this.append(torrents.slice(20 * offset, 20 * offset + 20), true);
      }
    };
    this.append = function (data, append) {
      var _this2 = this;
      data.forEach(function (element) {
        element.title = element.title.replace(' ', '');
        var item_data = Arrays.decodeJson(element.data, {});
        var card = new Card(element, {
          card_category: true
        });
        card.create();
        card.onFocus = function (target, card_data) {
          last = target;
          scroll.update(card.render(), true);
          Background.change(item_data.movie ? Utils$2.cardImgBackground(item_data.movie) : element.poster);
          if (scroll.isEnd()) _this2.next();
        };
        card.onEnter = function (target, card_data) {
          last = target;
          _this2.start();
          Torrent.open(card_data.hash, item_data.prisma && item_data.movie ? item_data.movie : false);
        };
        card.onMenu = function (target, card_data) {
          var enabled = Controller.enabled().name;
          var menu = [];
          if (item_data.movie) {
            menu.push({
              title: Lang.translate('title_card')
            });
          }
          menu.push({
            title: Lang.translate('torrent_remove_title'),
            subtitle: Lang.translate('torrent_remove_descr'),
            remove: true
          });
          Select.show({
            title: Lang.translate('title_action'),
            items: menu,
            onBack: function onBack() {
              Controller.toggle(enabled);
            },
            onSelect: function onSelect(a) {
              if (a.remove) {
                Torserver.remove(card_data.hash);
                Arrays.remove(items, card);
                card.destroy();
                last = false;
                Controller.toggle(enabled);
              } else {
                Activity$1.push({
                  url: item_data.movie.url,
                  component: 'full',
                  id: item_data.movie.id,
                  method: item_data.movie.name ? 'tv' : 'movie',
                  card: item_data.movie,
                  source: item_data.movie.source || 'cub'
                });
              }
            }
          });
        };
        card.visible();
        body.append(card.render());
        if (append) Controller.collectionAppend(card.render());
        items.push(card);
      });
    };
    this.build = function (data) {
      torrents = data;
      total_pages = Math.ceil(torrents.length / 20);
      scroll.minus();
      this.append(torrents.slice(0, 20));
      scroll.append(body);
      html.append(scroll.render());
      this.activity.loader(false);
      this.activity.toggle();
    };
    this.start = function () {
      Controller.add('content', {
        toggle: function toggle() {
          Controller.collectionSet(scroll.render());
          Controller.collectionFocus(last || false, scroll.render());
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        right: function right() {
          Navigator.move('right');
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('head');
        },
        down: function down() {
          if (Navigator.canmove('down')) Navigator.move('down');
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function () {
      return html;
    };
    this.destroy = function () {
      network.clear();
      Arrays.destroy(items);
      scroll.destroy();
      html.remove();
      body.remove();
      network = null;
      items = null;
      html = null;
      body = null;
    };
  }

  function component$b(object) {
    var comp = new component$i(object);
    comp.create = function () {
      this.activity.loader(true);
      Api.relise(object, this.build.bind(this), this.empty.bind(this));
    };
    comp.nextPageReuest = function (object, resolve, reject) {
      Api.relise(object, resolve.bind(this), reject.bind(this));
    };
    return comp;
  }

  function component$a(object) {
    var network = new create$e();
    var scroll = new create$f({
      mask: true,
      over: true,
      step: 250,
      end_ratio: 2
    });
    var items = [];
    var html = $('<div></div>');
    var body = $('<div class="category-full"></div>');
    var last;
    var collections = [];
    var waitload;
    this.create = function () {
      var _this = this;
      this.activity.loader(true);
      Api.collections(object, this.build.bind(this), function () {
        var empty = new Empty();
        html.append(empty.render());
        _this.start = empty.start;
        _this.activity.loader(false);
        _this.activity.toggle();
      });
      return this.render();
    };
    this.next = function () {
      var _this2 = this;
      if (waitload) return;
      if (object.page < 30) {
        waitload = true;
        object.page++;
        Api.collections(object, function (result) {
          _this2.append(result.results, true);
          if (result.results.length) waitload = false;
        }, function () {});
      }
    };
    this.append = function (data, append) {
      var _this3 = this;
      data.forEach(function (element) {
        var card = new Card(element, {
          card_collection: true,
          object: object
        });
        card.create();
        card.onFocus = function (target, card_data) {
          last = target;
          scroll.update(card.render(), true);
          Background.change(Utils$2.cardImgBackground(card_data));
          if (scroll.isEnd()) _this3.next();
        };
        card.onEnter = function (target, card_data) {
          Activity$1.push({
            url: card_data.url,
            id: card_data.id,
            title: Lang.translate('title_collections') + ' - ' + card_data.title,
            component: 'collections_view',
            source: object.source,
            page: 1
          });
        };
        card.onMenu = function (target, card_data) {};
        card.visible();
        body.append(card.render());
        if (append) Controller.collectionAppend(card.render());
        items.push(card);
      });
    };
    this.build = function (data) {
      collections = data.results;
      scroll.minus();
      this.append(collections.slice(0, 20));
      scroll.append(body);
      html.append(scroll.render());
      this.activity.loader(false);
      this.activity.toggle();
    };
    this.start = function () {
      Controller.add('content', {
        toggle: function toggle() {
          Controller.collectionSet(scroll.render());
          Controller.collectionFocus(last || false, scroll.render());
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        right: function right() {
          Navigator.move('right');
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('head');
        },
        down: function down() {
          if (Navigator.canmove('down')) Navigator.move('down');
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function () {
      return html;
    };
    this.destroy = function () {
      network.clear();
      Arrays.destroy(items);
      scroll.destroy();
      html.remove();
      body.remove();
      network = null;
      items = null;
      html = null;
      body = null;
    };
  }

  function component$9(object) {
    var comp = new component$i(object);
    comp.create = function () {
      this.activity.loader(true);
      Api.collections(object, this.build.bind(this), this.empty.bind(this));
    };
    return comp;
  }

  function component$8(object) {
    var html = $('<div></div>');
    var empty = new Empty();
    this.create = function () {
      var card = object.movie || object.card;
      var foot = $('<div class="empty__footer"></div>');
      var button_reset = $('<div class="simple-button selector">' + Lang.translate('title_reset') + '</div>');
      var button_movie = $('<div class="simple-button selector">' + Lang.translate('back_to_card') + '</div>');
      button_reset.on('hover:enter', function () {
        Activity$1.replace();
      });
      foot.append(button_reset);
      if (card) {
        button_movie.on('hover:enter', function () {
          Activity$1.replace({
            component: 'full',
            card: card,
            id: card.id,
            method: card.number_of_seasons ? 'tv' : 'movie',
            source: card.source || 'cub'
          });
        });
        foot.append(button_movie);
      }
      empty.append(foot);
      html.append(empty.render());
      this.start = empty.start;
      this.activity.loader(false);
      this.activity.toggle();
    };
    this.start = function () {
      Controller.add('content', {
        toggle: function toggle() {
          Controller.collectionSet(empty.render());
          Controller.collectionFocus(false, empty.render());
        },
        left: function left() {
          Controller.toggle('menu');
        },
        up: function up() {
          Controller.toggle('head');
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function () {
      return html;
    };
    this.destroy = function () {
      html.remove();
    };
  }

  function component$7(object) {
    var _this = this;
    var scroll = new create$f({
      mask: true,
      over: true,
      step: 300
    });
    var html = $('<div></div>');
    var body = $('<div class="timetable"></div>');
    var cards = Favorite.full().card;
    var table = TimeTable.all();
    var last;
    this.create = function () {
      if (Account.working()) cards = Account.all();
      if (table.length) {
        var date_max = 0;
        var date_now = new Date();
        var date_end = new Date();
        var date_one = 24 * 60 * 60 * 1000;
        table.forEach(function (elem) {
          elem.episodes.forEach(function (ep) {
            var air = Utils$2.parseToDate(ep.air_date);
            var tim = air.getTime();
            if (date_max < tim) {
              date_max = tim;
              date_end = air;
            }
          });
        });
        var date_dif = Math.max(30, Math.min(30, Math.round(Math.abs((date_now - date_end) / date_one))));
        if (date_dif > 0) {
          for (var i = 0; i < date_dif; i++) {
            this.append(date_now);
            date_now.setDate(date_now.getDate() + 1);
          }
          scroll.minus();
          scroll.append(body);
          html.append(scroll.render());
        } else this.empty();
      } else this.empty();
      this.activity.loader(false);
      this.activity.toggle();
      return this.render();
    };
    this.empty = function () {
      var empty = new Empty({
        descr: Lang.translate('timetable_empty')
      });
      html.append(empty.render());
      _this.start = empty.start;
      _this.activity.loader(false);
      _this.activity.toggle();
    };
    this.append = function (date) {
      var item = $("\n            <div class=\"timetable__item selector\">\n                <div class=\"timetable__inner\">\n                    <div class=\"timetable__date\"></div>\n                    <div class=\"timetable__body\"></div>\n                </div>\n            </div>\n        ");
      var air_date = date.getFullYear() + '-' + ('0' + (date.getMonth() + 1)).slice(-2) + '-' + ('0' + date.getDate()).slice(-2);
      var air_epis = [];
      var day_week = Utils$2.parseTime(date.getTime());
      var weeks = [Lang.translate('week_7'), Lang.translate('week_1'), Lang.translate('week_2'), Lang.translate('week_3'), Lang.translate('week_4'), Lang.translate('week_5'), Lang.translate('week_6')];
      table.forEach(function (elem) {
        elem.episodes.forEach(function (ep) {
          var card = cards.find(function (card) {
            return card.id == elem.id;
          });
          if (ep.air_date == air_date && card) {
            air_epis.push({
              episode: ep,
              card: cards.find(function (card) {
                return card.id == elem.id;
              })
            });
          }
        });
      });
      if (air_epis.length) {
        air_epis.slice(0, 3).forEach(function (elem) {
          item.find('.timetable__body').append('<div><span style="background-color: ' + Utils$2.stringToHslColor(elem.card.name, 50, 50) + '"></span>' + elem.card.name + '</div>');
        });
        if (air_epis.length > 3) {
          item.find('.timetable__body').append('<div>+' + (air_epis.length - 3) + '</div>');
        }
        if (air_epis.length == 1) {
          var preview = $('<div class="timetable__preview"><img><div>' + (air_epis[0].episode.name || Lang.translate('noname')) + '</div></div>');
          Utils$2.imgLoad(preview.find('img'), TMDB$1.image('t/p/w200/' + air_epis[0].episode.still_path), false, function () {
            preview.find('img').remove();
          });
          item.find('.timetable__body').prepend(preview);
        }
        item.addClass('timetable__item--any');
      }
      item.find('.timetable__date').text(day_week["short"] + ' - ' + weeks[date.getDay()] + '.');
      item.on('hover:focus', function () {
        last = $(this)[0];
        scroll.update($(this));
      }).on('hover:hover', function () {
        last = $(this)[0];
        Navigator.focused(last);
      }).on('hover:enter', function () {
        last = $(this)[0];
        var modal = $('<div></div>');
        air_epis.forEach(function (elem) {
          var noty = Template.get('notice_card', {
            time: Utils$2.parseTime(air_date).full,
            title: elem.card.name,
            descr: Lang.translate('full_season') + ' - <b>' + elem.episode.season_number + '</b><br>' + Lang.translate('full_episode') + ' - <b>' + elem.episode.episode_number + '</b>'
          });
          Utils$2.imgLoad(noty.find('img'), elem.card.poster ? elem.card.poster : elem.card.img ? elem.card.img : TMDB$1.image('t/p/w200/' + elem.card.poster_path), function () {
            noty.addClass('image--loaded');
          });
          noty.on('hover:enter', function () {
            Modal.close();
            Activity$1.push({
              url: '',
              component: 'full',
              id: elem.card.id,
              method: 'tv',
              card: elem.card,
              source: elem.card.source
            });
          });
          modal.append(noty);
        });
        Modal.open({
          title: Lang.translate('menu_tv'),
          size: 'medium',
          html: modal,
          onBack: function onBack() {
            Modal.close();
            Controller.toggle('content');
          }
        });
      });
      body.append(item);
    };
    this.back = function () {
      Activity$1.backward();
    };
    this.start = function () {
      Controller.add('content', {
        link: this,
        toggle: function toggle() {
          Controller.collectionSet(scroll.render());
          Controller.collectionFocus(last || false, scroll.render());
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        right: function right() {
          Navigator.move('right');
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('head');
        },
        down: function down() {
          if (Navigator.canmove('down')) Navigator.move('down');
        },
        back: this.back
      });
      Controller.toggle('content');
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function () {
      return html;
    };
    this.destroy = function () {
      scroll.destroy();
      html.remove();
    };
  }

  function component$6(object) {
    var comp = new component$i(object);
    comp.create = function () {
      this.activity.loader(true);
      Account.subscribes(object, this.build.bind(this), this.empty.bind(this));
      return this.render();
    };
    return comp;
  }

  function Company(data) {
    var html;
    this.create = function () {
      html = Template.get('company', {
        name: data.name,
        img: data.logo_path ? Api.img(data.logo_path) : data.img || 'img/img_broken.svg',
        place: (data.headquarters ? data.headquarters + (data.origin_country ? ', ' : '') : '') + (data.origin_country ? data.origin_country : '')
      });
      if (!data.logo_path) html.addClass('icon--broken');
    };
    this.toggle = function () {
      var _this = this;
      Controller.add('company', {
        invisible: true,
        toggle: function toggle() {
          Controller.collectionSet(_this.render());
          Controller.collectionFocus(false, _this.render());
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        down: this.onDown,
        up: this.onUp,
        back: this.onBack
      });
      Controller.toggle('company');
    };
    this.render = function (js) {
      return js ? html[0] : html;
    };
    this.destroy = function () {
      html.remove();
    };
  }

  function component$5(object) {
    var comp = new Prisma.InteractionMain(object);
    comp.create = function () {
      var _this = this;
      this.activity.loader(true);
      Api.company(object, function (data) {
        var company = new Company(data.company);
        company.create();
        _this.push(company);
        _this.build(data.lines);
      }, this.empty.bind(this));
      return this.render();
    };
    return comp;
  }

  function Feed(object) {
    var network = new create$e();
    var scroll = new create$f({
      mask: true,
      over: true,
      step: 250,
      end_ratio: 2
    });
    var html = document.createElement('div');
    var feed = [];
    var last;
    this.create = function () {
      var _this = this;
      this.activity.loader(true);
      network.silent(Utils$2.protocol() + object$2.cub_domain + '/api/feed/all', this.build.bind(this), function () {
        var empty = new Empty();
        html.append(empty.render(true));
        _this.start = empty.start;
        _this.activity.loader(false);
        _this.activity.toggle();
      });
      return this.render();
    };
    this.next = function () {
      if (object.page < 15) {
        object.page++;
        var offset = object.page - 1;
        this.append(feed.slice(20 * offset, 20 * offset + 20), true);
      }
    };
    this.loadImg = function (box, src) {
      var img = box.find('img');
      img.onload = function () {
        box.addClass('loaded');
      };
      img.onerror = function () {
        img.src = './img/img_broken.svg';
      };
      img.src = src;
    };
    this.append = function (data, append) {
      var _this2 = this;
      data.forEach(function (element) {
        var item = Template.js(element.type == 'episode' || element.type == 'trailer' ? 'feed_episode' : 'feed_item');
        item.addClass('feed-item--' + element.type);
        var type = {
          top: Prisma.Lang.translate('title_in_top'),
          now_playing: Prisma.Lang.translate('title_now_watch'),
          uhd: Prisma.Lang.translate('title_in_high_quality'),
          popular: Prisma.Lang.translate('title_popular'),
          trailer: Prisma.Lang.translate('title_trailers'),
          episode: Prisma.Lang.translate('card_new_episode'),
          now: Prisma.Lang.translate('title_new')
        };
        var sity = element.data.countries || [];
        var year = ((element.data.release_date || element.data.first_air_date) + '').slice(0, 4);
        var info = [];
        var tags = [];
        info.push(year + (sity.length ? ' - ' + sity.slice(0, 2).join(', ') : ''));
        if (element.data.imdb_rating && parseFloat(element.data.imdb_rating) > 0) {
          info.push('IMDB ' + element.data.imdb_rating);
        }
        if (element.data.kp_rating && parseFloat(element.data.kp_rating) > 0) {
          info.push('KP ' + element.data.kp_rating);
        }
        if (element.type == 'episode') {
          tags = element.hash.split(';').map(function (a) {
            return Lang.translate(a.slice(0, 1) == 's' ? 'torrent_serial_season' : 'torrent_serial_episode') + ' - ' + a.slice(1);
          });
        } else if (element.data.genres) tags.push(element.data.genres.join(', '));else if (element.data.genre_ids) {
          tags.push(Api.sources.tmdb.getGenresNameFromIds(element.card_type, element.data.genre_ids).join(', '));
        }
        item.find('.feed-item__label').addClass('feed-item__label--' + element.type).text(type[element.type]);
        item.find('.feed-item__title').text(element.data.title || element.data.name);
        item.find('.feed-item__info').text(info.join(' / '));
        item.find('.feed-item__descr').text(element.data.overview || '');
        item.find('.feed-item__tags').text(tags.join(' / '));
        _this2.loadImg(item.find('.feed-item__poster-box'), element.data.poster_path ? Api.img(element.data.poster_path, 'w500') : './img/img_broken.svg');
        var image = item.find('.feed-item__image-box');
        if (image) {
          _this2.loadImg(image, Api.img(element.type == 'episode' ? element.data.episode.still_path : element.data.backdrop_path, 'w780'));
        }
        scroll.append(item);
        var btn_watch = document.createElement('div');
        btn_watch.addClass('simple-button selector');
        btn_watch.text(Lang.translate('title_watch'));
        btn_watch.on('hover:focus', function () {
          last = btn_watch;
          scroll.update(item);
          Background.change(Api.img(element.data.poster_path, 'w500'));
        });
        btn_watch.on('hover:enter', function () {
          Activity$1.push({
            url: '',
            component: 'full',
            id: element.card_id,
            method: element.card_type,
            card: element.data,
            source: element.data.source || 'tmdb'
          });
        });
        item.find('.feed-item__buttons').append(btn_watch);
        if (append) Controller.collectionAppend(btn_watch);
      });
    };
    this.build = function (data) {
      feed = data.result;
      html.addClass('feed');
      var head = Template.js('feed_head');
      head.find('.feed-head__title').text(Lang.translate('prisma_movie_title'));
      head.find('.feed-head__info').html(Lang.translate('prisma_movie_descr'));
      head.on('hover:focus', scroll.update.bind(scroll, head));
      scroll.minus();
      scroll.onWheel = function (step) {
        Navigator.move(step > 0 ? 'down' : 'up');
      };
      scroll.onEnd = this.next.bind(this);
      scroll.append(head);
      this.append(feed.slice(0, 20));
      html.append(scroll.render(true));
      this.activity.loader(false);
      this.activity.toggle();
    };
    this.start = function () {
      Controller.add('content', {
        toggle: function toggle() {
          Controller.collectionSet(scroll.render(true));
          Controller.collectionFocus(last || false, scroll.render(true));
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        right: function right() {
          Navigator.move('right');
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('head');
        },
        down: function down() {
          if (Navigator.canmove('down')) Navigator.move('down');
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function () {
      return html;
    };
    this.destroy = function () {
      network.clear();
      scroll.destroy();
      html.remove();
    };
  }

  /**
   * Карточка
   * @param {object} data
   * @param {{isparser:boolean, card_small:boolean, card_category:boolean, card_collection:boolean, card_wide:true}} params 
   */
  function Folder(data) {
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    this.data = data;
    this.params = params;
    this.card = this.data.length ? this.data[0] : {};
    this.create = function () {
      var _this = this;
      this.folder = Template.js('bookmarks_folder');
      this.folder.querySelector('.bookmarks-folder__title').innerText = Lang.translate('menu_' + params.media);
      this.folder.querySelector('.bookmarks-folder__num').innerText = this.data.length;
      this.folder.addEventListener('hover:focus', function () {
        if (_this.onFocus) _this.onFocus(_this.folder, _this.card);
      });
      this.folder.addEventListener('hover:touch', function () {
        if (_this.onTouch) _this.onTouch(_this.folder, _this.card);
      });
      this.folder.addEventListener('hover:hover', function () {
        if (_this.onHover) _this.onHover(_this.folder, _this.card);
      });
      this.folder.addEventListener('hover:enter', function () {
        Activity$1.push({
          url: '',
          title: Lang.translate('title_' + params.category) + ' - ' + Lang.translate('menu_' + params.media),
          component: 'favorite',
          type: params.category,
          filter: params.media,
          page: 1,
          card_style: 'standard'
        });
      });
      this.folder.addEventListener('visible', this.visible.bind(this));
    };

    /**
     * Загрузить картинку
     */
    this.image = function (src, i) {
      var _this2 = this;
      var img = document.createElement('img');
      img.addClass('card__img');
      img.addClass('i-' + i);
      img.onload = function () {
        _this2.folder.classList.add('card--loaded');
      };
      img.onerror = function () {
        img.src = './img/img_broken.svg';
      };
      this.folder.querySelector('.bookmarks-folder__body').append(img);
      img.src = src;
    };

    /**
     * Загружать картинку если видна карточка
     */
    this.visible = function () {
      var _this3 = this;
      var filtred = this.data.filter(function (a) {
        return a.backdrop_path;
      }).slice(0, 3);
      filtred.forEach(function (a, i) {
        _this3.image(Api.img(a.backdrop_path), i);
      });
      if (filtred.length == 0) this.image('./img/img_load.svg');
      if (this.onVisible) this.onVisible(this.folder, data);
    };

    /**
     * Уничтожить
     */
    this.destroy = function () {
      this.folder.remove();
    };

    /**
     * Рендер
     * @returns {object}
     */
    this.render = function (js) {
      return js ? this.folder : $(this.folder);
    };
  }

  function component$4(object) {
    var all = Favorite.all();
    var comp = new Prisma.InteractionMain(object);
    var viev_all = false;
    var timer;
    comp.create = function () {
      this.activity.loader(true);
      Account.notice(function (notice) {
        var invoice = notice.filter(function (a) {
          return a.method == 'tv-voice';
        });
        var category = ['look', 'scheduled', 'book', 'like', 'wath', 'viewed', 'continued', 'thrown'];
        var lines = [];
        var voice = [];
        var folders = ['book', 'like', 'wath', 'look'];
        var media = ['movies', 'tv'];
        function draw() {
          category.forEach(function (a) {
            if (all[a].length) {
              var items = Arrays.clone(all[a].slice(0, 20));
              if (folders.indexOf(a) > -1) {
                var i = 0;
                media.forEach(function (m) {
                  var filter = Utils$2.filterCardsByType(all[a], m);
                  if (filter.length) {
                    Arrays.insert(items, i, {
                      cardClass: function cardClass() {
                        return new Folder(filter, {
                          category: a,
                          media: m
                        });
                      }
                    });
                    i++;
                  }
                });
                items = items.slice(0, 20);
              }
              items.forEach(function (a) {
                return a.ready = false;
              });
              lines.push({
                title: Lang.translate('title_' + a),
                results: items,
                type: a
              });
              all[a].forEach(function (card) {
                var noti = invoice.find(function (a) {
                  return a.card_id == card.id;
                });
                if (noti) {
                  // сам не помню, баг будет если не клонировать
                  var card_clone = Arrays.clone(card);
                  card_clone.ready = false;
                  var hash = Utils$2.hash([noti.season, noti.season > 10 ? ':' : '', noti.episode, card_clone.original_title].join(''));
                  var view = Timeline$1.view(hash);
                  if (!view.percent && !voice.find(function (a) {
                    return a.id == card_clone.id;
                  })) {
                    voice.push(card_clone);
                  }
                }
              });
            }
          });
          if (voice.length) {
            Storage.set('player_continue_watch', Arrays.clone(voice.slice(0, 20)));
            Arrays.insert(lines, 0, {
              title: Lang.translate('card_new_episode'),
              results: voice.slice(0, 20)
            });
          }
          if (lines.length) {
            Arrays.insert(lines, 0, {
              title: '',
              results: []
            });
            comp.build(lines);
            setTimeout(function () {
              Layer.visible(comp.render(true));
            }, 100);
          } else comp.empty();
        }
        draw();

        // if(Account.working()){
        //     let tic = 0

        //     timer = setInterval(()=>{
        //         let any = Account.all()

        //         if(any.length){
        //             all = Favorites.all()

        //             clearInterval(timer)

        //             draw()
        //         }
        //         else if(tic > 10){
        //             clearInterval(timer)

        //             comp.empty()
        //         }

        //         tic++
        //     },1000)
        // }
        // else{
        //     all = Favorites.all()

        //     draw()
        // }
      });
      return this.render();
    };
    comp.onAppend = function (line, elem) {
      if (elem.results.length == 0) {
        line.render(true).removeClass('items-line--type-cards').find('.items-line__head').addClass('hide');
        var body = line.render(true).find('.scroll__body');
        var category = ['book', 'look', 'like', 'wath'];
        category.forEach(function (a) {
          var register = Template.js('register');
          register.addClass('selector');
          register.find('.register__name').text(Lang.translate('title_' + a));
          register.find('.register__counter').text(all[a].length);
          register.on('hover:enter', function () {
            Activity$1.push({
              url: '',
              title: Lang.translate('title_' + a),
              component: 'favorite',
              type: a,
              page: 1
            });
          });
          register.on('hover:focus', function () {
            line.render(true).find('.scroll').Scroll.update(register, true);
          });
          body.append(register);
        });
      } else {
        line.render(true).on('visible', function () {
          var more = line.render(true).find('.items-line__more');
          if (more) {
            more.text(Lang.translate('settings_param_card_view_all'));
            more.on('hover:enter', function () {
              viev_all = true;
            });
          }
        });
      }
    };
    comp.onMore = function (line) {
      setTimeout(function () {
        Activity$1.push({
          url: '',
          title: Lang.translate('title_' + line.type),
          component: 'favorite',
          type: line.type,
          page: viev_all ? 1 : 2
        });
        viev_all = false;
      }, 50);
    };
    comp.onDestroy = function () {
      clearInterval(timer);
    };
    return comp;
  }

  function component$3(object) {
    var explorer = new Explorer(object);
    var filter = new create$5(object);
    var scroll = new create$f({
      mask: true,
      over: true
    });
    var last;
    var choice = {
      season: object.movie.number_of_seasons
    };
    this.create = function () {
      this.filter();
      this.selected();
      explorer.appendFiles(scroll.render());
      explorer.appendHead(filter.render());
      scroll.body().addClass('torrent-list');
      explorer.render().find('.filter--search, .filter--sort').remove();
      scroll.minus(explorer.render().find('.explorer__files-head'));
      this.load();
      this.activity.toggle();
      return this.render();
    };
    this.filter = function () {
      var _this = this;
      filter.addButtonBack();
      filter.onSelect = function (type, a, b) {
        choice.season = b.season; //и так сойде ;]

        _this.selected();
        _this.load();
      };
      filter.onBack = function () {
        _this.start();
      };
    };
    this.selected = function () {
      var select = [];
      var seasons = [];
      for (var i in choice) {
        if (i == 'season') select.push(Lang.translate('torrent_serial_season') + ': ' + choice[i]);
      }
      for (var _i = 0; _i < object.movie.number_of_seasons; _i++) {
        seasons.push({
          title: _i + 1,
          season: _i + 1
        });
      }
      filter.set('filter', [{
        title: Lang.translate('torrent_serial_season'),
        subtitle: choice.season,
        noselect: true,
        items: seasons
      }]);
      filter.chosen('filter', select);
    };
    this.load = function () {
      var _this2 = this;
      this.activity.loader(true);
      var season = choice.season;
      Api.clear();
      Api.seasons(object.movie, [season], function (v) {
        last = false;
        scroll.clear();
        scroll.reset();
        if (v[season] && v[season].episodes && v[season].episodes.length) {
          _this2.season(v[season]);
          _this2.draw(v[season].episodes);
        } else {
          _this2.empty();
        }
        _this2.activity.loader(false);
      });
    };
    this.season = function (season) {
      var head = [];
      if (season.vote_average) head.push(Lang.translate('title_rating') + ': ' + parseFloat(season.vote_average + '').toFixed(1));
      if (season.air_date) head.push(Lang.translate('full_date_of_release') + ': ' + Utils$2.parseTime(season.air_date).full);
      head.push(Lang.translate('title_episodes') + ': ' + season.episodes.length);
      season.head = head.join('&nbsp; ● &nbsp;');
      var tpl = Template.get('season_info', season);
      tpl.on('hover:focus', function (e) {
        scroll.update($(e.target), true);
      });
      if (!season.overview) tpl.find('.season-info__overview').remove();
      scroll.append(tpl);
    };
    this.empty = function () {
      var em = Template.get('empty_filter');
      var bn = $('<div class="simple-button selector"><span>' + Lang.translate('filter_clarify') + '</span></div>');
      bn.on('hover:enter', function () {
        filter.render().find('.filter--filter').trigger('hover:enter');
      });
      em.find('.empty-filter__title').remove();
      em.find('.empty-filter__buttons').removeClass('hide').append(bn);
      scroll.append(em);
      Controller.enable('content');
    };
    this.draw = function (episodes) {
      episodes.forEach(function (episode, index) {
        var number = episode.episode_number || index + 1;
        var hash = Utils$2.hash([choice.season, choice.season > 10 ? ':' : '', number, object.movie.original_title].join(''));
        var info = [];
        var out_air = new Date((episode.air_date + '').replace(/-/g, '/'));
        var out_now = Date.now();
        var out_day = episode.air_date ? Math.round((out_air.getTime() - out_now) / (24 * 60 * 60 * 1000)) : 1;
        var out_txt = Lang.translate('full_episode_days_left') + ': ' + (episode.air_date ? out_day : '- -');
        episode.timeline = Timeline$1.view(hash);
        episode.time = Utils$2.secondsToTime(episode.runtime * 60, true);
        episode.title = episode.name || Lang.translate('torrent_serial_episode') + ' ' + number;
        episode.quality = out_day > 0 ? out_txt : '';
        if (episode.vote_average) info.push(Template.get('season_episode_rate', {
          rate: parseFloat(episode.vote_average + '').toFixed(1)
        }, true));
        if (episode.air_date) info.push(Utils$2.parseTime(episode.air_date).full);
        episode.info = info.length ? info.map(function (i) {
          return '<span>' + i + '</span>';
        }).join('<span class="season-episode-split">●</span>') : '';
        var html = Template.get('season_episode', episode);
        var loader = html.find('.season-episode__loader');
        var image = html.find('.season-episode__img');
        var viewed = function viewed() {
          html.find('.season-episode__viewed').remove();
          if (Boolean(episode.timeline.percent)) html.find('.season-episode__img').append('<div class="season-episode__viewed">' + Template.get('icon_viewed', {}, true) + '</div>');
        };
        html.find('.season-episode__timeline').append(Timeline$1.render(episode.timeline));
        if (out_day > 0) html.css('opacity', '0.5');else {
          viewed();
          if (Boolean(episode.timeline.percent)) last = html[0];
          html.on('hover:enter', function () {
            if (Boolean(episode.timeline.percent)) {
              episode.timeline.time = 0;
              episode.timeline.percent = 0;
            } else {
              episode.timeline.time = episode.timeline.duration * 0.95;
              episode.timeline.percent = 95;
            }
            Timeline$1.update(episode.timeline);
            viewed();
          });
        }
        html.on('hover:focus', function (e) {
          last = e.target;
          scroll.update($(e.target), true);
        }).on('visible', function () {
          var img = html.find('img')[0];
          img.onerror = function () {
            img.src = './img/img_broken.svg';
          };
          img.onload = function () {
            image.addClass('season-episode__img--loaded');
            loader.remove();
            image.append('<div class="season-episode__episode-number">' + ('0' + number).slice(-2) + '</div>');
          };
          if (episode.still_path) img.src = TMDB$1.image('t/p/w300' + episode.still_path);else if (episode.img) img.src = episode.img;else {
            loader.remove();
            image.append('<div class="season-episode__episode-number">' + ('0' + number).slice(-2) + '</div>');
          }
        }).on('hover:hover hover:touch', function (e) {
          last = e.target;
          Navigator.focused(last);
        });
        scroll.append(html);
      });
      if (last) scroll.update($(last), true);
      Layer.visible(scroll.render(true));
      Controller.enable('content');
    };
    this.start = function () {
      if (Activity$1.active().activity !== this.activity) return;
      Background.immediately(Utils$2.cardImgBackgroundBlur(object.movie));
      Controller.add('content', {
        toggle: function toggle() {
          Controller.collectionSet(scroll.render(), explorer.render());
          Controller.collectionFocus(last || false, scroll.render());
          Navigator.remove(explorer.render().find('.explorer-card__head-img')[0]);
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else explorer.toggle();
        },
        right: function right() {
          filter.show(Lang.translate('title_filter'), 'filter');
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('head');
        },
        down: function down() {
          if (Navigator.canmove('down')) Navigator.move('down');
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function () {
      return explorer.render();
    };
    this.destroy = function () {};
  }

  function component$2(object) {
    var network = new create$e();
    var scroll = new create$f({
      mask: true,
      over: true,
      step: 250,
      end_ratio: 2
    });
    var items = [];
    var html = document.createElement('div');
    var body = document.createElement('div');
    var last;
    var active = 0;
    var follow = function follow(event) {
      if (event.name == 'person_subscribes_id') {
        items.forEach(function (card) {
          if (event.value.indexOf(card.data.id) == -1) {
            card.render(true).style.opacity = 0.5;
            card.onEnter = function () {};
          }
        });
      }
    };
    this.create = function () {
      this.activity.loader(true);
      Storage.listener.follow('change', follow);
      Account.persons(this.build.bind(this), this.empty.bind(this));
    };
    this.empty = function () {
      var empty = new Empty();
      html.appendChild(empty.render(true));
      this.start = empty.start;
      this.activity.loader(false);
      this.activity.toggle();
    };
    this.append = function (data, append) {
      data.forEach(function (element) {
        var card = new Card(element.person, {
          card_category: true
        });
        card.create();
        card.onFocus = function (target, card_data) {
          last = target;
          active = items.indexOf(card);
          scroll.update(card.render(true));
          Background.change(Utils$2.cardImgBackgroundBlur(card_data));
        };
        card.onTouch = function (target, card_data) {
          last = target;
          active = items.indexOf(card);
        };
        card.onEnter = function (target, card_data) {
          last = target;
          Activity$1.push({
            url: element.person.url,
            title: Lang.translate('title_person'),
            component: 'actor',
            id: element.person_id,
            source: object.source
          });
        };
        card.onMenu = function () {};
        body.appendChild(card.render(true));
        items.push(card);
        if (append) Controller.collectionAppend(card.render(true));
      });
    };
    this.limit = function () {
      var limit_view = 12;
      var lilit_collection = 36;
      var colection = items.slice(Math.max(0, active - limit_view), active + limit_view);
      items.forEach(function (item) {
        if (colection.indexOf(item) == -1) {
          item.render(true).classList.remove('layer--render');
        } else {
          item.render(true).classList.add('layer--render');
        }
      });
      Navigator.setCollection(items.slice(Math.max(0, active - lilit_collection), active + lilit_collection).map(function (c) {
        return c.render(true);
      }));
      Navigator.focused(last);
      Layer.visible(scroll.render(true));
    };
    this.build = function (data) {
      var _this = this;
      if (data.length) {
        body.classList.add('category-full');
        scroll.minus();
        scroll.onScroll = this.limit.bind(this);
        scroll.onWheel = function (step) {
          if (!Controller.own(_this)) _this.start();
          if (step > 0) Navigator.move('down');else Navigator.move('up');
        };
        this.append(data);
        scroll.append(body);
        html.appendChild(scroll.render(true));
        this.limit();
        this.activity.loader(false);
        this.activity.toggle();
      } else {
        this.empty();
      }
    };
    this.start = function () {
      var _this2 = this;
      Controller.add('content', {
        link: this,
        toggle: function toggle() {
          if (_this2.activity.canRefresh()) return false;
          Controller.collectionSet(scroll.render(true));
          Controller.collectionFocus(last || false, scroll.render(true));
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        right: function right() {
          if (_this2.onRight) {
            if (Navigator.canmove('right')) Navigator.move('right');else _this2.onRight();
          } else Navigator.move('right');
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('head');
        },
        down: function down() {
          if (Navigator.canmove('down')) Navigator.move('down');
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.refresh = function () {
      this.activity.needRefresh();
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function (js) {
      return js ? html : $(html);
    };
    this.destroy = function () {
      network.clear();
      Arrays.destroy(items);
      scroll.destroy();
      Storage.listener.remove('change', follow);
      html.remove();
      body.remove();
      items = [];
    };
  }

  var network$3 = new create$e();
  function api$1() {
    return Utils$2.protocol() + object$2.pris_domain + '/api/';
  }
  function account() {
    return new Promise(function (resolve, reject) {
      var account = Storage.get('account', '{}');
      if (account.token) {
        resolve(account);
      } else {
        reject({
          status: 345
        });
      }
    });
  }
  function facts(card_id, card_type, callback, error) {
    account().then(function (acc) {
      network$3.silent(api$1() + 'ai/generate/facts/' + card_id + '/' + card_type, callback, error, false, {
        headers: {
          token: acc.token,
          profile: acc.profile.id
        }
      });
    })["catch"](error);
  }
  function recommendations(card_id, card_type, callback, error) {
    account().then(function (acc) {
      network$3.silent(api$1() + 'ai/generate/recommend/' + card_id + '/' + card_type, callback, error, false, {
        headers: {
          token: acc.token,
          profile: acc.profile.id
        }
      });
    })["catch"](error);
  }
  function _search(query, callback, error) {
    account().then(function (acc) {
      network$3.silent(api$1() + 'ai/search/' + encodeURIComponent(query), callback, error, false, {
        headers: {
          token: acc.token,
          profile: acc.profile.id
        }
      });
    })["catch"](error);
  }
  function discovery() {
    var source = {
      title: Lang.translate('title_ai_assistant'),
      search: function search(params, oncomplite) {
        source.params.nofound = Lang.translate('search_nofound');
        _search(decodeURIComponent(params.query), function (json) {
          json.title = Lang.translate('title_ai_assistant');
          json.results.forEach(function (element) {
            element.source = 'tmdb';
          });
          oncomplite(json.results.length ? [json] : []);
        }, function (e) {
          if (e.decode_code == 600) source.params.nofound = Lang.translate('ai_search_limit');
          oncomplite([]);
        });
      },
      onCancel: function onCancel() {
        network$3.clear();
      },
      params: {
        lazy: true,
        align_left: true,
        start_typing: Lang.translate('ai_search_start_typing')
      }
    };
    return source;
  }
  var Ai = {
    facts: facts,
    recommendations: recommendations,
    discovery: discovery
  };

  function Facts(object) {
    var explorer = new Explorer(object);
    var network = new create$e();
    var scroll = new create$f({
      mask: true,
      over: true,
      nopadding: true
    });
    var html = $('<div class="torrent-list"></div>');
    var cache = 'facts_' + object.movie.id + '_' + (object.movie.name ? 'tv' : 'movie');
    this.create = function () {
      var _this = this;
      this.activity.loader(false);
      explorer.render().find('.explorer__files-head').remove();
      explorer.appendFiles(scroll.render(true));
      scroll.append(html);
      scroll.minus();
      var text_cache = '';
      Prisma.Cache.getData('other', cache).then(function (text) {
        text_cache = text;
      })["finally"](function () {
        if (text_cache) {
          _this.build(text_cache);
        } else {
          _this.loading();
          Layer.update();
          Ai.facts(object.movie.id, object.movie.name ? 'tv' : 'movie', function (data) {
            Cache.rewriteData('other', cache, data.text)["finally"](function () {});
            _this.build(data.text);
          }, _this.empty.bind(_this));
        }
      });
      return this.render();
    };
    this.loading = function () {
      var ico = Template.get('icon_text', {}, true);
      var tpl = Template.get('ai_search_animation', {
        icon: ico
      });
      var box = $('<div class="ai-box-scroll layer--wheight"></div>');
      box.append(tpl);
      scroll.append(box);
    };
    this.empty = function (event) {
      var code = network.errorCode(event);
      var text = {
        title: Lang.translate('network_error'),
        descr: Lang.translate('subscribe_noinfo')
      };
      if (code == 600) {
        text.title = Lang.translate('ai_subscribe_title');
        text.descr = Lang.translate('ai_subscribe_descr');
        text.noicon = true;
        text.width = 'medium';
      }
      if (code == 347) {
        text.title = Lang.translate('empty_title_two');
        text.descr = Lang.translate('empty_text_two');
      }
      if (code == 345) {
        text.title = Lang.translate('account_login_failed');
        text.descr = Lang.translate('account_login_wait');
      }
      if (code == 245) {
        text.descr = event.message || Lang.translate('subscribe_noinfo');
      }
      scroll.clear();
      var empty = new Empty(text);
      empty.onLeft = function () {
        explorer.toggle();
      };
      empty.render().addClass('layer--wheight');
      html.append(empty.render());
      scroll.append(html);
      this.start = empty.start.bind(empty);
      this.activity.toggle();
    };
    this.build = function (text) {
      try {
        html.html(Utils$2.simpleMarkdownParser(text));
        html.find('h1').remove();
        html.addClass('text-markdow');
        scroll.render(true).removeClass('scroll--nopadding');
        scroll.clear();
        scroll.append(html);
        html.addClass('animate-up-content animate-opacity');
        this.activity.toggle();
      } catch (e) {
        this.empty({
          status: 245,
          message: e.message
        });
      }
    };
    this.start = function () {
      if (Activity$1.active().activity !== this.activity) return;
      Background.immediately(Utils$2.cardImgBackgroundBlur(object.movie));
      Controller.add('content', {
        link: this,
        invisible: true,
        toggle: function toggle() {
          Controller.collectionSet(scroll.render(true));
          Controller.collectionFocus(false, scroll.render(true));
        },
        left: function left() {
          explorer.toggle();
        },
        up: function up() {
          if (scroll.position() == 0) Controller.toggle('head');else scroll.wheel(-150);
        },
        down: function down() {
          scroll.wheel(150);
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function () {
      return explorer.render();
    };
    this.destroy = function () {
      network.clear();
      scroll.destroy();
      html.remove();
    };
  }

  function Recommendations(object) {
    var explorer = new Explorer(object);
    var network = new create$e();
    var scroll = new create$f({
      mask: true,
      over: true,
      nopadding: true
    });
    var html = $('<div></div>');
    var items = [];
    var last;
    var active;
    this.create = function () {
      var _this = this;
      this.activity.loader(false);
      explorer.render().find('.explorer__files-head').remove();
      explorer.appendFiles(scroll.render(true));
      scroll.append(html);
      scroll.minus();
      this.loading();
      Ai.recommendations(object.movie.id, object.movie.name ? 'tv' : 'movie', function (data) {
        if (data.results.length == 0) _this.empty({
          status: 347
        });else _this.build(data);
      }, this.empty.bind(this));
      return this.render();
    };
    this.loading = function () {
      var ico = Template.get('icon_card', {}, true);
      var tpl = Template.get('ai_search_animation', {
        icon: ico
      });
      var box = $('<div class="ai-box-scroll layer--wheight"></div>');
      box.append(tpl);
      scroll.append(box);
    };
    this.empty = function (event) {
      var code = network.errorCode(event);
      var text = {
        title: Lang.translate('network_error'),
        descr: Lang.translate('subscribe_noinfo')
      };
      if (code == 600) {
        text.title = Lang.translate('ai_subscribe_title');
        text.descr = Lang.translate('ai_subscribe_descr');
        text.noicon = true;
        text.width = 'medium';
      }
      if (code == 347) {
        text.title = Lang.translate('empty_title_two');
        text.descr = Lang.translate('empty_text_two');
      }
      if (code == 345) {
        text.title = Lang.translate('account_login_failed');
        text.descr = Lang.translate('account_login_wait');
      }
      if (code == 245) {
        text.descr = event.message || Lang.translate('subscribe_noinfo');
      }
      scroll.clear();
      var empty = new Empty(text);
      empty.onLeft = function () {
        explorer.toggle();
      };
      empty.render().addClass('layer--wheight');
      html.append(empty.render());
      scroll.append(html);
      this.start = empty.start.bind(empty);
      this.activity.toggle();
    };
    this.build = function (data) {
      var _this2 = this;
      try {
        scroll.render(true).removeClass('scroll--nopadding');
        scroll.clear();
        html.addClass('category-full');
        scroll.onScroll = this.limit.bind(this);
        scroll.onWheel = function (step) {
          if (!Controller.own(_this2)) _this2.start();
          if (step > 0) Navigator.move('down');else Navigator.move('up');
        };
        this.draw(data.results);
        scroll.append(html);
        this.limit();
        this.activity.toggle();
      } catch (e) {
        this.empty({
          status: 245,
          message: e.message
        });
      }
    };
    this.draw = function (results) {
      results.forEach(function (element) {
        var card = new Card(element, {
          object: object,
          card_explorer: true
        });
        card.create();
        card.onFocus = function (target, card_data) {
          last = target;
          active = items.indexOf(card);
          scroll.update(card.render(true));
          Background.change(Utils$2.cardImgBackground(card_data));
        };
        card.onTouch = function (target, card_data) {
          last = target;
          active = items.indexOf(card);
        };
        card.onEnter = function (target, card_data) {
          last = target;
          Activity$1.push({
            url: card_data.url,
            component: 'full',
            id: element.id,
            method: card_data.name ? 'tv' : 'movie',
            card: element,
            source: element.source || object.source
          });
        };
        html.append(card.render(true));
        items.push(card);
      });
    };
    this.limit = function () {
      var limit_view = 12;
      var lilit_collection = 36;
      var colection = items.slice(Math.max(0, active - limit_view), active + limit_view);
      items.forEach(function (item) {
        if (colection.indexOf(item) == -1) {
          item.render(true).classList.remove('layer--render');
        } else {
          item.render(true).classList.add('layer--render');
        }
      });
      Navigator.setCollection(items.slice(Math.max(0, active - lilit_collection), active + lilit_collection).map(function (c) {
        return c.render(true);
      }));
      Navigator.focused(last);
      Layer.visible(scroll.render(true));
    };
    this.start = function () {
      if (Activity$1.active().activity !== this.activity) return;
      Background.immediately(Utils$2.cardImgBackgroundBlur(object.movie));
      Controller.add('content', {
        link: this,
        invisible: true,
        toggle: function toggle() {
          Controller.collectionSet(scroll.render(true));
          Controller.collectionFocus(last || false, scroll.render(true));
        },
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else explorer.toggle();
        },
        right: function right() {
          Navigator.move('right');
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('head');
        },
        down: function down() {
          if (Navigator.canmove('down')) Navigator.move('down');
        },
        back: function back() {
          Activity$1.backward();
        }
      });
      Controller.toggle('content');
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function () {
      return explorer.render();
    };
    this.destroy = function () {
      network.clear();
      Arrays.destroy(items);
      scroll.destroy();
      html.remove();
      items = [];
    };
  }

  var component$1 = {
    main: component$k,
    full: component$j,
    category: component$g,
    category_full: component$h,
    actor: component$f,
    favorite: component$e,
    torrents: component$d,
    mytorrents: component$c,
    relise: component$b,
    collections: component$a,
    collections_view: component$9,
    nocomponent: component$8,
    timetable: component$7,
    subscribes: component$6,
    company: component$5,
    feed: Feed,
    bookmarks: component$4,
    episodes: component$3,
    myperson: component$2,
    ai_facts: Facts,
    ai_recommendations: Recommendations
  };

  /**
   * Создать компонент
   * @param {{component:string}} object 
   * @returns 
   */
  function create$4(object) {
    if (component$1[object.component]) {
      try {
        return new component$1[object.component](object);
      } catch (e) {
        console.log('Component', 'create error', e.stack);
        return new component$1.nocomponent(object);
      }
    } else {
      return new component$1.nocomponent(object);
    }
  }

  /**
   * Добавить
   * @param {string} name 
   * @param {class} comp 
   */
  function add$5(name, comp) {
    component$1[name] = comp;
  }

  /**
   * Получить компонент
   * @param {string} name 
   * @returns {class}
   */
  function get$2(name) {
    return component$1[name];
  }
  var Component = {
    create: create$4,
    add: add$5,
    get: get$2
  };

  var html$6;
  function init$q() {
    html$6 = $("<div style=\"position: fixed; left: 0; top: 50%; right: 0; z-index: 101; text-align: center; padding-top: 6em; padding-top: 13vh;\">\n        <div style=\"font-size: 1.5em; line-height: 1.6\" class=\"lp-step\"></div>\n        <div style=\"font-size: 0.9em; opacity: 0.5\" class=\"lp-status\"></div>\n    </div>");
    $('body').append(html$6);
  }
  function step(position) {
    // html.find('.lp-step').text(Lang.translate('loading_progress_step_' + position))
  }
  function status$1(text) {
    // html.find('.lp-status').text(text)
  }
  function destroy$1() {
    html$6.remove();
  }
  var LoadingProgress = {
    init: init$q,
    step: step,
    status: status$1,
    destroy: destroy$1
  };

  function close$2() {
    if (Platform.is('apple_tv')) window.location.assign('exit://exit');
    if (Platform.is('tizen') && typeof tizen !== 'undefined' && tizen.application) {
      try {
        tizen.application.getCurrentApplication().exit();
      } catch (e) {
        console.log('Tizen exit error:', e);
      }
    }
    if (Platform.is('webos') && typeof window.close == 'function') window.close();
    if (Platform.is('android')) Android.exit();
    if (Platform.is('orsay')) Orsay$1.exit();
    if (Platform.is('netcast')) window.NetCastBack();
    if (Platform.is('noname')) window.history.back();
  }
  function loadStyle() {
    /** Start - для orsay одни стили, для других другие */
    var old_css = $('link[href="css/app.css"]');
    if (Platform.is('orsay') && window.location.host.indexOf('localhost') == -1) {
      var urlStyle = 'http://prisma.ws/css/app.css?v';
      //Для нового типа виджета берем сохраненный адрес загрузки
      if (Orsay$1.isNewWidget()) {
        //Для фрейм загрузчика запишем полный url
        if (location.protocol != 'file:') {
          var newloaderUrl = location.href.replace(/[^/]*$/, '');
          if (newloaderUrl.slice(-1) == '/') {
            newloaderUrl = newloaderUrl.substring(0, newloaderUrl.length - 1);
          }
          if (Orsay$1.getLoaderUrl() != newloaderUrl) {
            Orsay$1.setLoaderUrl(newloaderUrl);
          }
        }
        //console.log('Loader', 'start url: ', Orsay.getLoaderUrl());
        urlStyle = Orsay$1.getLoaderUrl() + '/css/app.css?v';
      }
      Utils$2.putStyle([urlStyle + object$2.css_version], function () {
        old_css.remove();
      });
    } else if (old_css.length) {
      Utils$2.putStyle([object$2.github_prisma + 'css/app.css?v' + object$2.css_version], function () {
        LoadingProgress.status('PutStyle ' + object$2.css_version);
        old_css.remove();
      }, function () {});
    }
  }
  function modalClose() {
    var controller = Controller.enabled().name;
    Modal.open({
      title: '',
      align: 'center',
      zIndex: 300,
      html: $('<div class="about">' + Lang.translate('close_app_modal') + '</div>'),
      buttons: [{
        name: Lang.translate('settings_param_no'),
        onSelect: function onSelect() {
          Modal.close();
          Controller.toggle(controller);
        }
      }, {
        name: Lang.translate('settings_param_yes'),
        onSelect: function onSelect() {
          Modal.close();
          Controller.toggle(controller);
          close$2();
        }
      }]
    });
  }
  var App = {
    close: close$2,
    loadStyle: loadStyle,
    modalClose: modalClose
  };

  var listener$3 = start$8();
  var activites = [];
  var callback = false;
  var fullout = false;
  var content;
  var slides;
  var maxsave;
  var base;
  function Activity(component, object) {
    var slide = Template.js('activity');
    var body = slide.querySelector('.activity__body');
    this.stoped = false;
    this.started = false;

    /**
     * Добовляет активити в список активитис
     */
    this.append = function () {
      slides.appendChild(slide);
    };

    /**
     * Создает новую активность
     */
    this.create = function () {
      try {
        component.create(body);
        var _render = component.render(true);
        body.appendChild(_render instanceof jQuery ? _render[0] : _render);
      } catch (e) {
        console.log('Activity', 'create error:', e.stack);
      }
    };

    /**
     * Показывает загрузку
     * @param {boolean} status 
     */
    this.loader = function (status) {
      if (status) slide.classList.add('activity--load');else slide.classList.remove('activity--load');
    };

    /**
     * Создает повторно
     */
    this.restart = function () {
      this.append();
      this.stoped = false;
      component.start();
    };

    /**
     * Стартуем активную активность
     */
    this.start = function () {
      this.started = true;
      Controller.add('content', {
        invisible: true,
        update: function update() {},
        toggle: function toggle() {},
        left: function left() {
          Controller.toggle('menu');
        },
        up: function up() {
          Controller.toggle('head');
        },
        back: function back() {
          backward();
        }
      });
      Controller.toggle('content');

      //Layer.update(slide)

      if (this.stoped) this.restart();else component.start();
    };

    /**
     * Пауза
     */
    this.pause = function () {
      this.started = false;
      component.pause();
    };

    /**
     * Включаем активность если она активна
     */
    this.toggle = function () {
      if (this.started) this.start();
    };
    this.refresh = function () {
      if (component.refresh) component.refresh();
    };
    this.canRefresh = function () {
      var status = this.started && this.need_refresh && inActivity() ? true : false;
      if (status) {
        this.need_refresh = false;
        replace(object);
      }
      return status;
    };
    this.needRefresh = function () {
      var _this = this;
      if (body.parentElement) body.parentElement.removeChild(body);
      this.need_refresh = true;
      var wait = Template.js('activity_wait_refresh');
      wait.addEventListener('click', function (e) {
        if (DeviceInput.canClick(e.originalEvent)) _this.canRefresh();
      });
      slide.appendChild(wait);
    };

    /**
     * Стоп
     */
    this.stop = function () {
      this.started = false;
      if (this.stoped) return;
      this.stoped = true;
      component.stop();
      if (slide.parentElement) slide.parentElement.removeChild(slide);
    };

    /**
     * Рендер
     */
    this.render = function (js) {
      return js ? slide : $(slide);
    };

    /**
     * Получить класс компонента
     */
    this.component = function () {
      return component;
    };

    /**
     * Уничтожаем активность
     */
    this.destroy = function () {
      component.destroy();

      //после create работает долгий запрос и затем вызывается build, однако уже было вызвано destroy и возникают ошибки, поэтому заодно чистим функцию build и empty
      for (var f in component) {
        if (typeof component[f] == 'function') {
          component[f] = function () {};
        }
      }
      slide.remove();
    };
    this.append();
  }
  function parseStart() {
    if (window.start_deep_link) return;
    var id = Utils$2.gup('card');
    if (id) {
      window.start_deep_link = {
        id: id,
        component: "full",
        method: Utils$2.gup('media') || 'movie',
        source: Utils$2.gup('source') || 'cub',
        card: {
          id: id,
          source: Utils$2.gup('source') || 'cub'
        }
      };
    } else if (!(Platform.is('orsay') || Platform.is('netcast') || Platform.is('webos') || Platform.is('tizen'))) {
      try {
        var params = new URLSearchParams(window.location.search);
        if (params.has('component')) {
          window.start_deep_link = {};
          params.forEach(function (v, n) {
            window.start_deep_link[n] = v;
          });
        }
      } catch (e) {
        console.log('Activity', 'url params start error:', e.message);
      }
    }
  }

  /**
   * Запуск
   */
  function init$p() {
    content = Template.js('activitys');
    slides = content.querySelector('.activitys__slides');
    maxsave = Storage.get('pages_save_total', 5);
    base = document.querySelector('head base');
    parseStart();
    empty();
    var wait = true;
    var swip_status = 0;
    var swip_timer;
    var start_time = Date.now();
    setTimeout(function () {
      wait = false;
    }, 1500);
    setTimeout(last$1, 500);
    window.addEventListener('popstate', function () {
      if (window.god_enabled) Prisma.Noty.show('Popstate - [' + (fullout || wait) + ']');
      if (fullout || wait) return;
      Screensaver$2.stop();
      if (swip_status == 0) empty(); //это чтоб не выходило с приложения, однако на айфонах это вызвает зависание на 2-3 сек

      listener$3.send('popstate', {
        count: activites.length
      });
      if (callback) callback();else {
        backward();
      }
    });
    Storage.listener.follow('change', function (event) {
      if (event.name == 'pages_save_total') maxsave = Storage.get('pages_save_total', 5);
      if (event.name == 'light_version') {
        activites.forEach(function (activity) {
          if (activity.activity) activity.activity.refresh();
        });
      }
    });

    // исключительно для огрызков пришлось мутить работу свайпа назад

    if (Platform.is('apple')) {
      var body = document.querySelector('body');
      body.addEventListener('touchstart', function (e) {
        var point = e.touches[0] || e.changedTouches[0];
        if (point.clientX < window.innerWidth * 0.15 && point.clientX < window.innerHeight - 120) {
          swip_status = 1;
          clearTimeout(swip_timer);
          swip_timer = setTimeout(function () {
            swip_status = 0;
          }, 2000);
        } else {
          swip_status = 0;
        }
      });
    }

    // выход из приложения

    listener$3.follow('backward', function (event) {
      var noout = Platform.is('browser') || Platform.desktop();
      if (event.count == 1 && Date.now() > start_time + 1000 * 2 && !noout) {
        var enabled = Controller.enabled().name;
        Select.show({
          title: Lang.translate('title_out'),
          items: [{
            title: Lang.translate('title_out_confirm'),
            out: true
          }, {
            title: Lang.translate('cancel')
          }],
          onSelect: function onSelect(a) {
            if (a.out) {
              out();
              Controller.toggle(enabled);
              App.close();
            } else {
              Controller.toggle(enabled);
            }
          },
          onBack: function onBack() {
            Controller.toggle(enabled);
          }
        });
      }
    });
  }

  /**
   * Лимит активностей, уничтожать если больше maxsave
   */
  function limit() {
    var curent = active$2();
    if (curent && curent.activity) curent.activity.pause();
    var tree_stop = activites.slice(-2);
    if (tree_stop.length > 1 && tree_stop[0].activity) tree_stop[0].activity.stop();
    var tree_destroy = activites.slice(-maxsave);
    if (tree_destroy.length > maxsave - 1) {
      var first = tree_destroy[0];
      if (first.activity) {
        first.activity.destroy();
        Prisma.Listener.send('activity', {
          component: first.component,
          type: 'destroy',
          object: first
        });
        first.activity = null;
      }
    }
  }

  /**
   * Обновить адрес в строке из активности
   */
  function pushState(object, replace, mix) {
    var path = window.location.protocol == 'file:' ? '' : base ? '/' : '';
    if (!window.prisma_settings.push_state) return window.history.pushState(null, null, path);
    var data = Arrays.clone(object);
    delete data.activity;
    var comp = [];
    for (var n in data) {
      if (typeof data[n] == 'string' || typeof data[n] == 'number' || typeof data[n] == 'boolean') comp.push(n + '=' + encodeURIComponent(data[n]));
    }
    var card = object.card || object.movie;
    var meth = object.method || (card ? card.name ? 'tv' : 'movie' : '');
    var sour = object.source || (card ? card.source : 'tmdb');
    var durl = card && card.id ? '?card=' + card.id + (meth ? '&media=' + meth : '') + (sour ? '&source=' + sour : '') : '?' + comp.join('&');
    if (mix) durl += '&' + mix;
    if (replace) window.history.replaceState(null, null, path + durl);else window.history.pushState(null, null, path + durl);
  }

  /**
   * Обновить адрес в строке из активности с добавлением дополнительных параметров
   */
  function mixState(mix) {
    var curent = active$2();
    if (curent && curent.activity) pushState(curent, true, mix);
  }

  /**
   * Добавить новую активность
   * @param {{component:string}} object 
   */
  function push$1(object) {
    limit();
    create$3(object);
    activites.push(object);
    start$3(object);
    pushState(object);
  }

  /**
   * Создать новую активность
   * @param {{component:string}} object 
   */
  function create$3(object) {
    var comp = Component.create(object);
    object.activity = new Activity(comp, object);
    comp.activity = object.activity;
    Prisma.Listener.send('activity', {
      component: object.component,
      type: 'init',
      object: object
    });
    object.activity.create();
    Prisma.Listener.send('activity', {
      component: object.component,
      type: 'create',
      object: object
    });
  }

  /**
   * Вызов обратно пользователем
   */
  function back$3() {
    listener$3.send('popstate', {
      count: activites.length
    });
    if (callback) callback();else {
      backward();
    }
  }

  /**
   * Получить активную активность
   * @returns {object}
   */
  function active$2() {
    return activites[activites.length - 1];
  }
  function inActivity() {
    return $('body').hasClass('settings--open') || $('body').hasClass('menu--open') ? false : true;
  }

  /**
   * Создать пустую историю
   */
  function empty() {
    var curent = active$2();
    if (curent && curent.activity) pushState(curent, false, 'r=' + Math.random());
  }

  /**
   * Получить все активности
   * @returns {[{component:string, activity:class}]}
   */
  function all() {
    return activites;
  }

  /**
   * Получить рендеры всех активностей
   * @returns {array}
   */
  function renderLayers(js) {
    var result = [];
    all().forEach(function (item) {
      if (item.activity) result.push(item.activity.render(js));
    });
    return result;
  }

  /**
   * Обработать событие назад
   */
  function backward() {
    callback = false;
    listener$3.send('backward', {
      count: activites.length
    });
    if (activites.length == 1) return;
    Array.from(slides.children).forEach(function (slide) {
      return slide.classList.remove('activity--active');
    });
    var curent = activites.pop();
    if (curent) {
      setTimeout(function () {
        curent.activity.destroy();
        Prisma.Listener.send('activity', {
          component: curent.component,
          type: 'destroy',
          object: curent
        });
      }, 200);
    }
    var previous_tree = activites.slice(-maxsave);
    if (previous_tree.length > maxsave - 1) {
      create$3(previous_tree[0]);
    }
    previous_tree = activites.slice(-1)[0];
    if (previous_tree) {
      if (previous_tree.activity) {
        start$3(previous_tree);
        Prisma.Listener.send('activity', {
          component: previous_tree.component,
          type: 'archive',
          object: previous_tree
        });
        pushState(previous_tree, true);
      } else {
        create$3(previous_tree);
        start$3(previous_tree);
        pushState(previous_tree);
      }
    }
  }

  /**
   * Сохранить активность в память
   * @param {{component:string, activity:class}} object 
   */
  function save(object) {
    var saved = {};
    for (var i in object) {
      if (i !== 'activity') saved[i] = object[i];
    }
    Storage.set('activity', saved);
  }

  /**
   * Получить данные активности
   * @param {{component:string, activity:class}} object 
   * @returns {{component:string}}
   */
  function extractObject(object) {
    var saved = {};
    for (var i in object) {
      if (i !== 'activity') saved[i] = object[i];
    }
    return saved;
  }

  /**
   * Активируем следующию активность 
   * @param {{component:string, activity:class}} object 
   */
  function start$3(object) {
    object.activity.start();
    save(object);
    Array.from(slides.children).forEach(function (slide) {
      return slide.classList.remove('activity--active');
    });
    object.activity.render(true).classList.add('activity--active');
    Head.title(object.title);
    Prisma.Listener.send('activity', {
      component: object.component,
      type: 'start',
      object: object
    });
  }

  /**
   * С какой активности начать запуск лампы
   */
  function last$1() {
    var active = Storage.get('activity', 'false');
    var start_from = Storage.field("start_page");
    if (window.prisma_settings.iptv) {
      active = {
        component: 'iptv',
        page: 1
      };
      push$1(active);
    } else if (window.start_deep_link) {
      push$1(window.start_deep_link);
    } else if (active && start_from === "last") {
      if (active.page) active.page = 1;
      push$1(active);
    } else {
      var _start_from$split = start_from.split('@'),
        _start_from$split2 = _slicedToArray(_start_from$split, 2),
        action = _start_from$split2[0],
        type = _start_from$split2[1];
      if (action == 'favorite') {
        push$1({
          url: '',
          title: Lang.translate(type == 'bookmarks' ? 'settings_input_links' : 'title_history'),
          component: type == 'bookmarks' ? 'bookmarks' : 'favorite',
          type: type,
          page: 1
        });
      } else if (action == 'movie') {
        push$1({
          url: action,
          title: 'Фильмы',
          component: "category",
          source: 'tmdb'
        });
      } else if (action == 'tv') {
        push$1({
          url: action,
          title: 'Сериалы',
          component: "category",
          source: 'tmdb'
        });
      } else if (action == 'anime') {
        push$1({
          url: 'discover/movie',
          title: 'Аниме',
          component: "category_full",
          keywords: "210024-anime",
          sort_by: 'primary_release_date.desc',
          source: 'tmdb',
          card_type: true,
          page: 1
        });
      } else {
        push$1({
          url: '',
          title: Lang.translate('title_main'),
          component: 'main',
          source: Storage.field('source'),
          page: 1
        });
      }
    }
  }

  /**
   * Рендер
   * @returns {object}
   */
  function render$3() {
    return content;
  }

  /**
   * Подключить обратный вызов при изменени истории
   * @param {*} call 
   */
  function call(call) {
    callback = call;
  }

  /**
   * Выход из лампы
   */
  function out() {
    fullout = true;
    back$3();
    for (var i = 0; i < window.history.length; i++) {
      back$3();
    }
    setTimeout(function () {
      fullout = false;
      empty();
    }, 100);
  }

  /**
   * Заменить активную активность
   * @param {object} replace 
   */
  function replace() {
    var replace = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var clear = arguments.length > 1 ? arguments[1] : undefined;
    var object = extractObject(active$2());
    for (var i in replace) {
      object[i] = replace[i];
    }
    var made = active$2();
    made.activity.destroy();
    Prisma.Listener.send('activity', {
      component: made.component,
      type: 'destroy',
      object: made
    });
    activites.pop();
    push$1(clear ? replace : object);
  }
  var Activity$1 = {
    init: init$p,
    listener: listener$3,
    push: push$1,
    back: back$3,
    render: render$3,
    backward: backward,
    call: call,
    last: last$1,
    out: out,
    replace: replace,
    active: active$2,
    all: all,
    extractObject: extractObject,
    renderLayers: renderLayers,
    inActivity: inActivity,
    pushState: pushState,
    mixState: mixState
  };

  var listener$2 = start$8();
  var active$1;
  var active_name = '';
  var controlls = {};
  var select_active;
  var try_close = false;
  function observe$1() {
    if (typeof MutationObserver == 'undefined') return;
    var observer = new MutationObserver(function (mutations) {
      for (var i = 0; i < mutations.length; i++) {
        var mutation = mutations[i];
        if (mutation.type == 'childList' && !mutation.removedNodes.length) {
          var selectors = Array.from(mutation.target.querySelectorAll('.selector'));
          selectors.forEach(function (elem) {
            if (!elem.classList.contains('hg-button')) bindEvents(elem);
          });
        }
      }
    });
    observer.observe(document, {
      childList: true,
      subtree: true
    });
  }
  function animateTriggerEnter(elem) {
    if (Storage.field('advanced_animation')) {
      elem.addClass('animate-trigger-enter');
      setTimeout(function () {
        elem.removeClass('animate-trigger-enter');
      }, 500);
    }
  }

  /**
   * Добавить контроллер
   * @param {String} name 
   * @param {Object} calls 
   */
  function add$4(name, calls) {
    controlls[name] = calls;
  }

  /**
   * Запустить функцию
   * @param {String} name 
   * @param {Object} params 
   */
  function run(name, params) {
    if (active$1) {
      if (active$1[name]) {
        if (typeof active$1[name] == 'function') active$1[name](params);else if (typeof active$1[name] == 'string') {
          run(active$1[name], params);
        }
      }
    }
  }

  /**
   * Двигать
   * @param {String} direction 
   */
  function move(direction) {
    run(direction);
  }

  /**
   * Вызов enter
   */
  function enter() {
    if (active$1 && active$1.enter) run('enter');else if (select_active) {
      animateTriggerEnter(select_active);
      Utils$2.trigger(select_active, 'hover:enter');
    }
  }

  /**
   * Вызов long
   */
  function _long() {
    if (active$1 && active$1["long"]) run('long');else if (select_active) Utils$2.trigger(select_active, 'hover:long');
  }

  /**
   * Завершить
   */
  function finish() {
    run('finish');
  }

  /**
   * Нажали назад
   */
  function back$2() {
    run('back');
  }

  /**
   * Переключить контроллер
   * @param {String} name 
   */
  function toggle$2(name) {
    if (active$1 && active$1.gone) active$1.gone(name);
    if (controlls[name]) {
      if (name == 'content') toContent();
      active$1 = controlls[name];
      active_name = name;
      Activity$1.call(function () {
        run('back');
      });
      if (active$1.toggle) active$1.toggle();
      if (active$1.update) active$1.update();else {
        Layer.update();
      }
      listener$2.send('toggle', {
        name: name
      });
    }
  }
  function bindEvents(elem) {
    if (elem.classList.contains('selector') && !elem.bind_events) {
      elem.bind_events = true;
      var long_position = 0;
      var long_timer;
      var longStart = function longStart() {
        clearTimeout(long_timer);
        var offset = elem.getBoundingClientRect();
        long_timer = setTimeout(function () {
          var time = elem.long_time || 0;
          offset = elem.getBoundingClientRect();
          if (time + 100 < Date.now()) {
            var mutation = Math.abs(long_position - (offset.top + offset.left));
            if (mutation < 30) Utils$2.trigger(elem, 'hover:long');
          }
          elem.long_time = Date.now();
        }, 800);
        long_position = offset.top + offset.left;
      };
      var longClear = function longClear() {
        clearTimeout(long_timer);
      };
      var touchStart = function touchStart() {
        longStart();
        Utils$2.trigger(elem, 'hover:touch');
      };
      var rightClick = function rightClick(e) {
        Utils$2.trigger(elem, 'hover:long');
      };
      elem.trigger_click = function (e) {
        if (Storage.field('navigation_type') == 'mouse' || Platform.screen('mobile')) {
          if (DeviceInput.canClick(e)) {
            animateTriggerEnter(elem);
            Utils$2.trigger(elem, 'hover:enter');
          }
        }
      };
      elem.trigger_mouseenter = function () {
        clearAllFocus();
        elem.classList.add('focus');
        Utils$2.trigger(elem, 'hover:hover');
      };
      elem.trigger_mouseleave = function () {
        elem.classList.remove('focus');
      };
      if (Storage.field('navigation_type') == 'mouse' || Platform.screen('mobile')) {
        elem.addEventListener('click', elem.trigger_click);
      }
      if (!Utils$2.isTouchDevice() && Storage.field('navigation_type') == 'mouse') {
        elem.addEventListener('mouseenter', elem.trigger_mouseenter);
        elem.addEventListener('mouseleave', elem.trigger_mouseleave);
        elem.addEventListener('mouseout', longClear);
        elem.addEventListener('mouseup', longClear);
        elem.addEventListener('mousedown', longStart);
        elem.addEventListener('contextmenu', rightClick);
      }
      if (Utils$2.isTouchDevice()) {
        elem.addEventListener('touchstart', touchStart);
        elem.addEventListener('touchend', longClear);
        elem.addEventListener('touchmove', longClear);
      }
    }
  }
  function enable(name) {
    if (active_name == name) toggle$2(name);
  }
  function clearSelects() {
    select_active = false;
    removeClass(['focus']);
  }
  function clearAllFocus() {
    var collection = Array.from(document.body.querySelectorAll('.selector'));
    collection.forEach(function (item) {
      return item.classList.remove('focus');
    });
  }

  /**
   * Вызвать событие
   * @param {String} name 
   * @param {Object} params 
   */
  function trigger$1(name, params) {
    run(name, params);
  }

  /**
   * Очистить классы
   * @param {Array} classes 
   */
  function removeClass(classes) {
    if (Navigator._collection) {
      Navigator._collection.forEach(function (element) {
        classes.forEach(function (class_name) {
          element.classList.remove(class_name);
        });
      });
    }
  }

  /**
   * Фокус на элементе
   * @param {Object} target 
   */
  function focus(target) {
    Utils$2.trigger(target, 'hover:focus');
    if (Platform.screen('tv')) {
      removeClass(['focus']);
      target.classList.add('focus');
    }
    select_active = target;
  }
  function collectionSet(html) {
    var append = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
    var visible_only = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    html = html instanceof jQuery ? html[0] : html;
    append = append instanceof jQuery ? append[0] : append;
    var colection = Array.from(html.querySelectorAll('.selector'));
    if (visible_only) colection = colection.filter(function (e) {
      return e.offsetParent !== null;
    });
    if (append) {
      colection = colection.concat(Array.from(append.querySelectorAll('.selector')));
    }
    if (colection.length || active$1.invisible) {
      clearSelects();
      Navigator.setCollection(colection);
    }
  }
  function collectionAppend(append) {
    append = append instanceof jQuery ? append.toArray() : append;
    if (!append.length) append = Array.from([append]);
    Navigator.multiAdd(append);
  }
  function collectionFocus(target, html) {
    var visible_only = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : false;
    html = html instanceof jQuery ? html[0] : html;
    target = target instanceof jQuery ? target[0] : target;
    if (target && target.offsetParent === null) target = false;
    if (target) {
      Navigator.focus(target);
    } else {
      var colection = Array.from(html.querySelectorAll('.selector')).filter(function (elem) {
        return !elem.classList.contains('hide');
      });
      if (visible_only) colection = colection.filter(function (e) {
        return e.offsetParent !== null;
      });
      if (colection.length) Navigator.focus(colection[0]);
    }
  }
  function own(link) {
    return active$1 && active$1.link == link;
  }
  function enabled() {
    return {
      name: active_name,
      controller: active$1
    };
  }
  function toContent() {
    if (try_close) return;
    try_close = true;
    var trys = 0;
    Screensaver$2.stopSlideshow();
    var any = function any() {
      return parseInt([$('body').hasClass('settings--open') ? 1 : 0, $('body').hasClass('selectbox--open') ? 1 : 0, $('.modal,.youtube-player,.player,.search-box,.search').length ? 1 : 0].join(''));
    };
    var _close = function close() {
      var contrl = enabled();
      trys++;
      if (any()) {
        try {
          if (contrl.controller.back) contrl.controller.back();
        } catch (e) {}
        if (trys < 10) _close();
      }
    };
    var remove = function remove() {
      try {
        if ($('body').hasClass('settings--open')) $('body').removeClass('settings--open');
        if ($('body').hasClass('selectbox--open')) Select.close();
        if ($('.modal').length) Modal.close();
        if ($('.player').length) Player.close();
        if ($('.search-box').length) $('.search-box').remove();
        if ($('body').hasClass('search--open')) Search.close();
        $('body').removeClass('ambience--enable');
      } catch (e) {}
    };
    _close();
    remove();
    try_close = false;
  }
  function clear$2() {
    clearSelects();
    Navigator.setCollection([]);
  }
  var Controller = {
    listener: listener$2,
    observe: observe$1,
    add: add$4,
    move: move,
    enter: enter,
    finish: finish,
    toggle: toggle$2,
    trigger: trigger$1,
    back: back$2,
    focus: focus,
    collectionSet: collectionSet,
    collectionFocus: collectionFocus,
    collectionAppend: collectionAppend,
    enable: enable,
    enabled: enabled,
    "long": _long,
    toContent: toContent,
    updateSelects: function updateSelects() {},
    own: own,
    clear: clear$2
  };

  var http = window.location.protocol == 'https:' ? 'https://' : 'http://';
  var layers = {
    search: {
      'sim': ['{MIC} {ABC} 1 2 3 4 5 6 7 8 9 0 {BKSP}', '{LANG} - + _ : ( ) [ ] . / {SPACE}'],
      'en': ['{MIC} q w e r t y u i o p {BKSP}', '{LANG} a s d f g h j k l', '{SIM} z x c v b n m . {SPACE}'],
      'uk': ['{MIC} й ц у к е н г ш щ з х ї {BKSP}', '{LANG} ф і в а п р о л д ж є', '{SIM} я ч с м и т ь б ю . {SPACE}'],
      'he': ['{MIC} ק ר א ט ו ן ם פ {BKSP}', '{LANG} ש ד ג כ ע י ח ל ך ף', '{SIM} ז ס ב ה נ מ צ ת ץ . {SPACE}'],
      'default': ['{MIC} й ц у к е н г ш щ з х ъ {BKSP}', '{LANG} ё ф ы в а п р о л д ж э', '{SIM} я ч с м и т ь б ю . {SPACE}']
    },
    clarify: {
      'en': ['1 2 3 4 5 6 7 8 9 0 - {BKSP}', 'q w e r t y u i o p', 'a s d f g h j k l', 'z x c v b n m .', '{MIC} {LANG} {SPACE} {SEARCH}'],
      'uk': ['1 2 3 4 5 6 7 8 9 0 - {BKSP}', 'й ц у к е н г ш щ з х ї', 'ф і в а п р о л д ж є', 'я ч с м и т ь б ю .', '{MIC} {LANG} {SPACE} {SEARCH}'],
      'he': ['1 2 3 4 5 6 7 8 9 0 - {BKSP}', 'ק ר א ט ו ן ם פ', 'ש ד ג כ ע י ח ל ך ף', 'ז ס ב ה נ מ צ ת ץ .', '{MIC} {LANG} {SPACE} {SEARCH}'],
      'default': ['1 2 3 4 5 6 7 8 9 0 - {BKSP}', 'й ц у к е н г ш щ з х ъ', 'ф ы в а п р о л д ж э', 'я ч с м и т ь б ю .', '{MIC} {LANG} {SPACE} {SEARCH}']
    },
    "default": {
      'en': ['{SIM} 1 2 3 4 5 6 7 8 9 0 - + = {BKSP}', '{LANG} q w e r t y u i o p', 'a s d f g h j k l / {ENTER}', '{SHIFT} z x c v b n m , . : ' + http, '{SPACE}'],
      'uk': ['{SIM} 1 2 3 4 5 6 7 8 9 0 - + = {BKSP}', '{LANG} й ц у к е н г ш щ з х ї', 'ф і в а п р о л д ж є {ENTER}', '{SHIFT} я ч с м и т ь б ю . : ' + http, '{SPACE}'],
      'he': ['{SIM} ק ר א ט ו ן ם פ {BKSP}', '{LANG} ש ד ג כ ע י ח ל ך ף', 'ז ס ב ה נ מ צ ת ץ . /', '{SHIFT} ! @ # $ % ^ & * ( ) {SPACE}'],
      'sim': ['{ABC} 1 2 3 4 5 6 7 8 9 0 - + = {BKSP}', '{LANG} ! @ # $ % ^ & * ( ) [ ]', '- _ = + \\ | [ ] { }', '; : \' " , . < > / ?', '{SPACE}'],
      'default': ['{SIM} 1 2 3 4 5 6 7 8 9 0 - + = {BKSP}', '{LANG} й ц у к е н г ш щ з х ъ', 'ф ы в а п р о л д ж э {ENTER}', '{SHIFT} я ч с м и т ь б ю , . : ' + http, '{SPACE}']
    },
    nums: {
      'default': ['0 1 2 3 4 {BKSP}', '5 6 7 8 9 {ENTER}']
    }
  };
  function add$3(name, layout) {
    layers[name] = layout;
  }
  function addLang(name, code, layout) {
    layers[name][code] = layout;
  }
  function get$1(name) {
    return layers[name];
  }
  var Layers = {
    add: add$3,
    addLang: addLang,
    get: get$1
  };

  function create$2() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var _keyClass = window.SimpleKeyboard["default"],
      _keyBord;
    var _lang_codes = {
      'ru': 'ru-RU',
      'en': 'en-US',
      'uk': 'uk-UA'
    };
    var last;
    var ime;
    var recognition;
    var simple = Storage.field('keyboard_type') !== 'prisma';
    var input;
    var last_value;
    var height = window.innerHeight;
    var mobile = Platform.screen('mobile') && params.textarea;
    if (params.keyboard) {
      simple = params.keyboard !== 'prisma';
    }
    this.listener = start$8();
    this.create = function () {
      var _this = this;
      if (simple) {
        input = $('<input type="text" id="orsay-keyboard" autocomplete="off" name="random_field_' + Utils$2.uid() + '" class="simple-keyboard-input selector" placeholder="' + Lang.translate('search_input') + '..." />');
        if (mobile) {
          input = $('<textarea id="orsay-keyboard" autocomplete="off" name="random_field_' + Utils$2.uid() + '" class="simple-keyboard-input selector" placeholder="' + Lang.translate('search_input') + '..." /></textarea>');
          input.on('input', function () {
            input[0].style.height = 'auto';
            input[0].style.height = input[0].scrollHeight + 'px';
          });
        }
        var time_blur = 0;
        var time_focus = 0;
        var stated, ended;
        if (Platform.is('orsay')) {
          ime = new IMEShell_Common();
          if ($('.settings-input--free').length > 0) {
            ime.setUseNumberMode(true);
          }
          ime.inputboxID = 'orsay-keyboard';
          ime.setUseIMEDim(false);
          ime.setMaxlength(256);
          ime.inputTitle = Lang.translate('search_input') + "...";
          ime.onKeyPressFunc = function (key, str, id) {
            switch (key) {
              case 29443: // Enter Key
              case 88: //return
              case 45:
                //exit 
                _this.listener.send('enter');
                ime.onClose();
                input.blur();
                break;
            }
          };
          ime.setOnTextChangeFunc = function (e) {
            input.val(e);
            var now_value = input.val();
            if (last_value !== now_value) {
              last_value = now_value;
              stated = ended = false;
              _this.listener.send('change', {
                value: now_value
              });
            }
          };
        }
        input.on('keyup change input keypress', function (e) {
          var now_value = input.val();
          if (last_value !== now_value) {
            last_value = now_value;
            stated = ended = false;
            _this.listener.send('change', {
              value: now_value
            });
          }
        });
        input.on('blur', function () {
          Keypad.enable();
          time_blur = Date.now();
          if (Platform.is('android') && Platform.screen('tv')) input.attr('disabled', 'true');
          _this.listener.send('blur');
        });
        input.on('focus', function () {
          if (!Platform.is('apple_tv')) Keypad.disable();
          time_focus = Date.now();
          if (!(Platform.is('browser') || Platform.desktop())) _this.listener.send('focus');
        });
        input.on('keyup', function (e) {
          if (time_focus + 1000 > Date.now()) return;
          var keys = [13, 65376, 29443, 117, 65385, 461, 27];
          var valu = input.val();
          var cart = e.target.selectionStart;
          if (keys.indexOf(e.keyCode) >= 0 && !(Utils$2.isTouchDevice() && params.textarea && Platform.screen('mobile'))) {
            e.preventDefault();
            console.log('Keyboard', 'blur key:', e.keyCode, 'value:', valu);
            input.blur();
          }
          if ((e.keyCode == 13 || e.keyCode == 65376) && !(Utils$2.isTouchDevice() && params.textarea && Platform.screen('mobile'))) _this.listener.send('enter');
          if (e.keyCode == 37 && cart == 0 && height == window.innerHeight) {
            if (stated) input.blur(), _this.listener.send('left');
            stated = true;
            ended = false;
          }
          if (e.keyCode == 39 && cart >= valu.length && height == window.innerHeight) {
            if (ended) input.blur(), _this.listener.send('right');
            ended = true;
            stated = false;
          }
          if (e.keyCode == 40) {
            if (height == window.innerHeight) input.blur(), _this.listener.send('down');
          }
          if (e.keyCode == 38) {
            if (height == window.innerHeight) input.blur(), _this.listener.send('up');
          }
        });
        input.on('hover:focus', function () {
          if (Platform.is('orsay')) ime.onShow();
          input.removeAttr('disabled');
          input.focus();
        });
        input.on('hover:enter', function () {
          if (time_blur + 1000 < Date.now()) {
            if (Platform.is('orsay')) ime.onShow();
            input.focus();
          }
        });
        var keyboard = $('.simple-keyboard');
        if (!Platform.is('orsay') && (window.SpeechRecognition || window.webkitSpeechRecognition) && !params.nomic) {
          var mic = $("<div class=\"selector simple-keyboard-mic\">\n                    <svg viewBox=\"0 0 24 31\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <rect x=\"5\" width=\"14\" height=\"23\" rx=\"7\" fill=\"currentColor\"/>\n                        <path d=\"M3.39272 18.4429C3.08504 17.6737 2.21209 17.2996 1.44291 17.6073C0.673739 17.915 0.299615 18.7879 0.607285 19.5571L3.39272 18.4429ZM23.3927 19.5571C23.7004 18.7879 23.3263 17.915 22.5571 17.6073C21.7879 17.2996 20.915 17.6737 20.6073 18.4429L23.3927 19.5571ZM0.607285 19.5571C2.85606 25.179 7.44515 27.5 12 27.5V24.5C8.55485 24.5 5.14394 22.821 3.39272 18.4429L0.607285 19.5571ZM12 27.5C16.5549 27.5 21.1439 25.179 23.3927 19.5571L20.6073 18.4429C18.8561 22.821 15.4451 24.5 12 24.5V27.5Z\" fill=\"currentColor\"/>\n                        <rect x=\"10\" y=\"25\" width=\"4\" height=\"6\" rx=\"2\" fill=\"currentColor\"/>\n                    </svg>\n                </div>");
          mic.on('hover:enter', function () {
            if (Platform.is('android')) {
              Android.voiceStart();
              window.voiceResult = _this.value.bind(_this);
            } else if (recognition) {
              try {
                if (recognition.record) recognition.stop();else recognition.start();
              } catch (e) {
                recognition.stop();
              }
            }
          });
          keyboard.addClass('simple-keyboard--with-mic').append(mic);
        }
        keyboard.append(input);
        if (mobile) keyboard.addClass('simple-keyboard--with-textarea');
        if (Platform.screen('mobile')) {
          var buttons = $('<div class="simple-keyboard-buttons"><div class="simple-keyboard-buttons__enter">' + Lang.translate('ready') + '</div><div class="simple-keyboard-buttons__cancel">' + Lang.translate('cancel') + '</div></div>');
          buttons.find('.simple-keyboard-buttons__enter').on('click', function () {
            input.blur();
            _this.listener.send('enter');
          });
          buttons.find('.simple-keyboard-buttons__cancel').on('click', function () {
            _this.value('');
            Controller.back();
          });
          $('.simple-keyboard').append(buttons);
        }
      } else {
        var layout = typeof params.layout == 'string' ? Layers.get(params.layout) : params.layout || Layers.get('default');
        var press = Date.now();
        _keyBord = new _keyClass({
          display: {
            '{BKSP}': '&nbsp;',
            '{ENTER}': '&nbsp;',
            '{SHIFT}': '&nbsp;',
            '{SPACE}': '&nbsp;',
            '{LANG}': '&nbsp;',
            '{ABC}': 'Aa',
            '{SIM}': '#+',
            '{SEARCH}': Lang.translate('search'),
            '{MIC}': "<svg viewBox=\"0 0 24 31\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                        <rect x=\"5\" width=\"14\" height=\"23\" rx=\"7\" fill=\"currentColor\"/>\n                        <path d=\"M3.39272 18.4429C3.08504 17.6737 2.21209 17.2996 1.44291 17.6073C0.673739 17.915 0.299615 18.7879 0.607285 19.5571L3.39272 18.4429ZM23.3927 19.5571C23.7004 18.7879 23.3263 17.915 22.5571 17.6073C21.7879 17.2996 20.915 17.6737 20.6073 18.4429L23.3927 19.5571ZM0.607285 19.5571C2.85606 25.179 7.44515 27.5 12 27.5V24.5C8.55485 24.5 5.14394 22.821 3.39272 18.4429L0.607285 19.5571ZM12 27.5C16.5549 27.5 21.1439 25.179 23.3927 19.5571L20.6073 18.4429C18.8561 22.821 15.4451 24.5 12 24.5V27.5Z\" fill=\"currentColor\"/>\n                        <rect x=\"10\" y=\"25\" width=\"4\" height=\"6\" rx=\"2\" fill=\"currentColor\"/>\n                        </svg>"
          },
          layout: layout,
          onChange: function onChange(value) {
            _this.listener.send('change', {
              value: value
            });
          },
          onKeyPress: function onKeyPress(button) {
            if (Date.now() - press < 100) return;
            press = Date.now();
            if (button === "{SHIFT}" || button === "{SIM}" || button === "{ABC}") _this._handle(button);else if (button === '{MIC}') {
              if (Platform.is('android')) {
                Android.voiceStart();
                window.voiceResult = _this.value.bind(_this);
              } else if (recognition) {
                try {
                  if (recognition.record) recognition.stop();else recognition.start();
                } catch (e) {
                  recognition.stop();
                }
              }
            } else if (button === '{LANG}') {
              var codes = Lang.codes();
              var items = [];
              var select_code = _keyBord.options.layoutName.split('-')[0];
              items.push({
                title: codes.ru,
                value: 'default',
                selected: select_code == 'default'
              });
              Arrays.getKeys(codes).forEach(function (code) {
                if (layout[code]) {
                  items.push({
                    title: codes[code],
                    value: code,
                    selected: select_code == code
                  });
                }
              });
              setTimeout(function () {
                Select.show({
                  title: Lang.translate('title_choice_language'),
                  items: items,
                  onSelect: function onSelect(item) {
                    Select.hide();
                    Storage.set('keyboard_default_lang', item.value);
                    var shifted = _keyBord.options.layoutName.split('-')[1] == 'shift';
                    var new_layout = item.value + (shifted ? '-shift' : '');
                    _this.shifted(!shifted, new_layout, item.value);
                    _keyBord.setOptions({
                      layoutName: new_layout
                    });
                    last = false;
                    _keyBord.options.lastLayerSelect = _keyBord.options.layoutName;
                    Controller.toggle('keybord');
                    $('.simple-keyboard').attr('shifted', Boolean(shifted));
                    Controller.collectionFocus($('.simple-keyboard [data-skbtn="{LANG}"]')[0], $('.simple-keyboard'));
                  },
                  onBack: function onBack() {
                    Select.hide();
                    Controller.toggle('keybord');
                  }
                });
              }, 300);
            } else if (button === '{SPACE}') {
              _this.value(_keyBord.getInput() + ' ');
            } else if (button === '{BKSP}') {
              _this.value(_keyBord.getInput().slice(0, -1));
            } else if (button === '{ENTER}' || button === '{SEARCH}') {
              _this.listener.send('enter');
            }
          }
        });
        var lang = Storage.get('keyboard_default_lang', Storage.get('language', 'ru'));
        _keyBord.setOptions({
          layoutName: lang == 'ru' ? 'default' : Arrays.getKeys(layout).indexOf(lang) >= 0 ? lang : layout.en ? 'en' : 'default'
        });
        $('.simple-keyboard').addClass('hg-style-' + (params.layout || 'default'));
      }
      this.speechRecognition();
    };
    this.speechRecognition = function () {
      var _this2 = this;
      var SpeechRecognition = window.SpeechRecognition || window.webkitSpeechRecognition;
      console.log('Speech', 'status:', SpeechRecognition ? true : false);
      if (SpeechRecognition) {
        recognition = new SpeechRecognition();
        recognition.continuous = false;
        recognition.lang = _lang_codes[Storage.get('language', 'ru')] || 'en-US';
        console.log('Speech', 'lang:', recognition.lang);
        recognition.addEventListener("start", function () {
          console.log('Speech', 'start');
          $('.simple-keyboard [data-skbtn="{mic}"]').css('color', 'red');
          $('.simple-keyboard-mic').addClass('record');
          recognition.record = true;
          Noty$1.show(Lang.translate('keyboard_listen'));
        });
        recognition.addEventListener("end", function () {
          console.log('Speech', 'end');
          $('.simple-keyboard [data-skbtn="{mic}"]').css('color', 'white');
          $('.simple-keyboard-mic').removeClass('record');
          recognition.record = false;
        });
        recognition.addEventListener("result", function (event) {
          console.log('Speech', 'result:', event.resultIndex, event.results[event.resultIndex]);
          var current = event.resultIndex;
          var transcript = event.results[current][0].transcript;
          console.log('Speech', 'transcript:', transcript);
          if (transcript.toLowerCase().trim() === "stop recording") {
            recognition.stop();
          } else {
            if (transcript.toLowerCase().trim() === "reset input") {
              _this2.value('');
            } else {
              _this2.value(transcript);
            }
          }
        });
        recognition.addEventListener("error", function (event) {
          console.log('Speech', 'error:', event);
          if (event.error == 'not-allowed') {
            Noty$1.show(Lang.translate('keyboard_nomic'));
          }
          recognition.stop();
        });
      } else {
        $('.simple-keyboard [data-skbtn="{mic}"]').css('opacity', '0.3');
      }
    };
    this.value = function (value) {
      if (simple) {
        input.val(value);
        if (mobile) {
          input[0].style.height = 'auto';
          input[0].style.height = input[0].scrollHeight + 'px';
        }
      } else _keyBord.setInput(value);
      last_value = value;
      this.listener.send('change', {
        value: value
      });
    };
    this._layout = function () {
      var _this3 = this;
      var keys = $('.simple-keyboard .hg-button').addClass('selector');
      Controller.collectionSet($('.simple-keyboard'));
      Controller.collectionFocus(last || keys[0], $('.simple-keyboard'));
      $('.simple-keyboard .hg-button:not(.binded)').on('hover:enter', function (e) {
        Controller.collectionFocus($(this)[0]);
        _keyBord.handleButtonClicked($(this).attr('data-skbtn'), e);
      }).on('hover:focus', function (e) {
        last = e.target;
        _this3.listener.send('hover', {
          button: e.target
        });
      });
      keys.addClass('binded');
      $('.simple-keyboard').addClass('hg-style-' + (params.layout || 'default'));
    };
    this.shifted = function (shifted, layout, code) {
      if (!(shifted && _keyBord.options.layout[layout])) {
        var shift_layer = Arrays.clone(_keyBord.options.layout[code]);
        shift_layer = shift_layer.map(function (button) {
          return button.toUpperCase();
        });
        _keyBord.options.layout[layout] = shift_layer;
      }
    };
    this._handle = function (button) {
      var current_layout = _keyBord.options.layoutName,
        layout = 'default',
        focus;
      var shifted = current_layout.split('-')[1] == 'shift';
      var code = current_layout.split('-')[0];
      $('.simple-keyboard').attr('shifted', Boolean(!shifted));
      if (button == '{SHIFT}') {
        if (shifted) layout = code;else layout = code + '-shift';
        this.shifted(shifted, layout, code);
      } else if (button == '{SIM}') {
        layout = 'sim';
        focus = '{ABC}';
        _keyBord.options.lastLayerSelect = current_layout;
      } else if (button == '{ABC}') {
        layout = _keyBord.options.lastLayerSelect || 'default';
        focus = '{SIM}';
      }
      _keyBord.setOptions({
        layoutName: layout
      });
      last = false;
      Controller.toggle('keybord');
      Controller.collectionFocus($('.simple-keyboard [data-skbtn="' + (focus || button) + '"]')[0], $('.simple-keyboard'));
    };
    this.toggle = function () {
      var _this4 = this;
      Controller.add('keybord', {
        toggle: function toggle() {
          if (simple) {
            Controller.collectionSet($('.simple-keyboard'));
            Controller.collectionFocus(mobile ? $('.simple-keyboard-input') : false, $('.simple-keyboard'));
          } else _this4._layout();
        },
        update: function update() {},
        up: function up() {
          if (!Navigator.canmove('up')) {
            _this4.listener.send('up');
          } else Navigator.move('up');
        },
        down: function down() {
          if (!Navigator.canmove('down')) {
            _this4.listener.send('down');
          } else Navigator.move('down');
        },
        left: function left() {
          if (!Navigator.canmove('left')) {
            _this4.listener.send('left');
          } else Navigator.move('left');
        },
        right: function right() {
          if (!Navigator.canmove('right')) {
            _this4.listener.send('right');
          } else Navigator.move('right');
        },
        back: function back() {
          _this4.listener.send('back');
        }
      });
      Controller.toggle('keybord');
    };
    this.destroy = function () {
      try {
        if (simple) {
          input.remove();
        } else _keyBord.destroy();
        if (recognition) recognition.stop();
      } catch (e) {}
      this.listener.destroy();
      Keypad.enable();
    };
  }

  var html$5,
    keyboard,
    input,
    input_value = '';

  /**
   * Заустить редактор
   * @param {{title:string, value:string, free:boolean, nosave:boolean}} params 
   * @param {function} call 
   */
  function edit(params, call) {
    html$5 = Template.get('settings_input');
    input = html$5.find('.settings-input__input');
    var lamp = Storage.field('keyboard_type') == 'prisma' || params.keyboard == 'prisma';
    if (!lamp) input.hide();
    $('body').addClass('keyboard-input--visible').append(html$5);
    var pass = function pass(v) {
      return params.password ? v.replace(/./g, '*') : v;
    };
    keyboard = new create$2(params);
    keyboard.listener.follow('change', function (event) {
      input_value = event.value.trim();
      input.toggleClass('filled', Boolean(event.value));
      input.html(pass(Utils$2.inputDisplay(event.value)));
    });
    keyboard.listener.follow('enter', function (event) {
      back$1();
      call(input_value);
    });
    keyboard.listener.follow('focus', function (event) {
      html$5.toggleClass('settings-input--focus', true);
    });
    keyboard.listener.follow('blur', function (event) {
      html$5.toggleClass('settings-input--focus', false);
    });
    html$5.toggleClass('settings-input--free', params.free ? true : false);
    $('.settings-input__links', html$5).toggleClass('hide', params.nosave ? true : false);
    if (params.title) html$5.find('.settings-input__content').prepend('<div class="settings-input__title">' + params.title + '</div>');
    keyboard.listener.follow('down', function (event) {
      if (params.nosave) return;
      var members = Storage.get('setting_member', []);
      var links = [];
      links.push({
        title: (members.indexOf(input_value) == -1 ? Lang.translate('settings_add') : Lang.translate('settings_remove')) + ' ' + Lang.translate('settings_this_value'),
        subtitle: input_value,
        add: true
      });
      members.forEach(function (link) {
        links.push({
          title: link,
          subtitle: Lang.translate('settings_user_links'),
          url: link,
          member: true
        });
      });
      links = links.concat([{
        title: '127.0.0.1:8090',
        subtitle: Lang.translate('settings_for_local'),
        url: '127.0.0.1:8090'
      }]);
      Select.show({
        title: Lang.translate('title_links'),
        items: links,
        onSelect: function onSelect(a) {
          if (a.add) {
            if (members.indexOf(a.subtitle) == -1) {
              Arrays.insert(members, 0, a.subtitle);
              Noty$1.show(Lang.translate('settings_added') + ' (' + a.subtitle + ')');
            } else {
              Arrays.remove(members, a.subtitle);
              Noty$1.show(Lang.translate('settings_removed') + ' (' + a.subtitle + ')');
            }
            Storage.set('setting_member', members);
          } else {
            keyboard.value(a.url);
          }
          keyboard.toggle();
        },
        onLong: function onLong(a, elem) {
          if (a.member) {
            Arrays.remove(members, a.url);
            Noty$1.show(Lang.translate('settings_removed') + ' (' + a.url + ')');
            Storage.set('setting_member', members);
            $(elem).css({
              opacity: 0.4
            });
          }
        },
        onBack: function onBack() {
          keyboard.toggle();
        }
      });
    });
    keyboard.listener.follow('back', function () {
      back$1();
      call(input_value);
    });
    keyboard.create();
    keyboard.value(params.value);
    keyboard.toggle();
    input_value = params.value;
    Helper.show('keyboard', Lang.translate('helper_keyboard'));
    return keyboard;
  }

  /**
   * Назад
   */
  function back$1() {
    destroy();
    Controller.toggle('settings_component');
  }

  /**
   * Уничтожить
   */
  function destroy() {
    keyboard.destroy();
    html$5.remove();
    $('body').removeClass('keyboard-input--visible');
    html$5 = null;
    keyboard = null;
    input = null;
  }
  var Input = {
    edit: edit
  };

  var values = {};
  var defaults = {};
  var listener$1 = start$8();

  /**
   * Запуск
   */
  function init$o() {
    if (Platform.is('tizen')) {
      select$1('player', {
        'inner': '#{settings_param_player_inner}',
        'tizen': 'Tizen'
      }, 'tizen');
      select$1('player_iptv', {
        'inner': '#{settings_param_player_inner}',
        'tizen': 'Tizen'
      }, 'inner');
      select$1('player_torrent', {
        'inner': '#{settings_param_player_inner}',
        'tizen': 'Tizen'
      }, 'tizen');
    }
    if (Platform.is('orsay')) {
      select$1('player', {
        'inner': '#{settings_param_player_inner}',
        'orsay': 'Orsay'
      }, 'orsay');
      select$1('player_iptv', {
        'inner': '#{settings_param_player_inner}',
        'orsay': 'Orsay'
      }, 'inner');
      select$1('player_torrent', {
        'inner': '#{settings_param_player_inner}',
        'orsay': 'Orsay'
      }, 'orsay');
    } else if (Platform.is('webos')) {
      select$1('player', {
        'inner': '#{settings_param_player_inner}',
        'webos': 'WebOS'
      }, 'inner');
      select$1('player_iptv', {
        'inner': '#{settings_param_player_inner}',
        'webos': 'WebOS'
      }, 'inner');
      select$1('player_torrent', {
        'inner': '#{settings_param_player_inner}',
        'webos': 'WebOS'
      }, 'inner');
    } else if (Platform.is('android')) {
      select$1('player', {
        'inner': '#{settings_param_player_inner}',
        'android': 'Android'
      }, 'android');
      select$1('player_iptv', {
        'inner': '#{settings_param_player_inner}',
        'android': 'Android'
      }, 'inner');
      select$1('player_torrent', {
        'android': 'Android'
      }, 'android');
      trigger('internal_torrclient', false);
    } else if (Platform.desktop() && !Platform.macOS()) {
      select$1('player', {
        'inner': '#{settings_param_player_inner}',
        'other': '#{settings_param_player_outside}'
      }, 'inner');
      select$1('player_iptv', {
        'inner': '#{settings_param_player_inner}',
        'other': '#{settings_param_player_outside}'
      }, 'inner');
      select$1('player_torrent', {
        'inner': '#{settings_param_player_inner}',
        'other': '#{settings_param_player_outside}'
      }, 'other');
    } else if (Platform.macOS()) {
      select$1('player', {
        'inner': '#{settings_param_player_inner}',
        'iina': 'IINA',
        'infuse': 'Infuse',
        'mpv': 'MPV',
        'nplayer': 'nPlayer',
        'tracyplayer': 'TracyPlayer'
      }, 'inner');
      select$1('player_iptv', {
        'inner': '#{settings_param_player_inner}',
        'iina': 'IINA',
        'infuse': 'Infuse',
        'mpv': 'MPV',
        'nplayer': 'nPlayer',
        'tracyplayer': 'TracyPlayer'
      }, 'inner');
      select$1('player_torrent', {
        'inner': '#{settings_param_player_inner}',
        'iina': 'IINA',
        'infuse': 'Infuse',
        'mpv': 'MPV',
        'nplayer': 'nPlayer',
        'tracyplayer': 'TracyPlayer'
      }, 'inner');
    } else if (Platform.is('apple')) {
      select$1('player', {
        'inner': '#{settings_param_player_inner}',
        'ios': 'iOS',
        'vlc': 'VLC',
        'nplayer': 'nPlayer',
        'infuse': 'Infuse',
        'vidhub': 'Vidhub',
        'svplayer': 'SVPlayer',
        'tracyplayer': 'TracyPlayer',
        'senplayer': 'SenPlayer'
      }, 'inner');
      select$1('player_iptv', {
        'inner': '#{settings_param_player_inner}',
        'ios': 'iOS',
        'vlc': 'VLC',
        'nplayer': 'nPlayer',
        'infuse': 'Infuse',
        'svplayer': 'SVPlayer',
        'tracyplayer': 'TracyPlayer',
        'senplayer': 'SenPlayer'
      }, 'inner');
      select$1('player_torrent', {
        'inner': '#{settings_param_player_inner}',
        'ios': 'iOS',
        'vlc': 'VLC',
        'nplayer': 'nPlayer',
        'infuse': 'Infuse',
        'vidhub': 'Vidhub',
        'svplayer': 'SVPlayer',
        'tracyplayer': 'TracyPlayer',
        'senplayer': 'SenPlayer'
      }, 'inner');
    } else if (Platform.is('apple_tv')) {
      select$1('player', {
        'tvos': '#{settings_param_player_inner_tvos} tvOS Universal',
        'tvosl': '#{settings_param_player_inner_tvos} tvOS Player',
        'tvosSelect': '#{settings_param_player_outside}',
        'vlc': 'VLC',
        'infuse': 'Infuse',
        'vidhub': 'Vidhub',
        'inner': '#{settings_param_player_inner}',
        'svplayer': 'SVPlayer'
      }, 'inner');
      select$1('player_iptv', {
        'tvos': '#{settings_param_player_inner_tvos} tvOS Universal',
        'tvosl': '#{settings_param_player_inner_tvos} tvOS Player',
        'tvosSelect': '#{settings_param_player_outside}',
        'vlc': 'VLC',
        'infuse': 'Infuse',
        'vidhub': 'Vidhub',
        'inner': '#{settings_param_player_inner}',
        'svplayer': 'SVPlayer'
      }, 'inner');
      select$1('player_torrent', {
        'tvos': '#{settings_param_player_inner_tvos} tvOS Universal',
        'tvosSelect': '#{settings_param_player_outside}',
        'infuse': 'Infuse',
        'vidhub': 'Vidhub',
        'vlc': 'VLC',
        'inner': '#{settings_param_player_inner}',
        'svplayer': 'SVPlayer'
      }, 'inner');
    }

    // trigger('glass_style', Platform.screen('mobile'))
    trigger('advanced_animation', Platform.is('apple_tv') || Platform.is('browser') || Platform.desktop() || navigator.userAgent.toLowerCase().indexOf('shield') >= 0);
    var screensaver_types = {
      'chrome': 'Google',
      'aerial': 'Aerial',
      'nature': 'Nature'
    };
    select$1('screensaver_type', screensaver_types, 'aerial');
    select$1('keyboard_type', {
      'prisma': '#{settings_param_keyboard_prisma}',
      'integrate': '#{settings_param_keyboard_system}'
    }, Platform.screen('mobile') || Platform.macOS() ? 'integrate' : 'prisma');
    select$1('navigation_type', {
      'controll': '#{settings_param_navigation_remote}',
      'mouse': '#{settings_param_navigation_mouse}'
    }, Platform.is('browser') || Platform.desktop() ? 'mouse' : 'controll');

    // Комбинации для поиска
    var langcode = Storage.get('language', 'ru');
    var langname = Lang.codes()[langcode];
    var selector = {
      'df': '#{settings_param_torrent_lang_orig}',
      'df_year': '#{settings_param_torrent_lang_orig} + #{torrent_parser_year}',
      'df_lg': '#{settings_param_torrent_lang_orig} + ' + langname,
      'df_lg_year': '#{settings_param_torrent_lang_orig} + ' + langname + ' + #{torrent_parser_year}',
      'lg': langname,
      'lg_year': langname + ' + #{torrent_parser_year}',
      'lg_df': langname + ' + #{settings_param_torrent_lang_orig}',
      'lg_df_year': langname + ' + #{settings_param_torrent_lang_orig} + #{torrent_parser_year}'
    };
    if (Arrays.getKeys(selector).indexOf(Storage.get('parse_lang', 'df')) == -1) Storage.set('parse_lang', 'df');
    select$1('parse_lang', selector, 'df');
    select$1('tmdb_lang', Lang.codes(), 'ru');

    // let agent = navigator.userAgent.toLowerCase()
    // let versi = agent.match(/chrome\/(\d+)/)

    // versi = versi ? parseInt(versi[1]) : 60
    // versi = isNaN(versi) ? 60 : versi

    select$1('protocol', {
      'http': '#{settings_param_no}',
      'https': '#{settings_param_yes}'
    }, 'https');
  }

  /**
   * Переключатель
   * @param {string} name - название
   * @param {boolean} value_default - значение по дефолту
   */
  function trigger(name, value_default) {
    values[name] = {
      'true': '#{settings_param_yes}',
      'false': '#{settings_param_no}'
    };
    defaults[name] = value_default;
  }

  /**
   * Выбрать
   * @param {string} name - название
   * @param {{key:string}} select_data - значение
   * @param {string} select_default_value - значение по дефолту
   */
  function select$1(name, select_data, select_default_value) {
    values[name] = select_data;
    defaults[name] = select_default_value;
  }

  /**
   * Биндит события на элемент
   * @param {object} elems
   */
  function bind(elems, elems_html) {
    elems.on('hover:enter', function (event) {
      var elem = $(event.target);
      var type = elem.data('type');
      var name = elem.data('name');
      var onChange = elem.data('onChange');
      if (type == 'toggle') {
        var params = values[name];
        var keys = Arrays.isArray(params) ? params : Arrays.getKeys(params),
          value = Storage.get(name, defaults[name]) + '',
          position = keys.indexOf(value);
        position++;
        if (position >= keys.length) position = 0;
        position = Math.max(0, Math.min(keys.length - 1, position));
        value = keys[position];
        Storage.set(name, value);
        update$1(elem, elems, elems_html);
        if (onChange) onChange(value);
      }
      if (type == 'input') {
        Input.edit({
          elem: elem,
          name: name,
          nomic: true,
          value: elem.data('string') ? window.localStorage.getItem(name) || defaults[name] : Storage.get(name, defaults[name]) + ''
        }, function (new_value) {
          Storage.set(name, new_value);
          update$1(elem, elems, elems_html);
          if (onChange) onChange(new_value);
        });
      }
      if (type == 'button') {
        listener$1.send('button', {
          name: name
        });
        if (onChange) onChange();
      }
      if (type == 'add') {
        Input.edit({
          value: ''
        }, function (new_value) {
          if (new_value && Storage.add(name, new_value)) {
            displayAddItem(elem, new_value);
            listener$1.send('update_scroll');
          }
        });
      }
      if (type == 'select') {
        var _params = values[name];
        var _value = Storage.get(name, defaults[name]) + '';
        var items = [];
        for (var i in _params) {
          items.push({
            title: Lang.translate(_params[i]),
            value: i,
            selected: i == _value
          });
        }
        var enabled = Controller.enabled().name;
        Select.show({
          title: Lang.translate('title_choice'),
          items: items,
          onBack: function onBack() {
            Controller.toggle(enabled);
          },
          onSelect: function onSelect(a) {
            Storage.set(name, a.value);
            update$1(elem, elems, elems_html);
            Controller.toggle(enabled);
            if (onChange) onChange(a.value);
          }
        });
      }
    }).on('hover:hover', function (e) {
      Navigator.focused(e.target);
    }).each(function () {
      if (!$(this).data('static')) update$1($(this), elems, elems_html);
    });
    if (elems.eq(0).data('type') == 'add') {
      displayAddList(elems.eq(0));
    }
  }

  /**
   * Добавить дополнительное поле
   * @param {object} elem
   * @param {object} element
   */
  function displayAddItem(elem, element) {
    var name = elem.data('name');
    var item = $('<div class="settings-param selector"><div class="settings-param__name">' + element + '</div>' + '</div>');
    item.on('hover:long', function () {
      var list = Storage.get(name, '[]');
      Arrays.remove(list, element);
      Storage.set(name, list);
      item.css({
        opacity: 0.5
      });
    });
    elem.after(item);
  }

  /**
   * Вывести дополнительные поля
   * @param {object} elem
   */
  function displayAddList(elem) {
    var list = Storage.get(elem.data('name'), '[]');
    list.forEach(function (element) {
      displayAddItem(elem, element);
    });
    listener$1.send('update_scroll');
  }

  /**
   * Обновляет значения на элементе
   * @param {object} elem
   */
  function update$1(elem, elems, elems_html) {
    var name = elem.data('name');
    var key = elem.data('string') ? window.localStorage.getItem(name) || defaults[name] : Storage.get(name, defaults[name] + '');
    var val = typeof values[name] == 'string' ? key : values[name][key] || values[name][defaults[name]];
    var plr = elem.attr('placeholder');
    if (!val && plr) val = plr;
    elem.find('.settings-param__value').text(Lang.translate(val));
    var children = elem.data('children');
    if (children) {
      var parent = elems_html ? elems_html.find('[data-parent="' + children + '"]') : elems.filter('[data-parent="' + children + '"]');
      var value = elem.data('children-value');
      var visibl = value ? Storage.field(name) !== value : !Storage.field(name);
      if (elem.data('children-reverse')) visibl = !visibl;
      parent.toggleClass('hide', visibl);
      parent.filter('[data-visible-value]').each(function () {
        $(this).toggleClass('hide', $(this).data('visible-value') !== key);
      });
      listener$1.send('update_scroll_position');
    }
  }

  /**
   * Получить значение параметра
   * @param {string} name
   * @returns *
   */
  function field$1(name) {
    return Storage.get(name, defaults[name] + '');
  }

  /**
       * Добовляем селекторы
       */
  select$1('interface_style', {
    'standard': '#{settings_param_interface_style_standard}',
    'space': '#{settings_param_interface_style_space}'
  }, 'standard');
  select$1('interface_size', {
    'small': '#{settings_param_interface_size_small}',
    'normal': '#{settings_param_interface_size_normal}',
    'fixed': '#{settings_param_interface_size_fixed}'
  }, 'small');
  select$1('interface_size_fixed', {
    '10': '10',
    '12': '12',
    '14': '14',
    '16': '16',
    '20': '20',
    '24': '24',
    '28': '28',
    '32': '32'
  }, '16');
  select$1('poster_size', {
    'w200': '#{settings_param_poster_quality_low}',
    'w300': '#{settings_param_poster_quality_average}',
    'w500': '#{settings_param_poster_quality_high}'
  }, 'w200');
  select$1('parser_torrent_type', {
    'jackett': 'Jackett'
    // 'prowlarr': 'Prowlarr',
    // 'torrserver': 'TorrServer'
  }, 'jackett');
  select$1('jackett_interview', {
    'all': '#{settings_param_jackett_interview_all}',
    'healthy': '#{settings_param_jackett_interview_healthy}'
  }, 'all');
  select$1('background_type', {
    'complex': '#{settings_param_background_complex}',
    'simple': '#{settings_param_background_simple}',
    'poster': '#{settings_param_background_image}'
  }, 'simple');
  select$1('pages_save_total', {
    '1': '1',
    '2': '2',
    '3': '3',
    '4': '4',
    '5': '5'
  }, '1');
  select$1('player', {
    'inner': '#{settings_param_player_inner}'
  }, 'inner');
  select$1('player_iptv', {
    'inner': '#{settings_param_player_inner}'
  }, 'inner');
  select$1('player_torrent', {
    'inner': '#{settings_param_player_inner}'
  }, 'inner');
  select$1('torrserver_use_link', {
    'one': '#{settings_param_link_use_one}',
    'two': '#{settings_param_link_use_two}'
  }, 'one');
  select$1('subtitles_size', {
    'small': '#{settings_param_subtitles_size_small}',
    'normal': '#{settings_param_subtitles_size_normal}',
    'large': '#{settings_param_subtitles_size_bigger}'
  }, 'normal');
  select$1('screensaver_time', {
    '1': '1 мин',
    '5': '5 мин',
    '10': '10 мин',
    '15': '15 мин',
    '30': '30 мин',
    '60': '1 час'
  }, '5');
  select$1('parse_lang', {
    'df': '#{settings_param_torrent_lang_orig}'
  }, 'df');
  select$1('parse_timeout', {
    '15': '15',
    '30': '30',
    '60': '60'
  }, '15');
  select$1('player_rewind', {
    '5': '5 Сек',
    '10': '10 Сек',
    '15': '15 Сек',
    '20': '20 Сек',
    '30': '30 Сек'
  }, '20');
  select$1('player_timecode', {
    'again': '#{settings_param_player_timecode_again}',
    'continue': '#{settings_param_player_timecode_continue}',
    'ask': '#{settings_param_player_timecode_ask}'
  }, 'continue');
  select$1('player_scale_method', {
    'transform': 'Transform',
    'calculate': '#{settings_param_player_scale_method}'
  }, 'transform');
  select$1('player_hls_method', {
    'application': '#{settings_param_player_hls_app}',
    'hlsjs': '#{settings_param_player_hls_js}'
  }, 'application');
  select$1('source', {
    'tmdb': 'TMDB'
  }, 'tmdb');
  select$1('start_page', {
    'main': '#{title_main}',
    'movie': '#{menu_movies}',
    'tv': '#{menu_tv}',
    'anime': '#{menu_anime}',
    'favorite@bookmarks': '#{settings_input_links}',
    'favorite@history': '#{title_history}',
    // 'mytorrents': '#{title_mytorrents}',
    'last': '#{title_last}'
  }, 'main');
  select$1('scroll_type', {
    'css': 'CSS',
    'js': 'Javascript'
  }, 'css');
  select$1('card_views_type', {
    'preload': '#{settings_param_card_view_load}',
    'view': '#{settings_param_card_view_all}'
  }, 'preload');
  select$1('keyboard_type', {
    'prisma': '#{settings_param_keyboard_prisma}',
    'integrate': '#{settings_param_keyboard_system}'
  }, 'prisma');
  select$1('card_interfice_type', {
    'old': '#{settings_param_card_interface_old}',
    'new': '#{settings_param_card_interface_new}'
  }, 'new');
  select$1('glass_opacity', {
    'easy': '#{settings_param_glass_easy}',
    'medium': '#{settings_param_glass_medium}',
    'blacked': '#{settings_param_glass_blacked}'
  }, 'blacked');
  select$1('time_offset', {
    'n-10': '-10',
    'n-9': '-9',
    'n-8': '-8',
    'n-7': '-7',
    'n-6': '-6',
    'n-5': '-5',
    'n-4': '-4',
    'n-3': '-3',
    'n-2': '-2',
    'n-1': '-1',
    'n0': '0',
    'n1': '1',
    'n2': '2',
    'n3': '3',
    'n4': '4',
    'n5': '5',
    'n6': '6',
    'n7': '7',
    'n8': '8',
    'n9': '9',
    'n10': '10'
  }, 'n0');
  select$1('video_quality_default', {
    '480': '480p',
    '720': '720p',
    '1080': '1080p',
    '1440': '1440p',
    '2160': '2160p'
  }, '1080');
  select$1('player_launch_trailers', {
    'inner': '#{settings_param_player_inner}',
    'youtube': 'YouTube'
  }, 'inner');

  /**
   * Добовляем триггеры
   */
  trigger('animation', true);
  trigger('background', true);
  trigger('torrserver_savedb', false);
  trigger('torrserver_preload', true);
  trigger('parser_use', true);
  trigger('cloud_use', true);
  trigger('account_use', true);
  trigger('torrserver_auth', false);
  trigger('mask', true);
  trigger('playlist_next', true);
  trigger('internal_torrclient', true);
  trigger('subtitles_stroke', true);
  trigger('subtitles_backdrop', false);
  trigger('screensaver', true);
  trigger('proxy_tmdb', true);
  trigger('proxy_tmdb_auto', true);
  trigger('proxy_other', true);
  trigger('parse_in_search', false);
  trigger('subtitles_start', false);
  trigger('helper', true);
  trigger('light_version', false);
  trigger('player_normalization', false);
  trigger('card_quality', true);
  trigger('footer_card', false);
  trigger('cache_images', false);
  trigger('card_episodes', true);
  trigger('card_interfice_poster', false);
  trigger('glass_style', true);
  trigger('black_style', false);
  trigger('hide_outside_the_screen', true);
  trigger('card_interfice_cover', true);
  trigger('card_interfice_reactions', true);
  trigger('background_trailer', true);
  trigger('poster_trailer', false);
  trigger('view_trailer', true);
  trigger('show_options_button', true);
  trigger('news_style', true);

  /**
   * Добовляем поля
   */
  select$1('jackett_url', '', 'https://jacred.xyz');
  select$1('jackett_key', '', '1');
  select$1('prowlarr_url', '', '');
  select$1('prowlarr_key', '', '');
  select$1('torrserver_url', '', '');
  select$1('torrserver_url_two', '', '');
  select$1('torrserver_login', '', '');
  select$1('torrserver_password', '', '');
  select$1('parser_website_url', '', '');
  select$1('cloud_token', '', '');
  select$1('account_email', '', '');
  select$1('account_password', '', '');
  select$1('device_name', '', 'Prisma');
  select$1('player_nw_path', '', 'C:/Program Files/VideoLAN/VLC/vlc.exe');
  select$1('tmdb_proxy_api', '', '');
  select$1('tmdb_proxy_image', '', '');
  var Params = {
    listener: listener$1,
    init: init$o,
    bind: bind,
    update: update$1,
    field: field$1,
    select: select$1,
    trigger: trigger,
    values: values,
    defaults: defaults
  };

  var network$2 = new create$e();
  function api() {
    return Utils$2.protocol() + object$2.pris_domain + '/api/';
  }
  var WorkerArray = /*#__PURE__*/function () {
    function WorkerArray(field) {
      _classCallCheck(this, WorkerArray);
      this.field = field;
      this.empty = [];
      this.data = [];
      this.limit = 3000;
      this.loaded = false;
    }
    return _createClass(WorkerArray, [{
      key: "init",
      value: function init(class_type) {
        var _this = this;
        var timer_update;
        var start_time = Date.now();
        this.class_type = class_type;
        console.log('StorageWorker', this.field, 'start follow');
        Storage.listener.follow('change', function (e) {
          if (_this.field == e.name && _this.loaded && Account.canSync() && Account.hasPremium()) {
            try {
              _this.save(e.value);
            } catch (e) {
              console.log('StorageWorker', _this.field, e.message);
            }
          }
          if (e.name == 'account') {
            clearTimeout(timer_update);
            timer_update = setTimeout(_this.update.bind(_this, true), 5 * 1000);
          }
        });
        Socket.listener.follow('message', function (e) {
          if (e.method == 'storage' && e.data.name == _this.field) {
            try {
              if (e.data.remove) _this.removeFromSocket(e.data);else _this.updateFromSocket(e.data);
            } catch (e) {
              console.log('StorageWorker', _this.field, e.message);
            }
          }
        });
        Socket.listener.follow('open', function (e) {
          if (Date.now() - start_time > 1000 * 60 * 5) {
            clearTimeout(timer_update);
            timer_update = setTimeout(_this.update.bind(_this, false, true), 10 * 1000);
          }
        });
        this.update();
        setInterval(this.update.bind(this), 1000 * 60 * 10);
      }
    }, {
      key: "restrict",
      value: function restrict(result) {
        if (Arrays.isObject(result)) {
          var keys = Arrays.getKeys(result);
          if (keys.length > this.limit) {
            var remv = keys.slice(0, keys.length - this.limit);
            remv.forEach(function (k) {
              delete result[k];
            });
          }
        } else if (result.length > this.limit) {
          result = result.slice(result.length - this.limit);
        }
        return result;
      }
    }, {
      key: "parse",
      value: function parse(from, nolisten) {
        var to = Storage.cache(this.field, this.limit, Arrays.clone(this.empty));
        this.filter(from, to);
        Storage.set(this.field, to, nolisten);
        this.data = this.restrict(Arrays.decodeJson(localStorage.getItem(this.field), Arrays.clone(this.empty)));
        Prisma.Listener.send('worker_storage', {
          type: 'insert',
          name: this.field,
          from: from,
          to: to
        });
      }
    }, {
      key: "filter",
      value: function filter(from, to) {
        from.forEach(function (a) {
          if (to.indexOf(a) == -1) to.push(a);
        });
      }
    }, {
      key: "update",
      value: function update(full, nolisten) {
        var _this2 = this;
        var account = Account.canSync();
        if (account && Account.hasPremium()) {
          console.log('StorageWorker', this.field, 'update start');
          var url = api() + 'storage/data/' + encodeURIComponent(this.field) + '/' + this.class_type;
          var all = full;
          if (Storage.get('storage_' + this.field + '_update_time', '0') + 1000 * 60 * 60 * 24 < Date.now()) all = true;
          if (all) url = url + '?full=true';
          network$2.silent(url, function (result) {
            try {
              _this2.parse(result.data, nolisten);
              console.log('StorageWorker', _this2.field, 'update end');
            } catch (e) {
              console.log('StorageWorker', _this2.field, e.message);
            }
            Storage.set('storage_' + _this2.field + '_update_time', Date.now());
            _this2.loaded = true;
          }, false, false, {
            headers: {
              token: account.token,
              profile: account.profile.id
            }
          });
        }
      }
    }, {
      key: "removeFromSocket",
      value: function removeFromSocket(data) {
        Arrays.remove(this.data, data.value);
        var store = Storage.cache(this.field, this.limit, Arrays.clone(this.empty));
        Arrays.remove(store, data.value);
        Storage.set(this.field, store, true);
      }
    }, {
      key: "updateFromSocket",
      value: function updateFromSocket(data) {
        var from = [data.value];
        this.parse(from, true);
      }
    }, {
      key: "send",
      value: function send(id, value) {
        if (!Account.hasPremium()) return;
        console.log('StorageWorker', 'save:', this.field, id, value);
        var str = JSON.stringify(value);
        if (str.length < 10000) {
          Socket.send('storage', {
            params: {
              id: id,
              name: this.field,
              value: value
            }
          });
        }
      }
    }, {
      key: "sendRemove",
      value: function sendRemove(id, value) {
        var str = JSON.stringify(value);
        console.log('StorageWorker', 'remove:', this.field, id, value);
        if (str.length < 10000) {
          Socket.send('storage', {
            params: {
              id: id,
              name: this.field,
              value: value,
              remove: true
            }
          });
        }
      }
    }, {
      key: "sendClean",
      value: function sendClean() {
        Socket.send('storage', {
          params: {
            id: null,
            name: this.field,
            value: '',
            clean: true
          }
        });
      }
    }, {
      key: "save",
      value: function save(value) {
        var _this3 = this;
        var uniq = value.filter(function (a) {
          return _this3.data.indexOf(a) == -1;
        });
        uniq.forEach(function (val) {
          _this3.data.push(val);
          _this3.send(null, val);
        });
      }
    }, {
      key: "remove",
      value: function remove(value) {
        Arrays.remove(this.data, value);
        this.sendRemove(null, value);
      }
    }, {
      key: "clean",
      value: function clean() {
        this.data = [];
        this.sendClean();
      }
    }]);
  }();
  var WorkerFilterID = /*#__PURE__*/function (_WorkerArray) {
    function WorkerFilterID() {
      _classCallCheck(this, WorkerFilterID);
      return _callSuper(this, WorkerFilterID, arguments);
    }
    _inherits(WorkerFilterID, _WorkerArray);
    return _createClass(WorkerFilterID, [{
      key: "filter",
      value: function filter(from, to) {
        from.forEach(function (a) {
          var find = to.find(function (b) {
            return b.id == a.id;
          });
          if (!find) to.push(a);else {
            to[to.indexOf(find)] = a;
          }
        });
      }
    }, {
      key: "removeFromSocket",
      value: function removeFromSocket(data) {
        var find = this.data.find(function (a) {
          return a.id == data.id;
        });
        if (find) Arrays.remove(this.data, find);
        var store = Storage.cache(this.field, this.limit, Arrays.clone(this.empty));
        find = store.find(function (a) {
          return a.id == data.id;
        });
        if (find) Arrays.remove(store, find);
        Storage.set(this.field, store, true);
      }
    }, {
      key: "updateFromSocket",
      value: function updateFromSocket(data) {
        var from = [data.value];
        this.parse(from, true);
      }
    }, {
      key: "save",
      value: function save(value) {
        var _this4 = this;
        var uniq = [];
        value.forEach(function (val) {
          var find = _this4.data.find(function (a) {
            return a.id == val.id;
          });
          if (!find) {
            _this4.data.push(_typeof(val) == 'object' ? Arrays.clone(val) : val);
            uniq.push(val);
          } else if (JSON.stringify(val) !== JSON.stringify(find)) {
            _this4.data[_this4.data.indexOf(find)] = _typeof(val) == 'object' ? Arrays.clone(val) : val;
            uniq.push(val);
          }
        });
        uniq.forEach(function (val) {
          _this4.send(val.id, val);
        });
      }
    }, {
      key: "remove",
      value: function remove(id) {
        var find = this.data.find(function (a) {
          return a.id == id;
        });
        if (find) Arrays.remove(this.data, find);
        this.sendRemove(id, null);
      }
    }]);
  }(WorkerArray);
  var WorkerObject = /*#__PURE__*/function (_WorkerArray2) {
    function WorkerObject(params) {
      var _this5;
      _classCallCheck(this, WorkerObject);
      _this5 = _callSuper(this, WorkerObject, [params]);
      _this5.data = {};
      _this5.empty = {};
      return _this5;
    }
    _inherits(WorkerObject, _WorkerArray2);
    return _createClass(WorkerObject, [{
      key: "filter",
      value: function filter(from, to) {
        for (var _id in from) {
          to[_id] = from[_id];
        }
      }
    }, {
      key: "removeFromSocket",
      value: function removeFromSocket(data) {
        delete this.data[id];
        var store = Storage.cache(this.field, this.limit, Arrays.clone(this.empty));
        delete store[id];
        Storage.set(this.field, store, true);
      }
    }, {
      key: "updateFromSocket",
      value: function updateFromSocket(data) {
        var object = {};
        object[data.id] = data.value;
        this.parse(object, true);
      }
    }, {
      key: "save",
      value: function save(value) {
        var _this6 = this;
        var uniq = [];
        for (var _id2 in value) {
          var a = value[_id2];
          var b = this.data[_id2];
          if (!this.data[_id2]) {
            this.data[_id2] = _typeof(a) == 'object' ? Arrays.clone(a) : a;
            uniq.push(_id2);
          } else {
            a = JSON.stringify(a);
            b = JSON.stringify(b);
            if (a !== b) {
              this.data[_id2] = _typeof(value[_id2]) == 'object' ? Arrays.clone(value[_id2]) : value[_id2];
              uniq.push(_id2);
            }
          }
        }
        uniq.forEach(function (id) {
          _this6.send(id, value[id]);
        });
      }
    }, {
      key: "remove",
      value: function remove(id) {
        delete this.data[id];
        this.sendRemove(id, null);
      }
    }, {
      key: "clean",
      value: function clean() {
        this.data = {};
        this.sendClean();
      }
    }]);
  }(WorkerArray);
  var Workers = {
    //['string',0499383]
    array_string: WorkerArray,
    //[{'id':'049994',...}]
    array_object_id: WorkerFilterID,
    //{'id048994':{...}, ...}
    object_object: WorkerObject,
    //{'id399884':'string', ...}
    object_string: WorkerObject
  };

  var listener = start$8();
  var readed = {};
  var workers = {};
  var reserve = {};
  function init$n() {
    // sync('online_view', 'array_string');
    // sync('torrents_view', 'array_string');  Пока отключил, дич творится 
    // sync('search_history', 'array_string');
    sync('online_last_balanser', 'object_string');
    sync('user_clarifys', 'object_object');
    sync('torrents_filter_data', 'object_object');
    Cache.getData('storage').then(function (result) {
      if (result) {
        console.log('Storage', 'load cache:', result.length);
        result.forEach(function (data) {
          reserve[data.key] = data[data.value];
        });
      }
    })["catch"](function (e) {
      console.log('Storage', 'cache error:', e.message, e.stack, e);
    });
  }

  /**
   * Получить значение переменной из оператвной памяти localStorage
   * @doc
   * @name get
   * @alias Storage
   * @param {string} name название
   * @param {string} empty значение по умолчанию
   * @returns {any}
   */

  function get(name, empty) {
    var item;
    var value = readed[name];
    if (typeof value == 'undefined') {
      item = window.localStorage.getItem(name);
      value = item;
      if (item == null && reserve[name]) {
        console.log('Storage', 'get from cache:', name, reserve[name]);
        value = reserve[name];
      }
    }
    value = value || empty || '';
    if (value == 'true' || value == 'false') return value == 'true' ? true : false;
    if (readed[name] && (Arrays.isObject(value) || Arrays.isArray(value))) return readed[name];
    var convert = parseInt(value);
    if (!isNaN(convert) && /^\d+$/.test(value)) return convert;
    var i = typeof value == 'string' ? value[0] : '';
    if (i == '[' || i == '{') {
      try {
        value = JSON.parse(value);
      } catch (error) {}
    }
    readed[name] = value;
    return value;
  }

  /**
   * Получить значение переменной напрямую из localStorage
   * @doc
   * @name value
   * @alias Storage
   * @param {string} name название
   * @param {string} empty значение по умолчанию
   * @returns {string}
   */

  function value(name, empty) {
    return window.localStorage.getItem(name) || empty || '';
  }

  /**
   * Установить значение переменной в оператвную память и localStorage
   * @doc
   * @name set
   * @alias Storage
   * @param {string} name название
   * @param {any} value значение
   * @param {boolean} nolisten по умолчанию `false`, если `true`, то не отправлять событие об изменении
   * @returns {string}
   */

  function set(name, value, nolisten, callerror) {
    readed[name] = value;
    var write = '';
    try {
      write = Arrays.isObject(value) || Arrays.isArray(value) ? JSON.stringify(value) : value;
    } catch (e) {
      console.log('Storage', name, 'JSON.stringify error:', e, value);
    }
    try {
      window.localStorage.setItem(name, write);
    } catch (e) {
      if (e.name == 'QuotaExceededError') {
        console.log('Storage', 'QuotaExceededError:', name, value);
        window.localStorage.removeItem(name);
        Cache.rewriteData('storage', name, {
          key: name,
          value: write
        }).then(function () {
          reserve[name] = write;
        })["catch"](function (e) {
          console.log('Storage', 'Cache error:', e.message, e.stack, e);
        });
        if (callerror) callerror(e);
      }
    }
    if (!nolisten) listener.send('change', {
      name: name,
      value: value
    });
  }

  /**
   * Добавить значение в массив к уже существующим
   * @doc
   * @name add
   * @alias Storage
   * @param {string} name название
   * @param {any} new_value значение
   * @returns {boolean} true если значение добавлено, false если значение уже существует
   */

  function add$2(name, new_value) {
    var list = get(name, '[]');
    if (list.indexOf(new_value) == -1) {
      list.push(new_value);
      set(name, list);
      listener.send('add', {
        name: name,
        value: new_value
      });
      return true;
    }
  }

  /**
   * Значение по умолчанию из параметров
   * @doc
   * @name field
   * @alias Storage
   * @param {string} name название
   * @returns {any} значение
   */

  function field(name) {
    return Params.field(name);
  }

  /**
   * Записать значение в кэш с ограничением по количеству данных
   * @doc
   * @name cache
   * @alias Storage
   * @param {string} name название
   * @param {integer} max максимальное количество данных
   * @param {string} empty значение по умолчанию
   * @returns {any} значение
   */

  function cache(name, max, empty) {
    var result = get(name, JSON.stringify(empty));
    if (Arrays.isObject(empty)) {
      var keys = Arrays.getKeys(result);
      if (keys.length > max) {
        var remv = keys.slice(0, keys.length - max);
        remv.forEach(function (k) {
          delete result[k];
        });
        set(name, result);
      }
    } else if (result.length > max) {
      result = result.slice(result.length - max);
      set(name, result);
    }
    return result;
  }

  /**
   * Добавить переменную в синхронизацию с сервером
   * @doc
   * @name sync
   * @alias Storage
   * @param {string} field_name название
   * @param {string} class_type тип данных, доступно (array_string | array_object_id | object_string | object_object) \n\n `array_string` - ['a','b','c'] \n\n `array_object_id` - [{id:1,..},{id:2,..}] \n\n `object_string` - {a:'a',b:'b'} \n\n `object_object` - {a:{a:'a'},b:{b:'b'}}
   */

  function sync(field_name, class_type) {
    if (Workers[class_type] && !workers[field_name]) {
      workers[field_name] = new Workers[class_type](field_name);
      workers[field_name].init(class_type);
    }
  }

  /**
   * Удалить значение из синхронизации
   * @doc
   * @name remove
   * @alias Storage
   * @param {string} field_name название
   * @param {any} value значение
   */

  function remove(field_name, value) {
    if (workers[field_name]) workers[field_name].remove(value);
  }

  /**
   * Очистить полностью значение из синхронизации
   * @doc
   * @name clean
   * @alias Storage
   * @param {string} field_name название
   */

  function clean(field_name) {
    if (workers[field_name]) workers[field_name].clean();
  }

  /**
   * Очистить кэш
   * @doc
   * @name clear
   * @alias Storage
   * @param {function} full `true` - полностью очистить, `false` - очистить только кеш
   */

  function clear$1(full) {
    if (full) {
      Bell.push({
        text: Prisma.Lang.translate('settings_clear_cache')
      });
      localStorage.clear();
    } else {
      Bell.push({
        text: Prisma.Lang.translate('settings_clear_cache_only')
      });
      var need = ['online_view', 'ser_clarifys', 'torrents_view', 'account_bookmarks', 'recomends_list', 'file_view', 'timetable', 'search_history', 'recomends_scan'];
      var more = ['online_', 'file_view_', 'storage_'];
      for (var key in localStorage) {
        if (more.find(function (w) {
          return key.indexOf(w) >= 0;
        })) need.push(key);
      }
      need.forEach(function (a) {
        localStorage.setItem(a, '');
      });
    }
    setTimeout(function () {
      window.location.reload();
    }, 3000);
  }

  /**
   * Получить размер данных в localStorage
   * @doc
   * @name getsize
   * @alias Storage
   * @param {function} call функция обратного вызова
   */

  function getsize(call) {
    if (localStorage) {
      var i = 0;
      var t = setInterval(function () {
        i += 250;
        try {
          localStorage.setItem('testsize', new Array(i * 1024 + 1).join('a'));
        } catch (e) {
          localStorage.removeItem('testsize');
          clearInterval(t);
        }
        call((i - 250) * 1024);
      }, 100);
    } else {
      call(5000 * 1024);
    }
  }
  var Storage = {
    listener: listener,
    init: init$n,
    get: get,
    set: set,
    field: field,
    cache: cache,
    add: add$2,
    value: value,
    sync: sync,
    remove: remove,
    clear: clear$1,
    clean: clean,
    getsize: getsize
  };

  var meta = {
    languages: {
      ru: {
        code: 'ru',
        name: 'Русский',
        lang_choice_title: 'Добро пожаловать',
        lang_choice_subtitle: 'Выберите свой язык'
      },
      en: {
        code: 'en',
        name: 'English',
        lang_choice_title: 'Welcome',
        lang_choice_subtitle: 'Choose your language'
      },
      uk: {
        code: 'uk',
        name: 'Українська',
        lang_choice_title: 'Ласкаво просимо',
        lang_choice_subtitle: 'Виберіть мову'
      }
      // be: {
      //     code: 'be',
      //     name: 'Беларуская',

      //     lang_choice_title: 'Сардэчна запрашаем',
      //     lang_choice_subtitle: 'Выберыце сваю мову',
      // },
      // zh: {
      //     code: 'zh',
      //     name: '简体中文',

      //     lang_choice_title: '欢迎',
      //     lang_choice_subtitle: '选择你的语言',
      // },
      // pt: {
      //     code: 'pt',
      //     name: 'Português',

      //     lang_choice_title: 'Bem-vindo',
      //     lang_choice_subtitle: 'Escolhe o teu idioma',
      // },
      // bg: {
      //     code: 'bg',
      //     name: 'Български',

      //     lang_choice_title: 'Здравейте',
      //     lang_choice_subtitle: 'Изберете вашият език',
      // },
      // he: {
      //     code: 'he',
      //     name: 'עִברִית',

      //     lang_choice_title: 'ברוך הבא',
      //     lang_choice_subtitle: 'בחר את השפה שלך',
      // },
      // cs: {
      //     code: "cs",
      //     name: "Čeština",

      //     lang_choice_title: "Vítejte",
      //     lang_choice_subtitle: "Vyberte svůj jazyk",
      // }
    }
  };

  var _lang_choice_title$la;
  var ru = (_lang_choice_title$la = {
    lang_choice_title: 'Добро пожаловать',
    lang_choice_subtitle: 'Выберите свой язык',
    more: 'Показать все',
    show_more: 'Показать ещё',
    more_results: 'Показать больше результатов',
    loading: 'Загрузка',
    nofind_movie: 'Не удалось найти фильм.',
    noname: 'Без названия',
    nochoice: 'Не выбрано',
    cancel: 'Отменить',
    confirm: 'Подтверждаю',
    sure: 'Вы уверены?',
    nodata: 'Нет данных',
    back: 'Назад',
    back_to_start: 'В начало',
    ready: 'Готово',
    close_app_modal: 'Вы уверены, что хотите покинуть приложение?',
    connected_seeds: 'подкл.',
    search: 'Поиск',
    search_input: 'Введите название',
    search_empty: 'История поиска пуста.',
    search_delete: 'Влево - удалить',
    search_start_typing: 'Начните вводить текст для поиска.',
    search_searching: 'Идет поиск...',
    search_start: 'Начать поиск',
    search_nofound: 'По вашему запросу ничего не найдено.',
    full_genre: 'Жанр',
    full_production: 'Производство',
    full_date_of_release: 'Дата релиза',
    full_budget: 'Бюджет',
    full_revenue: 'Сборы',
    full_countries: 'Страны',
    full_like: 'Нравится',
    full_torrents: 'Торренты',
    full_trailers: 'Трейлеры',
    full_sound: 'Звук трейлера в фоне',
    full_trailer_mute: 'Отключить звук',
    full_trailer_unmute: 'Включить звук',
    full_more: 'Ещё',
    full_detail: 'Описание',
    full_notext: 'Без описания.',
    full_series_release: 'Выход серий',
    full_next_episode: 'Следующая',
    full_episode_days_left: 'Осталось дней',
    full_trailer_official: 'Официальный',
    full_trailer_no_official: 'Неофициальный',
    full_season: 'Cезон',
    full_episode: 'Эпизод',
    full_directing: 'Режиссура',
    full_writing: 'Сценарий',
    full_keywords: 'Теги',
    full_soon_available_quality: 'Новинка ещё горячая! <br>Версии в высоком качестве подоспеют чуть позже — немножко терпения.',
    add_comment: 'Добавить',
    add_comments: 'Отзывы',
    comments_cancel: 'Закрыть',
    comments_send: 'Добавить',
    comments_error: 'Ошибка сервера',
    comments_offensive_content: 'Отзыв содержит недопустимые выражения. Пожалуйста, исправьте его и попробуйте снова',
    comments_religiosn_content: 'Отзыв содержит религиозные термины. Пожалуйста, исправьте его и попробуйте снова',
    comments_politic_content: 'Отзыв содержит политические термины. Пожалуйста, исправьте его и попробуйте снова',
    comments_spoiler_content: 'Отзыв содержит спойлеры. Пожалуйста, исправьте его и попробуйте снова',
    comment_added_successfully: 'Ваш отзыв опубликован',
    comments_autor: 'Укажите ваше имя',
    autor_comments: 'Напишите свой отзыв',
    comments_empty: 'Станьте первым, кто поделится впечатлениями! ✨<br><br>Расскажите о своих эмоциях от просмотра.',
    review_type_title: 'Эмоция от просмотра',
    review_type_neutral: 'Нейтральная',
    review_type_positive: 'Положительная',
    review_type_negative: 'Отрицательная',
    settings_cloud_sync: 'Синхронизация',
    settings_cloud_sync_descr: 'Синхронизируйте ваши закладки, историю просмотров и тайм-коды.',
    settings_cloud__text: 'Данная авторизация утратит актуальность и отключится 31.12.2024',
    settings_cloud__title: 'Авторизация',
    settings_cloud__atoken: 'Укажите ваш токен для авторизации',
    settings_cloud__token: 'Ваш токен',
    settings_cloud__status: 'Статус',
    settings_cloud_nosync: 'Не авторизованы',
    settings_cloud_nosync_desk: 'Необходимо авторизоваться',
    settings_cloud_sync_off: 'Отключено',
    settings_cloud_sync_on: 'Включите синхронизацию',
    settings_cloud_sync_error: 'Авторизация не удалась',
    settings_cloud_sync_errdesk: 'Проверьте введённые данные и повторите попытку',
    settings_cloud_sync_ok: 'Проверьте введённые данные и повторите попытку',
    settings_cloud_sync_status: 'Вошли',
    settings_cloud_status_ok: 'Вы успешно авторизовались',
    settings_cloud_sync_yes: 'Синхронизовано',
    settings_prisma_usercam_descr: 'Настройте список источников под себя – подключите свои аккаунты Filmix, Kinopub, Vokino, HDRezka или отключите лишние.',
    settings_prisma_sync: 'Авторизация',
    settings_prisma_sync_descr: 'Синхронизруйте ваши закладки, истории просмотров, метки и тайм-коды.',
    settings_prisma_account: 'Аккаунт',
    settings_prisma_logged_in_as: 'Вошли как',
    settings_prisma_profile: 'Профиль',
    settings_prisma_sync_btn: 'Синхронизировать',
    settings_prisma_sync_btn_descr: 'Сохранить локальные закладки на сервере',
    settings_prisma_backup: 'Бэкап',
    settings_prisma_backup_export_descr: 'Сохранить в облаке',
    settings_prisma_backup_import_descr: 'Восстановить из облака',
    settings_prisma_backup_descr: 'Сохранить или загрузить бэкап данных',
    settings_prisma_logout: 'Выйти из аккаунта',
    settings_prisma_signin: 'Авторизация',
    settings_prisma_not_specified: 'Не указан',
    settings_prisma_password: 'Пароль',
    settings_prisma_status: 'Статус',
    settings_prisma_backup_import: 'Импорт',
    settings_prisma_backup_export: 'Экспорт',
    settings_prisma_sync_filters: 'Синхронизация фильтров',
    settings_prisma_sync_calendar: 'Синхронизация календаря',
    settings_prisma_sync_quality: 'Синхронизация отметок (качество)',
    settings_prisma_sync_search: 'Синхронизация истории поиска',
    settings_prisma_sync_recomends: 'Синхронизация рекомендаций',
    settings_prisma_sync_timecodes: 'Синхронизация тайм-кодов',
    settings_prisma_signin_button: 'Выполнить вход',
    settings_input_links: 'Избранное',
    settings_interface_type: 'Облегчённая версия',
    settings_interface_size: 'Размер интерфейса',
    settings_interface_size_fixed: 'Фиксированный размер',
    settings_interface_size_fixed_descr: 'Если не стандартное разрешение экрана',
    settings_param_interface_size_fixed: 'Фиксированный',
    settings_interface_background: 'Фон',
    settings_interface_background_use: 'Показывать фон',
    settings_interface_background_type: 'Тип фона',
    settings_interface_performance: 'Быстродействие',
    settings_interface_footer_card: 'Карточка в плеере',
    settings_interface_footer_card_descr: 'Отображение карточки в плеере',
    settings_interface_background_trailer: 'Трейлер в карточке фильма',
    settings_interface_background_trailer_descr: 'Автоматически воспроизводить трейлер (отключается и в новом интерфейсе)',
    settings_interface_poster_trailer: 'Тизер в постере',
    settings_interface_poster_trailer_descr: 'На слабых устройствах выключить',
    settings_interface_trailer_quality: 'Качество трейлеров',
    settings_interface_trailer_quality_descr: 'Снижение качества трейлеров для повышения производительности на слабых устройствах',
    settings_interface_animation: 'Анимация контента',
    settings_interface_advanced_animation: 'Интерактивная анимация',
    settings_interface_advanced_animation_descr: 'Анимации активно реагирует на действия пользователя',
    settings_interface_animation_descr: 'На слабых устройствах выключить анимацию',
    settings_interface_attenuation: 'Затухание',
    settings_interface_attenuation_descr: 'Эффект затухания при скроллинге',
    settings_interface_scroll: 'Тип навигации',
    settings_interface_view_card: 'Отображение карточек',
    settings_interface_view_card_descr: 'На слабых устройствах только подгружать',
    settings_interface_lang: 'Язык интерфейса',
    settings_interface_lang_reload: 'Необходимо перезапустить приложение, нажмите «OK» для перезагрузки',
    settings_interface_card_interfice: 'Интерфейс карточек',
    settings_interface_card_poster: 'Показать постер',
    settings_interface_card_cover: 'Показать обложку',
    settings_interface_card_reactions: 'Показать реакции',
    settings_interface_glass: 'Стекло',
    settings_interface_glass_descr: 'Показывать интерфейс в стекловидном стиле',
    settings_interface_glass_opacity: 'Прозрачность стекла',
    settings_interface_black_style: 'Чёрный стиль',
    settings_interface_hide_outside_the_screen: 'Скрывать блоки карточек за границами экрана',
    settings_interface_hide_outside_the_screen_descr: 'Для лучшей производительности',
    settings_interface_view_trailer: 'Кнопка трейлера',
    settings_interface_hide_ai: 'Кнопка асистента',
    settings_main_account: 'Аккаунт',
    settings_main_interface: 'Интерфейс',
    settings_main_more: 'Остальные настройки',
    settings_main_player: 'Плеер',
    settings_main_parser: 'Парсер',
    settings_main_torrserver: 'TorrServer',
    settings_main_plugins: 'Расширения',
    settings_main_rest: 'Остальное',
    settings_rest_start: 'Стартовая страница',
    settings_rest_start_descr: 'Выберете с какой страницы начать при запуске приложения',
    settings_rest_source: 'Источник',
    settings_rest_source_use: 'Основной источник',
    settings_rest_source_descr: 'Откуда брать информацию о фильмах',
    settings_rest_tmdb_lang: 'На каком языке отображать данные с TMDB',
    settings_rest_tmdb_prox: 'Проксировать TMDB',
    settings_rest_tmdb_prox_auto: 'Включить прокси автоматически',
    settings_rest_tmdb_posters: 'Разрешение постеров',
    settings_rest_screensaver: 'Заставка',
    settings_rest_screensaver_use: 'Показывать заставку при бездействии',
    settings_rest_screensaver_type: 'Источник',
    settings_rest_screensaver_time: 'Период неактивности',
    settings_rest_helper: 'Подсказки',
    settings_rest_helper_use: 'Показывать подсказки',
    settings_rest_helper_reset: 'Показать подсказки снова',
    settings_rest_pages: 'Сколько страниц хранить в памяти',
    settings_rest_pages_descr: 'Хранит страницы в том состоянии, в котором вы их покинули.',
    settings_rest_time: 'Сместить время',
    settings_rest_navigation: 'Тип навигации',
    settings_rest_keyboard: 'Выберите тип клавиатуры',
    settings_rest_device: 'Название устройства',
    settings_rest_device_placeholder: 'Например: Моя компьютер',
    settings_rest_cache: 'Очистить кэш устройства',
    settings_сlear_cache: 'Кэш',
    settings_rest_tmdb_example: 'Например:',
    settings_rest_tmdb_api_descr: 'Для получения данных',
    settings_rest_tmdb_image_descr: 'Для получения изображений',
    settings_rest_card_quality: 'Отметки качества',
    settings_rest_card_quality_descr: 'Отображать отметки качества на карточках',
    settings_rest_card_episodes: 'Отметки эпизодов',
    settings_rest_card_episodes_descr: 'Отображать отметки эпизодов на карточках',
    settings_rest_cache_images: 'Кэшировать изображения',
    settings_rest_cache_images_descr: 'Кэш изображений в локальное хранилище',
    settings_rest_protocol_use: 'Безопасное соединение',
    settings_rest_protocol_descr: 'Использовать протокол HTTPS',
    settings_rest_cache_only: 'Только кеш',
    settings_rest_cache_only_descr: 'Основные настройки сохранятся',
    settings_rest_cache_all: 'Кеш и данные',
    settings_rest_cache_all_descr: 'Внимание: Будут очищены все настройки и данные',
    settings_rest_cache_calculate: 'Сколько осталось памяти',
    settings_parser_use: 'Использовать парсер',
    settings_parser_use_descr: 'Тем самым, вы соглашаетесь принять на себя всю ответственность за использование публичных ссылок для просмотра торрент и онлайн контента.',
    settings_parser_type: 'Тип парсера для торрентов',
    settings_parser_jackett_placeholder: 'Например: 192.168.х',
    settings_parser_jackett_link: 'Ссылка',
    settings_parser_jackett_link_descr: 'Укажите ссылку на скрипт Jackett',
    settings_parser_prowlarr_link_descr: 'Укажите ссылку на сервер Prowlarr',
    settings_parser_jackett_key_placeholder: 'Например: sa0sk83d..',
    settings_parser_jackett_key: 'Api-ключ',
    settings_parser_jackett_key_descr: 'Находится в Jackett',
    settings_parser_prowlarr_key_descr: 'Находится во вкладке настроек Prowlarr в категории основное',
    settings_parser_torlook_type: 'Метод парсинга сайта TorLook',
    settings_parser_scraperapi_placeholder: 'Например: scraperapi.com',
    settings_parser_scraperapi_link: 'Ссылка на парсер сайтов',
    settings_parser_scraperapi_descr: 'Зарегистрируйтесь на сайте scraperapi.com, введите ссылку api.scraperapi.com?api_key=...&url={q}<br>В {q} будет поставляться сайт w41.torlook.info',
    settings_parser_search: 'Поиск',
    settings_parser_search_descr: 'На каком языке производить поиск?',
    settings_parser_in_search: 'Парсер в поиске',
    settings_parser_in_search_descr: 'Показывать результаты в поиске?',
    settings_parser_timeout_title: 'Таймаут парсера',
    settings_parser_timeout_descr: 'Время (в секундах) ожидания ответа от сервера',
    settings_player_type: 'Тип плеера',
    settings_player_type_descr: 'Каким плеером воспроизводить',
    settings_player_iptv_type: 'Тип плеера для IPTV',
    settings_player_iptv_type_descr: 'Каким плеером воспроизводить IPTV каналы',
    settings_player_torrent_type: 'Тип плеера для торрентов',
    settings_player_torrent_type_descr: 'Каким плеером воспроизводить торренты',
    settings_player_reset: 'Сбросить плеер по умолчанию',
    settings_player_reset_descr: 'Сбрасывает выбранный Android плеер в приложении',
    settings_player_path: 'Путь к плееру',
    settings_player_path_descr: 'Укажите путь к плееру .exe',
    settings_player_normalization: 'Нормализация звука',
    settings_player_normalization_descr: 'Нормализирует звук в один уровень',
    settings_player_next_episode: 'Следующая серия',
    settings_player_next_episode_descr: 'Автоматическое воспроизведение следующей серии',
    settings_player_timecode: 'Тайм-код',
    settings_player_timecode_descr: 'Воспроизводить с последнего места или с начала',
    settings_player_scale: 'Метод масштабирования',
    settings_player_scale_descr: 'Каким образом производить вычисления для масштабирования видео',
    settings_player_subs: 'Субтитры',
    settings_player_subs_use: 'Включить',
    settings_player_subs_use_descr: 'Влючает субтитры на экране по умолчанию',
    settings_player_subs_size: 'Размер',
    settings_player_subs_size_descr: 'Размер субтитров на экране',
    settings_player_subs_stroke_use: 'Использовать обводку',
    settings_player_subs_stroke_use_descr: 'Субтитры будут отображаться с обводкой для улучшения читаемости',
    settings_player_subs_backdrop_use: 'Подложка субтитров',
    settings_player_subs_backdrop_use_descr: 'Субтитры будут отображаться с подложкой для улучшения читаемости',
    settings_player_quality: 'Качество видео по умолчанию',
    settings_player_quality_descr: 'Выберете качество видео по умолчанию',
    settings_player_hls_title: 'Обработка потока .m3u8',
    settings_player_hls_descr: 'Не трогайте этот параметр, если не знаете, зачем он',
    settings_player_rewind_title: 'Интервал перемотки',
    settings_player_rewind_descr: 'Выберете необходимый интервал перемотки',
    settings_player_launch_trailers: 'Плеер для трейлеров',
    settings_plugins_notice: 'Для применения плагина необходимо перезагрузить приложение',
    settings_plugins_add: 'Добавить плагин',
    settings_plugins_add_descr: 'Для удаления добавленного плагина удерживайте или нажмите дважды клавишу (OK) на нем',
    settings_plugins_install: 'Установить плагин',
    settings_plugins_install_descr: 'Установить плагин из списка доступных',
    settings_server_link: 'Использовать ссылку',
    settings_server_links: 'TorrServer',
    settings_server_placeholder: 'Например: 192.168.х',
    settings_server_link_one: 'Ссылка на скрипт TorrServer',
    settings_server_link_one_descr: 'Укажите ссылку на скрипт TorrServer',
    settings_server_link_one_localip: 'Для локального 127.0.0.1:8090',
    settings_server_link_two: 'Дополнительная ссылка',
    settings_server_link_two_descr: 'Укажите дополнительную ссылку на скрипт TorrServer',
    settings_server_additionally: 'Дополнительно',
    settings_server_client: 'Встроенный клиент',
    settings_server_client_descr: 'Использовать встроенный JS-клиент TorrServer, иначе запускается системный.',
    settings_server_base: 'Сохранять в базу',
    settings_server_base_descr: 'Торрент будет добавлен в базу TorrServer',
    settings_server_preload: 'Буфер предварительной загрузки',
    settings_server_preload_descr: 'Дождаться заполнения буфера предварительной загрузки TorrServer перед проигрыванием контента',
    settings_server_auth: 'Авторизация',
    settings_server_password_use: 'Вход по паролю',
    settings_server_login: 'Логин',
    settings_server_password: 'Пароль',
    settings_server_not_specified: 'Не указан',
    settings_webos_launcher: 'Запуск приложения',
    settings_webos_launcher_add_device: 'Установить как стартовое',
    settings_webos_launcher_remove_device: 'Убрать из стартовых приложений',
    settings_parental_control_param_time_always: 'Всегда',
    settings_parental_control_param_time_once: 'Один раз',
    settings_parental_control_param_time_10: 'Через 10 минут',
    settings_parental_control_param_time_20: 'Через 20 минут',
    settings_parental_control_param_time_30: 'Через 30 минут',
    settings_parental_control_param_time_60: 'Через 1 час',
    settings_parental_control_param_time_120: 'Через 2 часа',
    settings_parental_control_change_pin: 'Изменить PIN-код',
    settings_parental_control_demand_title: 'Когда запрашивать',
    settings_parental_control_demand_descr: 'Через какое время запрашивать PIN-код',
    settings_parental_control_enabled: 'Включено',
    settings_parental_control_disabled: 'Отключено',
    parental_control_input_new_code: 'Введите новый PIN-код',
    parental_control_confirm_new_code: 'Повторите PIN-код',
    parental_control_no_match_code: 'PIN-код не совпадает с прошлым кодом',
    parental_control_input_code: 'Введите PIN-код',
    parental_control_input_error: 'Вы ввели неправильный PIN-код',
    torent_nohash_reasons: 'Причины',
    torent_nohash_reason_one: 'TorServer не смог скачать торрент файл',
    torent_nohash_reason_two: 'Ответ от TorServer',
    torent_nohash_reason_three: 'Ссылка',
    torent_nohash_do: 'Что делать?',
    torent_nohash_do_one: 'Проверьте правильно ли вы настроили Jackett',
    torent_nohash_do_two: 'Приватные источники могут не выдавать ссылку на файл',
    torent_nohash_do_three: 'Убедитесь что Jackett тоже может скачать файл',
    torent_nohash_do_four: 'Написать в нашу Telegram-группу: @prisma_party',
    torent_nohash_do_five: 'Укажите какой фильм, какая раздача и по возможности фото этой раздачи',
    torrent_error_text: 'Не удалось подключиться к TorrServer. Давайте быстро пройдёмся по списку возможных проблем и всё проверим.',
    torrent_error_step_1: 'Запущен ли TorrServer',
    torrent_error_step_2: 'Динамический IP-адрес',
    torrent_error_step_3: 'Протокол и порт',
    torrent_error_step_4: 'Блокировка антивирусами',
    torrent_error_step_5: 'Проверьте на доступность',
    torrent_error_step_6: 'Все равно не работает',
    torrent_error_info_1: 'Убедитесь, что вы запустили TorrServer на устройстве, где он установлен.',
    torrent_error_info_2: 'Частая ошибка, изменился IP-адрес устройства с TorrServer. Убедитесь, что IP-адрес, который вы ввели - {ip}, совпадает с адресом устройства, на котором установлен TorrServer.',
    torrent_error_info_3: 'Для подключения к TorrServer, необходимо указать протокол http:// в начале и порт :8090 в конце адреса. Убедитесь, что после IP-адреса указан порт, ваш текущий адрес - {ip}',
    torrent_error_info_4: 'Частое явление, антивирус или брандмауэр может блокировать доступ по IP-адресу, попробуйте отключить антивирус и брандмауэр.',
    torrent_error_info_5: 'На любом другом устройстве в этой же сети, откройте в браузере адрес {ip} и проверьте, доступен ли веб-интерфейс TorrServer.',
    torrent_error_info_6: 'Если после всех проверок всё равно возникает ошибка подключения, попробуйте перезагрузить TorrServer и интернет-адаптер.',
    torrent_error_info_7: 'Если проблема не устранена, пишите в Telegram-группу @prisma_party с текстом (Prisma не подключается к TorrServer после всех проверок, текущий адрес {ip})',
    torrent_error_start: 'Начать проверку',
    torrent_error_nomatrix: 'Не удалось подтвердить версию Matrix',
    torrent_error_made: 'Выполнено',
    torrent_error_from: 'из',
    torrent_error_next: 'Далее',
    torrent_error_complite: 'Завершить',
    torrent_error_connect: 'Ошибка подключения',
    torrent_error_check_no_auth: 'Сервер ответил на запрос, но не удалось пройти авторизацию',
    torrent_install_need: 'TorrServer отсутствует',
    torrent_install_text: 'TorrServer – приложение, позволяет просматривать контент из торрент-файлов в онлайн режиме.<br><br>Подключение к торренту идет локально, если ваш провайдер блокирует торренты, будьте осторожны.<br><br>Помните, что в некоторых странах просмотр TorrServer может быть рассмотрен как нарушение авторских прав и привести к штрафам или другим юридическим последствиям. Будьте внимательны к законам вашей страны.',
    torrent_install_contact: 'Telegram',
    torrent_item_bitrate: 'Битрейт',
    torrent_item_seeds: 'Раздают',
    torrent_item_grabs: 'Качают',
    torrent_item_mb: 'Мбит/с',
    torrent_serial_episode: 'Серия',
    torrent_serial_season: 'Сезон',
    torrent_serial_date: 'Выход',
    torrent_get_magnet: 'Запрашиваю magnet ссылку',
    torrent_remove_title: 'Удалить',
    torrent_remove_descr: 'Торрент будет удален из вашего списка',
    torrent_parser_any_one: 'Любое',
    torrent_parser_any_two: 'Любой',
    torrent_parser_no_choice: 'Не выбрано',
    torrent_parser_yes: 'Да',
    torrent_parser_no: 'Нет',
    torrent_parser_quality: 'Качество',
    torrent_parser_subs: 'Субтитры',
    torrent_parser_voice: 'Перевод',
    torrent_parser_tracker: 'Трекер',
    torrent_parser_year: 'Год',
    torrent_parser_season: 'Сезон',
    torrent_parser_sort_by_seeders: 'По раздающим',
    torrent_parser_sort_by_size: 'По размеру',
    torrent_parser_sort_by_name: 'По названию',
    torrent_parser_sort_by_tracker: 'По источнику',
    torrent_parser_sort_by_date: 'По дате',
    torrent_parser_sort_by_viewed: 'По просмотренным',
    torrent_parser_voice_dubbing: 'Дубляж',
    torrent_parser_voice_polyphonic: 'Многоголосый',
    torrent_parser_voice_two: 'Двухголосый',
    torrent_parser_voice_amateur: 'Любительский',
    torrent_parser_reset: 'Сбросить фильтр',
    torrent_parser_empty: 'Не удалось получить результатов',
    torrent_parser_no_hash: 'Не удалось получить HASH',
    torrent_parser_added_to_mytorrents: 'добавлено в «Мои торренты»',
    torrent_parser_add_to_mytorrents: 'Добавить в «Мои торренты»',
    torrent_parser_label_title: 'Пометить',
    torrent_parser_label_descr: 'Пометить раздачу с флагом (просмотрено)',
    torrent_parser_label_cancel_title: 'Снять отметку',
    torrent_parser_label_cancel_descr: 'Снять отметку с раздачи (просмотрено)',
    torrent_parser_timeout: 'Время ожидания истекло',
    torrent_parser_nofiles: 'Не удалось извлечь подходящие файлы',
    torrent_parser_set_link: 'Укажите ссылку для парсинга',
    torrent_parser_request_error: 'Ошибка в запросе',
    torrent_parser_magnet_error: 'Не удалось получить magnet ссылку',
    torrent_parser_no_responce: 'Парсер не доступен',
    torrent_parser_settings_info: ' <br>Попробуйте поменять на другой в настройках или указать свой адрес.',
    torrent_parser_torlook_fallback_search_notification: 'Парсер Jackett не доступен или настройки подключения не верны. Осуществляется поиск в Torlook...',
    about_text: '1. Приложение для просмотра фильмов и сериалов использует информацию исключительно в познавательных целях. Все данные о фильмах и сериалах берутся из API открытых источников, таких как TMDB (The Movie Database), который предоставляет доступ к карточкам фильмов, актерам, трейлерам и другой связанной информации. Приложение не хранит никакую информацию на своих серверах, а лишь отображает данные, полученные из сторонних API, обеспечивая удобный доступ к ним для пользователей.',
    about_android: '2. Приложение для Android вы можете скачать в нашей группе Telegram',
    about_mobile: '3. PWA-приложение для мобильных устройств и планшетов под управлением iOS и Android можно добавить на главный экран через настройки вашего браузера, что позволит вам получить быстрый доступ к приложению прямо с домашнего экрана, как если бы это было обычное нативное приложение.',
    about_abuse: '4. По DCMA пишите нам на почту abuse@prisma.cam',
    about_channel: 'Telegram',
    about_group: 'Группа',
    about_version: 'Версия',
    about_donate: 'Донат',
    title_watched: 'Продолжить просмотр',
    title_settings: 'Настройки',
    title_collections: 'Подборки',
    title_company: 'Компания',
    title_actors: 'Актеры',
    title_actor: 'Актер',
    title_actress: 'Актриса',
    title_person: 'Персона',
    title_persons: 'Персоны',
    title_comments: 'Отзывы',
    title_torrents: 'Торренты',
    title_trailers: 'Трейлеры',
    title_watch: 'Смотреть',
    title_error: 'Ошибка',
    title_links: 'Ссылки',
    title_choice: 'Выбрать',
    title_main: 'Главная',
    title_book: 'Закладки',
    title_like: 'Нравится',
    title_wath: 'Позже',
    title_look: 'Смотрю',
    title_scheduled: 'Запланировано',
    title_viewed: 'Просмотрено',
    title_thrown: 'Брошено',
    title_continued: 'Продолжение следует',
    title_history: 'История просмотров',
    title_mytorrents: 'Мои торренты',
    title_last: 'Последняя',
    title_action: 'Действие',
    title_producer: 'Режиссер',
    title_collection: 'Коллекция',
    title_recomendations: 'Рекомендации',
    title_similar: 'Похожие',
    title_about: 'О приложении',
    title_timetable: 'Расписание',
    title_relises: 'Цифровые релизы',
    title_catalog: 'Каталог',
    title_category: 'Категория',
    title_parser: 'Парсер',
    title_type: 'Тип',
    title_rating: 'Рейтинг',
    title_country: 'Страна',
    title_year: 'Год',
    title_genre: 'Жанр',
    title_filter: 'Фильтр',
    title_notice: 'Уведомления',
    title_files: 'Файлы',
    title_now_watch: 'Сейчас смотрят',
    title_high_rating: 'Высокий рейтинг',
    title_many_votes: 'Выбор зрителей',
    title_new_releases: 'Новые релизы',
    title_audience_interest: 'Интерес зрителей',
    title_on: 'на',
    title_russian: 'Россия',
    title_best_movies: 'Популярные фильмы',
    title_best_shows: 'Популярные сериалы',
    title_premiere: 'Сейчас смотрят',
    title_latest: 'Последнее добавление',
    title_continue: 'Продолжить просмотр',
    title_recomend_watch: 'Рекомендация на основе ваших интересов',
    title_new_episodes: 'Новые серии',
    title_popular: 'Популярное',
    title_popular_movie: 'Популярные фильмы',
    title_popular_tv: 'Популярные сериалы',
    title_popular_movie_week: 'Лучшие фильмы недели по оценкам пользователей',
    title_popular_tv_week: 'Лучшие сериалы недели по оценкам пользователей',
    title_new_this_year: 'Новинки этого года',
    title_hight_voite: 'Лидируют по рейтингу',
    title_new: 'Новинки',
    title_this_year: 'Новинки этого года',
    title_trend_day: 'Сегодня в тренде',
    title_trend_netflix: 'Топ Netflix',
    title_trend_kinopoisk: 'Кинопоиск',
    title_trend_hbo: 'Топ HBO',
    title_russian_movies: 'Российские фильмы',
    title_russian_tv_shows: 'Российские сериалы',
    title_trend_week: 'В тренде за неделю',
    title_upcoming: 'Сейчас на больших экранах',
    title_top_movie: 'Топ фильмы',
    title_top_tv: 'Топ сериалы',
    title_tv_today: 'Сегодня в эфире',
    title_this_week: 'На этой неделе',
    title_in_top: 'В топе',
    title_out: 'Закрыть приложение? 😞',
    title_out_confirm: 'Закрыть',
    title_continue_two: 'Продолжить',
    title_choice_language: 'Выбрать язык',
    title_subscribe: 'Подписаться',
    title_subscribes: 'Подписки',
    title_unsubscribe: 'Отписаться',
    title_language: 'Язык оригинала',
    title_language_short: 'Язык',
    title_ongoing: 'Сериалы',
    title_pgrating: 'Возрастное ограничение',
    title_card: 'Карточка',
    title_seasons: 'Сезоны',
    title_episodes: 'Серии',
    title_rewiews: 'Отзывы',
    title_channel: 'Канал',
    title_in_high_quality: 'В высоком качестве',
    title_author: 'Автор',
    title_buffer: 'Буфер',
    title_upcoming_episodes: 'Ближайшие выходы эпизодов',
    title_reactions: 'Рейтинг',
    title_last_year: 'Прошлый год',
    title_reset: 'Перезагрузить',
    title_left: 'Осталось',
    title_parental_control: 'Родительский контроль',
    title_worth_rewatch: 'Стоит пересмотреть',
    your_rating: 'Ваш рейтинг',
    reactions_votes: 'Голосов',
    reactions_none: 'Нет оценок',
    reactions_fire: 'Супер',
    reactions_nice: 'Неплохо',
    reactions_think: 'Смотрибельно',
    reactions_bore: 'Скука',
    reactions_shit: 'Плохо',
    reactions_ready: 'Вы уже оставили реакцию',
    reactions_error: 'Ошибка сервера, попробуйте позже.',
    reactions_thanks: 'Спасибо за ваш голос, это помогает пользователям выбрать лучший контент',
    subscribe_success: 'Вы успешно подписались',
    subscribe_error: 'Возникла ошибка при подписке, попробуйте позже',
    subscribe_noinfo: 'Не удалось получить информацию, попробуйте позже',
    company_headquarters: 'Штаб',
    company_homepage: 'Сайт',
    company_country: 'Страна',
    country_ad: 'Андорра',
    country_ae: 'ОАЭ',
    country_af: 'Афганистан',
    country_al: 'Албания',
    country_am: 'Армения',
    country_ao: 'Ангола',
    country_ar: 'Аргентина',
    country_at: 'Австрия',
    country_au: 'Австралия',
    country_aw: 'Аруба',
    country_az: 'Азербайджан',
    country_bа: 'Босния и Герцеговина',
    country_bd: 'Бангладеш',
    country_be: 'Бельгия',
    country_bg: 'Болгария',
    country_bh: 'Бахрейн',
    country_bi: 'Бурунди',
    country_bj: 'Бенин',
    country_bo: 'Боливия',
    country_br: 'Бразилия',
    country_bs: 'Багамские о-ва',
    country_bt: 'Бутан',
    country_bw: 'Ботсвана',
    country_by: 'Беларусь',
    country_ca: 'Канада',
    country_ch: 'Швейцария',
    country_cl: 'Чили',
    country_cm: 'Камерун',
    country_cn: 'Китай',
    country_co: 'Колумбия',
    country_cr: 'Коста-Рика',
    country_cu: 'Куба',
    country_cv: 'Кабо-Верде',
    country_cy: 'Кипр',
    country_cz: 'Чехия',
    country_de: 'Германия',
    country_dj: 'Джибути',
    country_dk: 'Дания',
    country_do: 'Доминикана',
    country_dz: 'Алжир',
    country_ec: 'Эквадор',
    country_ee: 'Эстония',
    country_eg: 'Египет',
    country_es: 'Испания',
    country_et: 'Эфиопия',
    country_fi: 'Финляндия',
    country_fo: 'Фарерские о-ва',
    country_fr: 'Франция',
    country_ga: 'Габон',
    country_gb: 'Великобритания',
    country_ge: 'Грузия',
    country_gh: 'Гана',
    country_gl: 'Гренландия',
    country_gp: 'Гваделупа',
    country_gr: 'Греция',
    country_gt: 'Гватемала',
    country_hk: 'Гонконг',
    country_hr: 'Хорватия',
    country_ht: 'Гаити',
    country_hu: 'Венгрия',
    country_id: 'Индонезия',
    country_ie: 'Ирландия',
    country_il: 'Израиль',
    country_in: 'Индия',
    country_iq: 'Ирак',
    country_ir: 'Иран',
    country_is: 'Исландия',
    country_it: 'Италия',
    country_jm: 'Ямайка',
    country_jo: 'Иордания',
    country_jp: 'Япония',
    country_ke: 'Кения',
    country_kg: 'Киргизия',
    country_kh: 'Камбоджа',
    country_kp: 'Северная Корея',
    country_kr: 'Южная Корея',
    country_kz: 'Казахстан',
    country_kw: 'Кувейт',
    country_la: 'Лаос',
    country_lb: 'Ливан',
    country_li: 'Лихтенштейн',
    country_lk: 'Шри-Ланка',
    country_lr: 'Либерия',
    country_lt: 'Литва',
    country_lu: 'Люксембург',
    country_lv: 'Латвия',
    country_ly: 'Ливия',
    country_ma: 'Марокко',
    country_mc: 'Монако',
    country_md: 'Молдова',
    country_me: 'Черногория',
    country_mk: 'Македония',
    country_mm: 'Мьянма',
    country_mn: 'Монголия',
    country_mo: 'Макао',
    country_mt: 'Мальта',
    country_mu: 'Маврикий',
    country_mv: 'Мальдивы',
    country_mw: 'Малави',
    country_mx: 'Мексика',
    country_my: 'Малайзия',
    country_mz: 'Мозамбик',
    country_na: 'Намибия',
    country_ne: 'Нигер',
    country_ng: 'Нигерия',
    country_ni: 'Никарагуа',
    country_nl: 'Нидерланды',
    country_no: 'Норвегия',
    country_np: 'Непал',
    country_nz: 'Новая Зеландия',
    country_om: 'Оман',
    country_pa: 'Панама',
    country_pe: 'Перу',
    country_pg: 'Папуа - Новая Гвинея',
    country_ph: 'Филиппины',
    country_pk: 'Пакистан',
    country_pl: 'Польша',
    country_pr: 'Пуэрто-Рико',
    country_ps: 'Палестина',
    country_pt: 'Португалия',
    country_py: 'Парагвай',
    country_qa: 'Катар',
    country_ro: 'Румыния',
    country_rs: 'Сербия',
    country_ru: 'Россия',
    country_rw: 'Руанда',
    country_sa: 'Саудовская Аравия',
    country_sd: 'Судан',
    country_se: 'Швеция',
    country_sg: 'Сингапур',
    country_si: 'Словения',
    country_sk: 'Словакия',
    country_sn: 'Сенегал',
    country_su: 'СССР',
    country_sv: 'Сальвадор',
    country_sy: 'Сирия',
    country_th: 'Таиланд',
    country_tj: 'Таджикистан',
    country_tm: 'Туркменистан',
    country_tn: 'Тунис',
    country_tr: 'Турция',
    country_tw: 'Тайвань',
    country_tz: 'Танзания',
    country_ua: 'Украина',
    country_ug: 'Уганда',
    country_us: 'США',
    country_uy: 'Уругвай',
    country_uz: 'Узбекистан',
    country_ve: 'Венесуэла',
    country_vn: 'Вьетнам',
    country_ws: 'Самоа',
    country_xk: 'Косово',
    country_ye: 'Йемен',
    country_yu: 'Югославия',
    country_za: 'ЮАР',
    country_zm: 'Замбия',
    country_zw: 'Зимбабве',
    filter_clarify: 'Уточнить',
    filter_clarify_two: 'Уточнить поиск',
    filter_set_name: 'Указать название',
    filter_sorted: 'Сортировать',
    filter_filtred: 'Фильтр',
    filter_any: 'Любой',
    filter_combinations: 'Комбинации',
    filter_alt_names: 'Другие названия',
    filter_rating_from: 'от',
    filter_rating_to: 'до',
    filter_lang_af: 'Африкаанс',
    filter_lang_ar: 'Арабский',
    filter_lang_az: 'Азербайджанский',
    filter_lang_ba: 'Башкирский',
    filter_lang_be: 'Белорусский',
    filter_lang_bg: 'Болгарский',
    filter_lang_bn: 'Бенгальский',
    filter_lang_bs: 'Боснийский',
    filter_lang_ca: 'Каталанский',
    filter_lang_ce: 'Чеченский',
    filter_lang_cs: 'Чешский',
    filter_lang_da: 'Датский',
    filter_lang_de: 'Немецкий',
    filter_lang_el: 'Греческий',
    filter_lang_en: 'Английский',
    filter_lang_es: 'Испанский',
    filter_lang_et: 'Эстонский',
    filter_lang_fa: 'Персидский',
    filter_lang_fi: 'Финский',
    filter_lang_fr: 'Французский',
    filter_lang_ga: 'Ирландский',
    filter_lang_gl: 'Галисийский',
    filter_lang_gn: 'Гуарани',
    filter_lang_he: 'Иврит',
    filter_lang_hi: 'Хинди',
    filter_lang_hr: 'Хорватский',
    filter_lang_hu: 'Венгерский',
    filter_lang_hy: 'Армянский',
    filter_lang_id: 'Индонезийский',
    filter_lang_is: 'Исландский',
    filter_lang_it: 'Итальянский',
    filter_lang_ja: 'Японский',
    filter_lang_ka: 'Грузинский',
    filter_lang_kk: 'Казахский',
    filter_lang_ko: 'Корейский',
    filter_lang_ks: 'Кашмири',
    filter_lang_ku: 'Курдский',
    filter_lang_ky: 'Киргизский',
    filter_lang_lt: 'Литовский',
    filter_lang_lv: 'Латышский',
    filter_lang_mi: 'Маори',
    filter_lang_mk: 'Македонский',
    filter_lang_mn: 'Монгольский',
    filter_lang_mo: 'Молдавский',
    filter_lang_mt: 'Мальтийский',
    filter_lang_ne: 'Непальский',
    filter_lang_nl: 'Нидерландский',
    filter_lang_no: 'Норвежский',
    filter_lang_pa: 'Панджаби',
    filter_lang_pl: 'Польский',
    filter_lang_ps: 'Пушту',
    filter_lang_pt: 'Португальский',
    filter_lang_ro: 'Румынский',
    filter_lang_ru: 'Русский',
    filter_lang_si: 'Сингальский',
    filter_lang_sk: 'Словацкий',
    filter_lang_sl: 'Словенский',
    filter_lang_sm: 'Самоанский',
    filter_lang_so: 'Сомалийский',
    filter_lang_sq: 'Албанский',
    filter_lang_sr: 'Сербский',
    filter_lang_sv: 'Шведский',
    filter_lang_sw: 'Суахили',
    filter_lang_ta: 'Тамильский',
    filter_lang_tg: 'Таджикский',
    filter_lang_th: 'Тайский',
    filter_lang_tk: 'Туркменский',
    filter_lang_tr: 'Турецкий',
    filter_lang_tt: 'Татарский',
    filter_lang_ur: 'Урду',
    filter_lang_uk: 'Украинский',
    filter_lang_uz: 'Узбекский',
    filter_lang_vi: 'Вьетнамский',
    filter_lang_yi: 'Идиш',
    filter_lang_zh: 'Китайский',
    filter_genre_ac: 'Боевик',
    filter_genre_ad: 'Приключения',
    filter_genre_mv: 'Мультфильм',
    filter_genre_cm: 'Комедия',
    filter_genre_cr: 'Криминал',
    filter_genre_dc: 'Документальный',
    filter_genre_dr: 'Драма',
    filter_genre_fm: 'Семейный',
    filter_genre_fe: 'Фэнтези',
    filter_genre_hi: 'История',
    filter_genre_ho: 'Ужасы',
    filter_genre_mu: 'Музыка',
    filter_genre_de: 'Детектив',
    filter_genre_md: 'Мелодрама',
    filter_genre_fa: 'Фантастика',
    filter_genre_tv: 'Телевизионный фильм',
    filter_genre_tr: 'Триллер',
    filter_genre_mi: 'Военный',
    filter_genre_ve: 'Вестерн',
    filter_genre_aa: 'Боевик и Приключения',
    filter_genre_ch: 'Детский',
    filter_genre_nw: 'Новости',
    filter_genre_rs: 'Реалити-шоу',
    filter_genre_hf: 'НФ и Фэнтези',
    filter_genre_op: 'Мыльная опера',
    filter_genre_tc: 'Ток-шоу',
    filter_genre_mp: 'Война и Политика',
    empty_title: 'Пусто',
    empty_text: 'По вашему фильтру ничего не нашлось, уточните фильтр.',
    empty_title_two: 'Упс',
    empty_text_two: 'В данный момент тут пусто',
    back_to_card: 'Вернуться в карточку',
    menu_main: 'Главная',
    menu_movies: 'Фильмы',
    menu_tv: 'Сериалы',
    menu_catalog: 'Каталог',
    menu_filter: 'Фильтр',
    menu_collections: 'Подборки',
    menu_relises: 'Релизы',
    menu_anime: 'Аниме',
    menu_bookmark: 'Закладки',
    menu_like: 'Нравится',
    menu_time: 'Позже',
    menu_history: 'История',
    menu_timeline: 'Расписание',
    menu_torrents: 'Торренты',
    menu_settings: 'Настройки',
    menu_about: 'Инфо',
    menu_console: 'Консоль',
    menu_multmovie: 'Детям',
    menu_multtv: 'Мультсериалы',
    menu_feed: 'Лента',
    prisma_movie_title: 'Ламповое кино',
    prisma_movie_descr: 'Следите за новинками на своем смартфоне. <br>Телеграм: <b>@prisma_movie</b>',
    plugins_catalog_work: 'Рабочие плагины',
    plugins_catalog_work_descr: 'Плагины, которые точно работают.',
    plugins_catalog_popular: 'Популярные плагины среди пользователей',
    plugins_catalog_popular_descr: 'Установка из неизвестных источников может привести к некорректной работе приложения.',
    plugins_online: 'Просмотр онлайн',
    plugins_check_fail: 'Не удалось проверить работоспособность плагина. Однако это не означает, что плагин не работает. Перезагрузите приложение для выяснения, загружается ли плагин.',
    plugins_need_reload: 'Для применения плагина необходимо перезагрузить приложение',
    plugins_install: 'Установить',
    plugins_install_ready: 'Этот плагин уже установлен.',
    plugins_installed: 'Установок',
    plugins_load_from: 'Загружено из CUB',
    plugins_ok_for_check: 'Нажмите (OK) для проверки плагина',
    plugins_no_loaded: 'При загрузке приложения, часть плагинов не удалось загрузить',
    plugins_remove: 'Удалить плагины',
    plugins_add_success: 'Плагин успешно подключен',
    time_viewed: 'Просмотрено',
    time_from: 'из',
    time_reset: 'Сбросить тайм-код',
    settings_clear_cache: 'Кеш и данные очищены',
    settings_clear_cache_only: 'Кеш очищен',
    settings_cache_only: 'Кеш',
    settings_user_links: 'Пользовательская ссылка',
    settings_for_local: 'Для локального TorrServer',
    settings_add: 'Добавить',
    settings_remove: 'Удалить',
    settings_manager: 'Менеджер хранилища',
    settings_this_value: 'текущее значение',
    settings_added: 'Добавлено',
    settings_removed: 'Удалено',
    settings_reset: 'Сброс настроек',
    settings_param_player_inner: 'Встроенный',
    settings_param_player_outside: 'Внешний',
    settings_param_player_inner_tvos: 'Встроенный',
    settings_param_yes: 'Да',
    settings_param_no: 'Нет',
    settings_param_interface_size_small: 'Стандартный',
    settings_param_interface_size_normal: 'Нормальный',
    settings_param_interface_size_bigger: 'Больше',
    settings_interface_size_descr: 'Выберите размер интерфейса',
    settings_param_poster_quality_low: 'Низкое',
    settings_param_poster_quality_average: 'Среднее',
    settings_param_poster_quality_high: 'Высокое',
    settings_param_parse_directly: 'Напрямую',
    settings_param_parse_api: 'Через API сайта',
    settings_param_background_complex: 'Сложный',
    settings_param_background_simple: 'Простой',
    settings_param_background_image: 'Картинка',
    settings_param_link_use_one: 'Встроенную',
    settings_server_use_link_descr: 'Используйте встроенную или дополнительную',
    settings_torrserver_auth: 'Укажите логин и пароль если это необходимо',
    settings_param_link_use_two: 'Дополнительную',
    settings_param_subtitles_size_small: '40%',
    settings_param_subtitles_size_normal: '60%',
    settings_param_subtitles_size_bigger: '90%',
    settings_param_screensaver_nature: 'Природа',
    settings_param_torrent_lang_orig: 'Оригинал',
    settings_param_player_timecode_again: 'Начать с начала',
    settings_param_player_timecode_continue: 'Продолжить',
    settings_param_player_timecode_ask: 'Спрашивать',
    settings_param_player_scale_method: 'Рассчитать',
    settings_param_player_hls_app: 'Системный',
    settings_param_player_hls_js: 'Программный',
    settings_param_card_view_load: 'Подгружать',
    settings_param_card_view_all: 'Показать все',
    settings_param_navigation_remote: 'Пульт',
    settings_param_navigation_mouse: 'Пульт с мышкой',
    settings_param_keyboard_prisma: 'Встроенная',
    settings_param_keyboard_system: 'Системная',
    settings_param_card_interface_old: 'Старый',
    settings_param_card_interface_new: 'Новый',
    settings_param_glass_easy: 'Прозрачная',
    settings_param_glass_medium: 'Полупрозрачная',
    settings_param_glass_blacked: 'Затемнённая',
    settings_param_jackett_interview_all: 'Все',
    settings_param_jackett_interview_healthy: 'Только доступные',
    settings_parser_jackett_interview: 'Опрашивать трекеры',
    helper_keyboard: 'После ввода значения нажмите кнопку «Назад» для сохранения',
    helper_torrents: 'Удерживайте клавишу (ОК) для вызова контекстного меню',
    helper_cleared: 'Успешно, подсказки будут показаны заново.',
    helper_torrents_view: 'Для сброса тайм-кода и вызова меню удерживайте клавишу (ОК)',
    fav_sync_title: 'Синхронизация закладок',
    fav_sync_text: 'Ваши любимые закладки вместе с Вами. Подключите синхронизацию и просматривайте на любом устройстве. <br><br>Для этого зарегистрируйтесь в Telegram: @prismalk_bot, создайте профиль и авторизуйтесь в приложение.',
    fav_sync_site: 'Сайт',
    fav_remove_title: 'Удалить из истории',
    fav_remove_descr: 'Удалить выделенную карточку',
    fav_clear_title: 'Очистить историю',
    fav_clear_descr: 'Удалить все карточки из истории',
    fav_clear_label_title: 'Сбросить метки',
    fav_clear_label_descr: 'Сбросить метки просмотра',
    fav_clear_time_title: 'Сбросить тайм-код',
    fav_clear_time_descr: 'Сбросить все тайм-коды',
    fav_label_cleared: 'Отметки очищены',
    fav_time_cleared: 'Тайм-коды очищены',
    timetable_empty: 'В этом разделе будут отображаться даты выхода новых серий',
    player_quality: 'Качество',
    player_flow: 'Поток',
    player_tracks: 'Аудиодорожки',
    player_disabled: 'Отключено',
    player_unknown: 'Неизвестно',
    player_subs: 'Субтитры',
    player_size_default_title: 'По умолчанию',
    player_size_default_descr: 'Размер видео по умолчанию',
    player_size_cover_title: 'Расширить',
    player_size_cover_descr: 'Расширяет видео на весь экран',
    player_size_fill_title: 'Заполнить',
    player_size_fill_descr: 'Вместить видео на весь экран',
    player_size_s115_title: 'Увеличить 115%',
    player_size_s115_descr: 'Увеличить видео на 115%',
    player_size_s130_title: 'Увеличить 130%',
    player_size_s130_descr: 'Увеличить видео на 130%',
    player_size_v115_title: 'По вертикали 115%',
    player_size_v115_descr: 'Увеличить видео на 115%',
    player_size_v130_title: 'По вертикали 130%',
    player_size_v130_descr: 'Увеличить видео на 130%',
    player_video_size: 'Размер видео',
    player_playlist: 'Плейлист',
    player_error_one: 'Не удалось декодировать видео',
    player_error_two: 'Видео не найдено или повреждено',
    player_start_from: 'Продолжить просмотр с',
    player_not_found: 'Плеер не найден',
    player_lauch: 'Запустить плеер',
    player_speed_default_title: 'Обычная',
    player_speed_two_descr: 'Воспроизводиться без звука',
    player_video_speed: 'Скорость воспроизведения',
    player_share_title: 'Поделиться',
    player_share_descr: 'Запустить это видео на другом устройстве',
    player_normalization_power_title: 'Сила нормализации',
    player_normalization_smooth_title: 'Скорость нормализации',
    player_normalization_step_none: 'Ноль',
    player_normalization_step_low: 'Низкое',
    player_normalization_step_medium: 'Среднее',
    player_normalization_step_hight: 'Высокое',
    player_normalization: 'Нормализация',
    player_normalization_type_title: 'Тип нормализации',
    player_normalization_type_all: 'Все',
    player_normalization_type_up: 'Только повышение',
    player_normalization_type_down: 'Только понижение',
    player_youtube_no_played: 'К сожалению, это видео не доступно в вашем регионе, возможно, оно было заблокировано или удалено.',
    player_youtube_start_play: 'Для начала проигрывания видео, нажмите кнопку "Плей"',
    discuss_voited: "Спасибо вам за ваш отзыв!",
    confirm_open_player: 'Другое устройство запрашивает доступ к плееру. Хотите воспроизвести видео?',
    title_ai_assistant: 'OpenAI',
    title_facts: 'Малоизвестные факты',
    ai_search_start_typing: 'Спросите у OpenAI ассистента, какие фильмы вы хотите найти. Например: "Фильмы про космос"',
    ai_search_limit: 'Лимит запросов превышен. Попробуйте повторить запрос позже. С подпиской Premium лимиты будут увеличены, и вам не придется ждать!',
    ai_subscribe_title: 'Откройте бошьше возможностей с OpenAI',
    ai_subscribe_descr: 'Оформите подписку Premium и увеличте количество запросов.   OpenAI подберет вам лучшие фильмы которые только сможет.',
    dmca_title: 'Контент заблокирован',
    dmca_descr: 'Данный материал недоступен для просмотра. Он был заблокирован по просьбе правообладателя в соответствии с законодательством об авторских правах.',
    broadcast_open: 'Открыть карточку на другом устройстве',
    broadcast_play: 'Выберите устройство для просмотра',
    card_new_episode: 'Новая серия',
    card_book_remove: 'Убрать из закладок',
    card_book_add: 'В закладки',
    card_book_descr: 'Смотрите в меню (Закладки)',
    card_like_remove: 'Убрать из понравившихся',
    card_like_add: 'Нравится',
    card_like_descr: 'Смотрите в меню (Нравится)',
    card_wath_remove: 'Убрать из ожидаемых',
    card_wath_add: 'Смотреть позже',
    card_wath_descr: 'Смотрите в меню (Позже)',
    card_history_remove: 'Убрать из истории',
    card_history_add: 'В историю',
    card_history_descr: 'Смотрите в меню (История)',
    keyboard_listen: 'Говорите, я слушаю...',
    keyboard_nomic: 'Нет доступа к микрофону',
    notice_new_quality: 'Доступно новое качество',
    notice_quality: 'Качество',
    notice_new_episode: 'Новая серия',
    notice_none: 'У вас еще нет никаких уведомлений, зарегистрируйтесь в Telegram <b>@prismalk_bot/b>, чтобы следить за новыми сериями и релизами.',
    notice_in_quality: 'В качестве',
    notice_none_account: 'У вас еще нет никаких уведомлений, добавьте сериалы в закладки и ожидайте уведомления о новых сериях.',
    notice_none_system: 'На данный момент у вас отсутствуют уведомления. Мы обязательно оповестим вас, когда появятся новые уведомления.',
    copy_link: 'Копировать ссылку на видео',
    copy_secuses: 'Ссылка скопирована в буфер обмена',
    copy_error: 'Ошибка при копирование ссылки',
    account_sync_to_profile: 'Все закладки будут перенесены в профиль',
    account_sync_secuses: 'Все закладки успешно перенесены',
    account_profiles: 'Профили',
    account_profiles_empty: 'Не удалось получить список профилей',
    account_authorized: 'Авторизованы',
    account_logged_in: 'Вы вошли под аккаунтом',
    account_login_failed: 'Вход не выполнен',
    account_login_wait: 'Ожидаем входа в аккаунт',
    account_profile_main: 'Общий',
    account_export_secuses: 'Экспорт успешно завершён',
    account_export_fail: 'Ошибка при экспорте',
    account_export_fail_500: 'Неизвестная ошибка',
    account_export_fail_610: 'К сожалению вы исчерпали лимит на сегодня',
    account_export_fail_200: 'Ошибка базы данных, попробуйте позже',
    account_export_fail_600: 'Ошибка, не удалось загрузить файл',
    account_export_fail_620: 'Ошибка, файл не передан',
    account_import_secuses: 'Импорт успешно завершён',
    account_import_fail: 'Ошибка при импорте',
    account_imported: 'Импортировано',
    account_reload_after: 'Перезагрузка приложения через 5 сек.',
    account_create: 'Авторизуйтесь для доступа к расширенным функциям',
    account_premium: 'Сделайте свой вклад в наш проект, поддержав его чеканной монетой 😉',
    account_premium_more: 'Прямая ссылка',
    account_limited: 'Ваш лимит исчерпан. Перейдите на Premium для расширения возможностей. Оформление через Telegram <span class="account-modal__site">@prismalk_bot</span>',
    account_premium_include_1: 'Увеличение количество закладок',
    account_premium_include_2: 'Увеличение истории просмотров',
    account_premium_include_3: 'Увеличение количество тайм-кодов',
    account_premium_include_4: 'Количество профилей на аккаунт',
    account_premium_include_5: 'Уведомления',
    account_premium_include_6: 'Синхронизация данных',
    account_premium_include_text_1: 'Больше закладок - больше возможностей! Сохраняйте свои любимые фильмы и сериалы, создавайте списки просмотра и наслаждайтесь просмотром в любое удобное время.',
    account_premium_include_text_2: 'Увеличьте историю просмотров в приложении и следите за тем, что уже посмотрели. Легко находите и пересматривайте свои любимые фильмы и сериалы.',
    account_premium_include_text_3: 'Не бойтесь пропустить ни одной важной сцены! Увеличьте количество тайм-кодов в приложении и легко отслеживайте, где остановились в просмотре любимых фильмов и сериалов.',
    account_premium_include_text_4: 'Получите больше свободы с нашим премиум доступом! Увеличьте количество профилей на аккаунте и позвольте своим друзьям и близким наслаждаться фильмами и сериалами вместе с вами. Никаких ограничений - наслаждайтесь просмотром с любимыми людьми.',
    account_premium_include_text_5: 'Не пропустите ни одной новой серии или перевода! Получайте уведомления вовремя и будьте в курсе всех обновлений. Увеличьте свой кинопоток вместе с нами и получайте уведомления о выходе новых серий и переводов прямо на свой смартфон.',
    account_premium_include_text_6: 'Синхронизуйте свои данные между устройствами с премиум доступом! Больше не нужно тратить время на поиск последнего эпизода, на котором вы остановились. С нашим премиум доступом вы можете синхронизировать свои данные между устройствами, чтобы продолжать просмотр с места, где вы остановились, на любом устройстве, где установлено приложение.',
    account_code_enter: 'Введите полученный код',
    account_code_error: 'Возможно, вы ввели неверный или устаревший код',
    account_code_wrong: 'Возможно, вы указали неверный формат',
    account_code_where: 'Перейдите в телеграм бот <span class="account-add-device__site">@prismalk_bot</span> и введите полученный код.',
    account_code_info: '<span class="account-add-device__attention">ВНИМАНИЕ:</span> После авторизации все ваши закладки и история просмотров, сохранённые до авторизации, будут очищены.',
    account_code_input: 'Ввести код',
    network_noconnect: 'Нет подключения к сети',
    network_404: 'Запрошенная страница не найдена. [404]',
    network_401: 'Авторизация не удалась',
    network_500: 'Внутренняя ошибка сервера. [500]',
    network_parsererror: 'Запрошенный синтаксический анализ JSON завершился неудачно.',
    network_timeout: 'Время запроса истекло.',
    network_abort: 'Запрос был прерван.',
    network_error: 'Неизвестная ошибка',
    size_zero: '0 Байт',
    size_byte: 'Байт',
    size_kb: 'КБ',
    size_mb: 'МБ',
    size_gb: 'ГБ',
    size_tb: 'ТБ',
    size_pp: 'ПБ',
    speed_bit: 'бит/c',
    speed_kb: 'Кбит/c',
    speed_mb: 'Мбит/c',
    speed_gb: 'Гбит/c',
    speed_tb: 'Тбит/c',
    speed_pp: 'Пбит/c',
    month_1: 'Январь',
    month_2: 'Февраль',
    month_3: 'Март',
    month_4: 'Апрель',
    month_5: 'Ма',
    month_6: 'Июнь',
    month_7: 'Июль',
    month_8: 'Август',
    month_9: 'Сентябрь',
    month_10: 'Октябрь',
    month_11: 'Ноябрь',
    month_12: 'Декабрь',
    day_1: 'Понедельник',
    day_2: 'Вторник',
    day_3: 'Среда',
    day_4: 'Четверг',
    day_5: 'Пятница',
    day_6: 'Суббота',
    day_7: 'Воскресенье',
    month_1_e: 'Января',
    month_2_e: 'Февраля',
    month_3_e: 'Марта',
    month_4_e: 'Апреля',
    month_5_e: 'Мая',
    month_6_e: 'Июня',
    month_7_e: 'Июля',
    month_8_e: 'Августа',
    month_9_e: 'Сентября',
    month_10_e: 'Октября',
    month_11_e: 'Ноября',
    month_12_e: 'Декабря',
    week_1: 'Пн',
    week_2: 'Вт',
    week_3: 'Ср',
    week_4: 'Чт',
    week_5: 'Пт',
    week_6: 'Сб',
    week_7: 'Вс',
    time_h: 'ч.',
    time_m: 'м.',
    time_s: 'с.',
    extensions_enable: 'Включить',
    extensions_disable: 'Отключить',
    extensions_check: 'Проверить статус',
    extensions_install: 'Установить',
    extensions_info: 'Информация',
    extensions_edit: 'Редактировать',
    extensions_change_name: 'Изменить название',
    extensions_change_link: 'Изменить ссылку',
    extensions_remove: 'Удалить',
    extensions_set_name: 'Введите название плагина',
    extensions_set_url: 'Введите адрес плагина',
    extensions_ready: 'Этот плагин уже установлен',
    extensions_no_info: 'Без информации',
    extensions_no_name: 'Без названия',
    extensions_worked: 'Рабочий',
    extensions_no_plugin: 'Плагин не подтверждён ',
    extensions_add: 'Добавить плагин',
    extensions_from_memory: 'Установленные в память ',
    extensions_from_cub: 'Установленные из CUB',
    extensions_from_popular: 'Популярные плагины',
    extensions_from_lib: 'Библиотека плагинов',
    extensions_from_connected: 'Подключенные плагины',
    extensions_hpu_best: 'Популярные',
    extensions_hpu_recomend: 'Рекомендуем',
    extensions_hpu_theme: 'Темы',
    extensions_hpu_screensaver: 'Скринсейвер',
    extensions_hpu_video: 'Видео',
    extensions_hpu_control: 'Управление',
    extensions_hpu_other: 'Разное',
    extensions_hpu_: 'Остальные',
    speedtest_connect: 'подключение',
    speedtest_test: 'тестирование',
    speedtest_ready: 'готово',
    speedtest_button: 'Тестировать скорость',
    change_source_on_cub: 'Сменить источник',
    tv_status_returning_series: 'Сериал',
    tv_status_planned: 'Запланировано',
    tv_status_in_production: 'В производстве',
    tv_status_ended: 'Завершен',
    tv_status_canceled: 'Отменен',
    tv_status_pilot: 'Пилотный выпуск',
    tv_status_released: 'В прокате',
    tv_status_rumored: 'Слухи',
    tv_status_post_production: 'Скоро на экранах',
    tv_shows_name: 'Сериал',
    input_detection_touch: 'Переключить на сенсорное управление?',
    input_detection_mouse: 'Переключить на управление мышью?',
    input_detection_remote: 'Переключить на управление пультом?',
    https_text: 'Вы используйте протокол HTTPS, c которым Prisma работает некорректно. Для корректной работы приложения используйте адрес с протоколом HTTP',
    premiere_author_recomend_1: 'Закажите пиццу и готовьтесь к драйву.',
    premiere_author_recomend_2: 'Вечеринка только начинается.',
    premiere_author_recomend_3: 'Подготовьтесь к адреналину.',
    premiere_author_recomend_4: 'Готовы к незабываемому вечеру?',
    premiere_author_recomend_5: 'Рекомендую к просмотру.',
    premiere_title: 'Премьера',
    termsofuse_t_01: 'Правила использования',
    termsofuse_t_02: 'Prisma - это удобный инструмент для ознакомления с новинками киноиндустрии, включая фильмы, сериалы, мультфильмы и другую информацию. Для получения информации о фильмах используется открытый источник - сайт themoviedb.org',
    termsofuse_t_03: 'Контент',
    termsofuse_t_04: 'Prisma использует API (Application Programming Interface) от каталога themoviedb.org для получения информации о фильмах и телесериалах, а также для просмотра связанных с ними медиафайлов, таких как постеры, трейлеры и другое.',
    termsofuse_t_05: 'API от themoviedb.org позволяет приложению Prisma получать доступ к базе данных фильмов и телесериалов, предоставляя возможность поиска медиафайлов и просмотра информации о них.',
    termsofuse_t_06: 'Взаимодействие между приложением Prisma и themoviedb.org происходит через запросы к API, которые отправляются из приложения Prisma на серверы themoviedb.org для получения информации и медиафайлов. Themoviedb.org обрабатывает запросы и отправляет обратно в приложение Prisma запрошенные данные.',
    termsofuse_t_07: 'Таким образом, благодаря использованию API от themoviedb.org, приложение Prisma предоставляет пользователям доступ к обширной базе данных фильмов и телесериалов, соблюдая при этом условия использования и ограничения, установленные правообладателем.',
    termsofuse_t_08: 'Расширения',
    termsofuse_t_09: 'Расширения - это мощный инструмент, предоставляемый для приложения Prisma, который позволяет пользователям расширить его возможности, добавить дополнительный функционал и изменить контент в соответствии с их потребностями.',
    termsofuse_t_10: 'Однако, следует отметить, что пользователи устанавливают расширения на свой страх и риск. Все последствия, возникающие в результате использования расширений, ложатся на пользователя. Пользователям рекомендуется быть осторожными при установке и использовании расширений, тщательно оценивая их надежность и безопасность.',
    termsofuse_t_11: 'Нарушения авторских прав',
    termsofuse_t_12: 'Если вы обнаружили нарушение авторских прав в приложении Prisma - свяжитесь с разработчиками, используя раздел Контакты приложения. Однако, важно учесть, что приложение Prisma использует API от каталога themoviedb.org, который предоставляет открытый доступ к информации о фильмах и сериалах. Это означает, что информация, которая отображается в приложении Prisma, является общедоступной и не нарушает авторских прав.',
    termsofuse_t_13: 'Если вы считаете, что в приложении Prisma все же есть контент, нарушающий авторские права - обратитесь к правообладателю этого контента с просьбой удалить его со страниц сайта themoviedb.org. В свою очередь, приложение Prisma может удалить контент при получении соответствующего уведомления о нарушении авторских прав.',
    install_app_apk_text: 'Мы заметили, что для запуска Prisma на Android вы используете MediaStationX. Мы рекомендуем вам установить Prisma в виде APK-приложения. Вы можете скачать последнюю версию приложения здесь:',
    ad: 'Реклама',
    ad_disable: 'С премиум-подпиской реклама останется в прошлом — только вы и ваш любимый контент. Подключить можно Telegram-боте @prismalk_bot уже сегодня!',
    ad_after: 'Реклама через',
    ad_skip: 'Пропустить',
    ad_continue_after: 'Просмотр начнется через',
    account_user_other_account: 'Другой аккаунт',
    account_user_add: 'Добавить',
    // Пользовательские закладки
    rename: 'Переименовать',
    menu_custom_bookmarks: 'Пользовательские закладки',
    custom_bookmark_category: 'Настраиваемая категория'
  }, _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_lang_choice_title$la, "filter_set_name", 'Укажите название'), "custom_bookmark_limit_reached", 'Достигнут лимит кастомных закладок'), "custom_bookmark_name_used", 'Закладка с таким именем уже существует'), "custom_bookmark_error", 'Ошибка при создании закладки'), "settings_interface_style", 'Стиль интерфейса'), "settings_interface_style_descr", 'Выберите стиль отображения карточек'), "settings_param_interface_style_standard", 'Стандартный'), "settings_param_interface_style_space", 'Для TV устройств'), "settings_interface_style_reload", 'Перезагрузить для применения нового стиля'), "quality_dvb", 'ТВ качество'), _defineProperty(_defineProperty(_defineProperty(_defineProperty(_defineProperty(_lang_choice_title$la, "quality_hdtvrip", 'HD ТВ рип'), "quality_hdrip", 'HD рип'), "quality_dvdrip", 'DVD'), "quality_ts", 'TS'), "quality_iptvrip", 'ТВ запись'));

  var en = {
    lang_choice_title: 'Welcome',
    lang_choice_subtitle: 'Choose your language',
    more: 'More',
    show_more: 'Show more',
    more_results: 'Show more results',
    loading: 'Loading',
    nofind_movie: 'The movie could not be found.',
    noname: 'Untitled',
    nochoice: 'Not chosen',
    cancel: 'Cancel',
    confirm: 'I confirm',
    sure: 'Are you sure?',
    nodata: 'No data',
    back: 'Back',
    back_to_start: 'To start',
    ready: 'Ready',
    close_app_modal: 'Are you sure you want to leave the app?',
    connected_seeds: 'connected',
    search: 'Search',
    search_input: 'Enter text',
    search_empty: 'Search history is empty.',
    search_delete: 'Left - delete',
    search_start_typing: 'Start typing search text.',
    search_searching: 'Search in progress...',
    search_start: 'To start searching',
    search_nofound: 'Nothing was found according to your request.',
    full_genre: 'Genre',
    full_production: 'Production',
    full_date_of_release: 'Date of release',
    full_budget: 'Budget',
    full_revenue: 'Box office',
    full_countries: 'Countries',
    full_like: 'Like',
    full_torrents: 'Torrents',
    full_trailers: 'Trailers',
    full_sound: 'Trailer sound',
    full_more: 'More',
    full_detail: 'In detail',
    full_notext: 'No description.',
    full_series_release: 'Series release',
    full_next_episode: 'Next',
    full_episode_days_left: 'Days left',
    full_trailer_official: 'Official',
    full_trailer_no_official: 'Informal',
    full_trailer_mute: 'Mute',
    full_trailer_unmute: 'Unmute',
    full_season: 'Season',
    full_episode: 'Episode',
    full_directing: 'Directing',
    full_writing: 'Writing',
    full_keywords: 'Tags',
    full_soon_available_quality: 'The novelty is still hot! <br>High—quality versions will arrive a little later - a little patience.',
    add_comment: 'Add',
    add_comments: 'Reviews',
    comments_cancel: 'Close',
    comments_send: 'Add',
    comments_error: 'Server error',
    comments_offensive_content: 'The review contains inappropriate expressions. Please correct it and try again',
    comments_religiosn_content: 'The review contains religious terms. Please correct it and try again',
    comments_politic_content: 'The review contains political terms. Please correct it and try again',
    comments_spoiler_content: 'The review contains spoilers. Please correct it and try again',
    comment_added_successfully: 'Your review has been published',
    comments_autor: 'Enter your name',
    autor_comments: 'Write your review',
    comments_empty: 'Be the first to share your impressions! ✨<br><br>Tell us about your feelings after watching.',
    review_type_title: 'Viewing emotion',
    review_type_neutral: 'Neutral',
    review_type_positive: 'Positive',
    review_type_negative: 'Negative',
    settings_cloud_sync: 'Synchronization',
    settings_cloud_sync_descr: 'Sync your bookmarks, history, and timecodes.',
    settings_cloud__text: 'This authorization will be disabled on 12/31/2024',
    settings_cloud__title: 'Authorization',
    settings_cloud__atoken: 'Specify your token for authorization',
    settings_cloud__token: 'Your token',
    settings_cloud__status: 'Status',
    settings_cloud_nosync: 'Not authorized',
    settings_cloud_nosync_desk: 'You need to log in',
    settings_cloud_sync_off: 'Disabled',
    settings_cloud_sync_on: 'Enable synchronization',
    settings_cloud_sync_error: 'Authorization failed',
    settings_cloud_sync_errdesk: 'Check the entered data and try again',
    settings_cloud_sync_ok: 'Check the entered data and try again',
    settings_cloud_sync_status: 'They entered',
    settings_cloud_status_ok: 'You have successfully logged in',
    settings_cloud_sync_yes: 'Synchronized',
    settings_prisma_usercam_descr: 'Customize the list of sources for yourself – connect your Filmix, Kinopub, Vokino, and HDRezka accounts or disable the extra ones.',
    settings_prisma_sync: 'Authorization',
    settings_prisma_sync_descr: 'Sync your bookmarks, browsing history, timestamps and timecodes.',
    settings_prisma_account: 'Account',
    settings_prisma_logged_in_as: 'Logged in as',
    settings_prisma_profile: 'Profile',
    settings_prisma_sync_btn: 'Synchronize',
    settings_prisma_sync_btn_descr: 'Save local bookmarks on the server',
    settings_prisma_backup: 'Backup',
    settings_prisma_backup_descr: 'Save or load backup data',
    settings_prisma_logout: 'Sign out',
    settings_prisma_signin: 'Authorization',
    settings_prisma_not_specified: 'Not specified',
    settings_prisma_password: 'Password',
    settings_prisma_status: 'Status',
    settings_prisma_backup_import: 'Import',
    settings_prisma_backup_export: 'Export',
    settings_prisma_sync_filters: 'Filters sync',
    settings_prisma_sync_calendar: 'Calendar sync',
    settings_prisma_sync_quality: 'Quality sync',
    settings_prisma_sync_search: 'Search history sync',
    settings_prisma_sync_recomends: 'Recommendations sync',
    settings_prisma_sync_timecodes: 'Timecode Synchronization',
    settings_input_links: 'Favorites',
    settings_interface_type: 'Lite version',
    settings_interface_size: 'Interface size',
    settings_interface_size_fixed: 'Fixed size',
    settings_interface_size_descr: 'Select the interface size',
    settings_interface_background: 'Background',
    settings_interface_background_use: 'Show background',
    settings_interface_background_type: 'Background type',
    settings_interface_performance: 'Performance',
    settings_interface_footer_card: 'The card is in the player',
    settings_interface_footer_card_descr: 'Displaying the card in the player',
    settings_interface_background_trailer: 'Trailer in the card',
    settings_interface_background_trailer_descr: 'Automatically play the trailer (disabled in the new interface)',
    settings_interface_poster_trailer: 'Trailer in the poster',
    settings_interface_poster_trailer_descr: 'Automatically play the trailer (disabled in the new interface)',
    settings_interface_animation: 'Animation',
    settings_interface_advanced_animation: 'Interactive animation',
    settings_interface_advanced_animation_descr: 'Animations actively respond to user actions',
    settings_interface_animation_descr: 'Animation of cards and content',
    settings_interface_attenuation: 'Attenuation',
    settings_interface_attenuation_descr: 'Smooth fading of cards from below and from above',
    settings_interface_scroll: 'Scroll Type',
    settings_interface_view_card: 'Card view type',
    settings_interface_view_card_descr: 'As you scroll the feed, the cards will load gradually or load all',
    settings_interface_lang: 'Interface language',
    settings_interface_lang_reload: 'You need to restart the application, click "OK" to restart.',
    settings_main_account: 'Account',
    settings_main_interface: 'Interface',
    settings_main_more: 'Other settings',
    settings_main_player: 'Player',
    settings_main_parser: 'Parser',
    settings_main_torrserver: 'TorrServer',
    settings_main_plugins: 'Extensions',
    settings_main_rest: 'Other',
    settings_rest_start: 'Start page',
    settings_rest_start_descr: 'Which page to start at startup',
    settings_rest_source: 'Source',
    settings_rest_source_use: 'Main source',
    settings_rest_source_descr: 'Where to get information about films',
    settings_rest_tmdb_lang: 'What language to display data from TMDB',
    settings_rest_tmdb_prox: 'Proxy TMDB',
    settings_rest_tmdb_prox_auto: 'Enable proxy automatically',
    settings_rest_tmdb_posters: 'Resolution of posters',
    settings_rest_screensaver: 'Screensaver',
    settings_rest_screensaver_use: 'Show splash screen when idle',
    settings_rest_screensaver_type: 'Screen saver type',
    settings_rest_helper: 'Hints',
    settings_rest_helper_use: 'Show hints',
    settings_rest_helper_reset: 'Show hints again',
    settings_rest_pages: 'How many pages to keep in memory',
    settings_rest_pages_descr: 'Keeps pages in the state you left them in',
    settings_rest_time: 'Shift time',
    settings_rest_navigation: 'Navigation type',
    settings_rest_keyboard: 'Keyboard type',
    settings_rest_device: 'Device name',
    settings_rest_device_placeholder: 'For example: Prisma',
    settings_rest_cache: 'Clear cache',
    settings_rest_cache_descr: 'All settings and data will be cleared',
    settings_rest_tmdb_example: 'For example:',
    settings_rest_tmdb_api_descr: 'To get data',
    settings_rest_tmdb_image_descr: 'To get images',
    settings_rest_card_quality: 'Quality marks',
    settings_rest_card_quality_descr: 'Display quality marks on cards',
    settings_rest_card_episodes: 'Episode marks',
    settings_rest_card_episodes_descr: 'Display episode markers on cards',
    settings_parser_use: 'Use parser',
    settings_parser_use_descr: 'Hereby, you agree to accept all responsibility for the use of public links to view torrent and online content.',
    settings_parser_type: 'Parser type for torrents',
    settings_parser_jackett_placeholder: 'For example: 192.168.x',
    settings_parser_jackett_link: 'Link',
    settings_parser_jackett_link_descr: 'Provide a link to the Jackett script',
    settings_parser_jackett_key_placeholder: 'For example: sa0sk83d..',
    settings_parser_jackett_key: 'Api key',
    settings_parser_jackett_key_descr: 'Located in Jackett',
    settings_parser_torlook_type: 'TorLook site parsing method',
    settings_parser_scraperapi_placeholder: 'For example: scraperapi.com',
    settings_parser_scraperapi_link: 'Link to site parser',
    settings_parser_scraperapi_descr: 'Register on the site scraperapi.com, enter the link api.scraperapi.com?api_key=...&url={q}<br>W41.torlook.info will be delivered to {q}',
    settings_parser_search: 'Search',
    settings_parser_search_descr: 'What language to search in?',
    settings_parser_in_search: 'Parser in search',
    settings_parser_in_search_descr: 'Show search results?',
    settings_parser_timeout_title: 'Parser timeout',
    settings_parser_timeout_descr: 'Time in seconds to wait for a response from the server',
    settings_player_type: 'Player type',
    settings_player_type_descr: 'Which player to play',
    settings_player_iptv_type: 'Player type for IPTV',
    settings_player_iptv_type_descr: 'Which player to play IPTV channels',
    settings_player_reset: 'Reset default player',
    settings_player_reset_descr: 'Resets the selected Android player in the application',
    settings_player_path: 'Path to the player',
    settings_player_path_descr: 'Specify the path to the player .exe',
    settings_player_normalization: 'Sound normalization',
    settings_player_normalization_descr: 'Normalizes sound to one level, lowers loud sounds and boosts quiet ones.',
    settings_player_next_episode: 'Next episode',
    settings_player_next_episode_descr: 'Automatically switch to the next series after the end of the current one',
    settings_player_timecode: 'Timecode',
    settings_player_timecode_descr: 'Continue from last viewed location',
    settings_player_scale: 'Scaling Method',
    settings_player_scale_descr: 'How to calculate video scaling',
    settings_player_subs: 'Subtitles',
    settings_player_subs_use: 'Turn on',
    settings_player_subs_use_descr: 'Always turn on subtitles after starting a video',
    settings_player_subs_size: 'The size',
    settings_player_subs_size_descr: 'Screen size of subtitles',
    settings_player_subs_stroke_use: 'Use edging',
    settings_player_subs_stroke_use_descr: 'Subtitles will be outlined in black for better readability',
    settings_player_subs_backdrop_use: 'Use an underlay',
    settings_player_subs_backdrop_use_descr: 'Subtitles will be displayed on a translucent backing to improve readability',
    settings_player_quality: 'Default video quality',
    settings_player_quality_descr: 'Preferred video quality for viewing',
    settings_player_hls_title: 'Processing the .m3u8 stream',
    settings_player_hls_descr: 'Do not touch this parameter if you do not know why it is.',
    settings_plugins_notice: 'To apply the plugin, you need to restart the application',
    settings_plugins_add: 'Add Plugin',
    settings_plugins_add_descr: 'To delete an added plugin, hold or double-click the (OK) key on it',
    settings_plugins_install: 'Install Plugin',
    settings_plugins_install_descr: 'Install a plugin from the list of available',
    settings_server_link: 'Use link',
    settings_server_links: 'Links',
    settings_server_placeholder: 'For example: 192.168.X',
    settings_server_link_one: 'Main Link',
    settings_server_link_one_descr: 'Specify the main link to the TorrServer script',
    settings_server_link_one_localip: 'Local IP:8090',
    settings_server_link_two: 'Additional link',
    settings_server_link_two_descr: 'Provide an additional link to the TorrServer script',
    settings_server_additionally: 'Additionally',
    settings_server_client: 'Embedded client',
    settings_server_client_descr: 'Use the built-in TorrServer JS client, otherwise the system one starts.',
    settings_server_base: 'Save to database',
    settings_server_base_descr: 'The torrent will be added to the TorrServer database',
    settings_server_preload: 'Use prefetch buffer',
    settings_server_preload_descr: 'Wait for TorrServer\'s preload buffer to fill before playing',
    settings_server_auth: 'Authorization',
    settings_server_password_use: 'Password login',
    settings_server_login: 'Login',
    settings_server_password: 'Password',
    settings_server_not_specified: 'Not specified',
    torent_nohash_reasons: 'The reasons',
    torent_nohash_reason_one: 'TorServer was unable to download the torrent file',
    torent_nohash_reason_two: 'Reply from TorServer',
    torent_nohash_reason_three: 'Link',
    torent_nohash_do: 'What to do?',
    torent_nohash_do_one: 'Check if you configured Jackett correctly',
    torent_nohash_do_two: 'Private sources may not provide a link to the file',
    torent_nohash_do_three: 'Make sure Jackett can download the file too',
    torent_nohash_do_four: 'Write to our telegram group: @prisma_party',
    torent_nohash_do_five: 'Specify which movie, which distribution and, if possible, a photo of this distribution',
    torrent_error_text: 'Failed to connect to TorrServer. Let\'s quickly go through the list of possible problems and check everything.',
    torrent_error_step_1: 'Is TorrServer running',
    torrent_error_step_2: 'Dynamic IP',
    torrent_error_step_3: 'Protocol and Port',
    torrent_error_step_4: 'Antivirus blocking',
    torrent_error_step_5: 'Check for availability',
    torrent_error_step_6: 'Still doesn\'t work',
    torrent_error_info_1: 'Make sure you have launched TorrServer on the device where it is installed.',
    torrent_error_info_2: 'A common mistake, the IP address of the device with TorrServer has changed. Make sure that the IP address you entered - {ip} - matches the address of the device on which TorrServer is installed.',
    torrent_error_info_3: 'To connect to TorrServer, you must specify the protocol http:// at the beginning and port :8090 at the end of the address. Make sure there is a port after the IP address, your current address is {ip}',
    torrent_error_info_4: 'Frequent occurrence, antivirus or firewall can block access by IP address, try disabling antivirus and firewall.',
    torrent_error_info_5: 'On any other device on the same network, open the {ip} address in a browser and check if the TorrServer web interface is available.',
    torrent_error_info_6: 'If, after all the checks, a connection error still occurs, try restarting TorrServer and the Internet adapter.',
    torrent_error_info_7: 'If the problem persists, write to the Telegram group @prisma_party with the text (Prisma does not connect to TorrServer after all checks, the current address is {ip})',
    torrent_error_start: 'Start verification',
    torrent_error_nomatrix: 'Failed to verify Matrix version',
    torrent_error_made: 'Performed',
    torrent_error_from: 'from',
    torrent_error_next: 'Further',
    torrent_error_complite: 'To complete',
    torrent_error_connect: 'Connection error',
    torrent_install_need: 'Requires TorrServer',
    torrent_install_text: 'TorrServer is an application that allows you to view content from torrent files online.<br><br>The connection to the torrent is local, if your provider blocks torrents, be careful.<br><br>Keep in mind that in some countries, viewing TorrServer may be considered copyright infringement and lead to fines or other legal consequences. Be attentive to the laws of your country.',
    torrent_install_contact: 'Telegram groups',
    torrent_item_bitrate: 'Bitrate',
    torrent_item_seeds: 'Seeds',
    torrent_item_grabs: 'Leechers',
    torrent_item_mb: 'Mbps',
    torrent_serial_episode: 'Series',
    torrent_serial_season: 'Season',
    torrent_serial_date: 'Exit',
    torrent_get_magnet: 'Requesting a magnet link',
    torrent_remove_title: 'Delete',
    torrent_remove_descr: 'The torrent will be removed from your list',
    torrent_parser_any_one: 'Any',
    torrent_parser_any_two: 'Any',
    torrent_parser_no_choice: 'Not chosen',
    torrent_parser_yes: 'Yes',
    torrent_parser_no: 'No',
    torrent_parser_quality: 'Quality',
    torrent_parser_subs: 'Subtitles',
    torrent_parser_voice: 'Translation',
    torrent_parser_tracker: 'tracker',
    torrent_parser_year: 'Year',
    torrent_parser_season: 'Season',
    torrent_parser_sort_by_seeders: 'By distributors',
    torrent_parser_sort_by_size: 'To size',
    torrent_parser_sort_by_name: 'by name',
    torrent_parser_sort_by_tracker: 'By source',
    torrent_parser_sort_by_date: 'By date',
    torrent_parser_sort_by_viewed: 'Viewed',
    torrent_parser_voice_dubbing: 'Dubbing',
    torrent_parser_voice_polyphonic: 'Polyphonic',
    torrent_parser_voice_two: 'Two-voiced',
    torrent_parser_voice_amateur: 'Amateur',
    torrent_parser_reset: 'Reset filter',
    torrent_parser_empty: 'Failed to get results',
    torrent_parser_no_hash: 'Failed to get HASH',
    torrent_parser_added_to_mytorrents: 'added to "My torrents"',
    torrent_parser_add_to_mytorrents: 'Add to "My torrents"',
    torrent_parser_label_title: 'Flag',
    torrent_parser_label_descr: 'Flag a hand with a flag (viewed)',
    torrent_parser_label_cancel_title: 'Uncheck',
    torrent_parser_label_cancel_descr: 'Remove the mark from the distribution (viewed)',
    torrent_parser_timeout: 'Timeout expired',
    torrent_parser_nofiles: 'Failed to extract suitable files',
    torrent_parser_set_link: 'Specify a link for parsing',
    torrent_parser_request_error: 'Request error',
    torrent_parser_magnet_error: 'Failed to get magnet link',
    torrent_parser_no_responce: 'The parser is not available',
    torrent_parser_settings_info: ' <br>Try changing it to another one in the settings or specify your address.',
    torrent_parser_torlook_fallback_search_notification: 'Jackett parser is not available or the connection settings are incorrect. Searching Torlook...',
    about_text: '1. The application for watching movies and TV series uses information exclusively for educational purposes. All movie and TV series data is taken from open source APIs such as TMDB (The Movie Database), which provides access to movie cards, actors, trailers and other related information. The application does not store any information on its servers, but only displays data received from third-party API, providing convenient access to them for users.',
    about_android: '2. You can download the Android app in our Telegram group',
    about_mobile: '3. The PWA application for mobile devices and tablets running iOS and Android can be added to the home screen through your browser settings, which will allow you to quickly access the application directly from the home screen, as if it were a regular native application.',
    about_abuse: '4. If you have any questions about DCMA, please contact us by email abuse@prisma.cam',
    about_channel: 'Telegram',
    about_group: 'Group',
    about_version: 'Version',
    about_donate: 'Donation',
    title_watched: 'You watched',
    title_settings: 'Settings',
    title_collections: 'Collections',
    title_company: 'Company',
    title_actors: 'Actors',
    title_actor: 'Actor',
    title_actress: 'Actress',
    title_person: 'A person',
    title_persons: 'Persons',
    title_comments: 'Reviews',
    title_torrents: 'Torrents',
    title_trailers: 'Trailers',
    title_watch: 'Watch',
    title_error: 'Error',
    title_links: 'Links',
    title_choice: 'Choose',
    title_main: 'Home',
    title_book: 'Bookmarks',
    title_like: 'Like',
    title_wath: 'Later',
    title_history: 'Browsing history',
    title_mytorrents: 'My torrents',
    title_last: 'Last',
    title_action: 'Action',
    title_producer: 'Producer',
    title_collection: 'Collection',
    title_recomendations: 'Recommendations',
    title_similar: 'Similar',
    title_about: 'About the application',
    title_timetable: 'Schedule',
    title_relises: 'Digital releases',
    title_catalog: 'Catalog',
    title_category: 'Category',
    title_parser: 'Parser',
    title_type: 'Type of',
    title_rating: 'Rating',
    title_country: 'Country',
    title_year: 'Year',
    title_genre: 'Genre',
    title_filter: 'Filter',
    title_notice: 'Notifications',
    title_files: 'Files',
    title_now_watch: 'Watching now',
    title_high_rating: 'High Rating',
    title_new_releases: 'New Releases',
    title_many_votes: 'Many Votes',
    title_audience_interest: 'Audience Interest',
    title_on: 'on',
    title_best_movies: 'Best movies',
    title_best_shows: 'Best shows',
    title_latest: 'Last addition',
    title_continue: 'Continue browsing',
    title_recomend_watch: 'We recommend to see',
    title_new_episodes: 'New episodes',
    title_popular: 'Popular',
    title_popular_movie: 'Popular films',
    title_popular_tv: 'Popular TV shows',
    title_popular_movie_week: 'The best movies of the week according to user ratings',
    title_popular_tv_week: 'The best TV series of the week according to user ratings',
    title_new_this_year: 'New this year',
    title_hight_voite: 'Highly rated',
    title_new: 'New',
    title_this_year: 'This years new',
    title_trend_netflix: 'Netflix',
    title_trend_kinopoisk: 'Kinopoisk',
    title_trend_hbo: 'HBO',
    title_russian_movies: 'Russian movies',
    title_russian_tv_shows: 'Russian TV',
    title_trend_day: 'Today in trend',
    title_trend_week: 'Trending for the week',
    title_upcoming: 'Watch in cinemas',
    title_top_movie: 'Top movies',
    title_top_tv: 'Top series',
    title_tv_today: 'On air today',
    title_this_week: 'This week',
    title_in_top: 'Top',
    title_out: 'Exit',
    title_out_confirm: 'Yes, get out',
    title_continue_two: 'Proceed',
    title_choice_language: 'Choose a language',
    title_subscribe: 'Subscribe',
    title_subscribes: 'Subscriptions',
    title_unsubscribe: 'Unsubscribe',
    title_language: 'Original language',
    subscribe_success: 'You have successfully subscribed',
    subscribe_error: 'An error occurred while subscribing, please try again later',
    subscribe_noinfo: 'Failed to retrieve information, please try again later',
    company_headquarters: 'Headquarters',
    company_homepage: 'Website',
    company_country: 'Country',
    country_ad: 'Andorra',
    country_ae: 'UAE',
    country_af: 'Afghanistan',
    country_al: 'Albania',
    country_am: 'Armenia',
    country_ao: 'Angola',
    country_ar: 'Argentina',
    country_at: 'Austria',
    country_au: 'Australia',
    country_aw: 'Aruba',
    country_az: 'Azerbaijan',
    country_bа: 'Bosnia & Herzegovina',
    country_bd: 'Bangladesh',
    country_be: 'Belgium',
    country_bg: 'Bulgaria',
    country_bh: 'Bahrain',
    country_bi: 'Burundi',
    country_bj: 'Benin',
    country_bo: 'Bolivia',
    country_br: 'Brazil',
    country_bs: 'Bahamas',
    country_bt: 'Bhutan',
    country_bw: 'Botswana',
    country_by: 'Belarus',
    country_ca: 'Canada',
    country_ch: 'Switzerland',
    country_cl: 'Chile',
    country_cm: 'Cameroon',
    country_cn: 'China',
    country_co: 'Colombia',
    country_cr: 'Costa Rica',
    country_cu: 'Cuba',
    country_cv: 'Cape Verde',
    country_cy: 'Cyprus',
    country_cz: 'Czech Republic',
    country_de: 'Germany',
    country_dj: 'Djibouti',
    country_dk: 'Denmark',
    country_do: 'Dominican Republic',
    country_dz: 'Algeria',
    country_ec: 'Ecuador',
    country_ee: 'Estonia',
    country_eg: 'Egypt',
    country_es: 'Spain',
    country_et: 'Ethiopia',
    country_fi: 'Finland',
    country_fo: 'Faroe Islands',
    country_fr: 'France',
    country_ga: 'Gabon',
    country_gb: 'United Kingdom',
    country_ge: 'Georgia',
    country_gh: 'Ghana',
    country_gl: 'Greenland',
    country_gp: 'Guadeloupe',
    country_gr: 'Greece',
    country_gt: 'Guatemala',
    country_hk: 'Hong Kong',
    country_hr: 'Croatia',
    country_ht: 'Haiti',
    country_hu: 'Hungary',
    country_id: 'Indonesia',
    country_ie: 'Ireland',
    country_il: 'Israel',
    country_in: 'India',
    country_iq: 'Iraq',
    country_ir: 'Iran',
    country_is: 'Iceland',
    country_it: 'Italy',
    country_jm: 'Jamaica',
    country_jo: 'Jordan',
    country_jp: 'Japan',
    country_ke: 'Kenya',
    country_kg: 'Kyrgyzstan',
    country_kh: 'Cambodia',
    country_kp: 'North Korea',
    country_kr: 'South Korea',
    country_kz: 'Kazakhstan',
    country_kw: 'Kuwait',
    country_la: 'Laos',
    country_lb: 'Lebanon',
    country_li: 'Liechtenstein',
    country_lk: 'Sri Lanka',
    country_lr: 'Liberia',
    country_lt: 'Lithuania',
    country_lu: 'Luxembourg',
    country_lv: 'Latvia',
    country_ly: 'Libya',
    country_ma: 'Morocco',
    country_mc: 'Monaco',
    country_md: 'Moldova',
    country_me: 'Montenegro',
    country_mk: 'Macedonia',
    country_mm: 'Myanmar',
    country_mn: 'Mongolia',
    country_mo: 'Macau',
    country_mt: 'Malta',
    country_mu: 'Mauritius',
    country_mv: 'Maldives',
    country_mw: 'Malawi',
    country_mx: 'Mexico',
    country_my: 'Malaysia',
    country_mz: 'Mozambique',
    country_na: 'Namibia',
    country_ne: 'Niger',
    country_ng: 'Nigeria',
    country_ni: 'Nicaragua',
    country_nl: 'Netherlands',
    country_no: 'Norway',
    country_np: 'Nepal',
    country_nz: 'New Zealand',
    country_om: 'Oman',
    country_pa: 'Panama',
    country_pe: 'Peru',
    country_pg: 'Papua New Guinea',
    country_ph: 'Philippines',
    country_pk: 'Pakistan',
    country_pl: 'Poland',
    country_pr: 'Puerto Rico',
    country_ps: 'Palestinian Territory',
    country_pt: 'Portugal',
    country_py: 'Paraguay',
    country_qa: 'Qatar',
    country_ro: 'Romania',
    country_rs: 'Serbia',
    country_ru: 'Russia',
    country_rw: 'Rwanda',
    country_sa: 'Saudi Arabia',
    country_sd: 'Sudan',
    country_se: 'Sweden',
    country_sg: 'Singapore',
    country_si: 'Slovenia',
    country_sk: 'Slovakia',
    country_sn: 'Senegal',
    country_su: 'USSR',
    country_sv: 'El Salvador',
    country_sy: 'Syria',
    country_th: 'Thailand',
    country_tj: 'Tajikistan',
    country_tm: 'Turkmenistan',
    country_tn: 'Tunisia',
    country_tr: 'Turkey',
    country_tw: 'Taiwan',
    country_tz: 'Tanzania',
    country_ua: 'Ukraine',
    country_ug: 'Uganda',
    country_us: 'USA',
    country_uy: 'Uruguay',
    country_uz: 'Uzbekistan',
    country_ve: 'Venezuela',
    country_vn: 'Viet Nam',
    country_xk: 'Kosovo',
    country_ws: 'Samoa',
    country_ye: 'Yemen',
    country_yu: 'Yugoslavia',
    country_za: 'South Africa',
    country_zm: 'Zambia',
    country_zw: 'Zimbabwe',
    filter_clarify: 'Clarify',
    filter_clarify_two: 'Refine Search',
    filter_set_name: 'Specify title',
    filter_sorted: 'Sort',
    filter_filtred: 'Filter',
    filter_any: 'Any',
    filter_combinations: 'Combinations',
    filter_alt_names: 'Other names',
    filter_rating_from: 'from',
    filter_rating_to: 'to',
    filter_lang_af: 'Afrikaans',
    filter_lang_ar: 'Arabic',
    filter_lang_az: 'Azerbaijani',
    filter_lang_ba: 'Bashkir',
    filter_lang_be: 'Belarusian',
    filter_lang_bg: 'Bulgarian',
    filter_lang_bn: 'Bengali',
    filter_lang_bs: 'Bosnian',
    filter_lang_ca: 'Catalan',
    filter_lang_ce: 'Chechen',
    filter_lang_cs: 'Czech',
    filter_lang_da: 'Danish',
    filter_lang_de: 'German',
    filter_lang_el: 'Greek',
    filter_lang_en: 'English',
    filter_lang_es: 'Spanish',
    filter_lang_et: 'Estonian',
    filter_lang_fa: 'Persian',
    filter_lang_fi: 'Finnish',
    filter_lang_fr: 'French',
    filter_lang_ga: 'Irish',
    filter_lang_gl: 'Galician',
    filter_lang_gn: 'Guarani',
    filter_lang_he: 'Hebrew',
    filter_lang_hi: 'Hindi',
    filter_lang_hr: 'Croatian',
    filter_lang_hu: 'Hungarian',
    filter_lang_hy: 'Armenian',
    filter_lang_id: 'Indonesian',
    filter_lang_is: 'Icelandic',
    filter_lang_it: 'Italian',
    filter_lang_ja: 'Japanese',
    filter_lang_ka: 'Georgian',
    filter_lang_kk: 'Kazakh',
    filter_lang_ko: 'Korean',
    filter_lang_ks: 'Kashmiri',
    filter_lang_ku: 'Kurdish',
    filter_lang_ky: 'Kirghiz',
    filter_lang_lt: 'Lithuanian',
    filter_lang_lv: 'Latvian',
    filter_lang_mi: 'Maori',
    filter_lang_mk: 'Macedonian',
    filter_lang_mn: 'Mongolian',
    filter_lang_mo: 'Moldavian',
    filter_lang_mt: 'Maltese',
    filter_lang_ne: 'Nepali',
    filter_lang_nl: 'Dutch (Nederlands)',
    filter_lang_no: 'Norwegian',
    filter_lang_pa: 'Punjabi',
    filter_lang_pl: 'Polish',
    filter_lang_ps: 'Pushto',
    filter_lang_pt: 'Portuguese',
    filter_lang_ro: 'Romanian',
    filter_lang_ru: 'Russian',
    filter_lang_si: 'Sinhalese',
    filter_lang_sk: 'Slovak',
    filter_lang_sl: 'Slovenian',
    filter_lang_sm: 'Samoan',
    filter_lang_so: 'Somali',
    filter_lang_sq: 'Albanian',
    filter_lang_sr: 'Serbian',
    filter_lang_sv: 'Swedish',
    filter_lang_sw: 'Swahili',
    filter_lang_ta: 'Tamil',
    filter_lang_tg: 'Tajik',
    filter_lang_th: 'Thai',
    filter_lang_tk: 'Turkmen',
    filter_lang_tr: 'Turkish',
    filter_lang_tt: 'Tatar',
    filter_lang_ur: 'Urdu',
    filter_lang_uk: 'Ukrainian',
    filter_lang_uz: 'Uzbek',
    filter_lang_vi: 'Vietnamese',
    filter_lang_yi: 'Yiddish',
    filter_lang_zh: 'Chinese',
    filter_genre_ac: 'Action',
    filter_genre_ad: 'Adventures',
    filter_genre_mv: 'Cartoon',
    filter_genre_cm: 'Comedy',
    filter_genre_cr: 'Crime',
    filter_genre_dc: 'Documentary',
    filter_genre_dr: 'Drama',
    filter_genre_fm: 'Family',
    filter_genre_fe: 'Fantasy',
    filter_genre_hi: 'Story',
    filter_genre_ho: 'Horror',
    filter_genre_mu: 'Music',
    filter_genre_de: 'Detective',
    filter_genre_md: 'Melodrama',
    filter_genre_fa: 'Fiction',
    filter_genre_tv: 'TV film',
    filter_genre_tr: 'Thriller',
    filter_genre_mi: 'Military',
    filter_genre_ve: 'Western',
    filter_genre_aa: 'Action & Adventure',
    filter_genre_ch: 'Children\'s',
    filter_genre_nw: 'News',
    filter_genre_rs: 'Reality show',
    filter_genre_hf: 'Sci-Fi and Fantasy',
    filter_genre_op: 'Soap opera',
    filter_genre_tc: 'Talk show',
    filter_genre_mp: 'War and Politics',
    empty_title: 'Empty',
    empty_text: 'Nothing found for your filter, please refine your filter.',
    empty_title_two: 'It\'s empty here',
    empty_text_two: 'The list is currently empty.',
    menu_main: 'Home',
    menu_movies: 'Movies',
    menu_tv: 'Series',
    menu_catalog: 'Catalog',
    menu_filter: 'Filter',
    menu_collections: 'Collections',
    menu_relises: 'Releases',
    menu_anime: 'Anime',
    menu_bookmark: 'Bookmarks',
    menu_like: 'Like',
    menu_time: 'Later',
    menu_history: 'History',
    menu_timeline: 'Schedule',
    menu_torrents: 'Torrents',
    menu_settings: 'Settings',
    menu_about: 'Information',
    menu_console: 'Console',
    menu_multmovie: 'Cartoons',
    menu_multtv: 'Animated series',
    plugins_catalog_work: 'Working plugins',
    plugins_catalog_work_descr: 'Plugins that work exactly in the lamp.',
    plugins_catalog_popular: 'Popular plugins among users',
    plugins_catalog_popular_descr: 'Installation from unknown sources may cause the application to work incorrectly.',
    plugins_online: 'View online',
    plugins_check_fail: 'Failed to test the functionality of the plugin. However, this does not mean that the plugin does not work. Reload the application to see if the plugin is loading.',
    plugins_need_reload: 'To apply the plugin, you need to restart the application',
    plugins_install: 'Install',
    plugins_install_ready: 'This plugin is already installed.',
    plugins_installed: 'Installations',
    plugins_load_from: 'Loaded from source',
    plugins_ok_for_check: 'Click (OK) to test the plugin',
    plugins_no_loaded: 'When loading the application, some plugins could not be loaded',
    time_viewed: 'Viewed',
    time_from: 'from',
    time_reset: 'Reset timecode',
    settings_clear_cache: 'Cache and data cleared',
    settings_user_links: 'Custom Link',
    settings_for_local: 'For local TorrServer',
    settings_add: 'Add',
    settings_remove: 'Delete',
    settings_manager: 'Storage Manager',
    settings_this_value: 'present value',
    settings_added: 'Added',
    settings_removed: 'Removed',
    settings_param_player_inner: 'Prisma',
    settings_param_player_outside: 'External',
    settings_param_player_inner_tvos: 'Internal',
    settings_param_yes: 'Yes',
    settings_param_no: 'No',
    settings_param_interface_size_small: 'Smaller',
    settings_param_interface_size_normal: 'Normal',
    settings_param_interface_size_bigger: 'More',
    settings_param_interface_size_fixed: 'Fixed',
    settings_param_poster_quality_low: 'Low',
    settings_param_poster_quality_average: 'Average',
    settings_param_poster_quality_high: 'High',
    settings_param_parse_directly: 'Directly',
    settings_param_parse_api: 'Through the website API',
    settings_param_background_complex: 'Complex',
    settings_param_background_simple: 'Simple',
    settings_param_background_image: 'Picture',
    settings_param_link_use_one: 'Main',
    settings_param_link_use_two: 'Additional',
    settings_param_subtitles_size_small: 'small',
    settings_param_subtitles_size_normal: 'Ordinary',
    settings_param_subtitles_size_bigger: 'Large',
    settings_param_screensaver_nature: 'Nature',
    settings_param_torrent_lang_orig: 'Original',
    settings_param_torrent_lang_ru: 'Russian',
    settings_param_player_timecode_again: 'Start over',
    settings_param_player_timecode_continue: 'Proceed',
    settings_param_player_timecode_ask: 'To ask',
    settings_param_player_scale_method: 'Calculate',
    settings_param_player_hls_app: 'Systemic',
    settings_param_player_hls_js: 'Program',
    settings_param_card_view_load: 'Upload',
    settings_param_card_view_all: 'Show all',
    settings_param_navigation_remote: 'Remote controller',
    settings_param_navigation_mouse: 'Remote control with mouse',
    settings_param_keyboard_prisma: 'Prisma',
    settings_param_keyboard_system: 'Systemic',
    helper_keyboard: 'After entering the value, press the "Back" button to save',
    helper_torrents: 'Hold down the (OK) key to bring up the context menu',
    helper_cleared: 'Success, tooltips will be shown again.',
    helper_torrents_view: 'Hold down the (OK) key to reset the timecode and display the menu',
    fav_sync_title: 'Bookmark sync',
    fav_sync_text: 'Your favorite bookmarks with you. Connect synchronization and view on any device. <br><br>To do this, register on the TG, create a profile and log in to the application.',
    fav_sync_site: 'Website',
    fav_remove_title: 'Remove from history',
    fav_remove_descr: 'Delete selected card',
    fav_clear_title: 'Clear the history',
    fav_clear_descr: 'Delete all cards from history',
    fav_clear_label_title: 'Clear labels',
    fav_clear_label_descr: 'Clear View Tags',
    fav_clear_time_title: 'Clear Timecodes',
    fav_clear_time_descr: 'Clear all timecodes',
    fav_label_cleared: 'Marks cleared',
    fav_time_cleared: 'Timecodes cleared',
    timetable_empty: 'This section will display the release dates of new episodes.',
    player_quality: 'Quality',
    player_flow: 'Flow',
    player_tracks: 'Audio tracks',
    player_disabled: 'Disabled',
    player_unknown: 'Unknown',
    player_subs: 'Subtitles',
    player_size_default_title: 'Default',
    player_size_default_descr: 'Default video size',
    player_size_cover_title: 'Expand',
    player_size_cover_descr: 'Expands video to full screen',
    player_size_fill_title: 'Fill',
    player_size_fill_descr: 'Fit video to full screen',
    player_size_s115_title: 'Zoom 115%',
    player_size_s115_descr: 'Enlarge video by 115%',
    player_size_s130_title: 'Zoom 130%',
    player_size_s130_descr: 'Enlarge video by 130%',
    player_size_v115_title: 'Vertical 115%',
    player_size_v115_descr: 'Enlarge video by 115%',
    player_size_v130_title: 'Vertical 130%',
    player_size_v130_descr: 'Enlarge video by 130%',
    player_video_size: 'Video size',
    player_playlist: 'Playlist',
    player_error_one: 'Failed to decode video',
    player_error_two: 'Video not found or corrupted',
    player_start_from: 'Continue browsing from',
    player_not_found: 'Player not found',
    player_lauch: 'Launch player',
    player_speed_default_title: 'Plain',
    player_speed_two_descr: 'Play without sound',
    player_video_speed: 'Playback speed',
    player_share_title: 'Share',
    player_share_descr: 'Play this video on another device',
    player_normalization_power_title: 'Normalization power',
    player_normalization_smooth_title: 'Normalization speed',
    player_normalization_step_none: 'Zero',
    player_normalization_step_low: 'Low',
    player_normalization_step_medium: 'Average',
    player_normalization_step_hight: 'High',
    player_normalization_type_title: 'Normalization Type',
    player_normalization_type_all: 'All',
    player_normalization_type_up: 'Only Increase',
    player_normalization_type_down: 'Only Decrease',
    title_ai_assistant: 'Assistant OpenAI',
    title_facts: 'Interesting Facts',
    ai_search_start_typing: 'Ask the OpenAI Assistant what movies you want to find. For example: "Movies about space"',
    ai_search_limit: 'Request limit exceeded. Please try again later. With a Premium subscription, limits will be increased, and you won’t have to wait!',
    ai_subscribe_title: 'Unlock More Opportunities with OpenAI',
    ai_subscribe_descr: 'Sign up for a Premium subscription and increase the number of requests. OpenAI will select the best films that it can for you.',
    dmca_title: 'Content blocked',
    dmca_descr: 'This material is not available for viewing. It has been blocked at the request of the copyright holder in accordance with copyright law.',
    player_youtube_no_played: 'Sorry, this video is not available in your region and may have been blocked or removed.',
    player_youtube_start_play: 'To start playing the video, click the "Play" button.',
    discuss_voited: "Thank you for your feedback!",
    confirm_open_player: 'Another device is requesting access to the player. Do you want to play the video?',
    broadcast_open: 'Open card on another device',
    broadcast_play: 'Choose the device to watch on',
    card_new_episode: 'New series',
    card_book_remove: 'Remove from bookmarks',
    card_book_add: 'To bookmarks',
    card_book_descr: 'Look in the menu (Bookmarks)',
    card_like_remove: 'Remove from favorites',
    card_like_add: 'Like',
    card_like_descr: 'Look at the menu (Like)',
    card_wath_remove: 'Remove from expected',
    card_wath_add: 'Watch Later',
    card_wath_descr: 'See the menu (Later)',
    card_history_remove: 'Remove from history',
    card_history_add: 'Into history',
    card_history_descr: 'Look in the menu (History)',
    keyboard_listen: 'Speak, I\'m listening...',
    keyboard_nomic: 'No microphone access',
    notice_new_quality: 'New quality available',
    notice_quality: 'Quality',
    notice_new_episode: 'New series',
    notice_none: 'You don\'t have any notifications yet, register TG at <b>@prismalk_bot</b> to follow new episodes and releases.',
    notice_in_quality: 'As',
    notice_none_account: 'You don\'t have any notifications yet, bookmark the series and wait for notifications of new episodes.',
    notice_none_system: 'You currently have no notifications. We will be sure to notify you when new notifications become available.',
    copy_link: 'Copy video link',
    copy_secuses: 'Link copied to clipboard',
    copy_error: 'Error copying link',
    account_sync_to_profile: 'All bookmarks will be moved to the profile',
    account_sync_secuses: 'All bookmarks have been successfully transferred',
    account_profiles: 'Profiles',
    account_profiles_empty: 'Failed to get list of profiles',
    account_authorized: 'Authorized',
    account_logged_in: 'You are logged in',
    account_login_failed: 'Login failed',
    account_login_wait: 'Waiting for login',
    account_profile_main: 'General',
    account_export_secuses: 'Export completed successfully',
    account_export_fail: 'Export error',
    account_import_secuses: 'Import completed successfully',
    account_import_fail: 'Import error',
    account_imported: 'imported',
    account_reload_after: 'Restart the application after 5 seconds.',
    account_create: 'Sign in to access advanced features',
    account_premium: 'Discover more features with a Premium account. Increasing limits and access to additional features of the service.',
    account_premium_more: 'Learn more about Premium',
    account_limited: 'Your limit has been reached. Upgrade to Premium for more features. Setup via Telegram <span class= "account-model__site">@prismalk_bot</span>',
    account_code_enter: 'Enter the received code',
    account_code_error: 'Perhaps you entered an incorrect or outdated code',
    account_code_wrong: 'Perhaps you entered an incorrect format',
    account_code_where: 'Go to Telegram bot <span class="account-add-device__site">@prismalk_bot</span> and enter the received code.',
    account_code_input: 'Enter code',
    settings_prisma_signin_button: 'Sign in',
    network_noconnect: 'No network connection',
    network_404: 'The requested page was not found. [404]',
    network_401: 'Authorization failed',
    network_500: 'Internal Server Error. [500]',
    network_parsererror: 'The requested JSON parsing failed.',
    network_timeout: 'Request timed out.',
    network_abort: 'The request has been aborted.',
    network_error: 'Unknown error',
    size_zero: '0 Byte',
    size_byte: 'Byte',
    size_kb: 'KB',
    size_mb: 'MB',
    size_gb: 'GB',
    size_tb: 'TB',
    size_pp: 'PB',
    speed_bit: 'bps',
    speed_kb: 'Kbps',
    speed_mb: 'Mbps',
    speed_gb: 'Gbps',
    speed_tb: 'Tbps',
    speed_pp: 'Pbps',
    month_1: 'January',
    month_2: 'February',
    month_3: 'March',
    month_4: 'April',
    month_5: 'May',
    month_6: 'June',
    month_7: 'July',
    month_8: 'August',
    month_9: 'September',
    month_10: 'October',
    month_11: 'November',
    month_12: 'December',
    day_1: 'Monday',
    day_2: 'Tuesday',
    day_3: 'Wednesday',
    day_4: 'Thursday',
    day_5: 'Friday',
    day_6: 'Saturday',
    day_7: 'Sunday',
    month_1_e: 'January',
    month_2_e: 'February',
    month_3_e: 'March',
    month_4_e: 'April',
    month_5_e: 'May',
    month_6_e: 'June',
    month_7_e: 'July',
    month_8_e: 'August',
    month_9_e: 'September',
    month_10_e: 'October',
    month_11_e: 'November',
    month_12_e: 'December',
    week_1: 'Mon',
    week_2: 'Tue',
    week_3: 'Wed',
    week_4: 'Thu',
    week_5: 'Fri',
    week_6: 'Sat',
    week_7: 'Sun',
    extensions_enable: 'Turn on',
    extensions_disable: 'Disable',
    extensions_check: 'Check status',
    extensions_install: 'Install',
    extensions_info: 'Information',
    extensions_edit: 'Edit',
    extensions_change_name: 'Change name',
    extensions_change_link: 'Change link',
    extensions_remove: 'Delete',
    extensions_set_name: 'Enter plugin name',
    extensions_set_url: 'Enter plugin url',
    extensions_ready: 'This plugin is already installed',
    extensions_no_info: 'Without information',
    extensions_no_name: 'Untitled',
    extensions_worked: 'Worker',
    extensions_no_plugin: 'Plugin not verified',
    extensions_add: 'Add Plugin',
    extensions_from_memory: 'Installed in memory',
    extensions_from_cub: 'Installed from CUB',
    extensions_from_popular: 'Popular plugins',
    extensions_from_lib: 'Plugin Library',
    extensions_from_connected: 'Connected plugins',
    settings_webos_launcher: 'Application launch',
    settings_webos_launcher_add_device: 'Install as starter app',
    settings_webos_launcher_remove_device: 'Remove from starter spplications',
    player_normalization: 'Normalization',
    change_source_on_cub: 'Change source',
    settings_param_jackett_interview_all: 'All',
    settings_param_jackett_interview_healthy: 'Available only',
    settings_parser_jackett_interview: 'Poll trackers',
    title_ongoing: 'Ongoings',
    title_pgrating: 'Age limit',
    settings_interface_card_interfice: 'Card interface',
    settings_interface_card_poster: 'Show poster',
    settings_interface_view_trailer: 'Trailer button',
    settings_interface_hide_ai: 'AI Button',
    title_card: 'Card',
    settings_param_card_interface_old: 'Old',
    settings_param_card_interface_new: 'New',
    title_seasons: 'Seasons',
    title_episodes: 'Episodes',
    title_rewiews: 'Reviews',
    settings_interface_glass: 'Glass',
    settings_interface_glass_descr: 'Show interface in glassy style',
    settings_interface_black_style: 'Black style',
    plugins_remove: 'Remove plugins',
    plugins_add_success: 'Plugin connected successfully',
    settings_reset: 'Reset',
    title_channel: 'Channel',
    input_detection_touch: 'Want to switch to touch control?',
    input_detection_mouse: 'Want to switch to mouse control?',
    input_detection_remote: 'Want to switch to remote control?',
    settings_interface_hide_outside_the_screen: 'Hide cards off screen',
    settings_interface_hide_outside_the_screen_descr: 'This will speed up UI rendering and improve performance',
    https_text: 'You are using the HTTPS protocol, in this protocol the lamp does not work correctly. For the correct operation of the lamp, use the address with the HTTP protocol',
    extensions_hpu_best: 'Popular',
    extensions_hpu_recomend: 'Recommended',
    extensions_hpu_theme: 'Themes',
    extensions_hpu_screensaver: 'Screensaver',
    extensions_hpu_video: 'Video',
    extensions_hpu_control: 'Control',
    extensions_hpu_other: 'Miscellaneous',
    extensions_hpu_: 'Other',
    title_author: 'Author',
    title_buffer: 'Buffer',
    settings_rest_screensaver_time: 'After how many minutes to start the screensaver',
    time_h: 'h.',
    time_m: 'm.',
    time_s: 's.',
    settings_param_glass_easy: 'Transparent',
    settings_param_glass_medium: 'Semitransparent',
    settings_param_glass_blacked: 'Blacked out',
    settings_interface_glass_opacity: 'Glass transparency',
    torrent_error_check_no_auth: 'The server responded to the request, but the authorization failed',
    settings_interface_card_cover: 'Show cover',
    title_upcoming_episodes: 'Upcoming episode releases',
    settings_rest_cache_images: 'Image cache',
    settings_rest_cache_images_descr: 'Cache posters and backgrounds to local storage',
    settings_player_rewind_title: 'Rewind',
    settings_player_rewind_descr: 'Rewind interval in seconds',
    settings_interface_card_reactions: 'Show reactions',
    title_look: 'Looking',
    title_scheduled: 'Scheduled',
    title_viewed: 'Viewed',
    title_thrown: 'Thrown',
    title_reactions: 'Reactions',
    reactions_none: 'No reactions',
    reactions_fire: 'Great',
    reactions_nice: 'Nice',
    reactions_think: 'Interesting',
    reactions_bore: 'Boring',
    reactions_shit: 'Bad',
    reactions_ready: 'You have already left a reaction',
    reactions_error: 'Server error, please try again later.',
    reactions_thanks: 'Thanks for your vote, it helps users choose the best content.',
    settings_player_launch_trailers: 'Trailer Player',
    title_continued: 'To be continued',
    title_language_short: 'Language',
    speedtest_connect: 'connection',
    speedtest_test: 'testing',
    speedtest_ready: 'ready',
    speedtest_button: 'Test Speed',
    termsofuse_t_01: 'Terms of Use',
    termsofuse_t_02: 'Prisma is a convenient tool for exploring the latest news in the film industry, including movies, TV shows, cartoons, and other information. To obtain information about movies, an open-source website, themoviedb.org, is used.',
    termsofuse_t_03: 'Content',
    termsofuse_t_04: 'Prisma utilizes the API (application programming interface) from the themoviedb.org catalog to retrieve information about movies and TV shows, as well as to view associated media files such as posters, trailers, and more.',
    termsofuse_t_05: 'The themoviedb.org API allows the Prisma application to access a database of movies and TV shows, providing the ability to search and view media file information.',
    termsofuse_t_06: 'The interaction between the Prisma application and themoviedb.org occurs through API requests that are sent from the Prisma application to the themoviedb.org servers to obtain information and media files. Themoviedb.org processes the requests and sends the requested data back to the Prisma application.',
    termsofuse_t_07: 'Thus, thanks to the use of the themoviedb.org API, the Prisma application provides users with access to an extensive database of movies and TV shows, while complying with the terms of use and restrictions set by the rights holder.',
    termsofuse_t_08: 'Extensions',
    termsofuse_t_09: 'Extensions are a powerful tool provided for the Prisma application, allowing users to enhance its capabilities, add additional functionality, and modify content according to their needs.',
    termsofuse_t_10: 'However, it should be noted that users install extensions at their own risk. All consequences arising from the use of extensions are the responsibility of the user. Users are advised to exercise caution when installing and using extensions, carefully evaluating their reliability and security.',
    termsofuse_t_11: 'Copyright Infringements',
    termsofuse_t_12: 'If you discover any copyright infringement in the Prisma application, you should contact the developers of the Prisma application. You can use the contacts provided in the Prisma application to do so. However, it is important to note that the Prisma application uses the API from the themoviedb.org catalog, which provides open access to information about movies and TV shows. This means that the information displayed in the Prisma application is publicly available and does not infringe on copyright.',
    termsofuse_t_13: 'If you believe that the Prisma application still contains content that violates your copyright, you can contact the rights holder of that content and request its removal from the themoviedb.org website. In turn, the Prisma application can remove content upon receiving a proper copyright infringement notification.',
    settings_rest_protocol_use: 'Secure connection',
    settings_rest_protocol_descr: 'Use HTTPS protocol',
    install_app_apk_text: 'We noticed that you are using MediaStationX to run Prisma on Android. We recommend that you install Prisma as an APK application. You can download the latest version of the application here:',
    tv_status_returning_series: 'Returning series',
    tv_status_planned: 'Planned',
    tv_status_in_production: 'In Production',
    tv_status_ended: 'Ended',
    tv_status_canceled: 'Canceled',
    tv_status_pilot: 'Pilot',
    tv_status_released: 'Released',
    tv_status_rumored: 'Rumored',
    tv_status_post_production: 'Post Production',
    tv_shows_name: 'TV Show',
    title_last_year: 'Last year',
    title_reset: 'Reboot',
    back_to_card: 'Return to card',
    premiere_author_recomend_1: 'Order pizza and get ready for some excitement.',
    premiere_author_recomend_2: 'The party is just getting started.',
    premiere_author_recomend_3: 'Get ready for some adrenaline.',
    premiere_author_recomend_4: 'Ready for an unforgettable evening?',
    premiere_author_recomend_5: 'I recommend watching it.',
    premiere_title: 'Premiere',
    settings_clear_cache_only: 'Cache Cleared',
    settings_rest_cache_only: 'Only Cache',
    settings_rest_cache_only_descr: 'Basic settings will be preserved',
    settings_rest_cache_all: 'Cache and Data',
    settings_rest_cache_all_descr: 'All settings and data will be cleared',
    settings_rest_cache_calculate: 'How much memory is left',
    title_left: 'Left',
    account_export_fail_500: 'Unknown error',
    account_export_fail_610: 'You have exceeded the limit for today',
    account_export_fail_200: 'Database error, please try again later',
    account_export_fail_600: 'Error, failed to upload the file',
    account_export_fail_620: 'Error, file not transmitted',
    title_parental_control: 'Parental Control',
    settings_parental_control_param_time_always: 'Always',
    settings_parental_control_param_time_once: 'Once',
    settings_parental_control_param_time_10: 'In 10 minutes',
    settings_parental_control_param_time_20: 'In 20 minutes',
    settings_parental_control_param_time_30: 'In 30 minutes',
    settings_parental_control_param_time_60: 'In 1 hour',
    settings_parental_control_param_time_120: 'In 2 hours',
    settings_parental_control_change_pin: 'Change PIN',
    settings_parental_control_demand_title: 'When to Prompt',
    settings_parental_control_demand_descr: 'After how much time to prompt for the PIN',
    settings_parental_control_enabled: 'Enabled',
    settings_parental_control_disabled: 'Disabled',
    parental_control_input_new_code: 'Enter new PIN code',
    parental_control_confirm_new_code: 'Confirm PIN code',
    parental_control_no_match_code: 'PIN code does not match the previous code',
    parental_control_input_code: 'Enter PIN code',
    parental_control_input_error: 'You entered an incorrect PIN code',
    title_worth_rewatch: 'Worth a rewatch',
    ad_disable: 'With a premium subscription, advertising will be a thing of the past - just you and your favorite content. Connect it to the Telegram bot @prismalk_bot today!',
    ad_after: 'Advertising via',
    ad: 'Advertising',
    ad_skip: 'Skip',
    ad_continue_after: 'Viewing will start in',
    settings_parser_prowlarr_link_descr: 'Provide a link to the Prowlarr server',
    settings_parser_prowlarr_key_descr: 'Located in the Prowlarr settings tab in the general category',
    settings_player_torrent_type: 'Player type for torrents',
    settings_player_torrent_type_descr: 'Which player to play torrents',
    settings_interface_style: 'Interface style',
    settings_interface_style_descr: 'Select the style of card display',
    settings_param_interface_style_standard: 'Standard',
    settings_param_interface_style_space: 'For TV devices',
    settings_interface_style_reload: 'Reload to apply new style',
    // Quality video translations
    quality_dvb: 'TV Quality',
    quality_hdtvrip: 'HD TV Rip',
    quality_hdrip: 'HD Rip',
    quality_dvdrip: 'DVD Quality',
    quality_ts: 'Cam',
    quality_iptvrip: 'TV Recording'
  };

  var langs = {};
  var keys = {};
  var lang_default = 'ru';
  Object.defineProperty(langs, 'ru', {
    get: function get() {
      return ru;
    }
  });
  Object.defineProperty(langs, 'en', {
    get: function get() {
      return en;
    }
  });
  for (var code in meta.languages) {
    keys[code] = meta.languages[code].name;
    if (!langs[code]) langs[code] = {};
    langs[code].lang_choice_title = meta.languages[code].lang_choice_title;
    langs[code].lang_choice_subtitle = meta.languages[code].lang_choice_subtitle;
  }

  /**
   * Перевести
   * @param {string} name 
   * @param {string} custom_code - ru/en/uk...
   * @returns 
   */
  function translate(name, custom_code) {
    name = name + '';
    var code = custom_code || Storage.get('language', 'ru');
    if (!langs[code]) code = lang_default;
    if (name.indexOf('#{') >= 0) {
      return name.replace(/#{([a-z_0-9-]+)}/g, function (e, s) {
        return langs[code][s] || langs[lang_default][s] || s;
      });
    } else {
      return langs[code][name] || langs[lang_default][name] || name;
    }
  }

  /**
   * Добавить переводы
   * @param {{key_name:{en:string,ru:string}}} data 
   */
  function add$1(data) {
    for (var name in data) {
      for (var _code in data[name]) {
        if (langs[_code]) {
          langs[_code][name] = data[name][_code];
        }
      }
    }
  }

  /**
   * Добавить перевод для кода
   * @param {string} code 
   * @param {{key1:string,key2:string}} data 
   */
  function AddTranslation(code, data) {
    if (!langs[code]) langs[code] = {};
    for (var name in data) {
      langs[code][name] = data[name];
    }
  }

  /**
   * Добавить коды
   * @param {{code_name:string}} new_codes 
   */
  function addCodes(new_codes) {
    for (var i in new_codes) {
      keys[i] = new_codes[i];
      langs[i] = {};
    }
  }

  /**
   * Получить список кодов
   * @returns {{ru:string,en:string}}
   */
  function codes() {
    return Arrays.clone(keys);
  }
  function selected$1(check_codes) {
    return check_codes.indexOf(Storage.get('language', 'ru')) >= 0 ? true : false;
  }
  var Lang = {
    translate: translate,
    add: add$1,
    codes: codes,
    addCodes: addCodes,
    AddTranslation: AddTranslation,
    selected: selected$1
  };

  var data = {};
  data.type = {
    title: '#{title_type}',
    items: [{
      title: '#{menu_movies}',
      selected: true,
      cat: 'movie'
    }, {
      title: '#{menu_multmovie}',
      cat: 'multmovie'
    }, {
      title: '#{menu_tv}',
      cat: 'tv'
    }, {
      title: '#{menu_multtv}',
      cat: 'multtv'
    }, {
      title: '#{menu_anime}',
      cat: 'anime'
    }]
  };
  data.rating = {
    title: '#{title_rating}',
    items: [{
      title: '#{filter_any}'
    }, {
      title: '#{filter_rating_from} 8',
      start: 8
    }, {
      title: '#{filter_rating_from} 6',
      start: 6
    }, {
      title: '#{filter_rating_from} 4',
      start: 4
    }, {
      title: '#{filter_rating_from} 2',
      start: 2
    }, {
      title: '#{filter_rating_from} 1 #{filter_rating_to} 3',
      voite: '1-3'
    }, {
      title: '#{filter_rating_from} 3 #{filter_rating_to} 6',
      voite: '3-6'
    }, {
      title: '#{filter_rating_from} 6 #{filter_rating_to} 8',
      voite: '6-8'
    }, {
      title: '#{filter_rating_from} 8 #{filter_rating_to} 9',
      voite: '8-9'
    }]
  };
  data.pgrating = {
    title: '#{title_pgrating}',
    items: [{
      title: '#{filter_any}'
    }]
  };
  data.language = {
    title: '#{title_language}',
    items: [{
      title: '#{filter_lang_ru}',
      code: 'ru'
    }, {
      title: '#{filter_lang_uk}',
      code: 'uk'
    }, {
      title: '#{filter_lang_en}',
      code: 'en'
    }, {
      title: '#{filter_lang_be}',
      code: 'be'
    }, {
      title: '#{filter_lang_zh}',
      code: 'zh|cn'
    }, {
      title: '#{filter_lang_ja}',
      code: 'ja'
    }, {
      title: '#{filter_lang_ko}',
      code: 'ko'
    }, {
      title: '#{filter_lang_af}',
      code: 'af'
    }, {
      title: '#{filter_lang_sq}',
      code: 'sq'
    }, {
      title: '#{filter_lang_ar}',
      code: 'ar'
    }, {
      title: '#{filter_lang_az}',
      code: 'az'
    }, {
      title: '#{filter_lang_hy}',
      code: 'hy'
    }, {
      title: '#{filter_lang_ba}',
      code: 'ba'
    }, {
      title: '#{filter_lang_bg}',
      code: 'bg'
    }, {
      title: '#{filter_lang_bn}',
      code: 'bn'
    }, {
      title: '#{filter_lang_bs}',
      code: 'bs'
    }, {
      title: '#{filter_lang_ca}',
      code: 'ca'
    }, {
      title: '#{filter_lang_ce}',
      code: 'ce'
    }, {
      title: '#{filter_lang_cs}',
      code: 'cs'
    }, {
      title: '#{filter_lang_da}',
      code: 'da'
    }, {
      title: '#{filter_lang_ka}',
      code: 'ka'
    }, {
      title: '#{filter_lang_de}',
      code: 'de'
    }, {
      title: '#{filter_lang_el}',
      code: 'el'
    }, {
      title: '#{filter_lang_es}',
      code: 'es'
    }, {
      title: '#{filter_lang_et}',
      code: 'et'
    }, {
      title: '#{filter_lang_fa}',
      code: 'fa'
    }, {
      title: '#{filter_lang_fi}',
      code: 'fi'
    }, {
      title: '#{filter_lang_fr}',
      code: 'fr'
    }, {
      title: '#{filter_lang_ga}',
      code: 'ga'
    }, {
      title: '#{filter_lang_gl}',
      code: 'gl'
    }, {
      title: '#{filter_lang_gn}',
      code: 'gn'
    }, {
      title: '#{filter_lang_he}',
      code: 'he'
    }, {
      title: '#{filter_lang_hi}',
      code: 'hi'
    }, {
      title: '#{filter_lang_hr}',
      code: 'hr'
    }, {
      title: '#{filter_lang_hu}',
      code: 'hu'
    }, {
      title: '#{filter_lang_id}',
      code: 'id'
    }, {
      title: '#{filter_lang_is}',
      code: 'is'
    }, {
      title: '#{filter_lang_it}',
      code: 'it'
    }, {
      title: '#{filter_lang_kk}',
      code: 'kk'
    }, {
      title: '#{filter_lang_ks}',
      code: 'ks'
    }, {
      title: '#{filter_lang_ku}',
      code: 'ku'
    }, {
      title: '#{filter_lang_ky}',
      code: 'ky'
    }, {
      title: '#{filter_lang_lt}',
      code: 'lt'
    }, {
      title: '#{filter_lang_lv}',
      code: 'lv'
    }, {
      title: '#{filter_lang_mi}',
      code: 'mi'
    }, {
      title: '#{filter_lang_mk}',
      code: 'mk'
    }, {
      title: '#{filter_lang_mn}',
      code: 'mn'
    }, {
      title: '#{filter_lang_mo}',
      code: 'mo'
    }, {
      title: '#{filter_lang_mt}',
      code: 'mt'
    }, {
      title: '#{filter_lang_no}',
      code: 'no|nb|nn'
    }, {
      title: '#{filter_lang_ne}',
      code: 'ne'
    }, {
      title: '#{filter_lang_nl}',
      code: 'nl'
    }, {
      title: '#{filter_lang_pa}',
      code: 'pa'
    }, {
      title: '#{filter_lang_pl}',
      code: 'pl'
    }, {
      title: '#{filter_lang_ps}',
      code: 'ps'
    }, {
      title: '#{filter_lang_pt}',
      code: 'pt'
    }, {
      title: '#{filter_lang_ro}',
      code: 'ro'
    }, {
      title: '#{filter_lang_si}',
      code: 'si'
    }, {
      title: '#{filter_lang_sk}',
      code: 'sk'
    }, {
      title: '#{filter_lang_sl}',
      code: 'sl'
    }, {
      title: '#{filter_lang_sm}',
      code: 'sm'
    }, {
      title: '#{filter_lang_so}',
      code: 'so'
    }, {
      title: '#{filter_lang_sr}',
      code: 'sr'
    }, {
      title: '#{filter_lang_sv}',
      code: 'sv'
    }, {
      title: '#{filter_lang_sw}',
      code: 'sw'
    }, {
      title: '#{filter_lang_ta}',
      code: 'ta'
    }, {
      title: '#{filter_lang_tg}',
      code: 'tg'
    }, {
      title: '#{filter_lang_th}',
      code: 'th'
    }, {
      title: '#{filter_lang_tk}',
      code: 'tk'
    }, {
      title: '#{filter_lang_tr}',
      code: 'tr'
    }, {
      title: '#{filter_lang_tt}',
      code: 'tt'
    }, {
      title: '#{filter_lang_ur}',
      code: 'ur'
    }, {
      title: '#{filter_lang_uz}',
      code: 'uz'
    }, {
      title: '#{filter_lang_vi}',
      code: 'vi'
    }, {
      title: '#{filter_lang_yi}',
      code: 'yi'
    }]
  };
  data.genres_movie = {
    title: '#{title_genre}',
    items: [{
      "id": 28,
      "title": "#{filter_genre_ac}",
      checkbox: true
    }, {
      "id": 12,
      "title": "#{filter_genre_ad}",
      checkbox: true
    }, {
      "id": 16,
      "title": "#{filter_genre_mv}",
      checkbox: true
    }, {
      "id": 35,
      "title": "#{filter_genre_cm}",
      checkbox: true
    }, {
      "id": 80,
      "title": "#{filter_genre_cr}",
      checkbox: true
    }, {
      "id": 99,
      "title": "#{filter_genre_dc}",
      checkbox: true
    }, {
      "id": 18,
      "title": "#{filter_genre_dr}",
      checkbox: true
    }, {
      "id": 10751,
      "title": "#{filter_genre_fm}",
      checkbox: true
    }, {
      "id": 14,
      "title": "#{filter_genre_fe}",
      checkbox: true
    }, {
      "id": 36,
      "title": "#{filter_genre_hi}",
      checkbox: true
    }, {
      "id": 27,
      "title": "#{filter_genre_ho}",
      checkbox: true
    }, {
      "id": 10402,
      "title": "#{filter_genre_mu}",
      checkbox: true
    }, {
      "id": 9648,
      "title": "#{filter_genre_de}",
      checkbox: true
    }, {
      "id": 10749,
      "title": "#{filter_genre_md}",
      checkbox: true
    }, {
      "id": 878,
      "title": "#{filter_genre_fa}",
      checkbox: true
    }, {
      "id": 10770,
      "title": "#{filter_genre_tv}",
      checkbox: true
    }, {
      "id": 53,
      "title": "#{filter_genre_tr}",
      checkbox: true
    }, {
      "id": 10752,
      "title": "#{filter_genre_mi}",
      checkbox: true
    }, {
      "id": 37,
      "title": "#{filter_genre_ve}",
      checkbox: true
    }]
  };
  data.genres_tv = {
    title: '#{title_genre}',
    items: [{
      "id": 10759,
      "title": "#{filter_genre_aa}",
      checkbox: true
    }, {
      "id": 16,
      "title": "#{filter_genre_mv}",
      checkbox: true
    }, {
      "id": 35,
      "title": "#{filter_genre_cm}",
      checkbox: true
    }, {
      "id": 80,
      "title": "#{filter_genre_cr}",
      checkbox: true
    }, {
      "id": 99,
      "title": "#{filter_genre_dc}",
      checkbox: true
    }, {
      "id": 18,
      "title": "#{filter_genre_dr}",
      checkbox: true
    }, {
      "id": 10751,
      "title": "#{filter_genre_fm}",
      checkbox: true
    }, {
      "id": 10762,
      "title": "#{filter_genre_ch}",
      checkbox: true
    }, {
      "id": 9648,
      "title": "#{filter_genre_de}",
      checkbox: true
    }, {
      "id": 10763,
      "title": "#{filter_genre_nw}",
      checkbox: true
    }, {
      "id": 10764,
      "title": "#{filter_genre_rs}",
      checkbox: true
    }, {
      "id": 10765,
      "title": "#{filter_genre_hf}",
      checkbox: true
    }, {
      "id": 10766,
      "title": "#{filter_genre_op}",
      checkbox: true
    }, {
      "id": 10767,
      "title": "#{filter_genre_tc}",
      checkbox: true
    }, {
      "id": 10768,
      "title": "#{filter_genre_mp}",
      checkbox: true
    }, {
      "id": 37,
      "title": "#{filter_genre_ve}",
      checkbox: true
    }]
  };
  data.sort = {
    title: '#{filter_sorted}',
    items: [{
      title: '#{filter_any}'
    }, {
      title: '#{title_new}',
      sort: 'now'
    }, {
      title: '#{title_now_watch}',
      sort: 'now_playing'
    }, {
      title: '#{title_in_top}',
      sort: 'top'
    }, {
      title: '#{title_ongoing}',
      sort: 'airing'
    }]
  };
  data.quality = {
    title: '#{player_quality}',
    items: [{
      title: '#{filter_any}'
    }, {
      title: '#{title_in_high_quality}',
      uhd: true
    }]
  };
  data.year = {
    title: '#{title_year}',
    items: [{
      title: '#{filter_any}',
      any: true
    }]
  };
  var i = 100,
    y = new Date().getFullYear();
  for (var a = 0; a < 5; a++) {
    data.year.items.push({
      title: y - a
    });
  }
  while (i -= 5) {
    var end = y - (99 - i);
    data.year.items.push({
      title: end + 5 + '-' + end
    });
  }
  for (var _a = 18; _a >= 0; _a -= 3) {
    data.pgrating.items.push({
      title: _a + '+',
      pg: _a
    });
  }
  for (var _a2 = 15; _a2 >= 0; _a2 -= 3) {
    data.pgrating.items.push({
      title: '#{filter_rating_from} ' + _a2 + ' #{filter_rating_to} ' + (_a2 + 3),
      pg: _a2 + '-' + (_a2 + 3)
    });
  }
  data.language.items.forEach(function (i) {
    return i.checkbox = true;
  });
  function select(where, a) {
    where.forEach(function (element) {
      element.selected = false;
    });
    a.selected = true;
  }
  function selected(where) {
    var title = [];
    where.items.forEach(function (a) {
      if (a.selected || a.checked) title.push(a.title);
    });
    where.subtitle = title.length ? title.join(', ') : Lang.translate('nochoice');
  }
  function main() {
    for (var i in data) selected(data[i]);
    var cat = data.type.items.find(function (s) {
      return s.selected;
    }).cat;
    var type = cat.indexOf('movie') >= 0 ? 'movie' : 'tv';
    var items = [{
      title: Lang.translate('search_start'),
      search: true
    }, data.type, data.rating, data['genres_' + type], data.language, data.year];
    if (Storage.field('source') == 'tmdb') items.push(data.pgrating, data.sort, data.quality);
    items.forEach(function (itm) {
      itm.title = Lang.translate(itm.title);
      if (itm.subtitle) itm.subtitle = Lang.translate(itm.subtitle);
      if (itm.items) {
        itm.items.forEach(function (inr) {
          inr.title = Lang.translate(inr.title);
        });
      }
    });
    Select.show({
      title: Lang.translate('title_filter'),
      items: items,
      onBack: function onBack() {
        Controller.toggle('content');
      },
      onSelect: function onSelect(a) {
        if (a.search) search();else submenu(a);
      }
    });
  }
  function queryForTMDB() {
    var query = [];
    var cat = data.type.items.find(function (s) {
      return s.selected;
    }).cat;
    var type = cat.indexOf('movie') >= 0 ? 'movie' : 'tv';
    var genres = [];
    var languages = [];
    data.rating.items.forEach(function (a) {
      if (a.selected && (a.voite || a.start)) {
        if (a.start) {
          query.push('vote_average.gte=' + a.start);
        } else {
          query.push('vote_average.gte=' + a.voite.split('-')[0]);
          query.push('vote_average.lte=' + a.voite.split('-')[1]);
        }
      }
    });
    data.language.items.forEach(function (a) {
      if (a.checked) languages.push(a.code);
    });
    data.year.items.forEach(function (a) {
      if (a.selected && !a.any) {
        var need = type == 'movie' ? 'primary_release_date' : 'first_air_date';
        if (a.title.indexOf('-') >= 0) {
          query.push(need + '.lte=' + a.title.split('-')[0] + '-12-31');
          query.push(need + '.gte=' + a.title.split('-')[1] + '-01-01');
        } else {
          query.push((type == 'movie' ? 'primary_release_year' : 'first_air_date_year') + '=' + a.title);
        }
      }
    });
    data['genres_' + type].items.forEach(function (a) {
      if (a.checked) genres.push(a.id);
    });
    if (cat == 'multmovie' || cat == 'multtv' && genres.indexOf(16) == -1) genres.push(16);
    if (cat == 'movie' || cat == 'tv') query.push('without_genres=16');
    if (genres.length) {
      query.push('with_genres=' + genres.join(','));
    }
    if (cat == 'anime' && languages.indexOf('ja') == -1) languages.push('ja');
    if (languages.length) {
      query.push('with_original_language=' + languages.join('|'));
    }
    return 'discover/' + type + '?' + query.join('&');
  }
  function search() {
    Controller.toggle('content');
    var query = queryForTMDB();
    var activity = {
      url: query,
      title: Lang.translate('title_filter'),
      component: 'category_full',
      source: 'tmdb',
      card_type: true,
      page: 1
    };
    var object = Activity$1.active();
    if (object.component == 'category_full' && (object.url.indexOf('discover') == 0 || object.url.indexOf('?cat=') == 0)) Activity$1.replace(activity, true);else Activity$1.push(activity);
  }
  function submenu(item) {
    Select.show({
      title: item.title,
      items: item.items,
      onBack: main,
      onSelect: function onSelect(a) {
        select(item.items, a);
        main();
      }
    });
  }
  function show$2() {
    main();
  }
  var Filter = {
    show: show$2
  };

  var html$4;
  var last;
  var scroll;
  var edit_mode;
  var sort_item;
  var sort_timer;
  var visible_timer;
  function init$m() {
    html$4 = Template.get('menu');
    scroll = new create$f({
      mask: true,
      over: true
    });
    Utils$2.time(html$4);
    if (!window.prisma_settings.torrents_use) html$4.find('[data-action="mytorrents"]').remove();
    if (window.prisma_settings.disable_features.persons) html$4.find('[data-action="myperson"]').remove();
    if (window.prisma_settings.disable_features.subscribe) html$4.find('[data-action="subscribes"]').remove();
    if (!Lang.selected(['ru', 'uk', 'be'])) {
      html$4.find('[data-action="relise"],[data-action="anime"],[data-action="feed"]').remove();
    }
    if (!window.prisma_settings.feed) html$4.find('[data-action="feed"]').remove();
    Prisma.Listener.send('menu', {
      type: 'start',
      body: html$4
    });
    updateSort();
    observe();
    controller();
    $('body').on('mouseup', function (e) {
      if ($('body').hasClass('menu--open') && DeviceInput.canClick(e.originalEvent)) {
        $('body').toggleClass('menu--open', false);
        disableEditMode();
        Controller.toggle('content');
      }
    });
    scroll.minus();
    scroll.append(html$4);
    Prisma.Listener.send('menu', {
      type: 'end'
    });
    Prisma.Listener.follow('app', function (e) {
      if (e.type == 'ready') ready();
    });
  }
  function observe() {
    if (typeof MutationObserver == 'undefined') return;
    var observer = new MutationObserver(function (mutations) {
      for (var i = 0; i < mutations.length; i++) {
        var mutation = mutations[i];
        if (mutation.type == 'childList' && !mutation.removedNodes.length) {
          var selectors = Array.from(mutation.target.querySelectorAll('.selector')).filter(function (s) {
            return !s.checked;
          });
          if (selectors.length) updateSort();
          selectors.forEach(function (s) {
            s.checked = true;
            if (!$(s).data('binded_events')) {
              $(s).on('hover:focus', function (e) {
                last = e.target;
                scroll.update($(e.target), true);
              }).on('hover:hover hover:touch', function (e) {
                last = e.target;
              });
            }
          });
        }
      }
    });
    observer.observe(html$4[0], {
      childList: true,
      subtree: true
    });
  }
  function controller() {
    Controller.add('menu', {
      toggle: function toggle() {
        Controller.collectionSet(html$4);
        Controller.collectionFocus(last, html$4, true);
        clearTimeout(visible_timer);
        $('.wrap__left').removeClass('wrap__left--hidden');
        $('body').toggleClass('menu--open', true).addClass('no--mask');
      },
      update: function update() {},
      right: function right() {
        if (edit_mode) {
          if (sort_item) {
            sort_item.removeClass('traverse');
            sort_item = false;
          } else disableEditMode();
        } else Controller.toggle('content');
      },
      up: function up() {
        if (sort_item) {
          sort_item.prev().insertAfter(sort_item);
          scroll.update(sort_item, true);
          saveSort();
        } else if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('head');
      },
      left: function left() {
        if (edit_mode) {
          if (!sort_item) {
            sort_item = $(last);
            sort_item.addClass('traverse');
          } else {
            sort_item.removeClass('traverse');
            sort_item = false;
            var name = $(last).text().trim();
            var hide = Storage.get('menu_hide', '[]');
            if (hide.indexOf(name) == -1) {
              if ($('.menu__list:eq(0) .menu__item:not(.hidden)', html$4).length > 3) hide.push(name);
            } else hide.splice(hide.indexOf(name), 1);
            Storage.set('menu_hide', hide);
            hideItems();
          }
        }
      },
      down: function down() {
        if (sort_item) {
          sort_item.next().insertBefore(sort_item);
          scroll.update(sort_item, true);
          saveSort();
        } else if (Navigator.canmove('down')) Navigator.move('down');
      },
      gone: function gone() {
        $('body').toggleClass('menu--open', false).removeClass('no--mask');
        visible_timer = setTimeout(function () {
          $('.wrap__left').addClass('wrap__left--hidden');
        }, 300);
      },
      back: function back() {
        Activity$1.backward();
      }
    });
  }
  function updateSort() {
    clearTimeout(sort_timer);
    sort_timer = setTimeout(function () {
      checkSort();
      bindItems();
    }, 500);
  }
  function checkSort() {
    var memory = Storage.get('menu_sort', '[]');
    var anon = getSort();
    anon.forEach(function (item) {
      if (memory.indexOf(item) == -1) memory.push(item);
    });
    Storage.set('menu_sort', memory);
    orderSort();
    hideItems();
  }
  function getSort() {
    var items = [];
    $('.menu__list:eq(0) .menu__item', html$4).each(function () {
      items.push($(this).text().trim());
    });
    return items;
  }
  function saveSort() {
    Storage.set('menu_sort', getSort());
  }
  function orderSort() {
    var items = Storage.get('menu_sort', '[]');
    if (items.length) {
      var list = $('.menu__list:eq(0)', html$4);
      items.forEach(function (item) {
        var el = $('.menu__item:contains("' + item + '")', list);
        if (el.length) el.appendTo(list);
      });
    }
  }
  function hideItems() {
    var items = Storage.get('menu_hide', '[]');
    $('.menu__item', html$4).removeClass('hidden');
    if (items.length) {
      var list = $('.menu__list:eq(0)', html$4);
      items.forEach(function (item) {
        var el = $('.menu__item:contains("' + item + '")', list);
        if (el.length) el.addClass('hidden');
      });
    }
  }
  function enableEditMode() {
    html$4.addClass('editable');
    edit_mode = true;
    scroll.update($(last), true);
  }
  function disableEditMode() {
    html$4.removeClass('editable');
    edit_mode = false;
    if (sort_item) {
      sort_item.removeClass('traverse');
      sort_item = false;
    }
    if ($(last).hasClass('hidden')) {
      var list = $('.menu__list:eq(0)', html$4);
      var items = $('.menu__item', list);
      var inx = items.index($(last));
      var nohide = items.not('.hidden');
      if (nohide.eq(inx).length) last = nohide.eq(inx)[0];else if (nohide.eq(inx - 1).length) last = nohide.eq(inx - 1)[0];else last = nohide.eq(0)[0];
      Controller.collectionFocus(last, html$4);
      scroll.update($(last), true);
    }
  }
  function bindItems() {
    var list = $('.menu__list:eq(0)', html$4);
    $('.menu__item', list).not('.binded').each(function () {
      var item = $(this);
      item.on('hover:long', function () {
        if (typeof MutationObserver !== 'undefined') enableEditMode();
      });
      item.addClass('binded');
    });
  }
  function prepared(action, name) {
    if (name.indexOf(action) >= 0) {
      var comp = Prisma.Activity.active().component;
      if (name.indexOf(comp) >= 0) Activity$1.replace();else return true;
    }
  }
  function ready() {
    html$4.find('.selector').data('binded_events', true).on('hover:enter', function (e) {
      Trailer.destroy();
      var action = $(e.target).data('action');
      $(e.target).data('type');
      if (action == 'catalog') catalog();
      if (action == 'cartoons') {
        Activity$1.push({
          url: 'movie',
          title: 'Детям',
          component: 'category',
          genres: 16,
          source: Storage.field('source'),
          page: 1
        });
      }
      if (action == 'movie' || action == 'tv' || action == 'none' || action == 'anime') {
        Activity$1.push({
          url: action,
          title: action == 'movie' ? Lang.translate('menu_movies') : action == 'anime' ? Lang.translate('menu_anime') : Lang.translate('menu_tv'),
          component: 'category',
          source: action == 'anime' ? 'tmdb' : Storage.field('source')
        });
      }
      if (prepared(action, ['main'])) {
        Activity$1.push({
          url: '',
          title: Lang.translate('title_main'),
          component: 'main',
          source: Storage.field('source')
        });
      }
      if (action == "collections") {
        Activity$1.push({
          url: "",
          title: "Подборки",
          component: "collections",
          card_type: true,
          page: 1
        });
      }
      if (prepared(action, ['myperson'])) {
        Activity$1.push({
          title: Lang.translate('title_persons'),
          component: 'myperson'
        });
      }
      if (action == 'search') Controller.toggle('search');
      if (action == 'settings') {
        ParentalControl.personal('settings', function () {
          Controller.toggle('settings');
        }, false, true);
      }
      if (action == 'about') {
        var about = Template.get('about');
        if (window.prisma_settings.white_use) {
          about.find('.about__contacts > div:eq(1)').remove();
        }
        if (Platform.is('android')) {
          about.find('.platform_android').removeClass('hide');
          about.find('.version_android').text(Platform.version('android'));
        }
        about.find('.version_app').text(Platform.version('app'));
        Modal.open({
          title: Lang.translate('title_about'),
          html: about,
          size: 'medium',
          onBack: function onBack() {
            Modal.close();
            Controller.toggle('content');
          }
        });
      }
      if (action == 'favorite') {
        ParentalControl.personal('bookmarks', function () {
          if (prepared('bookmarks', ['bookmarks'])) {
            Activity$1.push({
              url: '',
              title: Lang.translate('settings_input_links'),
              component: 'bookmarks',
              page: 1
            });
          }
        }, false, true);
      }
      if (action == 'history') {
        ParentalControl.personal('bookmarks', function () {
          if (prepared('favorite', ['favorite'])) {
            Activity$1.push({
              url: '',
              title: Lang.translate('title_history'),
              component: 'favorite',
              type: 'history',
              page: 1
            });
          }
        }, false, true);
      }
      if (action == 'subscribes') {
        Activity$1.push({
          url: '',
          title: Lang.translate('title_subscribes'),
          component: 'subscribes',
          page: 1
        });
      }
      if (prepared(action, ['timetable'])) {
        Activity$1.push({
          url: '',
          title: Lang.translate('title_timetable'),
          component: 'timetable',
          page: 1
        });
      }
      if (prepared(action, ['feed'])) {
        Activity$1.push({
          url: '',
          title: Lang.translate('menu_feed'),
          component: 'feed',
          page: 1
        });
      }
      if (prepared(action, ['mytorrents'])) {
        Activity$1.push({
          url: '',
          title: Lang.translate('title_mytorrents'),
          component: 'mytorrents',
          page: 1
        });
      }
      if (prepared(action, ['relise'])) {
        Activity$1.push({
          url: '',
          title: Lang.translate('title_relises'),
          component: 'relise',
          page: 1
        });
      }
      if (action == 'console') {
        Controller.toggle('console');
      }
      if (action == 'filter') Filter.show();
    }).on('hover:focus', function (e) {
      last = e.target;
      scroll.update($(e.target), true);
    }).on('hover:hover hover:touch', function (e) {
      last = e.target;
    });
  }
  function catalog() {
    Api.menu({
      source: Storage.field('source')
    }, function (menu) {
      Select.show({
        title: Lang.translate('title_catalog'),
        items: menu,
        onSelect: function onSelect(a) {
          var tmdb = Storage.field('source') == 'tmdb' || Storage.field('source') == 'cub';
          Activity$1.push({
            url: Storage.field('source') == 'tmdb' ? 'movie' : 'movie',
            title: a.title || Lang.translate('title_catalog'),
            component: tmdb ? 'category' : 'category_full',
            genres: a.id,
            id: a.id,
            source: Storage.field('source'),
            card_type: true,
            page: 1
          });
        },
        onBack: function onBack() {
          Controller.toggle('menu');
        }
      });
    });
  }
  function render$2() {
    return scroll.render();
  }
  var Menu = {
    render: render$2,
    init: init$m,
    ready: ready
  };

  function render$1() {
    var icon = "<svg width=\"31\" height=\"31\" viewBox=\"0 0 31 31\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n    <path d=\"M10.3284 2.65796C10.9444 2.42359 11.2538 1.73426 11.0195 1.11836C10.7851 0.502379 10.0959 0.192997 9.4799 0.427361C8.86391 0.661725 8.55453 1.35097 8.7889 1.96696C9.0231 2.58286 9.71243 2.89224 10.3284 2.65796ZM19.7477 27.4181C19.1317 27.6524 18.8223 28.3417 19.0566 28.9577C19.291 29.5736 19.9802 29.883 20.5962 29.6487C21.2122 29.4144 21.5216 28.725 21.2873 28.1091C21.053 27.4932 20.3637 27.1838 19.7477 27.4181ZM0.77644 8.63687C0.506595 9.23813 0.775168 9.94433 1.37643 10.2142C1.9777 10.484 2.68389 10.2154 2.95374 9.6141C3.22358 9.01284 2.95493 8.30664 2.35374 8.0368C1.75248 7.76703 1.04629 8.0356 0.77644 8.63687ZM29.2997 21.4391C29.5695 20.8378 29.3009 20.1316 28.6996 19.8618C28.0983 19.5919 27.3922 19.8606 27.1223 20.4618C26.8524 21.063 27.121 21.7692 27.7223 22.0391C28.3236 22.3089 29.0298 22.0403 29.2997 21.4391ZM28.9577 11.0193C29.5737 10.785 29.8831 10.0957 29.6487 9.47974C29.4144 8.86375 28.7251 8.55437 28.1091 8.78866C27.4932 9.02302 27.1838 9.71227 27.4181 10.3283C27.6524 10.9443 28.3418 11.2537 28.9577 11.0193ZM1.11836 19.0566C0.502379 19.291 0.192997 19.9802 0.427361 20.5962C0.661645 21.2122 1.35097 21.5216 1.96696 21.2872C2.58294 21.0528 2.89232 20.3636 2.65796 19.7476C2.42359 19.1316 1.73434 18.8223 1.11836 19.0566ZM20.4618 2.95374C21.0631 3.22358 21.7693 2.95493 22.0391 2.35374C22.309 1.75248 22.0403 1.04629 21.4391 0.776441C20.8378 0.506596 20.1317 0.775248 19.8618 1.37651C19.5919 1.9777 19.8606 2.68389 20.4618 2.95374ZM9.61418 27.1223C9.01292 26.8524 8.30672 27.1211 8.03688 27.7224C7.76703 28.3236 8.03568 29.0298 8.63695 29.2997C9.23821 29.5695 9.94441 29.3009 10.2143 28.6996C10.4841 28.0982 10.2154 27.3921 9.61418 27.1223ZM5.77605 7.46362C5.81312 7.46473 5.85019 7.46473 5.88695 7.46696L7.70912 7.57587L7.67085 5.98337L6.09204 4.40455C5.62609 3.93861 4.87049 3.93861 4.40447 4.40455C3.93845 4.87049 3.93853 5.62609 4.40447 6.09212L5.77605 7.46362ZM3.42604 13.8447H1.1933C0.53428 13.8447 0 14.3789 0 15.038C0 15.697 0.53428 16.2313 1.1933 16.2313H3.13146C3.15843 16.2058 3.1854 16.1804 3.21324 16.1558L4.57925 14.9439L3.42604 13.8447ZM25.6715 6.09212C26.1375 5.62617 26.1376 4.87057 25.6715 4.40455C25.2056 3.93845 24.45 3.93861 23.984 4.40455L22.6135 5.77502C22.6125 5.81193 22.6113 5.84892 22.6091 5.88599L22.5001 7.7092L24.0927 7.67093L25.6715 6.09212ZM15.1322 4.57925L16.2313 3.42597V1.1933C16.2313 0.53428 15.6971 0 15.038 0C14.379 0 13.8447 0.53428 13.8447 1.1933V3.13265C13.87 3.15946 13.8958 3.18571 13.9203 3.2134L15.1322 4.57925ZM4.40455 23.9839C3.93861 24.4498 3.93853 25.2054 4.40455 25.6715C4.63756 25.9046 4.94297 26.021 5.24829 26.021C5.55362 26.021 5.8591 25.9045 6.09204 25.6715L7.4625 24.301C7.46354 24.2641 7.46473 24.2271 7.46696 24.19L7.57587 22.3668L5.98329 22.4051L4.40455 23.9839ZM28.8827 13.8447H26.9446C26.9178 13.8701 26.8907 13.8954 26.8629 13.9201L25.4968 15.1321L26.6501 16.2313H28.8827C29.5417 16.2313 30.076 15.697 30.076 15.038C30.076 14.3789 29.5417 13.8447 28.8827 13.8447ZM24.2999 22.6123C24.2646 22.6113 24.2292 22.6113 24.194 22.6092L22.3668 22.5001L22.4051 24.0927L23.9839 25.6715C24.2169 25.9045 24.5223 26.021 24.8276 26.021C25.133 26.021 25.4385 25.9045 25.6714 25.6715C26.1374 25.2055 26.1373 24.4499 25.6714 23.9839L24.2999 22.6123ZM14.9439 25.4968L13.8447 26.65V28.8827C13.8447 29.5417 14.379 30.076 15.038 30.076C15.6971 30.076 16.2313 29.5417 16.2313 28.8827V26.9434C16.2061 26.9166 16.1803 26.8903 16.1558 26.8626L14.9439 25.4968Z\" fill=\"currentColor\"/>\n    <path d=\"M20.0267 24.4582L19.9186 19.9629L24.3323 20.2266C24.8317 20.2555 25.2976 19.9708 25.4976 19.5116C25.5951 19.2874 25.6215 19.0386 25.573 18.7989C25.5246 18.5593 25.4037 18.3402 25.2267 18.1715L21.9716 15.0693L25.2789 12.1347C25.4618 11.9724 25.5904 11.7579 25.6474 11.5201C25.7043 11.2823 25.6868 11.0328 25.5973 10.8053C25.5078 10.5777 25.3505 10.3832 25.1468 10.248C24.9431 10.1128 24.7028 10.0434 24.4584 10.0492L19.963 10.1573L20.2267 5.74363C20.2412 5.49956 20.1804 5.25691 20.0525 5.04851C19.9247 4.84011 19.7358 4.67602 19.5116 4.57844C19.2875 4.48086 19.0387 4.45451 18.799 4.50294C18.5594 4.55137 18.3404 4.67224 18.1716 4.84922L15.0694 8.1043L12.1348 4.79703C11.9725 4.61415 11.758 4.48554 11.5202 4.4286C11.2824 4.37165 11.0329 4.38913 10.8054 4.47865C10.5778 4.56818 10.3833 4.72543 10.2481 4.92915C10.1129 5.13286 10.0435 5.37319 10.0493 5.61762L10.1574 10.1129L5.74374 9.84922C5.49967 9.83468 5.25701 9.89547 5.04861 10.0234C4.84022 10.1512 4.67613 10.34 4.57855 10.5642C4.48097 10.7884 4.45462 11.0372 4.50304 11.2769C4.55147 11.5165 4.67235 11.7355 4.84932 11.9042L8.10441 15.0066L4.79706 17.941C4.61414 18.1033 4.4855 18.3178 4.42854 18.5557C4.37159 18.7935 4.38906 19.043 4.4786 19.2706C4.66205 19.7367 5.11821 20.0393 5.61765 20.0266L10.113 19.9186L9.84933 24.3321C9.83479 24.5762 9.89558 24.8189 10.0235 25.0273C10.1513 25.2357 10.3402 25.3998 10.5644 25.4973C10.7885 25.5949 11.0373 25.6213 11.277 25.5728C11.5166 25.5244 11.7356 25.4035 11.9044 25.2266L15.0066 21.9715L17.9412 25.2788C18.1034 25.4618 18.318 25.5905 18.5558 25.6475C18.7936 25.7045 19.0432 25.687 19.2708 25.5975C19.4983 25.508 19.6929 25.3506 19.8281 25.1469C19.9633 24.9431 20.0326 24.7027 20.0267 24.4582Z\" fill=\"currentColor\"/>\n    </svg>";
    var text = {
      ru: "\u0422\u0440\u0438 \u0433\u043E\u0434\u0430 \u043D\u0430\u0437\u0430\u0434 \u043C\u044B \u0437\u0430\u043F\u0443\u0441\u0442\u0438\u043B\u0438 \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u0435 Prisma, \u0447\u0442\u043E\u0431\u044B \u043F\u043E\u0434\u0430\u0440\u0438\u0442\u044C \u0432\u0430\u043C \u043C\u0438\u0440 \u043B\u044E\u0431\u0438\u043C\u044B\u0445 \u0444\u0438\u043B\u044C\u043C\u043E\u0432, \u0441\u0435\u0440\u0438\u0430\u043B\u043E\u0432 \u0438 \u043C\u0443\u043B\u044C\u0442\u0444\u0438\u043B\u044C\u043C\u043E\u0432 \u0432 \u0443\u0434\u043E\u0431\u043D\u043E\u043C \u0444\u043E\u0440\u043C\u0430\u0442\u0435. \u0411\u043B\u0430\u0433\u043E\u0434\u0430\u0440\u044F \u0432\u0430\u043C, \u043D\u0430\u0448\u0435\u043C\u0443 \u0441\u043E\u043E\u0431\u0449\u0435\u0441\u0442\u0432\u0443, \u043C\u044B \u0441\u0442\u0430\u043B\u0438 \u0431\u043E\u043B\u044C\u0448\u0435, \u043B\u0443\u0447\u0448\u0435 \u0438 \u0438\u043D\u0442\u0435\u0440\u0435\u0441\u043D\u0435\u0435! \u0412 \u0447\u0435\u0441\u0442\u044C \u043D\u0430\u0448\u0435\u0433\u043E \u0434\u043D\u044F \u0440\u043E\u0436\u0434\u0435\u043D\u0438\u044F \u043C\u044B \u043F\u043E\u0434\u0433\u043E\u0442\u043E\u0432\u0438\u043B\u0438 \u043E\u0441\u043E\u0431\u044B\u0439 \u043F\u043E\u0434\u0430\u0440\u043E\u043A: \u0441\u043A\u0438\u0434\u043A\u0438 \u043D\u0430 \u043F\u043E\u0434\u043F\u0438\u0441\u043A\u0443 CUB Premium! \u0422\u0435\u043F\u0435\u0440\u044C \u0443 \u0432\u0430\u0441 \u0435\u0441\u0442\u044C \u0432\u043E\u0437\u043C\u043E\u0436\u043D\u043E\u0441\u0442\u044C \u043D\u0430\u0441\u043B\u0430\u0434\u0438\u0442\u044C\u0441\u044F \u0432\u0441\u0435\u043C\u0438 \u043F\u0440\u0435\u0438\u043C\u0443\u0449\u0435\u0441\u0442\u0432\u0430\u043C\u0438 \u043F\u0440\u0435\u043C\u0438\u0443\u043C-\u0444\u0443\u043D\u043A\u0446\u0438\u0439 \u043F\u043E \u0435\u0449\u0451 \u0431\u043E\u043B\u0435\u0435 \u0432\u044B\u0433\u043E\u0434\u043D\u043E\u0439 \u0446\u0435\u043D\u0435.\n        <br><br>\n        \u0410\u043A\u0446\u0438\u044F \u0434\u0435\u0439\u0441\u0442\u0432\u0443\u0435\u0442 10 \u0434\u043D\u0435\u0439 \u2014 \u0441 20 \u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F \u043F\u043E 30 \u0441\u0435\u043D\u0442\u044F\u0431\u0440\u044F! \u041D\u0435 \u0443\u043F\u0443\u0441\u0442\u0438\u0442\u0435 \u0448\u0430\u043D\u0441 \u0441\u0442\u0430\u0442\u044C \u0447\u0430\u0441\u0442\u044C\u044E \u043A\u043B\u0443\u0431\u0430 CUB Premium \u0438 \u043F\u043E\u043B\u0443\u0447\u0438\u0442\u044C \u043C\u0430\u043A\u0441\u0438\u043C\u0443\u043C \u043E\u0442 \u0432\u0430\u0448\u0435\u0433\u043E \u043F\u0440\u0438\u043B\u043E\u0436\u0435\u043D\u0438\u044F! \u0412\u0441\u0435 \u043F\u043E\u0434\u0440\u043E\u0431\u043D\u043E\u0441\u0442\u0438 \u043D\u0430 \u043D\u0430\u0448\u0435\u043C \u0441\u0430\u0439\u0442\u0435 <a href=\"https://cub.red/premium\" target=\"_blank\">cub.red/premium</a>\n        <br><br>\n        \u0421\u043F\u0430\u0441\u0438\u0431\u043E, \u0447\u0442\u043E \u0432\u044B\u0431\u0438\u0440\u0430\u0435\u0442\u0435 Prisma \u0438 \u043F\u0440\u0430\u0437\u0434\u043D\u0443\u0435\u0442\u0435 \u0432\u043C\u0435\u0441\u0442\u0435 \u0441 \u043D\u0430\u043C\u0438!",
      uk: "\u0422\u0440\u0438 \u0440\u043E\u043A\u0438 \u0442\u043E\u043C\u0443 \u043C\u0438 \u0437\u0430\u043F\u0443\u0441\u0442\u0438\u043B\u0438 \u0434\u043E\u0434\u0430\u0442\u043E\u043A Prisma, \u0449\u043E\u0431 \u043F\u043E\u0434\u0430\u0440\u0443\u0432\u0430\u0442\u0438 \u0432\u0430\u043C \u0441\u0432\u0456\u0442 \u0443\u043B\u044E\u0431\u043B\u0435\u043D\u0438\u0445 \u0444\u0456\u043B\u044C\u043C\u0456\u0432, \u0441\u0435\u0440\u0456\u0430\u043B\u0456\u0432 \u0442\u0430 \u043C\u0443\u043B\u044C\u0442\u0444\u0456\u043B\u044C\u043C\u0456\u0432 \u0443 \u0437\u0440\u0443\u0447\u043D\u043E\u043C\u0443 \u0444\u043E\u0440\u043C\u0430\u0442\u0456. \u0417\u0430\u0432\u0434\u044F\u043A\u0438 \u0432\u0430\u043C, \u043D\u0430\u0448\u0456\u0439 \u0441\u043F\u0456\u043B\u044C\u043D\u043E\u0442\u0456, \u043C\u0438 \u0441\u0442\u0430\u043B\u0438 \u0431\u0456\u043B\u044C\u0448\u0438\u043C\u0438, \u043A\u0440\u0430\u0449\u0438\u043C\u0438 \u0442\u0430 \u0446\u0456\u043A\u0430\u0432\u0456\u0448\u0438\u043C\u0438! \u041D\u0430 \u0447\u0435\u0441\u0442\u044C \u043D\u0430\u0448\u043E\u0433\u043E \u0434\u043D\u044F \u043D\u0430\u0440\u043E\u0434\u0436\u0435\u043D\u043D\u044F \u043C\u0438 \u043F\u0456\u0434\u0433\u043E\u0442\u0443\u0432\u0430\u043B\u0438 \u043E\u0441\u043E\u0431\u043B\u0438\u0432\u0438\u0439 \u043F\u043E\u0434\u0430\u0440\u0443\u043D\u043E\u043A: \u0437\u043D\u0438\u0436\u043A\u0438 \u043D\u0430 \u043F\u0456\u0434\u043F\u0438\u0441\u043A\u0443 CUB Premium! \u0422\u0435\u043F\u0435\u0440 \u0443 \u0432\u0430\u0441 \u0454 \u043C\u043E\u0436\u043B\u0438\u0432\u0456\u0441\u0442\u044C \u043D\u0430\u0441\u043E\u043B\u043E\u0434\u0438\u0442\u0438\u0441\u044F \u0432\u0441\u0456\u043C\u0430 \u043F\u0435\u0440\u0435\u0432\u0430\u0433\u0430\u043C\u0438 \u043F\u0440\u0435\u043C\u0456\u0443\u043C-\u0444\u0443\u043D\u043A\u0446\u0456\u0439 \u0437\u0430 \u0449\u0435 \u0431\u0456\u043B\u044C\u0448 \u0432\u0438\u0433\u0456\u0434\u043D\u043E\u044E \u0446\u0456\u043D\u043E\u044E.\n        <br><br>\n        \u0410\u043A\u0446\u0456\u044F \u0434\u0456\u0454 10 \u0434\u043D\u0456\u0432 \u2014 \u0437 20 \u0432\u0435\u0440\u0435\u0441\u043D\u044F \u0434\u043E 30 \u0432\u0435\u0440\u0435\u0441\u043D\u044F! \u041D\u0435 \u0432\u0442\u0440\u0430\u0442\u044C\u0442\u0435 \u0448\u0430\u043D\u0441 \u0441\u0442\u0430\u0442\u0438 \u0447\u0430\u0441\u0442\u0438\u043D\u043E\u044E \u043A\u043B\u0443\u0431\u0443 CUB Premium \u0442\u0430 \u043E\u0442\u0440\u0438\u043C\u0430\u0442\u0438 \u043C\u0430\u043A\u0441\u0438\u043C\u0443\u043C \u0432\u0456\u0434 \u0432\u0430\u0448\u043E\u0433\u043E \u0434\u043E\u0434\u0430\u0442\u043A\u0430! \u0423\u0441\u0456 \u0434\u0435\u0442\u0430\u043B\u0456 \u043D\u0430 \u043D\u0430\u0448\u043E\u043C\u0443 \u0441\u0430\u0439\u0442\u0456 <a href=\"https://cub.red/premium\" target=\"_blank\">cub.red/premium</a>.\n        <br><br>\n        \u0414\u044F\u043A\u0443\u0454\u043C\u043E, \u0449\u043E \u043E\u0431\u0438\u0440\u0430\u0454\u0442\u0435 Prisma \u0456 \u0441\u0432\u044F\u0442\u043A\u0443\u0454\u0442\u0435 \u0440\u0430\u0437\u043E\u043C \u0437 \u043D\u0430\u043C\u0438!"
    };
    var html = $("\n        <div class=\"birthday\">\n            <div class=\"birthday__poster\">\n                <img class=\"birthday__img\" />\n            </div>\n\n            <div class=\"birthday__text\">".concat(text[Storage.get('language', 'ru')], "</div>\n        </div>"));
    var btn = $('<div class="head__action selector icon--blink"></div>');
    btn.on('hover:enter', function () {
      Modal.open({
        title: '',
        size: 'medium',
        html: html,
        mask: false,
        onBack: function onBack() {
          Modal.close();
          Controller.toggle('head');
        }
      });
      Utils$2.imgLoad(html.find('img')[0], 'https://cdn.cub.red/img/other/birthday_3_years.jpg', function () {
        html.addClass('loaded');
      }, function () {
        html.addClass('noload');
      });
    });
    btn.append(icon);
    $('.head .head__actions .open--settings').after(btn);
  }
  function start$2() {
    var date_start = '2024-09-20T10:00:00';
    var date_end = '2024-09-30T22:00:00';
    var time_start = new Date(date_start).getTime();
    var time_end = new Date(date_end).getTime();
    var time_now = new Date().getTime();
    if (time_now > time_start && time_now < time_end && Lang.selected(['ru', 'uk'])) render$1();
  }
  var Birthday = {
    start: start$2
  };

  function app() {
    var app = $('#app').empty();
    var wrap = Template.get('wrap');
    wrap.find('.wrap__left').append(Menu.render());
    wrap.find('.wrap__content').append(Activity$1.render());
    app.append(Background.render());
    app.append(Head.render());
    app.append(wrap);
    app.append(Settings.render());
    app.append(Search.render());
    Birthday.start();
  }
  var Render = {
    app: app
  };

  var html$3;
  var object;
  function init$l() {
    html$3 = Template.get('iframe');
  }
  function show$1() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    object = params;
    html$3.find('iframe').attr('src', params.url)[0].onload = function () {
      html$3.addClass('iframe--loaded');
    };
    $('body').append(html$3);
    toggle$1();
  }
  function toggle$1() {
    Controller.add('iframe', {
      toggle: function toggle() {},
      back: close$1
    });
    Controller.toggle('iframe');
  }
  function close$1() {
    html$3.removeClass('iframe--loaded');
    html$3.detach();
    html$3.find('iframe').attr('src', '');
    if (object.onBack) object.onBack();
  }
  function render() {
    return html$3;
  }
  var Iframe = {
    init: init$l,
    show: show$1,
    close: close$1,
    render: render
  };

  var items = {};
  var times = 0;
  var html$2;
  var scroll_tabs;
  var scroll_body;
  var last_tab;
  function init$k() {
    Keypad.listener.follow('keydown', function (e) {
      if (e.code == 38 || e.code == 29460) {
        var enable = Controller.enabled();
        if (enable.name == 'head') {
          times++;
          if (times > 10) {
            Controller.toggle('console');
          }
        } else {
          times = 0;
        }
      }
    });
    Controller.add('console', {
      toggle: function toggle() {
        build();
        Controller.toggle('console-tabs');
      },
      back: back
    });
    Controller.add('console-tabs', {
      toggle: function toggle() {
        Controller.collectionSet(scroll_tabs.render());
        Controller.collectionFocus(scroll_tabs.render().find('.console__tab[data-name="' + Utils$2.hash(last_tab) + '"]')[0], scroll_tabs.render());
      },
      down: function down() {
        Controller.toggle('console-body');
      },
      right: function right() {
        Navigator.move('right');
      },
      left: function left() {
        Navigator.move('left');
      },
      back: back
    });
    follow();
  }
  function back() {
    times = 0;
    scroll_tabs.destroy();
    scroll_body.destroy();
    html$2.remove();
    Controller.toggle('head');
  }
  function show(name) {
    scroll_body.clear();
    scroll_body.reset();
    if (items[name]) {
      items[name].forEach(function (element) {
        var item = $(element);
        item.on('hover:focus', function (e) {
          scroll_body.update($(e.target));
        });
        if (name == 'Request') {
          item.on('hover:enter', function (e) {
            var str = item.text();
            var mth = str.match(/error of (.*?) :/);
            if (mth && mth[1]) {
              Iframe.show({
                url: mth[1],
                onBack: function onBack() {
                  Controller.toggle('console-body');
                }
              });
            }
          });
        }
        scroll_body.append(item);
      });
    }
    Controller.add('console-body', {
      toggle: function toggle() {
        Controller.collectionSet(scroll_body.render());
        Controller.collectionFocus(false, scroll_body.render());
      },
      up: function up() {
        if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('console-tabs');
      },
      down: function down() {
        Navigator.move('down');
      },
      back: back
    });
    Controller.toggle('console-body');
  }
  function tab(name, lines) {
    var elem = $('<div class="console__tab selector" data-name="' + Utils$2.hash(name) + '">' + Utils$2.shortText(name, 10) + ' - <span>' + lines.length + '</span></div>');
    elem.on('hover:enter', function () {
      show(name);
      last_tab = name;
    }).on('hover:focus', function (e) {
      scroll_tabs.update($(e.target));
    });
    scroll_tabs.append(elem);
    if (!last_tab) last_tab = name;
    if (last_tab == name) show(name);
  }
  function build() {
    html$2 = Template.get('console');
    scroll_body = new create$f({
      over: true,
      mask: true
    });
    scroll_tabs = new create$f({
      horizontal: true
    });
    for (var i in items) tab(i, items[i]);
    html$2.find('.console__tabs').append(HeadBackward(Lang.translate('menu_console'))).append(scroll_tabs.render());
    html$2.find('.console__body').append(scroll_body.render());
    scroll_body.height(html$2.find('.console__tabs'));
    $('body').append(html$2);
  }
  function add(name, message) {
    if (!items[name]) items[name] = [];
    var where = items[name];
    var time = Utils$2.parseTime(Date.now()).time;
    try {
      Arrays.insert(where, 0, '<div class="console__line selector"><span class="console__time">' + time + '</span> - <span>' + message + '</span></div>');
    } catch (e) {
      Arrays.insert(where, 0, '<div class="console__line selector"><span class="console__time">' + time + '</span> - <span>Failed to print line</span></div>');
    }
    if (where.length > 50) where.pop();
  }
  function escapeHtml(text) {
    return text.replace(/&/g, "&amp;").replace(/</g, "&lt;").replace(/>/g, "&gt;").replace(/"/g, "&quot;").replace(/'/g, "&#039;");
  }
  function decode(arr) {
    if (Arrays.isObject(arr) || Arrays.isArray(arr)) {
      try {
        arr = JSON.stringify(arr);
      } catch (e) {
        arr = '[noview]';
      }
    } else if (typeof arr === 'string' || typeof arr === 'number' || typeof arr === 'boolean') {
      arr = escapeHtml(arr + '');
    } else {
      var a = [];
      for (var i in arr) {
        a.push(i + ': ' + arr[i]);
      }
      arr = JSON.stringify(a);
    }
    arr = Utils$2.shortText(arr, 600);
    return arr;
  }
  function follow() {
    var _get_logger_function = function _get_logger_function(func, color) {
      var prefix = arguments.length > 2 && arguments[2] !== undefined ? arguments[2] : '';
      return function () {
        var msgs = [];
        var mcon = [];
        while (arguments.length) {
          var arr = [].shift.call(arguments);
          msgs.push(decode(arr));
          mcon.push(arr);
        }
        var name = msgs[0];
        if (msgs.length < 2) {
          name = 'Other';
        } else {
          var spanColor = color || Utils$2.stringToHslColor(msgs[0], 50, 65);
          prefix = prefix ? ' ' + prefix : '';
          msgs[0] = '<span style="color: ' + spanColor + '">' + msgs[0] + prefix + '</span>';
          if (mcon.length > 0) {
            mcon[0] = '[' + mcon[0] + ']';
          }
        }
        add(name, msgs.join(' '));
        func.apply(console, mcon);
      };
    };
    console.log = _get_logger_function(console.log, null);
    console.error = _get_logger_function(console.error, 'red', 'ERROR');
    console.warn = _get_logger_function(console.warn, 'yellow', 'WARNING');
    window.addEventListener("error", function (e) {
      var welcome = $('.welcome');
      if (welcome.length) {
        welcome.fadeOut(500, function () {
          Noty.show('Error: ' + (e.error || e).message + '<br><br>' + stack, {
            time: 8000
          });
        });
      }
      var stack = (e.error && e.error.stack ? e.error.stack : e.stack || '').split("\n").join('<br>');
      var message = typeof e.error == 'string' ? e.error : (e.error || e).message;
      add('Script', message + '<br><br>' + stack);
      if (!(stack.indexOf('resetTopStyle') >= 0 || stack.indexOf('Blocked a frame') >= 0)) Noty.show('Error: ' + message + '<br><br>' + stack, {
        time: 8000
      });
    });
  }
  var Console = {
    init: init$k
  };

  function create$1() {
    var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
    var html = Template.get('files', params.movie);
    html.addClass('layer--width');
    if (params.movie.id) {
      html.find('.selector').on('hover:enter', function () {
        if (Activity$1.all().length > 1) {
          Activity$1.back();
        } else {
          Activity$1.push({
            url: params.movie.url,
            component: 'full',
            id: params.movie.id,
            method: params.movie.name ? 'tv' : 'movie',
            card: params.movie,
            source: params.movie.source
          });
        }
      });
    } else {
      html.find('.selector').removeClass('selector');
    }
    this.render = function () {
      return html;
    };
    this.append = function (add) {
      html.find('.files__body').append(add);
    };
    this.destroy = function () {
      html.remove();
      html = null;
    };
    this.clear = function () {
      html.find('.files__body').empty();
    };
  }

  function create() {
    var html;
    this.create = function () {
      html = Template.get('info');
    };
    this.update = function (data) {
      var nofavorite = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : false;
      var create = ((data.release_date || data.first_air_date || '0000') + '').slice(0, 4);
      var vote = parseFloat((data.vote_average || 0) + '').toFixed(1);
      html.find('.info__title').text(data.title);
      html.find('.info__title-original').text((create == '0000' ? '' : create + ' - ') + (data.original_title || ''));
      html.find('.info__vote span').text(vote);
      html.find('.info__vote').toggleClass('hide', !(vote > 0));
      html.find('.info__icon').removeClass('active');
      if (!nofavorite) {
        var status = Favorite.check(data);
        $('.icon--book', html).toggleClass('active', status.book);
        $('.icon--like', html).toggleClass('active', status.like);
        $('.icon--wath', html).toggleClass('active', status.wath);
      }
      html.find('.info__right').toggleClass('hide', nofavorite);
    };
    this.render = function () {
      return html;
    };
    this.empty = function () {
      this.update({
        title: Lang.translate('more'),
        original_title: Lang.translate('more_results'),
        vote_average: 0
      }, true);
    };
    this.destroy = function () {
      html.remove();
      html = null;
    };
  }

  var VideoQuality = {
    get: function get() {
      return '';
    },
    add: function add() {
      return false;
    }
  };

  /*
  let tizen = {
      ApplicationControlData: ()=>{},
      ApplicationControl: ()=>{},
      application:{
          launchAppControl: ()=>{}
      }
  }
  */

  /**
   * Запуск
   */
  function init$j() {
    if (typeof tizen !== 'undefined') {
      setInterval(lauchPick, 1000 * 60 * 10);
      lauchPick();
      deepLink();
      window.addEventListener('appcontrol', deepLink);
      try {
        console.log('Tizen', 'current id', tizen.application.getCurrentApplication().appInfo.id);
      } catch (e) {}
    }
  }

  /**
   * Установить данные
   * @param {{sections:[{title:string,position:integer,tiles:[{cardToTile}]}]}} data 
   */
  function setPick(data) {
    var service_id = tizen.application.getCurrentApplication().appInfo.id.split('.')[0] + '.service';
    var controll_data = new tizen.ApplicationControlData('caller', ['ForegroundApp', JSON.stringify(data)]);
    var controll_app = new tizen.ApplicationControl('http://tizen.org/appcontrol/operation/pick', null, 'image/*', null, [controll_data]);
    tizen.application.launchAppControl(controll_app, service_id, function () {
      console.log('Tizen', 'service', 'launch success');
    }, function (error) {
      console.log('Tizen', 'service', 'error:', JSON.stringify(error));
    });
  }

  /**
   * Карточку в данные
   * @param {{title:string, name:string, poster_path:string, release_date:string}} card - карточка
   * @param {string} subtitle 
   * @returns {{title:string, subtitle:string, image_ratio:string, image_url:string, action_data:string, is_playable:boolean}}
   */
  function cardToTile(card, subtitle) {
    var relise = ((card.release_date || card.first_air_date || '0000') + '').slice(0, 4);
    var elem = {
      title: card.title || card.name,
      subtitle: subtitle || relise,
      image_ratio: '1by1',
      image_url: card.poster ? card.poster : card.img ? card.img : 'http://imagetmdb.com/t/p/w300/' + card.poster_path,
      action_data: JSON.stringify(card),
      is_playable: false
    };
    return elem;
  }

  /**
   * Строим данные
   */
  function lauchPick() {
    var data = {
      sections: []
    };
    console.log('Tizen', 'start pick');
    var status = new status$2(3);
    status.onComplite = function (result) {
      if (result.popular) data.sections.push(result.popular);
      if (result.continues) data.sections.push(result.continues);
      if (result.notice) data.sections.push(result.notice);
      console.log('Tizen', 'set sections', data.sections.length);
      if (data.sections.length) setPick(data);
    };
    Account.notice(function (notices) {
      var new_notices = notices.filter(function (n) {
        return !n.viewed;
      }).slice(0, 3);
      if (new_notices.length) {
        var section = {
          title: Lang.translate('title_notice'),
          tiles: [],
          position: 0
        };
        new_notices.forEach(function (noty) {
          var info = JSON.parse(noty.data);
          section.tiles.push(cardToTile(info.card, info.type == 'new_episode' ? Lang.translate('notice_new_episode') : Lang.translate('notice_in_quality')));
        });
        status.append('notice', section);
      } else status.error();
    });
    TMDB.get('movie/popular', {}, function (result) {
      if (result.results.length) {
        var section = {
          title: Lang.translate('title_popular_movie'),
          position: 2,
          tiles: result.results.slice(0, 10).map(function (c) {
            return cardToTile(c);
          })
        };
        status.append('popular', section);
      } else status.error();
    }, status.error.bind(status));
    var continues = Favorite.continues('tv');
    if (continues.length) {
      var section = {
        title: Lang.translate('title_continue'),
        position: 1,
        tiles: continues.slice(0, 7).map(function (c) {
          return cardToTile(c);
        })
      };
      status.append('continues', section);
    } else status.error();
  }

  /**
   * Перехват запроса на открытие карточки
   */
  function deepLink() {
    var requestedAppControl = tizen.application.getCurrentApplication().getRequestedAppControl();
    if (requestedAppControl) {
      var appControlData = requestedAppControl.appControl.data;
      for (var i = 0; i < appControlData.length; i++) {
        if (appControlData[i].key == 'PAYLOAD') {
          var action_data = JSON.parse(appControlData[i].value[0]).values;
          var json = JSON.parse(action_data);
          window.start_deep_link = {
            url: json.url,
            component: 'full',
            id: json.id,
            method: json.name ? 'tv' : 'movie',
            card: json,
            source: json.source || 'tmdb'
          };
          if (window.appready) {
            Activity$1.push(window.start_deep_link);
          }
          console.log('Tizen', 'open deep link', window.start_deep_link);
        }
      }
    }
  }
  var Tizen = {
    init: init$j
  };

function _0x1688(n,e){var t=_0x1f13();return(_0x1688=function(n,e){return t[n-=273]})(n,e)}function NewsCardInfo(){for(var u,d,h=_0x1688,c={sKlcQ:h(702)+h(986)+h(766)+"8",AkNrt:function(n,e){return n===e},vZZDY:h(885)+"e",xtbRn:h(379),nvwYL:h(941),LWnPp:h(805)+h(725),phirh:h(934)+h(845)+h(544),yVrEn:h(934)+h(811)+h(449)+h(406)+h(569)+h(768)+h(321)+h(295)+"n",DGCWF:h(934)+h(814)+h(794),wQUCp:h(302)+"t",saKNn:h(934)+h(754)+"ad",ZxDJj:h(511),JqIvK:function(n,e){return n||e},FtYGG:h(973),onWHR:h(720)+h(275)+h(659)+h(632),YmSjJ:h(934)+h(811)+"ta",Wcewt:h(508),IMTMh:function(n,e){return e<n},fWpnX:h(691)+h(670),gbrJR:function(n,e){return e<n},vAYNV:function(n,e){return n+e},vgYOd:h(381)+"de",Nsery:function(n,e){return e<n},lvQoW:h(361),jQhxR:function(n,e){return n*e},NYIIg:function(n,e){return n(e)},MLWqi:h(934)+h(790)+h(732)+h(873),DwKyq:function(n,e){return n+e},BxAwL:h(514)+h(288)+h(965)+h(492)+h(895)+'">',giHax:h(297),OjxxW:h(795)+h(675)+h(671)+h(683)+h(301)+h(455),YzHaD:h(934)+h(845)+h(372)+h(482),YufAw:h(934)+h(389)+h(548),ldOjt:function(n,e){return n+e},iFOrn:h(514)+h(288)+h(559)+h(366)+h(957),WlwFi:h(964),LjSjD:function(n,e,t){return n(e,t)},OWAUx:function(n,e){return n(e)},HISgn:function(n,e){return n+e},rKHld:h(475),Gpdar:h(875),DXldK:h(554)+h(779)+h(484)+h(686)+h(280)+h(520),VxWzC:h(371),EhnCR:h(926)+h(945),bQJUw:h(701),HnglL:function(n,e){return n<e},kTVuD:function(n,e){return e<n},xtqFW:h(595),KmlmL:h(336),xAjmv:h(915),KIDlU:h(810),RCtsM:h(339),TMYtF:h(934)+h(908)+"go",pGPXZ:h(318),tJlUh:h(721),lTNZd:h(539)+h(882)+h(714),GhgtB:function(n,e){return n!==e},WCHvx:h(536),TrLUD:function(n){return n()}},n=c[h(958)][h(522)]("|"),e=0;;){switch(n[e++]){case"0":var o={};continue;case"1":this[h(715)]=function(){var t=h;d=Template[t(338)](p[t(968)]),Storage[t(391)][t(913)](p[t(708)],function(n){var e=t;p[e(881)](n[e(467)],p[e(870)])&&(r=n[e(889)])})};continue;case"2":continue;case"3":var p={wSuNR:function(n,e){return c[h(783)](n,e)},rIGMS:c[h(331)],SEIKF:c[h(996)],yDsYs:c[h(765)],UbAzB:c[h(303)],dKsxw:c[h(546)],SLGPM:c[h(954)],TCFgZ:c[h(279)],YdjUb:c[h(363)],jmfKX:c[h(774)],WnyRd:c[h(844)],Jmbsy:function(n,e){return c[h(311)](n,e)},pMXKe:c[h(674)],mdxUY:c[h(679)],UhOPq:c[h(274)],potQB:c[h(622)],jWNZs:function(n,e){return c[h(319)](n,e)},RtCKx:c[h(736)],ujnZp:function(n,e){return c[h(470)](n,e)},NOXUU:function(n,e){return c[h(319)](n,e)},EDWlK:function(n,e){return c[h(689)](n,e)},TPgbd:c[h(837)],vcThA:function(n,e){return c[h(476)](n,e)},BuJYF:c[h(352)],naFgk:function(n,e){return c[h(340)](n,e)},IvFKt:function(n,e){return c[h(857)](n,e)},XyrXc:function(n,e){return c[h(689)](n,e)},rhYdu:c[h(552)],xWoyK:function(n,e){return c[h(537)](n,e)},kLUPk:c[h(592)],xeBmH:c[h(655)],LVKXi:function(n,e){return c[h(857)](n,e)},FODFh:c[h(576)],keONO:c[h(854)],uGHpd:function(n,e){return c[h(470)](n,e)},rhkzZ:c[h(660)],Babwf:function(n,e){return c[h(710)](n,e)},iEdQl:c[h(843)],jNUpu:c[h(726)],OkFFf:function(n,e,t){return c[h(304)](n,e,t)},GtlrB:function(n,e){return c[h(442)](n,e)},eaRaa:function(n,e){return c[h(432)](n,e)},SVHwf:function(n,e){return c[h(710)](n,e)},wNlJg:c[h(555)],UaVBK:c[h(745)],McQCK:c[h(704)],kmiDW:c[h(469)],jFmLb:c[h(753)],uAzaH:c[h(995)],hqhpF:function(n,e){return c[h(454)](n,e)},ZdEdj:function(n,e){return c[h(479)](n,e)},FOeRv:c[h(858)],rJFGq:c[h(322)],UcwUY:c[h(821)],oQDpT:c[h(415)],suHte:c[h(639)],YGYHa:c[h(616)],XObFq:c[h(459)],pSfeT:c[h(707)],BkARa:c[h(505)],CakYK:function(n,e){return c[h(342)](n,e)},DCyjq:c[h(424)],feCzC:function(n){return c[h(633)](n)}};continue;case"4":this[h(308)]=function(){var e=h,t=p[e(764)](_asyncToGenerator,p[e(438)](_regeneratorRuntime)[e(346)](function n(t){var c,i,r,u,o,a,s,f,l=e,v={Lzwjw:p[l(657)],dCNgw:p[l(495)],AcLtY:p[l(613)],lrjZH:function(n,e){return p[l(535)](n,e)},RYMKY:function(n,e){return p[l(561)](n,e)},KAVWn:function(n,e){return p[l(717)](n,e)},xrBmT:p[l(936)],gmTFY:p[l(919)],WWRxW:p[l(558)],gXMgD:p[l(604)],NsMBJ:p[l(825)],slHal:p[l(865)],LPCzY:p[l(642)],KPynB:p[l(787)],GCyqz:p[l(923)],emjRK:p[l(433)],ixUIB:p[l(847)],zSuSu:function(n,e){return p[l(712)](n,e)},uLcIv:p[l(654)]};return p[l(438)](_regeneratorRuntime)[l(526)](function(n){for(var e=l;;)switch(n[e(924)]=n[e(501)]){case 0:if(Storage[e(799)](v[e(756)])){n[e(501)]=2;break}return n[e(636)](v[e(907)]);case 2:c=Storage[e(338)](v[e(867)],"ru"),i=[c,"en"],["en","ru"][e(329)](c)||i[e(581)]("ru"),r=!1,u=0,o=i;case 7:if(v[e(557)](u,o[e(506)]))return a=o[u],n[e(924)]=9,n[e(501)]=12,Api[e(728)+e(625)](t,a);n[e(501)]=46;break;case 12:if(!((s=n[e(466)])&&s[e(570)]&&v[e(651)](s[e(570)][e(506)],0))){n[e(501)]=36;break}s=v[e(566)](_createForOfIteratorHelper,s[e(570)]),n[e(924)]=15,s.s();case 17:if((f=s.n())[e(608)])n[e(501)]=28;else{if((f=f[e(889)])[e(761)][e(884)](v[e(819)])||f[e(761)][e(884)](v[e(755)]))return f=Api[e(355)](f[e(761)],v[e(959)]),f=v[e(566)]($,v[e(932)])[e(380)](v[e(648)],f)[e(861)](v[e(747)]),d[e(772)](v[e(419)])[e(567)]()[e(600)](f),r=!0,logoLang=a,n[e(636)](v[e(687)],28);n[e(501)]=26}break;case 26:n[e(501)]=17;break;case 28:n[e(501)]=33;break;case 30:n[e(924)]=30,n.t0=n[v[e(307)]](15),s.e(n.t0);case 33:return n[e(924)]=33,s.f(),n[e(503)](33);case 36:n[e(501)]=41;break;case 38:n[e(924)]=38,n.t1=n[v[e(307)]](9),console[e(447)](v[e(405)],n.t1);case 41:if(r)return n[e(636)](v[e(687)],46);n[e(501)]=43;break;case 43:u++,n[e(501)]=7;break;case 46:r?d[e(772)](v[e(851)])[e(822)](v[e(421)](c,i[0])):(d[e(772)](v[e(419)])[e(567)](),d[e(772)](v[e(851)])[e(540)]());case 47:case v[e(939)]:return n[e(807)]()}},n,null,[[9,38],[15,30,33,36]])}));return function(n){return t[e(839)](this,arguments)}}();continue;case"5":var a=new create$e;continue;case"6":this[h(931)]=function(n){for(var e,t,c,i=h,r=p[i(690)][i(522)]("|"),u=0;;){switch(r[u++]){case"0":d[i(772)](p[i(752)])[i(953)](a[i(818)](p[i(749)]));continue;case"1":p[i(937)](n[i(403)+i(688)],0)||n[i(713)+i(991)]?(e=Storage[i(338)](p[i(626)],"{}")[Utils$2[i(883)](n[i(834)+i(510)]||n[i(467)])])&&(t=Utils$2[i(883)]([e[i(582)],p[i(305)](e[i(582)],10)?":":"",e[i(628)],n[i(834)+i(510)]||n[i(467)]][i(818)]("")),t=Timeline$1[i(597)](t),p[i(448)](t[i(602)],0))&&(l={ep:{episode_number:e[i(628)],season_number:e[i(582)],name:p[i(912)](p[i(912)](Lang[i(998)](p[i(944)])," "),e[i(628)])},view:t}):(e=Utils$2[i(883)](n[i(834)+i(510)]||n[i(467)]),t=Timeline$1[i(597)](e),p[i(453)](t[i(602)],0)&&(l={ep:{episode_number:null,name:n[i(362)]||n[i(834)+i(510)]||n[i(467)]},view:t}));continue;case"2":d[i(772)](p[i(685)])[i(567)]()[i(600)](v[i(818)](", "));continue;case"3":p[i(305)](f[i(506)],0)&&v[i(581)](f[i(818)](", "));continue;case"4":p[i(912)](n[i(586)+"te"]||n[i(713)+i(991)]||p[i(961)],"")[i(680)](0,4);continue;case"5":var o=Api[i(378)][i(877)][i(278)](n);continue;case"6":var a=[];continue;case"7":n[i(948)]&&a[i(581)](Utils$2[i(700)+i(523)](p[i(918)](n[i(948)],60),!0));continue;case"8":n[i(846)]&&p[i(937)](n[i(846)][i(506)],0)&&a[i(581)](n[i(846)][i(886)](function(n){var e=i;return Utils$2[e(698)+e(751)+"r"](n[e(467)])})[i(818)](p[i(749)]));continue;case"9":var s=p[i(717)](parseFloat,p[i(803)](n[i(456)+"ge"]||0,""))[i(880)](1);continue;case"10":o&&d[i(772)](p[i(528)])[i(953)](p[i(912)](p[i(382)](p[i(971)],o),p[i(516)]));continue;case"11":var f=Api[i(378)][i(877)][i(499)+i(550)](n);continue;case"12":l&&l[i(597)]&&p[i(937)](l[i(597)][i(602)],0)&&Timeline$1[i(827)]&&(c=Timeline$1[i(827)](l[i(597)]," ")[0],p[i(291)]($,d)[i(772)](p[i(752)])[i(600)](p[i(394)])[i(772)](p[i(545)])[i(600)](c));continue;case"13":var l=null;continue;case"14":var v=[];continue;case"15":p[i(333)](s,0)&&d[i(772)](p[i(879)])[i(953)](p[i(382)](p[i(665)](p[i(502)],s),p[i(516)]));continue;case"16":this[i(308)](n);continue}break}};continue;case"7":this[h(673)]=function(n){for(var e=h,t=p[e(828)][e(522)]("|"),c=0;;){switch(t[c++]){case"0":u=p[e(426)](setTimeout,function(){var t=e;a[t(530)](),a[t(464)](5e3),a[t(897)](i,function(n){var e=t;o[i]=n,r[e(931)](n)})},300);continue;case"1":p[e(764)](clearTimeout,u);continue;case"2":if(o[i])return this[e(931)](o[i]);continue;case"3":var i=TMDB$1[e(407)](p[e(803)](p[e(803)](p[e(392)](p[e(392)](p[e(409)](p[e(912)](n[e(467)]?"tv":p[e(345)],"/"),n.id),p[e(738)]),TMDB$1[e(856)]()),p[e(521)]),Storage[e(338)](p[e(613)])));continue;case"4":var r=this;continue}break}};continue;case"8":this[h(802)]=function(){d[h(422)](),o={},d=null};continue;case"9":var r=Storage[h(799)](c[h(331)]);continue;case"10":continue;case"11":this[h(568)]=function(){return d};continue;case"12":this[h(567)]=function(){};continue;case"13":this[h(489)]=function(n){for(var e=h,t=p[e(627)][e(522)]("|"),c=0;;){switch(t[c++]){case"0":Background[e(941)](Api[e(355)](n[e(284)+e(826)],i));continue;case"1":d[e(772)](p[e(847)])[e(947)](n[e(362)]);continue;case"2":d[e(772)](p[e(571)])[e(567)]();continue;case"3":d[e(772)](p[e(357)])[e(947)](n[e(997)]||Lang[e(998)](p[e(350)]));continue;case"4":d[e(772)](p[e(685)])[e(947)](p[e(809)]);continue;case"5":var i=p[e(696)](r,p[e(558)]);continue;case"6":this[e(673)](n);continue}break}};continue}break}}function _0x1f13(){var n=["XjrFl","rIGMS","/div>",'v class="s',"ion","6|1","?api_key=","next_wait","tmdb","isSupporte","rhkzZ","toFixed","wSuNR","рузки лого","hash","endsWith","poster_siz","map","EFRWY","loaded","value","ready","0|4","iLPtZ","loadNext","0|3","tion-value","едения:","silent","ls/hls.js","full-start","vRzWv","xutVV","XMVAd","MvACd","nKgun","|1|5|10|6|","fHoaI","dCNgw","s-info__lo","GpFcP","content","KVwPd","EDWlK","follow","0|7|4|2","<img>","tpuLe","bxexD","naFgk","rJFGq","duration","GXeEX","aALqu","pSfeT","prev","wlBfp","card_inter","LDqEz","DIAsa","onFocusMor","bind","draw","gXMgD",'="empty__f',".news-card","Трейлер оч","FOeRv","jWNZs","ended","uLcIv","dFBlE","change","bFkBc","2|0|4","TPgbd","fice_logo",'r">',"text","runtime","Hls","onBlur","xagMp","3|2|0|5|4|","html","yVrEn","qHLVs","GpKjB",'e">',"sKlcQ","WWRxW","inVXt","BuJYF","ktqSV",'ooter"><di',"4|1|3|2|0","ds-info__a","hover:ente","QCFWE","SEIKF","gPzCo","SGuhA","kLUPk","|7|29|12|8","w300","onerror","APMCd","source","MhGos","tQGNh","ALvPv","data","bKftP","0|5|2|17|1","LPnnL","cancelRequ","tYgRJ","|9|1|13|6|","gcdTY","OjuJe","IRWNr","SIUVw","date","onUp","onEnter","move","bQJUw","xtbRn","overview","translate","imple-butt","YmSjJ","1|5|3|10|1","VYkZJ","dyaQW","parsePG","DGCWF","ase_dates&","HwRXL","message","PfaFO","backdrop_p","0|6|10|1|2","DKcLl","sdsrm",'="news-car',"on selecto","feDVu","LVKXi","KToCV","32|6|15|23","SzFJN","restrictio","ищен","</div>","1|4|3|0|5|","jSBFH","OzJcS",'etails"></',"full_notex","LWnPp","LjSjD","ujnZp","onWheel","GCyqz","loadLogo","123507zdiytW","appendChil","JqIvK","object","Ошибка при","change_sou","1|3|12|11|","need_refre","n/vnd.appl","break","IMTMh","log","info__age-","KmlmL","app_digita","loadSource","12|11|13|8","trailer"," очистке в","xhCLp","includes","indexOf","vZZDY","lNHpx","uGHpd","RYaBa","onMore",".svg","QkMbB","get","movie-logo","jQhxR","UvRSS","GhgtB","url","5346909KLKkGK","wNlJg","mark","BHOoC","luyca","wgKnQ","YdjUb",'ds"><img c',"lvQoW","loadedmeta","Xnyny","img","ABKPQ","TCFgZ","MNFZd","omxsO","rt__traile","0000","title","wQUCp","onDown","down","ating-valu","addEventLi","loadeddata","fsvzG","w1280","language","meline-det","ONIvj","Ошибка авт","t__backgro","hTLLW",'ckground">',"sources","news_cards","attr","full_episo","xWoyK","udqUF","|3|1|30|34","csuSJ","rce_on_cub","MucjD","mhCfs","s-info__ra","fHfpP","listener","eaRaa","FOqSU","FODFh","CcPXy","allow","background","mouse","back","und","[Trailer] ","DsezO","number_of_","Cxuzk","emjRK","ards-info_","api","lXohQ","SVHwf","HikaN","rnTDQ","loadTraile","PTWEM","card_views","KIDlU","9|15|3|14|","31|21|2|18","6577074oqsgVh","LPCzY","nIVDH","zSuSu","remove","ZBaYP","WCHvx","1718945JHcazQ","OkFFf","XaWKl","LYZWJ","CxnWK","ZoeSH","canmove","HISgn","BkARa","WEoYn",'lass="full',"RhdCX","<source>","feCzC","./vender/h","vapHa","own","OWAUx","идео:","currentTim","1|16|9|4|1","9|14|6|5|0","error","NOXUU","ta,.news-c","cardClass","CxDXL","TLpjw","vcThA","HnglL","span>","vote_avera","rjpWt","owmQT","pGPXZ","attachMedi","vLnkU","|5|8|7|4|9","JUJoW","timeout","miXIH","sent","name","GnZrV","VxWzC","gbrJR","|9|5|27|22","zKyPb","applicatio","canRefresh","movie","Nsery","YGgHi","|19|33|35|","kTVuD","_type","UIgNa","ails","DPFWH","content_ra","HCieP","uYjaR","25|36|11|2","qlIGt","update","ent","FxZfQ","ge-restric","RBwjA","FCZhI","uAzaH","head","Qhkic","FjGyo","parseCount","w780","next","iEdQl","finish","cbMkG","lTNZd","length","EkPQt"," • ","ohplt","itle","---","5|7|3|6|1|","lpoCX","<div class","lVaYS","xeBmH","backward",".full-star","Background","language=","McQCK","split","ime","SpYHL","|2|7","wrap","|37|13|24|","rhYdu","muted","clear","6991206kvKKdo","FaLaV","YDlum","bqpTV","hqhpF","end","DwKyq","hls","Ошибка заг","show","WvthD","xeSyR","menu","tle","keONO","phirh","aBdYh","ting","ZHfTR","ries","xqiPT","MLWqi","</div></di","&append_to","rKHld","build","lrjZH","pMXKe","ds-info__r","bckIC","ZdEdj","ARSED","eyJDk","createElem","ZNwcK","KAVWn","empty","render","_rating,.n","logos","SLGPM","YTWyN","TwXJH","MLQLi","5393976QYIHWM","OjxxW","YsyhO","iLcjF","RdqEM","aqqql","push","season","nodym","onBack","pause","release_da","hxwbc","12|15|8|14","volume","start","hwfhB","BxAwL","zlkjS","Gngwq",".png","4|7|3|6|0","view","cVkoO","qgXMC","append","pXaOP","percent","sMTZP","UcwUY","zilje","nqNPy","left","done","wyNqs","HPLXt","CaDkF","zGmnt","kmiDW","removeClas","-start__ba","TMYtF","ldsGE","uXnEb","LHgFY","kinopoisk_","xVsmL","Wcewt","each","NWVuE","gos","RtCKx","UbAzB","episode","clearTrail","fbdjN","kSzeL","|2|0|12|16","TrLUD","LYuJL","rfyKg","abrupt","1|4|7|3|2|","QNbdE","RCtsM","gFDYb","glKLD","YGYHa","pbtAk","onEnd","refresh","onHover","jjbdb","NsMBJ","XFhig","rJkDs","RYMKY","iler","dEuQR","DCyjq","giHax","original","jFmLb","dYlkD","5|8|7|13|1","YufAw","KoSDQ","irplay","then","x-webkit-a","Babwf","gtoRy","yjMbp","GsDoH","MANIFEST_P","ched_last","rds-info__","iSjkp","load","FtYGG",'s="news-ca',"e.mpegurl","qAQTN","HyAzo","onWHR","slice","WdQMD","IQNDu","timeline-d","min","jmfKX","tings,rele","KPynB","seasons","vAYNV","mdxUY","online_wat","xkntE","EHtQK","onFocus","odXWN","Jmbsy","forEach","capitalize","WwPdx","secondsToT","return","3|10|2|5|0","qNuJs","DXldK","zJMCQ","activity","tJlUh","yDsYs","LeOpx","ldOjt","XzMZQ","CakYK","first_air_","типа:","create","NBAOT","IvFKt",'="full-sta',"Hfvda","4|9|14|6|1","catch","play","UyXRX","EabAM","0|6","WlwFi","JVemL","getMovieLo","jfeGb","XMvnm","right","e-restrict","bJqQi","onload","navigation","fWpnX","овоспроизв","UaVBK","IcMqk","vaqNP","__trailer-","5|2|8|9|1|","w200","t__trailer","Gpdar",".selector","slHal","IfFZl","potQB","GimJT","FirstLette","UhOPq","EhnCR","s-info__he","gmTFY","Lzwjw","video/mp4","EJMnn","w500","loadStatic","file_path","NiuIN","wxmvm","GtlrB","nvwYL","7|4|11|12|","SAhOh","ews-cards-","NeWeo","8|10|4|13|","IeYOb","find","rQVtf","saKNn","IbPBY","xPjQJ","YkwrO","3|1|2|0|4","_response=","|1|6|7|13|","SkrIS","Events","AkNrt","nomore","osqSi","CVniW","XObFq","add","|10|14|16|","s-info__ag","0|5|6","stener","TltEp","scription","<span clas","5qeDwVM","lBlgM","6|20|28|17","field","PMIaX","minus","destroy","XyrXc","script","4|2|1|3|5|","3688qAAnds","stop","PwEXf","WnyRd","src","s-info__me","onToggle","visible","s-info__de","ecAWD","loader","UIgEb","join","xrBmT","zeKTl","xAjmv","toggle","qvysd","canPlayTyp","oQDpT","ath","details","jNUpu","igYpE","OcfSi","2143842dgkxhH","uuFzq","string","original_t","QLDwU","WwXaQ","vgYOd","set","apply","eARBQ","video","undefined","iFOrn","ZxDJj","s-info__ti","genres","dKsxw","kxlFp","replace",'r"></div><',"ixUIB","HTWOh","poster_tra","YzHaD","<video>","key","NYIIg","xtqFW","iAKBx","_trailer","addClass","qJucj","cAuFR","kDzDB","suHte","KfxKP","AcLtY","ests"];return(_0x1f13=function(){return n})()}function NewsCards(o){for(var a,r,s,d=_0x1688,c={luyca:d(417)+d(789)+d(293)+d(384)+d(972)+d(471)+d(527)+d(487)+d(798)+d(478)+d(891),xVsmL:function(n,e){return n(e)},XMvnm:d(514)+d(288)+d(351)+d(435)+d(615)+d(377)+d(514)+d(718)+d(360)+d(850)+d(871),JUJoW:function(n,e){return n==e},ZBaYP:d(414)+d(480),fbdjN:d(597),vLnkU:function(n,e){return n==e},hTLLW:d(735)+d(480),lVaYS:d(398),RBwjA:function(n,e){return e<=n},VYkZJ:d(518)+d(375)+d(400),hwfhB:d(885)+"e",CaDkF:d(518)+d(744),MhGos:function(n,e){return n===e},FOqSU:d(853)+d(652),xkntE:function(n,e){return n===e},qvysd:function(n,e,t){return n(e,t)},lBlgM:d(941),fHoaI:d(976),hxwbc:d(877),xqiPT:d(952)+d(874),GsDoH:function(n,e){return n==e},QLDwU:function(n,e){return n+e},NeWeo:function(n,e){return n+e},GpFcP:d(514)+d(933)+d(963)+d(872)+d(273)+d(289)+d(946),LYuJL:d(314)+d(386),UIgNa:d(553)+"v>",PfaFO:d(746),IeYOb:d(966)+"r",WdQMD:function(n,e){return e<n},CxDXL:d(285)+d(462)+"|3",XaWKl:d(742)+d(596),dFBlE:d(397)+d(860),kDzDB:d(401)+d(374)+d(737)+d(896),NiuIN:d(721),Gngwq:d(473)+d(317)+d(676),jjbdb:d(353)+d(980),IRWNr:d(888),MucjD:function(n,e){return n-e},gPzCo:function(n,e){return n===e},ldsGE:d(416)+d(325)+d(905)+d(914),KoSDQ:d(938),mhCfs:d(447),IbPBY:d(585),zGmnt:d(368),WvthD:d(664)+d(662),EHtQK:d(396),iLcjF:d(842),UyXRX:d(804),NWVuE:d(439)+d(898),jfeGb:d(437),cAuFR:d(757),rJkDs:d(312),rnTDQ:d(833),KToCV:d(855),xagMp:d(899)+d(741)+d(841),HTWOh:function(n,e){return n===e},kSzeL:function(n,e){return n!==e},DsezO:d(401)+d(313)+d(327)+d(443),odXWN:d(512)+d(943),dEuQR:function(n,e){return n&&e},SzFJN:function(n,e,t){return n(e,t)},CxnWK:d(401)+d(935)+d(296),DKcLl:function(n,e){return n(e)},LPnnL:d(841),XjrFl:d(298)+"2",bFkBc:function(n,e,t){return n(e,t)},TLpjw:d(637)+d(791),zKyPb:d(743),WwPdx:d(500),qAQTN:d(973),gtoRy:d(370),qJucj:d(759),GimJT:d(656),gcdTY:function(n,e){return n===e},KVwPd:function(n,e,t){return n(e,t)},kxlFp:d(588)+d(780)+d(982)+d(445)+d(894),tYgRJ:d(778),PwEXf:function(n,e){return n+e},WwXaQ:function(n,e){return n<e},xeSyR:d(496),glKLD:d(365),HyAzo:d(607),Qhkic:d(543),TwXJH:d(731),WEoYn:d(910),GpKjB:d(770)+d(315)+d(446)+d(525),feDVu:function(n,e){return n(e)},uYjaR:function(n,e){return n(e)}},n=c[d(348)][d(522)]("|"),e=0;;){switch(n[e++]){case"0":this[d(568)]=function(){return u};continue;case"1":continue;case"2":var f=new create$f({mask:!0,over:!0,scroll_by_item:!0});continue;case"3":var l="";continue;case"4":this[d(802)]=function(){for(var n=d,e=x[n(820)][n(522)]("|"),t=0;;){switch(e[t++]){case"0":r=null;continue;case"1":x[n(618)](typeof Trailer,x[n(610)])&&Trailer[n(802)]&&Trailer[n(802)]();continue;case"2":T=null;continue;case"3":i[n(530)]();continue;case"4":x[n(900)](clearTimeout,a);continue;case"5":i=null;continue;case"6":w=null;continue;case"7":F=null;continue;case"8":x[n(359)](clearTimeout,v);continue;case"9":s&&s[n(802)]();continue;case"10":x[n(667)](clearTimeout,m);continue;case"11":f[n(802)]();continue;case"12":Arrays[n(802)](w);continue;case"13":this[n(629)+"er"]();continue;case"14":u[n(422)]();continue}break}};continue;case"5":this[d(581)]=function(){};continue;case"6":continue;case"7":var v=null;continue;case"8":this[d(567)]=function(){for(var n,e=d,t=x[e(356)][e(522)]("|"),c=0;;){switch(t[c++]){case"0":var i=new Empty;continue;case"1":this[e(706)][e(822)]();continue;case"2":x[e(682)](o[e(976)],x[e(793)])&&(n=x[e(420)]($,x[e(373)](x[e(483)](x[e(777)],Lang[e(998)](x[e(887)])),x[e(990)])))[e(772)](x[e(549)]).on(x[e(733)],function(){var n=e;Storage[n(838)](x[n(277)],x[n(793)]),Activity$1[n(849)]({source:x[n(793)]})});continue;case"3":continue;case"4":this[e(590)]=i[e(590)];continue;case"5":u[e(600)](i[e(568)](n));continue;case"6":this[e(706)][e(816)](!1);continue}break}};continue;case"9":this[d(893)]=function(){var t=d,c=this;this[t(501)]&&!this[t(876)]&&w[t(506)]&&(this[t(876)]=!0,this[t(501)](function(n){var e=t;c[e(876)]=!1,n[e(697)](c[e(600)][e(930)](c)),Layer[e(813)](w[x[e(483)](h,1)][e(568)](!0))},function(){c[t(876)]=!1}))};continue;case"10":var u=c[d(621)]($,c[d(730)]);continue;case"11":this[d(600)]=function(n){for(var t=d,e=x[t(832)][t(522)]("|"),c=0;;){switch(e[c++]){case"0":i[t(584)]=this[t(399)][t(930)](this);continue;case"1":var i=new create$l(n,{url:n[t(343)],card_small:!0,cardClass:n[t(450)],genres:o[t(846)],object:o,card_wide:!0,nomore:n[t(784)]});continue;case"2":this[t(335)]&&(i[t(335)]=this[t(335)][t(930)](this));continue;case"3":w[t(581)](i);continue;case"4":i[t(993)]=function(){u[t(629)+"er"]()};continue;case"5":i[t(812)]=function(){h=w[t(330)](i)};continue;case"6":i[t(715)]();continue;case"7":i[t(364)]=this[t(365)][t(930)](this);continue;case"8":if(n[t(890)])return;continue;case"9":i[t(929)+"e"]=s[t(567)][t(930)](s);continue;case"10":f[t(600)](i[t(568)]());continue;case"11":i[t(646)]=function(n){var e=t;s[e(489)](n),u[e(397)](n)};continue;case"12":var r={rjpWt:function(n,e){return x[t(955)](n,e)}};continue;case"13":i[t(992)]=this.up[t(930)](this);continue;case"14":n[t(890)]=!0;continue;case"15":var u=this;continue;case"16":i[t(950)]=function(){var n=t;r[n(457)](clearTimeout,v),u[n(629)+"er"]()};continue;case"17":i[t(694)]=function(n){var e=t;s[e(489)](n),u[e(397)](n)};continue}break}};continue;case"12":this[d(715)]=function(){var c=d,t={HCieP:function(n,e){return x[_0x1688(347)](n,e)},pbtAk:x[c(328)],ZNwcK:function(n,e){return x[c(739)](n,e)},ecAWD:x[c(709)],cVkoO:function(n,e){return x[c(960)](n,e)},aBdYh:function(n,e,t){return x[c(534)](n,e,t)},Xnyny:function(n,e){return x[c(458)](n,e)}},i=this;Storage[c(391)][c(913)](x[c(903)],function(n){var e=c;(t[e(485)](n[e(467)],t[e(643)])||t[e(565)](n[e(467)],t[e(815)]))&&(t[e(485)](n[e(467)],t[e(815)])&&(b=n[e(889)],T)&&i[e(760)+e(519)](T),!Storage[e(799)](t[e(643)])&&t[e(485)](n[e(467)],t[e(643)])&&(t[e(598)](clearTimeout,v),i[e(629)+"er"]()),t[e(485)](n[e(467)],t[e(643)]))&&(n[e(889)]?T&&(t[e(598)](clearTimeout,v),v=t[e(547)](setTimeout,function(){i[e(412)+"r"](T)},1e3)):(t[e(354)](clearTimeout,v),i[e(629)+"er"]()))})};continue;case"13":this[d(397)]=function(c){for(var i=d,n=x[i(491)][i(522)]("|"),e=0;;){switch(n[e++]){case"0":Storage[i(799)](x[i(928)])&&c.id&&(m=x[i(727)](setTimeout,function(){var e=i,t={csuSJ:function(n,e){return u[_0x1688(410)](n,e)}};u[e(410)](c,T)&&u[e(410)](c.id,F)&&(v=u[e(560)](setTimeout,function(){var n=e;t[n(385)](c,T)&&t[n(385)](c.id,F)&&r[n(412)+"r"](c)},800))},200));continue;case"1":if(x[i(430)](F,c.id))return;continue;case"2":var r=this;continue;case"3":F=c.id;continue;case"4":this[i(629)+"er"]();continue;case"5":var u={HikaN:function(n,e){return x[i(390)](n,e)},bckIC:function(n,e,t){return x[i(534)](n,e,t)}};continue;case"6":this[i(760)+i(519)](c);continue;case"7":T=c;continue;case"8":x[i(960)](clearTimeout,v);continue;case"9":x[i(960)](clearTimeout,m);continue}break}};continue;case"14":var h=0;continue;case"15":var p=c[d(463)](Storage[d(799)](c[d(423)]),c[d(630)])||c[d(461)](Storage[d(799)](c[d(376)]),c[d(515)]);continue;case"16":var g=c[d(493)](object$2[d(323)+"l"],166);continue;case"17":this[d(590)]=function(){var e=d,t={jSBFH:x[e(758)],zilje:x[e(337)],iSjkp:x[e(341)]},c=this;Controller[e(788)](x[e(840)],{link:this,toggle:function(){var n=e;if(c[n(706)][n(474)]())return!1;w[n(506)]&&w[h][n(822)]()},update:function(){},left:function(){var n=e;Navigator[n(431)](t[n(299)])?Navigator[n(994)](t[n(299)]):Controller[n(822)](t[n(605)])},right:function(){var n=e;Navigator[n(994)](t[n(672)])},up:function(){var n=e;Navigator[n(431)]("up")?Navigator[n(994)]("up"):Controller[n(822)](x[n(978)])},down:function(){var n=e;Navigator[n(431)](x[n(649)])&&Navigator[n(994)](x[n(649)])},back:this[e(399)]}),Controller[e(822)](x[e(840)])};continue;case"18":var w=[];continue;case"19":this[d(645)]=function(){var n=d;this[n(706)][n(816)](!0),this[n(706)][n(316)+"sh"]=!0};continue;case"20":this[d(365)]=function(){for(var n=d,e=x[n(572)][n(522)]("|"),t=0;;){switch(e[t++]){case"0":w[h][n(822)]();continue;case"1":h=Math[n(684)](h,x[n(465)](w[n(506)],1));continue;case"2":p||r[n(680)](0,x[n(776)](h,2))[n(697)](this[n(600)][n(930)](this));continue;case"3":h++;continue;case"4":f[n(489)](w[h][n(568)]());continue}break}};continue;case"21":var i=new create$e;continue;case"22":var m=null;continue;case"23":var k=u[d(772)](c[d(276)]);continue;case"24":this[d(412)+"r"]=function(s){var f=d,l={FjGyo:x[f(902)],gFDYb:x[f(532)],sdsrm:x[f(635)],LDqEz:x[f(719)],udqUF:function(n,e,t){return x[f(534)](n,e,t)},UIgEb:x[f(705)],zlkjS:function(n,e){return x[f(922)](n,e)},APMCd:function(n,e){return x[f(465)](n,e)},lXohQ:function(n,e){return x[f(488)](n,e)},OjuJe:x[f(979)],aqqql:x[f(716)],OcfSi:x[f(866)],RdqEM:x[f(599)],ktqSV:x[f(369)],SkrIS:x[f(524)],wlBfp:x[f(334)],lpoCX:x[f(610)],PMIaX:x[f(413)],YsyhO:x[f(574)],wxmvm:function(n,e,t){return x[f(534)](n,e,t)},CVniW:x[f(785)],GXeEX:x[f(395)],vapHa:function(n,e){return x[f(739)](n,e)},LHgFY:function(n,e){return x[f(458)](n,e)},OzJcS:x[f(583)],EkPQt:function(n,e){return x[f(916)](n,e)},YGgHi:x[f(603)],SGuhA:function(n,e,t){return x[f(534)](n,e,t)},eyJDk:x[f(892)],wyNqs:x[f(509)],YDlum:function(n,e){return x[f(349)](n,e)},HwRXL:function(n,e){return x[f(960)](n,e)}},v=this;x[f(618)](s,T)||Trailer[f(338)](s)[f(663)](function(n){var c=f;if(n&&l[c(408)](s,T))for(var e,t=l[c(988)][c(522)]("|"),i=0;;){switch(t[i++]){case"0":o.on(l[c(580)],function(){var n=c;v[n(629)+"er"](),v[n(760)+n(519)](s)});continue;case"1":L[c(600)](o);continue;case"2":o.on(l[c(830)],function(){var n=c;v[n(629)+"er"](),v[n(760)+n(519)](s)});continue;case"3":L[c(567)]();continue;case"4":o.on(l[c(579)],function(){var n=c;l[n(593)](o[0][n(444)+"e"],l[n(975)](o[0][n(920)],.5))&&(v[n(629)+"er"](),v[n(760)+n(519)](s))});continue;case"5":o[0][c(529)]=!0;continue;case"6":L[c(861)](l[c(817)]);continue;case"7":o.on(l[c(962)],function(){var n=c;k[n(614)+"s"](l[n(817)]),o[0][n(529)]=!0,o[0][n(589)]=0});continue;case"8":a?(o[c(380)](l[c(781)],l[c(925)]),l[c(408)](typeof window[c(949)],l[c(513)])?((e=document[c(564)+c(490)](l[c(800)]))[c(810)]=l[c(577)],document[c(496)][c(310)+"d"](e),e[c(734)]=function(){l[c(383)](r,o[0],u)}):l[c(383)](r,o[0],u)):(e=l[c(763)]($,l[c(786)],{src:u,type:l[c(921)]}),o[c(600)](e));continue;case"9":var r=function(n,e){var t,i=c,r={bxexD:l[i(498)],GnZrV:l[i(640)]};window[i(949)]&&window[i(949)][i(878)+"d"]()?((t=new window[i(949)])[i(324)](e),t[i(460)+"a"](n),t.on(window[i(949)][i(782)][i(669)+i(562)],function(){var t=i;n[t(722)]()[r[t(468)]](function(n){var e=t;return console[e(320)](r[e(917)],n[e(282)])})})):n[i(824)+"e"](l[i(287)])&&(n[i(810)]=e,n[i(367)+i(792)](l[i(927)],function(){var t=i,c={igYpE:r[t(917)]};n[t(722)]()[r[t(468)]](function(n){var e=t;return console[e(320)](c[e(829)],n[e(282)])})}))};continue;case"10":o[0][c(589)]=0;continue;case"11":l[c(440)](l[c(619)](_typeof,n),l[c(300)])&&n[c(620)+c(326)];continue;case"12":var u=l[c(507)](typeof n,l[c(477)])?n:n[c(343)];continue;case"13":var o=l[c(970)]($,l[c(563)],{autoplay:!0,loop:!1,muted:!1,playsinline:!0,"webkit-playsinline":!0,class:l[c(609)]});continue;case"14":var a=l[c(533)](l[c(281)](_typeof,n),l[c(300)])&&n[c(538)];continue;case"15":k[c(614)+"s"](l[c(817)]);continue}break}else v[c(760)+c(519)](s)})[x[f(532)]](function(){var n=f;v[n(760)+n(519)](s)})};continue;case"25":this[d(629)+"er"]=function(){for(var t=d,n=x[t(748)][t(522)]("|"),e=0;;){switch(n[e++]){case"0":x[t(904)](l,T)&&x[t(601)](setTimeout,function(){var n=t;k[n(861)](x[n(705)])},100);continue;case"1":x[t(436)](c[t(506)],0)&&c[t(623)](function(){var e=t;try{this[e(585)](),this[e(444)+"e"]=0,this[e(810)]="",this[e(673)]()}catch(n){console[e(447)](x[e(606)],n)}});continue;case"2":L[t(614)+"s"](x[t(705)])[t(567)]();continue;case"3":x[t(618)](typeof Trailer,x[t(610)])&&Trailer[t(984)+t(868)]&&Trailer[t(984)+t(868)]();continue;case"4":console[t(320)](x[t(859)]);continue;case"5":x[t(955)](clearTimeout,v);continue;case"6":var c=L[t(772)](x[t(404)]);continue;case"7":x[t(773)](clearTimeout,m);continue}break}};continue;case"26":this[d(399)]=function(){var n=d;this[n(629)+"er"](),Activity$1[n(517)]()};continue;case"27":this[d(556)]=function(n){for(var t=d,e=x[t(724)][t(522)]("|"),c=0;;){switch(e[c++]){case"0":var i=this;continue;case"1":s[t(715)]();continue;case"2":f[t(801)](s[t(568)]());continue;case"3":this[t(706)][t(822)]();continue;case"4":g&&(Layer[t(489)](u),Layer[t(813)](f[t(568)](!0)),f[t(644)]=this[t(893)][t(930)](this),f[t(306)]=function(n){var e=t;Controller[e(441)](i)||i[e(590)](),x[e(436)](n,0)?i[e(365)]():x[e(436)](h,0)&&i.up()});continue;case"5":n[t(680)](0,p?n[t(506)]:2)[t(697)](this[t(600)][t(930)](this));continue;case"6":r=n;continue;case"7":u[t(600)](f[t(568)]());continue;case"8":u[t(600)](s[t(568)]());continue;case"9":this[t(706)][t(816)](!1);continue;case"10":s=new NewsCardInfo;continue}break}};continue;case"28":this.up=function(){var n=d;h--,x[n(703)](h,0)?(h=0,Controller[n(822)](x[n(978)])):(w[h][n(822)](),f[n(489)](w[h][n(568)]()))};continue;case"29":var b=Storage[d(799)](c[d(591)]);continue;case"30":var L=u[d(772)](c[d(611)]);continue;case"31":var x={BHOoC:function(n,e){return c[d(977)](n,e)},xhCLp:c[d(393)],IcMqk:function(n,e){return c[d(692)](n,e)},LeOpx:c[d(591)],inVXt:function(n,e){return c[d(621)](n,e)},bqpTV:function(n,e,t){return c[d(823)](n,e,t)},owmQT:function(n,e){return c[d(621)](n,e)},MvACd:c[d(797)],dyaQW:c[d(906)],TltEp:c[d(587)],ABKPQ:c[d(551)],IQNDu:function(n,e){return c[d(668)](n,e)},nIVDH:function(n,e){return c[d(621)](n,e)},ONIvj:function(n,e){return c[d(835)](n,e)},DPFWH:function(n,e){return c[d(769)](n,e)},YkwrO:c[d(909)],EFRWY:c[d(634)],SIUVw:c[d(481)],ZHfTR:c[d(283)],bJqQi:c[d(771)],RhdCX:function(n,e){return c[d(681)](n,e)},EabAM:c[d(451)],FxZfQ:c[d(427)],DIAsa:c[d(940)],JVemL:function(n,e,t){return c[d(823)](n,e,t)},ZoeSH:function(n,e){return c[d(692)](n,e)},fHfpP:function(n,e){return c[d(977)](n,e)},XMVAd:c[d(864)],FaLaV:c[d(762)],rfyKg:c[d(594)],Hfvda:c[d(647)],zJMCQ:c[d(989)],aALqu:function(n,e){return c[d(493)](n,e)},miXIH:function(n,e){return c[d(387)](n,e)},qlIGt:function(n,e){return c[d(969)](n,e)},ALvPv:c[d(617)],NBAOT:c[d(661)],KfxKP:c[d(388)],qgXMC:c[d(775)],fsvzG:c[d(612)],SpYHL:c[d(541)],RYaBa:c[d(693)],HPLXt:c[d(578)],PTWEM:c[d(723)],MLQLi:c[d(624)],osqSi:c[d(729)],CcPXy:c[d(863)],nodym:c[d(650)],tpuLe:function(n,e){return c[d(692)](n,e)},sMTZP:c[d(411)],iLPtZ:c[d(292)],ohplt:c[d(951)],wgKnQ:function(n,e){return c[d(852)](n,e)},uXnEb:function(n,e){return c[d(631)](n,e)},nqNPy:c[d(402)],IfFZl:c[d(695)],nKgun:function(n,e){return c[d(653)](n,e)},pXaOP:function(n,e,t){return c[d(294)](n,e,t)},iAKBx:c[d(429)],qHLVs:function(n,e){return c[d(286)](n,e)},Cxuzk:c[d(983)],rQVtf:function(n,e){return c[d(286)](n,e)},XzMZQ:c[d(869)],vaqNP:function(n,e,t){return c[d(942)](n,e,t)},SAhOh:c[d(452)],QCFWE:c[d(472)],cbMkG:c[d(699)],lNHpx:c[d(677)],LYZWJ:c[d(666)],MNFZd:c[d(862)],xutVV:c[d(750)],dYlkD:function(n,e){return c[d(987)](n,e)},bKftP:function(n,e,t){return c[d(911)](n,e,t)},uuFzq:c[d(848)],YTWyN:c[d(985)],xPjQJ:function(n,e){return c[d(808)](n,e)},qNuJs:function(n,e){return c[d(836)](n,e)},tQGNh:c[d(542)],XFhig:c[d(641)],EJMnn:c[d(678)],QkMbB:c[d(497)],UvRSS:c[d(573)],eARBQ:c[d(434)],zeKTl:c[d(956)],vRzWv:function(n,e){return c[d(290)](n,e)},omxsO:function(n,e){return c[d(486)](n,e)},yjMbp:function(n,e){return c[d(486)](n,e)}};continue;case"32":continue;case"33":this[d(585)]=function(){};continue;case"34":var T=null;continue;case"35":this[d(807)]=function(){};continue;case"36":this[d(760)+d(519)]=function(n){for(var i=d,e=x[i(767)][i(522)]("|"),t=0;;){switch(e[t++]){case"0":x[i(960)](clearTimeout,a);continue;case"1":var r={FCZhI:x[i(705)]};continue;case"2":var u=Api[i(355)](n[i(284)+i(826)],c);continue;case"3":x[i(347)](b,x[i(967)])?c=x[i(504)]:x[i(488)](b,x[i(332)])?c=x[i(428)]:x[i(347)](b,x[i(358)])&&(c=x[i(901)]);continue;case"4":if(n&&n[i(284)+i(826)])continue;return;case"5":if(x[i(658)](u,l))return void k[i(861)](x[i(705)]);continue;case"6":a=x[i(981)](setTimeout,function(){for(var e=i,n=x[e(711)][e(522)]("|"),t=0;;){switch(n[t++]){case"0":k[0][e(974)]=function(){var n=e;k[n(614)+"s"](r[n(494)])};continue;case"1":var c={QNbdE:x[e(705)]};continue;case"2":x[e(740)](setTimeout,function(){var n=e;k[0][n(810)]=l},300);continue;case"3":k[0][e(734)]=function(){var n=e;k[n(861)](c[n(638)])};continue;case"4":k[e(614)+"s"](x[e(705)]);continue;case"5":l=u;continue}break}},300);continue;case"7":var c=x[i(428)];continue}break}};continue;case"37":var F=null;continue}break}}!function(){for(var n=_0x1688,e=_0x1f13();;)try{if(996845==-parseInt(n(425))+-parseInt(n(831))/2+-parseInt(n(344))/3+parseInt(n(575))/4+-parseInt(n(796))/5*(parseInt(n(531))/6)+-parseInt(n(418))/7+parseInt(n(806))/8*(parseInt(n(309))/9))break;e.push(e.shift())}catch(n){e.push(e.shift())}}();

  function component(object) {
    var scroll = new create$f({
      mask: true,
      over: true,
      scroll_by_item: true,
      end_ratio: 1.5
    });
    var items = [];
    var html = document.createElement('div');
    var active = 0;
    this.create = function () {};
    this.empty = function () {
      var button;
      if (object.source == 'tmdb') {
        button = $('<div class="empty__footer"><div class="simple-button selector">' + Lang.translate('change_source_on_cub') + '</div></div>');
        button.find('.selector').on('hover:enter', function () {
          Storage.set('source', 'cub');
          Activity$1.replace({
            source: 'cub'
          });
        });
      }
      var empty = new Empty();
      if (button) empty.append(button);
      empty.addInfoButton();
      html.appendChild(empty.render(true));
      this.start = empty.start;
      this.activity.loader(false);
      this.activity.toggle();
    };
    this.loadNext = function () {
      var _this = this;
      if (this.next && !this.next_wait && items.length) {
        this.next_wait = true;
        this.next(function (new_data) {
          _this.next_wait = false;
          if (!items.length) return;
          new_data.forEach(_this.append.bind(_this));
          Layer.visible(items[active + 1].render(true));
        }, function () {
          _this.next_wait = false;
        });
      }
    };
    this.build = function (data) {
      var _this2 = this;
      scroll.minus();
      scroll.onWheel = function (step) {
        if (!Controller.own(_this2)) _this2.start();
        if (step > 0) _this2.down();else if (active > 0) _this2.up();
      };
      scroll.onEnd = this.loadNext.bind(this);
      if (this.onLinesBuild) this.onLinesBuild(data);
      data.forEach(this.append.bind(this));
      html.appendChild(scroll.render(true));
      Layer.update(html);
      this.activity.loader(false);
      this.activity.toggle();
      Layer.visible(html);
    };
    this.append = function (element) {
      if (element.ready) return;
      element.ready = true;
      var item = new create$l(element, {
        url: element.url,
        genres: object.genres,
        object: object,
        card_wide: element.wide,
        card_small: element.small,
        card_broad: element.broad,
        card_collection: element.collection,
        card_continue: element["continue"],
        card_category: element.category,
        card_events: element.card_events,
        cardClass: element.cardClass,
        nomore: element.nomore,
        type: element.line_type || 'cards'
      });
      item.create();
      this.push(item, element);
    };
    this.back = function () {
      Activity$1.backward();
    };
    this.push = function (item, element) {
      item.onDown = this.down.bind(this);
      item.onUp = this.up.bind(this);
      item.onBack = this.back.bind(this);
      if (this.onMore) item.onMore = this.onMore.bind(this);
      items.push(item);
      if (this.onAppend) this.onAppend(item, element);
      scroll.append(item.render(true));
    };
    this.down = function () {
      active++;
      active = Math.min(active, items.length - 1);
      scroll.update(items[active].render(true));
      items[active].toggle();
    };
    this.up = function () {
      active--;
      if (active < 0) {
        active = 0;
        Controller.toggle('head');
      } else {
        items[active].toggle();
        scroll.update(items[active].render(true));
      }
    };
    this.start = function () {
      var _this3 = this;
      Controller.add('content', {
        link: this,
        toggle: function toggle() {
          if (_this3.activity.canRefresh()) return false;
          if (items.length) items[active].toggle();
        },
        update: function update() {},
        left: function left() {
          if (Navigator.canmove('left')) Navigator.move('left');else Controller.toggle('menu');
        },
        right: function right() {
          Navigator.move('right');
        },
        up: function up() {
          if (Navigator.canmove('up')) Navigator.move('up');else Controller.toggle('head');
        },
        down: function down() {
          if (Navigator.canmove('down')) Navigator.move('down');
        },
        back: this.back
      });
      Controller.toggle('content');
    };
    this.refresh = function () {
      this.activity.needRefresh();
    };
    this.pause = function () {};
    this.stop = function () {};
    this.render = function (js) {
      return js ? html : $(html);
    };
    this.destroy = function () {
      Arrays.destroy(items);
      scroll.destroy();
      html.remove();
      items = [];
      if (this.onDestroy) this.onDestroy();
    };
  }

  /**
   * Главный компонент для отображения контента
   * Выбирает между стандартным и новостным видом карточек
   * @param {object} object 
   * @returns {object}
   */
  function InteractionMain(object) {
    // Проверяем нужно ли использовать новый интерфейс
    var useNewsCards = function useNewsCards() {
      // Если указан прямой параметр force_standard, используем стандартный стиль
      if (object.force_standard) {
        return false;
      }

      // Проверка на компоненты, которые всегда должны использовать стандартный стиль
      if (object.component === 'favorite' || object.component === 'bookmarks') {
        return false;
      }

      // Проверка на явно указанный стиль компонента (для совместимости)
      if (object.card_style === 'standard') {
        return false;
      }

      // Если родитель компонента favorite, тоже используем стандартный стиль
      if (object.from_component === 'favorite' || object.from_favorite) {
        return false;
      }

      // Проверяем платформу - космический стиль доступен только для ТВ
      var isTV = Platform.screen('tv');
      if (!isTV) {
        return false; // Для не-ТВ всегда используем стандартный стиль
      }

      // Проверяем настройки пользователя
      var interfaceStyle = Storage.field('interface_style');
      // Космический интерфейс возможен только с новыми карточками
      if (interfaceStyle === 'space') {
        return true;
      }

      // Если выбран стандартный стиль, используем стандартный компонент
      if (interfaceStyle === 'standard') {
        return false;
      }

      // Проверяем условия по умолчанию для автоматического определения
      var isTmdbOrCub = object.source === 'tmdb' || object.source === 'cub';
      var isWideScreen = window.innerWidth >= 767;
      var isNewVersion = object$2.app_digital >= 153;
      return isTmdbOrCub && isWideScreen && isNewVersion;
    };

    // Выбираем компонент в зависимости от настроек
    if (useNewsCards()) {
      return new NewsCards(object);
    } else {
      return new component(object);
    }
  }

  function open$1(callSelected, callCancel) {
    var html = Template.get('lang_choice', {});
    var scroll = new create$f({
      mask: true,
      over: true
    });
    var codes = Lang.codes();
    function selector(code) {
      var item = $('<div class="selector lang__selector-item" data-code="' + code + '">' + codes[code] + '</div>');
      item.on('hover:enter', function (e) {
        if (callSelected) callSelected(code);
        html.fadeOut(300, function () {
          scroll.destroy();
          html.remove();
          scroll = null;
          html = null;
        });
      }).on('hover:focus', function (e) {
        scroll.update($(e.target), true);
        $('.lang__selector-item', html).removeClass('last-focus');
        $(e.target).addClass('last-focus');
        html.find('.lang__title').text(Lang.translate('lang_choice_title', code));
        html.find('.lang__subtitle').text(Lang.translate('lang_choice_subtitle', code));
      });
      scroll.append(item);
    }
    for (var code in codes) selector(code);
    html.find('.lang__selector').append(scroll.render());
    $('body').append(html);
    Controller.add('language', {
      toggle: function toggle() {
        var focus = html.find('[data-code="' + Storage.get('language', 'ru') + '"]');
        Controller.collectionSet(scroll.render());
        Controller.collectionFocus(focus[0], scroll.render());
      },
      up: function up() {
        Navigator.move('up');
      },
      down: function down() {
        Navigator.move('down');
      },
      back: function back() {
        if (callCancel) {
          scroll.destroy();
          html.remove();
          scroll = null;
          html = null;
          callCancel();
        }
      }
    });
    Controller.toggle('language');
  }
  var LangChoice = {
    open: open$1
  };

  function init$i() {
    if (!Platform.is('webos')) return;
    var field = $("<div class=\"settings-folder selector\" data-component=\"webos_launcher\">\n        <div class=\"settings-folder__icon\">\n            <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" viewBox=\"0 0 32 32\" xml:space=\"preserve\">\n                <g transform=\"matrix(1.06,0,0,1.06,-0.9600000000000009,-0.9600000000000009)\">\n                    <path d=\"m26.59 31h-21.18c-2.431 0-4.41-1.979-4.41-4.41v-21.18c0-2.431 1.979-4.41 4.41-4.41h21.18c2.431 0 4.41 1.979 4.41 4.41v21.18c0 2.431-1.979 4.41-4.41 4.41zm-21.18-28c-1.329 0-2.41 1.081-2.41 2.41v21.18c0 1.329 1.081 2.41 2.41 2.41h21.18c1.329 0 2.41-1.081 2.41-2.41v-21.18c0-1.329-1.081-2.41-2.41-2.41z\" fill=\"#fff\"></path>\n                    <path d=\"m21.129 24h-10.258c-1.583 0-2.871-1.288-2.871-2.871v-6.167c0-.925.449-1.798 1.202-2.336l5.129-3.664c.998-.712 2.339-.712 3.337 0l5.129 3.665c.754.537 1.203 1.41 1.203 2.335v6.167c0 1.583-1.288 2.871-2.871 2.871zm-5.635-13.41-5.129 3.664c-.229.163-.365.428-.365.708v6.167c0 .48.391.871.871.871h10.259c.479 0 .87-.391.87-.871v-6.167c0-.281-.136-.545-.364-.708l-5.129-3.665c-.303-.215-.71-.215-1.013.001z\" fill=\"#fff\"></path>\n                </g>\n            </svg>\n        </div>\n        <div class=\"settings-folder__name\">".concat(Lang.translate('settings_webos_launcher'), "</div>\n    </div>"));
    Settings.main().render().find('[data-component="more"]').after(field);
    Settings.main().update();
    Prisma.Template.add('settings_webos_launcher', "<div>\n        <div class=\"settings-param selector\" data-name=\"add\" data-static=\"true\">\n            <div class=\"settings-param__name\">#{settings_webos_launcher_add_device}</div>\n        </div>\n        <div class=\"settings-param selector\" data-name=\"remove\" data-static=\"true\">\n            <div class=\"settings-param__name\">#{settings_webos_launcher_remove_device}</div>\n        </div>\n    </div>");
    Settings.listener.follow('open', function (e) {
      var appid = webOS.fetchAppId();
      console.log('WebOS', 'current appid:', appid);
      if (appid.length == 0) appid = window.prisma_settings.iptv ? 'icva' : 'com.prisma.tv';
      if (e.name == 'webos_launcher') {
        e.body.find('[data-name="add"]').unbind('hover:enter').on('hover:enter', function () {
          webOS.service.request("luna://com.webos.service.eim", {
            method: "addDevice",
            parameters: {
              "appId": appid,
              "pigImage": "/pigImage.jpg",
              "type": "MVPD_IP",
              "showPopup": true,
              "label": "Prisma",
              "description": "Prisma app for LG webOS"
            },
            onSuccess: function onSuccess(res) {
              Noty$1.show(Lang.translate('settings_added'));
            },
            onFailure: function onFailure(res) {
              Noty$1.show(Lang.translate('title_error') + ': ' + res.errorText);
            }
          });
        });
        e.body.find('[data-name="remove"]').unbind('hover:enter').on('hover:enter', function () {
          webOS.service.request("luna://com.webos.service.eim", {
            method: "deleteDevice",
            parameters: {
              "appId": appid,
              "showPopup": true
            },
            onSuccess: function onSuccess(res) {
              Noty$1.show(Lang.translate('settings_added'));
            },
            onFailure: function onFailure(res) {
              Noty$1.show(Lang.translate('title_error') + ': ' + res.errorText);
            }
          });
        });
      }
    });
  }
  var WebOSLauncher = {
    init: init$i
  };

  function open(callSelected) {
    var html = Template.get('lang_choice', {});
    var scroll = new create$f({
      mask: true,
      over: true
    });
    function btn(name, select) {
      var item = $('<div class="selector lang__selector-item">' + name + '</div>');
      item.on('hover:enter', function (e) {
        if (select) select();
      }).on('hover:focus', function (e) {
        scroll.update($(e.target), true);
      }).on('click', function (e) {
        if (select && DeviceInput.canClick(e.originalEvent)) select();
      });
      scroll.append(item);
    }
    function destroy() {
      html.fadeOut(300, function () {
        scroll.destroy();
        html.remove();
        scroll = null;
        html = null;
      });
      Controller.add('developer', {
        toggle: function toggle() {}
      });
    }
    function close() {
      destroy();
      callSelected();
    }
    var btns = [{
      name: Lang.translate('title_continue_two'),
      select: close
    }, {
      name: Lang.translate('settings_reset'),
      select: function select() {
        localStorage.clear();
        window.location.reload();
        destroy();
      }
    }];
    btns.forEach(function (item) {
      btn(item.name, item.select);
    });
    html.find('.lang__selector').append(scroll.render());
    $('body').append(html);
    Controller.add('developer', {
      toggle: function toggle() {
        Controller.collectionSet(scroll.render());
        Controller.collectionFocus(false, scroll.render());
      },
      up: function up() {
        Navigator.move('up');
      },
      down: function down() {
        Navigator.move('down');
      }
    });
    Controller.toggle('developer');
  }
  var Developer = {
    open: open
  };

  var CardClass = /*#__PURE__*/function () {
    function CardClass(params) {
      _classCallCheck(this, CardClass);
      this.params = params;
    }
    return _createClass(CardClass, [{
      key: "create",
      value: function create() {
        this.build();
        this.image();
      }
    }, {
      key: "build",
      value: function build() {
        var _this = this;
        this.card = Template.js('card');
        this.img = this.card.querySelector('.card__img') || {};
        this.card.querySelector('.card__title').innerText = this.params.title;
        this.card.querySelector('.card__age').innerText = this.params.subtitle;
        this.box = document.createElement('div');
        this.box.classList.add('card__textbox');
        this.box.innerText = this.params.text;
        this.card.querySelector('.card__view').appendChild(this.box);
        this.card.addEventListener('hover:enter', function () {
          var tpl = Template.get('prisma_premium');
          tpl.find('.prisma-premium__title').text(Lang.translate('title_notice'));
          tpl.find('.prisma-premium__descr').eq(0).empty().text(Lang.translate('ad_notice_' + _this.params.type));
          Modal.open({
            title: '',
            size: 'medium',
            mask: true,
            html: tpl,
            onBack: function onBack() {
              Modal.close();
              Controller.toggle('content');
            }
          });
        });
        this.card.addEventListener('visible', this.visible.bind(this));
      }
    }, {
      key: "image",
      value: function image() {
        var _this2 = this;
        this.img.onload = function () {
          _this2.card.classList.add('card--loaded');
        };
        this.img.onerror = function () {
          TMDB$1.broken();
          console.log('Img', 'noload', _this2.img.src);
          _this2.img.src = './img/img_broken.svg';
        };
      }
    }, {
      key: "visible",
      value: function visible() {
        if (this.params.poster) this.img.src = Api.img(this.params.poster);else if (this.params.img) this.img.src = this.params.img;else this.img.src = './img/img_broken.svg';
      }
    }, {
      key: "destroy",
      value: function destroy() {
        this.img.onerror = function () {};
        this.img.onload = function () {};
        this.img.src = '';
        this.card.remove();
        this.card = null;
        this.img = null;
      }
    }, {
      key: "render",
      value: function render(js) {
        return js ? this.card : $(this.card);
      }
    }]);
  }();

  var Watched = /*#__PURE__*/function () {
    function Watched() {
      var params = arguments.length > 0 && arguments[0] !== undefined ? arguments[0] : {};
      _classCallCheck(this, Watched);
      var n = Math.floor(Math.random() * 5) + 1;
      Arrays.extend(params, {
        title: params.card.title || params.card.name,
        subtitle: Lang.translate('title_notice'),
        poster: params.card.poster_path,
        text: Lang.translate('ad_notice_' + params.type + '_text_' + n)
      });
      this.card = new CardClass(params);
      this.card.create();
    }
    return _createClass(Watched, [{
      key: "destroy",
      value: function destroy() {
        this.card.destroy();
      }
    }, {
      key: "render",
      value: function render(js) {
        return this.card.render(js);
      }
    }]);
  }();

  var network$1;
  function init$h() {
    network$1 = new create$e();
    Socket.listener.follow('message', function (e) {
      if (e.method == 'premiere') update(e.data);
    });
  }
  function update(data) {
    var id = data.type + '/' + data.id;
    console.log('Premiere', 'load:', data, 'exist:', Boolean(Notice$1.classes.prisma.notices.find(function (n) {
      return n.id == id;
    })));
    if (Notice$1.classes.prisma.notices.find(function (n) {
      return n.id == id;
    })) return;
    var codes = Arrays.getKeys(Lang.codes());
    network$1.silent(TMDB$1.api(id + '?append_to_response=translations,credits&language=' + Storage.get('language', 'ru') + '&api_key=' + TMDB$1.key()), function (movie) {
      network$1.silent(TMDB$1.api(id + '/images?include_image_language=' + codes.join(',') + '&language=' + Storage.get('language', 'ru') + '&api_key=' + TMDB$1.key()), function (images) {
        var card = Arrays.clone(movie);
        console.log('Premiere', 'card loaded', card);
        delete card.translations;
        delete card.credits;
        delete card.credits;
        delete card.spoken_languages;
        delete card.production_companies;
        delete card.production_countries;
        var notice = {
          id: id,
          from: 'cub',
          title: {},
          text: {},
          time: Date.now(),
          poster: {},
          card: card
        };
        movie.translations.translations.filter(function (t) {
          return codes.indexOf(t.iso_639_1) >= 0;
        }).forEach(function (t) {
          notice.title[t.iso_639_1] = Lang.translate('premiere_title') + ': ' + (t.data.title || t.data.name || movie.title || movie.name);
          notice.text[t.iso_639_1] = (t.data.overview || movie.overview || '').slice(0, 130) + '...';
        });
        images.posters.forEach(function (i) {
          notice.poster[i.iso_639_1] = i.file_path;
        });
        if (movie.credits && movie.credits.cast) {
          var casts = movie.credits.cast.filter(function (c) {
            return c.known_for_department.toLowerCase() == 'acting';
          });
          if (casts.length) {
            notice.author = {};
            codes.forEach(function (c) {
              notice.author[c] = {
                name: casts[0].name || casts[0].character,
                img: casts[0].profile_path,
                text: Lang.translate('premiere_author_recomend_' + (Math.floor(Math.random() * 5) + 1))
              };
            });
          }
        }
        Notice$1.pushNotice('prisma', notice, function () {
          console.log('Premiere', 'card added');
        }, function (er) {
          console.log('Premiere', 'card added error:', er);
        });
      });
    });
  }
  var Premiere = {
    init: init$h
  };

  var BotClass = /*#__PURE__*/function () {
    function BotClass(params) {
      _classCallCheck(this, BotClass);
      this.params = params;
      this.build();
      this.image();
    }
    return _createClass(BotClass, [{
      key: "build",
      value: function build() {
        var _this = this;
        this.card = Template.js('ad_bot');
        this.img = this.card.querySelector('.ad-bot__img') || {};
        this.card.querySelector('.ad-bot__title').innerText = this.params.title;
        this.card.querySelector('.ad-bot__text').innerText = this.params.text;
        this.card.querySelector('.ad-bot__more').innerText = Lang.translate('full_detail');
        this.card.querySelector('.ad-bot__info').innerText = Lang.translate('ad_disable');
        this.card.addEventListener('hover:enter', function () {
          var tpl = Template.get('prisma_premium');
          tpl.find('.prisma-premium__title').text(Lang.translate('title_notice'));
          tpl.find('.prisma-premium__descr').eq(0).empty().text(Lang.translate('ad_notice_' + _this.params.type));
          Modal.open({
            title: '',
            size: 'medium',
            mask: true,
            html: tpl,
            onBack: function onBack() {
              Modal.close();
              Controller.toggle('content');
            }
          });
        });
        this.visible();
      }
    }, {
      key: "image",
      value: function image() {
        var _this2 = this;
        this.img.onload = function () {
          _this2.card.classList.add('img--loaded');
        };
        this.img.onerror = function () {
          TMDB$1.broken();
          console.log('Img', 'noload', _this2.img.src);
          _this2.img.src = './img/img_broken.svg';
        };
      }
    }, {
      key: "visible",
      value: function visible() {
        if (this.params.poster) this.img.src = Api.img(this.params.poster);else if (this.params.img) this.img.src = this.params.img;else this.img.src = './img/img_broken.svg';
      }
    }, {
      key: "destroy",
      value: function destroy() {
        this.img.onerror = function () {};
        this.img.onload = function () {};
        this.img.src = '';
        this.card.remove();
        this.card = null;
        this.img = null;
      }
    }, {
      key: "render",
      value: function render(js) {
        return js ? this.card : $(this.card);
      }
    }]);
  }();

  function init$g() {
    if (Account.logged() && Lang.selected(['ru', 'uk', 'be', 'bg']) && window.prisma_settings.account_use) {
      var user = Storage.get('account_user', '{}');
      if (user.premium && !Account.hasPremium()) setTimeout(push, 5000);
    }
  }
  function push() {
    var id = 'extend_premium';
    if (Notice$1.classes.prisma.notices.find(function (n) {
      return n.id == id;
    })) return;
    var notice = {
      id: id,
      from: 'cub',
      title: {
        ru: 'Продлите Premium прямо сейчас!',
        uk: 'Продовжіть Premium прямо зараз!',
        be: 'Працягнеце Premium прама зараз!',
        bg: 'Подновете Premium точно сега!'
      },
      text: {
        ru: 'Ваша подписка на Premium истекла! Не упустите шанс продлить доступ к эксклюзивному контенту и дополнительным функциям. Обновите премиум-статус сейчас и наслаждайтесь всеми преимуществами без ограничений!',
        uk: 'Ваша передплата на Premium закінчилася! Не пропустіть шанс продовжити доступ до ексклюзивного контенту та додаткових функцій. Оновіть преміум-статус зараз та насолоджуйтесь усіма перевагами без обмежень!',
        be: 'Ваша падпіска на Premium скончылася! Не выпусціце шанец падоўжыць доступ да эксклюзіўнага кантэнту і дадатковым функцый. Абнавіце прэміум-статус зараз і атрымлівайце асалоду ад усімі перавагамі без абмежаванняў!',
        bg: 'Вашият абонамент за Premium е изтекъл! Не пропускайте шанса си да подновите достъпа си до ексклузивно съдържание и допълнителни функции. Надстройте до премиум статус сега и се насладете на всички предимства на без ограничения!'
      },
      time: Date.now(),
      icon: 'https://' + object$2.cub_domain + '/img/icons/premium_two.svg'
    };
    Notice$1.pushNotice('prisma', notice, function () {}, function (er) {});
  }
  var Extend = {
    init: init$g
  };

  var status = false;
  function init$f() {
    $.ajax({
      url: "./personal.prisma",
      dataType: 'text',
      success: function success() {
        status = true;
      }
    });
  }
  function confirm() {
    return status;
  }
  var Personal = {
    init: init$f,
    confirm: confirm
  };

  function init$e() {
    Lang.add({
      ad_notice_tv_text_1: {
        ru: 'Будьте в курсе новых серий - получайте уведомления о переводах на свой смартфон!',
        uk: 'Будьте в курсі нових серій - отримуйте сповіщення про переклади на свій смартфон!',
        be: 'Будзьце ў курсе новых серый - атрымлівайце апавяшчэння аб перакладах на свой смартфон!',
        bg: 'Бъдете в час с новите серии - получавайте уведомление за преводите на своят смартфон!'
      },
      ad_notice_tv_text_2: {
        ru: 'Никогда не пропускайте новую серию - получайте уведомления о переводах на свой смартфон!',
        uk: 'Ніколи не пропускайте нову серію - отримуйте сповіщення про переклади на свій смартфон!',
        be: 'Ніколі не прапускайце новую серыю - атрымлівайце апавяшчэння аб перакладах на свой смартфон!',
        bg: 'Бъдете в час с новите серии - получавайте уведомление за преводите на своят смартфон!'
      },
      ad_notice_tv_text_3: {
        ru: 'Оставайтесь в центре событий - получайте уведомления о переводах новых серий на свой смартфон!',
        uk: 'Залишайтесь у центрі подій - отримуйте повідомлення про переведення нових серій на свій смартфон!',
        be: 'Заставайцеся ў цэнтры падзей - атрымлівайце апавяшчэння аб перакладах новых серый на свой смартфон!',
        bg: 'Бъдете в центъра на събитията - получавайте уведомление за преводите на новите серии на своят смартфон!'
      },
      ad_notice_tv_text_4: {
        ru: 'Будьте первыми, кто узнает о переводах новых серий - получайте уведомления на свой смартфон!',
        uk: 'Будьте першими, хто дізнається про переклади нових серій – отримуйте повідомлення на свій смартфон!',
        be: 'Будзьце першымі, хто даведаецца аб перакладах новых серый - атрымлівайце апавяшчэння на свой смартфон!',
        bg: 'Бъдете първи, за да узнаете за превода на нови серии - получавайте уведомление на своят смартфон!'
      },
      ad_notice_tv_text_5: {
        ru: 'Не пропустите ни одной новой серии - получайте уведомления о переводах на свой смартфон и смотрите сериалы в любимом переводе!',
        uk: 'Не пропустіть жодної нової серії – отримуйте повідомлення про переклади на свій смартфон та дивіться серіали у улюбленому перекладі!',
        be: 'Не прапусціце ніводнай новай серыі - атрымлівайце апавяшчэнні аб перакладах на свой смартфон і глядзіце серыялы ў любімым перакладзе!',
        bg: 'Не пропускайте нито една серия - получавайте уведомление за преводите на своят смартфон и гледайте сериалите с желаният превод!'
      },
      ad_notice_tv: {
        ru: 'Получение уведомлений о переводе сериала на свой смартфон - это удобный способ всегда оставаться в курсе и не пропустить ни одной серии. Вы больше не будете терять время на поиски новых серий и следить за релизами вручную. Просто подпишитесь на перевод и получайте уведомления о выходе новых серий на свой смартфон. Это сэкономит вам время и сделает просмотр сериалов еще более комфортным.',
        uk: 'Отримання повідомлень про переведення серіалу на свій смартфон – це зручний спосіб завжди залишатися в курсі та не пропустити жодної серії. Ви більше не будете гаяти час на пошуки нових серій і стежити за релізами вручну. Просто підпишіться на переклад та отримуйте повідомлення про вихід нових серій на свій смартфон. Це заощадить вам час і зробить перегляд серіалів ще комфортнішим.',
        be: 'Атрыманне апавяшчэнняў аб пераводзе серыяла на свой смартфон - гэта зручны спосаб заўсёды заставацца ў курсе і не прапусціць ніводнай серыі. Вы больш не будзеце марнаваць час на пошукі новых серый і сачыць за рэлізамі ўручную. Проста падпішыцеся на пераклад і атрымлівайце апавяшчэнні аб выхадзе новых серый на свой смартфон. Гэта зэканоміць вам час і зробіць прагляд серыялаў яшчэ камфортнейшым.',
        bg: 'Получавайте уведомление за преведени сериали на своят смартфон - това е удобен начин винаги да си в час и да не пропуснеш нито една серия. Повече няма да губите време в търсене на нови излъчени серии. Това ще спести времето ви и ще направи прегледа на сериали още по-комфортно'
      },
      ad_bot_tv_title: {
        ru: 'Уведомления на вашем смартфоне',
        uk: 'Сповіщення на вашому смартфоні',
        be: 'Апавешчанні на вашым смартфоне',
        bg: 'Известия на вашия смартфон'
      },
      ad_bot_tv_text: {
        ru: 'Будьте в курсе самых ожидаемых моментов! Теперь вы можете получать мгновенные уведомления о выходе новых серий и фильмов прямо на свой смартфон.',
        uk: 'Будьте в курсі найочікуваніших моментів! Тепер ви можете отримувати миттєві сповіщення про виход нових серіалів і фільмів прямо на свій смартфон.',
        be: 'Будзьце ў курсе самых чаканых момантаў! Цяпер вы можаце атрымліваць хуткія апавешчанні аб выходзе новых сэрыяў і фільмаў проста на свой смартфон.',
        bg: 'Бъдете в течение на най-очакваните моменти! Сега можете да получавате мигновени известия за излизането на нови серии и филми директно на вашия смартфон.'
      }
    });
    Prisma.Listener.follow('line', function (event) {
      if (event.type == 'create' && event.data.ad && !Account.hasPremium() && window.prisma_settings.account_use && Lang.selected(['ru', 'uk', 'be', 'bg']) && !Personal.confirm()) {
        var item;
        if (event.data.ad == 'bot') {
          item = new BotClass({
            card: event.data.results[0],
            type: event.data.type,
            title: Lang.translate('ad_bot_tv_title'),
            text: Lang.translate('ad_bot_tv_text'),
            poster: event.data.results[0].poster_path
          });
        } else {
          item = new Watched({
            card: event.data.results[0],
            type: event.data.type
          });
        }
        item.render(true).on('hover:focus', function (e) {
          event.scroll.update(e.target);
        });
        event.items.push(item);
        event.scroll.append(item.render(true));
      }
    });
    Premiere.init();
    Extend.init();
    Preroll.init();
  }
  var AdManager = {
    init: init$e
  };

  function init$d() {
    if (Platform.screen('mobile')) {
      var bar = Template.get('navigation_bar', {});
      bar.find('.navigation-bar__item').on('click', function () {
        var action = $(this).data('action');
        if (action == 'back') Controller.back();else if (action == 'main') {
          Activity$1.push({
            url: '',
            title: Lang.translate('title_main'),
            component: 'main',
            source: Storage.field('source')
          });
        } else if (action == 'movie' || action == 'tv' || action == 'anime') {
          Activity$1.push({
            url: action,
            title: action == 'movie' ? Lang.translate('menu_movies') : action == 'anime' ? Lang.translate('menu_anime') : Lang.translate('menu_tv'),
            component: 'category',
            source: action == 'anime' ? 'cub' : Storage.field('source')
          });
        } else if (action == 'search') {
          Prisma.Search.open();
        } else if (action == 'settings') {
          Controller.toggle('settings');
        }
      });
      $('body').append(bar);
    }
  }
  var NavigationBar = {
    init: init$d
  };

  function Endless(onRender) {
    var _this = this;
    var params = arguments.length > 1 && arguments[1] !== undefined ? arguments[1] : {};
    var wrap = document.createElement('div');
    var position = params.position || 0;
    wrap.addClass('endless');
    wrap.addEventListener('mousewheel', function (e) {
      _this.move(e.wheelDelta / 120 > 0 ? -1 : 1);
    });
    var touch;
    var touchStart = function touchStart(e) {
      var point = e.touches[0] || e.changedTouches[0];
      touch = {
        position: position,
        from: point.clientY,
        to: 0
      };
      window.addEventListener('touchend', _touchEnd);
      window.addEventListener('touchmove', touchMove);
    };
    var touchMove = function touchMove(e) {
      var point = e.touches[0] || e.changedTouches[0];
      if (touch) {
        var to = Math.round((point.clientY - touch.from) / (window.innerHeight * 0.1));
        if (touch.to !== to) {
          var move = touch.position - to;
          _touchEnd();
          _this.to(move);
        }
      }
    };
    var _touchEnd = function touchEnd(e) {
      window.removeEventListener('touchend', _touchEnd);
      window.removeEventListener('touchmove', touchMove);
      touch = false;
    };
    wrap.addEventListener('touchstart', touchStart);
    this.move = function (dir) {
      var dif = position - (position + dir);
      position += dir;
      this.draw(dif);
    };
    this.to = function (to) {
      var dif = position - to;
      position = to;
      this.draw(dif);
    };
    this.draw = function (dif) {
      var render = onRender(position);
      if (render) {
        wrap.removeClass('endless-up endless-down');
        wrap.style.animation = 'none';
        wrap.offsetHeight;
        wrap.style.animation = null;
        wrap.empty().append(render);
        wrap.addClass(dif == -1 ? 'endless-down' : 'endless-up');
      }
    };
    this.render = function () {
      return wrap;
    };
    this.destroy = function () {
      wrap.remove();
    };
    this.draw(0);
  }

  function hide() {
    Settings.listener.follow('open', function (e) {
      if (e.name == 'main') {
        e.body.find(['player', 'account', 'parser', 'server', 'plugins'].map(function (a) {
          return '[data-component="' + a + '"]';
        }).join(', ')).addClass('hide');
      } else {
        e.body.find(['start_page', 'card_quality', 'card_episodes', 'proxy_tmdb_auto', 'proxy_tmdb', 'tmdb_proxy_api', 'tmdb_proxy_image', 'card_interfice_type', 'source'].map(function (a) {
          return '[data-name="' + a + '"]';
        }).join(', ')).addClass('hide');
      }
    });
    var head = $('.head');
    var menu = $('.menu');
    $('.open--broadcast, .open--search,.open--notice,.open--premium', head).remove();
    $(['catalog', 'feed', 'filter', 'relise', 'anime', 'favorite', 'subscribes', 'timetable', 'mytorrents', 'console', 'about'].map(function (a) {
      return '[data-action="' + a + '"]';
    }).join(', '), menu).remove();
    Arrays.remove(TMDB.genres.movie, TMDB.genres.movie.find(function (g) {
      return g.id == 99;
    }));
    var genres_id = [99, 10764, 10766, 10767, 10768, 10763];
    genres_id.forEach(function (id) {
      Arrays.remove(TMDB.genres.tv, TMDB.genres.tv.find(function (g) {
        return g.id == id;
      }));
    });
    Prisma.Listener.follow('full', function (e) {
      if (e.type == 'complite') {
        e.object.activity.render().find('.full-start-new__buttons, .full-start__icons, .full-start__footer').remove();
      }
    });
  }
  function init$c() {
    if (window.prisma_settings.demo) {
      Prisma.Listener.follow('app', function (e) {
        if (e.type == 'ready') hide();
      });
    }
  }
  var Demo = {
    init: init$c
  };

  var html$1;
  var tout;
  var xmlHTTP;
  var controll;
  var active = {};
  var graph = [];
  function init$b() {
    Settings.listener.follow('open', function (e) {
      if (e.name == 'server') {
        var btn = $("<div class=\"settings-param selector\" data-type=\"button\">\n                <div class=\"settings-param__name\">".concat(Lang.translate('speedtest_button'), "</div>\n            </div>"));
        btn.on('hover:enter', function () {
          if (Torserver.ip()) {
            var params = {
              url: Torserver.url() + '/download/300'
            };
            if (Storage.field('torrserver_auth')) {
              params.login = Storage.get('torrserver_login');
              params.password = Storage.value('torrserver_password');
            }
            start$1(params);
          }
        });
        $('[data-name="torrserver_url_two"]', e.body).after(btn);
      }
    });
  }
  function start$1(params) {
    if (html$1) html$1.remove();
    active = params;
    controll = Controller.enabled().name;
    html$1 = Template.js('speedtest');
    html$1.append(HeadBackward('', true));
    document.body.append(html$1);
    var textpath = Array.from(html$1.querySelectorAll('textpath'));
    textpath.forEach(function (element) {
      element.html(element.getAttribute('data-text'));
    });
    html$1.find('#speedtest_num-text').html('Mbps');
    toggle();
    if (active.url) testUrl(active.url);
  }
  function speed2deg(v) {
    v = parseFloat(v);
    return v >= 1000 ? 200 : v < 20 ? v * 4 : v < 30 ? (v - 20) * 2 + 80 : v < 60 ? (v - 30) / 1.5 + 100 : v < 100 ? (v - 60) / 2 + 120 : v < 200 ? (v - 100) / 5 + 140 : v < 500 ? (v - 200) / 15 + 160 : (v - 500) / 25 + 180;
  }
  function hslToRgb(hue, sat, light) {
    hue = hue % 360, hue += hue < 0 ? hue += 360 : 0, sat /= 100, light /= 100;
    function f(n) {
      var k = (n + hue / 30) % 12;
      var a = sat * Math.min(light, 1 - light);
      return parseInt((light - a * Math.max(-1, Math.min(k - 3, 9 - k, 1))) * 255);
    }
    return "#" + ((1 << 24) + (f(0) << 16) + (f(8) << 8) + f(4)).toString(16).slice(1);
  }
  function setSpeed(v) {
    v = parseFloat(v);
    html$1.find('#speedtest_num').innerHTML = v < 1 ? v.toFixed(3) : v < 10 ? v.toFixed(2) : v < 100 ? v.toFixed(1) : Math.round(v);
    var r = speed2deg(v);
    var b = html$1.find('#speedtest_progress');
    var l = 1256.8;
    b.style['stroke-dasharray'] = l * r / 360 + ',' + l;
    b.style.stroke = hslToRgb(330 + r, 80, 45);
    html$1.find('#speedtest_graph').setAttribute('points', graph.map(function (pt) {
      return pt.join(',');
    }).join(' '));
  }
  function normalizeUrl(base, link) {
    if (link[0] === '/') return base.replace(/^(https?:\/\/[^\/]+).*$/i, '$1') + link;
    if (/^https?:?\/\//i.test(link)) return link;
    base = base.replace(/\/[^\/]*(\?.*)?$/, '') + '/';
    return base + link;
  }
  function testUrl(url) {
    if (!/\.m3u8?(\?.*)?$/i.test(url)) return testSpeed(url);
    var errorFn = function errorFn(e) {
      html$1.find('#speedtest_status').html(Lang.translate('network_error'));
    };
    xmlHTTP = new XMLHttpRequest();
    $.ajax({
      url: url,
      cache: false,
      dataType: 'text',
      xhr: function xhr() {
        return xmlHTTP;
      },
      success: function success(data) {
        if (data.substr(0, 7) !== '#EXTM3U') return errorFn();
        var i = 0,
          links = [],
          bandwidth = 0,
          setLink = false,
          m,
          l = data.split(/\r?\n/);
        data = null;
        for (; links.length < 100 && i < l.length; i++) {
          if (!!(m = l[i].match(/^#EXTINF:\s*(-?\d+(\.\d*)?)\s*,.*$/))) {
            setLink = true;
          } else if (!!(m = l[i].match(/^#EXT-X-STREAM-INF:(.+,)?\s*BANDWIDTH=(\d+)\s*(,.+)?$/))) {
            if (bandwidth < parseInt(m[2])) {
              bandwidth = parseInt(m[2]);
              setLink = true;
            } else setLink = false;
          } else if (setLink && !!(m = l[i].match(/^[^#].+$/i))) {
            links.push(normalizeUrl(xmlHTTP.responseURL, m[0].trim()));
            setLink = false;
          }
        }
        if (links.length === 0) return errorFn();
        if (bandwidth > 0) return testUrl(links.pop());
        testSpeed(links[0]);
      },
      error: errorFn
    });
  }
  function testSpeed(url) {
    var context = this;
    var status = html$1.find('#speedtest_status');
    var time;
    status.innerHTML = Lang.translate('speedtest_connect');
    graph = [[-250, -250]];
    var speed = 0,
      speedMbps = 0;
    setSpeed(0);
    xmlHTTP = new XMLHttpRequest();
    xmlHTTP.open('GET', Utils$2.addUrlComponent(url, 'vr=' + new Date() * 1), true);
    if (active.login && active.password) xmlHTTP.setRequestHeader("Authorization", "Basic " + Base64.encode(active.login + ":" + active.password));
    xmlHTTP.responseType = 'arraybuffer';
    xmlHTTP.onprogress = function (e) {
      if (!time || time === true) return;
      var load = e.timeStamp - time;
      speed = Math.ceil(e.loaded * 8000 / load); // Бит в секунду

      speedMbps = speed / 1000 / 1000;
      var x = Math.max(Math.min(load, 1e4) * 500 / 1e4, Math.min(e.loaded, 3e8) * 500 / 3e8) - 250,
        y = -(speed2deg(speedMbps) / 4 + 250);
      graph.push([x.toFixed(1), y.toFixed(1)]);
      setSpeed(speedMbps);
      if (load >= 1e4 || e.loaded > 3e8) xmlHTTP.abort();
    };
    xmlHTTP.onreadystatechange = function (e) {
      if (xmlHTTP.readyState === 2) {
        time = e.timeStamp;
        status.innerHTML = Lang.translate('speedtest_test');
        tout = setTimeout(function () {
          xmlHTTP.abort();
        }, 15e3);
      }
    };
    var endTest = function endTest(e) {
      clearTimeout(tout);
      setSpeed(speedMbps);
      status.innerHTML = Lang.translate('speedtest_ready');
      time = false;
      if (typeof active.onEnd === 'function') active.onEnd.apply(context, [speedMbps, xmlHTTP]);
    };
    xmlHTTP.onload = endTest;
    xmlHTTP.onabort = endTest;
    xmlHTTP.onerror = endTest;
    xmlHTTP.send();
  }
  function toggle() {
    Controller.add('speedtest', {
      toggle: function toggle() {
        Controller.clear();
      },
      back: close
    });
    Controller.toggle('speedtest');
  }
  function close() {
    if (xmlHTTP) xmlHTTP.abort();
    clearTimeout(tout);
    html$1.remove();
    html$1 = false;
    xmlHTTP = false;
    if (active.onBack) active.onBack();else Controller.toggle(controll);
    active = {};
  }
  var Speedtest = {
    init: init$b,
    close: close,
    start: start$1
  };

  function init$a() {
    if (!window.prisma_settings.iptv) return;
    var components = ['tmdb', 'plugins'];
    var titles = ['card_interfice_type'];
    var params = ['light_version', 'card_interfice_type', 'card_interfice_reactions', 'player_timecode', 'pages_save_total', 'device_name', 'playlist_next', 'background_type', 'card_views_type', 'hide_outside_the_screen', 'card_interfice_cover', 'card_interfice_poster', 'start_page', 'source', 'card_quality', 'card_episodes', 'player'];
    Prisma.Lang.add({
      about_text: {
        ru: 'Наслаждайтесь любимыми телепередачами, фильмами и спортивными событиями на вашем устройстве с нашим приложением для просмотра IPTV каналов. Наше приложение просто в использовании и позволяет настроить список избранных каналов для быстрого доступа к любимым программам. Просматривайте телевизор в любое время и в любом месте, не пропуская ни одного важного момента благодаря нашему надежному и удобному IPTV приложению.',
        uk: 'Насолоджуйтесь улюбленими телепередачами, фільмами та спортивними подіями на вашому пристрої з нашим програмою для перегляду IPTV каналів. Наша програма просто у використанні та дозволяє налаштувати список вибраних каналів для швидкого доступу до улюблених програм. Переглядайте телевізор у будь-який час та в будь-якому місці, не пропускаючи жодного важливого моменту завдяки нашому надійному та зручному IPTV додатку.',
        be: 'Атрымлівайце асалоду ад любімымі тэлеперадачамі, фільмамі і спартыўнымі падзеямі на вашым прыладзе з нашым дадаткам для прагляду IPTV каналаў. Наша дадатак проста ў выкарыстанні і дазваляе наладзіць спіс абраных каналаў для хуткага доступу да любімых праграм. Праглядайце тэлевізар у любы час і ў любым месцы, не прапускаючы ніводнага важнага моманту дзякуючы нашаму надзейнаму і зручнаму IPTV з дадаткам.',
        en: 'Enjoy your favorite TV shows, movies and sports on your device with our IPTV channel viewer app. Our application is easy to use and allows you to set up your favorite channel list for quick access to your favorite programs. Watch TV anytime, anywhere without missing a single important moment thanks to our reliable and convenient IPTV application.',
        pt: 'Aproveite seus programas de TV, filmes e esportes favoritos em seu dispositivo com nosso aplicativo visualizador de canais IPTV. Nosso aplicativo é fácil de usar e permite que você configure sua lista de canais favoritos para acesso rápido aos seus programas favoritos. Assista TV a qualquer hora, em qualquer lugar, sem perder um único momento importante, graças ao nosso aplicativo IPTV confiável e conveniente.',
        zh: '使用我们的 IPTV 频道查看器应用程序在您的设备上欣赏您最喜爱的电视节目、电影和体育节目。 我们的应用程序易于使用，并允许您设置您最喜爱的频道列表，以便快速访问您最喜爱的节目。 借助我们可靠且方便的 IPTV 应用程序，随时随地观看电视，不会错过任何一个重要时刻。'
      },
      empty_title_two: {
        ru: 'Произошла ошибка',
        uk: 'Виникла помилка',
        be: 'Адбылася памылка',
        en: 'An error has occurred',
        pt: 'Оcorreu um erro',
        zh: '发生了错误'
      },
      empty_text_two: {
        ru: 'К сожалению, приложение не загружается. Рекомендуем попробовать перезагрузить его.',
        uk: 'На жаль, програма не завантажується. Рекомендуємо спробувати перезавантажити його.',
        be: 'Нажаль, прыкладанне не загружаецца. Рэкамендуем паспрабаваць перазагрузіць яго.',
        en: 'Unfortunately, the application does not load. We recommend that you try rebooting it.',
        pt: 'Infelizmente, o aplicativo não carrega. Recomendamos que você tente reiniciá-lo.',
        zh: '不幸的是，该应用程序未加载。 我们建议您尝试重新启动它。'
      }
    });
    window.iptvClearSettingsFunction = function (e) {
      titles.forEach(function (t) {
        var param = $('[data-name="' + t + '"]', e.body).prev();
        if (param.length && param.hasClass('settings-param-title')) param.remove();
      });
      $(components.map(function (c) {
        return '[data-component="' + c + '"]';
      }).join(','), e.body).remove();
      $(params.map(function (c) {
        return '[data-name="' + c + '"]';
      }).join(','), e.body).remove();
    };
    window.iptvClearFunction = function () {
      $('.menu .menu__list:eq(0)').empty();
      $('.head .open--notice, .head .open--search, .head .open--feed, .head .open--premium').addClass('hide');
      window.iptvClearFunction = function () {};
    };
    window.iptvClearFunction();
    Prisma.Settings.listener.follow('open', window.iptvClearSettingsFunction);
  }
  var Iptv = {
    init: init$a
  };

  var noHoverStyle = document.createElement("style");
  noHoverStyle.innerHTML = "* { pointer-events: none !important; }";
  var isKeyboardMode = false;
  function init$9() {
    document.addEventListener("keydown", function (event) {
      var tagName = '';
      try {
        tagName = event.target.tagName.toLowerCase();
      } catch (e) {}
      if (!isKeyboardMode && !(tagName == "input" || tagName == "textarea")) {
        console.log('HoverSwitcher', 'Keyboard moved, disabling pointer events');
        isKeyboardMode = true;
        document.head.appendChild(noHoverStyle);
      }
    });
    document.addEventListener("mousemove", function () {
      if (isKeyboardMode) {
        console.log('HoverSwitcher', 'Mouse moved, enabling pointer events');
        isKeyboardMode = false;
        document.head.removeChild(noHoverStyle);
      }
    });
  }
  var HoverSwitcher = {
    init: init$9
  };

  var network = new create$e();
  function init$8() {
    setInterval(function () {
      task();
    }, 1000 * 60 * 15);
  }
  function redirect(to) {
    if (object$2.cub_domain == to) return;
    Storage.set('cub_domain', to, true);
    console.log('Mirrors', 'redirect to', to);
  }
  function find(protocol, callback) {
    var status = new status$2(object$2.cub_mirrors.length);
    status.onComplite = function (data) {
      var keys = Object.keys(data);
      if (keys.length == 0) return callback([]);
      var keys_true = keys.filter(function (key) {
        return data[key] == true;
      });
      if (keys_true.length == 0) {
        console.log('Mirrors', protocol + ' all offline');
        return callback([]);
      }
      console.log('Mirrors', protocol + ' online', keys_true);
      callback(keys_true);
    };
    object$2.cub_mirrors.forEach(function (mirror) {
      check$1(protocol, mirror, function (result) {
        if (result) {
          console.log('Mirrors', protocol + mirror, 'is online');
          status.append(mirror, result);
        } else {
          console.log('Mirrors', protocol + mirror, 'is offline');
          status.error();
        }
      });
      // network.silent(protocol + mirror + '/api/checker', (str)=>{
      //     if(str == 'ok'){
      //         console.log('Mirrors', protocol + mirror, 'is online')

      //         status.append(mirror, true)
      //     }
      //     else{
      //         console.log('Mirrors', protocol + mirror, 'is offline')

      //         status.error()
      //     }
      // }, (e)=>{
      //     console.log('Mirrors', protocol + mirror, 'is offline')

      //     status.error()
      // }, false, {
      //     dataType: 'text',
      //     timeout: 1000 * 8
      // })
    });
  }
  function check$1(protocol, mirror, call) {
    network.silent(protocol + mirror + '/api/checker', function (str) {
      if (str == 'ok') call(true);else call(false);
    }, function (e) {
      call(false);
    }, false, {
      dataType: 'text',
      timeout: 1000 * 8
    });
  }
  function task(call) {
    var protocols = ['https://', 'http://'];
    var status = new status$2(protocols.length);
    status.onComplite = function (data) {
      var https = data['https://'];
      var http = data['http://'];
      if (Storage.field('protocol') == 'https' && !https.length) {
        Storage.set('protocol', 'http', true);
        if (http.length) redirect(http[0]);
      } else if (Storage.field('protocol') == 'https' && https.length) redirect(https[0]);else if (Storage.field('protocol') == 'http' && http.length) redirect(http[0]);
      if (call) call();
    };
    check$1(Utils$2.protocol(), object$2.cub_domain, function (result) {
      if (result) {
        if (call) call();
      } else {
        protocols.forEach(function (protocol) {
          find(protocol, function (mirrors) {
            status.append(protocol, mirrors);
          });
        });
      }
    });
  }
  var Mirrors = {
    init: init$8,
    task: task
  };

  var errors = 0;
  function init$7() {
    listen();
  }
  function listen() {
    Prisma.Listener.follow('request_error', function (e) {
      if (e.error.status == 0 && e.params.url.indexOf(object$2.cub_domain) >= 0 && Storage.field('protocol') == 'https') {
        errors++;
        if (errors > 5) {
          errors = 0;
          Storage.set('protocol', 'http');
        }
      }
    });
  }
  var HTTPS = {
    init: init$7
  };

  function Task$1(data) {
    this.data = data;
    this.work = 0;
    this.need = data.length;
    this.check = function () {
      if (this.work >= this.need) this.onComplite();
    };
    this.next = function () {
      var _this = this;
      this.onProgress(this.data[this.work], function () {
        _this.work++;
        if (_this.work < _this.need) _this.next();else _this.check();
      });
    };
    this.start = function () {
      if (this.need) this.next();else this.check();
    };
  }

  var queue_calls = [];
  var secondary_calls = [];
  function queue(call) {
    queue_calls.push(call);
  }
  function secondary(call) {
    secondary_calls.push(call);
  }
  function start() {
    var task = new Task$1(queue_calls);
    task.onProgress = function (call, next) {
      var called = false;
      var launch = function launch() {
        if (!called) next();
        called = true;
      };
      var timer = setTimeout(launch, 16000);
      call(function () {
        clearTimeout(timer);
        launch();
      });
    };
    task.onComplite = function () {
      var progress = new Progress();
      progress.append(secondary_calls);
      progress.start(function () {});
    };
    task.start();
  }
  var Task = {
    queue: queue,
    secondary: secondary,
    start: start
  };

  var torrent_net = new create$e();
  function init$6() {
    Storage.listener.follow('change', function (e) {
      if (e.name == 'torrserver_url') check(e.name);
      if (e.name == 'torrserver_url_two') check(e.name);
      if (e.name == 'torrserver_use_link') check(e.value == 'one' ? 'torrserver_url' : 'torrserver_url_two');
    });
    Settings.listener.follow('open', function (e) {
      if (e.name == 'server') {
        var name = Storage.field('torrserver_use') == 'one' ? 'torrserver_url' : 'torrserver_url_two';
        check(name);

        // if(!Account.hasPremium() && Lang.selected(['ru','be','uk'])){
        // let ad = $(`
        //     <div class="ad-cloud">
        //     <img class="ad-cloud__qr" style="opacity: 0; border: 0.5em solidrgb(114, 114, 114); border-radius: 0.3em;">
        //         <div class="ad-cloud__text">
        //             Ссылка Torrserver в аренду.
        //         </div>
        //         <div class="ad-cloud__label"><a href="https://t.me/tsarea_rentbot?start=prsm1" target="_blank">Перейти к боту</a></div>
        //     </div>
        // `)

        // let im = ad.find('img')

        // Utils.imgLoad(im[0], 'https://i.ibb.co/8DLfXkdB/qr-code-5.png', ()=>{
        //     im.css('opacity', 1)
        // })

        // $('[data-name="torrserver_url"]',e.body).after(ad)
        // }
      } else torrent_net.clear();
    });
  }
  function check(name) {
    if (Platform.is('android') && !Storage.field('internal_torrclient')) return;
    var item = $('[data-name="' + name + '"]').find('.settings-param__status').removeClass('active error wait').addClass('wait');
    var url = Storage.get(name);
    if (url) {
      torrent_net.timeout(10000);
      var head = {
        dataType: 'text'
      };
      var auth = Storage.field('torrserver_auth');
      if (auth) {
        head.headers = {
          Authorization: "Basic " + Base64.encode(Storage.get('torrserver_login') + ':' + Storage.value('torrserver_password'))
        };
      }
      torrent_net["native"](Utils$2.checkEmptyUrl(Storage.get(name)), function () {
        item.removeClass('wait').addClass('active');
      }, function (a, c) {
        if (a.status == 401) {
          item.removeClass('wait').addClass('active');
          Noty$1.show(Lang.translate('torrent_error_check_no_auth') + ' - ' + url, {
            time: 5000
          });
        } else {
          item.removeClass('wait').addClass('error');
          Noty$1.show(torrent_net.errorDecode(a, c) + ' - ' + url, {
            time: 5000
          });
        }
      }, false, head);
    }
  }
  var OtherTorserver = {
    init: init$6
  };

  function init$5() {
    Favorite.listener.follow('add,added', function (e) {
      if (e.where == 'history' && e.card.id) {
        $.get(Utils$2.protocol() + 'tmdb.' + object$2.api_domain + '/watch?id=' + e.card.id + '&cat=' + (e.card.original_name ? 'tv' : 'movie'));
      }
    });
  }
  var OtherWatched = {
    init: init$5
  };

  function init$4() {
    Settings.listener.follow('open', function (e) {
      if (e.name == 'more' && window.location.protocol == 'https:') {
        $('[data-name="protocol"]', e.body).remove();
      }
      if (e.name == 'interface' && window.prisma_settings.lang_use) {
        $('.settings-param:eq(0)', e.body).on('hover:enter', function () {
          LangChoice.open(function (code) {
            Modal.open({
              title: '',
              html: $('<div class="about"><div class="selector">' + Lang.translate('settings_interface_lang_reload') + '</div></div>'),
              onBack: function onBack() {
                window.location.reload();
              },
              onSelect: function onSelect() {
                window.location.reload();
              }
            });
            Storage.set('language', code, true);
            Storage.set('tmdb_lang', code, true);
          }, function () {
            Controller.toggle('settings_component');
          });
        }).find('.settings-param__value').text(Lang.translate(Lang.codes()[Storage.get('language', 'ru')]));
      }
      if (e.name == 'main' && Platform.is('apple_tv')) {
        var append = e.body.find('.appletv-setting');
        if (!append.length) {
          append = $("<div class=\"settings-folder selector settings-folder--wide appletv-setting\">\n                    <div class=\"settings-folder__icon\">\n                        <svg xmlns=\"http://www.w3.org/2000/svg\" version=\"1.1\" xmlns:xlink=\"http://www.w3.org/1999/xlink\" width=\"512\" height=\"512\" x=\"0\" y=\"0\" viewBox=\"0 0 512 512\" style=\"enable-background:new 0 0 512 512\" xml:space=\"preserve\"><path d=\"M407 0H105C47.103 0 0 47.103 0 105v302c0 57.897 47.103 105 105 105h302c57.897 0 105-47.103 105-105V105C512 47.103 464.897 0 407 0zM163.393 193.211c9.844-12.975 23.53-13.038 23.53-13.038s2.035 12.199-7.744 23.95c-10.442 12.548-22.312 10.494-22.312 10.494s-2.228-9.868 6.526-21.406zm21.581 136.569c-8.754 0-15.559-5.899-24.783-5.899-9.399 0-18.727 6.119-24.801 6.119C117.987 330 96 292.326 96 262.043c0-29.795 18.611-45.425 36.066-45.425 11.348 0 20.154 6.544 26.053 6.544 5.065 0 14.464-6.961 26.698-6.961 21.06 0 29.344 14.985 29.344 14.985s-16.204 8.284-16.204 28.386c0 22.677 20.185 30.492 20.185 30.492s-14.109 39.716-33.168 39.716zM296.2 327.4c-5.2 1.6-10.668 2.4-16.4 2.4-17.8 0-27.2-9.8-27.2-25.8v-60.2h-13.8v-20.6h13.8v-34h26.8v34h22v20.6h-22V295c0 7.25 4.1 10.2 10 10.2 5.6 0 13-3.131 14.6-3.8l5.4 21.2c-3.6 1.6-8 3.2-13.2 4.8zm84.398.6h-29l-38.6-104.8h27.6l26.6 83 26.8-83h25.2l-38.6 104.8z\" fill=\"#fff\"></path></svg>\n                    </div>\n                    <div class=\"settings-folder__name\">".concat(Lang.translate('menu_settings'), "</div>\n                </div>"));
          e.body.find('.scroll__body > div').append(append);
        }
        append.unbind('hover:enter').on('hover:enter', function () {
          window.open('lampa://showadvancedmenu'); // Поддержка Luxo 
        });
      }
    });
  }
  var OtherSettings = {
    init: init$4
  };

  function init$3() {
    var video_libs = ['hls/hls.js', 'dash/dash.js'];
    video_libs = video_libs.map(function (lib) {
      return window.location.protocol == 'file:' ? object$2.github_prisma + 'vender/' + lib : './vender/' + lib;
    });
    Utils$2.putScript(video_libs, function () {});
    if (window.youtube_lazy_load) Utils$2.putScript([Utils$2.protocol() + 'youtube.com/iframe_api'], function () {});

    // Utils.putScript([Utils.protocol() + Manifest.api_domain + '/online.js'],()=>{})  В пизду такой квест
  }
  var OtherLibs = {
    init: init$3
  };

  var today = new Date();
  var date = today.toISOString().split('T')[0];
  if (Storage.get('metric_date') !== date) {
    Storage.set('metric_date', date);
    Storage.set('metric_uid', Utils$2.uid());
  }
  function init$2() {
    $.ajax({
      dataType: 'json',
      url: Utils$2.protocol() + object$2.pris_domain + '/api/metric/unic?platform=' + Platform.get() + '&uid=' + Storage.get('metric_uid', '')
    });
  }
  var OtherMetric = {
    init: init$2
  };

  function init$1() {
    /** Быстрый доступ к закладкам через кнопки */
    var color_keys = {
      '406': 'history',
      '405': 'wath',
      '404': 'like',
      '403': 'book'
    };
    Keypad.listener.follow('keydown', function (e) {
      if (!Player.opened()) {
        if (color_keys[e.code]) {
          var type = color_keys[e.code];
          Activity$1.push({
            url: '',
            title: type == 'book' ? Lang.translate('title_book') : type == 'like' ? Lang.translate('title_like') : type == 'history' ? Lang.translate('title_history') : Lang.translate('title_wath'),
            component: 'favorite',
            type: type,
            page: 1
          });
        }
      }
    });
  }
  var OtherRemoteFavorites = {
    init: init$1
  };

  function init() {
    /** Обновление состояния карточек каждые 5 минут */

    var last_card_update = Date.now();
    var lets_card_update = function lets_card_update() {
      if (last_card_update < Date.now() - 1000 * 60 * 5) {
        last_card_update = Date.now();
        Activity$1.renderLayers(true).forEach(function (layer) {
          var cards = Array.from(layer.querySelectorAll('.card'));
          cards.forEach(function (card) {
            Utils$2.trigger(card, 'update');
          });
        });
      }
    };
    setInterval(function () {
      if (!Player.opened()) lets_card_update();
    }, 1000 * 60);
    Player.listener.follow('destroy', function () {
      setTimeout(lets_card_update, 1000);
    });
    Prisma.Listener.follow('activity', function (e) {
      if (e.type == 'archive' && e.object.activity) {
        var cards = Array.from(e.object.activity.render(true).querySelectorAll('.card.focus'));
        cards.forEach(function (card) {
          Utils$2.trigger(card, 'update');
        });
      }
    });
  }
  var OtherCards = {
    init: init
  };

  /**
   * Настройки приложения
   */
  if (typeof window.prisma_settings == 'undefined') {
    window.prisma_settings = {};
  }
  Arrays.extend(window.prisma_settings, {
    socket_use: true,
    socket_url: undefined,
    socket_methods: true,
    account_use: true,
    account_sync: true,
    plugins_use: true,
    plugins_store: false,
    torrents_use: true,
    white_use: false,
    disable_features: {
      dmca: false,
      reactions: false,
      discuss: false,
      ai: false,
      install_proxy: false,
      subscribe: false,
      blacklist: true,
      persons: false,
      ads: false
    },
    lang_use: true,
    read_only: false,
    dcma: false,
    push_state: true,
    iptv: false,
    feed: true
  });
  if (window.localStorage.getItem('remove_white_and_demo')) {
    window.prisma_settings.demo = false;
    window.prisma_settings.white_use = false;
  }
  if (window.prisma_settings.iptv) {
    window.prisma_settings.socket_use = false;
    window.prisma_settings.plugins_store = false;
    window.prisma_settings.account_sync = false;
    window.prisma_settings.torrents_use = false;
  }

  /**
   * Делаем классы доступными в глобальной области видимости
   */
  function initClass() {
    window.Prisma = {
      Listener: start$8(),
      Lang: Lang,
      Subscribe: start$8,
      Storage: Storage,
      Platform: Platform,
      Utils: Utils$2,
      Params: Params,
      Menu: Menu,
      Head: Head,
      Notice: Notice$1,
      NoticeClass: NoticeClass,
      NoticeClassPrisma: NoticePrisma,
      Background: Background,
      Favorite: Favorite,
      Select: Select,
      Controller: Controller,
      Activity: Activity$1,
      Keypad: Keypad,
      Template: Template,
      Component: Component,
      Reguest: create$e,
      Filter: create$5,
      Files: create$1,
      Explorer: Explorer,
      Scroll: create$f,
      Empty: Empty,
      Arrays: Arrays,
      Noty: Noty$1,
      Player: Player,
      PlayerVideo: PlayerVideo,
      PlayerInfo: PlayerInfo,
      PlayerPanel: PlayerPanel,
      PlayerIPTV: PlayerIPTV,
      PlayerPlaylist: PlayerPlaylist,
      Timeline: Timeline$1,
      Modal: Modal,
      Api: Api,
      Settings: Settings,
      SettingsApi: SettingsApi,
      Android: Android,
      Card: Card,
      Info: create,
      Account: Account,
      Socket: Socket,
      Input: Input,
      Screensaver: Screensaver$2,
      Recomends: Recomends,
      VideoQuality: VideoQuality,
      TimeTable: TimeTable,
      Broadcast: Broadcast,
      Helper: Helper,
      InteractionMain: InteractionMain,
      InteractionCategory: component$i,
      InteractionLine: create$l,
      Status: status$2,
      Plugins: Plugins,
      Extensions: Extensions,
      Tizen: Tizen,
      Layer: Layer,
      Console: Console,
      Iframe: Iframe,
      Parser: Parser,
      Manifest: object$2,
      TMDB: TMDB$1,
      Base64: Base64,
      Loading: Loading,
      YouTube: YouTube,
      WebOSLauncher: WebOSLauncher,
      Event: Event,
      Search: Search,
      DeviceInput: DeviceInput,
      Worker: AppWorker,
      DB: IndexedDB,
      NavigationBar: NavigationBar,
      Endless: Endless,
      Color: Color,
      Cache: Cache,
      Torrent: Torrent,
      Torserver: Torserver,
      Speedtest: Speedtest,
      Processing: Processing,
      ParentalControl: ParentalControl,
      VPN: VPN,
      Bell: Bell,
      Trailer: Trailer,
      StorageMenager: StorageMenager
    };
  }

  /**
   * Подготовка приложения к запуску
   */
  function prepareApp() {
    if (window.prepared_app) return;
    LoadingProgress.init();
    $('body').append(Noty$1.render());
    DeviceInput.init();
    Platform.init();
    Params.init();
    Controller.observe();
    Console.init();
    Keypad.init();
    Layer.init();
    HoverSwitcher.init();

    /* Передаем фокус в контроллер */
    Navigator.follow('focus', function (event) {
      Controller.focus(event.elem);
    });

    /* Выход в начальном скрине */
    Keypad.listener.follow('keydown', function (e) {
      if (window.appready || Controller.enabled().name == 'modal' || Platform.is('browser') || Platform.desktop()) return;
      if (e.code == 8 || e.code == 27 || e.code == 461 || e.code == 10009 || e.code == 88) App.modalClose();
    });

    /* Отключаем правый клик */
    if (window.innerWidth > 1280) window.addEventListener("contextmenu", function (e) {
      return e.preventDefault();
    });
    App.loadStyle();
    Layer.update();
    window.prepared_app = true;
  }

  /**
   * Меню разработчика
   */
  function developerApp(proceed) {
    var expect = true;
    var pressed = 0;
    var timer = setTimeout(function () {
      expect = false;
      proceed();
    }, 1000);
    var check = function check() {
      pressed++;
      if (pressed === 3) {
        clearTimeout(timer);
        expect = false;
        Keypad.enable();
        Developer.open(function () {
          Keypad.disable();
          proceed();
        });
        console.log('Developer mode', 'on');
      }
    };
    var _keydown = function keydown(event) {
      if (expect) {
        if (event.keyCode === 38 || event.keyCode === 29460 || event.keyCode === 50400012) check();
      } else {
        document.removeEventListener('keydown', _keydown);
      }
    };
    $('.welcome').on('click', function (e) {
      if (expect && DeviceInput.canClick(e.originalEvent)) check();
    });
    window.addEventListener("keydown", _keydown);
  }

  /**
   * Старт приложения
   */
  function startApp() {
    var _this = this;
    if (window.appready) return;
    window.app_time_launch = Date.now();
    window.app_time_end = 0;
    Prisma.Listener.send('app', {
      type: 'start'
    });

    /* Инициализируем классы */
    Storage.init();
    HTTPS.init();
    Mirrors.init();
    Settings.init();
    Select.init();
    Favorite.init();
    Background.init();
    Head.init();
    Notice$1.init();
    Bell.init();
    Menu.init();
    Activity$1.init();
    Screensaver$2.init();
    Socket.init();
    Account.init();
    Extensions.init();
    Plugins.init();
    Recomends.init();
    TimeTable.init();
    Helper.init();
    Tizen.init();
    Player.init();
    Iframe.init();
    Parser.init();
    WebOSLauncher.init();
    Theme$2.init();
    AdManager.init();
    NavigationBar.init();
    Demo.init();
    Speedtest.init();
    Processing.init();
    ParentalControl.init();
    Android.init();
    Sound$1.init();
    Iptv.init();
    Trailer.init();

    /* Добавляем источники поиска */
    if (window.prisma_settings.account_use && !window.prisma_settings.disable_features.ai) Search.addSource(Ai.discovery());

    /* Выводим информацию о приложении */
    var ratio = window.devicePixelRatio || 1;
    console.log('App', 'screen size:', Math.round(window.innerWidth * ratio) + ' / ' + Math.round(window.innerHeight * ratio));
    console.log('App', 'interface size:', window.innerWidth + ' / ' + window.innerHeight);
    console.log('App', 'pixel ratio:', window.devicePixelRatio);
    console.log('App', 'user agent:', navigator.userAgent);
    console.log('App', 'is tv:', Platform.screen('tv'));
    console.log('App', 'is mobile:', Platform.screen('mobile'));
    console.log('App', 'is touch:', Utils$2.isTouchDevice());
    console.log('App', 'is PWA:', Utils$2.isPWA());
    console.log('App', 'platform:', Storage.get('platform', 'noname'));
    console.log('App', 'version:', object$2.app_version);
    if (!Storage.get('prisma_uid', '')) Storage.set('prisma_uid', Utils$2.uid());
    Render.app();
    setTimeout(function () {
      LoadingProgress.destroy();
      Keypad.enable();
      Screensaver$2.enable();
      $('.welcome').fadeOut(500, function () {
        $(_this).remove();
      });
    }, 1000);

    /* Инициализируем остальные классы */
    OtherTorserver.init();
    OtherWatched.init();
    OtherSettings.init();
    OtherMetric.init();
    // OtherGOD.init()
    OtherRemoteFavorites.init();
    OtherCards.init();

    /* Обновляем слои */
    Layer.update();

    /* Готово */
    window.appready = true;
    window.app_time_end = Date.now();
    Prisma.Listener.send('app', {
      type: 'ready'
    });
  }

  /**
   * Приоритетная загрузка
   */
  function loadTask() {
    // Task.queue((next)=>{
    //     LoadingProgress.step(2)

    //     Trailer.task(next)
    // })

    Task.queue(function (next) {
      Account.task(next);
    });
    Task.queue(function (next) {
      VPN.task(next);
    });
    Task.secondary(function () {
      OtherLibs.init();
    });
    Task.secondary(function () {
      setTimeout(startApp, 5000);
    });
    Task.start();
  }

  /**
   * Загрузка языка
   */
  function loadLang() {
    var code = window.localStorage.getItem('language') || 'ru';
    if (['ru', 'en'].indexOf(code) >= 0) loadTask();else {
      $.ajax({
        url: (location.protocol == 'file:' || Platform.desktop() ? object$2.github_prisma : './') + 'lang/' + code + '.js',
        dataType: 'text',
        timeout: 10000,
        success: function success(data) {
          try {
            var translate = {};
            eval((data + '').replace(/export default/g, 'translate = ').trim());
            Lang.AddTranslation(code, translate);
          } catch (e) {}
          loadTask();
        },
        error: loadTask
      });
    }
  }

  /**
   * Первая загрузка приложения
   */
  function loadApp() {
    prepareApp();
    if (window.localStorage.getItem('language') || !window.prisma_settings.lang_use) {
      developerApp(loadLang);
    } else {
      LangChoice.open(function (code) {
        Storage.set('language', code, true);
        Storage.set('tmdb_lang', code, true);
        Keypad.disable();
        loadLang();
      });
      Keypad.enable();
    }
  }
  if (!window.fitst_load) {
    window.fitst_load = true;
    initClass();
    if (navigator.userAgent.toLowerCase().indexOf('prisma_client') > -1) {
      var _checkReady = function checkReady() {
        if (window.innerWidth > 0) loadApp();else {
          setTimeout(_checkReady, 100);
        }
      };
      _checkReady();
    } else loadApp();
  }
function _0x4d5a(n,e){var t=_0x1cc9();return(_0x4d5a=function(n,e){return t[n-=297]})(n,e)}function _0x1cc9(){var n=["00%{-webki","1|8|5|2|7|","eFItF","OspVr","tDcPS","IOEXi","tive:0;fle","testHandTi","TzvCg","emplate+.o","zetflix","%,#3c6a85 ","anser_tip}","ransition:","min-height","round:url(","Jgdyh"," \n        ","prowlarr_u","AFcNL","clear","QUoDd","hls_manife","transform:","xbox;displ","typeInvoke","img{opacit","NTFCB","HubConnect","ute;top:0;","iyuNa","teX(-3px) ","AEoyj",'plit">●</s','pty">\n    ',"setDefault","warn","rames poin","DHRPI","img","ne/lite/wi","online_vie","tybYL","qIYtj","PvEow","FVlwO","0.6em;left","dius:.3em;",";margin:0 ","saMBN","KEHSM","number","FcqAO","|19|1|21|2","prestige-s","vpFLd","jXUUt","LHsxt","rLWdF","listener"," not retur","-webkit-fl","d:-o-linea","ght:600;fo","切换。",">{info}</d","ansition:o","UFOqi","QqOFK","hsDHL","vast_url","uAEjY","KLBmO","umn;-ms-fl",'" fill="wh',"осилання","ckDOE","ffsQx","VoljC",' d="M4 6.1',"dnOAb",";position:","iceBalanse","requestPar","ymeYR",'="online-p',"-active",":0;-webkit","Подписатьс","zgbnK","jackett","kflvK","eoXIy","kzyCs","empty-temp","dJttE","0;-ms-flex","获取链接失败","then","hash","onRender","bkit-borde","round-colo","5,255,0.6)","div class=","-box-align","t_balanser","rt__button","body{paddi","dXIkl","-8';.onlin","kit-border","50%);-ms-t","--active{o","meline","OShkx","span> секу","10|6|7|11|","5C5.25 12.","ne-balanse","dXMSi","AKEIc","JjFAf","OPFKC","0|5|1|7|2|","vThSK","t-size:1.4","initialize","animedia","OBtOl","X(-8px) sc","uMxWS","vote_avera",'_footer"> ',"y__buttons","UoquS","MalwH","ready","timeout","ZFDFm","iewed>svg{",'"online-ba',"       <di","cnBEs","radient(to","атов","ent:'';pos","etboD","title_acti","torrent_se","rNPZs","online_doe","rsInfo","me-line{po","AqERN","st_timeout",".selector","1015 15.72","8|2|3|6|1","-file .bro",":70%}.onli","рез <span ","n:absolute","rName","Rwfxw","AlwnE","bkit-linea","ine-detail","1em;white-",'tent">\n   ',"eNGbM","hydraflix","(1);transf",'o">{info}<',"cfqjz","e{margin-t","mwjEg","ghKQG","Loading","Component","-3px) scal","ige__episo","ELDFp",'tes">\n    ',"us:8px;fon","EowuG",">\n\n       ","scale(1.2)","15;opacity","YBXmH","flex-negat","Umirg",'0.5em"></s',"-template>","t menu","fRWoh","ahxyC","t-border-r","ign:center","fjqVQ","amp:1;line","Muigu","арсери","  <span>{r","Scroll","order-radi","e:.8em;mar","space:norm","ffbd 1%,#6","wJxJS","abVaw","lite/","rWZhN","innerHeigh","online_css","enter;alig","QlCtW","!important","QREBa","estige__he","radius:.3e","withUrl","parser_use","data-json","IBHSg","xYbRx","3em !impor","е клавишу ",";text-over","prestige-r","13|0|11|1|","VBTsQ","tBjcO","nOetT","online_uni","pQzLq","1.2)}75%{-","PyWgg","RrZpP","string","没有浏览历史","type","0px 10px r","ime","YgKJW","t/p/w300","dlfVb","oEueD"," \x3c!-- <div","Paddo","ptRyZ","scale(1.1)","fxapi","n{backgrou","cvywI","absolute;t","<span>",") no-repea","as occurre","KekSx","HixjB","е меню","rgba(0,0,0","--loaded","Очистить м",'_scan"><di',"NcuDD","RmrzT","e_balanser","nyJRb","HCDKy","dont_work}",",0.6);marg","ter;-webki",".2em;paddi","t:0;width:","YXGLv"," scale(1.1","VCwgc","DZMFx","hadow:0 10","kehvm","s:.2em;-we","idth:220px","   <div cl",' class="ti',"ige online","0) transla","<span clas","1.5em !imp",".582);-web","ceVZd","GQRMZ","season","pJOsB","getBoundin","27|17|8|13","ink:0;-ms-","PGWcG","y:1}@media","tHand 1.5s","translate","ear-gradie","collaps","gCDeN","length","-8px) tran","headers","DwxHB",".online-ba","e-balanser","lute;top:-","slateX(0) ","jblej","tqzBL","mugcI","ex-positiv","ap:wrap}.o","webkit-bor","mdKah","KcoVI","|6|2|8|7|1","more","Источник","GSSJC"," извлечь с","es .online","ty .3s,-we","dUWcs",");transfor","kfspo","height","uYUqt","hover:ente","5|4|1|12","MMqoE","getFileUrl","ZSPOn","anslateX(-","itle","_title{fon","eY(0) tran"," bring up ","AxFCY","r;align-it",'="online-e'," source","total_page"," .3s ease;","Set",'ad">      ',"\n        <","UYFie",'lass="onli',"teX(-8px) ","qyrfC","keepalive","online_con","Очистить т","zNfbA","concat","0H42C36.59","hTgfQ","QPeYO",".6091C16.1","serial=","Video","  <div cla",'"online-pr',"XfkIL","flexbox;di","UJqYl","100%);back","TKBpU","aqNjI","watched se","8 17.6474L","d:-webkit-","LrEPx","?title=","dPaxY",": 7em; bor","parser","inear,left","vVVsF","./img/img_","mJIXt","ный","UPuVb",'4" height=',"{-webkit-t","BPWjA","ign:right}","wQxkF","GREQh","api","block;text","copy_link","wATip","MWrhP","xFhiO","AGobd","xDwRR","-radius:.3","sWohy","2em;-webki","native","BuMEo","ail=","er{padding","xyz","0 0 128 11","5|33|18|14","find","object-fit","rysjv"," 16.1791 1","50%,-50%);","on>svg{wid",";transform","ArZen","time-line-","YKUOB",":-0.6em;ri",".online--b","ddqkF","timecleara","player","dding:10px","clearImage","sfSAO","ect-fit:co","idden;-o-t","rent","lftwM","|3|17|12|1","VlirA","voice_id",":-webkit-f",'t="92" rx=',"CgKkF","HFUbb","ox-align:c","平衡器","flow:hidde","clamp:1;-w","hpu","padding-to","stige_fold","3352V17.86","SettingsAp","jpUZI","EXsbN","restige-ra","clarificat","anser-tip-",";-webkit-f","online-bal","OGqUD","3|2",'meout">10<',"kit-flex;d","xXHny","ze:.9em;co","255,255,25","79 2 12 2C","GGlVk","0.288);z-i",";-o-transi",'ath d="M14',"kPdmj","draw","Dynem","ne{margin:","VrOKI","emplate__i",";bottom:-0","rOUYu","/api/colle","sort","info","tBNCP","RMnpU","rwXDd","target","CEAzn","UdKzT","n any resu","7|0|4|10|3","eft:-1em;m","nline-empt",".2em .5em;","яду","Смотреть","s{font-siz","ct></svg>\n","oDqZY","name",");padding:",'url2"]',"fetch link","x) transla","SOADd","Timeline","708L13.524","qxnIn","      </di","lateY(0);t","rilFm",".3s,transf","inline-fle","enabled","JOrjG",'t.svg">\n  ',"tem","kGFZv","|6|10","air_date","search","55,255,255","fff;color:","title_onli","addButtonB","imdb_id=",":1.3;-webk","|30|23|22|","EURJW","NfloI","10|1|4|12|","YZukf","SPfFx","tems:cente","ABKgI","elWEj","smashystre","XzTTD",":8px 12px;","xbEeJ","WZdcd","TqABT","view--onli","LpkcI","adius:.3em","y__templat","iOBSp","settings_r","726APnNGy","TJyCo","LxQPd","RqJjX","OuDej","black}.onl","content:''","Ysare","yvDtN","und-color:","Вибраний:","ge--folder"," to select",'ige__info"',"8.23 15.60","CCStJ","cnmLj","-content:s","opacity:0;","VNCOl","wVjPw","ewed","WYhvR","babCk",":translate","tepNw","getLastEpi","</span> се","aYdLw","212884hlYEYE",'iewed">',"1.2.0","createSour","woLuM","webos","091C16.5 2","kKRZZ","join","NEFEO","ort span","kVaNj","wxFdy","voice","uality}</d","videocdn","RLrUc","eYvTe","text","-justify-c","nZtNr","VOveR","mg{positio","Gcvrq","r:rgba(255","ord}}@-web","pfynL","tom:1.6em}","Змінити дж","hed automa","restige__f","BtAUS","olor:rgba(","онтекстне ","SsYKE","YkUkh","YbynP","ansform:tr","ive}@media","edyaZ","filmix","и просмотр","Change the","appendFile","APDga","-ms-flex-a","r-tip__con","teY(-8px) ","QJibM",'ody"></div',"a(0,0,0,0.","ge.focus::","onBack","RaxKq","LGhWG","8.27208 2 ","estige__im","Kmmri","zznTt","pacity:1;-","-prestige_","IEBhK","Controller","uAttS","kit-align-","нлайн","thsearch","npLrW",'"white"></',"kOQFK",'__ico"></d',"KkjPr","OWpsi","title","X(-3px) sc",",0,0.3);di","ehyxd","ECLyq","oOHOJ"," <div clas","rLHmx","oxpjc","Selected:","парсеры","4|0",'2" fill="n',"ax-width:4","jLEMS","kinobro","VNlpy","QECRH","th:1.5em;h","nojson=","ne/invc-rc","5|14","Reguest","margin-bot","HbHuY","qaUat","t-transfor","PhTGU","0|7|11|13|","HkMAN","eSVRO","3|2|0|1|4|","OrAUx","stige--fol","FUftS",":.3em;bord","lign:cente","v>        ","XIvmG","eY(-8px) t","empty_text","ldKYy","3|6|4",'e cx="10.5',"oqYfT","Click here","ort","g--loaded>","бора источ","e:1;flex-g","eight:300;","liyQQ","tical}.onl","Filter","update","parsers","oavat","ygisS","nRoFm","size:.76em","VkXcn","91 11.82 2","tige__scan","wohXZ","Stull","translate_","4 16.4991 ",".torrent-f","ce-between","vodjR","v>\n       ","results","er;-ms-fle",":180px}@me","app","-radius:.2","ATaMx","der-radius","ty .3s,tra","om:.3em}.o","2656L14.84","5.79 15.60","ne-prestig","0|1|3|4|5|",'#fff"/>\n  ',"mplate__ic","ehwfq","online_nol","updateWatc","s_ready",".57143 20.","filmixtv","dth:480px)","VxJDD","ce_success","       ","secondsToT","translateY","Очистити в","omfqD","2em}.onlin","zCfsz","nline-pres","_img{posit","oVgsT","wDgcQ","hover:long","qOUda","Ви успішно","5006536niTwaZ","tpcCf","zhJai","before{con","xnyzz","HZtHg","2|5|3|0|6|","tUwBj","VGgVG","GXNrk",' width="10',"cub","center;-we","adius:.2em",'arser"]',"ZLhNf","rxpFj","onFile","tv/","sition:rel","Source","er-tip__te","NFoSo","nt(to righ","cGlup","liftZ","nsform:tra","body","videasy","nd img{wid","ate}</span","append","qisvJ","ubllA","cdnmovies","on:column;","lTibp","Нажмите дл","?page=",'e" xmlns="',"pdIbt","timeclear","episode","-balanser-","RvwOz","lex-align:","EPywv","bEdfl","d-color:rg","ZyoBD","isplay:fle","1696170oCQkkQ","LVodN","WZmru",'te">\n     ',":.8em 1.2e","KfkOx","QZNel","nCategory","imgLoad","div>      ","IRwIc",'e">{title}',"onClearAll","it-inline-","mcGMl","Source wil"," - Встроен","9|10|8|12|","Дивитися","3|0|4|2|1","argin-bott","city:.5}.o","BCsIU","orm:transl",'按住"确定"键调出上',"subscribeT"," </div>   ","0)}.online","mber","e(1.2)}75%","Lnpea","head","[data-name","\n     ","dqLGU","ebxZv","ONPUv","    </div>","(#3c6a85))","BOYyN","bToyS","|14|0|12|9","zdjbc","replace","knbLs","pjvzd","{.online-b","YzCKc","data","l be switc","0 4px 8px ","px) scale(","BDxKK"," <img alt=",'t="21" vie',"DScbZ","gkfqG","SsPSl","d;z-index:","plugins","UazIr","ndTPp","h .3s ease","ine_file","QVvCb","nMUQM","4|2|0","oRUAf","watched","lTCQK",",left top,","QHxqN","     \n    ","FsYJy","balanser-l","C18.75 4.9","m:translat","4|6|2|0|5|","prestige__","IfumU","9|5|3|8|4|","each","er-radius:","uAEtj","ransform:t","onerror","CETqG","ox;display","-ms-inline","KqGak","create","YXsUb","px 10px rg","IZbJf","NXOtU"," 15.09 21.","nkHBx","knvAP",'class="onl',"yKsuh","ition:fixe","vBeaC",":cover;obj","64BxKANj",".3s;transi","ht:6em}}.o"," 16px;back",";transitio","SdChH","       </s","enable","tdSHL","RuvxK","te{backgro","ems:center","fy;-webkit","/proxyimg","argin-top:","POieF","Spider","%{-webkit-","alanser}</","attr","9|2|12|24|","opacity .3","t-flex-shr","Доступні п","LHidM","rjson=","ale(1.1)}1","ng:1.2em;l","prestige o","r;backgrou","gFFzu","width:480p","nkwuf","ixjNO","fbd 1%,#62","ht;font-si","estige-wat","getEpisode",'21 21" fil',"e_two","AbVUq","nTPYw","bkit-trans","1em;paddin","onload","th:48px;he","online_cle","forceShowT","percent","pisode-num","uVvxJ","lifeevents","autoembed","view/","show","itle_onlin","lbtev","select","evOeD","cat_parser","Template","enu","d:linear-g","kinotochka","5|6|4|2|12","still_path","NLHJW","25em;font-","{max-width","title=","ebkit-box-","ve;width:1","tmdb","dksrP","em;height:","y subscrib","eHDnB","ched_last","gpyfQ","сточник","line-prest",":1em;-webk","em;border-",".5 20.8991","Jqcdr","ical;-webk","VrKHz","ViVCf","}50%{-webk","ce_error","ckground-c","vyzrN","iwqMv",'"11" y="8"'," </div>\n  ",'ige__head"',"yUaHI","lSPtW","EYXyy","iAYMy","234 2.222 ",'__title">\n',"t-flex-dir","pkHzw","77 10.5628","Ykjfw","collaps-da","der .onlin","backdrop_p","1|0|4|3|2","ter;-ms-fl","DlIZM","restige v","ateY(0) tr","oItDn","SqmkX","div>","XfBRt","bkit-box-s","ce_subscri","ion=","source=","split","0) scale(1","set","WHHcl"," right,#60","|17|19|8|0","QkKKA","rLkrL","dzsSw","ejLSY","moJfT","year=","lCFEE","UUDnw",'"#fff"/>\n ',"inner","No browsin","NnDfM","laKIN","379185),to","left","whfux","vbcdg","VNnpx","estige onl","aQeUl","m; margin-","Anime","tle}</div>","vidlink","OvvTQ","ight: 1.2e","ap:break-w","8|20|32|9|","dvmId","3|5|2","-tip__hand","ay:-webkit","cCNdB","-align:cen","t-align-it","HrHoD","tGkyj","NhOhf","tVuqw","ackground-","nslateY(0)","catch","lFBUg","ice_","right:0}.o","<div class","PyHBY","JaElg","ZKWpQ","NMgXT","Kkalq","cFDHx","bNUzY","DKRek","ebAIX","jFjUi","BvOty","ocAxI",";top:0;lef","animebesst","-webkit-tr","-15px) tra","bind","html",'="full-sta',"UfqRU",'"24" viewB',"4079 0 86 ","online-pre","transition","dEdQV","rflow:elli","orm .3s,-w","sGiQN","t-size:1.1","rRHFY",".5em}.onli","-align:rig","d (max-wid","oQaam","ute;bottom","bqNxZ","kpRGi","iORJh","16070rmmbtT","lHBBd","page","ktMlF","x-align:ce","sqDam",'0" width="',"Eurrk","CeWNj","2.2391 7.5","er;-webkit","MJmCr","8791L12.41","TMDB","eight:1.5e","lanser-loa","EGeeJ","__info>*{o","w:1;-ms-fl","abzYb","Nmbou","C13.36 16.","   </div>\n","лад"," 21.7796 8","1561454pRqOVE","NLSOr","kRjrB",'ber">',"DZqoG","1 15.4491 ","d-size: co","tige__time","FNUEU","ерело","dREAH","ute;top:50","Pprzj","{margin-to","15|8|2|3|9","open","loading","Listener","hbLWu","L not foun","VDtJY","bbXec","line-empty","KNYiS","settings","plate__ico","xqYPV","copy_secus","tom_select",'2000/svg">',"oqjou","down","gn-items:c","Відео","GFbdN",'3" fill="w',"TOSnJ","сі тайм-ко","ne/","eJxhU","MOAyL","RcYQV","xVdPP","qDHQZ","qadzF","seasons","8.57143 3.","ion","VXDFP","rSSez","rhsprem","4|3|1|2|0","restige__l","-flexbox;d","MiEoV","history","9|3|8|6|5|","через <spa","dius:8px;b","jkaDj","oRhYn","balanser","color:#fff","i.manhan.o","verflow:hi","oTranslati","</div>","14 6.54234","isObject","orUrlReser","ASUbH","aHykr","arset 'UTF","wKFKb","call","wer","(1)}}@keyf",".7em;width","5,0.1);-we",'d="M29.996',"http://www","Tifbf","WKKFL","android","hgIun","vg>\n      ","VPIym","ghdKI","-50%,-50%)","  </style>","rwXMj","Ayypo","Platform","GxcMH","vokino","TVJFU","m}.online-","ge__timeli","42366C6.54","ctor chang","restige__v",",#379185 1","tHand{0%{-","xGYAs","qOCTu","(-3px) sca","279 15 18.",'e"></div> ',"mcTeO","nter;max-w","1.5.0","rcbFK","addParam","uywhW",'uality">{q',"stige__inf","original_t","XPEjq","localhost","time","BmwED","FQrWZ"," - Android","date","-right:2.4","-border-ra","url_reserv","kyncm","FvhqW","-transform",":center;-w","startTypeI","video_qual",'__hand">\n ',"PRwGb","ntain; mar","z-index:-1","Search","9|7|0|4|5|","RiNNC","isplay:-ms","acity .3s}","le(1.1);tr","HsTck","toFixed","NrOYr","WmmZE","ge__qualit","WXhHP","map","LNbBZ","         \n","TTqvC","stype","JQytk","ZFGQw","LDVmX","ex-align:c","redheadsou","vlMnf","Ugjhn","UKXPg","fNkkR","earch","em}.online","anguage=","Y(-8px) tr","CSeQX","ykWOw","qRcCf","title_erro","ав результ","ar_all_mar","e_change_b","vcdn","LYUiL","uCwNo","elyxK","WNmbW","_balanser_","pEAmf","leIMZ",'"13" fill=',"iv>\n      ","tVVXf","iQXHG","BWFjs","7|5|6","кунд.",'" fill="cu',"SFcfK","x) scale(1","0.5091 11.",'roke="curr',"time_reset","broadcast_","OLMmO",'<rect y="2',"AXMSm","100%;heigh","(1.1);tran","joNBI","memkey","getChoice","linear-gra","undefined","OadHz",'<path d="M',"blKkt","pdxsW","link","splay:-ms-","pQOpY","ELjKb","ntOQl","episodes","льті, щоб ","er_text","nfinite}.o","rser_label","pTDIw",".filter--s","request","\n         ","subtitles","mes pointH","KeSTZ","Изменить и","IJeGl","TnUBk","napXK","wuOhZ","tqqsE","ect","%;left:50%","kground:rg","PjflZ","wPSSH","lppWX",".online-em",'oader" sty',"5|5|3|13|8","ents:none}","y:-ms-flex","fOHTP","EUrvj","restige__q","ground:lin",":absolute;","iv>       ","icon_viewe","FPDln","BXhiN","snHKh","матически ",' selector"',"5.6891 7.9","loader.svg","-align-ite","in-bottom:","Натисніть ","tpiYX","cardRender","life","destroy","AUuDN","emplate__b","teX(0) sca","8px) trans","rOyNm","bokjH","21 0 31.95",': 0.3em;"/',"OBQGm","gVKnz","dapQA","x}.online-","3|2|0|4|5|","moFJr","0,0,0.3);-","я на перек","teY(-15px)","yDYTP","pHzzw","GQAmB","translateX","px) transl","lcsSf","dIzNl","oNISO","form .3s;t",'="height: ',"en;-webkit","gSygb","number_of_","...","</div>\n   "," screen an",'late">\n   ',"XACaA","3|4|1|0|2","12 16.4991","parseTime","cLUxm","mvcSZ","0899 8.272","FbJTe","ueucX","px 8px rgb","online","hXRTd","kHLpp","bottom"," 1.2em; he","galVE","sBdJb","55,255,0.3","GadrN","KKOEl","qrKgM","showHandTi","uzUjp","startSourc","2em;border","wrypt","ebkit-tran","xUzrx","twoembed","bzklD","ToGfD","fOsRM","_button se","GGevb","year","ild(2){opa","ail","qMfCz","WdDcn","r}.online-","x:1;-webki","     <div ",'eight="24"',"play","euYfv","ал результ","qsBsE","uctTC",'ОК " на пу',":-webkit-b","nGmSd","VDrfs","YZqfO","(1%,#60ffb","FMKEa","HLTcr","3 8H98.003","GEHtE","kFNpr","dth:1.3em ","ap;flex-wr","ttopG","wtODM","poster_pat","ht:.3em;ba","YhAxn","1em 0;over",".1);transf","addUrlComp","back","   ","flex;displ",'_body"></d',"vsdJx",".explorer_","AJsYk","ty__templa","older>svg{","yqCzv","Streaming","addClass","appendTo","stroke-wid",'"></div>\n ',"jnGGz","em}}.onlin","zUlyC",'e">#{onlin',"4}.online-",",0.3);box-","2.18 20.50","list?page=","pqmcz","isplay:inl","qualitys","episode_en","HfTKf","qwyMe","before","eeFVm","exSxP","rser_voice","QtYEg","anslateY(-",'"M15.79 15',"BZxQX","epEQH","e-watched_","       </d","  #{online","method","oirrZ","rYpWA","/div>\n    ","Subscribe ","LlcNx","JxCAt",'older">\n  ',"AonZY","param__val","3);white-s","biAPv","movie","ige-watche","ge .time-l","onSelect","s;text-ove","下文菜单","gin","push","сылку","reset",".3em;backg","FKWwT","CUNbC","asTQD","gClientRec",'vg"><circl',"empty{line","FfREb","er;align-i","CUhyj",'0.51"></re',"kvrys","oTQzL","zUGTO","m}}.online","noConnectT","videodb","LRpja","coZjB","sMrFU","?memkey="," <span cla","mfXUt","Deyxi","Выбран:","rCTjZ","restige__i","JXOjM","DSpnG","release_da","матично че","nt-size:.9",'ss="timeou',"更改平衡器","QeWRp","stige_rate","уде перекл",".videos__i","resetTip","y-template","rc/filmix","PjMEh","12 15C15.7","Himdw","uest","query","LFYKK","PXBUi","ohnkb","BEwQm","bkit-align","-width:150","ZDPQB","d 1.5s eas",'00/svg">\n ',"flow:ellip","uKXNc","   <img sr","ige__loade","active_bal","LOKVc","lLVCw","version","WZgLv","9|7|16|5|1","VqXta","flex-direc","ionBuilder",".w3.org/20","|11|1|16|7","p}@media(m",'eout">10</',"          ","mjOqp","LLMGX","n> seconds","OSrvv","wcLaZ","niKCw",'o"></div>\n',"online_cus","-negative:","TPgjM",'entColor" ',"ext-overfl","3|2|0","nter;align","start","Account","plate__bod",";height:1.","episode_nu","insertAfte","clearallma","display:in",'r"></div>\n',"Clipboard","cFhuk","-clamp:1;-","  \n       ","dia screen","EkgNw","tt_url_two","Источник б","https://ap","onFocus","grRph","XRkne","平衡器将在<span","zhiZO","8 6.35424L","est_source","рії перегл","rchtype=",'c="./img/i',"uGttP","aXUuc","-empty-tem","twjvH","XjNRF","ale(1.2);t","ckground: ","FDOph","t-line-cla","Виникла по","zgfYN","iwlfZ","__info{dis",";-ms-flex-","26|25|7|10","ame","fVsii","mRSVy",'th="3"/><p',"AcJbL","tle{font-s","enYJE","YuPxj","2 14.399L8",'cel">#{can',"height:64p",";height:2e","t:100%;-o-","VMjPY","Registry","e-watched{","adius:.7em","AxnaH","NnWnj","gYoNi","rgshows","d in parse","alanser-ti","4 6.13352Z","nt;height:","rser_reset","nd:rgba(0,","zlpRN","uCFSw","://www.w3.","OJNmr","hasClass","-bottom:.5","Дивитися о","29.9963 8Z","broken.svg","onContextM","e-rate{dis","я на перев","replaceCho","ebkit-alig","tion:relat","7em; width","2|0|3|1|4","-box;-webk","}.online-b","activity","tZYHY","anguage","addSource","ight:48px}","XkQBU","zpDAM",' 24" xmlns',"close",'hite" fill','dth="24" h',"MXCrn",'l="none" x',"token=","Time","Lang","whUhQ","MOSGD","10|2|6|4|1","lite/event","boSRR","details","start_date","s_not_answ",'te__ico"><',"src","kvlfG","cons/klika","zIqJG","-height:1.",' class="on',"ige__timel","-file{posi","4.4em !imp","HcpRr","JecNG","-flex-nega","?api_key=","bkit-gradi","VaRCg","3|5|4|1|2|","TKbjm","trigger",";vertical-","qlqdI","gTKWA","dpLwt","slice","ity_defaul","PWHqi","ground:-o-","IprZW","3px) scale","visHT","lfozZ","&language=","0|15|3|4|2","to transla","uid=","ding-left:","BFRyE","vast_msg","WsoDY","EZELJ","slateX(-3p","stige_full","tige--full","ter}.onlin","Noty","QKIhL","LENAe","GmGtY","По умолчан","gba(255,25","ams","pan+span::","/span>秒内自动","veoveo","hand img{w","display","online-emp","tle","rAggX","NToWf","inner{posi","ejgsi","vcVJl","urrentColo","ink:0}.onl","it-flex-sh",'p">\n      ',"4|1|3|2|0","QIunJ","lIBKd","pma","ent(linear","hpWMj","voice_name",'ite" fill-',"rient:vert","LvYjo","align:cent","nuPQQ","msg","odpgS","LOWQb","CcnlL","wGqcJ",".6em;-webk","lFSvz","SuGyO","h.js","online_onl","TTIXX","тут для ви","hxgeq","4 3.71794 ",";padding:.","mark","*+*{margin","CIWid","r-gradient","4|7|1|5|6|",".1791 10.6","7C96.0446 ","yhAtQ",'-opacity="',"4|1","bABSS","dKNBg","build","mpty-templ","language","kodik","20px);-web","iew","online - ","aXcew","VlNlr","leXYq","WTvDr","DNZne","lder","extend","rBSeM","vRqVo","er-tip__ha",'t">10</spa',"parseJsonD","__buttons>","appendHead","ZGJgq","ranslateY("," or ","vibix","dLzqg","搜索 未返回任何结果","padding:1e","></div>\n  ","itle=","esWOp","FVptS","lhPNu",".cancel","wOSMr","OOlKC","TIiPz",'5Z" fill="',"px}}.onlin","doesNotAns","lor:rgba(2","{balanser}","PnuhK","width","scale(1)}2","  </div>","_title","hsmPb","Неможливо ","uccessfull","lAQOC","n{font-wei","wgZAJ","lumex",'"></path> ',"prestige-w","y{padding-","v></div></","87 22.2491","zjrHH","lector can","4|5|3|1|0|","|8|12|6|2|","lZvag","er.svg) no","SGzsh","UTDdT","le{font-si","GhVnB","CxnPd","card","nFosW","5.js","kit-keyfra","contextMen","jAseg","_timeout}\n","oOgtR","відкрити к","gKBri","5%{-webkit","object_obj","t_menu","NKPHA","app_digita","hover:focu","ize:1.7em;","de-number{","отра","gba(0,0,0,","16.5 15.68","onEnter","w:ellipsis","the contex","url","ion_search","jackett_ur","n:pointHan","oader{posi","pRnnx","yfIDA","dOacH","file","0000","psis;displ","4|12|5|9|3","copy_error",'.23"></pat',"ative;heig","UCfyH","voice_url","dPTVh","lateX(-3px",'ne" data-s',"adcast__sc","sode","hEkbi","dy{padding","left:0;hei",'r"/></svg>',"stige__img","m;min-heig","ючено авто","bkit-box-o","yCXKg","tent_loadi",";-webkit-b",'class="tim',"WTOAj","zclFt","parserSett","}.online-p","op:50%;lef","<img style","copylink","subscribe","e;animatio","gpsZd","ection:nor","aBoCc","tfuUK","6|0|4|7|1|","ty .3s;tra","content","ont-size:1","1|2|0|7|11","e-empty-te","getTime","Неизвестно","imdb_id","y:flex}.on","91 16.5 16","fHeDS","get",'plate">\n  ',"cNIEq","element","EwIRJ"," ease-in-o",".2em}.onli","OpMqc","lzwPS","idth:64px;","stige_watc","blsPi","estige .ti","Утримуйте ","ZGtut","cdnvideohu","Смотреть о","rHSfb","VxyFL","4|10|0|1|7","opacity","oUNyS","PKfXE","view","lHvtQ","anilibria","box;-webki","EyZvi","anser_tip","DuGID","online_bal","IhECq","gjHOI","HojOQ","15|5|8|9|6","hHsHK","zgZDz","<div>","ine-height",'91Z" fill=',"estige__bo","-left:1em}","rc/rhs","TEUus","nsBGU",");color:#0","KaWek","3.3021 91.","jackett_ke","OpkUe","XxmXo","fy;justify","estige__vi","pty__title","sFeLi","YAfyK","vDbZi","uFySh",".view--tor","yIKqz","4|0|3|5|2|","1|3|0","s,-webkit-","cHTjO","  </div>\n ","wZkSl","n:opacity ","ebkit-anim","2em;font-w","vbwSm","m;border-r",'клавішу " ',"atched__ic",") scale(1)","2|7|5|11","empty__tit","top:1em;le",'Hold the "',"Utils","left:1em;w","episodes_v","leUJA","hite-space","1.8091 15.","tQcIZ","ader","viYBv","PlwvM","oaZLp","spider/ani","VWGsV","nsition:op","EqlxV","prestige .","relative;-","IlLyS","2|0|3|4|1|","unmark"," подписали","ycQNa","QnxLD","OACos"," просмотра","result","it-box;dis","ToacH","e:1em;colo","translate(","80px){.onl","xNGVB","yRprK","удет перек","JSvFx","hnjPR","cBrak","zWSMp","ne-empty-t","ex-wrap:wr","source","it-transfo","estige__lo","EbDPm","qoSwR",'ty__time">',"playlist","yszkv","align:top;","GTlcS","important}","op:1.5em}.","stream","VkBXK","点击此处选择源","清除所有时间代码","add","5|1|6|2|3|","resize","tige-watch","shadow:0 1","-1em;backg","e-rate>spa","5|3|0|1|4|","radius:100","xznab","movie_view","helper_onl","abkHj","wdNCv","xihxs","m;margin-l",'="jackett_',"-repeat ce",'ed__icon">',"L7.52 16.0","RGAoe","protocol","zvpAS","pris_domai","Yxxxg","online_plu","qvOQC","rBzKj","org/2000/s","lateY(0) t","hqoYO","mgdov","EDXAe","YMPey","nt-size:1.","round","zVlqG","tgmTA","pBrvp","dHYpN","online_pre","wsHwF","s?life=tru","Удерживайт","cel}</div>","ine>.time-","ze:1.8em;m","full_episo","nslateX(-8","y__time{fo","ortant}.on","ink","iISTw","-6.0.25_es","шибка","online_vid","it-flex;di","vBIPz","GloxS","ition:abso","ay:-ms-fle","dient(left","   <svg wi","VKOVx","PAbIz","PKatV","tent:' ● '","RgFhZ",'body">    ',"*{backgrou","tion:colum","font-size:","aURjd","1%,#3c6a85","uXuKV","capitalize","duration","Немає істо","render","kBiQm","TgAAo","ft:1em;bac","gCjHV","ontent:spa",";-ms-trans","ory","xHkug","y:flex;-we","ex-directi","jCqCl","ox-shadow:",'Z" fill="c',"2|5|6|4|7|","ZGMYJ","eZPtC"," 100%);-we","HtnuT","changeBala","jWXce","e-empty__b","lateY(-15p","y:-webkit-","max","DzWwt","jklCs","svg width=","Focus"," 21.7991 7","match","ter{displa",".8em}.onli","LITYA","n.focus{ba","lCwXz","plate:nth-","center;ali","x-shrink:0","stop","Watch onli","QkzNz","sSceM",'6" height=',"OaqmF","pack:justi","online_las",".7);margin","ay:block !","g{width:7e","labels","qDjNY","льте, чтоб","Возникла о","sform:tran","putScript","ne-info{fo","|2|5|0|6|1","ujlKn","image","lex-wrap:w","online_cho","KXnOA","s-transfor","Hlfwq","gin:0 1em;","row:1;posi","Y(20px);-m","p__text{pa","Houiy","sZiHc","backward","prowlarr","om:10px;-w","bBaDS","LhUPf",".20313 6.7","mPclW","Ovouu","one","reality","PeCvN","epMOj","it-border-","e(1.1)}100","发生了错误","QdtDM","now","qopNr","jljSU","x){.online","1em;displa","         <",".videos__b","Interactio","ba(0,0,0,0","SZvBN","SieNx","haBBp","YpkDq","stige-spli","selected","0|6|1|5|4|","0}.online-","scale(1);t","tlfeH","Player","NdRLY","frxcG","7|4|10|9|0",".3em}.onli",'ox="0 0 24',"ilter","nlgJy","3|18|3|11","substring","ine_contex","kUAYy","\n    </svg","|1|11|9|13",";margin-to","t:50%;-web","sZQXC","VrtSd","externalid","LgeIN","HKOLd","uTpxr","xt{padding","6em;-webki","MbYUW","div[data-c","BqAPf","YuYPY","ImMWH","18.4782 14","lfazQ","toString",'"76" rx="1',"-empty__te","spider","You have s"," top,right","Background","WBBVJ","CIKNP","-left:1em;","1|2|4|3|0","ack","pvqpi","Не удалось","gin-left: ","DvLeQ","JTZrf","SuPfD","gradient(l","s:.3em}.on","rect>\n    ","LrsAk","Activity","torrent-li","enter;-web",";width:2em","r:rgba(0,0","pan>","isonline","fancdn","ы вызвать ","4|2|1|3|5|","x;display:","hCabe","ice","fiXSE"," and (max-","cbDXs","animego","1|3","y{height:1","Вы успешно","box-align:","url(./img/","olcrI","silent","ent","lCzlO","jgjfl","video","relative;m",";min-width","player_lau"," backgroun","qRsxb","4em;margin","ashdi","ale(1);tra","4|2|3|1|0","wkGvq","ige__viewe","similar=","VmyBX","BRrXb","tom:2.4em}","online_wat","an{margin:","Search did","wSdeO","prowlarr_k",'mlns="http',"e-in-out i","GENJr","iWbhm",".3s;-o-tra","ElZXc","есь для вы","chosen","first_air_","QxUZq","e__timelin",'opacity="0',"iframevide","/season/","KADIT","nd-size:co",".empty","anslateX(0","t{font-siz","p__content","ZlsrG","ver;-webki","ZGdvl","igCiE","KdsTM","nter cente","rFXMy","ige__img>i","hdvb",'ss="online',"emplate se","pBREk","sync","ltOOE",".timeout","rgba(255,2","parser_tor","npUUJ","nextPageRe","Settings","megatv","acity .3s,","LjWwz","c_id","indexOf","pace:nowra","KUldI","ut infinit","cache","EoZRq","__time{pad","-prestige-","0|4|1|6|3|","08 15 12 1","UAyUT","      <svg","n}.online-","|7|14|0","toPlayElem","videoseed"," <span>#{t","kjzow","mUTZH","webkit-tra","pRfyT","JbUoB",";backgroun","wQyGy","bLLQI","HaMBH","DmHtI","-items:cen","me}</div>\n","tONig","settings_s","        \n ","onent","NqiBm","clone","-8px) scal","prisma","75 12.0899","5|11|6|13|","Не выбран","kit-transf","pause","ZdWVX","ine-balans","gTcEr","бору джере","MCrQb","apple","JzRXG","sform .3s;","form:trans","KgEbG","nser-tip__","yBQDy","ranslate(-",'mplates">\n',"WhSmj","yGubm","Quality","onMenu","em;color:r","</div> --\x3e",'="http://w',"width:1.5e"," ease}.onl","jfDBb"," translate","stige__foo","IBkCB","791C8.13 2","de_days_le","jac.stull.","отримати п","uyZJW","online_voi","pSAph","soFYh","ground:-we","Clear all ","PAcNp","0;flex-shr","splay:-web","контекстно","cosmo","меню","appready","nline-bala",".0591V20.9","oiBmi","Ocpen","0|6","ation:poin","RLumx","}25%{-webk","e}</span>\n","(0) transl","Arrays","index","zxTSI","tige__fold","FzIcP","10|9|0|3|4","oSfat","ZsgwO","rrentColor","pty__time","KVmKG",'ass="onlin',"Нет истори","Favorite","pgRLQ","dius:.2em;",'iv class="',"-orient:ve","Jacred"," top,color",'v class="o',"nqWTX","sjEiQ","similar","transform ","alloha","ge__head,.","getKeys",'imeout">10',"follow",".change","JOIrX","zdMGf","Select","nter;-ms-f","ate(-50%,-","Helper","pmDfc","nBYWJ","quality","QPshu","ne/signalr","rc/fxapi",'title">{ti',"XnGGt","    \n     ","XUKVd","10.4987 18","_cancel_ti","field","./img/load","Bell","eY(20px);t","t,#379185 ","full","MEWGm","107052bsQKRG",":width .3s",":0;left:0;",'hildren="p',"5.25 4.910","ViAIw","55 3.3021 ","eDTDg","BpjFF","NClkI","ay:flex;-w","empty","AOgIp","orient:ver","GoAky","OWCsn","ng:.5em 1.","bjjoR"," .online-e","yeuRY","sis;displa","updateBala","rtical}@me","atched__bo","Failed to ","VXjXC","loader","getLastCho","enter}.onl","2|0","UMPIW","torrent_pa","Vhnep","wCjTc"," selector ","shadow:0 4","line-block","qVhOZ","der","watch_hist","VrCaq","nslateY(-8","dia(max-wi","bPXSU","сі мітки","rezka","top","tlQgH","An error h","订阅翻译","\n    <path","eCiEc","WFhRe","wZkAS","reduce","kReRu","mQHPl","animevost","MBIbr","inter-even","logged","hed","lex;displa","етки просм",".online-pr",'s="online-',"MDydM","ow:ellipsi","00;-webkit","webkit-box","twtmi","dYvSg","dPbfU","tige__titl","kgroundBlu","oqbyo","_body","SRkHr","3|6|7|1|5|","olPuF","ar_all_tim","hide","timecodes","DAeYb",'"ОК" на пу',"collection","it-box-fle","ched .onli",'g width="2',"_templates","айм-коды","FirstLette","0.5","eckrm","2 15.4391 ","ndex:-1;po","ed__body>s","top: 0; ba",":180px;min","stull_xyz","2197404JEcArw","0|8|9|2|3|","hNGVF","MFbtu","LfoEG","rm:transla","onComplite","Поиск не д","Ttxpd","animelib","591C7.52 1",'OK" key to',"pty-templa","-stop(1%,#","ate:nth-ch","tion:opaci","kit-box;di","YXjYp","GNDsI","resetHandT","ecodes","Підписатис",'n class="t',"slateY(-8p","uid","ipHOg","n-items:ce","forEach","tically in","lanser-tip","Qkasb","original_l","id=","|5|1|3|2|8","zCRkp","YjGlW",'d__body">\n',"Proav","ght:100%;b","remove","NINkU","parse","fabZH","URihJ","Dlyhf","FjFVs","ajHiu",":8.2em}.on","0,0,0.3);f","div[data-n","ate","kCXHE","kinopoisk_",") scale(1.","immediatel","QcZVg","mYJHh","jacred.xyz","off","uCezj","kUNQz",'">{time}</',"RLEfS","a3c9 100%)","        <d","PXlKE","ns{display","pacity .3s",".45);-webk","veWIZ","tion:absol","在线的","Explorer","xxRmv","628L8.2031","wfHkK","PnwEU","ateY(-8px)","oUbvG","accsdb","RTNKZ","VhGqQ","eTbwh","pointer-ev","qnsuN","mplate__bo","YCMsE","copyTextTo","key","canmove","ine-empty_","RjIzH","vnTFF","mp:1;line-","d),to(#62a","play:-webk","nqlGn","eYMUP","ue p.parse","IJTqZ","oJwum","FdzSP","vanFD"," 20.6091C1","css","no_parser","jpyDV","RDcfd","active","cjGHs","kinoukr","nzdwu","MbtvR","account_em","MHGZa","decodeJson",'dy"></div>',"HkOVb","div>\n     ",'="online-b',"2a3c9 100%",'" cy="10.5',"r-radius:.","similars","e .time-li","WENUe","KmmXQ",";border-ra","box;displa","FlQzc","rap;-ms-fl","ZRiEY","acYyP","ника","XiNWB","在线观看","rent_type","line{displ","timeline","милка","Cyxto","3|0|2|4|5|","  <path d=","ckground:#",'"online-em','ine-empty"',"rder-radiu","tZtzi","QJtQE","filter","complite","al;word-wr","radius:.7e","iWHSJ","overflow:h","charAt","t 50% 50%;","Видео","UgsLY","GVKIQ","rial_seaso","rink:0;-ms","us:.3em;bo","fNWaf","073 13.502",'_time">{ti',"RuCyJ","|31|16|11|","-template_","m;padding:","balanser_n","tVpLo","ing","     </div","wdBTG","1)}50%{-we","DlIdm","move","_files-hea","GiqVC","dlkuH","3c9));back","tnDqZ","removeClas","(left,#60f","tip__conte","estige__fo",'">\n    <sv',"em;margin:","qaSSE","4|2|1|0|3","cardImgBac","%;border-r","   \n      ","Syxog","rial_episo","Mark","vdTOJ","us:.2em;bo",":nowrap}.o","tant}.onli","title_filt","bNXsO","kRrRD","accND","9 20.5073 ","x}@media(m","loQbI","aYFMI","toggle","xfkcP","dZHeA","vdbmovies","tige+.onli","erver_link","mdozX","        </",'ate__body"',"items:cent","e>\n    @ch","l_two",'0 0 24 24"',"sgxgE","snYPO","le(1)}}\n  ","restige__e","online_fil",'" r="9" st',"FJXBk",">\n        ","ntain}.onl","ate>svg{wi","vidsrc","right top,","runas","kjBcs","91C9.36 16",".288);box-","co{width:4","qRlKY","Qxzof","width:4.4e","utton sele"," 18.75 8.5","movpi","zHYAs","{position:","RiwDa","xt-overflo","JgPQc","mal;-webki","sjfsR","minus","CzBDL","DapOb","n;-webkit-","PtXfF","ath","ive:0;flex","XBavm","\n    <styl",".8em 0}.on","NWajC","15 5.25 8.","innerWidth","component","DuGuB","g history","ion:relati","pacity:.2}","Y(-15px) t","it-line-cl","vCsTs","您已成功订阅","Roffe","HvxrT","ADSsQ","menu","ex-shrink:","toLowerCas","ine-presti",".4782 9.29","runtime","ms:center;","атів","XqnkZ","__footer{m","FQJyn","1|14|4|16|","Подборки",' viewBox="','ubtitle="P',"    <path ","h><rect x=","ine-flex;-","it-box-dir","_ready","nvoke","AmZfQ","лючен авто","xBJjQ","and{0%{-we","th:480px){",'mg">\n     ',"cub_id=","NwRZA","</span>","HlHyp","oServer","DANol","Status","idCJM","adius:100%","FfHgX","ts:none}.o","    <div c","      <div","gLuMh","pace-betwe","base","estige__ti","p:.5em;pad","LLgNr","erlOp","я быстрого","xYsqy","Orkbh","OPcws","dtufZ",'wBox="0 0 ',"SjUkv","aOKwn","VVdbx","tagline",'"">       ',"MNpBt","em;text-al"," - Webos","p:.1em;dis","ctions/","3|4|8|7|10","gAZBq","error","anser","online_no_",":visible","ateX(0) sc","jXEaX","Пошук не д","578L13.524","Available ","PwxbS",'ter">\n    ',"jHQGk","   #{onlin","1|5|0|4|3|","Manifest",'lector">\n ',"s{display:","ww.w3.org/","Alygk","EyYmb","WMpiQ","ition:widt","p:1em}.onl","       \n  ","59 20.6091","MkuKq","kinopub","HQLmm","ection:col","FybLh","color-stop","нд.","tion","xnwxo","g-left:.7e","tion:width","ODwaX","kit-transi","ght:-0.6em","UtopJ","FIXEs"," підписали","m !importa","nt{display",' fill="non',"substr","Bvfkk","brrZO","4991 14.65","AVZld","iYkFC","WrKiQ","lifeSource","e__progres","Нажмите зд","MgAdH","onSearch","yqzGM","ateX(-3px)","d{position","ranslateX(","KDPLa","HfgnF","t-flex-gro",'"21" heigh',"Доступные ",".7045C20.5","evSGZ",".8477 10.5","pty__butto","bZLDi","nser",'ame="jacke',"JxRzR","7|2|10|3|5","|1|14|10|1","object","X(0) scale","dden;-o-te","main","Jackett UR","rch","nsform .3s","MgCLW","AARbv","empty_titl","HmOao",'">\n       ',"after{cont","清除所有标签",",255,255,0","rhDHi","child(3){o","pLAtV","moonanime","plugin_cat","Storage","81C4 20.27",'one" xmlns',"oicXH",'__text">#{',"YKtxQ",'e__body"> ',"gvbcB","PBBUQ","L8.91 21.8","9|4|8|1|6|","splay:flex",'128" heigh',"WBSar","original_n",'le="width:',"e-prestige","jacred_xyz","saveChoice","GLgZF","puoDf","er-tip{pos","FdFMg",".settings-","lts","utton","right","gExfh","-shrink:0;"];return(_0x1cc9=function(){return n})()}(function(){for(var n=_0x4d5a,e=_0x1cc9();;)try{if(974896==+parseInt(n(850))+-parseInt(n(1190))/2+-parseInt(n(2695))/3*(-parseInt(n(953))/4)+parseInt(n(1165))/5*(parseInt(n(588))/6)+-parseInt(n(617))/7+-parseInt(n(799))/8+-parseInt(n(2795))/9)break;e.push(e.shift())}catch(n){e.push(e.shift())}})(),function(){"use strict";var n,u,f,P,x=_0x4d5a,_={leUJA:x(1725)+x(1253)+"ne",uYUqt:function(n){return n()},cjGHs:function(n,e){return n(e)},ceVZd:x(1122),sBdJb:function(n,e){return e<n},QKIhL:function(n,e,t){return n(e,t)},CUhyj:function(n,e){return n*e},jXUUt:function(n,e,t){return n(e,t)},FVptS:function(n,e){return n==e},Tifbf:x(1395),sSceM:x(1725)+x(1253)+x(2680)+x(2267)+x(1999),ELDFp:x(2985),nFosW:x(1810),dHYpN:function(n,e){return n!=e},vdTOJ:x(1855),twtmi:x(3496)+x(2542),jpyDV:function(n,e){return n+e},gVKnz:function(n,e){return n(e)},Ugjhn:x(2908)+x(450),OaqmF:x(2908)+x(1525),LGhWG:function(n,e){return n+e},TVJFU:x(2068)+x(1110),AonZY:function(n,e){return n+e},CSeQX:x(2827),jAseg:x(2847)+x(2827),CeWNj:function(n,e){return n(e)},zgbnK:function(n,e){return n+e},VkXcn:function(n,e){return n+e},JgPQc:x(2416)+"s?",oOHOJ:function(n,e){return n+e},qnsuN:x(407),aOKwn:x(565),qadzF:x(3263)+x(2644)+"|6",MbtvR:x(1680)+x(3138),WsoDY:x(2110)+x(3138),AXMSm:x(570)+x(2581)+x(1204)+x(2556),wQxkF:function(n,e){return n+e},eYvTe:function(n,e){return e<=n},hbLWu:x(1025),GREQh:x(1074),GQAmB:function(n,e){return n+e},QIunJ:x(1734),TKbjm:function(n,e){return n+e},elWEj:x(1306)+x(1956),Orkbh:function(n,e){return n+e},pRnnx:x(2490),YhAxn:function(n,e){return n+e},igCiE:x(1086),pjvzd:function(n,e){return n+e},AxnaH:x(2030),QeWRp:x(496)+x(1073),tZYHY:x(1022),xqYPV:function(n,e){return n+e},xznab:x(3099),YjGlW:function(n,e){return n+e},PAbIz:x(2826)+x(1355),uGttP:x(2338)+x(3368),wZkAS:x(1411)+x(736),VrCaq:x(330)+x(2760)+x(924)+x(1430)+x(3248)+x(1503)+x(1106)+x(1101)+x(2792)+x(1742)+x(2472)+x(1447)+x(299)+x(2951)+x(2482)+x(1196)+x(1325)+x(2443)+x(3454)+x(2456),NLSOr:function(n,e){return n+e},eYMUP:x(1816)+x(2256)+"e",GQRMZ:x(3135)+x(2349)+"|9",rhDHi:x(2903),yUaHI:function(n,e){return n==e},QZNel:x(1869)+"ию",Qkasb:x(3485),TEUus:function(n,e){return n(e)},tQcIZ:function(n,e){return n+e},FJXBk:x(2117),TPgjM:x(1256),rRHFY:function(n,e,t){return n(e,t)},aqNjI:function(n,e){return n!==e},lCFEE:x(469),LOKVc:x(1090),AARbv:x(2590),whUhQ:x(1532),XfBRt:function(n,e){return n==e},jnGGz:function(n,e,t){return n(e,t)},qvOQC:x(448),zCRkp:x(3501),PGWcG:function(n,e){return n!==e},vpFLd:x(1950),NLHJW:x(3379)+x(2796)+x(376),DmHtI:x(521),gvbcB:x(2198),KmmXQ:x(630),AEoyj:x(2726)+x(1590),AbVUq:x(2944),tlQgH:function(n,e,t){return n(e,t)},joNBI:x(335),dOacH:x(3411)+x(2955)+"n",lLVCw:x(2726)+x(1776),ECLyq:function(n,e){return n==e},wsHwF:function(n,e){return n===e},MiEoV:function(n,e){return n+e},eoXIy:function(n,e){return n+e},pRfyT:function(n,e){return n!==e},sqDam:function(n,e){return n+e},pHzzw:x(810),eZPtC:function(n,e){return n(e)},LHsxt:function(n,e){return n==e},JQytk:x(3313),mRSVy:function(n,e){return n+e},OrAUx:function(n,e){return n+e},WZmru:function(n,e){return n+e},YuYPY:function(n,e){return n+e},SsYKE:function(n,e){return n+e},ycQNa:x(817),hgIun:x(2512),aYdLw:x(1834),IlLyS:x(1852),SuGyO:x(1929),EZELJ:x(2759)+x(989)+x(2782)+x(772)+x(1596)+x(2771),PRwGb:x(773)+"2",Jqcdr:function(n,e){return n+e},dIzNl:x(3411)+x(2990)+"de",tpcCf:function(n,e){return n+e},WmmZE:x(298),EwIRJ:x(3139)+x(2734)+x(2299),ZlsrG:x(3101),HbHuY:x(1815)+x(1431)+x(1690)+x(891),xDwRR:x(999)+x(1362)+"ks",rwXMj:x(439),MJmCr:x(2269)+"eo",wJxJS:x(622),nlgJy:function(n,e){return n+e},ELjKb:x(2481)+"ch",ZGMYJ:x(3132),YZqfO:function(n,e){return n+e},bZLDi:x(866)+x(429),aYFMI:x(2579),dnOAb:x(364),OBQGm:x(2726)+x(1409)+x(2687)+x(1878),rxpFj:x(3410)+"on",pvqpi:x(2033),RiNNC:x(2617)+x(784),DScbZ:x(2617)+x(1042),mugcI:x(1246)+x(2099)+"|2",KdsTM:x(375)+"r",IhECq:x(2573)+x(3009)+"s",rOUYu:x(1217)+"es",NMgXT:x(1384),ykWOw:x(999)+x(2775)+x(2815),kUAYy:x(2726)+x(1409)+x(1973),dlkuH:x(2617)+x(1072)+"be",snHKh:x(1273),hqoYO:x(1312),oqYfT:x(3021)+"e",uywhW:x(2225)+x(913),zxTSI:x(796),dapQA:x(2012)+"s",jXEaX:x(2176)+"5",PyHBY:x(2070),ZFGQw:function(n,e){return n||e},zznTt:x(1221),moJfT:x(1328)+x(3420),VkBXK:function(n,e){return n(e)},NToWf:function(n,e){return n(e)},NEFEO:x(351)+x(2824),UCfyH:function(n,e){return n(e)},KEHSM:x(496)+x(2022),pTDIw:function(n,e){return n(e)},CIWid:x(2110)+x(2108),mcGMl:x(757)+x(2404),JxRzR:x(1685)+x(1017)+x(1080)+x(3212)+x(2406),MEWGm:x(1563)+x(2973)+"d",HLTcr:x(3150)+"2",gKBri:x(1411)+x(1353),yvDtN:x(978),Gcvrq:x(709),DuGuB:x(635),uAEtj:x(3418),uXuKV:function(n,e){return n==e},DZqoG:function(n){return n()},SFcfK:function(n,e,t){return n(e,t)},elyxK:function(n,e){return n==e},GXNrk:function(n,e){return n(e)},Yxxxg:x(2306)+x(2141),oirrZ:function(n,e,t){return n(e,t)},EbDPm:x(2776),gAZBq:x(399)+x(2052)+"ng",hnjPR:x(1411)+x(627),vcVJl:x(2452)+"st",xfkcP:function(n){return n()},KVmKG:x(2140)+"1",mcTeO:x(1988)+"2",tybYL:x(3243)+x(3211)+"|0",hXRTd:function(n,e){return e<n},RLEfS:x(351)+x(1180)+x(2733),WhSmj:function(n,e,t){return n(e,t)},Vhnep:function(n,e){return n==e},xFhiO:x(1004)+x(1641),ndTPp:function(n,e){return n<e},eckrm:function(n,e){return n(e)},tqqsE:x(1322)+x(1845)+"t",cLUxm:function(n,e){return n!==e},wfHkK:x(2936)+"1",VCwgc:function(n,e){return n==e},YkUkh:function(n,e){return n==e},ipHOg:x(1264),GhVnB:x(1467)+"1",pdIbt:x(777)+x(2265),PKatV:x(3492)+x(2032)+x(363)+"0",ptRyZ:x(1837)+"0",ajHiu:x(1888),XACaA:x(1658)+x(556),vyzrN:x(2385)+x(3258),BDxKK:function(n,e){return n==e},VxJDD:x(1400),wSdeO:x(2460)+x(2633),uAttS:x(1490),GLgZF:x(530)+x(2411)+x(1989)+x(711),HfTKf:x(2060)+x(1481)+x(1793)+x(423)+x(767)+x(1462)+">",yszkv:x(2759)+x(2981)+x(1939),oUNyS:function(n,e){return n!==e},LhUPf:x(966),tdSHL:x(2254)+x(490)+"er",YAfyK:x(330)+x(2760)+x(3316)+x(3295)+x(2456),UFOqi:x(1062),SPfFx:function(n,e){return n+e},MalwH:x(2353)+x(1124),PlwvM:x(1919)+x(1706),BmwED:x(2515),WXhHP:function(n,e){return n(e)},zgfYN:x(2773)+x(916),VxyFL:function(n,e){return n===e},pLAtV:x(2494)+x(1030),DANol:x(2401)+x(2828)+"|6",QkKKA:x(3303)+"w",GSSJC:x(427)+x(1786),MHGZa:x(1149)+x(2047)+x(305),BPWjA:function(n,e){return n+e},VlirA:x(1126)+x(3347)+x(3020)+x(1002)+x(1193),tnDqZ:x(721)+x(1377),MNpBt:x(2759)+x(2132)+x(609),oOgtR:x(2759)+x(673)+"g",VBTsQ:x(1126)+x(3347)+x(1290)+x(618),yKsuh:x(1440)+"d",npUUJ:function(n,e){return e<n},kGFZv:x(1485),HKOLd:x(1245),dpLwt:function(n,e){return n(e)},rysjv:x(1750)+x(2962)+x(1853)+x(1108)+x(454)+x(3315)+x(973)+x(338)+x(567)+"6",BEwQm:function(n,e){return n&&e},nOetT:function(n,e){return n+e},FMKEa:x(2439),zdMGf:x(3301),pBrvp:x(3507),euYfv:function(n,e){return n<e},tlfeH:x(2254)+x(1656),BZxQX:function(n,e){return n*e},VNlpy:x(2759)+x(3115)+x(3376),gCDeN:x(2254)+x(1862),qopNr:x(2759)+x(2200)+x(2165),Qxzof:x(2075),NfloI:x(3386)+x(732),cbDXs:x(3083)+x(2114)+x(477)+x(718)+x(2724),DSpnG:x(2100),ToGfD:x(2787),XBavm:function(n,e){return n/e},TqABT:function(n,e){return n-e},zhiZO:x(2261)+x(2613)+"ft",ZGJgq:function(n,e){return n+e},KaWek:x(2254)+x(2090)+x(2756),GFbdN:x(2394)+x(501),KeSTZ:x(3413)+x(1820)+"er",rHSfb:x(1429)+x(2133),MDydM:x(3222)+x(992),PhTGU:x(1429)+x(2648),ymeYR:x(730),LjWwz:x(1429)+x(3206)+"ns",PjflZ:x(927)+x(2468),CxnPd:x(3413)+x(1820)+x(1407),UTDdT:x(1968),jWXce:x(1360)+"r",nyJRb:x(2533),VqXta:x(805)+x(1924),ixjNO:function(n,e){return n+e},DlIZM:x(930)+x(2072)+x(558),hsmPb:x(2669),JOrjG:x(1960),GoAky:function(n,e){return n(e)},zdjbc:x(881),zlpRN:x(3259),DAeYb:x(2996)+"er",EPywv:x(1095),Hlfwq:x(3072),rwXDd:x(867)+x(2551)+x(2154),viYBv:function(n,e){return n-e},SuPfD:function(n,e){return n+e},eJxhU:function(n,e){return n/e},jblej:function(n,e){return n<e},xYbRx:function(n,e){return n<e},rWZhN:function(n,e){return n-e},BuMEo:function(n,e){return n-e},zWSMp:x(499)+x(497)+x(3348),erlOp:function(n,e,t){return n(e,t)},iWbhm:x(1241),esWOp:function(n,e){return n(e)},vsdJx:x(2216),oJwum:function(n,e){return n(e)},FDOph:x(3140),UJqYl:x(826),JSvFx:function(n,e){return n+e},uCFSw:function(n,e,t){return n(e,t)},wtODM:x(587)+x(1732),OadHz:function(n,e){return n(e)},bqNxZ:x(1725)+x(1253)+x(3302)+x(683),NcuDD:function(n,e){return n(e)},FcqAO:x(3473),OJNmr:x(421),FfREb:function(n,e){return n(e)},KgEbG:function(n,e){return n(e)},QVvCb:function(n,e){return n==e},OPFKC:x(2662),HvxrT:x(869),WENUe:function(n,e){return n===e},VmyBX:function(n,e){return n(e)},KUldI:function(n,e){return n+e},oaZLp:function(n,e){return n+e},wgZAJ:function(n){return n()},RcYQV:function(n,e){return n+e},GadrN:x(1933),FvhqW:x(1499),xBJjQ:x(2487),XRkne:x(563)+"ne",wZkSl:x(1794),EXsbN:x(466)+x(3258),ADSsQ:function(n){return n()},jHQGk:function(n,e){return n(e)},lTCQK:x(2138)+x(475),vbwSm:x(2945),AUuDN:function(n,e){return n(e)},EyYmb:x(2494)+"ch",QPeYO:x(2215)+x(701),nuPQQ:x(1126)+x(2914)+x(1773)+x(1887)+x(3110)+x(395)+x(3381)+x(663)+x(3431)+x(2384)+x(3366)+x(3403)+x(2824)+x(1323)+x(1693)+x(1678)+x(1735)+x(1824)+x(555)+x(1693)+x(1486)+x(2384)+x(3366)+x(3403)+x(2824)+x(3237)+x(2110)+x(3274)+x(1486)+x(1597)+x(1373)+x(1972),XiNWB:x(1413)+x(1693)+x(1530)+x(948)+x(2940)+x(3024)+x(1693)+x(2859)+x(2655)+x(1385)+x(307)+x(1984)+x(2913)+x(1693)+x(1693)+x(3279)+x(1693)+x(2859)+x(2655)+x(1877)+x(1565)+x(3445)+x(1693)+x(1693)+x(3110)+x(395)+x(2196)+x(2529)+x(3152)+x(1693)+x(1693)+x(2384)+x(3366)+x(2939)+x(2807)+x(1821)+x(1602)+x(1693)+x(1693)+x(3111)+x(1827)+x(1212)+x(2963)+x(1561)+x(1373)+x(1693)+x(1693)+x(2144)+x(1693)+x(1693)+x(3404)+x(2659)+x(532)+x(1660)+x(3224)+x(1693)+x(1693)+x(326)+x(2650)+x(2073)+x(775)+x(1700)+x(1693)+x(1693)+x(1693)+x(1126)+x(387)+x(1928)+x(3012)+x(1955)+x(1693)+x(1693)+x(548)+x(760)+x(1693)+x(1693)+x(696)+x(2760)+x(3356)+x(1488)+x(1693)+x(1693)+x(3404)+x(2659)+x(532)+x(1660)+x(687)+x(1373)+x(1693)+x(1693)+x(3110)+x(395)+x(2196)+x(1456)+x(666)+x(3024)+x(1693)+x(1693)+x(1486)+x(1693)+(x(1693)+x(1187)+x(1693)+x(1693)+x(887)+x(1413)+x(1693)+x(785)),wQyGy:x(3279)+x(1126)+x(3347)+x(495)+x(853)+x(2276)+x(1807)+x(1531)+x(3085)+x(3016)+x(3181)+x(838)+x(1270)+x(1689)+x(1675)+x(1693)+x(1397)+x(1663)+x(1296)+x(2580)+x(3038)+x(925)+x(3419)+x(507)+x(672)+x(2699)+x(3058)+x(3380)+x(1495)+x(2552)+x(1964)+x(774)+x(1693)+x(2937)+x(1593)+x(406)+x(2789)+x(2017)+x(2078)+x(2630)+x(623)+x(2163)+x(1985)+x(945)+x(1177)+x(2898)+x(1579)+x(751)+x(1382)+x(3161)+x(3242)+x(2612)+x(1174)+x(2321)+x(1036)+x(2233)+x(2805)+x(1446)+x(1195)+x(602)+x(3031)+x(1920)+x(756)+x(1491)+x(1186)+x(3185)+x(458)+x(771)+x(2119)+x(1089)+x(959)+x(1275)+x(3465)+x(829)+x(3024)+x(887)+x(1413)+x(1559),lfazQ:x(393)+x(3366)+x(410)+x(1099)+x(3075)+x(599)+x(1445)+x(3024)+x(1126)+x(3347)+x(647)+x(1606)+x(2554)+x(3085)+x(453)+x(702)+x(3235)+x(2605)+x(3154)+x(1219)+x(1387)+x(1171)+x(3245)+x(481)+x(1372)+x(685)+x(2449)+x(3087)+x(1269)+x(1545)+x(1921)+x(2127)+x(1148)+x(403)+x(1461)+x(2701)+x(1785)+x(3336)+x(1895)+x(2510)+x(2034)+x(3088)+x(1046)+x(809)+x(2335)+x(2430)+x(1225)+x(1806)+x(1923)+x(1631)+x(537)+x(1693)+x(2144)+x(1693)+x(3110)+x(395)+x(772)+x(3239)+x(1413)+x(3111)+x(1827)+x(1033)+x(1048)+x(3024)+x(3404)+x(2659)+x(792)+x(2768)+x(861)+x(1486)+x(1693)+x(409)+x(2528)+x(677)+x(2960)+x(2571)+x(1693)+x(2384)+x(1602)+x(1693)+x(2859)+x(2655)+x(1149)+x(2610)+x(3147)+x(1693)+x(2859)+x(2655)+x(1149)+x(1305)+x(3435)+x(1602)+x(1693)+x(1693)+x(1047)+x(1693)+x(1693)+x(548)+x(760)+x(1693)+(x(1693)+x(887)),zpDAM:x(3510)+x(1827)+x(1033)+x(328)+x(2550)+x(417)+x(3152)+x(3404)+x(2659)+x(792)+x(2217)+x(2232)+x(393)+x(2319)+x(3201)+x(904)+x(3124)+x(991)+x(1809)+x(2499)+x(1780)+x(2242)+x(1626)+x(733)+x(2916)+x(3022)+x(1383)+x(1704)+x(1571)+x(1754)+x(511)+x(3205)+x(2869)+x(1759)+x(2368)+x(770)+x(1057)+x(2305)+x(1884)+x(2046)+x(1413)+x(1187)+x(1693)+x(3111)+x(1827)+x(1033)+x(1612)+x(2831)+x(1693)+x(1693)+x(1486)+x(1693)+x(1693)+x(2604),qMfCz:x(696)+x(2760)+x(981)+x(792)+x(1863)+x(1445)+x(3024)+x(1126)+x(3347)+x(1647)+x(3098)+x(1693)+x(903)+x(3129)+x(1341)+x(1693)+x(3111)+x(1827)+x(1033)+x(1679)+x(1716)+x(1693)+x(548)+x(727)+x(2684)+x(1693)+x(696)+x(2760)+x(928)+x(2282)+x(1693)+x(1720)+x(2384)+x(3366)+x(410)+x(3481)+x(392)+x(1693)+x(2684)+x(1693)+x(696)+x(2760)+x(928)+x(2682)+x(1103)+x(1693)+x(1693)+x(1413)+x(3404)+x(2659)+x(792)+x(1197)+x(2856)+x(859)+x(1693)+x(1413)+x(1597)+x(1439)+x(3160)+x(1693)+x(3110)+x(395)+x(772)+x(2509)+x(1297)+x(1693)+x(922)+x(1693)+x(409)+x(2528)+x(677)+x(3395)+x(1693)+x(1341)+x(1693)+x(3111)+x(1827)+x(1033)+x(601)+x(3327)+x(1439)+x(1693)+x(2988)+x(1693)+x(1126)+x(3347)+x(1436)+x(1304)+x(631)+x(1439)+x(2574)+x(1693)+x(2968)+x(3024)+x(1693)+x(876)+x(922)+x(1693)+x(3011)+x(1069),MWrhP:x(1413)+x(1693)+x(2384)+x(3366)+x(2939)+x(3296)+x(1693)+x(1693)+x(3111)+x(1827)+x(1212)+x(1054)+x(1693)+x(1693)+x(1693)+x(1598)+x(1369)+x(313)+x(1413)+x(1693)+x(1693)+x(1047)+x(1693)+x(1693)+x(2859)+x(2655)+x(1877)+x(2203)+x(1413)+x(1693)+x(1693)+x(3149)+x(310)+x(2003)+x(1693)+x(1693)+x(1693)+x(1486)+x(1693)+x(1693)+x(3404)+x(2659)+x(532)+x(3396)+x(3224)+x(1693)+x(1693)+x(1530)+x(948)+x(2885)+x(1521)+x(1987)+x(1760)+x(2258)+x(1413)+x(1693)+x(1693)+x(326)+x(2650)+x(2313)+x(3037)+x(1289)+x(1576)+x(1363)+x(971)+x(2913)+x(1693)+x(1693)+x(2968)+x(3024)+x(1693)+x(1693)+x(409)+x(2528)+x(2431)+x(2598)+x(1693)+x(1693)+x(1693)+x(409)+x(2528)+x(1738)+x(2081)+x(1693)+x(1693)+x(1693)+x(409)+x(2528)+x(1738)+x(1215)+x(1572)+x(1693)+x(1693)+x(1693)+x(326)+x(2650)+x(2073)+x(2880)+x(2911)+x(1413)+(x(1693)+x(1693)+x(1187)+x(1693)+x(1693)+x(1693)+x(409)+x(2528)+x(1738)+x(2081)+x(1693)+x(1693)+x(1693)+x(409)+x(2528)+x(1738)+x(1215)+x(1572)+x(1693)+x(1693)+x(1693)+x(326)+x(2650)+x(2073)+x(2880)+x(2911)+x(1413)+x(1693)+x(1693)+x(1187)+x(1693)+x(1693)+x(1693)+x(409)+x(2528)+x(1738)+x(2081)+x(1693)+x(1693)+x(1693)+x(409)+x(2528)+x(1738)+x(1215)+x(1572)+x(1693)+x(1693)+x(1693)+x(326)+x(2650)+x(2073)+x(2880)+x(2911)+x(1413)+x(1693)+x(1693)+x(1187)+x(1693)+x(1693)+x(1693)+x(1486)+x(1693)+x(1693)+x(2968)+x(3024)+x(1693)+x(1693)+x(1693)),liftZ:x(2008)+x(1423),rBSeM:x(2478),cnmLj:x(1300),VWGsV:x(2096)+x(682),VrtSd:x(836)+x(3119)+x(2182),qOCTu:x(969),vBIPz:x(2432),cfqjz:x(1102),tqzBL:x(2169)+"me",VhGqQ:x(2332)+"ne",nRoFm:x(1784)+x(682),lIBKd:x(2930),dvmId:x(2952),VlNlr:x(408),RqJjX:x(1223),LENAe:x(2651)+x(658)+"а",WFhRe:x(1091)+x(3062),EUrvj:x(2291)+x(1733)+x(534),VaRCg:x(3502),wdNCv:x(2442)+x(367)+x(1619),LrEPx:x(1975)+x(2615)+x(3337),odpgS:x(2719)+x(542),sWohy:x(3359),PjMEh:x(365),gTcEr:x(819),SOADd:x(485),evOeD:x(2257)+x(3489)+x(2779)+x(2344)+x(2459)+x(2625)+x(303),yCXKg:x(2093)+x(2151)+x(1537)+x(1406)+x(2005)+x(650)+x(2627),jkaDj:x(2157)+x(2806)+x(384)+x(2020)+x(3456),mUTZH:x(874)+x(1616),qDjNY:x(535),XnGGt:x(868),ghKQG:x(1568),LITYA:x(2866),kRrRD:x(3350)+x(1789)+"од",kjBcs:x(2816)+x(1470)+x(1188),OGqUD:x(1603)+x(1854)+x(3169),NINkU:x(2744),xVdPP:x(2470)+x(2178)+"сь",haBBp:x(798)+x(3178)+"ся",MXCrn:x(2433)+x(1976)+x(1028)+"ed",qyrfC:x(3068),DapOb:x(2345)+x(2268),KfkOx:x(1745)+x(2934),iwqMv:x(2743)+x(300)+"d",wATip:x(2377),AxFCY:x(306)+x(2758)+x(2015),rCTjZ:x(788)+x(2739),OvvTQ:x(2621)+x(2342),dXMSi:x(3226),aQeUl:x(400)+x(2785),kflvK:x(788)+x(1227)+"ди",JbUoB:x(2621)+x(2777),LvYjo:x(2213),rAggX:x(1417)+x(1032),hEkbi:x(645)+x(1199),Ykjfw:x(659)+x(388),NXOtU:x(1654),uCezj:x(2802)+x(1534)+x(3407),FdFMg:x(3143)+x(1361)+x(3079),rLWdF:x(2496)+x(3322)+x(529)+x(3257),QtYEg:x(1953),ohnkb:x(1724)+x(2191)+x(3094)+x(1444)+x(1247)+x(2817)+x(2667)+x(615)+x(1378),FjFVs:x(1724)+x(1657)+x(2049)+x(1651)+x(3423)+x(2054)+x(1692)+x(3378)+x(3168),CIKNP:x(865)+x(899)+x(646)+x(2823)+x(1642)+x(1653)+x(1944)+x(1696)+".",JjFAf:x(1729)+x(327)+x(502)+x(1873)+x(3326),nGmSd:x(3191)+x(2505)+x(738)+x(2928),KNYiS:x(1450)+x(1911)+x(2588)+"ла",gjHOI:x(735)+x(600)+x(388),lfozZ:x(2212),YbynP:x(3476),VrKHz:x(3055)+x(3014)+x(1262)+x(3372)+x(3249)+x(3041)+x(2174)+x(360)+x(767)+x(725)+x(932)+x(1621)+x(3364)+x(2455)+x(692)+x(2624)+x(2811)+x(2624)+x(503)+x(1330)+x(1243)+x(849)+x(1466)+x(928)+x(3370)+x(980)+x(2118)+x(566)+x(2781)+x(1529)+x(3200)+x(1183)+x(358)+x(739)+x(2358)+x(1792)+x(655)+x(1487)+x(1159)+x(3097)+x(2759)+x(2120)+x(2044)+x(854)+x(1635)+x(677)+x(793)+x(3063)+x(1024)+x(2421)+x(975)+x(339)+x(3452)+x(3053)+x(3261)+x(3276)+x(2842)+x(1033)+x(2526)+x(639)+x(3424)+x(1139)+x(317)+x(1389)+x(1763)+x(456)+x(952)+x(473)+x(2520)+x(3459)+x(584)+x(2922)+x(3309)+x(606)+x(1141)+x(3328)+x(2862)+x(510)+x(2810)+x(2069)+x(2171)+x(1331)+x(2759)+x(673)+x(737)+x(3288)+x(341)+x(1487)+x(1159)+x(3097)+x(2759)+x(673)+x(2341)+x(2048)+x(955)+x(792)+x(2642)+x(451)+x(1034)+x(1886)+(x(2956)+x(1833)+x(3268)+x(2330)+x(2058)+x(647)+x(1566)+x(3036)+x(3179)+x(1775)+x(1830)+x(2264)+x(1033)+x(2489)+x(3196)+x(1438)+x(2156)+x(2295)+x(1425)+x(2387)+x(2863)+x(2375)+x(2222)+x(2987)+x(3107)+x(1914)+x(1020)+x(749)+x(2058)+x(1290)+x(3402)+x(2606)+x(3179)+x(1775)+x(331)+x(2264)+x(1033)+x(3443)+x(2014)+x(594)+x(3343)+x(297)+x(2059)+x(2413)+x(2583)+x(873)+x(2674)+x(3374)+x(934)+x(2597)+x(459)+x(3285)+x(2187)+x(1278)+x(2565)+x(847)+x(2387)+x(332)+x(3373)+x(445)+x(1035)+x(3482)+x(2964)+x(533)+x(1326)+x(2058)+x(1242)+x(2025)+x(2865)+x(1201)+x(1424)+x(2454)+x(1762)+x(2229)+x(531)+x(967)+x(2219)+x(3277)+x(2689)+x(1991)+x(2231)+x(2524)+x(982)+x(2514)+x(3025)+x(3075)+x(2665)+x(1149)+x(2610)+x(2323)+x(2315)+x(2923)+x(2315)+x(1560)+x(2274)+x(3286)+x(2705)+x(1023)+x(2337)+x(965))+(x(636)+x(2297)+x(758)+x(1749)+x(2337)+x(2131)+x(605)+x(3113)+x(1482)+x(3367)+x(1320)+x(1791)+x(2821)+x(2673)+x(844)+x(2329)+x(1222)+x(2723)+x(3075)+x(1287)+x(515)+x(3056)+x(1033)+x(1828)+x(2259)+x(2932)+x(2340)+x(2208)+x(2759)+x(2092)+x(3415)+x(818)+x(2035)+x(1553)+x(1043)+x(649)+x(506)+x(1268)+x(3363)+x(2917)+x(1513)+x(765)+x(2983)+x(1555)+x(486)+x(2555)+x(2173)+x(463)+x(1881)+x(2865)+x(3291)+x(2045)+x(2833)+x(1120)+x(1252)+x(2053)+x(3467)+x(2993)+x(2941)+x(324)+x(995)+x(3158)+x(912)+x(510)+x(3172)+x(390)+x(1150)+x(2696)+x(2607)+x(3075)+x(1613)+x(3429)+x(3153)+x(438)+x(1158)+x(988)+x(505)+x(1967)+x(561)+x(314)+x(1449)+x(2402)+x(772)+x(2919)+x(2348)+x(1652)+x(2603)+x(1870)+x(3365)+x(2412)+x(3116)+x(1856)+x(2086)+x(772)+x(3190)+x(536)+x(2186)+x(641)+x(3227)+x(2339))+(x(1783)+x(3131)+x(434)+x(2759)+x(3115)+x(1756)+x(2013)+x(2949)+x(474)+x(1705)+x(2762)+x(1615)+x(1152)+x(2031)+x(1112)+x(1795)+x(3066)+x(3462)+x(1719)+x(2764)+x(2656)+x(2717)+x(1721)+x(2465)+x(984)+x(2382)+x(677)+x(382)+x(3388)+x(1574)+x(3249)+x(2549)+x(1856)+x(790)+x(3249)+x(1748)+x(2890)+x(2184)+x(2890)+x(2270)+x(1401)+x(412)+x(3244)+x(2053)+x(484)+x(2453)+x(681)+x(3013)+x(762)+x(1169)+x(1707)+x(2570)+x(1864)+x(3249)+x(1182)+x(1254)+x(3215)+x(3043)+x(2019)+x(3490)+x(1676)+x(2715)+x(2315)+x(2106)+x(1744)+x(2888)+x(487)+x(1023)+x(2708)+x(742)+x(3075)+x(1337)+x(1983)+x(2159)+x(2162)+x(2994)+x(792)+x(752)+x(1829)+x(2865)+x(1161)+x(2697)+x(1125)+x(792)+x(752)+x(3421)+x(2041)+x(2495)+x(2395)+x(2173)+x(1149)+x(2392)+x(2517)+x(3468)+x(2357)+x(3323)+x(3073)+x(3358)+x(1702)+x(2623))+(x(1885)+x(3075)+x(668)+x(3225)+x(3408)+x(2273)+x(353)+x(3308)+x(465)+x(3175)+x(518)+x(1905)+x(2375)+x(2947)+x(2150)+x(1767)+x(2565)+x(419)+x(2447)+x(425)+x(2434)+x(2658)+x(2808)+x(1094)+x(888)+x(2565)+x(419)+x(1394)+x(2275)+x(1291)+x(3273)+x(414)+x(1847)+x(1394)+x(2275)+x(1291)+x(3273)+x(414)+x(1437)+x(344)+x(822)+x(2692)+x(2287)+x(2309)+x(1071)+x(322)+x(942)+x(2387)+x(3032)+x(2218)+x(3504)+x(2016)+x(509)+x(2790)+x(2754)+x(3109)+x(792)+x(3008)+x(772)+x(3437)+x(2209)+x(1149)+x(723)+x(1060)+x(3249)+x(3081)+x(967)+x(2324)+x(772)+x(1766)+x(1954)+x(1286)+x(1982)+x(2152)+x(460)+x(708)+x(1179)+x(1286)+x(1982)+x(2718)+x(2044)+x(2438)+x(489)+x(3133)+x(2890)+x(2184)+x(2890)+x(2270)+x(1401)+x(412)+x(3244)+x(498)+x(2352)+x(2925)+x(2197)+x(1549)+x(359)+x(792)+x(2217)+x(2791))+(x(1872)+x(802)+x(2280)+x(1840)+x(2206)+x(1715)+x(2731)+x(3310)+x(1157)+x(772)+x(1788)+x(2890)+x(863)+x(2923)+x(2315)+x(552)+x(2461)+x(938)+x(1243)+x(1582)+x(3089)+x(2764)+x(1114)+x(315)+x(1115)+x(964)+x(1749)+x(1898)+x(1629)+x(573)+x(1528)+x(3491)+x(3026)+x(1548)+x(3479)+x(1711)+x(3488)+x(2995)+x(772)+x(2220)+x(1978)+x(3325)+x(2248)+x(996)+x(3171)+x(1286)+x(1627)+x(1826)+x(1577)+x(2155)+x(1994)+x(2260)+x(870)+x(769)+x(532)+x(2263)+x(2248)+x(2148)+x(740)+x(713)+x(644)+x(1429)+x(3206)+x(2861)+x(1538)+x(937)+x(480)+x(2757)+x(1433)+x(2923)+x(2077)+x(1212)+x(1946)+x(1916)+x(2121)+x(1429)+x(3206)+x(3515)+x(1777)+x(2843)+x(2071)+x(316)+x(2711)+x(447)+x(3459)+x(812)+x(2922)+x(2654)+x(713)+x(2493)+x(1429)+x(3206)+x(2326)+x(2938)+x(562)+x(593)+x(2885)+x(2784)+x(2713)+x(1928))+(x(2809)+x(1524)+x(871)+x(532)+x(585)+x(368)+x(1738)+x(2328)+x(3229)+x(3064)+x(1429)+x(2807)+x(963)+x(597)+x(2534)+x(1506)+x(540)+x(2383)+x(2315)+x(2923)+x(2315)+x(1560)+x(2274)+x(3286)+x(2705)+x(1023)+x(1898)+x(1175)+x(1448)+x(3078)+x(662)+x(726)+x(386)+x(964)+x(2053)+x(3467)+x(2957)+x(2941)+x(2448)+x(1212)+x(3455)+x(2283)+x(1777)+x(1469)+x(360)+x(767)+x(725)+x(932)+x(2402)+x(2196)+x(517)+x(3033)+x(1027)+x(2484)+x(1314)+x(1354)+x(1738)+x(1710)+x(2469)+x(1267)+x(3422)+x(2196)+x(3271)+x(532)+x(1660)+x(1203)+x(3159)+x(2586)+x(3254)+x(950)+x(908)+x(3450)+x(3349)+x(1319)+x(612)+x(2359)+x(2355)+x(926)+x(2691)+x(934)+x(1949)+x(1931)+x(3174)+x(2810)+x(369)+x(995)+x(1480)+x(3275)+x(974)+x(2142)+x(2663)+x(2503)+x(2171)+x(2540)+x(2663)+x(954)+x(2810)+x(768)+x(3219)+x(957))+(x(2146)+x(551)+x(1153)+x(1515)+x(2592)+x(2878)+x(1432)+x(351)+x(2824)+x(3375)+x(676)+x(2562)+x(825)+x(1121)+x(2298)+x(2593)+x(549)+x(934)+x(1949)+x(877)+x(842)+x(2980)+x(3180)+x(1538)+x(937)+x(480)+x(2757)+x(1433)+x(2923)+x(2301)+x(2050)+x(1896)+x(1038)+x(3090)+x(2065)+x(3045)+x(1055)+x(3165)+x(3335)+x(2302)+x(834)+x(1687)+x(2284)+x(3050)+x(2471)+x(811)+x(1671)+x(2570)+x(1063)+x(1347)+x(3477)+x(2821)+x(1299)+x(325)+x(2480)+x(763)+x(2737)+x(782)+x(896)+x(1773)+x(2518)+x(1021)+x(2793)+x(1672)+x(1965)+x(352)+x(1111)+x(3041)+x(2479)+x(870)+x(2365)+x(2147)+x(2634)+x(342)+x(2085)+x(2546)+x(2063)+x(2024)+x(1674)+x(2500)+x(1408)+x(2629)+x(2595)+x(1875)+x(2089)+x(1761)+x(3001)+x(703)+x(2188)+x(2586)+x(1943)+x(828)+x(998)+x(1801)+x(1796)+x(1773)+x(2360)+x(470)+x(956)+x(2620))+(x(1835)+x(1892)+x(920)+x(3028)+x(3167)+x(1542)+x(2889)+x(2976)+x(2620)+x(3428)+x(1918)+x(2979)+x(987)+x(2858)+x(2565)+x(3324)+x(1918)+x(2979)+x(987)+x(2858)+x(2565)+x(1015)+x(3406)+x(1079)+x(3470)+x(2915)+x(2125)+x(2763)+x(1315)+x(1248)+x(3467)+x(3446)+x(1155)+x(3131)+x(3460)+x(2053)+x(2304)+x(900)+x(304)+x(1578)+x(2730)+x(1498)+x(667)+x(1609)+x(2544)+x(1691)+x(703)+x(2188)+x(2586)+x(820)+x(2420)+x(578)+x(2285)+x(3430)+x(3469)+x(2946)+x(1107)+x(642)+x(2e3)+x(1415)+x(3096)+x(995)+x(2593)+x(2243)+x(3197)+x(1076)+x(371)+x(926)+x(383)+x(354)+x(1971)+x(2007)+x(1319)+x(612)+x(1356)+x(380)+x(1849)+x(1390)+x(2346)+x(2818)+x(543)+x(3293)+x(3513)+x(1041)+x(2199)+x(2800)+x(1471)+x(2609)+x(3392)+x(1741)+x(934)+x(1949)+x(1142)+x(2262)+x(901)+x(3498)+x(2562)+x(825)+x(2736)+x(1476))+(x(3195)+x(319)+x(371)+x(926)+x(729)+x(3197)+x(3442)+x(2376)+x(970)+x(3285)+x(787)+x(2638)+x(3141)+x(2486)+x(825)+x(1121)+x(2609)+x(3214)+x(1266)+x(3299)+x(1292)+x(2562)+x(825)+x(1121)+x(2609)+x(3214)+x(3434)+x(873)+x(1066)+x(2516)+x(2153)+x(2636)+x(2199)+x(2800)+x(664)+x(1475)+x(1295)+x(1332)+x(654)+x(1592)+x(1458)+x(2039)+x(2848)+x(2970)+x(995)+x(2593)+x(2314)+x(543)+x(396)+x(3449)+x(461)+x(612)+x(3065)+x(3197)+x(2578)+x(879)+x(432)+x(934)+x(1949)+x(348)+x(1861)+x(1381)+x(1556)+x(873)+x(2872)+x(2609)+x(691)+x(979)+x(3262)+x(716)+x(926)+x(383)+x(354)+x(2396)+x(934)+x(1949)+x(329)+x(1457)+x(3019)+x(1279)+x(883)),nkwuf:x(1126)+x(1145)+x(3369)+x(2729)+x(582)+x(2040)+x(3086)+x(1065),gCjHV:x(2982)+x(2783)+x(431)+x(1147)+x(2403)+x(1804)+x(2605)+x(3154)+x(1219)+x(2745)+x(3341)+x(491)+x(3234)+x(1257)+x(1189)+x(780)+x(3144)+x(418)+x(2427)+x(3203)+x(2959)+x(3e3)+x(2686)+x(3076)+x(546)+x(1731)+x(1236)+x(1288)+x(1053)+x(1913)+x(1774)+x(1379)+x(2647)+x(1981)+x(2410)+x(3448)+x(2559)+x(1008)+x(2637)+x(887),jfDBb:function(n){return n()},uVvxJ:x(2693),mjOqp:function(n,e){return n==e},WYhvR:function(n,e){return n(e)},lZvag:function(n,e){return e<=n},vVVsF:x(657),yGubm:x(781),vnTFF:x(3514),EyZvi:x(2740),DuGID:x(1240),soFYh:x(1874),mdozX:x(1980),RLrUc:x(1637),PBBUQ:x(345),AOgIp:x(1059)+"sh",galVE:x(2527),ASUbH:x(3272),QJibM:x(1930),leIMZ:x(2485),whfux:x(2905),LrsAk:x(1016),ujlKn:x(2539),MMqoE:x(2511)+"o",KXnOA:x(833),BpjFF:x(2105),lCwXz:x(3390),oicXH:x(2467),zVlqG:x(2752),pfynL:x(1140),iAYMy:x(1348)+"nd",FKWwT:x(2664),bokjH:x(2804),YXGLv:x(3231),tgmTA:x(3163),bPXSU:x(705),nkHBx:x(1951),OPcws:x(3007),knvAP:x(2458),TTIXX:x(2095)+"b",SsPSl:x(1284),mQHPl:x(1661),VMjPY:x(2681),dKNBg:x(2122),IEBhK:x(1364),ghdKI:x(632),lhPNu:x(2626),NhOhf:x(3433),RDcfd:x(827),HcpRr:x(3027),kHLpp:x(3039),Ttxpd:x(1104),RiwDa:x(1517),LDVmX:x(1005),qoSwR:x(576)+"am",fHeDS:x(1771),niKCw:x(1891),iORJh:x(2558),Cyxto:x(2372),IRwIc:x(1725)+x(1253)+x(1228),asTQD:x(1725)+x(1253)+x(710)+x(1908),PWHqi:function(n){return n()}},y={api:_[x(1318)],localhost:_[x(860)],apn:""};function i(t,i){var r=x;u&&(_[r(2904)](clearTimeout,f),u[r(2331)](),u=null),(u=(new signalR[r(3290)+r(1688)])[r(3483)](t.ws)[r(1927)]())[r(1708)]()[r(3360)](function(){var n=r,e={aXUuc:function(n){return _[_0x4d5a(374)](n)}};window[n(3218)][n(1765)](t[n(2183)],u,function(){e[n(1737)](i)})})[_[r(333)]](function(n){var e=r;Prisma[e(1865)][e(1007)](n[e(2429)]())}),_[r(1505)](t[r(398)],0)&&(f=_[r(1866)](setTimeout,function(){u[r(2331)](),u=null},_[r(1630)](1e3,t[r(398)])))}function l(n,e){var t=x;_[t(1958)](typeof signalR,_[t(1271)])?Prisma[t(2158)][t(2347)]([_[t(2334)]],function(){},!1,function(){_[t(3318)](i,n,e)},!0):_[t(3318)](i,n,e)}function j(n){for(var e,t=x,i=_[t(3444)][t(1075)]("|"),r=0;;){switch(i[r++]){case"0":_[t(1958)](n[t(2543)](_[t(1998)]),-1)&&_[t(2253)]("","")&&(n=Prisma[t(2158)][t(1557)+t(2575)](n,_[t(1998)]));continue;case"1":_[t(1958)](n[t(2543)](_[t(2992)]),-1)&&(e=Prisma[t(3233)][t(2080)](_[t(2765)],""))&&(n=Prisma[t(2158)][t(1557)+t(2575)](n,_[t(2901)](_[t(2992)],_[t(1464)](encodeURIComponent,e))));continue;case"2":_[t(1958)](n[t(2543)](_[t(1350)]),-1)&&(e=Prisma[t(3233)][t(2080)](_[t(2336)]))&&(n=Prisma[t(2158)][t(1557)+t(2575)](n,_[t(671)](_[t(1350)],_[t(2904)](encodeURIComponent,e))));continue;case"3":return n;case"4":n=_[t(671)](n,"");continue}break}}Prisma[x(3233)][x(2080)](_[x(2765)],"")||(n=Prisma[x(2158)][x(2819)](8)[x(3074)+"e"](),Prisma[x(3233)][x(1077)](_[x(2765)],n)),window[x(3218)]||Prisma[x(2158)][x(2347)]([_[x(1624)]],function(){},!1,function(){var n=x;window[n(3218)][n(1321)+n(3092)]||window[n(3218)][n(3287)](_[n(2161)],function(){})},!0);var e=Prisma[x(712)];function m(z){var Y,s,T,r,m,t,v,k=x,D={lFSvz:function(n,e){return _[_0x4d5a(1345)](n,e)},eHDnB:_[k(3312)],PeCvN:function(n,e){return _[k(1410)](n,e)},kReRu:_[k(1917)],exSxP:_[k(864)],YzCKc:_[k(3210)],GGevb:_[k(2694)],Eurrk:_[k(1544)],GVKIQ:_[k(2006)],Muigu:_[k(2240)],rFXMy:_[k(596)],kRjrB:_[k(640)],dREAH:_[k(3061)],Nmbou:_[k(933)],tUwBj:_[k(2523)],pkHzw:function(n,e){return _[k(2288)](n,e)},Jgdyh:_[k(993)],rNPZs:function(n){return _[k(1194)](n)},vCsTs:function(n,e,t){return _[k(1380)](n,e,t)},saMBN:function(n,e){return _[k(1367)](n,e)},nBYWJ:_[k(3240)],FNUEU:function(n,e){return _[k(808)](n,e)},QECRH:_[k(2238)],nzdwu:function(n,e,t){return _[k(1600)](n,e,t)},tGkyj:_[k(2921)],fNWaf:_[k(2569)],Pprzj:_[k(2201)],oavat:_[k(1127)],Paddo:_[k(333)],AKEIc:_[k(3136)],tfuUK:_[k(2193)],vlMnf:_[k(1859)],LlcNx:_[k(1883)],UUDnw:function(n){return _[k(3005)](n)},FsYJy:function(n,e,t){return _[k(1866)](n,e,t)},IOEXi:_[k(1736)],tZtzi:_[k(2649)],eNGbM:function(n,e){return _[k(2036)](n,e)},LHidM:function(n){return _[k(3005)](n)},ffsQx:_[k(1298)],kpRGi:function(n){return _[k(1194)](n)},RMnpU:function(n,e){return _[k(1367)](n,e)},woLuM:function(n,e){return _[k(1410)](n,e)},dqLGU:_[k(1271)],Syxog:_[k(3304)],LRpja:function(n,e){return _[k(1500)](n,e)},gTKWA:_[k(2857)],eFItF:function(n,e,t){return _[k(2599)](n,e,t)},laKIN:function(n,e){return _[k(2727)](n,e)},VXjXC:function(n){return _[k(374)](n)},ntOQl:function(n,e){return _[k(1170)](n,e)},pqmcz:function(n,e){return _[k(435)](n,e)},yfIDA:_[k(442)],jklCs:function(n,e){return _[k(911)](n,e)},oQaam:function(n,e){return _[k(2123)](n,e)},hpWMj:function(n,e){return _[k(2788)](n,e)},Houiy:function(n,e){return _[k(1464)](n,e)},jgjfl:_[k(1422)],kPdmj:function(n,e){return _[k(1493)](n,e)},ueucX:_[k(3317)],cGlup:_[k(2870)],CUNbC:function(n,e){return _[k(320)](n,e)},QxUZq:function(n,e){return _[k(652)](n,e)},NqiBm:_[k(2820)],hHsHK:_[k(1087)],UazIr:_[k(1681)],AVZld:_[k(1995)],QUoDd:_[k(839)],bToyS:function(n){return _[k(3005)](n)},BvOty:_[k(2279)],CgKkF:_[k(3512)],wGqcJ:_[k(2841)],kCXHE:_[k(1489)],xYsqy:_[k(1044)],POieF:function(n,e){return _[k(902)](n,e)},ABKgI:_[k(783)],HmOao:_[k(2497)],HQLmm:_[k(680)],Bvfkk:_[k(1813)],FVlwO:_[k(3252)],bABSS:_[k(1585)],TgAAo:_[k(2205)],rcbFK:function(n,e){return _[k(2255)](n,e)},IfumU:function(n,e){return _[k(2101)](n,e)},aXcew:_[k(2367)],VPIym:_[k(1465)],AcJbL:_[k(961)],uMxWS:_[k(2135)],zIqJG:_[k(3329)],MBIbr:function(n,e){return _[k(572)](n,e)},GloxS:_[k(3398)],cBrak:function(n,e){return _[k(1345)](n,e)},lzwPS:function(n,e){return _[k(1345)](n,e)},lcsSf:_[k(2167)],yqzGM:_[k(1310)],tVpLo:function(n,e){return _[k(1338)](n,e)},zclFt:_[k(1746)],snYPO:function(n,e){return _[k(2098)](n,e)},CcnlL:_[k(3230)],VNnpx:function(n,e){return _[k(2901)](n,e)},BFRyE:_[k(1336)],ZsgwO:_[k(2519)],gkfqG:_[k(3104)],JOIrX:function(n,e){return _[k(1500)](n,e)},IJeGl:_[k(1081)],IJTqZ:_[k(366)],lAQOC:_[k(2909)],ckDOE:function(n,e){return _[k(433)](n,e)},MgCLW:_[k(478)],OShkx:_[k(1703)],sfSAO:_[k(2977)],vodjR:function(n,e){return _[k(1367)](n,e)},abkHj:_[k(3130)],ZRiEY:_[k(2004)],OWpsi:_[k(3493)],frxcG:_[k(949)],YKtxQ:function(n,e){return _[k(2536)](n,e)},oRhYn:_[k(557)],OspVr:_[k(2418)],tVVXf:function(n,e){return _[k(1843)](n,e)},GENJr:_[k(457)],rYpWA:function(n,e){return _[k(1670)](n,e)},babCk:function(n,e){return _[k(3495)](n,e)},ONPUv:_[k(1473)],YuPxj:_[k(1208)],RLumx:_[k(1543)],sjEiQ:_[k(2671)],tepNw:_[k(2252)],DzWwt:function(n,e){return _[k(1533)](n,e)},uFySh:_[k(2397)],TTqvC:function(n,e){return _[k(3495)](n,e)},sFeLi:function(n,e){return _[k(1594)](n,e)},fRWoh:_[k(706)],HFUbb:_[k(346)],EowuG:_[k(2380)],gSygb:function(n,e){return _[k(1958)](n,e)},xnwxo:_[k(3035)],UoquS:function(n,e){return _[k(1410)](n,e)},Roffe:_[k(569)],oNISO:_[k(2466)],mwjEg:function(n,e){return _[k(750)](n,e)},QlCtW:_[k(1649)],oDqZY:_[k(1519)],PnwEU:function(n,e){return _[k(2904)](n,e)},KekSx:function(n,e){return _[k(3054)](n,e)},iwlfZ:function(n,e){return _[k(581)](n,e)},qlqdI:function(n,e){return _[k(1630)](n,e)},oTQzL:_[k(1730)],WBBVJ:function(n,e){return _[k(1948)](n,e)},pJOsB:_[k(2126)],oxpjc:_[k(1224)],GNDsI:_[k(1416)],kKRZZ:_[k(2097)],FQJyn:_[k(2761)],yBQDy:_[k(717)],ATaMx:_[k(3346)],dPTVh:_[k(2541)],zUlyC:_[k(1426)],mYJHh:_[k(1996)],QdtDM:_[k(1993)],sMrFU:_[k(2312)],NFoSo:_[k(2748)],qsBsE:_[k(311)],eDTDg:_[k(1686)],gpyfQ:function(n,e){return _[k(986)](n,e)},yIKqz:_[k(1064)],blKkt:_[k(1974)],ktMlF:_[k(554)],MkuKq:function(n,e){return _[k(808)](n,e)},QkzNz:function(n,e,t){return _[k(3318)](n,e,t)},HsTck:function(n,e){return _[k(2709)](n,e)},MOSGD:_[k(892)],TKBpU:_[k(1778)],jLEMS:_[k(2778)],OACos:_[k(845)],GxcMH:_[k(2356)],nqWTX:_[k(525)],OSrvv:function(n,e){return _[k(2166)](n,e)},wrypt:function(n,e){return _[k(2446)](n,e)},biAPv:function(n,e){return _[k(1229)](n,e)},XPEjq:function(n,e){return _[k(3054)](n,e)},qRsxb:function(n,e){return _[k(1533)](n,e)},idCJM:function(n,e){return _[k(2166)](n,e)},aHykr:function(n,e){return _[k(355)](n,e)},EGeeJ:function(n,e){return _[k(2166)](n,e)},BWFjs:function(n,e){return _[k(2166)](n,e)},EDXAe:function(n,e){return _[k(3487)](n,e)},aBoCc:function(n,e){return _[k(1554)](n,e)},epEQH:function(n,e){return _[k(581)](n,e)},NrOYr:function(n,e){return _[k(3474)](n,e)},LVodN:function(n,e){return _[k(449)](n,e)},ldKYy:function(n,e){return _[k(1170)](n,e)},JxCAt:_[k(2195)],RrZpP:function(n,e,t){return _[k(3118)](n,e,t)},dEdQV:_[k(2502)],rilFm:function(n,e){return _[k(1957)](n,e)},gLuMh:_[k(1562)],vThSK:function(n,e){return _[k(2895)](n,e)},qxnIn:_[k(1743)],MFbtu:function(n,e){return _[k(2255)](n,e)},wuOhZ:_[k(413)],oVgsT:function(n,e){return _[k(2192)](n,e)},DlIdm:function(n,e){return _[k(2788)](n,e)},GTlcS:function(n,e,t){return _[k(1779)](n,e,t)}},p=new e,B=new Prisma[k(3466)]({mask:!0,over:!0}),o=new Prisma[k(2867)](z),h=new Prisma[k(743)](z),F={},K=[],i=0,b=0,g={},a={season:Prisma[k(1812)][k(343)](_[k(2028)]),voice:Prisma[k(1812)][k(343)](_[k(3294)]),source:Prisma[k(1812)][k(343)](_[k(1551)])},R={season:[],voice:[]};function w(n){var e=k,t=n[e(1251)],n=n[e(539)][e(1075)](" ")[0];return D[e(1906)](t,n)[e(3074)+"e"]()}function c(n){var e=k,t=Prisma[e(2158)][e(3361)](z[e(1611)][e(1484)+e(1235)]?z[e(1611)][e(3247)+e(1751)]:z[e(1611)][e(1306)+e(381)]),i=Prisma[e(3233)][e(2080)](D[e(1029)],"{}");i[t]=n,Prisma[e(3233)][e(1077)](D[e(1029)],i)}function d(){var n=k,e=Prisma[n(2158)][n(3361)](z[n(1611)][n(1484)+n(1235)]?z[n(1611)][n(3247)+n(1751)]:z[n(1611)][n(1306)+n(381)]),t=Prisma[n(3233)][n(2080)](D[n(1029)],"{}");delete t[e],Prisma[n(3233)][n(1077)](D[n(1029)],t)}_[k(1049)](P,void 0)&&(p[k(3400)](1e4),p[k(2474)](_[k(1396)](j,_[k(1162)]),function(n){P=n},function(){P=[]})),this[k(3389)]=function(){for(var s=k,n=D[s(897)][s(1075)]("|"),e=0;;){switch(n[e++]){case"0":o[s(1947)](h[s(2292)]());continue;case"1":B[s(3047)](o[s(2292)]()[s(455)](D[s(1522)]));continue;case"2":h[s(1614)]=function(n,e,t){var i=s;if(l[i(1129)](n,l[i(2180)]))if(e[i(1620)])l[i(1226)](d),f[i(1790)+i(2463)]({season:0,voice:0,voice_url:"",voice_name:""}),l[i(3155)](setTimeout,function(){var n=i;Prisma[n(2672)][n(1805)](),Prisma[n(2451)][n(893)]({clarification:0,similar:0})},10);else if(l[i(2082)](e[i(1343)],l[i(2234)])){var r=g[t[i(2640)]];f[i(2311)+i(3208)](r),l[i(1739)](setTimeout,function(){var n=i;Prisma[n(2672)][n(1805)](),f[n(1620)](),f[n(560)]()})}else for(var o=l[i(3401)][i(1075)]("|"),a=0;;){switch(o[a++]){case"0":l[i(2714)](setTimeout,Prisma[i(2672)][i(1805)],10);continue;case"1":f[i(1620)]();continue;case"2":var c=R[e[i(1343)]][t[i(2640)]][i(2021)];continue;case"3":f[i(1412)](c);continue;case"4":u[e[i(1343)]]=t[i(2640)];continue;case"5":var u=f[i(1393)]();continue;case"6":l[i(2381)](e[i(1343)],l[i(2732)])&&(u[i(1894)]=R[i(630)][t[i(2640)]][i(690)],u[i(2037)]=c);continue;case"7":f[i(3251)](u);continue}break}else l[i(2381)](n,l[i(1078)])&&(Prisma[i(2672)][i(1805)](),z[i(1701)+i(1218)]=e[i(2198)],f[i(2311)+i(3208)](e[i(2198)]))};continue;case"3":if(z[s(1251)])for(var t=D[s(1172)][s(1075)]("|"),i=0;;){switch(t[i++]){case"0":F[z[s(1251)]]={name:z[s(1251)]};continue;case"1":o[s(2292)]()[s(455)](D[s(2954)])[s(2834)]();continue;case"2":return p[D[s(3463)]](D[s(2373)](j,z[s(2021)][s(893)](D[s(2525)],D[s(1192)])),this[s(2836)][s(1143)](this),function(){var n=s;o[n(2292)]()[n(455)](D[n(1589)])[n(2834)](),f[n(2706)]()},!1,{dataType:D[s(1200)]});case"3":g=[];continue;case"4":T=z[s(1251)];continue;case"5":F={};continue}break}continue;case"4":h[s(2292)]()[s(455)](D[s(2954)])[s(1570)](h[s(2292)]()[s(455)](D[s(1589)]));continue;case"5":h[s(3193)]=function(n){var e=s;D[e(2373)](c,n),Prisma[e(2451)][e(893)]({search:n,clarification:!0,similar:!0})};continue;case"6":h[s(2292)]()[s(455)](D[s(1185)]).on(D[s(806)],function(){l[s(1677)](clearInterval,m)});continue;case"7":var f=this;continue;case"8":o[s(660)+"s"](B[s(2292)]());continue;case"9":var l={uKXNc:function(n,e){return D[s(2373)](n,e)},ZKWpQ:function(n,e){return D[s(1056)](n,e)},QnxLD:D[s(3278)],TOSnJ:function(n){return D[s(3412)](n)},Alygk:function(n,e,t){return D[s(3067)](n,e,t)},cNIEq:function(n,e){return D[s(3311)](n,e)},RGAoe:D[s(2677)],twjvH:function(n,e){return D[s(1198)](n,e)},ZFDFm:D[s(707)],yeuRY:function(n,e,t){return D[s(2906)](n,e,t)},jljSU:function(n,e){return D[s(3311)](n,e)},qVhOZ:D[s(1117)],WHHcl:D[s(2958)],Kmmri:D[s(2954)],mvcSZ:D[s(1202)]};continue;case"10":Prisma[s(679)][s(960)](D[s(746)]);continue;case"11":this[s(2416)+"s"]()[s(3360)](function(){return f[s(620)+"ce"]()})[s(3360)](function(n){var t=s,i={BtAUS:function(n,e){return l[_0x4d5a(1129)](n,e)}};P[t(455)](function(n){var e=t;return i[e(648)](T[e(1844)](0,n[e(347)]),n)})||h[t(2292)]()[t(455)](l[t(674)])[t(1569)](l[t(1494)]),f[t(560)]()})[D[s(3511)]](function(n){var e=s;f[e(1636)+e(3103)](n)});continue;case"12":h[s(564)+s(2440)]&&h[s(564)+s(2440)]();continue;case"13":this[s(1206)](!1);continue;case"14":B[s(826)]()[s(830)](Prisma[s(1013)][s(2080)](D[s(3383)]));continue;case"15":h[s(669)]=function(){f[s(1708)]()};continue;case"16":this[s(1206)](!0);continue;case"17":h[s(2292)]()[s(455)](D[s(2067)])[s(635)](Prisma[s(1812)][s(343)](D[s(1349)]));continue;case"18":D[s(3067)](setTimeout,function(){var n=s;Prisma[n(3233)][n(2080)](D[n(2750)],!1)||z[n(1251)]||f[n(1510)+"p"]()},2e3);continue;case"19":B[s(826)]()[s(1569)](D[s(1604)]);continue}break}},this[k(3218)]=function(n,e){var t=k,i=this;D[t(923)](l,n,function(){var n=t;e?D[n(1088)](e):i[n(455)]()})},this[k(2416)+"s"]=function(){var c=k,u={zvpAS:function(n){return _[_0x4d5a(374)](n)},EURJW:_[c(1285)],UAyUT:function(n,e){return _[c(1607)](n,e)},OpkUe:_[c(1357)],kUNQz:function(n,e){return _[c(2901)](n,e)},LOWQb:_[c(2002)],nTPYw:function(n,e){return _[c(1173)](n,e)},Dlyhf:function(n,e){return _[c(3351)](n,e)},wDgcQ:function(n,e){return _[c(750)](n,e)},BRrXb:_[c(3044)],grRph:function(n,e){return _[c(695)](n,e)},XxmXo:_[c(2879)],JzRXG:_[c(3126)],qwyMe:function(n){return _[c(374)](n)}};return new Promise(function(i,n){var r=c;if(z[r(1611)][r(2076)]&&z[r(1611)][r(2847)+"id"])u[r(1586)](i);else for(var e=u[r(568)][r(1075)]("|"),t=0;;){switch(e[t++]){case"0":a[r(1618)](u[r(2553)](u[r(2129)],z[r(1611)].id));continue;case"1":z[r(1611)][r(2847)+"id"]&&a[r(1618)](u[r(2855)](u[r(1902)],z[r(1611)][r(2847)+"id"]||""));continue;case"2":p[r(2474)](u[r(994)](j,o),function(n){var e,t=r;for(e in n)z[t(1611)][e]=n[e];u[t(2236)](i)},function(){u[r(2236)](i)});continue;case"3":var o=u[r(2839)](u[r(795)](y[r(1308)],u[r(2492)]),a[r(625)]("&"));continue;case"4":a[r(1618)](u[r(1727)](u[r(2130)],z[r(1611)][r(539)]?1:0));continue;case"5":p[r(3400)](1e4);continue;case"6":var a=[];continue;case"7":z[r(1611)][r(2076)]&&a[r(1618)](u[r(1727)](u[r(2591)],z[r(1611)][r(2076)]||""));continue}break}})},this[k(2716)+k(3208)]=function(n){var e=k,t=Prisma[e(3233)][e(2547)](D[e(3267)],3e3,{});t[z[e(1611)].id]=n,Prisma[e(3233)][e(1077)](D[e(3267)],t)},this[k(2311)+k(3208)]=function(n){for(var e=k,t=_[e(1234)][e(1075)]("|"),i=0;;){switch(t[i++]){case"0":r[e(1894)]&&(o[e(1894)]=r[e(1894)]);continue;case"1":this[e(2716)+e(3208)](n);continue;case"2":s=F[T][e(2021)];continue;case"3":this[e(3251)](o,n);continue;case"4":this[e(1620)]();continue;case"5":T=n;continue;case"6":this[e(560)]();continue;case"7":Prisma[e(3233)][e(1077)](_[e(2907)],T);continue;case"8":Prisma[e(3233)][e(1077)](_[e(1859)],n);continue;case"9":var r=this[e(1393)]();continue;case"10":var o=this[e(1393)](n);continue}break}},this[k(3345)+k(1871)]=function(n){for(var e=k,t=_[e(1388)][e(1075)]("|"),i=0;;){switch(t[i++]){case"0":return _[e(671)](_[e(435)](n,_[e(634)](n[e(2543)]("?"),0)?"&":"?"),o[e(625)]("&"));case"1":var r=z[e(1611)][e(2198)]||_[e(1208)];continue;case"2":o[e(1618)](_[e(750)](_[e(436)],r));continue;case"3":o[e(1618)](_[e(1474)](_[e(1889)],window[e(3218)]?window[e(3218)][e(3503)]:""));continue;case"4":o[e(1618)](_[e(750)](_[e(1357)],z[e(1611)].id));continue;case"5":z[e(1611)][e(2847)+"id"]&&o[e(1618)](_[e(1838)](_[e(2002)],z[e(1611)][e(2847)+"id"]||""));continue;case"6":o[e(1618)](_[e(671)](_[e(575)],_[e(2904)](encodeURIComponent,z[e(1611)][e(1306)+e(381)]||z[e(1611)][e(3247)+e(1751)])));continue;case"7":o[e(1618)](_[e(3121)](_[e(2026)],!!z[e(2662)]));continue;case"8":o[e(1618)](_[e(1554)](_[e(2522)],_[e(895)](z[e(1611)][e(1650)+"te"]||z[e(1611)][e(2507)+e(1313)]||_[e(1768)],"")[e(1844)](0,4)));continue;case"9":o[e(1618)](_[e(1607)](_[e(1655)],z[e(496)+e(1237)]?1:0));continue;case"10":var o=[];continue;case"11":o[e(1618)](_[e(695)](_[e(1798)],_[e(2904)](encodeURIComponent,z[e(496)+e(1237)]?z[e(560)]:z[e(1611)][e(690)]||z[e(1611)][e(539)])));continue;case"12":z[e(1611)][e(2076)]&&o[e(1618)](_[e(435)](_[e(3126)],z[e(1611)][e(2076)]||""));continue;case"13":o[e(1618)](_[e(1554)](_[e(2879)],z[e(1611)][e(539)]?1:0));continue;case"14":Prisma[e(3233)][e(2080)](_[e(2336)],"")&&o[e(1618)](_[e(1216)](_[e(2223)],Prisma[e(2158)][e(3361)](Prisma[e(3233)][e(2080)](_[e(2336)],""))));continue;case"15":o[e(1618)](_[e(2830)](_[e(2278)],z[e(1611)][e(2826)+e(1799)]||""));continue}break}},this[k(2722)+k(3344)+"r"]=function(){var n=k,e=Prisma[n(3233)][n(2547)](_[n(1736)],3e3,{});return e[z[n(1611)].id]?e[z[n(1611)].id]:Prisma[n(3233)][n(2080)](_[n(1859)],g[n(347)]?g[0]:"")},this[k(1512)+"e"]=function(a){var c=k,u={xbEeJ:function(n,e){return _[_0x4d5a(1464)](n,e)},ZLhNf:function(n,e){return _[_0x4d5a(1958)](n,e)},tDcPS:_[c(1271)]};return new Promise(function(n,e){var i=c;if(a[i(2822)](function(n){var e=i,t=u[e(579)](w,n);F[t]={url:n[e(2021)],name:n[e(539)],show:!!u[e(814)](typeof n[e(1007)],u[e(3266)])||n[e(1007)]}}),(g=Prisma[i(2639)][i(2666)](F))[i(347)])for(var t=D[i(2942)][i(1075)]("|"),r=0;;){switch(t[r++]){case"0":T=o[z[i(1611)].id]?o[z[i(1611)].id]:Prisma[i(3233)][i(2080)](D[i(1349)],g[0]);continue;case"1":D[i(3432)](n,a);continue;case"2":s=F[T][i(2021)];continue;case"3":F[T]||(T=g[0]);continue;case"4":var o=Prisma[i(3233)][i(2547)](D[i(3267)],3e3,{});continue;case"5":F[T][i(1007)]||z[i(1701)+i(1218)]||(T=g[0]);continue}break}else D[i(977)](e)})},this[k(3189)]=function(){var a=k,c={zhJai:D[a(3339)],WBSar:function(n){return D[a(1163)](n)},bzklD:function(n,e){return D[a(524)](n,e)},LfoEG:function(n,e){return D[a(621)](n,e)},lHBBd:D[a(884)],qaUat:D[a(2989)],gYoNi:function(n,e){return D[a(1638)](n,e)},jFjUi:D[a(1842)],vRqVo:function(n,e,t){return D[a(2906)](n,e,t)},uzUjp:function(n,e,t){return D[a(3264)](n,e,t)},Ayypo:D[a(2958)],NwRZA:function(n,e){return D[a(1093)](n,e)},SqmkX:function(n){return D[a(2720)](n)},KKOEl:function(n,e){return D[a(3432)](n,e)},HixjB:function(n,e){return D[a(1404)](n,e)},OuDej:function(n,e){return D[a(1581)](n,e)},kBiQm:D[a(2027)]},d=this;return new Promise(function(e,o){for(var s=a,n=c[s(801)][s(1075)]("|"),t=0;;){switch(n[t++]){case"0":var i=function a(n){var c=s,u={loQbI:function(n,e){return m[_0x4d5a(661)](n,e)},NdRLY:function(n,e){return m[_0x4d5a(370)](n,e)},DvLeQ:m[c(776)],uCwNo:m[c(595)],kvlfG:function(n,e){return m[c(467)](n,e)},SRkHr:m[c(3051)],ejLSY:function(n,e,t){return m[c(1667)](n,e,t)},Dynem:function(n,e,t){return m[c(2838)](n,e,t)},UtopJ:m[c(3281)],dPaxY:function(n,e){return m[c(3516)](n,e)},lFBUg:function(n,e){return m[c(728)](n,e)},aURjd:function(n,e){return m[c(580)](n,e)},kzyCs:function(n){return m[c(915)](n)}};p[c(3400)](3e3),p[c(2474)](m[c(629)](j,r),function(n){for(var i=c,e=u[i(1366)][i(1075)]("|"),t=0;;){switch(e[t++]){case"0":u[i(1823)](b,15)||n[i(3399)]?(h[i(2292)]()[i(455)](u[i(2772)])[i(2834)](),u[i(1084)](f,n,!0)):v=(!l&&F[r]&&F[r][i(1007)]&&u[i(514)](f,n,!0),u[i(1084)](setTimeout,a,1e3));continue;case"1":F={};continue;case"2":h[i(1077)](u[i(3176)],g[i(1339)](function(n){var e=i;return{title:F[n][e(539)],source:n,selected:o[e(3391)](n,T),ghost:!F[n][e(1007)]}}));continue;case"3":u[i(422)](f,n);continue;case"4":b++;continue;case"5":var r=d[i(2722)+i(3344)+"r"]();continue;case"6":n[i(1499)][i(2822)](function(n){var e=i,t=u[e(3002)](w,n);F[t]={url:n[e(2021)],name:n[e(539)],show:!!u[e(2399)](typeof n[e(1007)],u[e(2444)])||n[e(1007)]}});continue;case"7":g=Prisma[i(2639)][i(2666)](F);continue;case"8":g=[];continue;case"9":var o={OBtOl:function(n,e){return u[i(1123)](n,e)}};continue;case"10":h[i(2506)](u[i(3176)],[F[T]?F[T][i(539)]:T]);continue}break}},function(){var n=c;b++,u[n(2286)](b,15)?u[n(3355)](o):v=u[n(514)](setTimeout,a,1e3)})};continue;case"1":var f=function(n,t){var i=s;if(n[i(2874)])return m[i(3516)](o,n);var r=d[i(2722)+i(3344)+"r"]();l||(n[i(1499)][i(2944)](function(n){var e=i;return t?n[e(1007)]:n[e(1007)]&&m[e(370)](n[e(539)][e(3074)+"e"](),r)})[i(347)]?(l=!0,m[i(3516)](e,n[i(1499)][i(2944)](function(n){return n[i(1007)]}))):t&&m[i(3300)](o))};continue;case"2":c[s(3246)](i);continue;case"3":var l=!1;continue;case"4":var m={dUWcs:function(n,e){return c[s(1518)](n,e)},cvywI:function(n,e){return c[s(2799)](n,e)},DHRPI:function(n){return c[s(3246)](n)},APDga:function(n,e){return c[s(2799)](n,e)},ehwfq:c[s(1166)],Ysare:c[s(715)],ddqkF:function(n,e){return c[s(1770)](n,e)},PtXfF:c[s(1136)],LFYKK:function(n,e,t){return c[s(1942)](n,e,t)},URihJ:function(n,e,t){return c[s(1511)](n,e,t)},AFcNL:c[s(1281)],XIvmG:function(n,e){return c[s(3100)](n,e)},WZdcd:function(n,e){return c[s(1770)](n,e)},nMUQM:function(n){return c[s(1068)](n)},wxFdy:function(n,e){return c[s(1508)](n,e)}};continue;case"5":var r=d[s(3345)+s(1871)](c[s(302)](c[s(592)](y[s(1308)],c[s(2293)]),d[s(1392)]||""));continue}break}})},this[k(620)+"ce"]=function(){var a=k,c={wCjTc:function(n,e){return _[_0x4d5a(1173)](n,e)},pmDfc:_[a(2748)],vDbZi:_[a(2735)],YgKJW:_[a(333)],sZiHc:function(n,e){return _[a(1191)](n,e)},FPDln:_[a(2892)]},u=this;return new Promise(function(t,i){var r=a,o={rBzKj:function(n,e){return c[_0x4d5a(2728)](n,e)},visHT:c[r(2676)],SGzsh:c[r(2136)],wPSSH:c[r(3506)]},n=u[r(3345)+r(1871)](c[r(2362)](y[r(1308)],c[r(1441)]));p[r(3400)](15e3),p[r(2474)](c[r(2728)](j,n),function(n){var e=r;if(n[e(2874)])return o[e(2241)](i,n);(n[e(1453)]?(u[e(1392)]=n[e(1392)],n[e(690)]&&(z[e(1611)][e(539)]&&(z[e(1611)][e(539)]=n[e(690)]),z[e(1611)][e(690)])&&(z[e(1611)][e(690)]=n[e(690)]),h[e(2292)]()[e(455)](o[e(1850)])[e(830)](o[e(1992)]),u[e(3189)]()[e(3360)](u[e(1512)+"e"])):u[e(1512)+"e"](n))[e(3360)](t)[o[e(1427)]](i)},i)})},this[k(940)]=function(){return this[k(2292)]()},this[k(560)]=function(){var n=k;this[n(2944)]({source:g},this[n(1393)]()),this[n(455)]()},this[k(455)]=function(){var n=k;this[n(1412)](this[n(3345)+n(1871)](s))},this[k(1412)]=function(n){var e=k;i++,D[e(2318)](i,10)?(p[D[e(3463)]](D[e(1160)](j,n),this[e(2836)][e(1143)](this),this[e(1966)+e(1265)][e(1143)](this),!1,{dataType:D[e(1200)]}),D[e(1893)](clearTimeout,t),t=D[e(2906)](setTimeout,function(){i=0},4e3)):this[e(2706)]()},this[k(1945)+k(2845)]=function(n,e){var u=k,s={tVuqw:_[u(334)],JTZrf:function(n,e){return _[u(2904)](n,e)},qRcCf:_[u(3228)],tBjcO:function(n,e){return _[u(1049)](n,e)},oqjou:_[u(856)],boSRR:_[u(2825)]};try{var t=_[u(2123)]($,_[u(3351)](_[u(2164)](_[u(3023)],n),_[u(1703)])),f=[];return t[u(455)](e)[u(931)](function(){for(var n=u,e=s[n(1119)][n(1075)]("|"),t=0;;){switch(e[t++]){case"0":a&&(r[n(335)]=s[n(2445)](parseInt,a));continue;case"1":r[n(2903)]=i[n(1782)](s[n(1359)]);continue;case"2":!z[n(1611)][n(539)]&&(c[n(2322)](/\d+p/i)&&(r[n(2678)]||(r[n(2678)]={},r[n(2678)][c]=r[n(2021)]),c=z[n(1611)][n(690)]),s[n(3494)](c,s[n(1220)]))&&(c=z[n(1611)][n(690)]);continue;case"3":var i=s[n(2445)]($,this);continue;case"4":var r=JSON[n(2836)](i[n(972)](s[n(1817)]));continue;case"5":o&&(r[n(841)]=s[n(2445)](parseInt,o));continue;case"6":c&&(r[n(635)]=c);continue;case"7":var o=i[n(972)]("e");continue;case"8":var a=i[n(972)]("s");continue;case"9":f[n(1618)](r);continue;case"10":var c=i[n(635)]();continue}break}}),f}catch(n){return[]}},this[k(378)]=function(t,i){var n,r=k,e={YpkDq:function(n,e,t){return _[_0x4d5a(1156)](n,e,t)}},o=this;_[r(416)](Prisma[r(3233)][r(2688)](_[r(1087)]),_[r(1681)])&&t[r(2210)]&&Prisma[r(1282)].is(_[r(3221)])?((n=Prisma[r(2639)][r(2577)](t))[r(1599)]=_[r(1813)],n[r(2021)]=t[r(2210)],_[r(3318)](i,n,{})):_[r(1070)](t[r(1599)],_[r(1813)])?_[r(1573)](i,t,{}):(Prisma[r(3440)][r(1708)](function(){var n=r;Prisma[n(3440)][n(2331)](),Prisma[n(679)][n(3004)](D[n(746)]),p[n(3282)]()}),p[_[r(2240)]](_[r(1173)](j,t[r(2021)]),function(n){var e=r;n[e(3218)]?o[e(3218)](n,function(){var n=e;Prisma[n(3440)][n(2331)](),o[n(378)](t,i)}):(Prisma[e(3440)][e(2331)](),D[e(3264)](i,n,n))},function(){var n=r;Prisma[n(3440)][n(2331)](),e[n(2391)](i,!1,{})}))},this[k(2557)+k(2475)]=function(n){var e=k;return{title:n[e(690)],url:n[e(2021)],quality:n[e(1583)],timeline:n[e(2933)],subtitles:n[e(1414)],callback:n[e(1915)]}},this[k(1259)+"ve"]=function(n){var e,t=k;n[t(2021)]&&_[t(1049)](typeof n[t(2021)],_[t(2829)])&&_[t(340)](n[t(2021)][t(2543)](_[t(3317)]),-1)&&(e=n[t(2021)][t(1075)](_[t(3317)]),n[t(2021)]=e[0],n[t(1316)+"e"]=e[1])},this[k(3297)+k(2601)]=function(n){var e=k;if(Prisma[e(2639)][e(2666)](n[e(2678)])[e(347)])for(var t in n[e(2678)])D[e(524)](D[e(2361)](parseInt,t),Prisma[e(3233)][e(2688)](D[e(2477)]))&&(n[e(2021)]=n[e(2678)][t],this[e(1259)+"ve"](n)),D[e(512)](n[e(2678)][t][e(2543)](D[e(1497)]),-1)&&(n[e(2678)][t]=n[e(2678)][t][e(1075)](D[e(1497)])[0])},this[k(1876)]=function(d){var o=k,a={bBaDS:function(n,e){return D[_0x4d5a(3432)](n,e)}},v=this;this[o(513)](d,{onEnter:function(l,n){var s=o,m={QcZVg:D[s(823)],enYJE:function(n,e){return D[s(1623)](n,e)},abzYb:function(n,e){return D[s(2508)](n,e)},yRprK:D[s(2576)],xxRmv:function(n,e){return D[s(512)](n,e)},FdzSP:D[s(2115)],fiXSE:D[s(910)],AmZfQ:D[s(3186)],EqlxV:D[s(3283)],oSfat:function(n){return D[s(890)](n)},uTpxr:D[s(1137)],vbcdg:function(n,e){return D[s(1638)](n,e)},hsDHL:D[s(482)]};v[s(378)](l,function(i,n){var r=s;if(i&&i[r(2021)])for(var e=m[r(2419)][r(1075)]("|"),t=0;;){switch(e[t++]){case"0":var o=v[r(2557)+r(2475)](l);continue;case"1":o[r(349)]=n[r(349)]||i[r(349)];continue;case"2":v[r(3297)+r(2601)](o);continue;case"3":o[r(1858)]=i[r(1858)];continue;case"4":o[r(2678)]=n[r(2678)]||l[r(1583)];continue;case"5":o[r(1414)]=i[r(1414)];continue;case"6":v[r(1259)+"ve"](o);continue;case"7":m[r(1097)](f[r(347)],1)&&(o[r(2204)]=f);continue;case"8":l[r(335)]?d[r(2822)](function(c){for(var e=r,n=m[e(2850)][e(1075)]("|"),t=0;;){switch(n[t++]){case"0":var u=v[e(2557)+e(2475)](c);continue;case"1":f[e(1618)](u);continue;case"2":m[e(1757)](c,l)?u[e(2021)]=i[e(2021)]:m[e(1184)](c[e(1599)],m[e(2190)])?m[e(2868)](Prisma[e(3233)][e(2688)](m[e(2896)]),m[e(2464)])?(u[e(2021)]=c[e(2210)],delete u[e(2678)]):u[e(2021)]=function(o){var a=e;v[a(378)](c,function(n,e){var t=a;if(n[t(2021)])for(var i=s[t(2247)][t(1075)]("|"),r=0;;){switch(i[r++]){case"0":u[t(1414)]=n[t(1414)];continue;case"1":c[t(1915)]();continue;case"2":u[t(2678)]=e[t(2678)]||c[t(1583)];continue;case"3":u[t(2021)]=n[t(2021)];continue;case"4":v[t(1259)+"ve"](u);continue;case"5":v[t(3297)+t(2601)](u);continue}break}else u[t(2021)]="",Prisma[t(1865)][t(1007)](Prisma[t(1812)][t(343)](s[t(2812)]));s[t(1138)](o)},function(){var n=a;u[n(2021)]="",s[n(1138)](o)})}:u[e(2021)]=c[e(2021)];continue;case"3":var s={YMPey:m[e(3093)],YXjYp:m[e(2172)],ocAxI:function(n){return m[e(2645)](n)}};continue;case"4":v[e(1259)+"ve"](u);continue;case"5":v[e(3297)+e(2601)](u);continue}break}}):f[r(1618)](o);continue;case"9":o[r(3332)]=i[r(3332)];continue;case"10":if(o[r(2021)])for(var a=m[r(3331)][r(1075)]("|"),c=0;;){switch(a[c++]){case"0":v[r(2716)+r(3208)](T);continue;case"1":Prisma[r(2398)][r(2204)](f);continue;case"2":l[r(1915)]();continue;case"3":var u=o;continue;case"4":Prisma[r(2398)][r(1532)](o);continue;case"5":u[r(2457)]=!0;continue}break}else Prisma[r(1865)][r(1007)](Prisma[r(1812)][r(343)](m[r(2172)]));continue;case"11":o[r(2021)]=i[r(2021)];continue;case"12":o[r(3284)+r(3417)]=n[r(3284)+r(3417)]||i[r(3284)+r(3417)];continue;case"13":var f=[];continue}break}else Prisma[r(1865)][r(1007)](Prisma[r(1812)][r(343)](m[r(2172)]))},!0)},onContextMenu:function(t,n,e,i){var r=o;v[r(378)](t,function(n){var e=r;a[e(2366)](i,{file:n[e(2021)],quality:t[e(1583)]})},!0)}}),this[o(2944)]({season:R[o(335)][o(1339)](function(n){return n[o(690)]}),voice:R[o(630)][o(1339)](function(n){return n[o(690)]})},this[o(1393)]())},this[k(2836)]=function(n){for(var t=k,e=D[t(1904)][t(1075)]("|"),i=0;;){switch(e[i++]){case"0":try{var r=this[t(1945)+t(2845)](n,D[t(2846)]),o=this[t(1945)+t(2845)](n,D[t(3120)]);if(D[t(968)](r[t(347)],1)&&D[t(3311)](r[0][t(1599)],D[t(574)])&&!r[0][t(2662)])R[t(335)]=r[t(1339)](function(n){var e=t;return{title:n[e(635)],url:n[e(2021)]}}),this[t(1790)+t(2463)]({season:0}),this[t(1412)](r[0][t(2021)]);else{this[t(1797)][t(2721)](!1);var a=r[t(2944)](function(n){var e=t;return P[e(1673)](n[e(1599)],P[e(670)])||P[e(1673)](n[e(1599)],P[e(2891)])}),c=r[t(2944)](function(n){return n[t(2662)]});if(a[t(347)])if(o[t(347)])for(var u=D[t(3223)][t(1075)]("|"),s=0;;){switch(u[s++]){case"0":var f=o[t(455)](function(n){return n[t(2903)]});continue;case"1":var l=this[t(1393)](T)[t(1894)];continue;case"2":var m=this[t(1393)](T)[t(2037)];continue;case"3":var d=o[t(455)](function(n){var e=t;return P[e(1673)](n[e(2021)],m)});continue;case"4":R[t(630)]=o[t(1339)](function(n){var e=t;return{title:n[e(635)],url:n[e(2021)]}});continue;case"5":var v=o[t(455)](function(n){var e=t;return P[e(1673)](n[e(635)],l)});continue;case"6":d&&!d[t(2903)]?(this[t(1790)+t(2463)]({voice:o[t(2543)](d),voice_name:d[t(635)]}),this[t(1412)](d[t(2021)])):v&&!v[t(2903)]?(this[t(1790)+t(2463)]({voice:o[t(2543)](v),voice_name:v[t(635)]}),this[t(1412)](v[t(2021)])):(f&&this[t(1790)+t(2463)]({voice:o[t(2543)](f),voice_name:f[t(635)]}),this[t(1876)](a));continue}break}else this[t(1790)+t(2463)]({voice:0,voice_url:"",voice_name:""}),this[t(1876)](a);else if(r[t(347)])if(c[t(347)])this[t(2918)](c),this[t(1797)][t(2721)](!1);else for(var p=D[t(3164)][t(1075)]("|"),h=0;;){switch(p[h++]){case"0":b=b||R[t(335)][0];continue;case"1":var b=R[t(335)][g];continue;case"2":this[t(1412)](b[t(2021)]);continue;case"3":R[t(335)]=r[t(1339)](function(n){var e=t;return{title:n[e(635)],url:n[e(2021)]}});continue;case"4":var g=this[t(1393)](T)[t(335)];continue}break}else this[t(1966)+t(1265)](w)}}catch(n){this[t(1966)+t(1265)](n)}continue;case"1":var w=Prisma[t(2639)][t(2910)](n,{});continue;case"2":if(w[t(3218)])return this[t(3218)](w);continue;case"3":Prisma[t(2639)][t(1258)](n)&&n[t(3218)]&&(w=n);continue;case"4":var P={ZDPQB:function(n,e){return D[t(524)](n,e)},RaxKq:D[t(3183)],nqlGn:D[t(2576)]};continue}break}},this[k(2918)]=function(n){for(var f=k,e=D[f(1825)][f(1075)]("|"),t=0;;){switch(e[t++]){case"0":B[f(3282)]();continue;case"1":var l=this;continue;case"2":Prisma[f(679)][f(960)](D[f(746)]);continue;case"3":this[f(2944)]({season:R[f(335)][f(1339)](function(n){return n[f(690)]}),voice:R[f(630)][f(1339)](function(n){return n[f(690)]})},this[f(1393)]());continue;case"4":n[f(2822)](function(e){for(var n,t=f,i=D[t(3307)][t(1075)]("|"),r=0;;){switch(i[r++]){case"0":e[t(690)]=e[t(635)];continue;case"1":o&&s[t(1618)](o);continue;case"2":e[t(3301)]&&(n=D[t(621)]($,D[t(1925)]),a[t(455)](D[t(2294)])[t(2706)]()[t(830)](n),D[t(512)](e[t(3301)],void 0)&&(D[t(1301)](e[t(3301)][t(2950)](0),"/")&&(e[t(3301)]=D[t(1404)](y[t(1308)],e[t(3301)][t(2407)](1))),D[t(929)](e[t(3301)][t(2543)](D[t(1934)]),-1))&&(e[t(3301)]=D[t(2373)](j,e[t(3301)])),Prisma[t(2158)][t(858)](n,e[t(3301)]));continue;case"3":var o=D[t(1404)](e[t(1819)]||e[t(1523)]||z[t(1611)][t(1650)+"te"]||z[t(1611)][t(2507)+t(1313)]||"","")[t(1844)](0,4);continue;case"4":e[t(522)]="";continue;case"5":a.on(D[t(806)],function(){var n=t;l[n(1620)](),l[n(1412)](e[n(2021)])}).on(D[t(1276)],function(n){var e=t;Y=n[e(526)],B[e(744)](c[e(2277)]($,n[e(526)]),!0)});continue;case"6":var a=Prisma[t(1013)][t(2080)](D[t(1755)],e);continue;case"7":var c={VKOVx:function(n,e){return D[t(621)](n,e)}};continue;case"8":e[t(1309)]=e[t(1309)]||"";continue;case"9":var u=e[t(690)]||e[t(635)];continue;case"10":var s=[];continue;case"11":e[t(1818)]&&s[t(1618)](e[t(1818)]);continue;case"12":e[t(522)]=s[t(625)](D[t(3393)]);continue;case"13":e[t(690)]=u;continue;case"14":B[t(830)](a);continue}break}});continue}break}},this[k(1393)]=function(n){var e=k,n=Prisma[e(3233)][e(2547)](D[e(2753)](D[e(2272)],D[e(1906)](n,T)),3e3,{})[z[e(1611)].id]||{};return Prisma[e(2639)][e(1940)](n,{season:0,voice:0,voice_name:"",voice_id:0,episodes_view:{},movie_view:""}),n},this[k(3251)]=function(n,e){var t=k,i=Prisma[t(3233)][t(2547)](D[t(2753)](D[t(2272)],D[t(2194)](e,T)),3e3,{});i[z[t(1611)].id]=n,Prisma[t(3233)][t(1077)](D[t(2753)](D[t(2272)],D[t(2088)](e,T)),i),this[t(2716)+t(3208)](D[t(2088)](e,T))},this[k(1790)+k(2463)]=function(n,e){var t=k,i=this[t(1393)](e);Prisma[t(2639)][t(1940)](i,n,!0),this[t(3251)](i,e)},this[k(471)+"s"]=function(){var t=k;K[t(2822)](function(n){var e=t;n[e(935)]=function(){},n[e(997)]=function(){},n[e(1822)]=""}),K=[]},this[k(1620)]=function(){for(var n=k,e=D[n(1477)][n(1075)]("|"),t=0;;){switch(e[t++]){case"0":B[n(826)]()[n(830)](Prisma[n(1013)][n(2080)](D[n(3383)]));continue;case"1":p[n(3282)]();continue;case"2":B[n(1620)]();continue;case"3":B[n(3282)]();continue;case"4":Y=!1;continue;case"5":this[n(471)+"s"]();continue;case"6":B[n(2292)]()[n(455)](D[n(3194)])[n(2834)]();continue;case"7":D[n(2966)](clearInterval,m);continue}break}},this[k(1206)]=function(n){var e=k;n?this[e(1797)][e(2721)](!0):(this[e(1797)][e(2721)](!1),this[e(1797)][e(3004)]())},this[k(2944)]=function(f,n){for(var l=k,e=_[l(1019)][l(1075)]("|"),t=0;;){switch(e[t++]){case"0":f[l(2198)]=g[l(1339)](function(n){var e=l;return F[n][e(539)]});continue;case"1":h[l(1077)](_[l(2569)],g[l(1339)](function(n){var e=l;return{title:F[n][e(539)],source:n,selected:v[e(1050)](n,T),ghost:!F[n][e(1007)]}}));continue;case"2":_[l(3318)](i,_[l(3240)],Prisma[l(1812)][l(343)](_[l(1859)]));continue;case"3":f[l(630)]&&f[l(630)][l(347)]&&_[l(1156)](i,_[l(2921)],Prisma[l(1812)][l(343)](_[l(3294)]));continue;case"4":h[l(1077)](_[l(993)],d);continue;case"5":f[l(335)]&&f[l(335)][l(347)]&&_[l(2742)](i,_[l(1391)],Prisma[l(1812)][l(343)](_[l(2028)]));continue;case"6":var m=this;continue;case"7":var d=[];continue;case"8":d[l(1618)]({title:Prisma[l(1812)][l(343)](_[l(1682)]),reset:!0});continue;case"9":this[l(3251)](n);continue;case"10":var v={fjqVQ:function(n,e){return _[l(694)](n,e)},WKKFL:function(n,e){return _[l(2255)](n,e)},Ocpen:_[l(3240)],lSPtW:function(n,e){return _[l(1070)](n,e)}};continue;case"11":var i=function(i,n){for(var r=l,e=D[r(2056)][r(1075)]("|"),t=0;;){switch(e[t++]){case"0":d[r(1618)]({title:n,subtitle:c,items:s,stype:i});continue;case"1":var o=a[i];continue;case"2":c=D[r(3018)](i,D[r(2677)])?F[T][r(539)]:u[o];continue;case"3":var a=m[r(1393)]();continue;case"4":var c="";continue;case"5":u[r(2822)](function(n,e){var t=r;s[t(1618)]({title:n,selected:v[t(3461)](o,e),index:e,source:v[t(1272)](i,v[t(2632)])?g[e]:void 0})});continue;case"6":var u=f[i];continue;case"7":var s=[];continue}break}};continue;case"12":this[l(2393)](f);continue}break}},this[k(2393)]=function(n){var e,t=k,i=this[t(1393)](),r=[];for(e in i)n[e]&&n[e][t(347)]&&(_[t(694)](e,_[t(2921)])?r[t(1618)](_[t(1244)](_[t(3354)](a[e],": "),n[e][i[e]])):_[t(2563)](e,_[t(3240)])&&n[t(335)]&&_[t(634)](n[t(335)][t(347)],1)&&r[t(1618)](_[t(3121)](_[t(1170)](a[t(335)],": "),n[e][i[e]])));h[t(2506)](_[t(993)],r),h[t(2506)](_[t(2569)],[F[T][t(539)]])},this[k(990)+"s"]=function(n,t){var i=k,r={KLBmO:function(n,e){return _[_0x4d5a(2904)](n,e)},IprZW:function(n,e){return _[_0x4d5a(2123)](n,e)}},o=[];if(_[i(694)]([_[i(1473)],_[i(1208)]][i(2543)](z[i(1611)][i(2198)]||_[i(1208)]),-1))return _[i(2308)](t,o);_[i(3319)](typeof z[i(1611)].id,_[i(1344)])&&z[i(1611)][i(539)]?(n=_[i(1753)](_[i(722)](_[i(852)](_[i(2164)](_[i(1607)](_[i(2425)](_[i(651)](_[i(2179)],z[i(1611)].id),_[i(1274)]),n),_[i(616)]),Prisma[i(1178)][i(2883)]()),_[i(2175)]),Prisma[i(3233)][i(2080)](_[i(1907)],"ru")),n=Prisma[i(1178)][i(437)](n),p[i(3400)](_[i(1630)](1e3,10)),p[_[i(2240)]](n,function(n){var e=i;o=n[e(1405)]||[],r[e(3334)](t,o)},function(n,e){r[i(1848)](t,o)})):_[i(2123)](t,o)},this[k(918)]=function(n){var e=k,t=Prisma[e(2158)][e(3361)](z[e(1611)][e(1484)+e(1235)]?z[e(1611)][e(3247)+e(1751)]:z[e(1611)][e(1306)+e(381)]),i=Prisma[e(3233)][e(2547)](D[e(1903)],5e3,{});if(!n)return i[t];i[t]||(i[t]={}),Prisma[e(2639)][e(1940)](i[t],n,!0),Prisma[e(3233)][e(1077)](D[e(1903)],i),this[e(778)+e(2756)]()},this[k(778)+k(2756)]=function(){var t=k,n=this[t(918)](),i=B[t(826)]()[t(455)](_[t(1860)])[t(2706)]();if(n)for(var e=_[t(1324)][t(1075)]("|"),r=0;;){switch(e[r++]){case"0":var o=[];continue;case"1":n[t(2965)+t(1751)]&&o[t(1618)](n[t(2965)+t(1751)]);continue;case"2":o[t(2822)](function(n){var e=t;i[e(830)](D[e(1098)](D[e(1581)](D[e(1857)],n),D[e(2646)]))});continue;case"3":n[t(1894)]&&o[t(1618)](n[t(1894)]);continue;case"4":n[t(335)]&&o[t(1618)](_[t(651)](_[t(1037)](Prisma[t(1812)][t(343)](_[t(2028)])," "),n[t(335)]));continue;case"5":n[t(841)]&&o[t(1618)](_[t(2901)](_[t(722)](Prisma[t(1812)][t(343)](_[t(1478)])," "),n[t(841)]));continue}break}else i[t(830)](_[t(800)](_[t(3354)](_[t(1336)],Prisma[t(1812)][t(343)](_[t(2084)])),_[t(2519)]))},this[k(513)]=function(S){for(var t=k,n=D[t(3069)][t(1075)]("|"),e=0;;){switch(n[e++]){case"0":var p={dPbfU:D[t(1479)],pgRLQ:function(n,e){return D[t(3438)](n,e)},TJyCo:D[t(1857)],qisvJ:D[t(2646)],ygisS:D[t(2894)],CEAzn:D[t(1977)],gpsZd:D[t(3220)],TIiPz:function(n,e){return D[t(1342)](n,e)},rSSez:D[t(3377)],LgeIN:D[t(3478)],UfqRU:D[t(538)],lbtev:D[t(3447)],UPuVb:D[t(2137)],xnyzz:function(n,e){return D[t(2871)](n,e)},lTibp:D[t(483)],qRlKY:function(n,e){return D[t(2134)](n,e)},Ovouu:D[t(3393)],KqGak:function(n,e){return D[t(1638)](n,e)},LYUiL:D[t(2661)],QREBa:function(n,e){return D[t(301)](n,e)},oItDn:function(n,e){return D[t(1747)](n,e)},tONig:function(n,e){return D[t(1841)](n,e)},rLkrL:function(n,e){return D[t(2134)](n,e)},HlHyp:function(n,e){return D[t(2134)](n,e)},kjzow:function(n,e){return D[t(1581)](n,e)},lCzlO:D[t(1633)],ZGtut:D[t(3457)],eeFVm:D[t(613)],wkGvq:function(n,e){return D[t(3438)](n,e)},kVaNj:function(n,e){return D[t(2436)](n,e)},cFDHx:D[t(1276)],FfHgX:D[t(2926)]};continue;case"1":var N=D[t(3238)](arguments[t(347)],1)&&D[t(512)](arguments[1],void 0)?arguments[1]:{};continue;case"2":B[t(3282)]();continue;case"3":z[t(1251)]||B[t(830)](Prisma[t(1013)][t(2080)](D[t(336)],{}));continue;case"4":this[t(990)+"s"](S[0][t(335)],function(P){for(var k=t,n=D[k(906)][k(1075)]("|"),e=0;;){switch(n[e++]){case"0":var x=D[k(1638)](window[k(3059)],480);continue;case"1":var _=!1;continue;case"2":H&&D[k(2670)](P[k(347)],S[k(347)])&&!N[k(2918)]&&P[k(1844)](S[k(347)])[k(2822)](function(e){for(var t=k,n=p[t(2767)][t(1075)]("|"),i=0;;){switch(n[i++]){case"0":B[t(830)](c);continue;case"1":var r={dzsSw:function(n,e){return p[t(2653)](n,e)},wKFKb:p[t(589)],vBeaC:p[t(831)],YBXmH:p[t(747)],liyQQ:p[t(527)],AlwnE:p[t(2064)],xNGVB:function(n,e){return p[t(1963)](n,e)},VGgVG:p[t(1239)]};continue;case"2":c[t(2899)](p[t(2417)],p[t(1146)]);continue;case"3":var o=c[t(455)](p[t(1009)]);continue;case"4":e[t(3394)+"ge"]&&m[t(1618)](Prisma[t(1013)][t(2080)](p[t(430)],{rate:p[t(803)](parseFloat,p[t(1963)](e[t(3394)+"ge"],""))[t(1334)](1)},!0));continue;case"5":var a=Date[t(2379)]();continue;case"6":var c=Prisma[t(1013)][t(2080)](p[t(835)],{time:Prisma[t(2158)][t(786)+t(3505)](p[t(3034)]((e||z[t(1611)])[t(3077)],60),!0),info:m[t(347)]?m[t(1339)](function(n){var e=t;return r[e(1083)](r[e(1083)](r[e(1263)],n),r[e(951)])})[t(625)](p[t(2370)]):"",title:e[t(539)],quality:p[t(939)](s,0)?f:""});continue;case"7":var u=c[t(455)](p[t(1365)])[0];continue;case"8":var s=Math[t(2249)](p[t(3480)](p[t(1067)](d[t(2074)](),a),p[t(2572)](p[t(1082)](p[t(3102)](24,60),60),1e3)));continue;case"9":var f=p[t(1963)](p[t(2560)](Prisma[t(1812)][t(343)](p[t(2476)]),": "),s);continue;case"10":c[t(455)](p[t(2094)])[t(830)](Prisma[t(545)][t(2292)](Prisma[t(545)][t(2103)](Prisma[t(2158)][t(3361)]([l,e[t(1712)+t(878)],z[t(1611)][t(1306)+t(381)]][t(625)]("")))));continue;case"11":e[t(1018)]?(u[t(935)]=function(){var n=t;u[n(1822)]=r[n(3451)]},u[t(997)]=function(){var n=t;v[n(1569)](r[n(741)]),o[n(2834)](),v[n(830)](r[n(1083)](r[n(1083)](r[n(3427)],r[n(2189)]("0",e[n(1712)+n(878)])[n(1844)](-2)),r[n(807)]))},u[t(1822)]=Prisma[t(1178)][t(2351)](p[t(2560)](p[t(1588)],e[t(1018)])),K[t(1618)](u)):(o[t(2834)](),v[t(830)](p[t(2488)](p[t(628)](p[t(2064)],p[t(1963)]("0",e[t(1712)+t(878)])[t(1844)](-2)),p[t(1239)])));continue;case"12":var l=S[0]?S[0][t(335)]:1;continue;case"13":c.on(p[t(1132)],function(n){var e=t;Y=n[e(526)],B[e(744)](O[e(1092)]($,n[e(526)]),!0)});continue;case"14":var m=[];continue;case"15":var d=new Date(p[t(2488)](e[t(559)],"")[t(893)](/-/g,"/"));continue;case"16":e[t(559)]&&m[t(1618)](Prisma[t(2158)][t(1492)](e[t(559)])[t(2693)]);continue;case"17":var v=c[t(455)](p[t(3108)]);continue}break}});continue;case"3":S[k(2822)](function(r,e){for(var o=k,n=O[o(577)][o(1075)]("|"),t=0;;){switch(n[t++]){case"0":var i=Prisma[o(2158)][o(3361)](r[o(335)]?[r[o(335)],O[o(462)](r[o(335)],10)?":":"",r[o(841)],z[o(1611)][o(1306)+o(381)]][o(625)](""):z[o(1611)][o(1306)+o(381)]);continue;case"1":var a=v[o(455)](O[o(1664)]);continue;case"2":if(O[o(2618)](H,!b))a[o(830)](O[o(2948)](O[o(1135)](O[o(2679)],O[o(1135)]("0",r[o(841)]||O[o(350)](e,1))[o(1844)](-2)),O[o(1868)])),h[o(2834)]();else if(!H&&O[o(2548)]([O[o(312)],O[o(2984)]][o(2543)](z[o(1611)][o(2198)]||O[o(2984)]),-1))h[o(2834)]();else for(var c=O[o(2700)][o(1075)]("|"),u=0;;){switch(c[u++]){case"0":K[o(1618)](s);continue;case"1":var s=v[o(455)](O[o(2521)])[0];continue;case"2":s[o(935)]=function(){var n=o;s[n(1822)]=O[n(684)]};continue;case"3":s[o(1822)]=Prisma[o(1178)][o(2351)](O[o(1135)](O[o(3188)],b?b[o(1018)]:z[o(1611)][o(1061)+o(3052)]));continue;case"4":s[o(997)]=function(){var n=o;a[n(1569)](O[n(3260)]),h[n(2834)](),H&&a[n(830)](O[n(2837)](O[n(2245)](O[n(2679)],O[n(1936)]("0",r[n(841)]||O[n(1936)](e,1))[n(1844)](-2)),O[n(1868)]))};continue}break}continue;case"3":var f={hash_timeline:i,hash_behold:p};continue;case"4":var l=[];continue;case"5":!H&&z[o(1611)][o(3128)]&&O[o(638)](r[o(522)][o(347)],30)&&l[o(1618)](z[o(1611)][o(3128)]);continue;case"6":B[o(830)](v);continue;case"7":var m=r[o(841)]||O[o(2837)](e,1);continue;case"8":r[o(2177)]=function(){var n=o;y=Prisma[n(3233)][n(2547)](g[n(1293)],5e3,[]),g[n(1912)](y[n(2543)](p),-1)&&(Prisma[n(2639)][n(2834)](y,p),Prisma[n(3233)][n(1077)](g[n(1293)],y),Prisma[n(3233)][n(2834)](g[n(1293)],p),v[n(455)](g[n(603)])[n(2834)]())};continue;case"9":b?(r[o(690)]=b[o(539)],O[o(638)](r[o(522)][o(347)],30)&&b[o(3394)+"ge"]&&l[o(1618)](Prisma[o(1013)][o(2080)](O[o(3146)],{rate:O[o(504)](parseFloat,O[o(2414)](b[o(3394)+"ge"],""))[o(1334)](1)},!0)),b[o(559)]&&x&&l[o(1618)](Prisma[o(2158)][o(1492)](b[o(559)])[o(2693)])):z[o(1611)][o(1650)+"te"]&&x&&l[o(1618)](Prisma[o(2158)][o(1492)](z[o(1611)][o(1650)+"te"])[o(2693)]);continue;case"10":var d=C[o(2160)+o(1932)][r[o(335)]];continue;case"11":Prisma[o(2639)][o(1940)](r,{voice_name:w,info:O[o(2473)](w[o(347)],60)?O[o(2837)](w[o(3182)](0,60),O[o(2953)]):w,quality:"",time:Prisma[o(2158)][o(786)+o(3505)](O[o(3416)]((b||z[o(1611)])[o(3077)],60),!0)});continue;case"12":Prisma[o(545)][o(1818)]&&v[o(455)](O[o(2685)])[o(1587)](Prisma[o(545)][o(1818)](r[o(2933)]," "));continue;case"13":r[o(840)]=function(){var n=o;r[n(2933)][n(1001)]=0,r[n(2933)][n(1309)]=0,r[n(2933)][n(2290)]=0,Prisma[n(545)][n(744)](r[n(2933)])};continue;case"14":var v=Prisma[o(1013)][o(2080)](O[o(3270)],r);continue;case"15":var p=Prisma[o(2158)][o(3361)](r[o(335)]?[r[o(335)],O[o(2473)](r[o(335)],10)?":":"",r[o(841)],z[o(1611)][o(1306)+o(381)],r[o(1894)]][o(625)](""):O[o(1969)](z[o(1611)][o(1306)+o(381)],r[o(1894)]));continue;case"16":r[o(2678)]&&(r[o(1583)]=r[o(2678)],r[o(2678)]=Prisma[o(2639)][o(2666)](r[o(2678)])[0]);continue;case"17":r[o(1915)]=function(){for(var n=o,e=O[n(3499)][n(1075)]("|"),t=0;;){switch(e[t++]){case"0":C=q[n(1393)]();continue;case"1":H?C[n(2160)+n(1932)][r[n(335)]]=m:C[n(2224)]=p;continue;case"2":O[n(1832)](y[n(2543)](p),-1)&&(y[n(1618)](p),Prisma[n(3233)][n(1077)](O[n(1434)],y),O[n(2548)](v[n(455)](O[n(1938)])[n(347)],0))&&v[n(455)](O[n(1664)])[n(830)](O[n(2245)](O[n(2245)](O[n(1986)],Prisma[n(1013)][n(2080)](O[n(1509)],{},!0)),O[n(1868)]));continue;case"3":y=Prisma[n(3233)][n(2547)](O[n(1434)],5e3,[]);continue;case"4":q[n(3251)](C);continue;case"5":O[n(2185)](i[n(347)],30)&&(i=O[n(2245)](i[n(1844)](0,30),O[n(2953)]));continue;case"6":q[n(918)]({balanser:T,balanser_name:Prisma[n(2158)][n(2289)+n(2786)+"r"](F[T]?F[T][n(539)][n(1075)](" ")[0]:T),voice_id:C[n(479)],voice_name:i,episode:r[n(841)],season:r[n(335)]});continue;case"7":var i=C[n(1894)]||r[n(1894)]||r[n(690)];continue}break}};continue;case"18":l[o(347)]&&(r[o(522)]=l[o(1339)](function(n){var e=o;return g[e(2886)](g[e(2886)](g[e(832)],n),g[e(3486)])})[o(625)](O[o(493)]));continue;case"19":var h=v[o(455)](O[o(941)]);continue;case"20":r[o(635)]&&!b&&(r[o(690)]=r[o(635)]);continue;case"21":z[o(1251)]&&a[o(2776)]();continue;case"22":q[o(2001)+"u"]({html:v,element:r,onFile:function(n){var e=o;N[e(1787)+e(1014)]&&N[e(1787)+e(1014)](r,v,f,n)},onClearAllMark:function(){var e=o;S[e(2822)](function(n){n[e(2177)]()})},onClearAllTime:function(){var e=o;S[e(2822)](function(n){n[e(840)]()})}});continue;case"23":N[o(3362)]&&N[o(3362)](r,v,f);continue;case"24":v[o(455)](O[o(2685)])[o(830)](Prisma[o(545)][o(2292)](r[o(2933)]));continue;case"25":var b=!(!H||!P[o(347)]||N[o(2918)])&&P[o(455)](function(n){var e=o;return O[e(2548)](n[e(1712)+e(878)],r[e(841)])});continue;case"26":var g={RjIzH:function(n,e){return O[o(1936)](n,e)},ubllA:O[o(2774)],IBHSg:O[o(404)],xGYAs:O[o(1434)],hxgeq:function(n,e){return O[o(921)](n,e)},CCStJ:O[o(1938)]};continue;case"27":O[o(921)](y[o(2543)](p),-1)&&(_=v)[o(455)](O[o(1664)])[o(830)](O[o(350)](O[o(2414)](O[o(1986)],Prisma[o(1013)][o(2080)](O[o(1509)],{},!0)),O[o(1868)]));continue;case"28":r[o(335)]&&(r[o(755)+o(1584)+"d"]=q[o(614)+o(2042)](S),r[o(755)+o(630)]=r[o(1894)]);continue;case"29":H?O[o(1442)](typeof d,O[o(2631)])&&O[o(2102)](d,m)&&(j=v):O[o(2548)](C[o(2224)],p)&&(j=v);continue;case"30":v.on(O[o(804)],function(){var n=o;z[n(1611)].id&&Prisma[n(2652)][n(2214)](O[n(2300)],z[n(1611)],100),N[n(2018)]&&N[n(2018)](r,v,f)}).on(O[o(3306)],function(n){var e=o;Y=n[e(526)],N[e(1726)]&&N[e(1726)](r,v,f),B[e(744)](O[e(504)]($,n[e(526)]),!0)});continue;case"31":var w=C[o(1894)]||!!R[o(630)][0]&&R[o(630)][0][o(690)]||r[o(1894)]||(H?O[o(3125)]:r[o(635)])||O[o(3125)];continue;case"32":r[o(2933)]=Prisma[o(545)][o(2103)](i);continue;case"33":r[o(522)]&&l[o(1618)](r[o(522)]);continue}break}});continue;case"4":var y=Prisma[k(3233)][k(2547)](D[k(1418)],5e3,[]);continue;case"5":var j=!1;continue;case"6":Prisma[k(679)][k(960)](D[k(746)]);continue;case"7":var O={EoZRq:function(n,e){return D[k(1056)](n,e)},npLrW:D[k(2894)],gExfh:D[k(1977)],fabZH:function(n,e){return D[k(3338)](n,e)},mgdov:function(n,e){return D[k(3338)](n,e)},QPshu:D[k(3220)],leXYq:function(n,e){return D[k(2753)](n,e)},GmGtY:D[k(3377)],PyWgg:D[k(472)],JecNG:function(n,e){return D[k(759)](n,e)},fOHTP:D[k(1418)],DNZne:D[k(2226)],Himdw:D[k(2926)],zjrHH:D[k(689)],qrKgM:D[k(2400)],ToacH:function(n,e){return D[k(3238)](n,e)},UgsLY:D[k(1250)],xHkug:D[k(3265)],xXHny:function(n,e){return D[k(1374)](n,e)},XzTTD:D[k(2501)],ArZen:function(n,e){return D[k(3238)](n,e)},pSAph:function(n,e){return D[k(1601)](n,e)},iWHSJ:function(n,e){return D[k(3338)](n,e)},ebAIX:function(n,e){return D[k(611)](n,e)},DwxHB:function(n,e){return D[k(1098)](n,e)},HCDKy:D[k(886)],qaSSE:D[k(1758)],ViAIw:D[k(2635)],ZGdvl:D[k(2661)],WrKiQ:D[k(613)],VOveR:function(n,e){return D[k(2317)](n,e)},PwxbS:D[k(2137)],sZQXC:function(n,e){return D[k(1342)](n,e)},olcrI:function(n,e){return D[k(1638)](n,e)},AqERN:function(n,e){return D[k(2134)](n,e)},XUKVd:D[k(3457)],TzvCg:D[k(483)],PnuhK:function(n,e){return D[k(1404)](n,e)},jpUZI:D[k(3393)],YXsUb:D[k(3447)],olPuF:D[k(1857)],hTgfQ:D[k(2646)],QHxqN:function(n,e){return D[k(929)](n,e)},BXhiN:function(n,e){return D[k(929)](n,e)},oiBmi:D[k(884)],PKfXE:function(n,e){return D[k(1483)](n,e)},HZtHg:D[k(806)],PvEow:D[k(1276)],SjUkv:D[k(3170)],NnDfM:function(n,e){return D[k(3397)](n,e)}};continue;case"8":j?Y=j[0]:_&&(Y=_[0]);continue;case"9":var C=q[k(1393)]();continue;case"10":var H=!!z[k(1611)][k(539)];continue}break}});continue;case"5":var q=this;continue;case"6":this[t(778)+t(2756)]();continue;case"7":if(S[t(347)])continue;return this[t(2706)]()}break}},this[k(2001)+"u"]=function(l){var t=k,i={EYXyy:_[t(714)],RuCyJ:_[t(444)],eCiEc:_[t(1280)],fVsii:_[t(1176)],FbJTe:_[t(3471)],MOAyL:function(n,e){return _[t(2405)](n,e)},BqAPf:_[t(1403)],nZtNr:_[t(2307)],uAEjY:function(n,e){return _[t(1541)](n,e)},rLHmx:_[t(3207)],fOsRM:_[t(3003)],rOyNm:_[t(3342)],Proav:_[t(1463)],pBREk:_[t(815)],MgAdH:_[t(2441)],Lnpea:_[t(1329)],moFJr:_[t(905)],ZyoBD:_[t(357)],mJIXt:_[t(2523)],KADIT:_[t(2111)],cHTjO:_[t(519)],YZukf:_[t(1130)],oRUAf:_[t(1358)],HkOVb:_[t(2409)],bNXsO:function(n,e){return _[t(416)](n,e)},abVaw:_[t(1271)],mdKah:_[t(2975)],dtufZ:_[t(1443)],ZSPOn:function(n,e){return _[t(1170)](n,e)},UYFie:_[t(2244)],kyncm:_[t(734)],WMpiQ:_[t(1303)]};l[t(1144)].on(_[t(2641)],function(){l[t(816)](function(c){for(var u=_0x4d5a,n=i[u(1051)][u(1075)]("|"),e=0;;){switch(n[e++]){case"0":t[u(1618)]({title:Prisma[u(1812)][u(343)](i[u(2961)]),clearallmark:!0});continue;case"1":c&&t[u(1618)]({title:Prisma[u(1812)][u(343)](i[u(2746)]),copylink:!0});continue;case"2":var s=Prisma[u(679)][u(553)]()[u(539)];continue;case"3":t[u(1618)]({title:Prisma[u(1812)][u(343)](i[u(1752)]),separator:!0});continue;case"4":Prisma[u(1282)].is(i[u(1496)])&&t[u(1618)]({title:i[u(1230)](Prisma[u(1812)][u(343)](i[u(2424)]),i[u(637)]),player:i[u(1496)]});continue;case"5":t[u(1618)]({title:i[u(3333)](Prisma[u(1812)][u(343)](i[u(2424)]),i[u(697)]),player:i[u(1520)]});continue;case"6":var t=[];continue;case"7":t[u(1618)]({title:Prisma[u(1812)][u(343)](i[u(1459)]),separator:!0});continue;case"8":t[u(1618)]({title:Prisma[u(1812)][u(343)](i[u(2832)]),unmark:!0});continue;case"9":Prisma[u(2672)][u(1007)]({title:Prisma[u(1812)][u(343)](i[u(2530)]),items:t,onBack:function(){var n=u;Prisma[n(679)][n(3004)](s)},onSelect:function(n){for(var i=u,e=f[i(3305)][i(1075)]("|"),t=0;;){switch(e[t++]){case"0":Prisma[i(679)][i(3004)](s);continue;case"1":n[i(469)]&&(Prisma[i(2398)][i(3029)](n[i(469)]),l[i(1144)][i(1839)](f[i(2616)]));continue;case"2":n[i(2062)]&&Prisma[i(1709)][i(875)+i(1255)+"on"]({card:z[i(1611)],season:l[i(2083)][i(335)],episode:l[i(2083)][i(755)+i(1584)+"d"],voice:l[i(2083)][i(755)+i(630)]},function(){var n=i;Prisma[n(1865)][n(1007)](Prisma[n(1812)][n(343)](f[n(3173)]))},function(){var n=i;Prisma[n(1865)][n(1007)](Prisma[n(1812)][n(343)](f[n(2710)]))});continue;case"3":n[i(1915)]&&l[i(2083)][i(1915)]();continue;case"4":n[i(468)+"ll"]&&l[i(862)+i(1811)]();continue;case"5":n[i(1714)+"rk"]&&l[i(862)+i(2991)]();continue;case"6":n[i(840)]&&l[i(2083)][i(840)]();continue;case"7":if(n[i(2061)])if(c[i(2678)]){var r,o=[];for(r in c[i(2678)])o[i(1618)]({title:r,file:c[i(2678)][r]});Prisma[i(2672)][i(1007)]({title:Prisma[i(1812)][i(343)](f[i(2389)]),items:o,onBack:function(){var n=i;Prisma[n(679)][n(3004)](s)},onSelect:function(n){var e=i,t={oEueD:a[e(411)],xUzrx:a[e(2228)]};Prisma[e(2158)][e(2882)+e(1717)](n[e(2029)],function(){var n=e;Prisma[n(2690)][n(1618)]({text:Prisma[n(1812)][n(343)](t[n(3509)])})},function(){var n=e;Prisma[n(2690)][n(1618)]({text:Prisma[n(1812)][n(343)](t[n(1516)])})})}})}else Prisma[i(2158)][i(2882)+i(1717)](c[i(2029)],function(){var n=i;Prisma[n(2690)][n(1618)]({text:Prisma[n(1812)][n(343)](a[n(411)])})},function(){var n=i;Prisma[n(2690)][n(1618)]({text:Prisma[n(1812)][n(343)](f[n(3409)])})});continue;case"8":n[i(2177)]&&l[i(2083)][i(2177)]();continue;case"9":var a={XfkIL:f[i(1546)],xihxs:f[i(3409)]};continue;case"10":window[i(1909)+i(2408)+i(2009)]&&window[i(1909)+i(2408)+i(2009)][i(1614)](n,l);continue}break}}});continue;case"10":var f={etboD:i[u(3192)],ODwaX:i[u(880)],OWCsn:i[u(1468)],qIYtj:i[u(848)],uyZJW:i[u(428)],SieNx:i[u(2513)],GEHtE:i[u(2143)]};continue;case"11":t[u(1618)]({title:Prisma[u(1812)][u(343)](i[u(571)]),timeclear:!0});continue;case"12":t[u(1618)]({title:Prisma[u(1812)][u(343)](i[u(917)]),timeclearall:!0});continue;case"13":t[u(1618)]({title:Prisma[u(1812)][u(343)](i[u(2912)]),mark:!0});continue;case"14":Prisma[u(1709)][u(2755)]()&&l[u(2083)]&&i[u(2997)](typeof l[u(2083)][u(335)],i[u(3472)])&&l[u(2083)][u(755)+u(630)]&&t[u(1618)]({title:Prisma[u(1812)][u(343)](i[u(361)]),subscribe:!0});continue;case"15":Prisma[u(1282)].is(i[u(3123)])&&t[u(1618)]({title:i[u(379)](Prisma[u(1812)][u(343)](i[u(2424)]),i[u(394)]),player:i[u(3123)]});continue;case"16":window[u(1909)+u(2408)+u(2009)]&&window[u(1909)+u(2408)+u(2009)][u(1618)](t,c,l);continue}break}})}).on(_[t(1465)],function(){var n=t;Prisma[n(2675)]&&Prisma[n(2675)][n(1007)](i[n(1317)],Prisma[n(1812)][n(343)](i[n(3157)]),l[n(1144)])})},this[k(2706)]=function(){for(var n=k,e=D[n(698)][n(1075)]("|"),t=0;;){switch(e[t++]){case"0":var i=Prisma[n(1013)][n(2080)](D[n(2813)],{});continue;case"1":i[n(455)](D[n(624)])[n(635)](Prisma[n(1812)][n(343)](D[n(3082)]));continue;case"2":this[n(1206)](!1);continue;case"3":B[n(830)](i);continue;case"4":B[n(3282)]();continue;case"5":i[n(455)](D[n(2596)])[n(635)](Prisma[n(1812)][n(343)](D[n(766)]));continue;case"6":i[n(455)](D[n(2038)])[n(2834)]();continue}break}},this[k(1636)+k(3103)]=function(n){for(var e=k,t=D[e(1575)][e(1075)]("|"),i=0;;){switch(t[i++]){case"0":r[e(455)](D[e(2596)])[e(635)](n&&n[e(2874)]?n[e(1900)]:Prisma[e(1812)][e(343)](D[e(2851)])[e(893)](D[e(2378)],T[T][e(539)]));continue;case"1":B[e(830)](r);continue;case"2":r[e(455)](D[e(624)])[e(635)](Prisma[e(1812)][e(343)](D[e(1640)]));continue;case"3":this[e(1206)](!1);continue;case"4":var r=Prisma[e(1013)][e(2080)](D[e(2813)],{});continue;case"5":B[e(3282)]();continue;case"6":r[e(455)](D[e(2038)])[e(2834)]();continue}break}},this[k(1966)+k(1265)]=function(n){for(var a=k,e=D[a(2139)][a(1075)]("|"),t=0;;){switch(e[t++]){case"0":s[a(455)](D[a(1398)]).on(D[a(806)],function(){var n=a;D[n(1374)](clearInterval,m),h[n(2292)]()[n(455)](D[n(821)])[n(1839)](D[n(806)])});continue;case"1":var c=n&&n[a(2874)]?10:5;continue;case"2":s[a(455)](D[a(1168)]).on(D[a(806)],function(){i[a(1311)](clearInterval,m)});continue;case"3":this[a(1620)]();continue;case"4":n&&n[a(2874)]&&s[a(455)](D[a(624)])[a(1144)](n[a(1900)]);continue;case"5":var u=this;continue;case"6":this[a(1206)](!1);continue;case"7":B[a(3282)]();continue;case"8":var s=Prisma[a(1013)][a(2080)](D[a(2813)],{balanser:T});continue;case"9":var i={FQrWZ:function(n,e){return D[a(3162)](n,e)}};continue;case"10":m=D[a(2333)](setInterval,function(){var n=a;if(c--,s[n(455)](D[n(1535)])[n(635)](c),D[n(1623)](c,0))for(var e=D[n(2702)][n(1075)]("|"),t=0;;){switch(e[t++]){case"0":var i=o[D[n(1031)](r,1)];continue;case"1":D[n(1056)](Prisma[n(2451)][n(2903)]()[n(1797)],u[n(1797)])&&u[n(2311)+n(3208)](T);continue;case"2":D[n(1160)](clearInterval,m);continue;case"3":var r=o[n(2543)](T);continue;case"4":T=i;continue;case"5":var o=Prisma[n(2639)][n(2666)](F);continue;case"6":i=i||o[0];continue}break}},1e3);continue;case"11":B[a(830)](s);continue}break}},this[k(614)+k(2042)]=function(n){var t=k,i=0;return n[t(2822)](function(n){var e=t;D[e(512)](typeof n[e(841)],D[e(884)])&&(i=Math[e(2316)](i,D[e(1333)](parseInt,n[e(841)])))}),i},this[k(1708)]=function(){for(var t=k,n=_[t(3142)][t(1075)]("|"),e=0;;){switch(n[e++]){case"0":if(_[t(416)](Prisma[t(2451)][t(2903)]()[t(1797)],this[t(1797)]))return;continue;case"1":Prisma[t(679)][t(2214)](_[t(1127)],{toggle:function(){var n=t;Prisma[n(679)][n(2780)+n(391)](B[n(2292)](),o[n(2292)]()),Prisma[n(679)][n(2780)+n(2320)](i[n(3184)](Y,!1),B[n(2292)]())},gone:function(){D[t(1160)](clearTimeout,m)},up:function(){var n=t;Navigator[n(2884)]("up")?Navigator[n(2972)]("up"):Prisma[n(679)][n(3004)](D[n(1814)])},down:function(){var n=t;Navigator[n(2972)](i[n(3187)])},right:function(){var n=t;Navigator[n(2884)](D[n(415)])?Navigator[n(2972)](D[n(415)]):h[n(1007)](Prisma[n(1812)][n(343)](D[n(704)]),D[n(3278)])},left:function(){var n=t;Navigator[n(2884)](D[n(2181)])?Navigator[n(2972)](D[n(2181)]):Prisma[n(679)][n(3004)](D[n(1283)])},back:this[t(1558)][t(1143)](this)});continue;case"2":var i={brrZO:function(n,e){return _[t(1345)](n,e)},iYkFC:_[t(675)]};continue;case"3":r||(r=!0,this[t(3389)]());continue;case"4":Prisma[t(2435)][t(2849)+"y"](Prisma[t(2158)][t(2986)+t(2769)+"r"](z[t(1611)]));continue;case"5":Prisma[t(679)][t(3004)](_[t(1127)]);continue}break}},this[k(2292)]=function(){return o[k(2292)]()},this[k(1558)]=function(){var n=k;Prisma[n(2451)][n(2363)]()},this[k(2584)]=function(){},this[k(2331)]=function(){},this[k(1510)+"p"]=function(){var n,r,o,l=k,t={yDYTP:D[l(1605)],pQOpY:function(n,e){return D[l(3387)](n,e)},DKRek:D[l(3112)]},m=D[l(2966)]($,Prisma[l(1013)][l(2080)](D[l(2750)],{},!0)),d=h[l(2292)]()[l(455)](D[l(821)]);function i(){for(var n=l,e=D[n(2660)][n(1075)]("|"),t=0;;){switch(e[t++]){case"0":var i=s[n(1970)]||220;continue;case"1":var r=20;continue;case"2":a[n(1095)]=D[n(1098)](D[n(1697)](D[n(1514)](u[n(1095)],D[n(1610)](u[n(1970)],2)),D[n(1307)](i,2)),30);continue;case"3":D[n(2483)](D[n(1404)](D[n(2436)](u[n(1502)],o),r),f)?a[n(2741)]=D[n(1747)](u[n(1502)],20):a[n(2741)]=D[n(3106)](D[n(3106)](u[n(2741)],o),10);continue;case"4":var o=s[n(373)]||120;continue;case"5":D[n(1261)](a[n(2741)],r)?a[n(2741)]=r:D[n(3238)](D[n(2753)](a[n(2741)],o),D[n(1181)](f,r))&&(a[n(2741)]=D[n(1376)](D[n(3106)](f,o),r));continue;case"6":var a={top:0,left:0};continue;case"7":D[n(2246)](a[n(1095)],r)?a[n(1095)]=r:D[n(2670)](D[n(2066)](a[n(1095)],i),D[n(1595)](c,r))&&(a[n(1095)]=D[n(1335)](D[n(851)](c,i),r));continue;case"8":var c=window[n(3059)];continue;case"9":var u=d[0][n(337)+n(1625)+"t"]();continue;case"10":var s=m[0][n(337)+n(1625)+"t"]();continue;case"11":return a;case"12":var f=window[n(3475)+"t"];continue}break}}d[l(347)]&&d.is(D[l(547)])&&(n=d[0][l(337)+l(1625)+"t"](),D[l(3018)](n[l(1970)],0)||D[l(2798)](n[l(373)],0)||(D[l(1160)]($,D[l(1421)])[l(830)](m),n=D[l(1088)](i),m[l(2899)]({top:D[l(1514)](n[l(2741)],"px"),left:D[l(794)](n[l(1095)],"px")}),D[l(2906)](setTimeout,function(){var n=l;m[n(1569)](t[n(1472)])},100),r=function(){var n=l,e=D[n(890)](i);m[n(2899)]({top:D[n(2066)](e[n(2741)],"px"),left:D[n(731)](e[n(1095)],"px")})},D[l(2971)]($,window).on(D[l(3112)],r),o=D[l(2207)](setTimeout,function(){var e=l;m[e(2978)+"s"](D[e(1605)]),D[e(3500)](setTimeout,function(){var n=e;t[n(1402)]($,window)[n(2853)](t[n(1134)],r),m[n(2834)]()},300),Prisma[e(3233)][e(1077)](D[e(2750)],!0)},5e3),d[l(2371)](D[l(806)],function(){for(var t=l,n=D[t(1151)][t(1075)]("|"),e=0;;){switch(n[e++]){case"0":Prisma[t(3233)][t(1077)](D[t(2750)],!0);continue;case"1":m[t(2978)+"s"](D[t(1605)]);continue;case"2":D[t(2906)](setTimeout,function(){var n=t;i[n(1937)]($,window)[n(2853)](i[n(1698)],r),m[n(2834)]()},300);continue;case"3":D[t(550)](clearTimeout,o);continue;case"4":var i={WTvDr:function(n,e){return D[t(1160)](n,e)},wcLaZ:D[t(3112)]};continue}break}})))},this[k(1659)]=function(){var n=k;Prisma[n(3233)][n(2834)](D[n(2750)])},this[k(1e3)+"ip"]=function(){this[k(1510)+"p"]()},this[k(1454)]=function(){for(var n=k,e=_[n(1085)][n(1075)]("|"),t=0;;){switch(e[t++]){case"0":o[n(1454)]();continue;case"1":window[n(2814)+"ip"]&&delete window[n(2814)+"ip"];continue;case"2":u&&(_[n(2211)](clearTimeout,f),u[n(2331)](),u=null);continue;case"3":_[n(1880)]($,_[n(626)])[n(2834)]();continue;case"4":B[n(1454)]();continue;case"5":_[n(2036)](clearInterval,m);continue;case"6":window[n(3269)+"p"]&&delete window[n(3269)+"p"];continue;case"7":this[n(471)+"s"]();continue;case"8":_[n(2036)](clearTimeout,v);continue;case"9":p[n(3282)]();continue}break}},_[k(2563)](typeof window,_[k(1271)])&&(window[k(3269)+"p"]=this[k(1e3)+"ip"][k(1143)](this),window[k(2814)+"ip"]=this[k(1659)][k(1143)](this))}function o(n,s){var i=x,f={nsBGU:function(n,e){return _[_0x4d5a(308)](n,e)},sGiQN:function(n,e){return _[_0x4d5a(3354)](n,e)},uctTC:function(n,e){return _[_0x4d5a(1191)](n,e)},HojOQ:_[i(3314)],veWIZ:_[i(1781)],iQXHG:function(n,e,t){return _[i(1573)](n,e,t)},lHvtQ:function(n,e){return _[i(1628)](n,e)},EkgNw:function(n,e){return _[i(2594)](n,e)},dZHeA:function(n,e){return _[i(914)](n,e)},eTbwh:_[i(3385)],KkjPr:_[i(3070)],GiqVC:_[i(1768)],NClkI:function(n,e){return _[i(2563)](n,e)},sgxgE:function(n,e){return _[i(2920)](n,e)},zHYAs:_[i(2367)],dYvSg:function(n,e){return _[i(2036)](n,e)},omfqD:function(n,e){return _[i(2491)](n,e)},QqOFK:function(n,e){return _[i(2545)](n,e)},NTFCB:function(n,e){return _[i(2168)](n,e)},VVdbx:function(n,e){return _[i(1607)](n,e)},MCrQb:function(n){return _[i(374)](n)},accND:function(n){return _[i(1979)](n)},LNbBZ:function(n,e){return _[i(1231)](n,e)},DZMFx:_[i(1507)],lppWX:_[i(1318)]},l=new Prisma[i(712)],n={title:n,search:function(o,u){var t=i,a={FUftS:function(n,e){return f[_0x4d5a(2124)](n,e)},Umirg:function(n,e){return f[_0x4d5a(3006)](n,e)},VDtJY:f[t(2877)],dJttE:f[t(688)],zUGTO:f[t(2974)],PXBUi:function(n,e){return f[t(2704)](n,e)},dLzqg:function(n,e){return f[t(3017)](n,e)},bjjoR:function(n,e){return f[t(1154)](n,e)},sjfsR:f[t(3040)],ViVCf:function(n,e){return f[t(2766)](n,e)}};function c(n){var i,r=t,c={ElZXc:function(n,e){return a[_0x4d5a(3453)](n,e)},tBNCP:a[r(1210)],KDPLa:a[r(3357)],LLMGX:a[r(1634)],RgFhZ:function(n,e){return a[r(1668)](n,e)},wohXZ:function(n,e){return a[r(1952)](n,e)},zCfsz:function(n,e){return a[r(2712)](n,e)},kOQFK:a[r(3046)],napXK:function(n,e){return a[r(1040)](n,e)}},e=Prisma[r(2639)][r(2666)](n);e[r(347)]?((i=new Prisma[r(3105)](e[r(347)]))[r(2801)]=function(t){var i=r,o={pEAmf:c[i(3198)],kFNpr:c[i(1695)],ttopG:function(n,e){return c[i(2281)](n,e)},OOlKC:function(n,e){return c[i(753)](n,e)},Kkalq:function(n,e){return c[i(791)](n,e)},epMOj:c[i(686)],XkQBU:function(n,e){return c[i(1420)](n,e)}},a=[];e[i(2822)](function(n){var r=i,e=t[n];e&&e[r(898)]&&c[r(2504)](e[r(3503)],c[r(523)])&&(e=e[r(898)][r(1339)](function(n){for(var e=r,t=o[e(1370)][e(1075)]("|"),i=0;;){switch(t[i++]){case"0":n[e(1650)+"te"]=n[e(1523)]||o[e(1547)];continue;case"1":return n;case"2":o[e(1550)](n[e(3301)],void 0)&&(o[e(1962)](n[e(3301)][e(2950)](0),"/")&&(n[e(3301)]=o[e(1131)](Defined[e(1308)],n[e(3301)][e(2407)](1))),o[e(1550)](n[e(3301)][e(2543)](o[e(2374)]),-1))&&(n[e(3301)]=o[e(1802)](account,n[e(3301)]));continue;case"3":n[e(690)]=Prisma[e(2158)][e(2289)+e(2786)+"r"](n[e(690)]);continue;case"4":n[e(1251)]=s;continue}break}}),a[r(1618)]({title:n,results:e}))}),c[i(1420)](u,a)},e[r(2822)](function(e){var t=r;l[t(2474)](a[t(724)](account,n[e]),function(n){i[t(830)](e,n)},function(){i[t(3137)]()})})):a[r(1040)](u,[])}l[t(2474)](f[t(789)](account,f[t(3330)](f[t(3289)](f[t(3289)](f[t(3127)](Defined[t(1308)],f[t(2113)]),s),f[t(2864)]),o[t(1666)])),function(n){var i=t,r={MbYUW:function(n,e){return f[_0x4d5a(2124)](n,e)},vanFD:function(n,e){return f[_0x4d5a(2124)](n,e)},bLLQI:function(n,e){return f[_0x4d5a(1154)](n,e)},FzIcP:function(n,e){return f[_0x4d5a(1536)](n,e)},RuvxK:f[i(2113)],acYyP:f[i(2864)]};n[i(3218)]?f[i(1375)](rchRun,n,function(){var e=i,t={ahxyC:function(n,e){return r[_0x4d5a(2422)](n,e)}};l[e(2474)](r[e(2897)](account,r[e(2567)](r[e(2643)](r[e(2643)](r[e(2643)](Defined[e(1308)],r[e(962)]),s),r[e(2927)]),o[e(1666)])),function(n){t[e(3458)](c,n)},function(){t[e(3458)](u,[])})}):f[i(2104)](c,n)},function(){f[t(1722)](u,[])})},onCancel:function(){l[i(3282)]()},params:{lazy:!0,align_left:!0,card_events:{onMenu:function(){}}},onMore:function(n,e){f[i(2589)](e)},onSelect:function(n,e){var t=i;f[t(2999)](e),Prisma[t(2451)][t(1618)]({url:n[t(2083)][t(2021)],title:f[t(1340)](f[t(321)],n[t(2083)][t(690)]),component:f[t(1428)],movie:n[t(2083)],page:1,search:n[t(2083)][t(690)],clarification:!0,balanser:n[t(2083)][t(1251)],noinfo:!0})}};Prisma[i(1327)][i(1800)](n)}window[x(2239)+x(1617)]||_[x(1846)](function(){var u=x,i={yqCzv:_[u(3156)],mPclW:_[u(405)],fNkkR:_[u(1917)],KcoVI:_[u(1899)],jCqCl:_[u(3136)],IBkCB:_[u(2929)],kfspo:_[u(2397)],LxQPd:_[u(2566)],gFFzu:_[u(961)],BOYyN:_[u(2428)],VoljC:_[u(2126)],knbLs:_[u(1803)],eSVRO:_[u(346)],lftwM:_[u(1526)],FlQzc:_[u(1416)],CETqG:_[u(441)],pdxsW:function(n,e){return _[u(1838)](n,e)},cFhuk:_[u(3398)],iyuNa:_[u(824)]},n=(window[u(2239)+u(1617)]=!0,{type:_[u(1941)],version:_[u(604)],name:_[u(2170)],description:_[u(2415)],component:_[u(1318)],onContextMenu:function(n){var e=u;return{name:Prisma[e(1812)][e(343)](i[e(1567)]),description:""}},onContextLauch:function(n){for(var e=u,t=_[e(3095)][e(1075)]("|"),i=0;;){switch(t[i++]){case"0":Prisma[e(2451)][e(1618)]({url:"",title:Prisma[e(1812)][e(343)](_[e(1728)]),component:_[e(1318)],search:r[o]||n[e(690)],search_one:n[e(690)],search_two:n[e(1306)+e(381)],movie:n,page:1,clarification:!!r[o]});continue;case"1":var r=Prisma[e(3233)][e(2080)](_[e(3312)],"{}");continue;case"2":Prisma[e(3441)][e(2214)](_[e(1318)],m);continue;case"3":var o=Prisma[e(2158)][e(3361)](n[e(1484)+e(1235)]?n[e(3247)+e(1751)]:n[e(1306)+e(381)]);continue;case"4":_[e(374)](s);continue}break}}});function s(){for(var n=u,e=i[n(2369)][n(1075)]("|"),t=0;;){switch(e[t++]){case"0":Prisma[n(1013)][n(2214)](i[n(1352)],i[n(362)]);continue;case"1":Prisma[n(1013)][n(2214)](i[n(2303)],i[n(2611)]);continue;case"2":Prisma[n(1013)][n(2214)](i[n(372)],i[n(590)]);continue;case"3":Prisma[n(1013)][n(2214)](i[n(983)],i[n(889)]);continue;case"4":Prisma[n(1013)][n(2214)](i[n(3340)],i[n(894)]);continue;case"5":Prisma[n(1013)][n(2214)](i[n(720)],i[n(476)]);continue;case"6":Prisma[n(1013)][n(2214)](i[n(2924)],i[n(936)]);continue}break}}_[u(1779)](o,_[u(1294)],_[u(2271)]),_[u(3118)](o,_[u(3436)],_[u(356)]),Prisma[u(3151)][u(909)]=n,Prisma[u(1812)][u(2214)]({online_watch:{ru:_[u(2170)],en:_[u(2876)],ua:_[u(748)],zh:_[u(1890)]},online_video:{ru:_[u(1109)],en:_[u(1935)],ua:_[u(591)],zh:"视频"},online_no_watch_history:{ru:_[u(1867)],en:_[u(2747)],ua:_[u(1435)],zh:_[u(1836)]},online_nolink:{ru:_[u(2227)],uk:_[u(420)],en:_[u(1901)],zh:_[u(446)]},online_balanser:{ru:_[u(1662)],uk:_[u(1662)],en:_[u(2587)],zh:_[u(544)]},helper_online_file:{ru:_[u(1011)],uk:_[u(2051)],en:_[u(1249)],zh:_[u(2561)]},title_online:{ru:_[u(2343)],uk:_[u(2683)],en:_[u(3439)],zh:_[u(2325)]},online_voice_subscribe:{ru:_[u(2998)],uk:_[u(3030)],en:_[u(500)],zh:_[u(2835)]},online_voice_success:{ru:_[u(1232)],uk:_[u(2390)],en:_[u(1808)],zh:_[u(397)]},online_voice_error:{ru:_[u(3049)],uk:_[u(855)],en:_[u(1045)],zh:_[u(440)]},online_clear_all_marks:{ru:_[u(385)],uk:_[u(1646)],en:_[u(1105)],zh:_[u(3382)]},online_clear_all_timecodes:{ru:_[u(1100)],uk:_[u(3353)],en:_[u(2564)],zh:_[u(1897)]},online_change_balanser:{ru:_[u(1879)],uk:_[u(2043)],en:_[u(1058)],zh:_[u(944)]},online_balanser_dont_work:{ru:_[u(2854)],uk:_[u(3255)],en:_[u(3320)],zh:_[u(1591)]},online_balanser_timeout:{ru:_[u(1669)],uk:_[u(2840)],en:_[u(2437)],zh:_[u(3384)]},online_balanser_tip:{ru:_[u(1539)],uk:_[u(1213)],en:_[u(2112)],zh:_[u(1851)]},online_does_not_answer_text:{ru:_[u(2854)],uk:_[u(3255)],en:_[u(3320)],zh:_[u(1591)]}}),Prisma[u(1013)][u(2214)](_[u(653)],_[u(1039)]),_[u(2788)]($,_[u(413)])[u(830)](Prisma[u(1013)][u(2080)](_[u(653)],{},!0));var r=_[u(985)][u(402)](n[u(1683)],_[u(2296)]);function t(o){for(var a=u,n=_[a(2145)][a(1075)]("|"),e=0;;){switch(n[e++]){case"0":if(o[a(2292)][a(455)](_[a(494)])[a(347)])return;continue;case"1":t.on(_[a(2523)],function(){for(var n=a,e=c[n(323)][n(1075)]("|"),t=0;;){switch(e[t++]){case"0":var i=Prisma[n(3233)][n(2080)](c[n(1451)],"{}");continue;case"1":var r=Prisma[n(2158)][n(3361)](o[n(1611)][n(1484)+n(1235)]?o[n(1611)][n(3247)+n(1751)]:o[n(1611)][n(1306)+n(381)]);continue;case"2":Prisma[n(2451)][n(1618)]({url:"",title:Prisma[n(1812)][n(343)](c[n(2462)]),component:c[n(2585)],search:i[r]||o[n(1611)][n(690)],search_one:o[n(1611)][n(690)],search_two:o[n(1611)][n(1306)+n(381)],movie:o[n(1611)],page:1,clarification:!!i[r]});continue;case"3":c[n(843)](s);continue;case"4":Prisma[n(3441)][n(2214)](c[n(2585)],m);continue}break}});continue;case"2":var c={kehvm:_[a(680)],tpiYX:_[a(3312)],hCabe:_[a(1728)],ZdWVX:_[a(1318)],RvwOz:function(n){return _[a(3071)](n)}};continue;case"3":var t=_[a(3148)]($,Prisma[a(1812)][a(343)](r));continue;case"4":o[a(2292)][a(455)](_[a(919)])[a(1587)](t);continue}break}}Prisma[u(3441)][u(2214)](_[u(1318)],m),_[u(2608)](s),Prisma[u(1207)][u(2668)](_[u(1003)],function(n){var e=u;_[e(1049)](n[e(3503)],_[e(2149)])&&_[e(1455)](t,{render:n[e(3213)][e(1797)][e(2292)](),movie:n[e(898)][e(1611)]})});try{_[u(1694)](Prisma[u(2451)][u(2903)]()[u(3060)],_[u(1003)])&&_[u(610)](t,{render:Prisma[u(2451)][u(2903)]()[u(1797)][u(2292)](),movie:Prisma[u(2451)][u(2903)]()[u(1997)]})}catch(n){}_[u(1990)](Prisma[u(3151)][u(2011)+"l"],177)&&([_[u(426)],_[u(2600)],_[u(2887)],_[u(2107)],_[u(2109)],_[u(2619)],_[u(3010)],_[u(633)],_[u(3241)],_[u(2707)],_[u(1504)],_[u(1260)],_[u(665)],_[u(1371)],_[u(1096)],_[u(2450)],_[u(2350)],_[u(377)],_[u(2354)],_[u(2703)],_[u(2327)],_[u(3236)],_[u(2250)],_[u(643)],_[u(1052)],_[u(1622)],_[u(1460)],_[u(318)],_[u(2251)],_[u(2738)],_[u(946)],_[u(3122)],_[u(947)],_[u(1910)],_[u(907)],_[u(2751)],_[u(1764)],_[u(1926)],_[u(678)],_[u(1277)],_[u(1959)],_[u(1118)],_[u(2902)],_[u(1831)],_[u(1501)],_[u(2803)],_[u(3042)],_[u(1346)],_[u(2202)],_[u(1346)],_[u(2079)],_[u(1699)],_[u(1164)],_[u(2935)]][u(2822)](function(n){var e=u;Prisma[e(3233)][e(2531)](i[e(1399)](i[e(1718)],n),i[e(3292)])}),Prisma[u(3233)][u(2531)](_[u(3230)],_[u(824)]))})}(),function(){"use strict";var c=_0x4d5a,u={coZjB:function(n,e){return n(e)},XqnkZ:function(n,e){return n+e},bEdfl:function(n,e){return n+e},dXIkl:c(1580),FybLh:function(n,e){return n(e)},GGlVk:function(n,e){return n+e},AGobd:function(n,e){return n+e},oUbvG:c(1006),VDrfs:c(837),cnBEs:c(2221)+"2",HkMAN:c(2780),QJtQE:c(2478),wdBTG:c(619),OLMmO:c(3084),yhAtQ:c(2780)+"s",kvrys:function(n,e){return n+e},HrHoD:c(520)+c(3134),zgZDz:function(n){return n()}},o=new Prisma[c(712)],a=u[c(1632)](u[c(846)](Prisma[c(2158)][c(2235)](),Prisma[c(3151)][c(2237)+"n"]),u[c(1116)]);var s={main:function(n,e,t){var i=c,r={SZvBN:function(n,e){return u[_0x4d5a(1639)](n,e)}};o[i(2474)](u[i(3080)](u[i(846)](a,u[i(3371)]),n[i(1167)]),function(n){var t=i;n[t(2780)]=!0,n[t(389)+"s"]=n[t(389)+"s"]||5,n[t(761)][t(2822)](function(n){var e=t;n[e(1552)+"h"]=n[e(3301)],n[e(1061)+e(3052)]=n[e(3301)]}),r[t(2388)](e,n)},t)},full:function(n,t,e){var i=c;o[i(2474)](u[i(3080)](u[i(3080)](u[i(508)](u[i(443)](a,u[i(2873)]),n[i(2021)]),u[i(1540)]),n[i(1167)]),function(n){var e=i;n[e(389)+"s"]=n[e(389)+"s"]||15,u[e(3166)](t,n)},e)},clear:function(){o[c(3282)]()}};function t(e){for(var o=c,n=u[o(3405)][o(1075)]("|"),t=0;;){switch(n[t++]){case"0":r[o(940)]=function(){var n=o;s[n(3216)](e,this[n(1927)][n(1143)](this),this[n(2706)][n(1143)](this))};continue;case"1":r[o(2537)+o(1665)]=function(n,e,t){var i=o;s[i(3216)](n,e[i(1143)](r),t[i(1143)](r))};continue;case"2":return r;case"3":var r=new Prisma[o(2386)+o(857)](e);continue;case"4":r[o(1452)]=function(n,e,t){var i=o,r={bbXec:a[i(1684)]};t[i(2602)]=!1,t[i(2018)]=function(){var n=i;Prisma[n(2451)][n(1618)]({url:e[n(488)],title:e[n(690)],component:r[n(1211)],page:1})}};continue;case"5":var a={WZgLv:u[o(719)]};continue}break}}function i(e){var r=c,o=new Prisma[r(2386)+r(857)](e);return o[r(940)]=function(){var n=r;s[n(2693)](e,this[n(1927)][n(1143)](this),this[n(2706)][n(1143)](this))},o[r(2537)+r(1665)]=function(n,e,t){var i=r;s[i(2693)](n,e[i(1143)](o),t[i(1143)](o))},o}window[c(2780)+c(779)]||u[c(2116)](function(){var n=c,e={type:u[n(2943)],version:u[n(2969)],name:u[n(1386)],description:"",component:u[n(1922)]};Prisma[n(3151)][n(909)]=e,Prisma[n(3441)][n(2214)](u[n(1922)],t),Prisma[n(3441)][n(2214)](u[n(719)],i)})}(),function(){"use strict";var a=_0x4d5a,c={evSGZ:a(3202)+a(700),UKXPg:a(3145)+a(745),UMPIW:a(976)+a(3464),YCMsE:a(1645),FIXEs:a(699),edyaZ:a(598),JXOjM:function(n,e){return n===e},puoDf:a(2023)+a(3015),hNGVF:function(n,e){return n===e},SdChH:a(2364),CzBDL:a(3280)+"rl",XjNRF:a(2023)+"l",ImMWH:function(n,e){return n===e},bNUzY:a(2498)+"ey",VXDFP:a(2128)+"y",wVjPw:a(2535)+a(2931),LLgNr:a(3217)+a(1209)+a(1772)+a(3414),Deyxi:function(n){return n()},dksrP:function(n,e){return n===e},RmrzT:a(424),oqbyo:a(882)+a(2230)+a(541),HtnuT:function(n,e){return n(e)},WNmbW:a(2423)+a(2698)+a(813),PXlKE:a(375)+"r",ltOOE:a(3484),dlfVb:a(2844)+a(3209)+a(1723)+'"]',wOSMr:function(n,e){return n(e)},qOUda:a(3256)+a(1608)+a(2893)+a(3425),iOBSp:function(n,e){return n(e)},AJsYk:a(1010),ehyxd:a(2900),ejgsi:a(1012),YKUOB:a(1205),IZbJf:a(3399),NnWnj:function(n){return n()},TnUBk:a(764),qDHQZ:a(3250),pQzLq:a(2657),PAcNp:a(2852),WdDcn:a(3352),cCNdB:a(2794),BCsIU:a(754),blsPi:a(2614)+a(452),VNCOl:a(2582),mfXUt:function(n){return n()}};var e={translate:function(){var n=a;Prisma[n(1812)][n(2214)]({cat_parser:{ru:c[n(3204)],en:c[n(1351)],uk:c[n(2725)]},cat_name:{ru:c[n(2881)],en:c[n(3177)],uk:c[n(656)]}})}},o=[{base:c[a(1233)],name:c[a(3497)],settings:{url:c[a(2622)],key:"",parser_torrent_type:c[a(1527)]}},{base:c[a(1113)],name:c[a(872)],settings:{url:c[a(2091)],key:"",parser_torrent_type:c[a(1527)]}}];function u(){var t=a,i={Rwfxw:function(n,e){return c[_0x4d5a(1648)](n,e)}},r=Prisma[t(3233)][t(2080)](c[t(3253)]),n=o[t(455)](function(n){var e=t;return i[e(3426)](n[e(3114)],r)});n?(n=n[t(1214)],Prisma[t(3233)][t(1077)](c[t(2797)](n[t(2535)+t(2931)],c[t(958)])?c[t(3048)]:c[t(1740)],n[t(2021)]),Prisma[t(3233)][t(1077)](c[t(2426)](n[t(2535)+t(2931)],c[t(958)])?c[t(1133)]:c[t(1238)],n[t(2883)]),Prisma[t(3233)][t(1077)](c[t(608)],n[t(2535)+t(2931)])):console[t(3298)](c[t(3117)])}var n=o[a(2749)](function(n,e){var t=a,i=e[t(3114)],e=e[t(539)];return n[i]=e,n},{no_parser:c[a(607)]});var t={parserSetting:function(){var r=a,o={VrOKI:function(n,e){return c[_0x4d5a(2310)](n,e)},JaElg:c[r(1368)],OpMqc:c[r(2860)],zNfbA:c[r(2532)],iISTw:c[r(3508)],WTOAj:function(n,e){return c[r(1961)](n,e)},LpkcI:c[r(797)],NKPHA:function(n){return c[r(1644)](n)},ebxZv:function(n,e){return c[r(586)](n,e)}};Prisma[r(492)+"i"][r(1302)]({component:c[r(309)],param:{name:c[r(3253)],type:c[r(1564)],values:n,default:c[r(693)]},field:{name:Prisma[r(1812)][r(343)](c[r(1882)])},onChange:function(n){var e=r;c[e(1644)](u),Prisma[e(2538)][e(744)]()},onRender:function(n){var t=r,i={NWajC:function(n,e){return o[_0x4d5a(516)](n,e)},HaMBH:o[t(1128)],UdKzT:o[t(2087)],RTNKZ:o[t(401)],HfgnF:o[t(2266)]};o[t(2055)]($,o[t(583)])[t(2834)](),o[t(2010)](u),o[t(885)](setTimeout,function(){var e=t;i[e(3057)]($,i[e(2568)]).on(i[e(528)],function(){var n=e;Prisma[n(2538)][n(744)]()}),Prisma[e(3233)][e(2688)](i[e(2875)])?(n[e(1007)](),i[e(3057)]($,i[e(3199)])[e(1713)+"r"](i[e(2568)])):n[e(2776)]()})}}),Prisma[r(2538)][r(3321)][r(2668)](c[r(464)],function(n){var e=r;c[e(1026)](n[e(539)],c[e(309)])&&n[e(826)][e(455)](c[e(2770)])[e(2834)]()})}};function i(){var n=a;e[n(343)](),t[n(2057)+n(2967)]()}Prisma[a(1282)].tv(),window[a(3232)+a(3091)]||c[a(1643)](function(){var t=a;window[t(3232)+t(3091)]=!0,window[t(2628)]?c[t(1644)](i):Prisma[t(1207)][t(2668)](c[t(1419)],function(n){var e=t;c[e(1648)](n[e(3503)],c[e(943)])&&c[e(1769)](i)})})}();
function _0x3e0c(t,n){var e=_0x2589();return(_0x3e0c=function(t,n){return e[t-=429]})(t,n)}function _0x2589(){var t=["vYvoi","2.4763 16.","t-backdrop","OytmG","final_prog","load.svg","MJEUz","Failed to ","Программа ","YGHvt","tus--live ","2.3036 1.5","PkRQe","errorCode","\n         ","px);backdr","11.1143 3.","GqrKc","qOrrp","09 15.6325",'<path d="M',"userAgent","xAjvb","wAIoq","peTjR","network","nwzjJ","\nПриєднуйт"," broadcast","appready","removeUpda","pyMXU","{-webkit-b","ur(5px);ba","ире",'071_2606">',"|5|1|2|0|4","remove","it-box-ali","KcPbP","0,122,0.7)","lwfBK","writable","8,0);backg"," stroke-li","lKjaN","dXeqv","e-height: ",".8em;heigh"," the broad","us-soon 3s","qRBTi","рами","Немає прог",".90786 22.","255,255,0.",":rgba(255,","cHNAs","split","9666M8.392","VMuHM","olor:#76e6","1|0"," осталось ","605 12.303","clip0_1807","image_hori",".card__age","YWTnL","-shadow: 0","7a}70%{-we","<li class=","yfphX",'="card__im',"time_offse","lNEZX"," 16.9858M6","nite}.broa","img--loade","blur(5px)}","silent","nite}\n    ","LIqVP","adius:.3em",';">\n      ','u__text">',",122,0.7);","}}@-o-keyf","ast will s","soon","75714 16.9","подождите.","image_vert","VvshU","onTouch"," 0 0 rgba(","dCXXK",";backgroun","pkpOl","secondsToT","   </div>\n","fgtGq","inite;-o-a","icIal","object",'="0 0 24 2','text">LIVE','" stroke-w',"xPacp","adcast__st","SRlbZ","nYXeT","mkiEJ","ZncmL",'ass="broad',"yagFM","d-color:#7","QIgQR","ndex:",'="card__pr',"qvwBF","hadow:0 1p","34M22.4749","oxEjD","tor","ext{color:","add","iv>\n      ","Sports bro"," </div>","10 minutes","wBKcw","       </d",'="margin-b',"Немає поси","random","_status-ma","gPMwu",' 0.05em;">',"sort","PnLKV",' class="ca',"SZULN","WMRPX","--live{bac","37 12.0002","tbZvp","Broadcast ","iVFCt","C18.6587 1","ZlBQY","></div>\n  ","60 минут.","Трансляція",":center}.b",'-marker"><',"      </di","EHOng",'="card__ag',"Lang","052 15.749","get","yBoBn","CGISH","Uyqby","ddvOr","on{backgro","https://a.","image"," <rect wid"," трансляці","26 2.75714","VmTjC",": 0.6em 0.","classList","093C16.762","_watch","gapsK","6e67a}70%{","OweZw","e 1.5s inf","addEventLi","0.6674 8.7","es marker-","video","roHwH",'live">\n   ',"HuNlq","ecnBW","casts","t started ","roadcast__","rker{-webk","Предстоящи","MZEXH","FFuwi","vXhln","kPJFy","5068 22.50","addUpdate","render","4749 11.26","         <","imitive va","ї залишило","tuixF","iptv","translate","XTBnT","        </","1|6|7|8","0454C17.71","arted!\nJoi","VARSt","send","webkit-box","YqraQ","utraff.com","6C16.1045 ","follow","/vast/QHqC","3em;-webki","MxyfQ","push","r--visible","M6.125 3.2","casts_read","До початку","eft: 1em; ","lor:rgba(2","string","ound-color","r:rgba(255","5,0.4)}100","0.9; margi","rd__promo-",": 2.4em; f",".5436 10.6","/get",".89622 14.","w:0 0 0 0 ","The broadc"," 15.4905 1","und-color:","ts.","0024 12.00","ebkit-keyf","uJfaSHIxZ-","CxUrg","MaeNf",": rgba(255"," 16.9858M1","type","ector laye","HSWQw","ww.w3.org/","wxoUa","ZqidO","ba(255,255","Coming up ","z-index:10","XOkef","LPbVt","atus--soon","QCcOy","ram","GAeQM","/api/ad/vi","C1.50037 1","Interactio","ew?","mqAqm","5004 14.02","UjVQB","broken.svg","a(234,78,7","5 22.5002 ",'or: #fff;"',"е трансляц","stat for i","егляду.","XCAUy","     <div ","osition: a","FDuhn","map",",255,0.4)}","now","parseTime","328 20.532","|8|9","9 13.7116 ","9.84311 14",' height="2',"ing.","22M20.939 ","gba(255,25","peOnc","d-color:rg","5,0.5)}100","kbXGt",">\n        ","0003 7.000","GXtdg","VamKW","ottom: 1em","Fifej","3370570boNqwP","n-bottom: ",",255,255,0","VUxjK","5|2|4|3|1|","1.83032 12","алася.\nБуд","Oqlbv","ze:1em;fon","C5.63231 1","C6.69301 1","|10|7|3|14","flex;-webk","Platform","OSRNg","xt-transfo","0.3em; box","svg>\n     ","19 14.5004","webkit-fle","watch","loader","NfzIV",".1195 7.39",'iew" style',"6|11|13|12",".4)}}.broa","KSdqs","sSKTR","append","empty","qoWzu","bkit-borde",'="http://w',"r-spacing:",'s="card__v',"cast.","0.9707 5.1","рансляцію.",",0);backgr","padding:.4",'xt"></div>',"Ghiew","ical",".1091 16.3","сь 60 хвил",'th="24" he',"fixProtoco","x-shadow:0","(234,78,78"," 1.5s infi"," 7.00039 1"," часом","63 5.184 1","final_now_","sfedt","1|7|6|5",'itle"></di',"ata availa","display","   ","ble","arker-stat"," 22.1036 5","чалась.\nПо","18.9128 2.","NRJUH","aWZhq","CMVUm","2027214LDsKcg","Storage","gba(0, 0, ","росмотру.","10 минут.","forEach","azvcv"," на трансл","1em; color",'s="broadca','="card sel',"5547 15.50","60 minutes","/api/sport","12.0003 12","x;display:","8,78,0);ba","12.0004 22","/div>\n    ","visible",".0892 20.5",'one" xmlns',"href",'nd"/>\n    ',"filter","sessionId","ebkit-bord","timeLeft","Reguest","9.7715 8.6","16.95 13.3","EAsIp","jhehw","        <c","mo-text","C12.1018 1","xt{font-si","6.6248 4.7",".125 3.296","YcrpN","2,0.7);box","0%;border-","XbLlo","ox-shadow:",".5)}100%{-","UMths","4)}}@-webk","ready",'v class="b',"Найближчим","sess_","ter:blur(5","hover:ente","5954C11.10","ZqIhe","live","ion:marker"," 2.16256 9",":0 0 0 0 r","17.5122C19","Qfbyi","ncruq","streams","jaGsl","еться тран","trdIl","ohRbQ",": 700; lin","YBzGQ","M7.39909 2","erty","ast has en","kground-co","abr",'="broadcas'," layer--re"," left unti",";display:-","Нет ссылки","broadcasts","as a funct","set","Cannot cal","onVisible","VcABZ","Utils","2|3|4|5|0|","BGoaB","aqUqE","nd-color:r","яцию.","XNszP","Activity","r-status-l","7791 1.500","      <div","8.78855 22","отсутствуе","lue.","1 10.441 1","querySelec","01 12.0004","hvoRp","onFocus","жалуйста, ","it-keyfram","04 1.50024","zibQH",",78,0);bac","PtmzY","results","cast__stat","prisma_uid","tjGcG","t__status-","final_soon","boSoT","Gwkac","1 13.5598 ","Трансляция","5,255,0.4)",'width="24"',"ZnRAh","v>\n       ","HJLWZ","Player","floor","4|6|5|3|2|",'ath="url(#',"qlkxc","IzFCc",'us-marker"',"NPBwJ","toString","MFxuy","lvZTV","app_digita"," <g clip-p",", 255, 255","2.0002C22.","8,78,0);bo","rgba(0,0,0","@@toPrimit","0 0 0 rgba","Component","st__status","u__list","cEHQV","AhzqD","onload","-flex-alig"," завершена","e>\n    @-w","onerror",", 0.9); te","udxwz","7a}70%{box",".785 8.392","CQoTM","ZePqI","bind","IepLx","2522259UqisdH","xXPyJ","0 0 0 0 rg","fnJId","xml","GslZU","location","8919 7.670","15.9101 20","-status-so","sPxYR","XyAel","FbUGL","5,0.7)}65%","Sjydm","1.0.2","shadow:0 0","95 13.3093","stener","enumerable","0 .4em rgb","}@-o-keyfr",")}.broadca","live{0%{-w","adow:0 0 0","{box-shado"," 11.2634C2","954C10.650","n{0%{backg","-webkit-al","qODsC","n 3s infin","on 3s infi",'">\n       ',"ion","ruRGa","dkCxp","22,0.7);ba","BkRWi","ZbXDl","yw8OUCkmxp","sent succe","3|2",'s="card__t',"getKeys",'class="men',"op-filter:","FWjNN","generateSe","3|0|4|8|2|","2|1|4|3|0","6 1.50454M","XFWgD",".50024 12.","card--wide","njDAl","ign-items:","MRgsK","100%{backg","7 22.5002 ","трансляції","ames marke","destroy","xHsFY",'lass="card'," 15.2693 7","olor:rgba(","img","bSzOF","t-border-r","1|5|0|3|4|","Left","9209 15.63","__status--","activity","ssionId","4,78,78,0)","lor:rgba(0","hQrCL","pris_domai","__status-t","status-mar","HazgP",".939 17.51","error","tatus-live","); padding","hvWvf","1 20.939 1","rames mark","t:.8em;-we","ь ласка, з","box-shadow","dcast__sta","t_not_yet",'u__ico">\n ',"FvmLW","Vkmes","th>\n      ","ready_inde","dBXKp","66C7.80174","909 21.441","GEMxY","ackdrop-fi","    </defs","XWCjW","yet.\nPleas","protocol","em .8em;-w","briefly","NEEEK","HrEXQ","Bell","key","0.2em; col","ин.","data"," еще не на","8,0);box-s","       <di","zolax","AkQQE",".50037 8.3","time_end","_css","jsFQd","ZrEkE","configurab","adcasts","1.441C5.42",".7)}65%{ba",'4" fill="n',"Спорт",'fill="curr',"TKFxB","8em; borde",'4" viewBox',"body","8KlWvfd","No link to","      </g>","name","Sport","bkit-box-s","jmwnd","TPxeh","  </clipPa","dius:.3em;",'necap="rou',"ckground-c","QXEtY","4.2845 20.","app",".menu .men","LVTgB","Скоро в эф","3 3.79874 ","day",'title"></d',"mlhLe","ihjNO","MAspA","HkacT","lign-items","zontal","19 21.929 ",'g">\n      ',"LgvzH"," 0, 0, 0.6","5|2|4|1|3|",'ight="24" ',",0,0,0.6);","us-live 1.",'2000/svg">',".00039 12.","-o-animati","4|5|0|1|6|",'(5px);">\n ',"ite;animat","ded.","zBeyN",",0);box-sh","55,255,255"," 1.50454M1","    <div c","25C8.13724","ckdrop-fil","nder card-","length","09 7.02039","255,255,25"," началась!","./img/img_","-ms-flexbo"," 0 rgba(23",'e="#F2F2F2',"call","сляція","src","Template","lipPath id","mouth","l the broa","(0,0,0,0.5","12540VDzWVX"," <div clas","DOHDj","card",".8635 15.2","r-radius:5","vlKvx","  </div>\n ","XzBZQ",",0.6);padd",";margin-ri","cmtVk","ebkit-box-","broadcast_","oDLOo","-webkit-bo","IlypZ"," 6.125 3.2","13.5655 18","getTime","anqgC","UHznq","ing:.4em .","2.0004C11.","rgba(234,7","aIaMf","right:1em;","056 15.777","build","HKCgp","style","   <div cl","49 11.2634","r-radius: ","ast has no","uCp9Oa8o4.","n:marker-s","GBijA","-shadow:0 ","symbol"," 11.5483 7","2.4918 11.","3.8046 1.9","PvOWv","dbbxj",'omo">\n    ','"font-size',"value","ajax",'iv class="',"     <svg ","aINqb","px)}.broad","00;color:#","n:center;a","oMWMm","defineProp","2775 17.09","eyframes m","status-liv","<div class","substr","tart soon","YCweq","0, 0.2); b","radius:50%","status--so","ktauU","tus-marker","log",'e"></div>\n',"ba(118,230","XcYza","find","hover:touc","eturn a pr","трансляции","63 1.65803","250534qQQZSE","oWfSx","3988 10.65","118,230,12"," 22.5004 1","2029 1.501","12ubfsJo","SAXvB","0.659 7.05","toPrimitiv","92 2.75714","Arrays","PPXSV","ase; lette","ive{0%{box","t-weight:6","updateTime",".card__pro","ont-weight","naPyw","04 11.7525","m selector","wcuJR","jIEEG","        <d","ybZHX","PLecM","</style>\n ","center;-ms","div style=","          ","No program","FOAbz","GET",".card__img","prototype","iptv_broad","%{-webkit-","nimation:m","YojEt","RtheV","dWoLc","14.8921 15","warn","HMJGj","BIarN","us-live{0%","create",".card__tit","gHXCD","\nПрисоедин","programRea",".3em;borde","status bro","it-animati","e;top:1em;","541 20.477","RLgWN","mVJHF","l a class ","hadow:0 0 ","7.5122M8.3",'858" strok',"concat","0 0 .4em r","fXvbc"," 0 0 .4em ","TkKHj","soon{0%{ba","9204 6.957","zDhft"," почалася!","39C16.0757","nd:rgba(0,","ssfully fo","ont-size: ","003 1.9971"," infinite;","none","ачекайте.","5,0.4)}}@k","есь до пер","default","imeHuman",'"menu__ite',"lter: blur","rEYoM","2565 22.47","лання на т","GCgCY",'v style="f',"bsolute; l"," <defs>\n  ","; backgrou","WWvou"," ще не поч","До начала ","plugins",",78,0);box","qPOWh","on:absolut","innerText","send broad","dDLhU","vGYAr","top: 0.8em","\n    <styl","dipRS","updates","IrieH","rm: upperc","JpbAz","ted","CMLRA","     </li>","uMJsF","__promo-te","mGGDG","params","time","round-colo","e;animatio","r-radius:.","2 5.28516 ","Qatfq","left","TWYCy","gn:center;","NKbwk","yujKd","Скоро почн",".card__vie","ker{width:","n the view","8em;-webki",'v style="p',"3C12.0964 ","hPpnF","IDjJC","HAevC","er-radius:","68 12.3036","view stat ","gYwXc","45505GDlgAm","#76e67a}.b","grFGS","YgATt","53393 12.0","OFyfj",'="clip0_18',"BsCXS","tus{positi","{backgroun","21.441M16.","ast has st","final_star","final_titl","3|0|1|2|4","sAdrZ","yKJrr","9 7.05954M","hrCLT","YgkDt","Dcbat",".4)}}@keyf"," 2px 8px r",'1_2606)">\n',"x 2px rgba","er-status-","9666C3.334","%{backgrou","16.5565 14","M12.0003 1",".5002C10.3","Manifest","118RtuaMN","status",",0.5)}100%"," трансляци","cast view ","яйтесь к п","ive must r","3 7.39909 ",'xt">СКОРО<',"No sport d","Спортивные",".82371 1.5","-filter:bl","YCyae","acDrK","status-soo","us--live .",";border-ra","ght:.5em}.","сь 10 хвил","final_end","kSCaY","Uvgci","Listener","FNPcc","fff;text-s","gba(118,23","395773fnNswl","text","dcast star","gba(234,78","agrjN","694 15.608","nMain","xHTIA","305 14.500","<img class","dsNCd","soon .broa","mo-title","cMgTA","PoXtF",'idth="1.5"',"(118,230,1",".0004C13.8","title","_status-te","r index:","RzFeokikE2","jwxjD","hRsxq",'entColor"/',"JUbwz","wuxNe","lotMC","on:marker-","hover:focu","time_start","YPUnE","</div>\n   ","UJAco","5s infinit","Спортивні ","title_left","e wait.","{-webkit-a",".1976 1.66",".broadcast","10.659 7.0","lLink","-webkit-ba","PGOXP","7 15.6325C",'-small">\n '];return(_0x2589=function(){return t})()}(function(){for(var t=_0x3e0c,n=_0x2589();;)try{if(201135==+parseInt(t(1081))+parseInt(t(1257))/2*(-parseInt(t(1003))/3)+-parseInt(t(1087))/4*(parseInt(t(1225))/5)+parseInt(t(636))/6+parseInt(t(1284))/7*(-parseInt(t(937))/8)+parseInt(t(798))/9+-parseInt(t(567))/10)break;n.push(n.shift())}catch(t){n.push(n.shift())}})(),function(){"use strict";var o=_0x3e0c,g={wBKcw:function(t,n){return t instanceof n},MAspA:o(718)+o(1140)+o(716)+o(832),ZlBQY:function(t,n){return t<n},GAeQM:function(t,n){return t in n},qvwBF:o(1050),xHsFY:function(t,n){return t(n)},ybZHX:function(t,n,e){return t(n,e)},JpbAz:function(t,n,e){return t(n,e)},dXeqv:o(1116),YPUnE:function(t,n){return t!=n},ZnRAh:o(1435),ncruq:function(t,n){return t!==n},VARSt:function(t,n){return t||n},kSCaY:o(1163),Oqlbv:o(778)+o(1263)+o(1078)+o(463)+o(734),sfedt:function(t,n){return t===n},trdIl:o(490),HkacT:function(t,n){return t==n},MRgsK:o(1042),dBXKp:function(t,n){return t+n},gPMwu:o(868)+"2",icIal:function(t,n,e){return t(n,e)},KcPbP:function(t){return t()},SRlbZ:function(t,n){return t*n},DOHDj:function(t,n){return t-n},lotMC:o(717),vlKvx:o(1492),YGHvt:o(1206),WMRPX:o(459),HAevC:o(1361)+"te",lvZTV:function(t,n){return n<t},CMLRA:o(1266)+o(625)+o(628),pkpOl:o(649)+o(498),IDjJC:function(t,n,e){return t(n,e)},Sjydm:function(t,n){return t+n},jIEEG:function(t,n){return t+n},GCgCY:o(686),HrEXQ:o(1338)+o(1183)+o(1261)+o(539)+o(1449),Fifej:o(968)+"0",FvmLW:o(1114),YcrpN:o(748),UMths:o(527)+o(530),NRJUH:o(1478)+o(1223)+o(839)+o(1155)+o(1304),cmtVk:o(846)+o(873),SZULN:o(474),oxEjD:function(t,n){return t*n},qODsC:function(t,n){return t+n},ihjNO:function(t,n){return t-n},sSKTR:o(848),MFxuy:function(t,n){return n<t},Gwkac:function(t,n){return t!==n},IepLx:o(592)+o(578)+o(1367)+o(550),YCyae:o(1313)+"s",CxUrg:o(1098)+o(670),PLecM:function(t,n){return t===n},ZbXDl:o(587),lNEZX:o(722)+o(470),cEHQV:function(t,n){return t(n)},hQrCL:o(1345)+o(1111)+o(1004)+o(645)+o(781)+o(1359)+o(871)+o(446)+o(1111)+o(1111)+o(1004)+o(645)+o(781)+o(1486)+o(654)+o(1111)+o(1111)+o(1063)+o(710)+o(750)+o(1437)+o(1316)+o(1111)+o(1463)+o(1458)+o(1111),Dcbat:o(1212)+"w",UjVQB:o(688)+"r",jhehw:o(852),XNszP:o(691),Qfbyi:function(t,n){return n<t},Qatfq:o(571)+"0",hRsxq:o(1159),vYvoi:function(t,n){return t(n)},PkRQe:o(1345)+o(918)+o(1216)+o(543)+o(1172)+o(488)+o(1186)+o(1174)+o(1154)+o(967)+o(884)+o(433)+o(934)+o(1036)+o(583)+o(1400)+o(1247)+o(638)+o(1067)+o(902)+o(1166)+o(976)+o(1111)+o(462)+o(1110)+o(1049)+o(496)+o(1099)+o(703)+o(1378)+o(494)+o(568)+o(913)+o(537)+">",peOnc:o(1316)+o(1111)+o(918)+o(1171)+o(1156)+o(644)+o(510)+o(774)+o(790)+o(582)+o(1191)+o(1094)+o(601)+o(1469),kPJFy:o(1316)+o(1111)+o(1431)+o(1111)+"  ",HKCgp:function(t,n){return t(n)},oWfSx:o(1345)+o(918)+o(684)+o(451)+o(1134)+o(1440)+o(523)+o(831)+o(1111)+o(1034)+o(1445)+o(747)+o(767)+o(1482)+o(1111)+o(1105)+o(1052)+o(1016)+o(1303)+o(1265)+o(654)+o(1111)+o(1010)+o(1111)+" ",PPXSV:o(1129)+"le",qRBTi:o(1077)+"h",fgtGq:o(1098)+o(1296),HJLWZ:o(1016)+o(1335)+o(525),XOkef:o(655),aIaMf:o(1115),boSoT:function(t,n){return t(n)},XCAUy:o(1063)+o(646)+o(513)+o(484)+o(711)+o(986)+o(1330)+o(1111)+o(1004)+o(602)+o(591)+o(1464)+o(565)+o(1415)+o(1111)+o(1293)+o(1404)+o(965)+o(1111)+o(1063)+o(1450)+o(1048)+o(1111)+o(731)+o(1472)+o(495)+o(957)+o(1458)+o(1111)+o(983)+o(862)+o(1197)+o(608)+o(1345)+o(1463)+o(1458)+o(1111)+o(1063)+o(1489)+o(1073)+o(1111)+o(1010)+o(1111)+o(1004)+o(841)+o(624)+o(759)+o(1460),zDhft:o(1398),PnLKV:function(t,n){return t==n},mqAqm:function(t,n){return t+n},dWoLc:function(t,n){return t+n},OFyfj:o(1320),AhzqD:function(t,n){return t/n},dsNCd:function(t,n){return t<n},XTBnT:o(1016)+o(1277),mlhLe:o(1016)+o(1237)+o(1193),aWZhq:o(991)+o(534),yujKd:function(t,n){return t===n},gHXCD:o(991)+o(1336),wxoUa:o(763)+o(1393),oDLOo:o(709),qPOWh:function(t,n){return t-n},bSzOF:function(t,n){return t==n},MaeNf:o(975)+o(840),xHTIA:o(1016)+o(1238)+"e",ecnBW:function(t,n){return t<n},qlkxc:o(1498)+o(477)+o(480)+o(507)+o(838)+o(1305)+o(1038)+o(802),qOrrp:o(1016)+o(1237)+o(892),IzFCc:o(1409)+"d",jsFQd:function(t,n,e){return t(n,e)},jmwnd:o(1128),NPBwJ:o(1097)+o(869),PoXtF:o(1499),LVTgB:o(860),HuNlq:o(460),VUxjK:o(1239),ZncmL:function(t,n){return t<=n},azvcv:function(t,n){return t==n},LIqVP:function(t,n){return n<t},mGGDG:o(1420),gapsK:o(847)+o(623),GslZU:function(t,n){return t*n},vGYAr:function(t,n){return t*n},QCcOy:o(1016)+o(751)+o(436),njDAl:o(1016)+o(621)+o(587),LgvzH:o(1016)+o(1302),zibQH:o(1117)+o(449),CGISH:function(t,n){return t(n)},hrCLT:o(1402)+o(1165)+o(1102)+o(831)+o(542)+o(843)+o(893)+o(1111)+o(1053)+o(757)+o(553)+o(935)+o(1436)+o(930)+o(657)+o(600)+o(515)+o(972)+o(1345)+o(1111)+o(773)+o(764)+o(1396)+o(1248)+o(1111)+o(1111)+o(1351)+o(650)+o(1301)+o(737)+o(502)+o(1332)+o(815)+o(1254)+o(1026)+o(754)+o(552)+o(793)+o(1350)+o(1254)+o(1026)+o(735)+o(442)+o(1083)+o(1242)+o(666)+o(435)+o(551)+o(1253)+o(611)+o(1292)+o(478)+o(1123)+o(1007)+o(1289)+o(1329)+o(1021)+o(497)+o(549)+o(1264)+o(1235)+o(815)+o(1480)+o(950)+o(1491)+o(886)+o(1142)+o(870)+o(984)+o(863)+o(499)+o(805)+o(585)+o(576)+o(604)+o(1150)+o(1020)+o(1390)+o(1350)+o(577)+o(673)+o(1060)+o(1091)+o(511)+o(1089)+o(825)+o(1204)+o(1347)+o(1229)+o(1157)+o(1217)+o(572)+o(1323)+o(1395)+o(849)+o(1325)+o(689)+o(988)+o(1043)+o(973)+(o(562)+o(1153)+o(618)+o(665)+o(1168)+o(1035)+o(485)+o(1251)+o(620)+o(921)+o(730)+o(1476)+o(528)+o(1045)+o(647)+o(431)+o(1407)+o(674)+o(899)+o(693)+o(1268)+o(505)+o(742)+o(671)+o(851)+o(1086)+o(1222)+o(982)+o(1342)+o(471)+o(1080)+o(630)+o(1385)+o(461)+o(1453)+o(824)+o(1044)+o(458)+o(1101)+o(1085)+o(775)+o(532)+o(964)+o(806)+o(881)+o(555)+o(695)+o(656)+o(1030)+o(857)+o(653)+o(1255)+o(536)+o(732)+o(590)+o(900)+o(705)+o(928)+o(1137)+o(955)+o(632)+o(1421)+o(1143)+o(994)+o(1438)+o(1299)+o(1375)+o(947)+o(659)+o(1111)+o(939)+o(1345)+o(1111)+o(1173)+o(1111)+o(669)+o(999)+o(1231)+o(1366)+o(1345)+o(1111)+o(429)+o(613)+o(969)+o(932)+o(1308)+o(561)+o(1111)+o(945)+o(896)+o(1111)+o(903)+o(561)+o(469)+o(584)+o(1463)+o(1458)+o(1487)+o(759)+o(542))+(o(843)+o(1416)),yfphX:o(1316)+o(1195),HMJGj:function(t,n){return t(n)},dkCxp:o(952)+o(782),NKbwk:o(683),FNPcc:function(t){return t()},grFGS:o(715)+o(923),GBijA:o(1187)+o(788)+o(506)+o(887)+o(1250)+o(821)+o(1015)+o(814)+o(1426)+o(1084)+o(676)+o(1041)+o(779)+o(1300)+o(835)+o(948)+o(1392)+o(1401)+o(942)+o(1141)+o(818)+o(535)+o(917)+o(1141)+o(818)+o(535)+o(1374)+o(1201)+o(492)+o(569)+o(680)+o(475)+o(1041)+o(779)+o(616)+o(980)+o(822)+o(993)+o(874)+o(1428)+o(558)+o(518)+o(546)+o(819)+o(859)+o(729)+o(1095)+o(1041)+o(779)+o(1300)+o(835)+o(948)+o(1392)+o(792)+o(1041)+o(1145)+o(1287)+o(744)+o(708)+o(489)+o(981)+o(1259)+o(823)+o(500)+o(1027)+o(652)+o(948)+o(864)+o(989)+o(1161)+o(1061)+o(629)+o(1127)+o(1363)+o(679)+o(800)+o(1074)+o(1417)+o(890)+o(694)+o(1283)+o(1371)+o(1428)+o(1447)+o(438)+o(1018)+o(615)+o(1147)+o(1027)+o(776)+o(615)+o(1147)+o(1027)+o(652)+o(948)+o(864)+o(989)+o(559)+o(1118)+o(890)+(o(694)+o(1287)+o(1179)+o(1041)+o(779)+o(616)+o(606)+o(491)+o(1387)+o(1386)+o(682)+o(741)+o(443)+o(1272)+o(826)+o(1201)+o(492)+o(569)+o(929)+o(948)+o(864)+o(989)+o(493)+o(1252)+o(725)+o(556)+o(756)+o(1418)+o(887)+o(1250)+o(1149)+o(948)+o(864)+o(989)+o(811)+o(1234)+o(558)+o(518)+o(546)+o(856)+o(1201)+o(492)+o(569)+o(1246)+o(887)+o(1250)+o(1149)+o(948)+o(864)+o(989)+o(811)+o(1234)+o(558)+o(518)+o(546)+o(856)+o(1201)+o(492)+o(569)+o(593)+o(891)+o(1233)+o(1181)+o(1136)+o(1029)+o(520)+o(713)+o(475)+o(713)+o(586)+o(651)+o(992)+o(651)+o(579)+o(1369)+o(1208)+o(827)+o(854)+o(1109)+o(786)+o(1057)+o(962)+o(1485)+o(451)+o(879)+o(1213)+o(1379)+o(888)+o(599)+o(1008)+o(677)+o(1068)+o(1013)+o(1275)+o(1016)+o(1303)+o(672)+o(575)+o(1096)+o(1056))+(o(1282)+o(1452)+o(1249)+o(1002)+o(820)+o(781)+o(1475)+o(708)+o(875)+o(970)+o(607)+o(907)+o(662)+o(1221)+o(1133)+o(1203)+o(481)+o(1333)+o(1269)+o(1364)+o(985)+o(687)+o(1055)+o(747)+o(1273)+o(1016)+o(1467)+o(452)+o(1135)+o(1312)+o(1062)+o(440)+o(1433)+o(1119)+o(629)+o(971)+o(1318)+o(1202)+o(1039)+o(883)+o(617)+o(1408)+o(891)+o(1341)+o(1324)+o(878)+o(1456)+o(1226)+o(451)+o(1069)+o(1497)+o(503)+o(777)+o(1012)+o(1025)+o(1215)+o(867)+o(1414)+o(1274)+o(946)+o(1327)+o(985)+o(687)+o(1346)+o(844)+o(1410)+o(1324)+o(871)+o(1295)+o(891)+o(1071)+o(1322)+o(1119)+o(629)+o(1381)+o(1158)+o(974)+o(1312)+o(1272)+o(829)+o(977)+o(692)+o(807)+o(830)+o(1412)+o(1108)+o(627)),XFWgD:function(t,n){return t(n)},VmTjC:o(936),QIgQR:o(931),aqUqE:o(941),kbXGt:o(1267)+o(1260)+"и",gYwXc:o(1319)+o(858),nYXeT:o(1459)+o(927),sPxYR:o(1339)+o(733)+"т",FFuwi:o(1384)+o(1383),nwzjJ:o(1112),GqrKc:o(1177)+o(1079)+o(1394)+o(1483),ZePqI:o(487)+o(430)+o(464)+o(612)+o(914),GEMxY:o(648)+o(712)+o(1001)+o(1286)+o(504),naPyw:o(1177)+o(1079)+o(1394)+o(640),OweZw:o(487)+o(430)+o(464)+o(1276)+o(914),peTjR:o(1461)+o(712)+o(1001)+o(1286)+o(504),YojEt:o(755)+o(916)+o(631)+o(740)+o(1422),EAsIp:o(1484)+o(1176)+o(573)+o(889)+o(1160),PvOWv:o(501)+o(1037)+o(450)+o(905)+o(1321),UHznq:o(755)+o(990)+o(1131)+o(1262)+o(639),MxyfQ:o(1484)+o(1152)+o(1358)+o(1162)+o(540),BkRWi:o(501)+o(1236)+o(472)+o(1214)+o(554),VcABZ:o(755)+o(787)+".",cHNAs:o(1484)+o(787)+".",jaGsl:o(501)+o(707)+o(978),aINqb:o(714)+o(643)+o(726),Ghiew:o(1465)+o(1169)+o(605),fnJId:o(938)+o(1380)+o(603),hvWvf:o(453)+o(538)+"ии",lwfBK:o(685)+o(619),yagFM:o(519)+o(1420),YgkDt:o(954)+o(1365),mkiEJ:o(1211)+o(700)+o(996),NfzIV:o(501)+o(1419)+o(1065),TkKHj:o(444),tbZvp:o(813),dbbxj:o(1016)+o(940),VamKW:o(951),lKjaN:function(t,n){return n<=t}};function s(t,n){var e=o;if(!g[e(1462)](t,n))throw new TypeError(g[e(960)])}function i(t,n){for(var e=o,r=0;g[e(1481)](r,n[e(987)]);r++){var i=n[r];i[e(817)]=i[e(817)]||!1,i[e(926)+"le"]=!0,g[e(526)](g[e(1451)],i)&&(i[e(1373)]=!0),Object[e(1059)+e(706)](t,g[e(861)](a,i[e(912)]),i)}}function t(t,n,e){var r=o;return n&&g[r(1106)](i,t[r(1116)],n),e&&g[r(1192)](i,t,e),Object[r(1059)+r(706)](t,g[r(1377)],{writable:!1}),t}function e(t,n){var e=o;if(g[e(1315)](g[e(758)],typeof t)||!t)return t;var r=t[Symbol[e(1090)+"e"]];if(g[e(697)](void 0,r)){r=r[e(995)](t,g[e(473)](n,g[e(1278)]));if(g[e(1315)](g[e(758)],typeof r))return r;throw new TypeError(g[e(574)])}return(g[e(622)](g[e(701)],n)?String:Number)(t)}function a(t){var n=o,t=g[n(1106)](e,t,g[n(701)]);return g[n(961)](g[n(855)],typeof t)?t:g[n(898)](t,"")}h={yBoBn:g[(v=o)(1468)],XyAel:function(t,n,e){return g[v(1434)](t,n,e)},zolax:function(t){return g[v(1370)](t)},ZrEkE:function(t,n){return g[v(1441)](t,n)},PtmzY:function(t,n){return g[v(1005)](t,n)}};var w=new(g[v(1192)](t,function t(){for(var e=v,n=h[e(1493)][e(1389)]("|"),r=0;;){switch(n[r++]){case"0":h[e(809)](s,this,t);continue;case"1":var i={TPxeh:function(t){return h[e(919)](t)}};continue;case"2":h[e(809)](setInterval,function(){var n=e;a[n(1189)][n(641)](function(t){return i[n(944)](t)})},h[e(925)](1e3,10));continue;case"3":this[e(1405)+"t"]=0;continue;case"4":this[e(1189)]=[];continue;case"5":var a=this;continue}break}},[{key:g[v(1311)],value:function(t){var n=v;this[n(1405)+"t"]=h[n(745)](t,Date[n(547)]())}},{key:g[v(1009)],value:function(){var t=v,n=new Date,e=g[t(898)](n[t(1022)](),this[t(1405)+"t"]);return(n=new Date(e))[t(1022)]()}},{key:g[v(1340)],value:function(t){var n=v;return h[n(745)](t,this[n(1492)]())}},{key:g[v(1474)],value:function(t){var n=v;this[n(1189)][n(483)](t)}},{key:g[v(1220)],value:function(t){var n=v;Prisma[n(1092)][n(1368)](this[n(1189)],t)}}]));d={dipRS:function(t,n,e){return g[_0x3e0c(1106)](t,n,e)},wuxNe:function(t,n){return g[_0x3e0c(771)](t,n)},wAIoq:function(t,n){return g[_0x3e0c(861)](t,n)},yKJrr:g[(l=o)(1194)],PGOXP:function(t,n){return g[l(898)](t,n)},MJEUz:g[l(1429)]};var c=new(g[l(1219)](t,function t(){var n=l;d[n(1188)](s,this,t),this[n(1356)]=new Prisma[n(664)]},[{key:g[l(1009)],value:function(e,r){var i=l,a={hvoRp:function(t,n){return d[_0x3e0c(1354)](t,n)}},o=this,t=d[i(1328)](d[i(1328)](Prisma[i(721)][i(906)](),Prisma[i(1256)][i(877)+"n"]),d[i(1337)]);this[i(1356)][i(1411)](t,function(t){var n=i;t&&d[n(1310)](t[n(746)][n(987)],0)?(w[n(717)](t[n(547)]),d[n(1354)](e,t[n(746)])):r?d[n(1354)](r,d[n(1241)]):console[n(882)](d[n(1241)])},function(t){var n=i;r&&a[n(738)](r,o[n(1356)][n(1344)](t))})}}]));f={rEYoM:g[(u=o)(910)],HazgP:g[u(566)],EHOng:g[u(894)],SAXvB:g[u(675)],QXEtY:function(t,n){return g[u(898)](t,n)},IrieH:function(t,n){return g[u(1104)](t,n)},uMJsF:function(t,n){return g[u(812)](t,n)},anqgC:g[u(681)],YCweq:g[u(633)]};var u,f,l,d,v,h,k=new(g[u(1192)](t,function t(){var n=u;g[n(1434)](s,this,t),this[n(897)+"x"]={},this[n(661)]=this[n(846)+n(873)]()},[{key:g[u(1014)],value:function(){var t=u;return g[t(898)](g[t(812)](g[t(1104)](g[t(1170)],Date[t(547)]()),"_"),Math[t(1466)]()[t(769)](36)[t(1064)](2,9))}},{key:g[u(1473)],value:function(i){for(var a=u,t=f[a(880)][a(1389)]("|"),n=0;;){switch(t[n++]){case"0":$[a(1051)]({url:r,method:f[a(1488)],headers:{"User-Agent":navigator[a(1352)],Referer:window[a(804)][a(658)]},timeout:1e4,success:function(t){var n=a;console[n(1072)](o[n(454)],i)},error:function(t,n,e){var r=a;console[r(1124)](f[r(1167)],i,e)}});continue;case"1":var e=new URLSearchParams({index:i,uid:Prisma[a(637)][a(1492)](f[a(1088)],""),platform:Prisma[a(580)][a(1492)](),sid:this[a(661)]});continue;case"2":if(this[a(897)+"x"][i])return;continue;case"3":var r=f[a(949)](f[a(1190)](f[a(1196)](Prisma[a(721)][a(906)](),Prisma[a(1256)][a(877)+"n"]),f[a(1023)]),e[a(769)]());continue;case"4":this[a(897)+"x"][i]=!0;continue;case"5":var o={MZEXH:f[a(1066)]};continue}break}}}]));function x(t,n){var e=o;return Math[e(762)](g[e(812)](g[e(1454)](Math[e(1466)](),g[e(828)](g[e(959)](n,t),1)),t))}var _,y,P=0,m=(y={mVJHF:function(t,n){return g[_0x3e0c(753)](t,n)},JUbwz:g[(_=o)(1017)],FbUGL:function(t,n){return g[_(1180)](t,n)},ohRbQ:function(t,n){return g[_(1032)](t,n)},TWYCy:function(t,n){return g[_(866)](t,n)},YqraQ:g[_(727)],xAjvb:function(t,n){return g[_(1481)](t,n)},ZqidO:g[_(468)],KSdqs:g[_(509)],fXvbc:g[_(1291)],BGoaB:function(t,n){return g[_(448)](t,n)},CQoTM:g[_(765)],CMVUm:function(t,n){return g[_(1122)](t,n)},tjGcG:function(t,n){return g[_(1454)](t,n)},OytmG:function(t,n){return g[_(1454)](t,n)},iVFCt:function(t,n,e){return g[_(1106)](t,n,e)},acDrK:g[_(1349)],GXtdg:g[_(766)]},g[_(924)](t,function t(){for(var n=_,e=g[n(595)][n(1389)]("|"),r=0;;){switch(e[r++]){case"0":this[n(1199)]=i;continue;case"1":var i=g[n(770)](arguments[n(987)],1)&&g[n(753)](arguments[1],void 0)?arguments[1]:{};continue;case"2":var a=g[n(771)](arguments[n(987)],0)&&g[n(697)](arguments[0],void 0)?arguments[0]:{};continue;case"3":this[n(915)]=a;continue;case"4":g[n(1192)](s,this,t);continue}break}},[{key:g[_(943)],value:function(){for(var c=_,t=g[c(797)][c(1389)]("|"),n=0;;){switch(t[n++]){case"0":this[c(1006)][c(441)+c(816)](g[c(1270)],function(){var t=c;p[t(739)]&&p[t(739)](p[t(1006)],{})});continue;case"1":this[c(1006)][c(736)+c(1455)](g[c(508)])[c(1182)]="";continue;case"2":if(g[c(1107)](this[c(1199)][c(512)],g[c(837)]))for(var e,r=g[c(1406)][c(1389)]("|"),i=0;;){switch(r[i++]){case"0":g[c(473)](s,a)&&(e=g[c(783)]($,g[c(876)]),this[c(1006)][c(736)+c(1455)](g[c(1245)])[c(596)](e[0]));continue;case"1":this[c(1006)][c(441)+c(816)](g[c(533)],function(){var i=c,r={TKFxB:function(t,n){return y[_0x3e0c(1139)](t,n)},BsCXS:y[i(1309)],agrjN:function(t,n){return y[i(810)](t,n)},sAdrZ:function(t,n){return y[i(702)](t,n)}},t=y[i(1207)](p[i(915)][i(1258)],y[i(476)]);if(y[i(1353)](w[i(1206)](p[i(915)][i(922)]),0)&&!t)Prisma[i(911)][i(483)]({text:Prisma[i(1490)][i(467)](y[i(517)])});else if(y[i(1353)](w[i(1206)](p[i(915)][i(1314)]),0)||t)for(var n=y[i(594)][i(1389)]("|"),e=0;;){switch(n[e++]){case"0":var a=Prisma[i(1092)][i(842)](p[i(915)][i(698)])[i(660)](function(t){var n=i;return r[n(933)](t,r[n(1232)])});continue;case"1":a[i(1470)](function(t,n){var e=i;return r[e(1288)](r[e(1240)](parseInt,n),r[e(1240)](parseInt,t))});continue;case"2":k[i(474)](0);continue;case"3":Prisma[i(761)][i(466)]({title:Prisma[i(1490)][i(467)](y[i(1146)]),url:Prisma[i(721)][i(614)+i(1326)](s),position:0,total:1,vast_url:o,vast_msg:Prisma[i(1490)][i(467)]("ad"),onGetChannel:function(){var t=i,n={url:Prisma[t(721)][t(614)+t(1326)](s),name:p[t(915)][t(1302)],group:p[t(915)][t(512)]||"",icons:[],position:0,total:1};return Prisma[t(761)][t(1132)+"dy"]({channel:n,position:0,total:1}),n},onGetProgram:function(t,n,e){var r=i;e[0][r(597)]()[r(1285)](Prisma[r(1490)][r(467)](h[r(1317)]))}});continue;case"4":var o=!!y[i(723)](P,Date[i(547)]())&&y[i(794)];continue;case"5":P=y[i(635)](Date[i(547)](),y[i(749)](y[i(1334)](1e3,60),y[i(1479)](x,30,80)));continue;case"6":var s=p[i(915)][i(698)][a[0]];continue}break}else Prisma[i(911)][i(483)]({text:Prisma[i(1490)][i(467)](y[i(1271)])})});continue;case"2":this[c(1006)][c(434)][c(1457)](g[c(668)]);continue;case"3":var a=g[c(961)](this[c(915)][c(1258)],g[c(727)]);continue;case"4":var o=w[c(1206)](this[c(915)][c(1314)]);continue;case"5":var s=a||g[c(1481)](o,0)&&g[c(696)](w[c(1206)](this[c(915)][c(922)]),0);continue;case"6":this[c(663)]=this[c(1097)+c(869)][c(796)](this);continue;case"7":w[c(459)](this[c(663)]);continue;case"8":this[c(1097)+c(869)]();continue}break}else for(var u=g[c(1205)][c(1389)]("|"),f=0;;){switch(u[f++]){case"0":this[c(915)][c(1423)+c(610)]||(this[c(865)][c(1033)][c(626)]=g[c(1307)]);continue;case"1":this[c(1006)][c(736)+c(1455)](g[c(1245)])[c(596)](d[0]);continue;case"2":var l=g[c(1331)]($,g[c(1343)][c(1144)](v[c(956)],g[c(557)])[c(1144)](v[c(1e3)],g[c(457)]));continue;case"3":var d=g[c(1032)]($,g[c(1082)]);continue;case"4":this[c(1006)][c(736)+c(1455)](g[c(1245)])[c(596)](l[0]);continue;case"5":var v=Prisma[c(721)][c(548)](this[c(915)][c(1314)]);continue}break}continue;case"3":this[c(1006)][c(736)+c(1455)](g[c(1093)])[c(1182)]=this[c(915)][c(1302)];continue;case"4":this[c(1006)][c(441)+c(816)](g[c(1382)],function(){var t=c;p[t(1425)]&&p[t(1425)](p[t(1006)],{})});continue;case"5":this[c(1006)][c(736)+c(1455)](g[c(1432)])[c(1182)]="";continue;case"6":var h={UJAco:g[c(760)]};continue;case"7":var m=Prisma[c(721)][c(548)](Date[c(547)]());continue;case"8":this[c(1006)][c(441)+c(816)](g[c(521)],this[c(655)][c(796)](this));continue;case"9":this[c(1499)]();continue;case"10":var b=Prisma[c(721)][c(548)](this[c(915)][c(1314)]);continue;case"11":var p=this;continue;case"12":this[c(865)]=this[c(1006)][c(736)+c(1455)](g[c(1028)])||{};continue;case"13":this[c(1006)]=g[c(752)]($,g[c(541)])[0];continue;case"14":this[c(1006)][c(736)+c(1455)](g[c(1151)])[c(1182)]=g[c(1471)](b[c(956)],m[c(956)])?g[c(531)]("В ",b[c(1200)]):b[c(908)];continue}break}}},{key:g[_(768)],value:function(){var t=_,n=w[t(1206)](this[t(915)][t(1314)]);this[t(1006)][t(1076)](g[t(508)])[t(1285)](g[t(696)](n,1e3)?g[t(1122)](g[t(828)](Prisma[t(1490)][t(467)](g[t(1230)]),": "),Prisma[t(721)][t(1430)+t(1164)](g[t(784)](n,1e3))):Prisma[t(1490)][t(467)](g[t(1294)](n,-g[t(1454)](g[t(1454)](g[t(1454)](1e3,60),60),4))?g[t(468)]:g[t(958)]))}},{key:g[_(1298)],value:function(){var n=_,e={tuixF:g[n(634)]},r=this;this[n(865)][n(785)]=function(){var t=n;r[t(1006)][t(434)][t(1457)](y[t(563)])},this[n(865)][n(789)]=function(){var t=n;r[t(865)][t(997)]=e[t(465)]}}},{key:g[_(521)],value:function(){var t=_,n=(g[t(1210)](this[t(1199)][t(512)],g[t(837)])?this[t(915)][t(1397)+t(963)]:this[t(915)][t(1423)+t(610)])||g[t(1130)];this[t(865)][t(997)]=n,this[t(719)]&&this[t(719)](this[t(1006)],{})}},{key:g[_(953)],value:function(){for(var t=_,n=g[t(516)][t(1389)]("|"),e=0;;){switch(n[e++]){case"0":w[t(1361)+"te"](this[t(663)]);continue;case"1":this[t(865)]=null;continue;case"2":this[t(1006)]=null;continue;case"3":this[t(1006)][t(1368)]();continue;case"4":this[t(865)][t(789)]=function(){};continue;case"5":this[t(865)][t(997)]="";continue;case"6":this[t(865)][t(785)]=function(){};continue}break}}},{key:g[_(447)],value:function(t){var n=_;return t?this[n(1006)]:y[n(702)]($,this[n(1006)])}}]));function n(t){var e=o,r={Uvgci:g[e(570)],dDLhU:function(t,n){return g[e(1444)](t,n)},pyMXU:function(t,n){return g[e(642)](t,n)},XzBZQ:g[e(727)],RLgWN:function(t,n){return g[e(1413)](t,n)},LPbVt:g[e(837)],vXhln:g[e(1198)],FOAbz:g[e(437)],dCXXK:function(t,n){return g[e(961)](t,n)},ktauU:function(t,n){return g[e(803)](t,n)},wcuJR:function(t,n){return g[e(1185)](t,n)},zBeyN:function(t,n){return g[e(1454)](t,n)},udxwz:g[e(524)],NEEEK:g[e(853)]},t=new Prisma[e(529)+e(1290)](t);return t[e(1128)]=function(){for(var u=e,t=r[u(1279)][u(1389)]("|"),n=0;;){switch(t[n++]){case"0":var f=this;continue;case"1":this[u(872)][u(588)](!0);continue;case"2":c[u(1492)](function(t){for(var r=u,n=l[r(1495)][r(1389)]("|"),e=0;;){switch(n[e++]){case"0":f[r(872)][r(588)](!1);continue;case"1":var i=[];continue;case"2":var a=t[r(660)](function(t){var n=r;return l[n(445)](w[n(1206)](t[n(1314)]),s)});continue;case"3":var o={XbLlo:function(t,n){return l[r(445)](t,n)},VMuHM:function(t,n){return l[r(904)](t,n)},hPpnF:l[r(1424)]};continue;case"4":var s=l[r(1496)](l[r(920)](l[r(598)](l[r(1126)](1e3,60),60),24),1);continue;case"5":f[r(1031)](i);continue;case"6":a[r(987)]&&i[r(483)]({title:Prisma[r(1490)][r(467)](l[r(799)]),nomore:!0,results:a[r(545)](function(t){var n=r,e={OSRNg:l[n(1175)]};return{cardClass:function(){return new m(t,{type:e[n(581)]})}}})});continue;case"7":c[r(987)]&&i[r(483)]({title:Prisma[r(1490)][r(467)](l[r(845)]),nomore:!0,results:c[r(545)](function(t){var n=r,e={YgATt:l[n(1075)]};return{cardClass:function(){return new m(t,{type:e[n(1228)]})}}})});continue;case"8":var c=t[r(660)](function(t){var n=r;return l[n(1019)](w[n(1206)](t[n(1314)]),s)||l[n(704)](t[n(1258)],l[n(1424)])})[r(660)](function(t){var n=r;return o[n(678)](w[n(1206)](t[n(922)]),0)||o[n(1391)](t[n(1258)],o[n(1218)])});continue}break}},this[u(597)][u(796)](this));continue;case"3":var l={IlypZ:function(t,n){return r[u(1184)](t,n)},YBzGQ:function(t,n){return r[u(1362)](t,n)},VvshU:r[u(1011)],roHwH:function(t,n){return r[u(1138)](t,n)},XcYza:r[u(522)],WWvou:r[u(456)],Uyqby:r[u(1113)],XWCjW:function(t,n){return r[u(1427)](t,n)},ddvOr:function(t,n){return r[u(1070)](t,n)},AkQQE:function(t,n){return r[u(1103)](t,n)},qoWzu:function(t,n){return r[u(979)](t,n)},BIarN:function(t,n){return r[u(1103)](t,n)},xXPyJ:r[u(791)],FWjNN:r[u(909)]};continue;case"4":return this[u(460)]()}break}},t}function r(){var e=o,r={ruRGa:g[e(966)],oMWMm:g[e(743)],cMgTA:function(t,n){return g[e(1494)](t,n)},YWTnL:g[e(1243)],Vkmes:g[e(1403)],ZqIhe:g[e(533)],RtheV:function(t,n){return g[e(1125)](t,n)},HSWQw:g[e(834)],FDuhn:function(t,n){return g[e(1471)](t,n)},xPacp:g[e(1209)],jwxjD:function(t){return g[e(1281)](t)}},i=(Prisma[e(998)][e(1457)](g[e(1227)],g[e(1040)]),g[e(850)]($,g[e(432)])[e(596)](Prisma[e(998)][e(1492)](g[e(1227)],{},!0)),Prisma[e(1490)][e(1457)]({broadcast_name:{ru:g[e(1448)],uk:g[e(1448)],en:g[e(724)]},broadcast_title:{ru:g[e(560)],uk:g[e(1224)],en:g[e(1442)]},broadcast_final_program:{ru:g[e(808)],uk:g[e(455)],en:g[e(1357)]},broadcast_final_bell_60:{ru:g[e(1348)],uk:g[e(795)],en:g[e(901)]},broadcast_final_bell_10:{ru:g[e(1100)],uk:g[e(439)],en:g[e(1355)]},broadcast_final_start_not_yet:{ru:g[e(1120)],uk:g[e(667)],en:g[e(1046)]},broadcast_final_started:{ru:g[e(1024)],uk:g[e(482)],en:g[e(836)]},broadcast_final_end:{ru:g[e(720)],uk:g[e(1388)],en:g[e(699)]},broadcast_final_nolink:{ru:g[e(1054)],uk:g[e(609)],en:g[e(801)]},broadcast_final_now_watch:{ru:g[e(885)],uk:g[e(1372)],en:g[e(1446)]},broadcast_final_soon_watch:{ru:g[e(1244)],uk:g[e(1443)],en:g[e(589)]}}),{type:g[e(1148)],version:g[e(1477)],name:Prisma[e(1490)][e(467)](g[e(1047)]),description:"",component:g[e(743)]});function a(){var n=e,t=r[n(1297)]($,r[n(1399)][n(1144)](i[n(940)],r[n(895)]));t.on(r[n(690)],function(){var t=n;Prisma[t(728)][t(483)]({url:"",title:Prisma[t(1490)][t(467)](r[t(833)]),component:r[t(1058)],page:1})}),r[n(1121)]($,r[n(514)]).eq(0)[n(596)](t)}Prisma[e(1256)][e(1178)]=i,Prisma[e(780)][e(1457)](g[e(743)],n),window[e(1360)]?g[e(1370)](a):Prisma[e(1280)][e(479)](g[e(564)],function(t){var n=e;r[n(544)](t[n(512)],r[n(1439)])&&r[n(1306)](a)}),window[e(1117)+e(486)+"y"]=!0}!window[o(1117)+o(486)+"y"]&&g[o(1376)](Prisma[o(1256)][o(772)+"l"],246)&&g[o(1281)](r)}();
})();
